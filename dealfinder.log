2025-05-07 12:08:05,654 - DealFinderAI - INFO - Logging initialized
2025-05-07 12:08:05,655 - DealFinderAI - INFO - Logging initialized
2025-05-07 12:08:05,655 - DealFinderAI.Main - INFO - Starting DealFinder AI
2025-05-07 12:08:05,655 - DealFinderAI.Main - INFO - Using mock scrapers
2025-05-07 12:08:05,655 - DealFinderAI.Scrapers - INFO - Initializing mock scraper agents
2025-05-07 12:08:29,454 - DealFinderAI.Controller - INFO - Processing user query: Find me the best deals on wireless headphones
2025-05-07 12:08:29,455 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: Find me the best deals on wireless headphones
2025-05-07 12:08:29,955 - DealFinderAI.GeminiAgent - ERROR - Error processing Gemini request: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 29
}
]
2025-05-07 12:09:38,990 - DealFinderAI.Controller - INFO - Processing user query: Find me the best deals on wireless headphones
2025-05-07 12:09:38,993 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: Find me the best deals on wireless headphones
2025-05-07 12:09:39,146 - DealFinderAI.GeminiAgent - ERROR - Error processing Gemini request: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-pro"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 20
}
]
2025-05-07 12:10:04,926 - DealFinderAI - INFO - Logging initialized
2025-05-07 12:10:04,927 - DealFinderAI - INFO - Logging initialized
2025-05-07 12:10:04,927 - DealFinderAI.Main - INFO - Starting DealFinder AI
2025-05-07 12:10:04,927 - DealFinderAI.Main - INFO - Using mock scrapers
2025-05-07 12:10:04,928 - DealFinderAI.Scrapers - INFO - Initializing mock scraper agents
2025-05-07 12:10:07,665 - DealFinderAI.Controller - INFO - Processing user query: Find me the best deals on wireless headphones
2025-05-07 12:10:07,666 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: Find me the best deals on wireless headphones
2025-05-07 12:10:08,732 - DealFinderAI.GeminiAgent - WARNING - Failed to parse Gemini response as JSON: ```json
{
  "product_type": "wireless headphones",
  "keywords": ["wireless", "headphones", "deals", "best"],
  "price_range": null,
  "brands": null,
  "features": null,
  "sorting_preference": "price_low_to_high",
  "buy_it_now": true
}
```

2025-05-07 12:10:08,732 - DealFinderAI.Controller - INFO - Parsed search parameters: {'product_type': 'wireless headphones', 'keywords': ['wireless', 'headphones', 'deals', 'best'], 'price_range': None, 'brands': None, 'features': None, 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-07 12:10:08,732 - DealFinderAI.AmazonScraperAgent - INFO - Mock Amazon search for: {'product_type': 'wireless headphones', 'keywords': ['wireless', 'headphones', 'deals', 'best'], 'price_range': None, 'brands': None, 'features': None, 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-07 12:10:08,733 - DealFinderAI.WalmartScraperAgent - INFO - Mock Walmart search for: {'product_type': 'wireless headphones', 'keywords': ['wireless', 'headphones', 'deals', 'best'], 'price_range': None, 'brands': None, 'features': None, 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-07 12:10:08,733 - DealFinderAI.EbayScraperAgent - INFO - Mock eBay search for: {'product_type': 'wireless headphones', 'keywords': ['wireless', 'headphones', 'deals', 'best'], 'price_range': None, 'brands': None, 'features': None, 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-07 12:10:08,733 - DealFinderAI.ResultsAggregatorAgent - INFO - Aggregating results for query: Find me the best deals on wireless headphones
2025-05-07 12:10:08,733 - DealFinderAI.ResultsAggregatorAgent - INFO - Found 3 results from various sources
2025-05-07 12:10:08,733 - DealFinderAI.PresentationAgent - INFO - Preparing presentation for 10 products
2025-05-07 12:12:14,668 - DealFinderAI - INFO - Logging initialized
2025-05-07 12:12:14,669 - DealFinderAI - INFO - Logging initialized
2025-05-07 12:12:14,669 - DealFinderAI.Main - INFO - Starting DealFinder AI
2025-05-07 12:12:14,669 - DealFinderAI.Main - INFO - Using real scrapers
2025-05-07 12:12:14,714 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-07 12:12:14,998 - DealFinderAI - INFO - Logging initialized
2025-05-07 12:12:14,999 - DealFinderAI - INFO - Logging initialized
2025-05-07 12:12:14,999 - DealFinderAI.Main - INFO - Starting DealFinder AI
2025-05-07 12:12:14,999 - DealFinderAI.Main - INFO - Using real scrapers
2025-05-07 12:12:15,025 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-07 12:12:33,341 - DealFinderAI.Controller - INFO - Processing user query: Find me the best deals on wireless headphones
2025-05-07 12:12:33,342 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: Find me the best deals on wireless headphones
2025-05-07 12:12:34,476 - DealFinderAI.GeminiAgent - WARNING - Failed to parse Gemini response as JSON: ```json
{
  "product_type": "wireless headphones",
  "keywords": ["wireless", "headphones", "deals", "best"],
  "price_range": null,
  "brands": null,
  "features": null,
  "sorting_preference": "price_low_to_high",
  "buy_it_now": true
}
```

2025-05-07 12:12:34,476 - DealFinderAI.Controller - INFO - Parsed search parameters: {'product_type': 'wireless headphones', 'keywords': ['wireless', 'headphones', 'deals', 'best'], 'price_range': None, 'brands': None, 'features': None, 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-07 12:12:34,476 - DealFinderAI.AmazonScraperAgent - INFO - Searching Amazon for: {'product_type': 'wireless headphones', 'keywords': ['wireless', 'headphones', 'deals', 'best'], 'price_range': None, 'brands': None, 'features': None, 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-07 12:12:36,336 - DealFinderAI.WalmartScraperAgent - INFO - Searching Walmart for: {'product_type': 'wireless headphones', 'keywords': ['wireless', 'headphones', 'deals', 'best'], 'price_range': None, 'brands': None, 'features': None, 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-07 12:12:39,134 - DealFinderAI.EbayScraperAgent - INFO - Searching eBay for: {'product_type': 'wireless headphones', 'keywords': ['wireless', 'headphones', 'deals', 'best'], 'price_range': None, 'brands': None, 'features': None, 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-07 12:12:40,722 - DealFinderAI.EbayScraperAgent - ERROR - Error extracting product data: 'NoneType' object has no attribute 'attrs'
2025-05-07 12:12:40,723 - DealFinderAI.EbayScraperAgent - ERROR - Error extracting product data: 'NoneType' object has no attribute 'attrs'
2025-05-07 12:12:40,724 - DealFinderAI.EbayScraperAgent - ERROR - Error extracting product data: 'NoneType' object has no attribute 'attrs'
2025-05-07 12:12:42,041 - DealFinderAI.ResultsAggregatorAgent - INFO - Aggregating results for query: Find me the best deals on wireless headphones
2025-05-07 12:12:42,041 - DealFinderAI.ResultsAggregatorAgent - INFO - Found 3 results from various sources
2025-05-07 12:12:42,041 - DealFinderAI.PresentationAgent - INFO - Preparing presentation for 10 products
2025-05-07 12:14:21,941 - DealFinderAI.Controller - INFO - Processing user query: find me best deal for sony headphones
2025-05-07 12:14:21,943 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: find me best deal for sony headphones
2025-05-07 12:14:22,792 - DealFinderAI.GeminiAgent - WARNING - Failed to parse Gemini response as JSON: ```json
{
  "product_type": "headphones",
  "keywords": ["sony", "headphones"],
  "price_range": null,
  "brands": ["Sony"],
  "features": [],
  "sorting_preference": "price_low_to_high",
  "buy_it_now": true
}
```

2025-05-07 12:14:22,793 - DealFinderAI.Controller - INFO - Parsed search parameters: {'product_type': 'headphones', 'keywords': ['sony', 'headphones'], 'price_range': None, 'brands': ['Sony'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-07 12:14:22,793 - DealFinderAI.AmazonScraperAgent - INFO - Searching Amazon for: {'product_type': 'headphones', 'keywords': ['sony', 'headphones'], 'price_range': None, 'brands': ['Sony'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-07 12:14:25,472 - DealFinderAI.WalmartScraperAgent - INFO - Searching Walmart for: {'product_type': 'headphones', 'keywords': ['sony', 'headphones'], 'price_range': None, 'brands': ['Sony'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-07 12:14:28,983 - DealFinderAI.EbayScraperAgent - INFO - Searching eBay for: {'product_type': 'headphones', 'keywords': ['sony', 'headphones'], 'price_range': None, 'brands': ['Sony'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-07 12:14:30,346 - DealFinderAI.EbayScraperAgent - ERROR - Error extracting product data: 'NoneType' object has no attribute 'attrs'
2025-05-07 12:14:30,346 - DealFinderAI.EbayScraperAgent - ERROR - Error extracting product data: 'NoneType' object has no attribute 'attrs'
2025-05-07 12:14:30,346 - DealFinderAI.EbayScraperAgent - ERROR - Error extracting product data: 'NoneType' object has no attribute 'attrs'
2025-05-07 12:14:31,052 - DealFinderAI.ResultsAggregatorAgent - INFO - Aggregating results for query: find me best deal for sony headphones
2025-05-07 12:14:31,052 - DealFinderAI.ResultsAggregatorAgent - INFO - Found 3 results from various sources
2025-05-07 12:14:31,052 - DealFinderAI.PresentationAgent - INFO - Preparing presentation for 10 products
2025-05-07 12:15:10,901 - DealFinderAI.Controller - INFO - Processing user query: i want to buy sony xm 1000 series
2025-05-07 12:15:10,903 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: i want to buy sony xm 1000 series
2025-05-07 12:15:11,773 - DealFinderAI.GeminiAgent - WARNING - Failed to parse Gemini response as JSON: ```json
{
  "product_type": "headphones",
  "keywords": ["sony", "xm 1000 series"],
  "price_range": null,
  "brands": ["sony"],
  "features": [],
  "sorting_preference": null,
  "buy_it_now": true
}
```

2025-05-07 12:15:11,773 - DealFinderAI.Controller - INFO - Parsed search parameters: {'product_type': 'headphones', 'keywords': ['sony', 'xm 1000 series'], 'price_range': None, 'brands': ['sony'], 'features': [], 'sorting_preference': None, 'buy_it_now': True}
2025-05-07 12:15:11,774 - DealFinderAI.AmazonScraperAgent - INFO - Searching Amazon for: {'product_type': 'headphones', 'keywords': ['sony', 'xm 1000 series'], 'price_range': None, 'brands': ['sony'], 'features': [], 'sorting_preference': None, 'buy_it_now': True}
2025-05-07 12:15:13,986 - DealFinderAI.WalmartScraperAgent - INFO - Searching Walmart for: {'product_type': 'headphones', 'keywords': ['sony', 'xm 1000 series'], 'price_range': None, 'brands': ['sony'], 'features': [], 'sorting_preference': None, 'buy_it_now': True}
2025-05-07 12:15:16,537 - DealFinderAI.EbayScraperAgent - INFO - Searching eBay for: {'product_type': 'headphones', 'keywords': ['sony', 'xm 1000 series'], 'price_range': None, 'brands': ['sony'], 'features': [], 'sorting_preference': None, 'buy_it_now': True}
2025-05-07 12:15:17,851 - DealFinderAI.EbayScraperAgent - ERROR - Error extracting product data: 'NoneType' object has no attribute 'attrs'
2025-05-07 12:15:17,852 - DealFinderAI.EbayScraperAgent - ERROR - Error extracting product data: 'NoneType' object has no attribute 'attrs'
2025-05-07 12:15:17,852 - DealFinderAI.EbayScraperAgent - ERROR - Error extracting product data: 'NoneType' object has no attribute 'attrs'
2025-05-07 12:15:18,682 - DealFinderAI.ResultsAggregatorAgent - INFO - Aggregating results for query: i want to buy sony xm 1000 series
2025-05-07 12:15:18,682 - DealFinderAI.ResultsAggregatorAgent - INFO - Found 3 results from various sources
2025-05-07 12:15:18,683 - DealFinderAI.PresentationAgent - INFO - Preparing presentation for 10 products
2025-05-07 13:45:38,921 - DealFinderAI - INFO - Logging initialized
2025-05-07 13:45:38,921 - DealFinderAI - INFO - Logging initialized
2025-05-07 13:45:38,922 - DealFinderAI.Main - INFO - Starting DealFinder AI
2025-05-07 13:45:38,922 - DealFinderAI.Main - INFO - Using real scrapers
2025-05-07 13:45:38,969 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-07 13:45:39,230 - DealFinderAI - INFO - Logging initialized
2025-05-07 13:45:39,230 - DealFinderAI - INFO - Logging initialized
2025-05-07 13:45:39,231 - DealFinderAI.Main - INFO - Starting DealFinder AI
2025-05-07 13:45:39,231 - DealFinderAI.Main - INFO - Using real scrapers
2025-05-07 13:45:39,257 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-07 13:46:16,967 - DealFinderAI.Controller - INFO - Processing user query: sony mx 1000 series headphones from cheapest
2025-05-07 13:46:16,968 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: sony mx 1000 series headphones from cheapest
2025-05-07 13:46:18,072 - DealFinderAI.GeminiAgent - WARNING - Failed to parse Gemini response as JSON: ```json
{
  "product_type": "headphones",
  "keywords": ["sony", "mx 1000 series"],
  "price_range": null,
  "brands": ["sony"],
  "features": [],
  "sorting_preference": "price_low_to_high",
  "buy_it_now": true
}
```

2025-05-07 13:46:18,072 - DealFinderAI.Controller - INFO - Parsed search parameters: {'product_type': 'headphones', 'keywords': ['sony', 'mx 1000 series'], 'price_range': None, 'brands': ['sony'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-07 13:46:18,072 - DealFinderAI.AmazonScraperAgent - INFO - Searching Amazon for: {'product_type': 'headphones', 'keywords': ['sony', 'mx 1000 series'], 'price_range': None, 'brands': ['sony'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-07 13:46:20,446 - DealFinderAI.WalmartScraperAgent - INFO - Searching Walmart for: {'product_type': 'headphones', 'keywords': ['sony', 'mx 1000 series'], 'price_range': None, 'brands': ['sony'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-07 13:46:23,876 - DealFinderAI.EbayScraperAgent - INFO - Searching eBay for: {'product_type': 'headphones', 'keywords': ['sony', 'mx 1000 series'], 'price_range': None, 'brands': ['sony'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-07 13:46:26,370 - DealFinderAI.ResultsAggregatorAgent - INFO - Aggregating results for query: sony mx 1000 series headphones from cheapest
2025-05-07 13:46:26,371 - DealFinderAI.ResultsAggregatorAgent - INFO - Found 3 results from various sources
2025-05-07 13:46:26,371 - DealFinderAI.PresentationAgent - INFO - Preparing presentation for 8 products
2025-05-07 13:50:42,651 - DealFinderAI - INFO - Logging initialized
2025-05-07 13:50:42,651 - DealFinderAI - INFO - Logging initialized
2025-05-07 13:50:42,652 - DealFinderAI.Main - INFO - Starting DealFinder AI
2025-05-07 13:50:42,652 - DealFinderAI.Main - INFO - Using real scrapers
2025-05-07 13:50:42,697 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-07 13:51:06,325 - DealFinderAI.Controller - INFO - Processing user query: sont mx 1000
2025-05-07 13:51:06,325 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: sont mx 1000
2025-05-07 13:51:07,333 - DealFinderAI.GeminiAgent - WARNING - Failed to parse Gemini response as JSON: ```json
{
  "product_type": "mx",
  "keywords": ["sont", "1000"],
  "price_range": null,
  "brands": ["sont"],
  "features": [],
  "sorting_preference": null,
  "buy_it_now": null
}
```

2025-05-07 13:51:07,333 - DealFinderAI.Controller - INFO - Parsed search parameters: {'product_type': 'mx', 'keywords': ['sont', '1000'], 'price_range': None, 'brands': ['sont'], 'features': [], 'sorting_preference': None, 'buy_it_now': None}
2025-05-07 13:51:07,334 - DealFinderAI.AmazonScraperAgent - INFO - Searching Amazon for: {'product_type': 'mx', 'keywords': ['sont', '1000'], 'price_range': None, 'brands': ['sont'], 'features': [], 'sorting_preference': None, 'buy_it_now': None}
2025-05-07 13:51:09,939 - DealFinderAI.WalmartScraperAgent - INFO - Searching Walmart for: {'product_type': 'mx', 'keywords': ['sont', '1000'], 'price_range': None, 'brands': ['sont'], 'features': [], 'sorting_preference': None, 'buy_it_now': None}
2025-05-07 13:51:13,069 - DealFinderAI.EbayScraperAgent - INFO - Searching eBay for: {'product_type': 'mx', 'keywords': ['sont', '1000'], 'price_range': None, 'brands': ['sont'], 'features': [], 'sorting_preference': None, 'buy_it_now': None}
2025-05-07 13:51:16,324 - DealFinderAI.ResultsAggregatorAgent - INFO - Aggregating results for query: sont mx 1000
2025-05-07 13:51:16,325 - DealFinderAI.ResultsAggregatorAgent - INFO - Found 3 results from various sources
2025-05-07 13:51:16,325 - DealFinderAI.PresentationAgent - INFO - Preparing presentation for 8 products
2025-05-07 13:51:52,068 - DealFinderAI.Controller - INFO - Processing user query: yes give me more deatil about product 1
2025-05-07 13:51:52,070 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: yes give me more deatil about product 1
2025-05-07 13:51:52,908 - DealFinderAI.GeminiAgent - WARNING - Failed to parse Gemini response as JSON: ```json
{
  "product_type": null,
  "keywords": ["product 1"],
  "price_range": null,
  "brands": null,
  "features": null,
  "sorting_preference": null,
  "buy_it_now": null
}
```

2025-05-07 13:51:52,909 - DealFinderAI.Controller - INFO - Parsed search parameters: {'product_type': None, 'keywords': ['product 1'], 'price_range': None, 'brands': None, 'features': None, 'sorting_preference': None, 'buy_it_now': None}
2025-05-07 13:51:52,909 - DealFinderAI.AmazonScraperAgent - INFO - Searching Amazon for: {'product_type': None, 'keywords': ['product 1'], 'price_range': None, 'brands': None, 'features': None, 'sorting_preference': None, 'buy_it_now': None}
2025-05-07 13:51:52,909 - DealFinderAI.AmazonScraperAgent - ERROR - Error scraping Amazon: sequence item 0: expected str instance, NoneType found
2025-05-07 13:51:52,910 - DealFinderAI.Controller - WARNING - Amazon search error: {'error': 'Amazon scraping error: sequence item 0: expected str instance, NoneType found'}
2025-05-07 13:51:52,910 - DealFinderAI.WalmartScraperAgent - INFO - Searching Walmart for: {'product_type': None, 'keywords': ['product 1'], 'price_range': None, 'brands': None, 'features': None, 'sorting_preference': None, 'buy_it_now': None}
2025-05-07 13:51:52,910 - DealFinderAI.WalmartScraperAgent - ERROR - Error scraping Walmart: sequence item 0: expected str instance, NoneType found
2025-05-07 13:51:52,910 - DealFinderAI.Controller - WARNING - Walmart search error: {'error': 'Walmart scraping error: sequence item 0: expected str instance, NoneType found'}
2025-05-07 13:51:52,910 - DealFinderAI.EbayScraperAgent - INFO - Searching eBay for: {'product_type': None, 'keywords': ['product 1'], 'price_range': None, 'brands': None, 'features': None, 'sorting_preference': None, 'buy_it_now': None}
2025-05-07 13:51:52,910 - DealFinderAI.EbayScraperAgent - ERROR - Error scraping eBay: sequence item 0: expected str instance, NoneType found
2025-05-07 13:51:52,910 - DealFinderAI.Controller - WARNING - eBay search error: {'error': 'eBay scraping error: sequence item 0: expected str instance, NoneType found'}
2025-05-07 13:51:52,911 - DealFinderAI.ResultsAggregatorAgent - INFO - Aggregating results for query: yes give me more deatil about product 1
2025-05-07 13:51:52,911 - DealFinderAI.ResultsAggregatorAgent - INFO - Found 0 results from various sources
2025-05-07 13:51:52,911 - DealFinderAI.PresentationAgent - INFO - Preparing presentation for 0 products
2025-05-07 13:54:25,151 - DealFinderAI.Controller - INFO - Processing user query: soundcore p40i
2025-05-07 13:54:25,153 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: soundcore p40i
2025-05-07 13:54:26,066 - DealFinderAI.GeminiAgent - WARNING - Failed to parse Gemini response as JSON: ```json
{
  "product_type": "earbuds",
  "keywords": ["soundcore", "p40i"],
  "price_range": null,
  "brands": ["Soundcore"],
  "features": [],
  "sorting_preference": null,
  "buy_it_now": true
}
```

2025-05-07 13:54:26,067 - DealFinderAI.Controller - INFO - Parsed search parameters: {'product_type': 'earbuds', 'keywords': ['soundcore', 'p40i'], 'price_range': None, 'brands': ['Soundcore'], 'features': [], 'sorting_preference': None, 'buy_it_now': True}
2025-05-07 13:54:26,067 - DealFinderAI.AmazonScraperAgent - INFO - Searching Amazon for: {'product_type': 'earbuds', 'keywords': ['soundcore', 'p40i'], 'price_range': None, 'brands': ['Soundcore'], 'features': [], 'sorting_preference': None, 'buy_it_now': True}
2025-05-07 13:54:28,486 - DealFinderAI.WalmartScraperAgent - INFO - Searching Walmart for: {'product_type': 'earbuds', 'keywords': ['soundcore', 'p40i'], 'price_range': None, 'brands': ['Soundcore'], 'features': [], 'sorting_preference': None, 'buy_it_now': True}
2025-05-07 13:54:31,694 - DealFinderAI.EbayScraperAgent - INFO - Searching eBay for: {'product_type': 'earbuds', 'keywords': ['soundcore', 'p40i'], 'price_range': None, 'brands': ['Soundcore'], 'features': [], 'sorting_preference': None, 'buy_it_now': True}
2025-05-07 13:54:33,747 - DealFinderAI.ResultsAggregatorAgent - INFO - Aggregating results for query: soundcore p40i
2025-05-07 13:54:33,747 - DealFinderAI.ResultsAggregatorAgent - INFO - Found 3 results from various sources
2025-05-07 13:54:33,748 - DealFinderAI.PresentationAgent - INFO - Preparing presentation for 10 products
2025-05-07 15:11:05,947 - DealFinderAI - INFO - Logging initialized
2025-05-07 15:11:05,947 - DealFinderAI.Main - INFO - Starting DealFinder AI
2025-05-07 15:11:05,947 - DealFinderAI.Main - INFO - Using real scrapers
2025-05-07 15:11:05,992 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-07 15:11:06,263 - DealFinderAI - INFO - Logging initialized
2025-05-07 15:11:06,263 - DealFinderAI.Main - INFO - Starting DealFinder AI
2025-05-07 15:11:06,263 - DealFinderAI.Main - INFO - Using real scrapers
2025-05-07 15:11:06,288 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-07 15:11:35,788 - DealFinderAI.Controller - INFO - Processing user query: find me the best deal on sony mx5 1000
2025-05-07 15:11:35,789 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: find me the best deal on sony mx5 1000
2025-05-07 15:11:36,868 - DealFinderAI.GeminiAgent - WARNING - Failed to parse Gemini response as JSON: ```json
{
  "product_type": "electronics",
  "keywords": ["sony", "mx5", "1000"],
  "price_range": null,
  "brands": ["Sony"],
  "features": [],
  "sorting_preference": "price_low_to_high",
  "buy_it_now": true
}
```

2025-05-07 15:11:36,868 - DealFinderAI.Controller - INFO - Parsed search parameters: {'product_type': 'electronics', 'keywords': ['sony', 'mx5', '1000'], 'price_range': None, 'brands': ['Sony'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-07 15:11:36,868 - DealFinderAI.AmazonScraperAgent - INFO - Searching Amazon for: {'product_type': 'electronics', 'keywords': ['sony', 'mx5', '1000'], 'price_range': None, 'brands': ['Sony'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-07 15:11:39,625 - DealFinderAI.WalmartScraperAgent - INFO - Searching Walmart for: {'product_type': 'electronics', 'keywords': ['sony', 'mx5', '1000'], 'price_range': None, 'brands': ['Sony'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-07 15:11:42,938 - DealFinderAI.EbayScraperAgent - INFO - Searching eBay for: {'product_type': 'electronics', 'keywords': ['sony', 'mx5', '1000'], 'price_range': None, 'brands': ['Sony'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-07 15:11:44,926 - DealFinderAI.ResultsAggregatorAgent - INFO - Aggregating results for query: find me the best deal on sony mx5 1000
2025-05-07 15:11:44,926 - DealFinderAI.ResultsAggregatorAgent - INFO - Found 3 results from various sources
2025-05-07 15:11:44,927 - DealFinderAI.ProductComparisonAgent - INFO - Comparing products for query: find me the best deal on sony mx5 1000
2025-05-07 15:11:44,927 - DealFinderAI.ProductComparisonAgent - INFO - Found 10 products to compare
2025-05-07 15:11:44,928 - DealFinderAI.PresentationAgent - INFO - Preparing presentation for 10 products
2025-05-07 15:13:30,618 - DealFinderAI.Controller - INFO - Processing user query: compare product 1
2025-05-07 15:13:30,620 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: compare product 1
2025-05-07 15:13:31,440 - DealFinderAI.GeminiAgent - WARNING - Failed to parse Gemini response as JSON: ```json
{
  "product_type": null,
  "keywords": ["product 1"],
  "price_range": null,
  "brands": null,
  "features": null,
  "sorting_preference": null,
  "buy_it_now": null
}
```

2025-05-07 15:13:31,440 - DealFinderAI.Controller - INFO - Parsed search parameters: {'product_type': None, 'keywords': ['product 1'], 'price_range': None, 'brands': None, 'features': None, 'sorting_preference': None, 'buy_it_now': None}
2025-05-07 15:13:31,441 - DealFinderAI.AmazonScraperAgent - INFO - Searching Amazon for: {'product_type': None, 'keywords': ['product 1'], 'price_range': None, 'brands': None, 'features': None, 'sorting_preference': None, 'buy_it_now': None}
2025-05-07 15:13:31,441 - DealFinderAI.AmazonScraperAgent - ERROR - Error scraping Amazon: sequence item 0: expected str instance, NoneType found
2025-05-07 15:13:31,441 - DealFinderAI.Controller - WARNING - Amazon search error: {'error': 'Amazon scraping error: sequence item 0: expected str instance, NoneType found'}
2025-05-07 15:13:31,442 - DealFinderAI.WalmartScraperAgent - INFO - Searching Walmart for: {'product_type': None, 'keywords': ['product 1'], 'price_range': None, 'brands': None, 'features': None, 'sorting_preference': None, 'buy_it_now': None}
2025-05-07 15:13:31,442 - DealFinderAI.WalmartScraperAgent - ERROR - Error scraping Walmart: sequence item 0: expected str instance, NoneType found
2025-05-07 15:13:31,442 - DealFinderAI.Controller - WARNING - Walmart search error: {'error': 'Walmart scraping error: sequence item 0: expected str instance, NoneType found'}
2025-05-07 15:13:31,442 - DealFinderAI.EbayScraperAgent - INFO - Searching eBay for: {'product_type': None, 'keywords': ['product 1'], 'price_range': None, 'brands': None, 'features': None, 'sorting_preference': None, 'buy_it_now': None}
2025-05-07 15:13:31,442 - DealFinderAI.EbayScraperAgent - ERROR - Error scraping eBay: sequence item 0: expected str instance, NoneType found
2025-05-07 15:13:31,443 - DealFinderAI.Controller - WARNING - eBay search error: {'error': 'eBay scraping error: sequence item 0: expected str instance, NoneType found'}
2025-05-07 15:13:31,443 - DealFinderAI.ResultsAggregatorAgent - INFO - Aggregating results for query: compare product 1
2025-05-07 15:13:31,443 - DealFinderAI.ResultsAggregatorAgent - INFO - Found 0 results from various sources
2025-05-07 15:13:31,443 - DealFinderAI.ProductComparisonAgent - INFO - Comparing products for query: compare product 1
2025-05-07 15:13:31,443 - DealFinderAI.ProductComparisonAgent - INFO - Found 0 products to compare
2025-05-07 15:13:31,443 - DealFinderAI.PresentationAgent - INFO - Preparing presentation for 0 products
2025-05-07 15:14:48,853 - DealFinderAI.Controller - INFO - Processing user query: Find Sony WH-1000XM4 noise-cancelling headphones
2025-05-07 15:14:48,855 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: Find Sony WH-1000XM4 noise-cancelling headphones
2025-05-07 15:14:49,775 - DealFinderAI.GeminiAgent - WARNING - Failed to parse Gemini response as JSON: ```json
{
  "product_type": "headphones",
  "keywords": ["noise-cancelling", "WH-1000XM4"],
  "price_range": null,
  "brands": ["Sony"],
  "features": ["noise-cancelling"],
  "sorting_preference": null,
  "buy_it_now": true
}
```

2025-05-07 15:14:49,776 - DealFinderAI.Controller - INFO - Parsed search parameters: {'product_type': 'headphones', 'keywords': ['noise-cancelling', 'WH-1000XM4'], 'price_range': None, 'brands': ['Sony'], 'features': ['noise-cancelling'], 'sorting_preference': None, 'buy_it_now': True}
2025-05-07 15:14:49,776 - DealFinderAI.AmazonScraperAgent - INFO - Searching Amazon for: {'product_type': 'headphones', 'keywords': ['noise-cancelling', 'WH-1000XM4'], 'price_range': None, 'brands': ['Sony'], 'features': ['noise-cancelling'], 'sorting_preference': None, 'buy_it_now': True}
2025-05-07 15:14:52,646 - DealFinderAI.WalmartScraperAgent - INFO - Searching Walmart for: {'product_type': 'headphones', 'keywords': ['noise-cancelling', 'WH-1000XM4'], 'price_range': None, 'brands': ['Sony'], 'features': ['noise-cancelling'], 'sorting_preference': None, 'buy_it_now': True}
2025-05-07 15:14:57,078 - DealFinderAI.EbayScraperAgent - INFO - Searching eBay for: {'product_type': 'headphones', 'keywords': ['noise-cancelling', 'WH-1000XM4'], 'price_range': None, 'brands': ['Sony'], 'features': ['noise-cancelling'], 'sorting_preference': None, 'buy_it_now': True}
2025-05-07 15:14:59,881 - DealFinderAI.ResultsAggregatorAgent - INFO - Aggregating results for query: Find Sony WH-1000XM4 noise-cancelling headphones
2025-05-07 15:14:59,881 - DealFinderAI.ResultsAggregatorAgent - INFO - Found 3 results from various sources
2025-05-07 15:14:59,882 - DealFinderAI.ProductComparisonAgent - INFO - Comparing products for query: Find Sony WH-1000XM4 noise-cancelling headphones
2025-05-07 15:14:59,882 - DealFinderAI.ProductComparisonAgent - INFO - Found 10 products to compare
2025-05-07 15:14:59,883 - DealFinderAI.PresentationAgent - INFO - Preparing presentation for 10 products
2025-05-07 15:15:35,613 - DealFinderAI.Controller - INFO - Processing user query: Tell me more about the best deal
2025-05-07 15:15:35,615 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: Tell me more about the best deal
2025-05-07 15:15:36,453 - DealFinderAI.GeminiAgent - WARNING - Failed to parse Gemini response as JSON: ```json
{
  "product_type": null,
  "keywords": ["best deal"],
  "price_range": null,
  "brands": null,
  "features": null,
  "sorting_preference": "price_low_to_high",
  "buy_it_now": true
}
```

2025-05-07 15:15:36,454 - DealFinderAI.Controller - INFO - Parsed search parameters: {'product_type': None, 'keywords': ['best deal'], 'price_range': None, 'brands': None, 'features': None, 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-07 15:15:36,454 - DealFinderAI.AmazonScraperAgent - INFO - Searching Amazon for: {'product_type': None, 'keywords': ['best deal'], 'price_range': None, 'brands': None, 'features': None, 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-07 15:15:36,455 - DealFinderAI.AmazonScraperAgent - ERROR - Error scraping Amazon: sequence item 0: expected str instance, NoneType found
2025-05-07 15:15:36,455 - DealFinderAI.Controller - WARNING - Amazon search error: {'error': 'Amazon scraping error: sequence item 0: expected str instance, NoneType found'}
2025-05-07 15:15:36,455 - DealFinderAI.WalmartScraperAgent - INFO - Searching Walmart for: {'product_type': None, 'keywords': ['best deal'], 'price_range': None, 'brands': None, 'features': None, 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-07 15:15:36,455 - DealFinderAI.WalmartScraperAgent - ERROR - Error scraping Walmart: sequence item 0: expected str instance, NoneType found
2025-05-07 15:15:36,455 - DealFinderAI.Controller - WARNING - Walmart search error: {'error': 'Walmart scraping error: sequence item 0: expected str instance, NoneType found'}
2025-05-07 15:15:36,455 - DealFinderAI.EbayScraperAgent - INFO - Searching eBay for: {'product_type': None, 'keywords': ['best deal'], 'price_range': None, 'brands': None, 'features': None, 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-07 15:15:36,455 - DealFinderAI.EbayScraperAgent - ERROR - Error scraping eBay: sequence item 0: expected str instance, NoneType found
2025-05-07 15:15:36,455 - DealFinderAI.Controller - WARNING - eBay search error: {'error': 'eBay scraping error: sequence item 0: expected str instance, NoneType found'}
2025-05-07 15:15:36,455 - DealFinderAI.ResultsAggregatorAgent - INFO - Aggregating results for query: Tell me more about the best deal
2025-05-07 15:15:36,455 - DealFinderAI.ResultsAggregatorAgent - INFO - Found 0 results from various sources
2025-05-07 15:15:36,456 - DealFinderAI.ProductComparisonAgent - INFO - Comparing products for query: Tell me more about the best deal
2025-05-07 15:15:36,456 - DealFinderAI.ProductComparisonAgent - INFO - Found 0 products to compare
2025-05-07 15:15:36,456 - DealFinderAI.PresentationAgent - INFO - Preparing presentation for 0 products
2025-05-07 16:00:00,570 - DealFinderAI - INFO - Logging initialized
2025-05-07 16:00:00,571 - DealFinderAI.Main - INFO - Starting DealFinder AI
2025-05-07 16:00:00,571 - DealFinderAI.Main - INFO - Using real scrapers
2025-05-07 16:00:00,616 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-07 16:00:00,881 - DealFinderAI - INFO - Logging initialized
2025-05-07 16:00:00,881 - DealFinderAI.Main - INFO - Starting DealFinder AI
2025-05-07 16:00:00,881 - DealFinderAI.Main - INFO - Using real scrapers
2025-05-07 16:00:00,905 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-07 16:00:26,884 - DealFinderAI.Controller - INFO - Processing user query: find me the best deal for lenovo laptop with 32gb ram
2025-05-07 16:00:26,885 - DealFinderAI.ChatMemoryAgent - INFO - Analyzing query: 'find me the best deal for lenovo laptop with 32gb ram' for conversation 20250507160026
2025-05-07 16:00:26,886 - DealFinderAI.ChatMemoryAgent - INFO - Current product info: False
2025-05-07 16:00:26,886 - DealFinderAI.ChatMemoryAgent - INFO - No product context available for this conversation
2025-05-07 16:00:26,886 - DealFinderAI.Controller - INFO - Analyze response: {'is_follow_up': False, 'focused_product': None, 'referenced_products': [], 'products': []}
2025-05-07 16:00:26,886 - DealFinderAI.Controller - INFO - Is follow-up? False
2025-05-07 16:00:26,886 - DealFinderAI.Controller - INFO - Referenced products: 0
2025-05-07 16:00:26,886 - DealFinderAI.Controller - INFO - Processing as new search query
2025-05-07 16:00:26,886 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: find me the best deal for lenovo laptop with 32gb ram
2025-05-07 16:00:28,123 - DealFinderAI.GeminiAgent - WARNING - Failed to parse Gemini response as JSON: ```json
{
  "product_type": "laptop",
  "keywords": ["lenovo", "laptop", "32gb ram"],
  "price_range": null,
  "brands": ["Lenovo"],
  "features": ["32gb ram"],
  "sorting_preference": "price_low_to_high",
  "buy_it_now": true
}
```

2025-05-07 16:00:28,123 - DealFinderAI.Controller - INFO - Parsed search parameters: {'product_type': 'laptop', 'keywords': ['lenovo', 'laptop', '32gb ram'], 'price_range': None, 'brands': ['Lenovo'], 'features': ['32gb ram'], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-07 16:00:28,123 - DealFinderAI.AmazonScraperAgent - INFO - Searching Amazon for: {'product_type': 'laptop', 'keywords': ['lenovo', 'laptop', '32gb ram'], 'price_range': None, 'brands': ['Lenovo'], 'features': ['32gb ram'], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-07 16:00:30,107 - DealFinderAI.WalmartScraperAgent - INFO - Searching Walmart for: {'product_type': 'laptop', 'keywords': ['lenovo', 'laptop', '32gb ram'], 'price_range': None, 'brands': ['Lenovo'], 'features': ['32gb ram'], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-07 16:00:33,045 - DealFinderAI.EbayScraperAgent - INFO - Searching eBay for: {'product_type': 'laptop', 'keywords': ['lenovo', 'laptop', '32gb ram'], 'price_range': None, 'brands': ['Lenovo'], 'features': ['32gb ram'], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-07 16:00:35,010 - DealFinderAI.ResultsAggregatorAgent - INFO - Aggregating results for query: find me the best deal for lenovo laptop with 32gb ram
2025-05-07 16:00:35,011 - DealFinderAI.ResultsAggregatorAgent - INFO - Found 3 results from various sources
2025-05-07 16:00:35,011 - DealFinderAI.ProductComparisonAgent - INFO - Comparing products for query: find me the best deal for lenovo laptop with 32gb ram
2025-05-07 16:00:35,011 - DealFinderAI.ProductComparisonAgent - INFO - Found 10 products to compare
2025-05-07 16:00:35,012 - DealFinderAI.PresentationAgent - INFO - Preparing presentation for 10 products
2025-05-07 16:00:35,013 - DealFinderAI.ChatMemoryAgent - INFO - Storing context for conversation 20250507160026
2025-05-07 16:00:35,013 - DealFinderAI.ChatMemoryAgent - INFO - Storing 10 products for conversation 20250507160026
2025-05-07 16:00:35,013 - DealFinderAI.Controller - INFO - Successfully stored search results in memory
2025-05-07 16:03:37,439 - DealFinderAI - INFO - Logging initialized
2025-05-07 16:03:53,869 - DealFinderAI - INFO - Logging initialized
2025-05-07 16:03:53,869 - DealFinderAI.Main - INFO - Starting DealFinder AI
2025-05-07 16:03:53,869 - DealFinderAI.Main - INFO - Using mock scrapers
2025-05-07 16:03:53,931 - DealFinderAI.Scrapers - INFO - Initializing mock scraper agents
2025-05-07 16:04:13,548 - DealFinderAI - INFO - Logging initialized
2025-05-07 16:04:13,548 - DealFinderAI.Main - INFO - Starting DealFinder AI
2025-05-07 16:04:13,548 - DealFinderAI.Main - INFO - Using mock scrapers
2025-05-07 16:04:13,590 - DealFinderAI.Scrapers - INFO - Initializing mock scraper agents
2025-05-07 16:04:14,191 - DealFinderAI - INFO - Logging initialized
2025-05-07 16:04:14,192 - DealFinderAI.Main - INFO - Starting DealFinder AI
2025-05-07 16:04:14,192 - DealFinderAI.Main - INFO - Using mock scrapers
2025-05-07 16:04:14,221 - DealFinderAI.Scrapers - INFO - Initializing mock scraper agents
2025-05-07 16:04:46,883 - DealFinderAI.Controller - INFO - Processing user query: find me the best deal for sony headphones
2025-05-07 16:04:46,883 - DealFinderAI.ChatMemoryAgent - INFO - Analyzing query: 'find me the best deal for sony headphones' for conversation 20250507160446
2025-05-07 16:04:46,883 - DealFinderAI.ChatMemoryAgent - INFO - Current product info: False
2025-05-07 16:04:46,883 - DealFinderAI.ChatMemoryAgent - INFO - No product context available for this conversation
2025-05-07 16:04:46,883 - DealFinderAI.Controller - INFO - Analyze response: {'is_follow_up': False, 'focused_product': None, 'referenced_products': [], 'products': []}
2025-05-07 16:04:46,883 - DealFinderAI.Controller - INFO - Is follow-up? False
2025-05-07 16:04:46,883 - DealFinderAI.Controller - INFO - Referenced products: 0
2025-05-07 16:04:46,883 - DealFinderAI.Controller - INFO - Processing as new search query
2025-05-07 16:04:46,883 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: find me the best deal for sony headphones
2025-05-07 16:04:47,940 - DealFinderAI.GeminiAgent - WARNING - Failed to parse Gemini response as JSON: ```json
{
  "product_type": "headphones",
  "keywords": ["sony", "headphones"],
  "price_range": null,
  "brands": ["Sony"],
  "features": [],
  "sorting_preference": "price_low_to_high",
  "buy_it_now": true
}
```

2025-05-07 16:04:47,940 - DealFinderAI.Controller - INFO - Parsed search parameters: {'product_type': 'headphones', 'keywords': ['sony', 'headphones'], 'price_range': None, 'brands': ['Sony'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-07 16:04:47,940 - DealFinderAI.AmazonScraperAgent - INFO - Mock Amazon search for: {'product_type': 'headphones', 'keywords': ['sony', 'headphones'], 'price_range': None, 'brands': ['Sony'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-07 16:04:47,941 - DealFinderAI.WalmartScraperAgent - INFO - Mock Walmart search for: {'product_type': 'headphones', 'keywords': ['sony', 'headphones'], 'price_range': None, 'brands': ['Sony'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-07 16:04:47,941 - DealFinderAI.EbayScraperAgent - INFO - Mock eBay search for: {'product_type': 'headphones', 'keywords': ['sony', 'headphones'], 'price_range': None, 'brands': ['Sony'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-07 16:04:47,941 - DealFinderAI.ResultsAggregatorAgent - INFO - Aggregating results for query: find me the best deal for sony headphones
2025-05-07 16:04:47,941 - DealFinderAI.ResultsAggregatorAgent - INFO - Found 3 results from various sources
2025-05-07 16:04:47,941 - DealFinderAI.ProductComparisonAgent - INFO - Comparing products for query: find me the best deal for sony headphones
2025-05-07 16:04:47,941 - DealFinderAI.ProductComparisonAgent - INFO - Found 10 products to compare
2025-05-07 16:04:47,941 - DealFinderAI.PresentationAgent - INFO - Preparing presentation for 10 products
2025-05-07 16:04:47,941 - DealFinderAI.ChatMemoryAgent - INFO - Storing context for conversation 20250507160446
2025-05-07 16:04:47,941 - DealFinderAI.ChatMemoryAgent - INFO - Storing 10 products for conversation 20250507160446
2025-05-07 16:04:47,941 - DealFinderAI.Controller - INFO - Successfully stored search results in memory
2025-05-07 16:05:14,281 - DealFinderAI.Controller - INFO - Processing user query: find me best deal for macbook pro
2025-05-07 16:05:14,282 - DealFinderAI.ChatMemoryAgent - INFO - Analyzing query: 'find me best deal for macbook pro' for conversation 20250507160514
2025-05-07 16:05:14,282 - DealFinderAI.ChatMemoryAgent - INFO - Current product info: False
2025-05-07 16:05:14,282 - DealFinderAI.ChatMemoryAgent - INFO - No product context available for this conversation
2025-05-07 16:05:14,282 - DealFinderAI.Controller - INFO - Analyze response: {'is_follow_up': False, 'focused_product': None, 'referenced_products': [], 'products': []}
2025-05-07 16:05:14,282 - DealFinderAI.Controller - INFO - Is follow-up? False
2025-05-07 16:05:14,282 - DealFinderAI.Controller - INFO - Referenced products: 0
2025-05-07 16:05:14,282 - DealFinderAI.Controller - INFO - Processing as new search query
2025-05-07 16:05:14,282 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: find me best deal for macbook pro
2025-05-07 16:05:15,131 - DealFinderAI.GeminiAgent - WARNING - Failed to parse Gemini response as JSON: ```json
{
  "product_type": "laptop",
  "keywords": ["macbook pro", "best deal"],
  "price_range": null,
  "brands": ["Apple"],
  "features": [],
  "sorting_preference": "price_low_to_high",
  "buy_it_now": true
}
```

2025-05-07 16:05:15,132 - DealFinderAI.Controller - INFO - Parsed search parameters: {'product_type': 'laptop', 'keywords': ['macbook pro', 'best deal'], 'price_range': None, 'brands': ['Apple'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-07 16:05:15,132 - DealFinderAI.AmazonScraperAgent - INFO - Mock Amazon search for: {'product_type': 'laptop', 'keywords': ['macbook pro', 'best deal'], 'price_range': None, 'brands': ['Apple'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-07 16:05:15,132 - DealFinderAI.WalmartScraperAgent - INFO - Mock Walmart search for: {'product_type': 'laptop', 'keywords': ['macbook pro', 'best deal'], 'price_range': None, 'brands': ['Apple'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-07 16:05:15,132 - DealFinderAI.EbayScraperAgent - INFO - Mock eBay search for: {'product_type': 'laptop', 'keywords': ['macbook pro', 'best deal'], 'price_range': None, 'brands': ['Apple'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-07 16:05:15,132 - DealFinderAI.ResultsAggregatorAgent - INFO - Aggregating results for query: find me best deal for macbook pro
2025-05-07 16:05:15,132 - DealFinderAI.ResultsAggregatorAgent - INFO - Found 3 results from various sources
2025-05-07 16:05:15,132 - DealFinderAI.ProductComparisonAgent - INFO - Comparing products for query: find me best deal for macbook pro
2025-05-07 16:05:15,132 - DealFinderAI.ProductComparisonAgent - INFO - Found 10 products to compare
2025-05-07 16:05:15,132 - DealFinderAI.PresentationAgent - INFO - Preparing presentation for 10 products
2025-05-07 16:05:15,133 - DealFinderAI.ChatMemoryAgent - INFO - Storing context for conversation 20250507160514
2025-05-07 16:05:15,133 - DealFinderAI.ChatMemoryAgent - INFO - Storing 10 products for conversation 20250507160514
2025-05-07 16:05:15,133 - DealFinderAI.Controller - INFO - Successfully stored search results in memory
2025-05-07 16:05:30,429 - DealFinderAI.Controller - INFO - Processing user query: find me best deal for lenovo
2025-05-07 16:05:30,432 - DealFinderAI.ChatMemoryAgent - INFO - Analyzing query: 'find me best deal for lenovo' for conversation 20250507160530
2025-05-07 16:05:30,432 - DealFinderAI.ChatMemoryAgent - INFO - Current product info: False
2025-05-07 16:05:30,432 - DealFinderAI.ChatMemoryAgent - INFO - No product context available for this conversation
2025-05-07 16:05:30,432 - DealFinderAI.Controller - INFO - Analyze response: {'is_follow_up': False, 'focused_product': None, 'referenced_products': [], 'products': []}
2025-05-07 16:05:30,432 - DealFinderAI.Controller - INFO - Is follow-up? False
2025-05-07 16:05:30,432 - DealFinderAI.Controller - INFO - Referenced products: 0
2025-05-07 16:05:30,432 - DealFinderAI.Controller - INFO - Processing as new search query
2025-05-07 16:05:30,432 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: find me best deal for lenovo
2025-05-07 16:05:31,245 - DealFinderAI.GeminiAgent - WARNING - Failed to parse Gemini response as JSON: ```json
{
  "product_type": "laptop",
  "keywords": ["lenovo"],
  "price_range": null,
  "brands": ["lenovo"],
  "features": [],
  "sorting_preference": "price_low_to_high",
  "buy_it_now": true
}
```

2025-05-07 16:05:31,245 - DealFinderAI.Controller - INFO - Parsed search parameters: {'product_type': 'laptop', 'keywords': ['lenovo'], 'price_range': None, 'brands': ['lenovo'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-07 16:05:31,245 - DealFinderAI.AmazonScraperAgent - INFO - Mock Amazon search for: {'product_type': 'laptop', 'keywords': ['lenovo'], 'price_range': None, 'brands': ['lenovo'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-07 16:05:31,245 - DealFinderAI.WalmartScraperAgent - INFO - Mock Walmart search for: {'product_type': 'laptop', 'keywords': ['lenovo'], 'price_range': None, 'brands': ['lenovo'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-07 16:05:31,245 - DealFinderAI.EbayScraperAgent - INFO - Mock eBay search for: {'product_type': 'laptop', 'keywords': ['lenovo'], 'price_range': None, 'brands': ['lenovo'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-07 16:05:31,246 - DealFinderAI.ResultsAggregatorAgent - INFO - Aggregating results for query: find me best deal for lenovo
2025-05-07 16:05:31,246 - DealFinderAI.ResultsAggregatorAgent - INFO - Found 3 results from various sources
2025-05-07 16:05:31,246 - DealFinderAI.ProductComparisonAgent - INFO - Comparing products for query: find me best deal for lenovo
2025-05-07 16:05:31,246 - DealFinderAI.ProductComparisonAgent - INFO - Found 10 products to compare
2025-05-07 16:05:31,246 - DealFinderAI.PresentationAgent - INFO - Preparing presentation for 10 products
2025-05-07 16:05:31,246 - DealFinderAI.ChatMemoryAgent - INFO - Storing context for conversation 20250507160530
2025-05-07 16:05:31,246 - DealFinderAI.ChatMemoryAgent - INFO - Storing 10 products for conversation 20250507160530
2025-05-07 16:05:31,246 - DealFinderAI.Controller - INFO - Successfully stored search results in memory
2025-05-07 16:05:58,830 - DealFinderAI.Controller - INFO - Processing user query: i want 32gb ram
2025-05-07 16:05:58,832 - DealFinderAI.ChatMemoryAgent - INFO - Analyzing query: 'i want 32gb ram' for conversation 20250507160558
2025-05-07 16:05:58,832 - DealFinderAI.ChatMemoryAgent - INFO - Current product info: False
2025-05-07 16:05:58,832 - DealFinderAI.ChatMemoryAgent - INFO - No product context available for this conversation
2025-05-07 16:05:58,832 - DealFinderAI.Controller - INFO - Analyze response: {'is_follow_up': False, 'focused_product': None, 'referenced_products': [], 'products': []}
2025-05-07 16:05:58,832 - DealFinderAI.Controller - INFO - Is follow-up? False
2025-05-07 16:05:58,833 - DealFinderAI.Controller - INFO - Referenced products: 0
2025-05-07 16:05:58,833 - DealFinderAI.Controller - INFO - Processing as new search query
2025-05-07 16:05:58,833 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: i want 32gb ram
2025-05-07 16:05:59,604 - DealFinderAI.GeminiAgent - WARNING - Failed to parse Gemini response as JSON: ```json
{
  "product_type": "RAM",
  "keywords": ["32GB", "RAM"],
  "price_range": null,
  "brands": null,
  "features": ["32GB"],
  "sorting_preference": null,
  "buy_it_now": null
}
```

2025-05-07 16:05:59,604 - DealFinderAI.Controller - INFO - Parsed search parameters: {'product_type': 'RAM', 'keywords': ['32GB', 'RAM'], 'price_range': None, 'brands': None, 'features': ['32GB'], 'sorting_preference': None, 'buy_it_now': None}
2025-05-07 16:05:59,604 - DealFinderAI.AmazonScraperAgent - INFO - Mock Amazon search for: {'product_type': 'RAM', 'keywords': ['32GB', 'RAM'], 'price_range': None, 'brands': None, 'features': ['32GB'], 'sorting_preference': None, 'buy_it_now': None}
2025-05-07 16:05:59,604 - DealFinderAI.WalmartScraperAgent - INFO - Mock Walmart search for: {'product_type': 'RAM', 'keywords': ['32GB', 'RAM'], 'price_range': None, 'brands': None, 'features': ['32GB'], 'sorting_preference': None, 'buy_it_now': None}
2025-05-07 16:05:59,604 - DealFinderAI.EbayScraperAgent - INFO - Mock eBay search for: {'product_type': 'RAM', 'keywords': ['32GB', 'RAM'], 'price_range': None, 'brands': None, 'features': ['32GB'], 'sorting_preference': None, 'buy_it_now': None}
2025-05-07 16:05:59,604 - DealFinderAI.ResultsAggregatorAgent - INFO - Aggregating results for query: i want 32gb ram
2025-05-07 16:05:59,604 - DealFinderAI.ResultsAggregatorAgent - INFO - Found 3 results from various sources
2025-05-07 16:05:59,605 - DealFinderAI.ProductComparisonAgent - INFO - Comparing products for query: i want 32gb ram
2025-05-07 16:05:59,605 - DealFinderAI.ProductComparisonAgent - INFO - Found 10 products to compare
2025-05-07 16:05:59,605 - DealFinderAI.PresentationAgent - INFO - Preparing presentation for 10 products
2025-05-07 16:05:59,605 - DealFinderAI.ChatMemoryAgent - INFO - Storing context for conversation 20250507160558
2025-05-07 16:05:59,605 - DealFinderAI.ChatMemoryAgent - INFO - Storing 10 products for conversation 20250507160558
2025-05-07 16:05:59,605 - DealFinderAI.Controller - INFO - Successfully stored search results in memory
2025-05-07 16:06:14,632 - DealFinderAI.Controller - INFO - Processing user query: i want to 32 gb ram laptop
2025-05-07 16:06:14,633 - DealFinderAI.ChatMemoryAgent - INFO - Analyzing query: 'i want to 32 gb ram laptop' for conversation 20250507160614
2025-05-07 16:06:14,633 - DealFinderAI.ChatMemoryAgent - INFO - Current product info: False
2025-05-07 16:06:14,633 - DealFinderAI.ChatMemoryAgent - INFO - No product context available for this conversation
2025-05-07 16:06:14,633 - DealFinderAI.Controller - INFO - Analyze response: {'is_follow_up': False, 'focused_product': None, 'referenced_products': [], 'products': []}
2025-05-07 16:06:14,633 - DealFinderAI.Controller - INFO - Is follow-up? False
2025-05-07 16:06:14,633 - DealFinderAI.Controller - INFO - Referenced products: 0
2025-05-07 16:06:14,633 - DealFinderAI.Controller - INFO - Processing as new search query
2025-05-07 16:06:14,633 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: i want to 32 gb ram laptop
2025-05-07 16:06:15,469 - DealFinderAI.GeminiAgent - WARNING - Failed to parse Gemini response as JSON: ```json
{
  "product_type": "laptop",
  "keywords": ["laptop", "32 gb ram"],
  "price_range": null,
  "brands": null,
  "features": ["32 gb ram"],
  "sorting_preference": null,
  "buy_it_now": null
}
```

2025-05-07 16:06:15,469 - DealFinderAI.Controller - INFO - Parsed search parameters: {'product_type': 'laptop', 'keywords': ['laptop', '32 gb ram'], 'price_range': None, 'brands': None, 'features': ['32 gb ram'], 'sorting_preference': None, 'buy_it_now': None}
2025-05-07 16:06:15,470 - DealFinderAI.AmazonScraperAgent - INFO - Mock Amazon search for: {'product_type': 'laptop', 'keywords': ['laptop', '32 gb ram'], 'price_range': None, 'brands': None, 'features': ['32 gb ram'], 'sorting_preference': None, 'buy_it_now': None}
2025-05-07 16:06:15,470 - DealFinderAI.WalmartScraperAgent - INFO - Mock Walmart search for: {'product_type': 'laptop', 'keywords': ['laptop', '32 gb ram'], 'price_range': None, 'brands': None, 'features': ['32 gb ram'], 'sorting_preference': None, 'buy_it_now': None}
2025-05-07 16:06:15,470 - DealFinderAI.EbayScraperAgent - INFO - Mock eBay search for: {'product_type': 'laptop', 'keywords': ['laptop', '32 gb ram'], 'price_range': None, 'brands': None, 'features': ['32 gb ram'], 'sorting_preference': None, 'buy_it_now': None}
2025-05-07 16:06:15,470 - DealFinderAI.ResultsAggregatorAgent - INFO - Aggregating results for query: i want to 32 gb ram laptop
2025-05-07 16:06:15,470 - DealFinderAI.ResultsAggregatorAgent - INFO - Found 3 results from various sources
2025-05-07 16:06:15,470 - DealFinderAI.ProductComparisonAgent - INFO - Comparing products for query: i want to 32 gb ram laptop
2025-05-07 16:06:15,470 - DealFinderAI.ProductComparisonAgent - INFO - Found 10 products to compare
2025-05-07 16:06:15,470 - DealFinderAI.PresentationAgent - INFO - Preparing presentation for 10 products
2025-05-07 16:06:15,470 - DealFinderAI.ChatMemoryAgent - INFO - Storing context for conversation 20250507160614
2025-05-07 16:06:15,471 - DealFinderAI.ChatMemoryAgent - INFO - Storing 10 products for conversation 20250507160614
2025-05-07 16:06:15,471 - DealFinderAI.Controller - INFO - Successfully stored search results in memory
2025-05-07 16:06:27,072 - DealFinderAI.Controller - INFO - Processing user query: yes give me info about all products
2025-05-07 16:06:27,073 - DealFinderAI.ChatMemoryAgent - INFO - Analyzing query: 'yes give me info about all products' for conversation 20250507160627
2025-05-07 16:06:27,073 - DealFinderAI.ChatMemoryAgent - INFO - Current product info: False
2025-05-07 16:06:27,073 - DealFinderAI.ChatMemoryAgent - INFO - No product context available for this conversation
2025-05-07 16:06:27,073 - DealFinderAI.Controller - INFO - Analyze response: {'is_follow_up': False, 'focused_product': None, 'referenced_products': [], 'products': []}
2025-05-07 16:06:27,074 - DealFinderAI.Controller - INFO - Is follow-up? False
2025-05-07 16:06:27,074 - DealFinderAI.Controller - INFO - Referenced products: 0
2025-05-07 16:06:27,074 - DealFinderAI.Controller - INFO - Processing as new search query
2025-05-07 16:06:27,074 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: yes give me info about all products
2025-05-07 16:06:27,848 - DealFinderAI.GeminiAgent - WARNING - Failed to parse Gemini response as JSON: ```json
{
  "product_type": null,
  "keywords": [],
  "price_range": null,
  "brands": [],
  "features": [],
  "sorting_preference": null,
  "buy_it_now": null
}
```

2025-05-07 16:06:27,848 - DealFinderAI.Controller - INFO - Parsed search parameters: {'keywords': ['yes give me info about all products']}
2025-05-07 16:06:27,848 - DealFinderAI.AmazonScraperAgent - INFO - Mock Amazon search for: {'keywords': ['yes give me info about all products']}
2025-05-07 16:06:27,848 - DealFinderAI.WalmartScraperAgent - INFO - Mock Walmart search for: {'keywords': ['yes give me info about all products']}
2025-05-07 16:06:27,849 - DealFinderAI.EbayScraperAgent - INFO - Mock eBay search for: {'keywords': ['yes give me info about all products']}
2025-05-07 16:06:27,849 - DealFinderAI.ResultsAggregatorAgent - INFO - Aggregating results for query: yes give me info about all products
2025-05-07 16:06:27,849 - DealFinderAI.ResultsAggregatorAgent - INFO - Found 3 results from various sources
2025-05-07 16:06:27,849 - DealFinderAI.ProductComparisonAgent - INFO - Comparing products for query: yes give me info about all products
2025-05-07 16:06:27,849 - DealFinderAI.ProductComparisonAgent - INFO - Found 10 products to compare
2025-05-07 16:06:27,849 - DealFinderAI.PresentationAgent - INFO - Preparing presentation for 10 products
2025-05-07 16:06:27,849 - DealFinderAI.ChatMemoryAgent - INFO - Storing context for conversation 20250507160627
2025-05-07 16:06:27,849 - DealFinderAI.ChatMemoryAgent - INFO - Storing 10 products for conversation 20250507160627
2025-05-07 16:06:27,849 - DealFinderAI.Controller - INFO - Successfully stored search results in memory
2025-05-07 16:07:49,845 - DealFinderAI - INFO - Logging initialized
2025-05-07 16:07:49,845 - DealFinderAI.Main - INFO - Starting DealFinder AI
2025-05-07 16:07:49,845 - DealFinderAI.Main - INFO - Using real scrapers
2025-05-07 16:07:49,890 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-07 16:08:16,292 - DealFinderAI.Controller - INFO - Processing user query: find me best deal for lenovo 64 gb ram laptop
2025-05-07 16:08:16,293 - DealFinderAI.ChatMemoryAgent - INFO - Analyzing query: 'find me best deal for lenovo 64 gb ram laptop' for conversation 20250507160816
2025-05-07 16:08:16,293 - DealFinderAI.ChatMemoryAgent - INFO - Current product info: False
2025-05-07 16:08:16,293 - DealFinderAI.ChatMemoryAgent - INFO - No product context available for this conversation
2025-05-07 16:08:16,293 - DealFinderAI.Controller - INFO - Analyze response: {'is_follow_up': False, 'focused_product': None, 'referenced_products': [], 'products': []}
2025-05-07 16:08:16,293 - DealFinderAI.Controller - INFO - Is follow-up? False
2025-05-07 16:08:16,294 - DealFinderAI.Controller - INFO - Referenced products: 0
2025-05-07 16:08:16,294 - DealFinderAI.Controller - INFO - Processing as new search query
2025-05-07 16:08:16,294 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: find me best deal for lenovo 64 gb ram laptop
2025-05-07 16:08:17,174 - DealFinderAI.GeminiAgent - WARNING - Failed to parse Gemini response as JSON: ```json
{
  "product_type": "laptop",
  "keywords": ["lenovo", "64 gb ram"],
  "price_range": null,
  "brands": ["Lenovo"],
  "features": ["64 GB RAM"],
  "sorting_preference": "price_low_to_high",
  "buy_it_now": true
}
```

2025-05-07 16:08:17,175 - DealFinderAI.Controller - INFO - Parsed search parameters: {'product_type': 'laptop', 'keywords': ['lenovo', '64 gb ram'], 'price_range': None, 'brands': ['Lenovo'], 'features': ['64 GB RAM'], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-07 16:08:17,175 - DealFinderAI.AmazonScraperAgent - INFO - Mock Amazon search for: {'product_type': 'laptop', 'keywords': ['lenovo', '64 gb ram'], 'price_range': None, 'brands': ['Lenovo'], 'features': ['64 GB RAM'], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-07 16:08:17,175 - DealFinderAI.WalmartScraperAgent - INFO - Mock Walmart search for: {'product_type': 'laptop', 'keywords': ['lenovo', '64 gb ram'], 'price_range': None, 'brands': ['Lenovo'], 'features': ['64 GB RAM'], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-07 16:08:17,176 - DealFinderAI.EbayScraperAgent - INFO - Mock eBay search for: {'product_type': 'laptop', 'keywords': ['lenovo', '64 gb ram'], 'price_range': None, 'brands': ['Lenovo'], 'features': ['64 GB RAM'], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-07 16:08:17,176 - DealFinderAI.ResultsAggregatorAgent - INFO - Aggregating results for query: find me best deal for lenovo 64 gb ram laptop
2025-05-07 16:08:17,176 - DealFinderAI.ResultsAggregatorAgent - INFO - Found 3 results from various sources
2025-05-07 16:08:17,176 - DealFinderAI.ProductComparisonAgent - INFO - Comparing products for query: find me best deal for lenovo 64 gb ram laptop
2025-05-07 16:08:17,176 - DealFinderAI.ProductComparisonAgent - INFO - Found 10 products to compare
2025-05-07 16:08:17,176 - DealFinderAI.PresentationAgent - INFO - Preparing presentation for 10 products
2025-05-07 16:08:17,177 - DealFinderAI.ChatMemoryAgent - INFO - Storing context for conversation 20250507160816
2025-05-07 16:08:17,177 - DealFinderAI.ChatMemoryAgent - INFO - Storing 10 products for conversation 20250507160816
2025-05-07 16:08:17,177 - DealFinderAI.Controller - INFO - Successfully stored search results in memory
2025-05-07 16:08:51,039 - DealFinderAI.Controller - INFO - Processing user query: find me the best deal for macbook pro 32 gb ram
2025-05-07 16:08:51,042 - DealFinderAI.ChatMemoryAgent - INFO - Analyzing query: 'find me the best deal for macbook pro 32 gb ram' for conversation 20250507160851
2025-05-07 16:08:51,042 - DealFinderAI.ChatMemoryAgent - INFO - Current product info: False
2025-05-07 16:08:51,042 - DealFinderAI.ChatMemoryAgent - INFO - No product context available for this conversation
2025-05-07 16:08:51,042 - DealFinderAI.Controller - INFO - Analyze response: {'is_follow_up': False, 'focused_product': None, 'referenced_products': [], 'products': []}
2025-05-07 16:08:51,042 - DealFinderAI.Controller - INFO - Is follow-up? False
2025-05-07 16:08:51,042 - DealFinderAI.Controller - INFO - Referenced products: 0
2025-05-07 16:08:51,043 - DealFinderAI.Controller - INFO - Processing as new search query
2025-05-07 16:08:51,043 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: find me the best deal for macbook pro 32 gb ram
2025-05-07 16:08:51,956 - DealFinderAI.GeminiAgent - WARNING - Failed to parse Gemini response as JSON: ```json
{
  "product_type": "laptop",
  "keywords": ["macbook pro", "32 gb ram"],
  "price_range": null,
  "brands": ["Apple"],
  "features": ["32 gb ram"],
  "sorting_preference": "price_low_to_high",
  "buy_it_now": true
}
```

2025-05-07 16:08:51,957 - DealFinderAI.Controller - INFO - Parsed search parameters: {'product_type': 'laptop', 'keywords': ['macbook pro', '32 gb ram'], 'price_range': None, 'brands': ['Apple'], 'features': ['32 gb ram'], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-07 16:08:51,957 - DealFinderAI.AmazonScraperAgent - INFO - Mock Amazon search for: {'product_type': 'laptop', 'keywords': ['macbook pro', '32 gb ram'], 'price_range': None, 'brands': ['Apple'], 'features': ['32 gb ram'], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-07 16:08:51,957 - DealFinderAI.WalmartScraperAgent - INFO - Mock Walmart search for: {'product_type': 'laptop', 'keywords': ['macbook pro', '32 gb ram'], 'price_range': None, 'brands': ['Apple'], 'features': ['32 gb ram'], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-07 16:08:51,958 - DealFinderAI.EbayScraperAgent - INFO - Mock eBay search for: {'product_type': 'laptop', 'keywords': ['macbook pro', '32 gb ram'], 'price_range': None, 'brands': ['Apple'], 'features': ['32 gb ram'], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-07 16:08:51,958 - DealFinderAI.ResultsAggregatorAgent - INFO - Aggregating results for query: find me the best deal for macbook pro 32 gb ram
2025-05-07 16:08:51,958 - DealFinderAI.ResultsAggregatorAgent - INFO - Found 3 results from various sources
2025-05-07 16:08:51,958 - DealFinderAI.ProductComparisonAgent - INFO - Comparing products for query: find me the best deal for macbook pro 32 gb ram
2025-05-07 16:08:51,958 - DealFinderAI.ProductComparisonAgent - INFO - Found 10 products to compare
2025-05-07 16:08:51,958 - DealFinderAI.PresentationAgent - INFO - Preparing presentation for 10 products
2025-05-07 16:08:51,958 - DealFinderAI.ChatMemoryAgent - INFO - Storing context for conversation 20250507160851
2025-05-07 16:08:51,958 - DealFinderAI.ChatMemoryAgent - INFO - Storing 10 products for conversation 20250507160851
2025-05-07 16:08:51,959 - DealFinderAI.Controller - INFO - Successfully stored search results in memory
2025-05-07 16:11:13,924 - DealFinderAI - INFO - Logging initialized
2025-05-07 16:11:13,924 - DealFinderAI.Main - INFO - Starting DealFinder AI
2025-05-07 16:11:13,924 - DealFinderAI.Main - INFO - Using real scrapers
2025-05-07 16:11:13,969 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-07 16:12:10,398 - DealFinderAI - INFO - Logging initialized
2025-05-07 16:12:10,399 - DealFinderAI.Main - INFO - Starting DealFinder AI
2025-05-07 16:12:10,399 - DealFinderAI.Main - INFO - Using real scrapers
2025-05-07 16:12:10,442 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-07 16:12:33,865 - DealFinderAI - INFO - Logging initialized
2025-05-07 16:12:33,865 - DealFinderAI.Main - INFO - Starting DealFinder AI
2025-05-07 16:12:33,866 - DealFinderAI.Main - INFO - Using real scrapers
2025-05-07 16:12:33,906 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-07 16:13:01,764 - DealFinderAI - INFO - Logging initialized
2025-05-07 16:13:01,765 - DealFinderAI.Main - INFO - Starting DealFinder AI
2025-05-07 16:13:01,765 - DealFinderAI.Main - INFO - Using real scrapers
2025-05-07 16:13:01,806 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-07 16:13:07,421 - DealFinderAI - INFO - Logging initialized
2025-05-07 16:13:07,422 - DealFinderAI.Main - INFO - Starting DealFinder AI
2025-05-07 16:13:07,422 - DealFinderAI.Main - INFO - Using real scrapers
2025-05-07 16:13:07,462 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-07 16:14:22,816 - DealFinderAI - INFO - Logging initialized
2025-05-07 16:14:22,816 - DealFinderAI.Main - INFO - Starting DealFinder AI
2025-05-07 16:14:22,816 - DealFinderAI.Main - INFO - Using real scrapers
2025-05-07 16:14:22,860 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-07 16:14:32,515 - DealFinderAI - INFO - Logging initialized
2025-05-07 16:14:32,516 - DealFinderAI.Main - INFO - Starting DealFinder AI
2025-05-07 16:14:32,516 - DealFinderAI.Main - INFO - Using real scrapers
2025-05-07 16:14:32,556 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-07 16:22:03,790 - DealFinderAI - INFO - Logging initialized
2025-05-07 16:22:03,791 - DealFinderAI.Main - INFO - Starting DealFinder AI
2025-05-07 16:22:03,791 - DealFinderAI.Main - INFO - Using real scrapers
2025-05-07 16:22:03,839 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-07 16:22:04,154 - DealFinderAI - INFO - Logging initialized
2025-05-07 16:22:04,154 - DealFinderAI.Main - INFO - Starting DealFinder AI
2025-05-07 16:22:04,154 - DealFinderAI.Main - INFO - Using real scrapers
2025-05-07 16:22:04,216 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-07 16:22:14,548 - DealFinderAI.Controller - INFO - Processing user query: lenovo laptop
2025-05-07 16:22:14,549 - DealFinderAI.ChatMemoryAgent - INFO - Analyzing query: 'lenovo laptop' for conversation 20250507162214
2025-05-07 16:22:14,549 - DealFinderAI.ChatMemoryAgent - INFO - Current product info: False
2025-05-07 16:22:14,549 - DealFinderAI.ChatMemoryAgent - INFO - No product context available for this conversation
2025-05-07 16:22:14,549 - DealFinderAI.Controller - INFO - Analyze response: {'is_follow_up': False, 'focused_product': None, 'referenced_products': [], 'products': []}
2025-05-07 16:22:14,549 - DealFinderAI.Controller - INFO - Is follow-up? False
2025-05-07 16:22:14,549 - DealFinderAI.Controller - INFO - Referenced products: 0
2025-05-07 16:22:14,549 - DealFinderAI.Controller - INFO - Processing as new search query
2025-05-07 16:22:14,549 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: lenovo laptop
2025-05-07 16:22:15,619 - DealFinderAI.GeminiAgent - WARNING - Failed to parse Gemini response as JSON: ```json
{
  "product_type": "laptop",
  "keywords": ["lenovo", "laptop"],
  "price_range": null,
  "brands": ["Lenovo"],
  "features": [],
  "sorting_preference": null,
  "buy_it_now": null
}
```

2025-05-07 16:22:15,619 - DealFinderAI.Controller - INFO - Parsed search parameters: {'product_type': 'laptop', 'keywords': ['lenovo', 'laptop'], 'price_range': None, 'brands': ['Lenovo'], 'features': [], 'sorting_preference': None, 'buy_it_now': None}
2025-05-07 16:22:15,619 - DealFinderAI.AmazonScraperAgent - INFO - Searching Amazon for: {'product_type': 'laptop', 'keywords': ['lenovo', 'laptop'], 'price_range': None, 'brands': ['Lenovo'], 'features': [], 'sorting_preference': None, 'buy_it_now': None}
2025-05-07 16:22:18,213 - DealFinderAI.WalmartScraperAgent - INFO - Searching Walmart for: {'product_type': 'laptop', 'keywords': ['lenovo', 'laptop'], 'price_range': None, 'brands': ['Lenovo'], 'features': [], 'sorting_preference': None, 'buy_it_now': None}
2025-05-07 16:22:21,867 - DealFinderAI.EbayScraperAgent - INFO - Searching eBay for: {'product_type': 'laptop', 'keywords': ['lenovo', 'laptop'], 'price_range': None, 'brands': ['Lenovo'], 'features': [], 'sorting_preference': None, 'buy_it_now': None}
2025-05-07 16:22:24,679 - DealFinderAI.ResultsAggregatorAgent - INFO - Aggregating results for query: lenovo laptop
2025-05-07 16:22:24,679 - DealFinderAI.ResultsAggregatorAgent - INFO - Found 3 results from various sources
2025-05-07 16:22:24,679 - DealFinderAI.ProductComparisonAgent - INFO - Comparing products for query: lenovo laptop
2025-05-07 16:22:24,679 - DealFinderAI.ProductComparisonAgent - INFO - Found 10 products to compare
2025-05-07 16:22:24,680 - DealFinderAI.PresentationAgent - INFO - Preparing presentation for 10 products
2025-05-07 16:22:24,680 - DealFinderAI.ChatMemoryAgent - INFO - Storing context for conversation 20250507162214
2025-05-07 16:22:24,680 - DealFinderAI.ChatMemoryAgent - INFO - Storing 10 products for conversation 20250507162214
2025-05-07 16:22:24,680 - DealFinderAI.Controller - INFO - Successfully stored search results in memory
2025-05-07 16:29:03,964 - DealFinderAI.Controller - INFO - Processing user query: yes i would like more information about above products
2025-05-07 16:29:03,965 - DealFinderAI.ChatMemoryAgent - INFO - Analyzing query: 'yes i would like more information about above products' for conversation 20250507162903
2025-05-07 16:29:03,966 - DealFinderAI.ChatMemoryAgent - INFO - Current product info: False
2025-05-07 16:29:03,966 - DealFinderAI.ChatMemoryAgent - INFO - No product context available for this conversation
2025-05-07 16:29:03,966 - DealFinderAI.Controller - INFO - Analyze response: {'is_follow_up': False, 'focused_product': None, 'referenced_products': [], 'products': []}
2025-05-07 16:29:03,966 - DealFinderAI.Controller - INFO - Is follow-up? False
2025-05-07 16:29:03,967 - DealFinderAI.Controller - INFO - Referenced products: 0
2025-05-07 16:29:03,969 - DealFinderAI.Controller - INFO - Processing as new search query
2025-05-07 16:29:03,969 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: yes i would like more information about above products
2025-05-07 16:29:04,821 - DealFinderAI.GeminiAgent - WARNING - Failed to parse Gemini response as JSON: ```json
{
  "product_type": null,
  "keywords": [],
  "price_range": null,
  "brands": [],
  "features": [],
  "sorting_preference": null,
  "buy_it_now": false
}
```

2025-05-07 16:29:04,821 - DealFinderAI.Controller - INFO - Parsed search parameters: {'keywords': ['yes i would like more information about above products']}
2025-05-07 16:29:04,821 - DealFinderAI.AmazonScraperAgent - INFO - Searching Amazon for: {'keywords': ['yes i would like more information about above products']}
2025-05-07 16:29:07,043 - DealFinderAI.WalmartScraperAgent - INFO - Searching Walmart for: {'keywords': ['yes i would like more information about above products']}
2025-05-07 16:29:13,979 - DealFinderAI.EbayScraperAgent - INFO - Searching eBay for: {'keywords': ['yes i would like more information about above products']}
2025-05-07 16:29:16,969 - DealFinderAI.ResultsAggregatorAgent - INFO - Aggregating results for query: yes i would like more information about above products
2025-05-07 16:29:16,969 - DealFinderAI.ResultsAggregatorAgent - INFO - Found 3 results from various sources
2025-05-07 16:29:16,970 - DealFinderAI.ProductComparisonAgent - INFO - Comparing products for query: yes i would like more information about above products
2025-05-07 16:29:16,970 - DealFinderAI.ProductComparisonAgent - INFO - Found 10 products to compare
2025-05-07 16:29:16,970 - DealFinderAI.PresentationAgent - INFO - Preparing presentation for 10 products
2025-05-07 16:29:16,971 - DealFinderAI.ChatMemoryAgent - INFO - Storing context for conversation 20250507162903
2025-05-07 16:29:16,971 - DealFinderAI.ChatMemoryAgent - INFO - Storing 10 products for conversation 20250507162903
2025-05-07 16:29:16,971 - DealFinderAI.Controller - INFO - Successfully stored search results in memory
2025-05-07 17:31:56,409 - DealFinderAI.Controller - INFO - Processing user query: apple watch
2025-05-07 17:31:56,410 - DealFinderAI.ChatMemoryAgent - INFO - Analyzing query: 'apple watch' for conversation 20250507173156
2025-05-07 17:31:56,411 - DealFinderAI.ChatMemoryAgent - INFO - Current product info: False
2025-05-07 17:31:56,411 - DealFinderAI.ChatMemoryAgent - INFO - No product context available for this conversation
2025-05-07 17:31:56,411 - DealFinderAI.Controller - INFO - Analyze response: {'is_follow_up': False, 'focused_product': None, 'referenced_products': [], 'products': []}
2025-05-07 17:31:56,411 - DealFinderAI.Controller - INFO - Is follow-up? False
2025-05-07 17:31:56,411 - DealFinderAI.Controller - INFO - Referenced products: 0
2025-05-07 17:31:56,411 - DealFinderAI.Controller - INFO - Processing as new search query
2025-05-07 17:31:56,411 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: apple watch
2025-05-07 17:31:57,359 - DealFinderAI.GeminiAgent - WARNING - Failed to parse Gemini response as JSON: ```json
{
  "product_type": "smartwatch",
  "keywords": ["apple", "watch"],
  "price_range": null,
  "brands": ["Apple"],
  "features": [],
  "sorting_preference": null,
  "buy_it_now": true
}
```

2025-05-07 17:31:57,360 - DealFinderAI.Controller - INFO - Parsed search parameters: {'product_type': 'smartwatch', 'keywords': ['apple', 'watch'], 'price_range': None, 'brands': ['Apple'], 'features': [], 'sorting_preference': None, 'buy_it_now': True}
2025-05-07 17:31:57,360 - DealFinderAI.AmazonScraperAgent - INFO - Searching Amazon for: {'product_type': 'smartwatch', 'keywords': ['apple', 'watch'], 'price_range': None, 'brands': ['Apple'], 'features': [], 'sorting_preference': None, 'buy_it_now': True}
2025-05-07 17:31:59,911 - DealFinderAI.WalmartScraperAgent - INFO - Searching Walmart for: {'product_type': 'smartwatch', 'keywords': ['apple', 'watch'], 'price_range': None, 'brands': ['Apple'], 'features': [], 'sorting_preference': None, 'buy_it_now': True}
2025-05-07 17:32:03,165 - DealFinderAI.EbayScraperAgent - INFO - Searching eBay for: {'product_type': 'smartwatch', 'keywords': ['apple', 'watch'], 'price_range': None, 'brands': ['Apple'], 'features': [], 'sorting_preference': None, 'buy_it_now': True}
2025-05-07 17:32:06,009 - DealFinderAI.ResultsAggregatorAgent - INFO - Aggregating results for query: apple watch
2025-05-07 17:32:06,009 - DealFinderAI.ResultsAggregatorAgent - INFO - Found 3 results from various sources
2025-05-07 17:32:06,010 - DealFinderAI.ProductComparisonAgent - INFO - Comparing products for query: apple watch
2025-05-07 17:32:06,010 - DealFinderAI.ProductComparisonAgent - INFO - Found 10 products to compare
2025-05-07 17:32:06,010 - DealFinderAI.PresentationAgent - INFO - Preparing presentation for 10 products
2025-05-07 17:32:06,011 - DealFinderAI.ChatMemoryAgent - INFO - Storing context for conversation 20250507173156
2025-05-07 17:32:06,011 - DealFinderAI.ChatMemoryAgent - INFO - Storing 10 products for conversation 20250507173156
2025-05-07 17:32:06,011 - DealFinderAI.Controller - INFO - Successfully stored search results in memory
2025-05-07 17:32:45,311 - DealFinderAI.Controller - INFO - Processing user query: find best deal for latest apple watch
2025-05-07 17:32:45,312 - DealFinderAI.ChatMemoryAgent - INFO - Analyzing query: 'find best deal for latest apple watch' for conversation 20250507173245
2025-05-07 17:32:45,313 - DealFinderAI.ChatMemoryAgent - INFO - Current product info: False
2025-05-07 17:32:45,313 - DealFinderAI.ChatMemoryAgent - INFO - No product context available for this conversation
2025-05-07 17:32:45,313 - DealFinderAI.Controller - INFO - Analyze response: {'is_follow_up': False, 'focused_product': None, 'referenced_products': [], 'products': []}
2025-05-07 17:32:45,313 - DealFinderAI.Controller - INFO - Is follow-up? False
2025-05-07 17:32:45,313 - DealFinderAI.Controller - INFO - Referenced products: 0
2025-05-07 17:32:45,313 - DealFinderAI.Controller - INFO - Processing as new search query
2025-05-07 17:32:45,313 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: find best deal for latest apple watch
2025-05-07 17:32:46,142 - DealFinderAI.GeminiAgent - WARNING - Failed to parse Gemini response as JSON: ```json
{
  "product_type": "smartwatch",
  "keywords": ["apple watch", "latest"],
  "price_range": null,
  "brands": ["Apple"],
  "features": [],
  "sorting_preference": "price_low_to_high",
  "buy_it_now": true
}
```

2025-05-07 17:32:46,142 - DealFinderAI.Controller - INFO - Parsed search parameters: {'product_type': 'smartwatch', 'keywords': ['apple watch', 'latest'], 'price_range': None, 'brands': ['Apple'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-07 17:32:46,142 - DealFinderAI.AmazonScraperAgent - INFO - Searching Amazon for: {'product_type': 'smartwatch', 'keywords': ['apple watch', 'latest'], 'price_range': None, 'brands': ['Apple'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-07 17:32:48,174 - DealFinderAI.WalmartScraperAgent - INFO - Searching Walmart for: {'product_type': 'smartwatch', 'keywords': ['apple watch', 'latest'], 'price_range': None, 'brands': ['Apple'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-07 17:32:52,143 - DealFinderAI.EbayScraperAgent - INFO - Searching eBay for: {'product_type': 'smartwatch', 'keywords': ['apple watch', 'latest'], 'price_range': None, 'brands': ['Apple'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-07 17:32:54,512 - DealFinderAI.ResultsAggregatorAgent - INFO - Aggregating results for query: find best deal for latest apple watch
2025-05-07 17:32:54,512 - DealFinderAI.ResultsAggregatorAgent - INFO - Found 3 results from various sources
2025-05-07 17:32:54,513 - DealFinderAI.ProductComparisonAgent - INFO - Comparing products for query: find best deal for latest apple watch
2025-05-07 17:32:54,513 - DealFinderAI.ProductComparisonAgent - INFO - Found 10 products to compare
2025-05-07 17:32:54,513 - DealFinderAI.PresentationAgent - INFO - Preparing presentation for 10 products
2025-05-07 17:32:54,513 - DealFinderAI.ChatMemoryAgent - INFO - Storing context for conversation 20250507173245
2025-05-07 17:32:54,514 - DealFinderAI.ChatMemoryAgent - INFO - Storing 10 products for conversation 20250507173245
2025-05-07 17:32:54,514 - DealFinderAI.Controller - INFO - Successfully stored search results in memory
2025-05-07 17:46:56,340 - DealFinderAI - INFO - Logging initialized
2025-05-07 17:46:56,341 - DealFinderAI.Main - INFO - Starting DealFinder AI
2025-05-07 17:46:56,341 - DealFinderAI.Main - INFO - Using real scrapers
2025-05-07 17:46:56,385 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-07 17:47:45,638 - DealFinderAI - INFO - Logging initialized
2025-05-07 17:47:45,638 - DealFinderAI.Main - INFO - Starting DealFinder AI
2025-05-07 17:47:45,638 - DealFinderAI.Main - INFO - Using mock scrapers
2025-05-07 17:47:45,683 - DealFinderAI.Scrapers - INFO - Initializing mock scraper agents
2025-05-07 17:47:56,053 - DealFinderAI - INFO - Logging initialized
2025-05-07 17:47:56,053 - DealFinderAI.Main - INFO - Starting DealFinder AI
2025-05-07 17:47:56,053 - DealFinderAI.Main - INFO - Using mock scrapers
2025-05-07 17:47:56,096 - DealFinderAI.Scrapers - INFO - Initializing mock scraper agents
2025-05-07 17:47:56,661 - DealFinderAI - INFO - Logging initialized
2025-05-07 17:47:56,662 - DealFinderAI.Main - INFO - Starting DealFinder AI
2025-05-07 17:47:56,662 - DealFinderAI.Main - INFO - Using mock scrapers
2025-05-07 17:47:56,691 - DealFinderAI.Scrapers - INFO - Initializing mock scraper agents
2025-05-07 17:48:31,114 - DealFinderAI.Controller - INFO - Processing user query: best deal for apple watch
2025-05-07 17:48:31,115 - DealFinderAI.ChatMemoryAgent - INFO - Analyzing query: 'best deal for apple watch' for conversation 20250507174831
2025-05-07 17:48:31,115 - DealFinderAI.ChatMemoryAgent - INFO - Current product info: False
2025-05-07 17:48:31,115 - DealFinderAI.ChatMemoryAgent - INFO - No product context available for this conversation
2025-05-07 17:48:31,116 - DealFinderAI.Controller - INFO - Analyze response: {'is_follow_up': False, 'focused_product': None, 'referenced_products': [], 'products': []}
2025-05-07 17:48:31,116 - DealFinderAI.Controller - INFO - Is follow-up? False
2025-05-07 17:48:31,116 - DealFinderAI.Controller - INFO - Referenced products: 0
2025-05-07 17:48:31,116 - DealFinderAI.Controller - INFO - Processing as new search query
2025-05-07 17:48:31,116 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: best deal for apple watch
2025-05-07 17:48:32,199 - DealFinderAI.GeminiAgent - WARNING - Failed to parse Gemini response as JSON: ```json
{
  "product_type": "smartwatch",
  "keywords": ["apple watch", "best deal"],
  "price_range": null,
  "brands": ["Apple"],
  "features": [],
  "sorting_preference": "price_low_to_high",
  "buy_it_now": true
}
```

2025-05-07 17:48:32,199 - DealFinderAI.Controller - INFO - Parsed search parameters: {'product_type': 'smartwatch', 'keywords': ['apple watch', 'best deal'], 'price_range': None, 'brands': ['Apple'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-07 17:48:32,199 - DealFinderAI.AmazonScraperAgent - INFO - Mock Amazon search for: {'product_type': 'smartwatch', 'keywords': ['apple watch', 'best deal'], 'price_range': None, 'brands': ['Apple'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-07 17:48:32,200 - DealFinderAI.WalmartScraperAgent - INFO - Mock Walmart search for: {'product_type': 'smartwatch', 'keywords': ['apple watch', 'best deal'], 'price_range': None, 'brands': ['Apple'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-07 17:48:32,200 - DealFinderAI.EbayScraperAgent - INFO - Mock eBay search for: {'product_type': 'smartwatch', 'keywords': ['apple watch', 'best deal'], 'price_range': None, 'brands': ['Apple'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-07 17:48:32,200 - DealFinderAI.ResultsAggregatorAgent - INFO - Aggregating results for query: best deal for apple watch
2025-05-07 17:48:32,200 - DealFinderAI.ResultsAggregatorAgent - INFO - Found 3 results from various sources
2025-05-07 17:48:32,200 - DealFinderAI.ProductComparisonAgent - INFO - Comparing products for query: best deal for apple watch
2025-05-07 17:48:32,200 - DealFinderAI.ProductComparisonAgent - INFO - Found 10 products to compare
2025-05-07 17:48:32,201 - DealFinderAI.PresentationAgent - INFO - Preparing presentation for 10 products
2025-05-07 17:48:32,201 - DealFinderAI.ChatMemoryAgent - INFO - Storing context for conversation 20250507174831
2025-05-07 17:48:32,201 - DealFinderAI.ChatMemoryAgent - INFO - Storing 10 products for conversation 20250507174831
2025-05-07 17:48:32,201 - DealFinderAI.Controller - INFO - Successfully stored search results in memory
2025-05-07 17:49:21,925 - DealFinderAI.Controller - INFO - Processing user query: compare apple watch x329
2025-05-07 17:49:21,927 - DealFinderAI.ChatMemoryAgent - INFO - Analyzing query: 'compare apple watch x329' for conversation 20250507174921
2025-05-07 17:49:21,928 - DealFinderAI.ChatMemoryAgent - INFO - Current product info: False
2025-05-07 17:49:21,928 - DealFinderAI.ChatMemoryAgent - INFO - No product context available for this conversation
2025-05-07 17:49:21,928 - DealFinderAI.Controller - INFO - Analyze response: {'is_follow_up': False, 'focused_product': None, 'referenced_products': [], 'products': []}
2025-05-07 17:49:21,928 - DealFinderAI.Controller - INFO - Is follow-up? False
2025-05-07 17:49:21,928 - DealFinderAI.Controller - INFO - Referenced products: 0
2025-05-07 17:49:21,928 - DealFinderAI.Controller - INFO - Processing as new search query
2025-05-07 17:49:21,928 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: compare apple watch x329
2025-05-07 17:49:22,724 - DealFinderAI.GeminiAgent - WARNING - Failed to parse Gemini response as JSON: ```json
{
  "product_type": "smartwatch",
  "keywords": ["apple watch", "x329"],
  "price_range": null,
  "brands": ["Apple"],
  "features": [],
  "sorting_preference": null,
  "buy_it_now": true
}
```

2025-05-07 17:49:22,725 - DealFinderAI.Controller - INFO - Parsed search parameters: {'product_type': 'smartwatch', 'keywords': ['apple watch', 'x329'], 'price_range': None, 'brands': ['Apple'], 'features': [], 'sorting_preference': None, 'buy_it_now': True}
2025-05-07 17:49:22,725 - DealFinderAI.AmazonScraperAgent - INFO - Mock Amazon search for: {'product_type': 'smartwatch', 'keywords': ['apple watch', 'x329'], 'price_range': None, 'brands': ['Apple'], 'features': [], 'sorting_preference': None, 'buy_it_now': True}
2025-05-07 17:49:22,725 - DealFinderAI.WalmartScraperAgent - INFO - Mock Walmart search for: {'product_type': 'smartwatch', 'keywords': ['apple watch', 'x329'], 'price_range': None, 'brands': ['Apple'], 'features': [], 'sorting_preference': None, 'buy_it_now': True}
2025-05-07 17:49:22,726 - DealFinderAI.EbayScraperAgent - INFO - Mock eBay search for: {'product_type': 'smartwatch', 'keywords': ['apple watch', 'x329'], 'price_range': None, 'brands': ['Apple'], 'features': [], 'sorting_preference': None, 'buy_it_now': True}
2025-05-07 17:49:22,726 - DealFinderAI.ResultsAggregatorAgent - INFO - Aggregating results for query: compare apple watch x329
2025-05-07 17:49:22,726 - DealFinderAI.ResultsAggregatorAgent - INFO - Found 3 results from various sources
2025-05-07 17:49:22,726 - DealFinderAI.ProductComparisonAgent - INFO - Comparing products for query: compare apple watch x329
2025-05-07 17:49:22,726 - DealFinderAI.ProductComparisonAgent - INFO - Found 10 products to compare
2025-05-07 17:49:22,727 - DealFinderAI.PresentationAgent - INFO - Preparing presentation for 10 products
2025-05-07 17:49:22,727 - DealFinderAI.ChatMemoryAgent - INFO - Storing context for conversation 20250507174921
2025-05-07 17:49:22,727 - DealFinderAI.ChatMemoryAgent - INFO - Storing 10 products for conversation 20250507174921
2025-05-07 17:49:22,727 - DealFinderAI.Controller - INFO - Successfully stored search results in memory
2025-05-07 17:49:59,740 - DealFinderAI.Controller - INFO - Processing user query: Which one has the best reviews
2025-05-07 17:49:59,742 - DealFinderAI.ChatMemoryAgent - INFO - Analyzing query: 'which one has the best reviews' for conversation 20250507174959
2025-05-07 17:49:59,743 - DealFinderAI.ChatMemoryAgent - INFO - Current product info: False
2025-05-07 17:49:59,743 - DealFinderAI.ChatMemoryAgent - INFO - No product context available for this conversation
2025-05-07 17:49:59,743 - DealFinderAI.Controller - INFO - Analyze response: {'is_follow_up': False, 'focused_product': None, 'referenced_products': [], 'products': []}
2025-05-07 17:49:59,743 - DealFinderAI.Controller - INFO - Is follow-up? False
2025-05-07 17:49:59,743 - DealFinderAI.Controller - INFO - Referenced products: 0
2025-05-07 17:49:59,743 - DealFinderAI.Controller - INFO - Processing as new search query
2025-05-07 17:49:59,743 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: Which one has the best reviews
2025-05-07 17:50:00,528 - DealFinderAI.GeminiAgent - WARNING - Failed to parse Gemini response as JSON: ```json
{
  "product_type": null,
  "keywords": [],
  "price_range": null,
  "brands": [],
  "features": [],
  "sorting_preference": "rating",
  "buy_it_now": true
}
```

2025-05-07 17:50:00,528 - DealFinderAI.Controller - INFO - Parsed search parameters: {'product_type': None, 'keywords': [], 'price_range': None, 'brands': [], 'features': [], 'sorting_preference': 'rating', 'buy_it_now': True}
2025-05-07 17:50:00,528 - DealFinderAI.AmazonScraperAgent - INFO - Mock Amazon search for: {'product_type': None, 'keywords': [], 'price_range': None, 'brands': [], 'features': [], 'sorting_preference': 'rating', 'buy_it_now': True}
2025-05-07 17:50:00,529 - DealFinderAI.AmazonScraperAgent - ERROR - Error in mock Amazon search: sequence item 0: expected str instance, NoneType found
2025-05-07 17:50:00,529 - DealFinderAI.Controller - WARNING - Amazon search error: {'error': 'Mock Amazon search error: sequence item 0: expected str instance, NoneType found'}
2025-05-07 17:50:00,529 - DealFinderAI.WalmartScraperAgent - INFO - Mock Walmart search for: {'product_type': None, 'keywords': [], 'price_range': None, 'brands': [], 'features': [], 'sorting_preference': 'rating', 'buy_it_now': True}
2025-05-07 17:50:00,529 - DealFinderAI.WalmartScraperAgent - ERROR - Error in mock Walmart search: sequence item 0: expected str instance, NoneType found
2025-05-07 17:50:00,529 - DealFinderAI.Controller - WARNING - Walmart search error: {'error': 'Mock Walmart search error: sequence item 0: expected str instance, NoneType found'}
2025-05-07 17:50:00,529 - DealFinderAI.EbayScraperAgent - INFO - Mock eBay search for: {'product_type': None, 'keywords': [], 'price_range': None, 'brands': [], 'features': [], 'sorting_preference': 'rating', 'buy_it_now': True}
2025-05-07 17:50:00,529 - DealFinderAI.EbayScraperAgent - ERROR - Error in mock eBay search: sequence item 0: expected str instance, NoneType found
2025-05-07 17:50:00,529 - DealFinderAI.Controller - WARNING - eBay search error: {'error': 'Mock eBay search error: sequence item 0: expected str instance, NoneType found'}
2025-05-07 17:50:00,529 - DealFinderAI.ResultsAggregatorAgent - INFO - Aggregating results for query: Which one has the best reviews
2025-05-07 17:50:00,529 - DealFinderAI.ResultsAggregatorAgent - INFO - Found 0 results from various sources
2025-05-07 18:01:04,725 - DealFinderAI.Controller - INFO - Processing user query: find best deal on nothing phone
2025-05-07 18:01:04,728 - DealFinderAI.ChatMemoryAgent - INFO - Analyzing query: 'find best deal on nothing phone' for conversation 20250507180104
2025-05-07 18:01:04,728 - DealFinderAI.ChatMemoryAgent - INFO - Current product info: False
2025-05-07 18:01:04,728 - DealFinderAI.ChatMemoryAgent - INFO - No product context available for this conversation
2025-05-07 18:01:04,729 - DealFinderAI.Controller - INFO - Analyze response: {'is_follow_up': False, 'focused_product': None, 'referenced_products': [], 'products': []}
2025-05-07 18:01:04,729 - DealFinderAI.Controller - INFO - Is follow-up? False
2025-05-07 18:01:04,729 - DealFinderAI.Controller - INFO - Referenced products: 0
2025-05-07 18:01:04,729 - DealFinderAI.Controller - INFO - Processing as new search query
2025-05-07 18:01:04,729 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: find best deal on nothing phone
2025-05-07 18:01:05,744 - DealFinderAI.GeminiAgent - WARNING - Failed to parse Gemini response as JSON: ```json
{
  "product_type": "phone",
  "keywords": ["nothing phone", "best deal"],
  "price_range": null,
  "brands": ["nothing"],
  "features": [],
  "sorting_preference": "price_low_to_high",
  "buy_it_now": true
}
```

2025-05-07 18:01:05,745 - DealFinderAI.Controller - INFO - Parsed search parameters: {'product_type': 'phone', 'keywords': ['nothing phone', 'best deal'], 'price_range': None, 'brands': ['nothing'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-07 18:01:05,745 - DealFinderAI.AmazonScraperAgent - INFO - Mock Amazon search for: {'product_type': 'phone', 'keywords': ['nothing phone', 'best deal'], 'price_range': None, 'brands': ['nothing'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-07 18:01:05,746 - DealFinderAI.WalmartScraperAgent - INFO - Mock Walmart search for: {'product_type': 'phone', 'keywords': ['nothing phone', 'best deal'], 'price_range': None, 'brands': ['nothing'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-07 18:01:05,747 - DealFinderAI.EbayScraperAgent - INFO - Mock eBay search for: {'product_type': 'phone', 'keywords': ['nothing phone', 'best deal'], 'price_range': None, 'brands': ['nothing'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-07 18:01:05,747 - DealFinderAI.ResultsAggregatorAgent - INFO - Aggregating results for query: find best deal on nothing phone
2025-05-07 18:01:05,747 - DealFinderAI.ResultsAggregatorAgent - INFO - Found 3 results from various sources
2025-05-07 18:01:05,748 - DealFinderAI.ProductComparisonAgent - INFO - Comparing products for query: find best deal on nothing phone
2025-05-07 18:01:05,748 - DealFinderAI.ProductComparisonAgent - INFO - Found 10 products to compare
2025-05-07 18:01:05,748 - DealFinderAI.PresentationAgent - INFO - Preparing presentation for 10 products
2025-05-07 18:01:05,749 - DealFinderAI.ChatMemoryAgent - INFO - Storing context for conversation 20250507180104
2025-05-07 18:01:05,749 - DealFinderAI.ChatMemoryAgent - INFO - Storing 10 products for conversation 20250507180104
2025-05-07 18:01:05,749 - DealFinderAI.Controller - INFO - Successfully stored search results in memory
2025-05-07 18:01:59,194 - DealFinderAI.Controller - INFO - Processing user query: find best deal on washing machine
2025-05-07 18:01:59,196 - DealFinderAI.ChatMemoryAgent - INFO - Analyzing query: 'find best deal on washing machine' for conversation 20250507180159
2025-05-07 18:01:59,196 - DealFinderAI.ChatMemoryAgent - INFO - Current product info: False
2025-05-07 18:01:59,196 - DealFinderAI.ChatMemoryAgent - INFO - No product context available for this conversation
2025-05-07 18:01:59,196 - DealFinderAI.Controller - INFO - Analyze response: {'is_follow_up': False, 'focused_product': None, 'referenced_products': [], 'products': []}
2025-05-07 18:01:59,196 - DealFinderAI.Controller - INFO - Is follow-up? False
2025-05-07 18:01:59,196 - DealFinderAI.Controller - INFO - Referenced products: 0
2025-05-07 18:01:59,196 - DealFinderAI.Controller - INFO - Processing as new search query
2025-05-07 18:01:59,196 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: find best deal on washing machine
2025-05-07 18:02:00,097 - DealFinderAI.GeminiAgent - WARNING - Failed to parse Gemini response as JSON: ```json
{
  "product_type": "washing machine",
  "keywords": ["washing machine", "best deal"],
  "price_range": null,
  "brands": null,
  "features": null,
  "sorting_preference": "price_low_to_high",
  "buy_it_now": true
}
```

2025-05-07 18:02:00,097 - DealFinderAI.Controller - INFO - Parsed search parameters: {'product_type': 'washing machine', 'keywords': ['washing machine', 'best deal'], 'price_range': None, 'brands': None, 'features': None, 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-07 18:02:00,098 - DealFinderAI.AmazonScraperAgent - INFO - Mock Amazon search for: {'product_type': 'washing machine', 'keywords': ['washing machine', 'best deal'], 'price_range': None, 'brands': None, 'features': None, 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-07 18:02:00,098 - DealFinderAI.WalmartScraperAgent - INFO - Mock Walmart search for: {'product_type': 'washing machine', 'keywords': ['washing machine', 'best deal'], 'price_range': None, 'brands': None, 'features': None, 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-07 18:02:00,098 - DealFinderAI.EbayScraperAgent - INFO - Mock eBay search for: {'product_type': 'washing machine', 'keywords': ['washing machine', 'best deal'], 'price_range': None, 'brands': None, 'features': None, 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-07 18:02:00,099 - DealFinderAI.ResultsAggregatorAgent - INFO - Aggregating results for query: find best deal on washing machine
2025-05-07 18:02:00,099 - DealFinderAI.ResultsAggregatorAgent - INFO - Found 3 results from various sources
2025-05-07 18:02:00,099 - DealFinderAI.ProductComparisonAgent - INFO - Comparing products for query: find best deal on washing machine
2025-05-07 18:02:00,099 - DealFinderAI.ProductComparisonAgent - INFO - Found 10 products to compare
2025-05-07 18:02:00,100 - DealFinderAI.PresentationAgent - INFO - Preparing presentation for 10 products
2025-05-07 18:02:00,100 - DealFinderAI.ChatMemoryAgent - INFO - Storing context for conversation 20250507180159
2025-05-07 18:02:00,100 - DealFinderAI.ChatMemoryAgent - INFO - Storing 10 products for conversation 20250507180159
2025-05-07 18:02:00,100 - DealFinderAI.Controller - INFO - Successfully stored search results in memory
2025-05-08 19:13:55,643 - DealFinderAI.Controller - INFO - Processing user query: give me best deal on sony headphones
2025-05-08 19:13:55,646 - DealFinderAI.ChatMemoryAgent - INFO - Analyzing query: 'give me best deal on sony headphones' for conversation 20250508191355
2025-05-08 19:13:55,646 - DealFinderAI.ChatMemoryAgent - INFO - Current product info: False
2025-05-08 19:13:55,647 - DealFinderAI.ChatMemoryAgent - INFO - No product context available for this conversation
2025-05-08 19:13:55,647 - DealFinderAI.Controller - INFO - Analyze response: {'is_follow_up': False, 'focused_product': None, 'referenced_products': [], 'products': []}
2025-05-08 19:13:55,647 - DealFinderAI.Controller - INFO - Is follow-up? False
2025-05-08 19:13:55,647 - DealFinderAI.Controller - INFO - Referenced products: 0
2025-05-08 19:13:55,647 - DealFinderAI.Controller - INFO - Processing as new search query
2025-05-08 19:13:55,647 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: give me best deal on sony headphones
2025-05-08 19:13:56,768 - DealFinderAI.GeminiAgent - WARNING - Failed to parse Gemini response as JSON: ```json
{
  "product_type": "headphones",
  "keywords": ["sony", "headphones"],
  "price_range": null,
  "brands": ["Sony"],
  "features": [],
  "sorting_preference": "price_low_to_high",
  "buy_it_now": true
}
```

2025-05-08 19:13:56,769 - DealFinderAI.Controller - INFO - Parsed search parameters: {'product_type': 'headphones', 'keywords': ['sony', 'headphones'], 'price_range': None, 'brands': ['Sony'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-08 19:13:56,769 - DealFinderAI.AmazonScraperAgent - INFO - Mock Amazon search for: {'product_type': 'headphones', 'keywords': ['sony', 'headphones'], 'price_range': None, 'brands': ['Sony'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-08 19:13:56,770 - DealFinderAI.WalmartScraperAgent - INFO - Mock Walmart search for: {'product_type': 'headphones', 'keywords': ['sony', 'headphones'], 'price_range': None, 'brands': ['Sony'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-08 19:13:56,770 - DealFinderAI.EbayScraperAgent - INFO - Mock eBay search for: {'product_type': 'headphones', 'keywords': ['sony', 'headphones'], 'price_range': None, 'brands': ['Sony'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-08 19:13:56,770 - DealFinderAI.ResultsAggregatorAgent - INFO - Aggregating results for query: give me best deal on sony headphones
2025-05-08 19:13:56,770 - DealFinderAI.ResultsAggregatorAgent - INFO - Found 3 results from various sources
2025-05-08 19:13:56,770 - DealFinderAI.ProductComparisonAgent - INFO - Comparing products for query: give me best deal on sony headphones
2025-05-08 19:13:56,770 - DealFinderAI.ProductComparisonAgent - INFO - Found 10 products to compare
2025-05-08 19:13:56,771 - DealFinderAI.PresentationAgent - INFO - Preparing presentation for 10 products
2025-05-08 19:13:56,771 - DealFinderAI.ChatMemoryAgent - INFO - Storing context for conversation 20250508191355
2025-05-08 19:13:56,771 - DealFinderAI.ChatMemoryAgent - INFO - Storing 10 products for conversation 20250508191355
2025-05-08 19:13:56,771 - DealFinderAI.Controller - INFO - Successfully stored search results in memory
2025-05-08 19:44:30,827 - DealFinderAI - INFO - Logging initialized
2025-05-08 19:44:30,827 - DealFinderAI.Main - INFO - Starting DealFinder AI
2025-05-08 19:44:30,827 - DealFinderAI.Main - INFO - Using mock scrapers
2025-05-08 19:44:30,876 - DealFinderAI.Scrapers - INFO - Initializing mock scraper agents
2025-05-08 19:44:52,129 - DealFinderAI.Controller - INFO - Processing user query: find me best deal on sony mx 1000 series
2025-05-08 19:44:52,130 - DealFinderAI.ChatMemoryAgent - INFO - Analyzing query: 'find me best deal on sony mx 1000 series' for conversation 20250508194452
2025-05-08 19:44:52,131 - DealFinderAI.ChatMemoryAgent - INFO - Current product info: False
2025-05-08 19:44:52,131 - DealFinderAI.ChatMemoryAgent - INFO - No product context available for this conversation
2025-05-08 19:44:52,131 - DealFinderAI.Controller - INFO - Analyze response: {'is_follow_up': False, 'focused_product': None, 'referenced_products': [], 'products': []}
2025-05-08 19:44:52,131 - DealFinderAI.Controller - INFO - Is follow-up? False
2025-05-08 19:44:52,131 - DealFinderAI.Controller - INFO - Referenced products: 0
2025-05-08 19:44:52,131 - DealFinderAI.Controller - INFO - Processing as new search query
2025-05-08 19:44:52,131 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: find me best deal on sony mx 1000 series
2025-05-08 19:44:53,365 - DealFinderAI.GeminiAgent - WARNING - Failed to parse Gemini response as JSON: ```json
{
  "product_type": "headphones",
  "keywords": ["sony", "mx 1000 series"],
  "price_range": null,
  "brands": ["sony"],
  "features": [],
  "sorting_preference": "price_low_to_high",
  "buy_it_now": true
}
```

2025-05-08 19:44:53,366 - DealFinderAI.Controller - INFO - Parsed search parameters: {'product_type': 'headphones', 'keywords': ['sony', 'mx 1000 series'], 'price_range': None, 'brands': ['sony'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-08 19:44:53,366 - DealFinderAI.AmazonScraperAgent - INFO - Mock Amazon search for: {'product_type': 'headphones', 'keywords': ['sony', 'mx 1000 series'], 'price_range': None, 'brands': ['sony'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-08 19:44:53,366 - DealFinderAI.WalmartScraperAgent - INFO - Mock Walmart search for: {'product_type': 'headphones', 'keywords': ['sony', 'mx 1000 series'], 'price_range': None, 'brands': ['sony'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-08 19:44:53,367 - DealFinderAI.EbayScraperAgent - INFO - Mock eBay search for: {'product_type': 'headphones', 'keywords': ['sony', 'mx 1000 series'], 'price_range': None, 'brands': ['sony'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-08 19:44:53,367 - DealFinderAI.ResultsAggregatorAgent - INFO - Aggregating results for query: find me best deal on sony mx 1000 series
2025-05-08 19:44:53,367 - DealFinderAI.ResultsAggregatorAgent - INFO - Found 3 results from various sources
2025-05-08 19:44:53,367 - DealFinderAI.ProductComparisonAgent - INFO - Comparing products for query: find me best deal on sony mx 1000 series
2025-05-08 19:44:53,367 - DealFinderAI.ProductComparisonAgent - INFO - Found 10 products to compare
2025-05-08 19:44:53,368 - DealFinderAI.PresentationAgent - INFO - Preparing presentation for 10 products
2025-05-08 19:44:53,368 - DealFinderAI.ChatMemoryAgent - INFO - Storing context for conversation 20250508194452
2025-05-08 19:44:53,368 - DealFinderAI.ChatMemoryAgent - INFO - Storing 10 products for conversation 20250508194452
2025-05-08 19:44:53,368 - DealFinderAI.Controller - INFO - Successfully stored search results in memory
2025-05-08 19:45:20,237 - DealFinderAI.Controller - INFO - Processing user query: give me more details about first product
2025-05-08 19:45:20,238 - DealFinderAI.ChatMemoryAgent - INFO - Analyzing query: 'give me more details about first product' for conversation 20250508194520
2025-05-08 19:45:20,238 - DealFinderAI.ChatMemoryAgent - INFO - Current product info: False
2025-05-08 19:45:20,238 - DealFinderAI.ChatMemoryAgent - INFO - No product context available for this conversation
2025-05-08 19:45:20,238 - DealFinderAI.Controller - INFO - Analyze response: {'is_follow_up': False, 'focused_product': None, 'referenced_products': [], 'products': []}
2025-05-08 19:45:20,239 - DealFinderAI.Controller - INFO - Is follow-up? False
2025-05-08 19:45:20,239 - DealFinderAI.Controller - INFO - Referenced products: 0
2025-05-08 19:45:20,239 - DealFinderAI.Controller - INFO - Processing as new search query
2025-05-08 19:45:20,239 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: give me more details about first product
2025-05-08 19:45:21,071 - DealFinderAI.GeminiAgent - WARNING - Failed to parse Gemini response as JSON: ```json
{
  "product_type": null,
  "keywords": ["first product"],
  "price_range": null,
  "brands": null,
  "features": null,
  "sorting_preference": null,
  "buy_it_now": null
}
```

2025-05-08 19:45:21,071 - DealFinderAI.Controller - INFO - Parsed search parameters: {'product_type': None, 'keywords': ['first product'], 'price_range': None, 'brands': None, 'features': None, 'sorting_preference': None, 'buy_it_now': None}
2025-05-08 19:45:21,071 - DealFinderAI.AmazonScraperAgent - INFO - Mock Amazon search for: {'product_type': None, 'keywords': ['first product'], 'price_range': None, 'brands': None, 'features': None, 'sorting_preference': None, 'buy_it_now': None}
2025-05-08 19:45:21,071 - DealFinderAI.AmazonScraperAgent - ERROR - Error in mock Amazon search: sequence item 0: expected str instance, NoneType found
2025-05-08 19:45:21,071 - DealFinderAI.Controller - WARNING - Amazon search error: {'error': 'Mock Amazon search error: sequence item 0: expected str instance, NoneType found'}
2025-05-08 19:45:21,071 - DealFinderAI.WalmartScraperAgent - INFO - Mock Walmart search for: {'product_type': None, 'keywords': ['first product'], 'price_range': None, 'brands': None, 'features': None, 'sorting_preference': None, 'buy_it_now': None}
2025-05-08 19:45:21,071 - DealFinderAI.WalmartScraperAgent - ERROR - Error in mock Walmart search: sequence item 0: expected str instance, NoneType found
2025-05-08 19:45:21,072 - DealFinderAI.Controller - WARNING - Walmart search error: {'error': 'Mock Walmart search error: sequence item 0: expected str instance, NoneType found'}
2025-05-08 19:45:21,072 - DealFinderAI.EbayScraperAgent - INFO - Mock eBay search for: {'product_type': None, 'keywords': ['first product'], 'price_range': None, 'brands': None, 'features': None, 'sorting_preference': None, 'buy_it_now': None}
2025-05-08 19:45:21,072 - DealFinderAI.EbayScraperAgent - ERROR - Error in mock eBay search: sequence item 0: expected str instance, NoneType found
2025-05-08 19:45:21,072 - DealFinderAI.Controller - WARNING - eBay search error: {'error': 'Mock eBay search error: sequence item 0: expected str instance, NoneType found'}
2025-05-08 19:45:21,072 - DealFinderAI.ResultsAggregatorAgent - INFO - Aggregating results for query: give me more details about first product
2025-05-08 19:45:21,072 - DealFinderAI.ResultsAggregatorAgent - INFO - Found 0 results from various sources
2025-05-08 19:45:26,467 - DealFinderAI.Controller - INFO - Processing user query: sony Basic Sony W185
2025-05-08 19:45:26,468 - DealFinderAI.ChatMemoryAgent - INFO - Analyzing query: 'sony basic sony w185' for conversation 20250508194526
2025-05-08 19:45:26,468 - DealFinderAI.ChatMemoryAgent - INFO - Current product info: False
2025-05-08 19:45:26,468 - DealFinderAI.ChatMemoryAgent - INFO - No product context available for this conversation
2025-05-08 19:45:26,469 - DealFinderAI.Controller - INFO - Analyze response: {'is_follow_up': False, 'focused_product': None, 'referenced_products': [], 'products': []}
2025-05-08 19:45:26,469 - DealFinderAI.Controller - INFO - Is follow-up? False
2025-05-08 19:45:26,469 - DealFinderAI.Controller - INFO - Referenced products: 0
2025-05-08 19:45:26,469 - DealFinderAI.Controller - INFO - Processing as new search query
2025-05-08 19:45:26,469 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: sony Basic Sony W185
2025-05-08 19:45:27,478 - DealFinderAI.GeminiAgent - WARNING - Failed to parse Gemini response as JSON: ```json
{
  "product_type": "Headphones",
  "keywords": ["sony", "w185", "basic"],
  "price_range": null,
  "brands": ["Sony"],
  "features": [],
  "sorting_preference": null,
  "buy_it_now": true
}
```

2025-05-08 19:45:27,478 - DealFinderAI.Controller - INFO - Parsed search parameters: {'product_type': 'Headphones', 'keywords': ['sony', 'w185', 'basic'], 'price_range': None, 'brands': ['Sony'], 'features': [], 'sorting_preference': None, 'buy_it_now': True}
2025-05-08 19:45:27,478 - DealFinderAI.AmazonScraperAgent - INFO - Mock Amazon search for: {'product_type': 'Headphones', 'keywords': ['sony', 'w185', 'basic'], 'price_range': None, 'brands': ['Sony'], 'features': [], 'sorting_preference': None, 'buy_it_now': True}
2025-05-08 19:45:27,479 - DealFinderAI.WalmartScraperAgent - INFO - Mock Walmart search for: {'product_type': 'Headphones', 'keywords': ['sony', 'w185', 'basic'], 'price_range': None, 'brands': ['Sony'], 'features': [], 'sorting_preference': None, 'buy_it_now': True}
2025-05-08 19:45:27,479 - DealFinderAI.EbayScraperAgent - INFO - Mock eBay search for: {'product_type': 'Headphones', 'keywords': ['sony', 'w185', 'basic'], 'price_range': None, 'brands': ['Sony'], 'features': [], 'sorting_preference': None, 'buy_it_now': True}
2025-05-08 19:45:27,479 - DealFinderAI.ResultsAggregatorAgent - INFO - Aggregating results for query: sony Basic Sony W185
2025-05-08 19:45:27,479 - DealFinderAI.ResultsAggregatorAgent - INFO - Found 3 results from various sources
2025-05-08 19:45:27,480 - DealFinderAI.ProductComparisonAgent - INFO - Comparing products for query: sony Basic Sony W185
2025-05-08 19:45:27,480 - DealFinderAI.ProductComparisonAgent - INFO - Found 10 products to compare
2025-05-08 19:45:27,480 - DealFinderAI.PresentationAgent - INFO - Preparing presentation for 10 products
2025-05-08 19:45:27,480 - DealFinderAI.ChatMemoryAgent - INFO - Storing context for conversation 20250508194526
2025-05-08 19:45:27,480 - DealFinderAI.ChatMemoryAgent - INFO - Storing 10 products for conversation 20250508194526
2025-05-08 19:45:27,480 - DealFinderAI.Controller - INFO - Successfully stored search results in memory
2025-05-08 19:45:45,059 - DealFinderAI.Controller - INFO - Processing user query: yes i would like more information
2025-05-08 19:45:45,059 - DealFinderAI.ChatMemoryAgent - INFO - Analyzing query: 'yes i would like more information' for conversation 20250508194545
2025-05-08 19:45:45,059 - DealFinderAI.ChatMemoryAgent - INFO - Current product info: False
2025-05-08 19:45:45,059 - DealFinderAI.ChatMemoryAgent - INFO - No product context available for this conversation
2025-05-08 19:45:45,059 - DealFinderAI.Controller - INFO - Analyze response: {'is_follow_up': False, 'focused_product': None, 'referenced_products': [], 'products': []}
2025-05-08 19:45:45,059 - DealFinderAI.Controller - INFO - Is follow-up? False
2025-05-08 19:45:45,059 - DealFinderAI.Controller - INFO - Referenced products: 0
2025-05-08 19:45:45,059 - DealFinderAI.Controller - INFO - Processing as new search query
2025-05-08 19:45:45,059 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: yes i would like more information
2025-05-08 19:45:45,775 - DealFinderAI.GeminiAgent - WARNING - Failed to parse Gemini response as JSON: ```json
{
  "product_type": null,
  "keywords": [],
  "price_range": null,
  "brands": [],
  "features": [],
  "sorting_preference": null,
  "buy_it_now": null
}
```

2025-05-08 19:45:45,775 - DealFinderAI.Controller - INFO - Parsed search parameters: {'keywords': ['yes i would like more information']}
2025-05-08 19:45:45,775 - DealFinderAI.AmazonScraperAgent - INFO - Mock Amazon search for: {'keywords': ['yes i would like more information']}
2025-05-08 19:45:45,775 - DealFinderAI.WalmartScraperAgent - INFO - Mock Walmart search for: {'keywords': ['yes i would like more information']}
2025-05-08 19:45:45,775 - DealFinderAI.EbayScraperAgent - INFO - Mock eBay search for: {'keywords': ['yes i would like more information']}
2025-05-08 19:45:45,775 - DealFinderAI.ResultsAggregatorAgent - INFO - Aggregating results for query: yes i would like more information
2025-05-08 19:45:45,775 - DealFinderAI.ResultsAggregatorAgent - INFO - Found 3 results from various sources
2025-05-08 19:45:45,775 - DealFinderAI.ProductComparisonAgent - INFO - Comparing products for query: yes i would like more information
2025-05-08 19:45:45,775 - DealFinderAI.ProductComparisonAgent - INFO - Found 10 products to compare
2025-05-08 19:45:45,776 - DealFinderAI.PresentationAgent - INFO - Preparing presentation for 10 products
2025-05-08 19:45:45,776 - DealFinderAI.ChatMemoryAgent - INFO - Storing context for conversation 20250508194545
2025-05-08 19:45:45,776 - DealFinderAI.ChatMemoryAgent - INFO - Storing 10 products for conversation 20250508194545
2025-05-08 19:45:45,776 - DealFinderAI.Controller - INFO - Successfully stored search results in memory
2025-05-08 19:49:42,703 - DealFinderAI.Controller - INFO - Processing user query: compare the products
2025-05-08 19:49:42,704 - DealFinderAI.ChatMemoryAgent - INFO - Analyzing query: 'compare the products' for conversation 20250508194942
2025-05-08 19:49:42,704 - DealFinderAI.ChatMemoryAgent - INFO - Current product info: False
2025-05-08 19:49:42,704 - DealFinderAI.ChatMemoryAgent - INFO - No product context available for this conversation
2025-05-08 19:49:42,705 - DealFinderAI.Controller - INFO - Analyze response: {'is_follow_up': False, 'focused_product': None, 'referenced_products': [], 'products': []}
2025-05-08 19:49:42,705 - DealFinderAI.Controller - INFO - Is follow-up? False
2025-05-08 19:49:42,705 - DealFinderAI.Controller - INFO - Referenced products: 0
2025-05-08 19:49:42,705 - DealFinderAI.Controller - INFO - Processing as new search query
2025-05-08 19:49:42,705 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: compare the products
2025-05-08 19:49:43,518 - DealFinderAI.GeminiAgent - WARNING - Failed to parse Gemini response as JSON: ```json
{
  "product_type": null,
  "keywords": [],
  "price_range": null,
  "brands": [],
  "features": [],
  "sorting_preference": null,
  "buy_it_now": false
}
```

2025-05-08 19:49:43,519 - DealFinderAI.Controller - INFO - Parsed search parameters: {'keywords': ['compare the products']}
2025-05-08 19:49:43,519 - DealFinderAI.AmazonScraperAgent - INFO - Mock Amazon search for: {'keywords': ['compare the products']}
2025-05-08 19:49:43,520 - DealFinderAI.WalmartScraperAgent - INFO - Mock Walmart search for: {'keywords': ['compare the products']}
2025-05-08 19:49:43,520 - DealFinderAI.EbayScraperAgent - INFO - Mock eBay search for: {'keywords': ['compare the products']}
2025-05-08 19:49:43,520 - DealFinderAI.ResultsAggregatorAgent - INFO - Aggregating results for query: compare the products
2025-05-08 19:49:43,521 - DealFinderAI.ResultsAggregatorAgent - INFO - Found 3 results from various sources
2025-05-08 19:49:43,521 - DealFinderAI.ProductComparisonAgent - INFO - Comparing products for query: compare the products
2025-05-08 19:49:43,521 - DealFinderAI.ProductComparisonAgent - INFO - Found 10 products to compare
2025-05-08 19:49:43,522 - DealFinderAI.PresentationAgent - INFO - Preparing presentation for 10 products
2025-05-08 19:49:43,522 - DealFinderAI.ChatMemoryAgent - INFO - Storing context for conversation 20250508194942
2025-05-08 19:49:43,522 - DealFinderAI.ChatMemoryAgent - INFO - Storing 10 products for conversation 20250508194942
2025-05-08 19:49:43,522 - DealFinderAI.Controller - INFO - Successfully stored search results in memory
2025-05-08 19:50:30,601 - DealFinderAI.Controller - INFO - Processing user query: compare Sennheiser Noise-Cancelling Compare X375
2025-05-08 19:50:30,602 - DealFinderAI.ChatMemoryAgent - INFO - Analyzing query: 'compare sennheiser noise-cancelling compare x375' for conversation 20250508195030
2025-05-08 19:50:30,602 - DealFinderAI.ChatMemoryAgent - INFO - Current product info: False
2025-05-08 19:50:30,602 - DealFinderAI.ChatMemoryAgent - INFO - No product context available for this conversation
2025-05-08 19:50:30,602 - DealFinderAI.Controller - INFO - Analyze response: {'is_follow_up': False, 'focused_product': None, 'referenced_products': [], 'products': []}
2025-05-08 19:50:30,602 - DealFinderAI.Controller - INFO - Is follow-up? False
2025-05-08 19:50:30,602 - DealFinderAI.Controller - INFO - Referenced products: 0
2025-05-08 19:50:30,602 - DealFinderAI.Controller - INFO - Processing as new search query
2025-05-08 19:50:30,602 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: compare Sennheiser Noise-Cancelling Compare X375
2025-05-08 19:50:31,485 - DealFinderAI.GeminiAgent - WARNING - Failed to parse Gemini response as JSON: ```json
{
  "product_type": "Noise-Cancelling Headphones",
  "keywords": ["Sennheiser", "X375", "Noise-Cancelling"],
  "price_range": null,
  "brands": ["Sennheiser"],
  "features": ["Noise-Cancelling"],
  "sorting_preference": null,
  "buy_it_now": true
}
```

2025-05-08 19:50:31,485 - DealFinderAI.Controller - INFO - Parsed search parameters: {'product_type': 'Noise-Cancelling Headphones', 'keywords': ['Sennheiser', 'X375', 'Noise-Cancelling'], 'price_range': None, 'brands': ['Sennheiser'], 'features': ['Noise-Cancelling'], 'sorting_preference': None, 'buy_it_now': True}
2025-05-08 19:50:31,486 - DealFinderAI.AmazonScraperAgent - INFO - Mock Amazon search for: {'product_type': 'Noise-Cancelling Headphones', 'keywords': ['Sennheiser', 'X375', 'Noise-Cancelling'], 'price_range': None, 'brands': ['Sennheiser'], 'features': ['Noise-Cancelling'], 'sorting_preference': None, 'buy_it_now': True}
2025-05-08 19:50:31,486 - DealFinderAI.WalmartScraperAgent - INFO - Mock Walmart search for: {'product_type': 'Noise-Cancelling Headphones', 'keywords': ['Sennheiser', 'X375', 'Noise-Cancelling'], 'price_range': None, 'brands': ['Sennheiser'], 'features': ['Noise-Cancelling'], 'sorting_preference': None, 'buy_it_now': True}
2025-05-08 19:50:31,486 - DealFinderAI.EbayScraperAgent - INFO - Mock eBay search for: {'product_type': 'Noise-Cancelling Headphones', 'keywords': ['Sennheiser', 'X375', 'Noise-Cancelling'], 'price_range': None, 'brands': ['Sennheiser'], 'features': ['Noise-Cancelling'], 'sorting_preference': None, 'buy_it_now': True}
2025-05-08 19:50:31,487 - DealFinderAI.ResultsAggregatorAgent - INFO - Aggregating results for query: compare Sennheiser Noise-Cancelling Compare X375
2025-05-08 19:50:31,487 - DealFinderAI.ResultsAggregatorAgent - INFO - Found 3 results from various sources
2025-05-08 19:50:31,487 - DealFinderAI.ProductComparisonAgent - INFO - Comparing products for query: compare Sennheiser Noise-Cancelling Compare X375
2025-05-08 19:50:31,487 - DealFinderAI.ProductComparisonAgent - INFO - Found 10 products to compare
2025-05-08 19:50:31,488 - DealFinderAI.PresentationAgent - INFO - Preparing presentation for 10 products
2025-05-08 19:50:31,488 - DealFinderAI.ChatMemoryAgent - INFO - Storing context for conversation 20250508195030
2025-05-08 19:50:31,488 - DealFinderAI.ChatMemoryAgent - INFO - Storing 10 products for conversation 20250508195030
2025-05-08 19:50:31,488 - DealFinderAI.Controller - INFO - Successfully stored search results in memory
2025-05-08 19:50:49,891 - DealFinderAI.Controller - INFO - Processing user query: Tell me more about the best deal
2025-05-08 19:50:49,891 - DealFinderAI.ChatMemoryAgent - INFO - Analyzing query: 'tell me more about the best deal' for conversation 20250508195049
2025-05-08 19:50:49,891 - DealFinderAI.ChatMemoryAgent - INFO - Current product info: False
2025-05-08 19:50:49,891 - DealFinderAI.ChatMemoryAgent - INFO - No product context available for this conversation
2025-05-08 19:50:49,892 - DealFinderAI.Controller - INFO - Analyze response: {'is_follow_up': False, 'focused_product': None, 'referenced_products': [], 'products': []}
2025-05-08 19:50:49,892 - DealFinderAI.Controller - INFO - Is follow-up? False
2025-05-08 19:50:49,892 - DealFinderAI.Controller - INFO - Referenced products: 0
2025-05-08 19:50:49,892 - DealFinderAI.Controller - INFO - Processing as new search query
2025-05-08 19:50:49,892 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: Tell me more about the best deal
2025-05-08 19:50:50,744 - DealFinderAI.GeminiAgent - WARNING - Failed to parse Gemini response as JSON: ```json
{
  "product_type": null,
  "keywords": ["best deal"],
  "price_range": null,
  "brands": null,
  "features": null,
  "sorting_preference": "price_low_to_high",
  "buy_it_now": true
}
```

2025-05-08 19:50:50,745 - DealFinderAI.Controller - INFO - Parsed search parameters: {'product_type': None, 'keywords': ['best deal'], 'price_range': None, 'brands': None, 'features': None, 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-08 19:50:50,745 - DealFinderAI.AmazonScraperAgent - INFO - Mock Amazon search for: {'product_type': None, 'keywords': ['best deal'], 'price_range': None, 'brands': None, 'features': None, 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-08 19:50:50,746 - DealFinderAI.AmazonScraperAgent - ERROR - Error in mock Amazon search: sequence item 0: expected str instance, NoneType found
2025-05-08 19:50:50,746 - DealFinderAI.Controller - WARNING - Amazon search error: {'error': 'Mock Amazon search error: sequence item 0: expected str instance, NoneType found'}
2025-05-08 19:50:50,746 - DealFinderAI.WalmartScraperAgent - INFO - Mock Walmart search for: {'product_type': None, 'keywords': ['best deal'], 'price_range': None, 'brands': None, 'features': None, 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-08 19:50:50,746 - DealFinderAI.WalmartScraperAgent - ERROR - Error in mock Walmart search: sequence item 0: expected str instance, NoneType found
2025-05-08 19:50:50,746 - DealFinderAI.Controller - WARNING - Walmart search error: {'error': 'Mock Walmart search error: sequence item 0: expected str instance, NoneType found'}
2025-05-08 19:50:50,746 - DealFinderAI.EbayScraperAgent - INFO - Mock eBay search for: {'product_type': None, 'keywords': ['best deal'], 'price_range': None, 'brands': None, 'features': None, 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-08 19:50:50,746 - DealFinderAI.EbayScraperAgent - ERROR - Error in mock eBay search: sequence item 0: expected str instance, NoneType found
2025-05-08 19:50:50,746 - DealFinderAI.Controller - WARNING - eBay search error: {'error': 'Mock eBay search error: sequence item 0: expected str instance, NoneType found'}
2025-05-08 19:50:50,746 - DealFinderAI.ResultsAggregatorAgent - INFO - Aggregating results for query: Tell me more about the best deal
2025-05-08 19:50:50,746 - DealFinderAI.ResultsAggregatorAgent - INFO - Found 0 results from various sources
2025-05-08 19:52:06,392 - DealFinderAI - INFO - Logging initialized
2025-05-08 19:52:06,392 - DealFinderAI.Main - INFO - Starting DealFinder AI
2025-05-08 19:52:06,392 - DealFinderAI.Main - INFO - Using mock scrapers
2025-05-08 19:52:06,438 - DealFinderAI.Scrapers - INFO - Initializing mock scraper agents
2025-05-08 19:52:29,048 - DealFinderAI.Controller - INFO - Processing user query: find me sony headphones
2025-05-08 19:52:29,049 - DealFinderAI.ChatMemoryAgent - INFO - Analyzing query: 'find me sony headphones' for conversation 20250508195229
2025-05-08 19:52:29,050 - DealFinderAI.ChatMemoryAgent - INFO - Current product info: False
2025-05-08 19:52:29,050 - DealFinderAI.ChatMemoryAgent - INFO - No product context available for this conversation
2025-05-08 19:52:29,050 - DealFinderAI.Controller - INFO - Analyze response: {'is_follow_up': False, 'focused_product': None, 'referenced_products': [], 'products': []}
2025-05-08 19:52:29,050 - DealFinderAI.Controller - INFO - Is follow-up? False
2025-05-08 19:52:29,050 - DealFinderAI.Controller - INFO - Referenced products: 0
2025-05-08 19:52:29,050 - DealFinderAI.Controller - INFO - Processing as new search query
2025-05-08 19:52:29,050 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: find me sony headphones
2025-05-08 19:52:30,028 - DealFinderAI.GeminiAgent - WARNING - Failed to parse Gemini response as JSON: ```json
{
  "product_type": "headphones",
  "keywords": ["sony"],
  "price_range": null,
  "brands": ["sony"],
  "features": [],
  "sorting_preference": null,
  "buy_it_now": true
}
```

2025-05-08 19:52:30,028 - DealFinderAI.Controller - INFO - Parsed search parameters: {'product_type': 'headphones', 'keywords': ['sony'], 'price_range': None, 'brands': ['sony'], 'features': [], 'sorting_preference': None, 'buy_it_now': True}
2025-05-08 19:52:30,029 - DealFinderAI.AmazonScraperAgent - INFO - Mock Amazon search for: {'product_type': 'headphones', 'keywords': ['sony'], 'price_range': None, 'brands': ['sony'], 'features': [], 'sorting_preference': None, 'buy_it_now': True}
2025-05-08 19:52:30,029 - DealFinderAI.WalmartScraperAgent - INFO - Mock Walmart search for: {'product_type': 'headphones', 'keywords': ['sony'], 'price_range': None, 'brands': ['sony'], 'features': [], 'sorting_preference': None, 'buy_it_now': True}
2025-05-08 19:52:30,029 - DealFinderAI.EbayScraperAgent - INFO - Mock eBay search for: {'product_type': 'headphones', 'keywords': ['sony'], 'price_range': None, 'brands': ['sony'], 'features': [], 'sorting_preference': None, 'buy_it_now': True}
2025-05-08 19:52:30,030 - DealFinderAI.ResultsAggregatorAgent - INFO - Aggregating results for query: find me sony headphones
2025-05-08 19:52:30,030 - DealFinderAI.ResultsAggregatorAgent - INFO - Found 3 results from various sources
2025-05-08 19:52:30,030 - DealFinderAI.ProductComparisonAgent - INFO - Comparing products for query: find me sony headphones
2025-05-08 19:52:30,030 - DealFinderAI.ProductComparisonAgent - INFO - Found 10 products to compare
2025-05-08 19:52:30,031 - DealFinderAI.Controller - ERROR - Error processing query: name 'top_products' is not defined
2025-05-08 19:53:54,300 - DealFinderAI - INFO - Logging initialized
2025-05-08 19:53:54,300 - DealFinderAI.Main - INFO - Starting DealFinder AI
2025-05-08 19:53:54,301 - DealFinderAI.Main - INFO - Using mock scrapers
2025-05-08 19:53:54,348 - DealFinderAI.Scrapers - INFO - Initializing mock scraper agents
2025-05-08 19:54:11,118 - DealFinderAI.Controller - INFO - Processing user query: find me best deal on sony headphones
2025-05-08 19:54:11,119 - DealFinderAI.ChatMemoryAgent - INFO - Analyzing query: 'find me best deal on sony headphones' for conversation 20250508195411
2025-05-08 19:54:11,119 - DealFinderAI.ChatMemoryAgent - INFO - Current product info: False
2025-05-08 19:54:11,119 - DealFinderAI.ChatMemoryAgent - INFO - No product context available for this conversation
2025-05-08 19:54:11,120 - DealFinderAI.Controller - INFO - Analyze response: {'is_follow_up': False, 'focused_product': None, 'referenced_products': [], 'products': []}
2025-05-08 19:54:11,120 - DealFinderAI.Controller - INFO - Is follow-up? False
2025-05-08 19:54:11,120 - DealFinderAI.Controller - INFO - Referenced products: 0
2025-05-08 19:54:11,120 - DealFinderAI.Controller - INFO - Processing as new search query
2025-05-08 19:54:11,120 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: find me best deal on sony headphones
2025-05-08 19:54:12,166 - DealFinderAI.GeminiAgent - WARNING - Failed to parse Gemini response as JSON: ```json
{
  "product_type": "headphones",
  "keywords": ["sony", "headphones"],
  "price_range": null,
  "brands": ["sony"],
  "features": [],
  "sorting_preference": "price_low_to_high",
  "buy_it_now": true
}
```

2025-05-08 19:54:12,166 - DealFinderAI.Controller - INFO - Parsed search parameters: {'product_type': 'headphones', 'keywords': ['sony', 'headphones'], 'price_range': None, 'brands': ['sony'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-08 19:54:12,166 - DealFinderAI.AmazonScraperAgent - INFO - Mock Amazon search for: {'product_type': 'headphones', 'keywords': ['sony', 'headphones'], 'price_range': None, 'brands': ['sony'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-08 19:54:12,166 - DealFinderAI.WalmartScraperAgent - INFO - Mock Walmart search for: {'product_type': 'headphones', 'keywords': ['sony', 'headphones'], 'price_range': None, 'brands': ['sony'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-08 19:54:12,166 - DealFinderAI.EbayScraperAgent - INFO - Mock eBay search for: {'product_type': 'headphones', 'keywords': ['sony', 'headphones'], 'price_range': None, 'brands': ['sony'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-08 19:54:12,166 - DealFinderAI.ResultsAggregatorAgent - INFO - Aggregating results for query: find me best deal on sony headphones
2025-05-08 19:54:12,166 - DealFinderAI.ResultsAggregatorAgent - INFO - Found 3 results from various sources
2025-05-08 19:54:12,167 - DealFinderAI.ProductComparisonAgent - INFO - Comparing products for query: find me best deal on sony headphones
2025-05-08 19:54:12,167 - DealFinderAI.ProductComparisonAgent - INFO - Found 10 products to compare
2025-05-08 19:54:12,167 - DealFinderAI.ChatMemoryAgent - INFO - Storing context for conversation 20250508195411
2025-05-08 19:54:12,167 - DealFinderAI.ChatMemoryAgent - INFO - Storing 10 products for conversation 20250508195411
2025-05-08 19:54:12,167 - DealFinderAI.PresentationAgent - INFO - Preparing presentation for 10 products
2025-05-08 19:54:12,167 - DealFinderAI.ChatMemoryAgent - INFO - Storing context for conversation 20250508195411
2025-05-08 19:54:12,167 - DealFinderAI.ChatMemoryAgent - INFO - Storing 10 products for conversation 20250508195411
2025-05-08 19:54:12,167 - DealFinderAI.Controller - INFO - Successfully stored search results in memory
2025-05-08 19:54:30,793 - DealFinderAI.Controller - INFO - Processing user query: compare the first product
2025-05-08 19:54:30,794 - DealFinderAI.ChatMemoryAgent - INFO - Analyzing query: 'compare the first product' for conversation 20250508195430
2025-05-08 19:54:30,794 - DealFinderAI.ChatMemoryAgent - INFO - Current product info: False
2025-05-08 19:54:30,794 - DealFinderAI.ChatMemoryAgent - INFO - No product context available for this conversation
2025-05-08 19:54:30,794 - DealFinderAI.Controller - INFO - Analyze response: {'is_follow_up': False, 'focused_product': None, 'referenced_products': [], 'products': []}
2025-05-08 19:54:30,794 - DealFinderAI.Controller - INFO - Is follow-up? False
2025-05-08 19:54:30,794 - DealFinderAI.Controller - INFO - Referenced products: 0
2025-05-08 19:54:30,794 - DealFinderAI.Controller - INFO - Processing as new search query
2025-05-08 19:54:30,795 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: compare the first product
2025-05-08 19:54:31,514 - DealFinderAI.GeminiAgent - WARNING - Failed to parse Gemini response as JSON: ```json
{
  "product_type": null,
  "keywords": [],
  "price_range": null,
  "brands": [],
  "features": [],
  "sorting_preference": null,
  "buy_it_now": false
}
```

2025-05-08 19:54:31,515 - DealFinderAI.Controller - INFO - Parsed search parameters: {'keywords': ['compare the first product']}
2025-05-08 19:54:31,516 - DealFinderAI.AmazonScraperAgent - INFO - Mock Amazon search for: {'keywords': ['compare the first product']}
2025-05-08 19:54:31,516 - DealFinderAI.WalmartScraperAgent - INFO - Mock Walmart search for: {'keywords': ['compare the first product']}
2025-05-08 19:54:31,516 - DealFinderAI.EbayScraperAgent - INFO - Mock eBay search for: {'keywords': ['compare the first product']}
2025-05-08 19:54:31,516 - DealFinderAI.ResultsAggregatorAgent - INFO - Aggregating results for query: compare the first product
2025-05-08 19:54:31,516 - DealFinderAI.ResultsAggregatorAgent - INFO - Found 3 results from various sources
2025-05-08 19:54:31,516 - DealFinderAI.ProductComparisonAgent - INFO - Comparing products for query: compare the first product
2025-05-08 19:54:31,516 - DealFinderAI.ProductComparisonAgent - INFO - Found 10 products to compare
2025-05-08 19:54:31,517 - DealFinderAI.ChatMemoryAgent - INFO - Storing context for conversation 20250508195430
2025-05-08 19:54:31,517 - DealFinderAI.ChatMemoryAgent - INFO - Storing 10 products for conversation 20250508195430
2025-05-08 19:54:31,517 - DealFinderAI.PresentationAgent - INFO - Preparing presentation for 10 products
2025-05-08 19:54:31,517 - DealFinderAI.ChatMemoryAgent - INFO - Storing context for conversation 20250508195430
2025-05-08 19:54:31,517 - DealFinderAI.ChatMemoryAgent - INFO - Storing 10 products for conversation 20250508195430
2025-05-08 19:54:31,517 - DealFinderAI.Controller - INFO - Successfully stored search results in memory
2025-05-08 19:54:51,078 - DealFinderAI.Controller - INFO - Processing user query: compare Sennheiser Studio Product X403
2025-05-08 19:54:51,081 - DealFinderAI.ChatMemoryAgent - INFO - Analyzing query: 'compare sennheiser studio product x403' for conversation 20250508195451
2025-05-08 19:54:51,081 - DealFinderAI.ChatMemoryAgent - INFO - Current product info: False
2025-05-08 19:54:51,081 - DealFinderAI.ChatMemoryAgent - INFO - No product context available for this conversation
2025-05-08 19:54:51,081 - DealFinderAI.Controller - INFO - Analyze response: {'is_follow_up': False, 'focused_product': None, 'referenced_products': [], 'products': []}
2025-05-08 19:54:51,081 - DealFinderAI.Controller - INFO - Is follow-up? False
2025-05-08 19:54:51,081 - DealFinderAI.Controller - INFO - Referenced products: 0
2025-05-08 19:54:51,081 - DealFinderAI.Controller - INFO - Processing as new search query
2025-05-08 19:54:51,081 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: compare Sennheiser Studio Product X403
2025-05-08 19:54:51,921 - DealFinderAI.GeminiAgent - WARNING - Failed to parse Gemini response as JSON: ```json
{
  "product_type": "headphones",
  "keywords": ["Sennheiser", "Studio", "X403"],
  "price_range": null,
  "brands": ["Sennheiser"],
  "features": [],
  "sorting_preference": null,
  "buy_it_now": true
}
```

2025-05-08 19:54:51,922 - DealFinderAI.Controller - INFO - Parsed search parameters: {'product_type': 'headphones', 'keywords': ['Sennheiser', 'Studio', 'X403'], 'price_range': None, 'brands': ['Sennheiser'], 'features': [], 'sorting_preference': None, 'buy_it_now': True}
2025-05-08 19:54:51,922 - DealFinderAI.AmazonScraperAgent - INFO - Mock Amazon search for: {'product_type': 'headphones', 'keywords': ['Sennheiser', 'Studio', 'X403'], 'price_range': None, 'brands': ['Sennheiser'], 'features': [], 'sorting_preference': None, 'buy_it_now': True}
2025-05-08 19:54:51,923 - DealFinderAI.WalmartScraperAgent - INFO - Mock Walmart search for: {'product_type': 'headphones', 'keywords': ['Sennheiser', 'Studio', 'X403'], 'price_range': None, 'brands': ['Sennheiser'], 'features': [], 'sorting_preference': None, 'buy_it_now': True}
2025-05-08 19:54:51,923 - DealFinderAI.EbayScraperAgent - INFO - Mock eBay search for: {'product_type': 'headphones', 'keywords': ['Sennheiser', 'Studio', 'X403'], 'price_range': None, 'brands': ['Sennheiser'], 'features': [], 'sorting_preference': None, 'buy_it_now': True}
2025-05-08 19:54:51,924 - DealFinderAI.ResultsAggregatorAgent - INFO - Aggregating results for query: compare Sennheiser Studio Product X403
2025-05-08 19:54:51,924 - DealFinderAI.ResultsAggregatorAgent - INFO - Found 3 results from various sources
2025-05-08 19:54:51,924 - DealFinderAI.ProductComparisonAgent - INFO - Comparing products for query: compare Sennheiser Studio Product X403
2025-05-08 19:54:51,925 - DealFinderAI.ProductComparisonAgent - INFO - Found 10 products to compare
2025-05-08 19:54:51,925 - DealFinderAI.ChatMemoryAgent - INFO - Storing context for conversation 20250508195451
2025-05-08 19:54:51,925 - DealFinderAI.ChatMemoryAgent - INFO - Storing 10 products for conversation 20250508195451
2025-05-08 19:54:51,925 - DealFinderAI.PresentationAgent - INFO - Preparing presentation for 10 products
2025-05-08 19:54:51,926 - DealFinderAI.ChatMemoryAgent - INFO - Storing context for conversation 20250508195451
2025-05-08 19:54:51,926 - DealFinderAI.ChatMemoryAgent - INFO - Storing 10 products for conversation 20250508195451
2025-05-08 19:54:51,926 - DealFinderAI.Controller - INFO - Successfully stored search results in memory
2025-05-08 19:54:59,233 - DealFinderAI.Controller - INFO - Processing user query: Tell me more about the best deal
2025-05-08 19:54:59,233 - DealFinderAI.ChatMemoryAgent - INFO - Analyzing query: 'tell me more about the best deal' for conversation 20250508195459
2025-05-08 19:54:59,234 - DealFinderAI.ChatMemoryAgent - INFO - Current product info: False
2025-05-08 19:54:59,234 - DealFinderAI.ChatMemoryAgent - INFO - No product context available for this conversation
2025-05-08 19:54:59,234 - DealFinderAI.Controller - INFO - Analyze response: {'is_follow_up': False, 'focused_product': None, 'referenced_products': [], 'products': []}
2025-05-08 19:54:59,234 - DealFinderAI.Controller - INFO - Is follow-up? False
2025-05-08 19:54:59,234 - DealFinderAI.Controller - INFO - Referenced products: 0
2025-05-08 19:54:59,234 - DealFinderAI.Controller - INFO - Processing as new search query
2025-05-08 19:54:59,235 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: Tell me more about the best deal
2025-05-08 19:54:59,972 - DealFinderAI.GeminiAgent - WARNING - Failed to parse Gemini response as JSON: ```json
{
  "product_type": null,
  "keywords": ["best deal"],
  "price_range": null,
  "brands": null,
  "features": null,
  "sorting_preference": "price_low_to_high",
  "buy_it_now": true
}
```

2025-05-08 19:54:59,973 - DealFinderAI.Controller - INFO - Parsed search parameters: {'product_type': None, 'keywords': ['best deal'], 'price_range': None, 'brands': None, 'features': None, 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-08 19:54:59,973 - DealFinderAI.AmazonScraperAgent - INFO - Mock Amazon search for: {'product_type': None, 'keywords': ['best deal'], 'price_range': None, 'brands': None, 'features': None, 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-08 19:54:59,973 - DealFinderAI.AmazonScraperAgent - ERROR - Error in mock Amazon search: sequence item 0: expected str instance, NoneType found
2025-05-08 19:54:59,973 - DealFinderAI.Controller - WARNING - Amazon search error: {'error': 'Mock Amazon search error: sequence item 0: expected str instance, NoneType found'}
2025-05-08 19:54:59,973 - DealFinderAI.WalmartScraperAgent - INFO - Mock Walmart search for: {'product_type': None, 'keywords': ['best deal'], 'price_range': None, 'brands': None, 'features': None, 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-08 19:54:59,973 - DealFinderAI.WalmartScraperAgent - ERROR - Error in mock Walmart search: sequence item 0: expected str instance, NoneType found
2025-05-08 19:54:59,973 - DealFinderAI.Controller - WARNING - Walmart search error: {'error': 'Mock Walmart search error: sequence item 0: expected str instance, NoneType found'}
2025-05-08 19:54:59,974 - DealFinderAI.EbayScraperAgent - INFO - Mock eBay search for: {'product_type': None, 'keywords': ['best deal'], 'price_range': None, 'brands': None, 'features': None, 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-08 19:54:59,974 - DealFinderAI.EbayScraperAgent - ERROR - Error in mock eBay search: sequence item 0: expected str instance, NoneType found
2025-05-08 19:54:59,974 - DealFinderAI.Controller - WARNING - eBay search error: {'error': 'Mock eBay search error: sequence item 0: expected str instance, NoneType found'}
2025-05-08 19:54:59,974 - DealFinderAI.ResultsAggregatorAgent - INFO - Aggregating results for query: Tell me more about the best deal
2025-05-08 19:54:59,974 - DealFinderAI.ResultsAggregatorAgent - INFO - Found 0 results from various sources
2025-05-08 19:55:53,514 - DealFinderAI - INFO - Logging initialized
2025-05-08 19:55:53,514 - DealFinderAI.Main - INFO - Starting DealFinder AI
2025-05-08 19:55:53,514 - DealFinderAI.Main - INFO - Using mock scrapers
2025-05-08 19:55:53,564 - DealFinderAI.Scrapers - INFO - Initializing mock scraper agents
2025-05-08 19:56:14,678 - DealFinderAI.Controller - INFO - Processing user query: find me best deal on sony xm 1000 series
2025-05-08 19:56:14,679 - DealFinderAI.ChatMemoryAgent - INFO - Analyzing query: 'find me best deal on sony xm 1000 series' for conversation 20250508195614
2025-05-08 19:56:14,679 - DealFinderAI.ChatMemoryAgent - INFO - Current product info: False
2025-05-08 19:56:14,679 - DealFinderAI.ChatMemoryAgent - INFO - No product context available for this conversation
2025-05-08 19:56:14,679 - DealFinderAI.Controller - INFO - Analyze response: {'is_follow_up': False, 'focused_product': None, 'referenced_products': [], 'products': []}
2025-05-08 19:56:14,679 - DealFinderAI.Controller - INFO - Is follow-up? False
2025-05-08 19:56:14,680 - DealFinderAI.Controller - INFO - Referenced products: 0
2025-05-08 19:56:14,680 - DealFinderAI.Controller - INFO - Processing as new search query
2025-05-08 19:56:14,680 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: find me best deal on sony xm 1000 series
2025-05-08 19:56:15,946 - DealFinderAI.GeminiAgent - WARNING - Failed to parse Gemini response as JSON: ```json
{
  "product_type": "headphones",
  "keywords": ["sony", "xm 1000 series"],
  "price_range": null,
  "brands": ["Sony"],
  "features": [],
  "sorting_preference": "price_low_to_high",
  "buy_it_now": true
}
```

2025-05-08 19:56:15,947 - DealFinderAI.Controller - INFO - Parsed search parameters: {'product_type': 'headphones', 'keywords': ['sony', 'xm 1000 series'], 'price_range': None, 'brands': ['Sony'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-08 19:56:15,947 - DealFinderAI.AmazonScraperAgent - INFO - Mock Amazon search for: {'product_type': 'headphones', 'keywords': ['sony', 'xm 1000 series'], 'price_range': None, 'brands': ['Sony'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-08 19:56:15,948 - DealFinderAI.WalmartScraperAgent - INFO - Mock Walmart search for: {'product_type': 'headphones', 'keywords': ['sony', 'xm 1000 series'], 'price_range': None, 'brands': ['Sony'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-08 19:56:15,948 - DealFinderAI.EbayScraperAgent - INFO - Mock eBay search for: {'product_type': 'headphones', 'keywords': ['sony', 'xm 1000 series'], 'price_range': None, 'brands': ['Sony'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-08 19:56:15,948 - DealFinderAI.ResultsAggregatorAgent - INFO - Aggregating results for query: find me best deal on sony xm 1000 series
2025-05-08 19:56:15,949 - DealFinderAI.ResultsAggregatorAgent - INFO - Found 3 results from various sources
2025-05-08 19:56:15,949 - DealFinderAI.ProductComparisonAgent - INFO - Comparing products for query: find me best deal on sony xm 1000 series
2025-05-08 19:56:15,949 - DealFinderAI.ProductComparisonAgent - INFO - Found 10 products to compare
2025-05-08 19:56:15,950 - DealFinderAI.ChatMemoryAgent - INFO - Storing context for conversation 20250508195614
2025-05-08 19:56:15,950 - DealFinderAI.ChatMemoryAgent - INFO - Storing 10 products for conversation 20250508195614
2025-05-08 19:56:15,951 - DealFinderAI.PresentationAgent - INFO - Preparing presentation for 10 products
2025-05-08 19:56:15,951 - DealFinderAI.ChatMemoryAgent - INFO - Storing context for conversation 20250508195614
2025-05-08 19:56:15,951 - DealFinderAI.ChatMemoryAgent - INFO - Storing 10 products for conversation 20250508195614
2025-05-08 19:56:15,952 - DealFinderAI.Controller - INFO - Successfully stored search results in memory
2025-05-08 19:56:47,820 - DealFinderAI.Controller - INFO - Processing user query: tell me about first one
2025-05-08 19:56:47,821 - DealFinderAI.ChatMemoryAgent - INFO - Analyzing query: 'tell me about first one' for conversation 20250508195647
2025-05-08 19:56:47,821 - DealFinderAI.ChatMemoryAgent - INFO - Current product info: False
2025-05-08 19:56:47,821 - DealFinderAI.ChatMemoryAgent - INFO - No product context available for this conversation
2025-05-08 19:56:47,821 - DealFinderAI.Controller - INFO - Analyze response: {'is_follow_up': False, 'focused_product': None, 'referenced_products': [], 'products': []}
2025-05-08 19:56:47,821 - DealFinderAI.Controller - INFO - Is follow-up? False
2025-05-08 19:56:47,821 - DealFinderAI.Controller - INFO - Referenced products: 0
2025-05-08 19:56:47,821 - DealFinderAI.Controller - INFO - Processing as new search query
2025-05-08 19:56:47,822 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: tell me about first one
2025-05-08 19:56:48,583 - DealFinderAI.GeminiAgent - WARNING - Failed to parse Gemini response as JSON: ```json
{
  "product_type": null,
  "keywords": ["first one"],
  "price_range": null,
  "brands": null,
  "features": null,
  "sorting_preference": null,
  "buy_it_now": null
}
```

2025-05-08 19:56:48,584 - DealFinderAI.Controller - INFO - Parsed search parameters: {'product_type': None, 'keywords': ['first one'], 'price_range': None, 'brands': None, 'features': None, 'sorting_preference': None, 'buy_it_now': None}
2025-05-08 19:56:48,584 - DealFinderAI.AmazonScraperAgent - INFO - Mock Amazon search for: {'product_type': None, 'keywords': ['first one'], 'price_range': None, 'brands': None, 'features': None, 'sorting_preference': None, 'buy_it_now': None}
2025-05-08 19:56:48,584 - DealFinderAI.AmazonScraperAgent - ERROR - Error in mock Amazon search: sequence item 0: expected str instance, NoneType found
2025-05-08 19:56:48,584 - DealFinderAI.Controller - WARNING - Amazon search error: {'error': 'Mock Amazon search error: sequence item 0: expected str instance, NoneType found'}
2025-05-08 19:56:48,584 - DealFinderAI.WalmartScraperAgent - INFO - Mock Walmart search for: {'product_type': None, 'keywords': ['first one'], 'price_range': None, 'brands': None, 'features': None, 'sorting_preference': None, 'buy_it_now': None}
2025-05-08 19:56:48,584 - DealFinderAI.WalmartScraperAgent - ERROR - Error in mock Walmart search: sequence item 0: expected str instance, NoneType found
2025-05-08 19:56:48,584 - DealFinderAI.Controller - WARNING - Walmart search error: {'error': 'Mock Walmart search error: sequence item 0: expected str instance, NoneType found'}
2025-05-08 19:56:48,585 - DealFinderAI.EbayScraperAgent - INFO - Mock eBay search for: {'product_type': None, 'keywords': ['first one'], 'price_range': None, 'brands': None, 'features': None, 'sorting_preference': None, 'buy_it_now': None}
2025-05-08 19:56:48,585 - DealFinderAI.EbayScraperAgent - ERROR - Error in mock eBay search: sequence item 0: expected str instance, NoneType found
2025-05-08 19:56:48,585 - DealFinderAI.Controller - WARNING - eBay search error: {'error': 'Mock eBay search error: sequence item 0: expected str instance, NoneType found'}
2025-05-08 19:56:48,585 - DealFinderAI.ResultsAggregatorAgent - INFO - Aggregating results for query: tell me about first one
2025-05-08 19:56:48,585 - DealFinderAI.ResultsAggregatorAgent - INFO - Found 0 results from various sources
2025-05-08 20:01:28,064 - DealFinderAI - INFO - Logging initialized
2025-05-08 20:01:28,065 - DealFinderAI.Main - INFO - Starting DealFinder AI
2025-05-08 20:01:28,065 - DealFinderAI.Main - INFO - Using mock scrapers
2025-05-08 20:01:28,111 - DealFinderAI.Scrapers - INFO - Initializing mock scraper agents
2025-05-08 20:01:49,251 - DealFinderAI.Controller - INFO - Processing user query: find me best deal on sony headphones
2025-05-08 20:01:49,252 - DealFinderAI.ChatMemoryAgent - INFO - Analyzing query: 'find me best deal on sony headphones' for conversation 20250508200149
2025-05-08 20:01:49,252 - DealFinderAI.ChatMemoryAgent - INFO - Current product info: False
2025-05-08 20:01:49,252 - DealFinderAI.ChatMemoryAgent - INFO - No product context available for this conversation
2025-05-08 20:01:49,252 - DealFinderAI.Controller - INFO - Analyze response: {'is_follow_up': False, 'focused_product': None, 'referenced_products': [], 'products': []}
2025-05-08 20:01:49,252 - DealFinderAI.Controller - INFO - Is follow-up? False
2025-05-08 20:01:49,252 - DealFinderAI.Controller - INFO - Referenced products: 0
2025-05-08 20:01:49,253 - DealFinderAI.Controller - INFO - Processing as new search query
2025-05-08 20:01:49,253 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: find me best deal on sony headphones
2025-05-08 20:01:50,339 - DealFinderAI.GeminiAgent - WARNING - Failed to parse Gemini response as JSON: ```json
{
  "product_type": "headphones",
  "keywords": ["sony", "headphones"],
  "price_range": null,
  "brands": ["Sony"],
  "features": [],
  "sorting_preference": "price_low_to_high",
  "buy_it_now": true
}
```

2025-05-08 20:01:50,339 - DealFinderAI.Controller - INFO - Parsed search parameters: {'product_type': 'headphones', 'keywords': ['sony', 'headphones'], 'price_range': None, 'brands': ['Sony'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-08 20:01:50,339 - DealFinderAI.AmazonScraperAgent - INFO - Mock Amazon search for: {'product_type': 'headphones', 'keywords': ['sony', 'headphones'], 'price_range': None, 'brands': ['Sony'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-08 20:01:50,339 - DealFinderAI.WalmartScraperAgent - INFO - Mock Walmart search for: {'product_type': 'headphones', 'keywords': ['sony', 'headphones'], 'price_range': None, 'brands': ['Sony'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-08 20:01:50,339 - DealFinderAI.EbayScraperAgent - INFO - Mock eBay search for: {'product_type': 'headphones', 'keywords': ['sony', 'headphones'], 'price_range': None, 'brands': ['Sony'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-08 20:01:50,339 - DealFinderAI.ResultsAggregatorAgent - INFO - Aggregating results for query: find me best deal on sony headphones
2025-05-08 20:01:50,339 - DealFinderAI.ResultsAggregatorAgent - INFO - Found 3 results from various sources
2025-05-08 20:01:50,339 - DealFinderAI.ProductComparisonAgent - INFO - Comparing products for query: find me best deal on sony headphones
2025-05-08 20:01:50,339 - DealFinderAI.ProductComparisonAgent - INFO - Found 10 products to compare
2025-05-08 20:01:50,339 - DealFinderAI.ChatMemoryAgent - INFO - Storing context for conversation 20250508200149
2025-05-08 20:01:50,339 - DealFinderAI.ChatMemoryAgent - INFO - Storing 10 products for conversation 20250508200149
2025-05-08 20:01:50,339 - DealFinderAI.PresentationAgent - INFO - Preparing presentation for 10 products
2025-05-08 20:01:50,339 - DealFinderAI.ChatMemoryAgent - INFO - Storing context for conversation 20250508200149
2025-05-08 20:01:50,339 - DealFinderAI.ChatMemoryAgent - INFO - Storing 10 products for conversation 20250508200149
2025-05-08 20:01:50,340 - DealFinderAI.Controller - INFO - Successfully stored search results in memory
2025-05-08 20:02:01,305 - DealFinderAI.Controller - INFO - Processing user query: tell me more about the first one
2025-05-08 20:02:01,307 - DealFinderAI.ChatMemoryAgent - INFO - Analyzing query: 'tell me more about the first one' for conversation 20250508200201
2025-05-08 20:02:01,307 - DealFinderAI.ChatMemoryAgent - INFO - Current product info: False
2025-05-08 20:02:01,307 - DealFinderAI.ChatMemoryAgent - INFO - No product context available for this conversation
2025-05-08 20:02:01,307 - DealFinderAI.Controller - INFO - Analyze response: {'is_follow_up': False, 'focused_product': None, 'referenced_products': [], 'products': []}
2025-05-08 20:02:01,307 - DealFinderAI.Controller - INFO - Is follow-up? False
2025-05-08 20:02:01,307 - DealFinderAI.Controller - INFO - Referenced products: 0
2025-05-08 20:02:01,308 - DealFinderAI.Controller - INFO - Processing as new search query
2025-05-08 20:02:01,308 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: tell me more about the first one
2025-05-08 20:02:02,299 - DealFinderAI.GeminiAgent - WARNING - Failed to parse Gemini response as JSON: ```json
{
  "product_type": null,
  "keywords": [],
  "price_range": null,
  "brands": null,
  "features": null,
  "sorting_preference": null,
  "buy_it_now": null
}
```

2025-05-08 20:02:02,299 - DealFinderAI.Controller - INFO - Parsed search parameters: {'keywords': ['tell me more about the first one']}
2025-05-08 20:02:02,299 - DealFinderAI.AmazonScraperAgent - INFO - Mock Amazon search for: {'keywords': ['tell me more about the first one']}
2025-05-08 20:02:02,300 - DealFinderAI.WalmartScraperAgent - INFO - Mock Walmart search for: {'keywords': ['tell me more about the first one']}
2025-05-08 20:02:02,300 - DealFinderAI.EbayScraperAgent - INFO - Mock eBay search for: {'keywords': ['tell me more about the first one']}
2025-05-08 20:02:02,300 - DealFinderAI.ResultsAggregatorAgent - INFO - Aggregating results for query: tell me more about the first one
2025-05-08 20:02:02,300 - DealFinderAI.ResultsAggregatorAgent - INFO - Found 3 results from various sources
2025-05-08 20:02:02,301 - DealFinderAI.ProductComparisonAgent - INFO - Comparing products for query: tell me more about the first one
2025-05-08 20:02:02,301 - DealFinderAI.ProductComparisonAgent - INFO - Found 10 products to compare
2025-05-08 20:02:02,301 - DealFinderAI.ChatMemoryAgent - INFO - Storing context for conversation 20250508200201
2025-05-08 20:02:02,301 - DealFinderAI.ChatMemoryAgent - INFO - Storing 10 products for conversation 20250508200201
2025-05-08 20:02:02,301 - DealFinderAI.PresentationAgent - INFO - Preparing presentation for 10 products
2025-05-08 20:02:02,302 - DealFinderAI.ChatMemoryAgent - INFO - Storing context for conversation 20250508200201
2025-05-08 20:02:02,302 - DealFinderAI.ChatMemoryAgent - INFO - Storing 10 products for conversation 20250508200201
2025-05-08 20:02:02,302 - DealFinderAI.Controller - INFO - Successfully stored search results in memory
2025-05-08 20:06:29,424 - DealFinderAI - INFO - Logging initialized
2025-05-08 20:06:29,424 - DealFinderAI.Main - INFO - Starting DealFinder AI
2025-05-08 20:06:29,424 - DealFinderAI.Main - INFO - Using mock scrapers
2025-05-08 20:06:29,471 - DealFinderAI.Scrapers - INFO - Initializing mock scraper agents
2025-05-08 20:06:36,475 - DealFinderAI - INFO - Logging initialized
2025-05-08 20:06:36,475 - DealFinderAI.Main - INFO - Starting DealFinder AI
2025-05-08 20:06:36,476 - DealFinderAI.Main - INFO - Using mock scrapers
2025-05-08 20:06:36,527 - DealFinderAI.Scrapers - INFO - Initializing mock scraper agents
2025-05-08 20:09:35,434 - DealFinderAI - INFO - Logging initialized
2025-05-08 20:09:35,434 - DealFinderAI.Main - INFO - Starting DealFinder AI
2025-05-08 20:09:35,434 - DealFinderAI.Main - INFO - Using mock scrapers
2025-05-08 20:09:35,435 - DealFinderAI.Main - ERROR - Fatal error: name 'Session' is not defined
2025-05-08 20:11:00,408 - DealFinderAI - INFO - Logging initialized
2025-05-08 20:11:00,408 - DealFinderAI.Main - INFO - Starting DealFinder AI
2025-05-08 20:11:00,408 - DealFinderAI.Main - INFO - Using mock scrapers
2025-05-08 20:11:00,458 - DealFinderAI.Main - ERROR - Fatal error: name 'Session' is not defined
2025-05-08 20:13:01,781 - DealFinderAI - INFO - Logging initialized
2025-05-08 20:13:01,781 - DealFinderAI.Main - INFO - Starting DealFinder AI
2025-05-08 20:13:01,781 - DealFinderAI.Main - INFO - Using mock scrapers
2025-05-08 20:13:01,851 - DealFinderAI.Main - ERROR - Fatal error: No module named 'flask_session'
2025-05-08 20:13:16,040 - DealFinderAI - INFO - Logging initialized
2025-05-08 20:13:16,040 - DealFinderAI.Main - INFO - Starting DealFinder AI
2025-05-08 20:13:16,040 - DealFinderAI.Main - INFO - Using mock scrapers
2025-05-08 20:13:16,082 - DealFinderAI.Main - ERROR - Fatal error: No module named 'flask_session'
2025-05-08 20:13:29,664 - DealFinderAI - INFO - Logging initialized
2025-05-08 20:13:29,665 - DealFinderAI.Main - INFO - Starting DealFinder AI
2025-05-08 20:13:29,665 - DealFinderAI.Main - INFO - Using mock scrapers
2025-05-08 20:13:30,191 - DealFinderAI.Scrapers - INFO - Initializing mock scraper agents
2025-05-08 20:13:40,615 - DealFinderAI - INFO - Logging initialized
2025-05-08 20:13:40,616 - DealFinderAI.Main - INFO - Starting DealFinder AI
2025-05-08 20:13:40,616 - DealFinderAI.Main - INFO - Using mock scrapers
2025-05-08 20:13:40,667 - DealFinderAI.Scrapers - INFO - Initializing mock scraper agents
2025-05-08 20:13:41,408 - DealFinderAI - INFO - Logging initialized
2025-05-08 20:13:41,408 - DealFinderAI.Main - INFO - Starting DealFinder AI
2025-05-08 20:13:41,408 - DealFinderAI.Main - INFO - Using mock scrapers
2025-05-08 20:13:41,484 - DealFinderAI.Scrapers - INFO - Initializing mock scraper agents
2025-05-08 20:13:58,838 - DealFinderAI.Controller - INFO - Processing user query: find me deal on sony headphones
2025-05-08 20:13:58,840 - DealFinderAI.ChatMemoryAgent - INFO - Analyzing query: 'find me deal on sony headphones' for conversation 20250508201358
2025-05-08 20:13:58,840 - DealFinderAI.ChatMemoryAgent - INFO - Current product info: False
2025-05-08 20:13:58,840 - DealFinderAI.ChatMemoryAgent - INFO - No product context available for this conversation
2025-05-08 20:13:58,840 - DealFinderAI.Controller - INFO - Analyze response: {'is_follow_up': False, 'focused_product': None, 'referenced_products': [], 'products': []}
2025-05-08 20:13:58,840 - DealFinderAI.Controller - INFO - Is follow-up? False
2025-05-08 20:13:58,840 - DealFinderAI.Controller - INFO - Referenced products: 0
2025-05-08 20:13:58,840 - DealFinderAI.Controller - INFO - Processing as new search query
2025-05-08 20:13:58,840 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: find me deal on sony headphones
2025-05-08 20:13:59,930 - DealFinderAI.GeminiAgent - WARNING - Failed to parse Gemini response as JSON: ```json
{
  "product_type": "headphones",
  "keywords": ["sony", "deal", "headphones"],
  "price_range": null,
  "brands": ["Sony"],
  "features": [],
  "sorting_preference": "price_low_to_high",
  "buy_it_now": true
}
```

2025-05-08 20:13:59,931 - DealFinderAI.Controller - INFO - Parsed search parameters: {'product_type': 'headphones', 'keywords': ['sony', 'deal', 'headphones'], 'price_range': None, 'brands': ['Sony'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-08 20:13:59,931 - DealFinderAI.AmazonScraperAgent - INFO - Mock Amazon search for: {'product_type': 'headphones', 'keywords': ['sony', 'deal', 'headphones'], 'price_range': None, 'brands': ['Sony'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-08 20:13:59,931 - DealFinderAI.WalmartScraperAgent - INFO - Mock Walmart search for: {'product_type': 'headphones', 'keywords': ['sony', 'deal', 'headphones'], 'price_range': None, 'brands': ['Sony'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-08 20:13:59,931 - DealFinderAI.EbayScraperAgent - INFO - Mock eBay search for: {'product_type': 'headphones', 'keywords': ['sony', 'deal', 'headphones'], 'price_range': None, 'brands': ['Sony'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-08 20:13:59,931 - DealFinderAI.ResultsAggregatorAgent - INFO - Aggregating results for query: find me deal on sony headphones
2025-05-08 20:13:59,931 - DealFinderAI.ResultsAggregatorAgent - INFO - Found 3 results from various sources
2025-05-08 20:13:59,931 - DealFinderAI.ProductComparisonAgent - INFO - Comparing products for query: find me deal on sony headphones
2025-05-08 20:13:59,931 - DealFinderAI.ProductComparisonAgent - INFO - Found 10 products to compare
2025-05-08 20:13:59,931 - DealFinderAI.ChatMemoryAgent - INFO - Storing context for conversation 20250508201358
2025-05-08 20:13:59,931 - DealFinderAI.ChatMemoryAgent - INFO - Storing 10 products for conversation 20250508201358
2025-05-08 20:13:59,932 - DealFinderAI.PresentationAgent - INFO - Preparing presentation for 10 products
2025-05-08 20:13:59,932 - DealFinderAI.ChatMemoryAgent - INFO - Storing context for conversation 20250508201358
2025-05-08 20:13:59,932 - DealFinderAI.ChatMemoryAgent - INFO - Storing 10 products for conversation 20250508201358
2025-05-08 20:13:59,932 - DealFinderAI.Controller - INFO - Successfully stored search results in memory
2025-05-08 20:14:09,497 - DealFinderAI.Controller - INFO - Processing user query: tell me more about first one
2025-05-08 20:14:09,498 - DealFinderAI.ChatMemoryAgent - INFO - Analyzing query: 'tell me more about first one' for conversation 20250508201358
2025-05-08 20:14:09,498 - DealFinderAI.ChatMemoryAgent - INFO - Current product info: True
2025-05-08 20:14:09,498 - DealFinderAI.ChatMemoryAgent - INFO - Number of products in memory: 10
2025-05-08 20:14:09,498 - DealFinderAI.ChatMemoryAgent - INFO - Found 10 products in memory
2025-05-08 20:14:09,500 - DealFinderAI.ChatMemoryAgent - INFO - Follow-up analysis: True, Referenced products: 1
2025-05-08 20:14:09,500 - DealFinderAI.Controller - INFO - Analyze response: {'is_follow_up': True, 'focused_product': None, 'referenced_products': [{'title': 'Sony Value Sony Z188', 'price': 58.63, 'currency': 'USD', 'rating': 4.9, 'reviews': 2694, 'url': 'https://www.walmart.com/ip/sony-sony-z188', 'image_url': 'https://example.com/images/walmart-sony-z188.jpg', 'is_sponsored': False, 'is_pickup_today': True, 'source': 'Walmart', 'product_id': 'WM11748813', '_score': 94.137}], 'products': [{'title': 'Sony Value Sony Z188', 'price': 58.63, 'currency': 'USD', 'rating': 4.9, 'reviews': 2694, 'url': 'https://www.walmart.com/ip/sony-sony-z188', 'image_url': 'https://example.com/images/walmart-sony-z188.jpg', 'is_sponsored': False, 'is_pickup_today': True, 'source': 'Walmart', 'product_id': 'WM11748813', '_score': 94.137}, {'title': 'Sony Wireless Sony Y862', 'price': 114.52, 'currency': 'USD', 'rating': 4.7, 'reviews': 1201, 'url': 'https://www.amazon.com/dp/sy862', 'image_url': 'https://example.com/images/sony-y862.jpg', 'is_sponsored': False, 'is_prime': False, 'source': 'Amazon', 'asin': 'sy862', '_score': 80.548}, {'title': 'Sony Deal G569 New', 'price': 199.21, 'shipping': 0.0, 'total_price': 199.21, 'is_free_shipping': True, 'currency': 'USD', 'condition': 'New', 'listing_type': 'Buy It Now', 'url': 'https://www.ebay.com/itm/958128592', 'image_url': 'https://example.com/images/ebay-sony-g569.jpg', 'is_sponsored': False, 'seller_rating': 95.8, 'source': 'eBay', 'item_id': '312208603', '_score': 40.079}, {'title': 'Sony Wireless Sony B733', 'price': 205.21, 'currency': 'USD', 'rating': 4.8, 'reviews': 4457, 'url': 'https://www.amazon.com/dp/sb733', 'image_url': 'https://example.com/images/sony-b733.jpg', 'is_sponsored': False, 'is_prime': True, 'source': 'Amazon', 'asin': 'sb733', '_score': 80.479}, {'title': 'Sony Basic Sony X213', 'price': 80.42, 'currency': 'USD', 'rating': 4.6, 'reviews': 949, 'url': 'https://www.walmart.com/ip/sony-sony-x213', 'image_url': 'https://example.com/images/walmart-sony-x213.jpg', 'is_sponsored': True, 'is_pickup_today': True, 'source': 'Walmart', 'product_id': 'WM42313316', '_score': 73.958}, {'title': 'Sony Ultra Headphones A428', 'price': 52.89, 'currency': 'USD', 'rating': 4.4, 'reviews': 1699, 'url': 'https://www.amazon.com/dp/sa428', 'image_url': 'https://example.com/images/sony-a428.jpg', 'is_sponsored': True, 'is_prime': False, 'source': 'Amazon', 'asin': 'sa428', '_score': 73.711}, {'title': 'Sony Basic Sony Y337', 'price': 80.71, 'currency': 'USD', 'rating': 4.1, 'reviews': 1930, 'url': 'https://www.walmart.com/ip/sony-sony-y337', 'image_url': 'https://example.com/images/walmart-sony-y337.jpg', 'is_sponsored': True, 'is_pickup_today': False, 'source': 'Walmart', 'product_id': 'WM60641784', '_score': 67.929}, {'title': 'Sony Noise-Cancelling Headphones Z316', 'price': 165.64, 'currency': 'USD', 'rating': 4.7, 'reviews': 1598, 'url': 'https://www.walmart.com/ip/sony-headphones-z316', 'image_url': 'https://example.com/images/walmart-sony-z316.jpg', 'is_sponsored': True, 'is_pickup_today': False, 'source': 'Walmart', 'product_id': 'WM45368723', '_score': 65.436}, {'title': 'Sony Noise-Cancelling Sony Y489', 'price': 255.2, 'currency': 'USD', 'rating': 3.8, 'reviews': 4059, 'url': 'https://www.amazon.com/dp/sy489', 'image_url': 'https://example.com/images/sony-y489.jpg', 'is_sponsored': False, 'is_prime': False, 'source': 'Amazon', 'asin': 'sy489', '_score': 57.480000000000004}, {'title': 'Sony Value Headphones Y873', 'price': 267.82, 'currency': 'USD', 'rating': 3.8, 'reviews': 1839, 'url': 'https://www.walmart.com/ip/sony-headphones-y873', 'image_url': 'https://example.com/images/walmart-sony-y873.jpg', 'is_sponsored': False, 'is_pickup_today': False, 'source': 'Walmart', 'product_id': 'WM42647952', '_score': 56.218}]}
2025-05-08 20:14:09,501 - DealFinderAI.Controller - INFO - Is follow-up? True
2025-05-08 20:14:09,501 - DealFinderAI.Controller - INFO - Referenced products: 1
2025-05-08 20:14:09,501 - DealFinderAI.Controller - INFO - Handling as follow-up question about 1 products
2025-05-08 20:14:09,501 - DealFinderAI.Controller - INFO - Handling follow-up question: tell me more about first one
2025-05-08 20:14:09,501 - DealFinderAI.Controller - INFO - Referenced products: 1
2025-05-08 20:14:09,501 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: 
            I'm a shopping assistant helping a customer with product information.
            
            The customer previously searched for products and is now asking a follow-up question: "tell me more about first one"
            
            They're referring to this product:
            {
  "title": "Sony Value Sony Z188",
  "price": 58.63,
  "currency": "USD",
  "rating": 4.9,
  "reviews": 2694,
  "url": "https://www.walmart.com/ip/sony-sony-z188",
  "image_url": "https://example.com/images/walmart-sony-z188.jpg",
  "is_sponsored": false,
  "is_pickup_today": true,
  "source": "Walmart",
  "product_id": "WM11748813",
  "_score": 94.137
}
            
            Please provide a helpful, conversational response addressing their question
            about this product. Include relevant details from the product information.
            
            If the product is a "best deal", emphasize why it's a good value compared to alternatives.
            If they're asking about comparisons to other products, highlight the key differences.
            If they're asking about specific features, focus on those details.
            
2025-05-08 20:17:07,458 - DealFinderAI.Controller - INFO - Processing user query: find this product on amazon
2025-05-08 20:17:07,459 - DealFinderAI.ChatMemoryAgent - INFO - Analyzing query: 'find this product on amazon' for conversation 20250508201358
2025-05-08 20:17:07,459 - DealFinderAI.ChatMemoryAgent - INFO - Current product info: True
2025-05-08 20:17:07,459 - DealFinderAI.ChatMemoryAgent - INFO - Number of products in memory: 10
2025-05-08 20:17:07,459 - DealFinderAI.ChatMemoryAgent - INFO - Found 10 products in memory
2025-05-08 20:17:07,461 - DealFinderAI.ChatMemoryAgent - INFO - Using focused product: 0
2025-05-08 20:17:07,463 - DealFinderAI.ChatMemoryAgent - INFO - Follow-up analysis: True, Referenced products: 1
2025-05-08 20:17:07,463 - DealFinderAI.Controller - INFO - Analyze response: {'is_follow_up': True, 'focused_product': 0, 'referenced_products': [{'title': 'Sony Value Sony Z188', 'price': 58.63, 'currency': 'USD', 'rating': 4.9, 'reviews': 2694, 'url': 'https://www.walmart.com/ip/sony-sony-z188', 'image_url': 'https://example.com/images/walmart-sony-z188.jpg', 'is_sponsored': False, 'is_pickup_today': True, 'source': 'Walmart', 'product_id': 'WM11748813', '_score': 94.137}], 'products': [{'title': 'Sony Value Sony Z188', 'price': 58.63, 'currency': 'USD', 'rating': 4.9, 'reviews': 2694, 'url': 'https://www.walmart.com/ip/sony-sony-z188', 'image_url': 'https://example.com/images/walmart-sony-z188.jpg', 'is_sponsored': False, 'is_pickup_today': True, 'source': 'Walmart', 'product_id': 'WM11748813', '_score': 94.137}, {'title': 'Sony Wireless Sony Y862', 'price': 114.52, 'currency': 'USD', 'rating': 4.7, 'reviews': 1201, 'url': 'https://www.amazon.com/dp/sy862', 'image_url': 'https://example.com/images/sony-y862.jpg', 'is_sponsored': False, 'is_prime': False, 'source': 'Amazon', 'asin': 'sy862', '_score': 80.548}, {'title': 'Sony Deal G569 New', 'price': 199.21, 'shipping': 0.0, 'total_price': 199.21, 'is_free_shipping': True, 'currency': 'USD', 'condition': 'New', 'listing_type': 'Buy It Now', 'url': 'https://www.ebay.com/itm/958128592', 'image_url': 'https://example.com/images/ebay-sony-g569.jpg', 'is_sponsored': False, 'seller_rating': 95.8, 'source': 'eBay', 'item_id': '312208603', '_score': 40.079}, {'title': 'Sony Wireless Sony B733', 'price': 205.21, 'currency': 'USD', 'rating': 4.8, 'reviews': 4457, 'url': 'https://www.amazon.com/dp/sb733', 'image_url': 'https://example.com/images/sony-b733.jpg', 'is_sponsored': False, 'is_prime': True, 'source': 'Amazon', 'asin': 'sb733', '_score': 80.479}, {'title': 'Sony Basic Sony X213', 'price': 80.42, 'currency': 'USD', 'rating': 4.6, 'reviews': 949, 'url': 'https://www.walmart.com/ip/sony-sony-x213', 'image_url': 'https://example.com/images/walmart-sony-x213.jpg', 'is_sponsored': True, 'is_pickup_today': True, 'source': 'Walmart', 'product_id': 'WM42313316', '_score': 73.958}, {'title': 'Sony Ultra Headphones A428', 'price': 52.89, 'currency': 'USD', 'rating': 4.4, 'reviews': 1699, 'url': 'https://www.amazon.com/dp/sa428', 'image_url': 'https://example.com/images/sony-a428.jpg', 'is_sponsored': True, 'is_prime': False, 'source': 'Amazon', 'asin': 'sa428', '_score': 73.711}, {'title': 'Sony Basic Sony Y337', 'price': 80.71, 'currency': 'USD', 'rating': 4.1, 'reviews': 1930, 'url': 'https://www.walmart.com/ip/sony-sony-y337', 'image_url': 'https://example.com/images/walmart-sony-y337.jpg', 'is_sponsored': True, 'is_pickup_today': False, 'source': 'Walmart', 'product_id': 'WM60641784', '_score': 67.929}, {'title': 'Sony Noise-Cancelling Headphones Z316', 'price': 165.64, 'currency': 'USD', 'rating': 4.7, 'reviews': 1598, 'url': 'https://www.walmart.com/ip/sony-headphones-z316', 'image_url': 'https://example.com/images/walmart-sony-z316.jpg', 'is_sponsored': True, 'is_pickup_today': False, 'source': 'Walmart', 'product_id': 'WM45368723', '_score': 65.436}, {'title': 'Sony Noise-Cancelling Sony Y489', 'price': 255.2, 'currency': 'USD', 'rating': 3.8, 'reviews': 4059, 'url': 'https://www.amazon.com/dp/sy489', 'image_url': 'https://example.com/images/sony-y489.jpg', 'is_sponsored': False, 'is_prime': False, 'source': 'Amazon', 'asin': 'sy489', '_score': 57.480000000000004}, {'title': 'Sony Value Headphones Y873', 'price': 267.82, 'currency': 'USD', 'rating': 3.8, 'reviews': 1839, 'url': 'https://www.walmart.com/ip/sony-headphones-y873', 'image_url': 'https://example.com/images/walmart-sony-y873.jpg', 'is_sponsored': False, 'is_pickup_today': False, 'source': 'Walmart', 'product_id': 'WM42647952', '_score': 56.218}]}
2025-05-08 20:17:07,463 - DealFinderAI.Controller - INFO - Is follow-up? True
2025-05-08 20:17:07,463 - DealFinderAI.Controller - INFO - Referenced products: 1
2025-05-08 20:17:07,464 - DealFinderAI.Controller - INFO - Handling as follow-up question about 1 products
2025-05-08 20:17:07,464 - DealFinderAI.Controller - INFO - Handling follow-up question: find this product on amazon
2025-05-08 20:17:07,464 - DealFinderAI.Controller - INFO - Referenced products: 1
2025-05-08 20:17:07,464 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: 
            I'm a shopping assistant helping a customer with product information.
            
            The customer previously searched for products and is now asking a follow-up question: "find this product on amazon"
            
            They're referring to this product:
            {
  "title": "Sony Value Sony Z188",
  "price": 58.63,
  "currency": "USD",
  "rating": 4.9,
  "reviews": 2694,
  "url": "https://www.walmart.com/ip/sony-sony-z188",
  "image_url": "https://example.com/images/walmart-sony-z188.jpg",
  "is_sponsored": false,
  "is_pickup_today": true,
  "source": "Walmart",
  "product_id": "WM11748813",
  "_score": 94.137
}
            
            Please provide a helpful, conversational response addressing their question
            about this product. Include relevant details from the product information.
            
            If the product is a "best deal", emphasize why it's a good value compared to alternatives.
            If they're asking about comparisons to other products, highlight the key differences.
            If they're asking about specific features, focus on those details.
            
2025-05-08 20:17:25,764 - DealFinderAI.Controller - INFO - Processing user query: give me the link
2025-05-08 20:17:25,765 - DealFinderAI.ChatMemoryAgent - INFO - Analyzing query: 'give me the link' for conversation 20250508201358
2025-05-08 20:17:25,765 - DealFinderAI.ChatMemoryAgent - INFO - Current product info: True
2025-05-08 20:17:25,765 - DealFinderAI.ChatMemoryAgent - INFO - Number of products in memory: 10
2025-05-08 20:17:25,765 - DealFinderAI.ChatMemoryAgent - INFO - Found 10 products in memory
2025-05-08 20:17:25,765 - DealFinderAI.ChatMemoryAgent - INFO - Using focused product: 0
2025-05-08 20:17:25,765 - DealFinderAI.ChatMemoryAgent - INFO - Follow-up analysis: True, Referenced products: 1
2025-05-08 20:17:25,766 - DealFinderAI.Controller - INFO - Analyze response: {'is_follow_up': True, 'focused_product': 0, 'referenced_products': [{'title': 'Sony Value Sony Z188', 'price': 58.63, 'currency': 'USD', 'rating': 4.9, 'reviews': 2694, 'url': 'https://www.walmart.com/ip/sony-sony-z188', 'image_url': 'https://example.com/images/walmart-sony-z188.jpg', 'is_sponsored': False, 'is_pickup_today': True, 'source': 'Walmart', 'product_id': 'WM11748813', '_score': 94.137}], 'products': [{'title': 'Sony Value Sony Z188', 'price': 58.63, 'currency': 'USD', 'rating': 4.9, 'reviews': 2694, 'url': 'https://www.walmart.com/ip/sony-sony-z188', 'image_url': 'https://example.com/images/walmart-sony-z188.jpg', 'is_sponsored': False, 'is_pickup_today': True, 'source': 'Walmart', 'product_id': 'WM11748813', '_score': 94.137}, {'title': 'Sony Wireless Sony Y862', 'price': 114.52, 'currency': 'USD', 'rating': 4.7, 'reviews': 1201, 'url': 'https://www.amazon.com/dp/sy862', 'image_url': 'https://example.com/images/sony-y862.jpg', 'is_sponsored': False, 'is_prime': False, 'source': 'Amazon', 'asin': 'sy862', '_score': 80.548}, {'title': 'Sony Deal G569 New', 'price': 199.21, 'shipping': 0.0, 'total_price': 199.21, 'is_free_shipping': True, 'currency': 'USD', 'condition': 'New', 'listing_type': 'Buy It Now', 'url': 'https://www.ebay.com/itm/958128592', 'image_url': 'https://example.com/images/ebay-sony-g569.jpg', 'is_sponsored': False, 'seller_rating': 95.8, 'source': 'eBay', 'item_id': '312208603', '_score': 40.079}, {'title': 'Sony Wireless Sony B733', 'price': 205.21, 'currency': 'USD', 'rating': 4.8, 'reviews': 4457, 'url': 'https://www.amazon.com/dp/sb733', 'image_url': 'https://example.com/images/sony-b733.jpg', 'is_sponsored': False, 'is_prime': True, 'source': 'Amazon', 'asin': 'sb733', '_score': 80.479}, {'title': 'Sony Basic Sony X213', 'price': 80.42, 'currency': 'USD', 'rating': 4.6, 'reviews': 949, 'url': 'https://www.walmart.com/ip/sony-sony-x213', 'image_url': 'https://example.com/images/walmart-sony-x213.jpg', 'is_sponsored': True, 'is_pickup_today': True, 'source': 'Walmart', 'product_id': 'WM42313316', '_score': 73.958}, {'title': 'Sony Ultra Headphones A428', 'price': 52.89, 'currency': 'USD', 'rating': 4.4, 'reviews': 1699, 'url': 'https://www.amazon.com/dp/sa428', 'image_url': 'https://example.com/images/sony-a428.jpg', 'is_sponsored': True, 'is_prime': False, 'source': 'Amazon', 'asin': 'sa428', '_score': 73.711}, {'title': 'Sony Basic Sony Y337', 'price': 80.71, 'currency': 'USD', 'rating': 4.1, 'reviews': 1930, 'url': 'https://www.walmart.com/ip/sony-sony-y337', 'image_url': 'https://example.com/images/walmart-sony-y337.jpg', 'is_sponsored': True, 'is_pickup_today': False, 'source': 'Walmart', 'product_id': 'WM60641784', '_score': 67.929}, {'title': 'Sony Noise-Cancelling Headphones Z316', 'price': 165.64, 'currency': 'USD', 'rating': 4.7, 'reviews': 1598, 'url': 'https://www.walmart.com/ip/sony-headphones-z316', 'image_url': 'https://example.com/images/walmart-sony-z316.jpg', 'is_sponsored': True, 'is_pickup_today': False, 'source': 'Walmart', 'product_id': 'WM45368723', '_score': 65.436}, {'title': 'Sony Noise-Cancelling Sony Y489', 'price': 255.2, 'currency': 'USD', 'rating': 3.8, 'reviews': 4059, 'url': 'https://www.amazon.com/dp/sy489', 'image_url': 'https://example.com/images/sony-y489.jpg', 'is_sponsored': False, 'is_prime': False, 'source': 'Amazon', 'asin': 'sy489', '_score': 57.480000000000004}, {'title': 'Sony Value Headphones Y873', 'price': 267.82, 'currency': 'USD', 'rating': 3.8, 'reviews': 1839, 'url': 'https://www.walmart.com/ip/sony-headphones-y873', 'image_url': 'https://example.com/images/walmart-sony-y873.jpg', 'is_sponsored': False, 'is_pickup_today': False, 'source': 'Walmart', 'product_id': 'WM42647952', '_score': 56.218}]}
2025-05-08 20:17:25,766 - DealFinderAI.Controller - INFO - Is follow-up? True
2025-05-08 20:17:25,766 - DealFinderAI.Controller - INFO - Referenced products: 1
2025-05-08 20:17:25,766 - DealFinderAI.Controller - INFO - Handling as follow-up question about 1 products
2025-05-08 20:17:25,766 - DealFinderAI.Controller - INFO - Handling follow-up question: give me the link
2025-05-08 20:17:25,766 - DealFinderAI.Controller - INFO - Referenced products: 1
2025-05-08 20:17:25,766 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: 
            I'm a shopping assistant helping a customer with product information.
            
            The customer previously searched for products and is now asking a follow-up question: "give me the link"
            
            They're referring to this product:
            {
  "title": "Sony Value Sony Z188",
  "price": 58.63,
  "currency": "USD",
  "rating": 4.9,
  "reviews": 2694,
  "url": "https://www.walmart.com/ip/sony-sony-z188",
  "image_url": "https://example.com/images/walmart-sony-z188.jpg",
  "is_sponsored": false,
  "is_pickup_today": true,
  "source": "Walmart",
  "product_id": "WM11748813",
  "_score": 94.137
}
            
            Please provide a helpful, conversational response addressing their question
            about this product. Include relevant details from the product information.
            
            If the product is a "best deal", emphasize why it's a good value compared to alternatives.
            If they're asking about comparisons to other products, highlight the key differences.
            If they're asking about specific features, focus on those details.
            
2025-05-08 20:30:14,393 - DealFinderAI - INFO - Logging initialized
2025-05-08 20:30:14,393 - DealFinderAI.Main - INFO - Starting DealFinder AI
2025-05-08 20:30:14,393 - DealFinderAI.Main - INFO - Using mock scrapers
2025-05-08 20:30:14,450 - DealFinderAI.Scrapers - INFO - Initializing mock scraper agents
2025-05-08 20:31:18,969 - DealFinderAI - INFO - Logging initialized
2025-05-08 20:31:18,970 - DealFinderAI.Main - INFO - Starting DealFinder AI
2025-05-08 20:31:18,970 - DealFinderAI.Main - INFO - Using mock scrapers
2025-05-08 20:31:19,025 - DealFinderAI.Scrapers - INFO - Initializing mock scraper agents
2025-05-08 20:31:22,080 - DealFinderAI - INFO - Logging initialized
2025-05-08 20:31:22,080 - DealFinderAI.Main - INFO - Starting DealFinder AI
2025-05-08 20:31:22,080 - DealFinderAI.Main - INFO - Using mock scrapers
2025-05-08 20:31:22,117 - DealFinderAI.Scrapers - INFO - Initializing mock scraper agents
2025-05-08 20:31:24,065 - DealFinderAI - INFO - Logging initialized
2025-05-08 20:31:24,065 - DealFinderAI.Main - INFO - Starting DealFinder AI
2025-05-08 20:31:24,065 - DealFinderAI.Main - INFO - Using mock scrapers
2025-05-08 20:31:24,110 - DealFinderAI.Scrapers - INFO - Initializing mock scraper agents
2025-05-08 20:31:43,683 - DealFinderAI.Controller - INFO - Processing user query: find me the best deal on sony headphones
2025-05-08 20:31:43,683 - DealFinderAI.ChatMemoryAgent - INFO - Analyzing query: 'find me the best deal on sony headphones' for conversation 20250508201358
2025-05-08 20:31:43,683 - DealFinderAI.ChatMemoryAgent - INFO - Current product info: False
2025-05-08 20:31:43,683 - DealFinderAI.ChatMemoryAgent - INFO - No product context available for this conversation
2025-05-08 20:31:43,683 - DealFinderAI.Controller - INFO - Analyze response: {'is_follow_up': False, 'focused_product': None, 'referenced_products': [], 'products': []}
2025-05-08 20:31:43,683 - DealFinderAI.Controller - INFO - Is follow-up? False
2025-05-08 20:31:43,683 - DealFinderAI.Controller - INFO - Referenced products: 0
2025-05-08 20:31:43,683 - DealFinderAI.Controller - INFO - Processing as new search query
2025-05-08 20:31:43,683 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: find me the best deal on sony headphones
2025-05-08 20:31:44,743 - DealFinderAI.GeminiAgent - WARNING - Failed to parse Gemini response as JSON: ```json
{
  "product_type": "headphones",
  "keywords": ["sony", "headphones"],
  "price_range": null,
  "brands": ["Sony"],
  "features": [],
  "sorting_preference": "price_low_to_high",
  "buy_it_now": true
}
```

2025-05-08 20:31:44,743 - DealFinderAI.Controller - INFO - Parsed search parameters: {'product_type': 'headphones', 'keywords': ['sony', 'headphones'], 'price_range': None, 'brands': ['Sony'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-08 20:31:44,743 - DealFinderAI.AmazonScraperAgent - INFO - Mock Amazon search for: {'product_type': 'headphones', 'keywords': ['sony', 'headphones'], 'price_range': None, 'brands': ['Sony'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-08 20:31:44,743 - DealFinderAI.WalmartScraperAgent - INFO - Mock Walmart search for: {'product_type': 'headphones', 'keywords': ['sony', 'headphones'], 'price_range': None, 'brands': ['Sony'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-08 20:31:44,743 - DealFinderAI.EbayScraperAgent - INFO - Mock eBay search for: {'product_type': 'headphones', 'keywords': ['sony', 'headphones'], 'price_range': None, 'brands': ['Sony'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-08 20:31:44,743 - DealFinderAI.ResultsAggregatorAgent - INFO - Aggregating results for query: find me the best deal on sony headphones
2025-05-08 20:31:44,744 - DealFinderAI.ResultsAggregatorAgent - INFO - Found 3 results from various sources
2025-05-08 20:31:44,744 - DealFinderAI.ProductComparisonAgent - INFO - Comparing products for query: find me the best deal on sony headphones
2025-05-08 20:31:44,744 - DealFinderAI.ProductComparisonAgent - INFO - Found 10 products to compare
2025-05-08 20:31:44,744 - DealFinderAI.ChatMemoryAgent - INFO - Storing context for conversation 20250508201358
2025-05-08 20:31:44,744 - DealFinderAI.ChatMemoryAgent - INFO - Storing 10 products for conversation 20250508201358
2025-05-08 20:31:44,744 - DealFinderAI.PresentationAgent - INFO - Preparing presentation for 10 products
2025-05-08 20:31:44,744 - DealFinderAI.ChatMemoryAgent - INFO - Storing context for conversation 20250508201358
2025-05-08 20:31:44,744 - DealFinderAI.ChatMemoryAgent - INFO - Storing 10 products for conversation 20250508201358
2025-05-08 20:31:44,744 - DealFinderAI.Controller - INFO - Successfully stored search results in memory
2025-05-08 20:33:41,849 - DealFinderAI - INFO - Logging initialized
2025-05-08 20:33:41,849 - DealFinderAI.Main - INFO - Starting DealFinder AI
2025-05-08 20:33:41,849 - DealFinderAI.Main - INFO - Using real scrapers
2025-05-08 20:33:41,893 - DealFinderAI.Main - ERROR - Fatal error: cannot import name 'Session' from 'flask_session' (unknown location)
2025-05-08 20:34:32,485 - DealFinderAI - INFO - Logging initialized
2025-05-08 20:34:32,485 - DealFinderAI.Main - INFO - Starting DealFinder AI
2025-05-08 20:34:32,485 - DealFinderAI.Main - INFO - Using real scrapers
2025-05-08 20:34:32,532 - DealFinderAI.Main - ERROR - Fatal error: name 'Session' is not defined
2025-05-08 20:34:50,017 - DealFinderAI - INFO - Logging initialized
2025-05-08 20:34:50,018 - DealFinderAI.Main - INFO - Starting DealFinder AI
2025-05-08 20:34:50,018 - DealFinderAI.Main - INFO - Using real scrapers
2025-05-08 20:34:50,060 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-08 20:36:33,530 - DealFinderAI - INFO - Logging initialized
2025-05-08 20:36:33,531 - DealFinderAI.Main - INFO - Starting DealFinder AI
2025-05-08 20:36:33,531 - DealFinderAI.Main - INFO - Using real scrapers
2025-05-08 20:36:33,579 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-08 20:36:33,890 - DealFinderAI - INFO - Logging initialized
2025-05-08 20:36:33,890 - DealFinderAI.Main - INFO - Starting DealFinder AI
2025-05-08 20:36:33,890 - DealFinderAI.Main - INFO - Using real scrapers
2025-05-08 20:36:33,919 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-08 20:36:49,246 - DealFinderAI.Controller - INFO - Processing user query: find me best sony headphones
2025-05-08 20:36:49,247 - DealFinderAI.ChatMemoryAgent - INFO - Analyzing query: 'find me best sony headphones' for conversation 20250508203649
2025-05-08 20:36:49,247 - DealFinderAI.ChatMemoryAgent - INFO - Current product info: False
2025-05-08 20:36:49,247 - DealFinderAI.ChatMemoryAgent - INFO - No product context available for this conversation
2025-05-08 20:36:49,247 - DealFinderAI.Controller - INFO - Analyze response: {'is_follow_up': False, 'focused_product': None, 'referenced_products': [], 'products': []}
2025-05-08 20:36:49,247 - DealFinderAI.Controller - INFO - Is follow-up? False
2025-05-08 20:36:49,247 - DealFinderAI.Controller - INFO - Referenced products: 0
2025-05-08 20:36:49,247 - DealFinderAI.Controller - INFO - Processing as new search query
2025-05-08 20:36:49,247 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: find me best sony headphones
2025-05-08 20:36:50,282 - DealFinderAI.GeminiAgent - WARNING - Failed to parse Gemini response as JSON: ```json
{
  "product_type": "headphones",
  "keywords": ["best", "sony"],
  "price_range": null,
  "brands": ["Sony"],
  "features": [],
  "sorting_preference": "rating",
  "buy_it_now": true
}
```

2025-05-08 20:36:50,282 - DealFinderAI.Controller - INFO - Parsed search parameters: {'product_type': 'headphones', 'keywords': ['best', 'sony'], 'price_range': None, 'brands': ['Sony'], 'features': [], 'sorting_preference': 'rating', 'buy_it_now': True}
2025-05-08 20:36:50,283 - DealFinderAI.AmazonScraperAgent - INFO - Searching Amazon for: {'product_type': 'headphones', 'keywords': ['best', 'sony'], 'price_range': None, 'brands': ['Sony'], 'features': [], 'sorting_preference': 'rating', 'buy_it_now': True}
2025-05-08 20:36:53,169 - DealFinderAI.WalmartScraperAgent - INFO - Searching Walmart for: {'product_type': 'headphones', 'keywords': ['best', 'sony'], 'price_range': None, 'brands': ['Sony'], 'features': [], 'sorting_preference': 'rating', 'buy_it_now': True}
2025-05-08 20:36:56,612 - DealFinderAI.EbayScraperAgent - INFO - Searching eBay for: {'product_type': 'headphones', 'keywords': ['best', 'sony'], 'price_range': None, 'brands': ['Sony'], 'features': [], 'sorting_preference': 'rating', 'buy_it_now': True}
2025-05-08 20:36:59,450 - DealFinderAI.ResultsAggregatorAgent - INFO - Aggregating results for query: find me best sony headphones
2025-05-08 20:36:59,450 - DealFinderAI.ResultsAggregatorAgent - INFO - Found 3 results from various sources
2025-05-08 20:36:59,451 - DealFinderAI.ProductComparisonAgent - INFO - Comparing products for query: find me best sony headphones
2025-05-08 20:36:59,451 - DealFinderAI.ProductComparisonAgent - INFO - Found 10 products to compare
2025-05-08 20:36:59,451 - DealFinderAI.ChatMemoryAgent - INFO - Storing context for conversation 20250508203649
2025-05-08 20:36:59,452 - DealFinderAI.ChatMemoryAgent - INFO - Storing 10 products for conversation 20250508203649
2025-05-08 20:36:59,452 - DealFinderAI.PresentationAgent - INFO - Preparing presentation for 10 products
2025-05-08 20:36:59,452 - DealFinderAI.ChatMemoryAgent - INFO - Storing context for conversation 20250508203649
2025-05-08 20:36:59,452 - DealFinderAI.ChatMemoryAgent - INFO - Storing 10 products for conversation 20250508203649
2025-05-08 20:36:59,452 - DealFinderAI.Controller - INFO - Successfully stored search results in memory
2025-05-08 20:37:25,911 - DealFinderAI.Controller - INFO - Processing user query: tell me more about first one
2025-05-08 20:37:25,912 - DealFinderAI.ChatMemoryAgent - INFO - Analyzing query: 'tell me more about first one' for conversation 20250508203649
2025-05-08 20:37:25,912 - DealFinderAI.ChatMemoryAgent - INFO - Current product info: True
2025-05-08 20:37:25,912 - DealFinderAI.ChatMemoryAgent - INFO - Number of products in memory: 10
2025-05-08 20:37:25,912 - DealFinderAI.ChatMemoryAgent - INFO - Found 10 products in memory
2025-05-08 20:37:25,913 - DealFinderAI.ChatMemoryAgent - INFO - Follow-up analysis: True, Referenced products: 1
2025-05-08 20:37:25,913 - DealFinderAI.Controller - INFO - Analyze response: {'is_follow_up': True, 'focused_product': None, 'referenced_products': [{'title': 'Unknown Product', 'price': 98.0, 'currency': 'USD', 'url': '#', 'image_url': 'https://m.media-amazon.com/images/I/51F-Ok9xuzL._AC_UY218_.jpg', 'rating': 4.7, 'reviews': 26585, 'is_sponsored': False, 'is_prime': False, 'asin': 'B000AJIF4E', 'source': 'Amazon', '_score': 82.2}], 'products': [{'title': 'Unknown Product', 'price': 98.0, 'currency': 'USD', 'url': '#', 'image_url': 'https://m.media-amazon.com/images/I/51F-Ok9xuzL._AC_UY218_.jpg', 'rating': 4.7, 'reviews': 26585, 'is_sponsored': False, 'is_prime': False, 'asin': 'B000AJIF4E', 'source': 'Amazon', '_score': 82.2}, {'title': 'Sony WF-1000XM5 The Best Truly Wireless Bluetooth Earbuds Headphones - Black', 'price': 139.99, 'shipping': 0.0, 'total_price': 139.99, 'is_free_shipping': True, 'currency': 'USD', 'url': 'https://www.ebay.com/itm/256853907827?_skw=headphones+best+sony+Sony&itmmeta=01JTS7JMFKJAB0CBPPBM3P3XE8&hash=item3bcdaf9973%3Ag%3A41EAAOSwDFln0Txs&itmprp=enc%3AAQAKAAABAFkggFvd1GGDu0w3yXCmi1eDHCY2ER51Urg5UlV%2B56m4ZdNkT7hrfgw2ipF8%2Fa8uHK7uJuFeHnkvXCtGV1eBA%2BNiXtxsHBFeYAJ3Wby2iUvUi7awKrpRiQICJcmzJeuYQsPdGO9DjzO%2Br71hb%2B8HFA36jYJSF08BUCRvDQd5wx%2B7JdQeZ7eZNfeW5g9TyfaYCMUj4G8bHtFpvic%2By6D3O8XDtLhHI3sUV%2BRIv%2FODO7zxVnuaMrAP0fV1T6Pg4B%2Fp7qUzNjGwGoXSyxsWqc6dtKH7ZtqOK4zM97xEJmVwECHCG5DnoZWSagFYtONrwiO2vnGeq7dxKv%2B3tegeHHc%2BDts%3D%7Ctkp%3ABFBM9MfKp9Zl&LH_BIN=1', 'image_url': '', 'is_sponsored': False, 'condition': 'Pre-Owned', 'listing_type': 'Buy It Now', 'seller_rating': 100.0, 'item_id': '256853907827', 'source': 'eBay', '_score': 36.001}, {'title': 'Unknown Product', 'price': 0.0, 'currency': 'USD', 'url': '#', 'image_url': '', 'rating': 0.0, 'reviews': 0, 'is_sponsored': False, 'is_pickup_today': False, 'product_id': '2P9FP9H47OOW', 'source': 'Walmart', '_score': 30.0}, {'title': 'Unknown Product', 'price': 99.0, 'currency': 'USD', 'url': '#', 'image_url': 'https://m.media-amazon.com/images/I/61USpC8rfrL._AC_UY218_.jpg', 'rating': 4.7, 'reviews': 567, 'is_sponsored': False, 'is_prime': False, 'asin': 'B073BWKNVV', 'source': 'Amazon', '_score': 77.1}, {'title': 'Unknown Product', 'price': 99.99, 'currency': 'USD', 'url': '#', 'image_url': 'https://m.media-amazon.com/images/I/61LHAMO4UCL._AC_UY218_.jpg', 'rating': 4.9, 'reviews': 24, 'is_sponsored': False, 'is_prime': True, 'asin': 'B09ZF3TGRR', 'source': 'Amazon', '_score': 77.001}, {'title': 'Unknown Product', 'price': 248.0, 'currency': 'USD', 'url': '#', 'image_url': 'https://m.media-amazon.com/images/I/519hVWS5TCL._AC_UY218_.jpg', 'rating': 4.7, 'reviews': 76, 'is_sponsored': False, 'is_prime': False, 'asin': 'B0DD8SHVZL', 'source': 'Amazon', '_score': 52.2}, {'title': 'Unknown Product', 'price': 498.73, 'currency': 'USD', 'url': '#', 'image_url': 'https://m.media-amazon.com/images/I/61OFuyf6FKL._AC_UY218_.jpg', 'rating': 4.7, 'reviews': 338, 'is_sponsored': False, 'is_prime': False, 'asin': 'B0C1BQ99P1', 'source': 'Amazon', '_score': 52.0}, {'title': 'Sony WH-1000XM5 The Best Wireless Auto Noise Canceling Headphones Optimizer', 'price': 299.95, 'shipping': 0.0, 'total_price': 299.95, 'is_free_shipping': True, 'currency': 'USD', 'url': 'https://www.ebay.com/itm/235720395134?_skw=headphones+best+sony+Sony&itmmeta=01JTS7JMFK2MPE85JAPMDF06EW&hash=item36e207c97e%3Ag%3A5GQAAOSw6jJm0SLC&itmprp=enc%3AAQAKAAAA8FkggFvd1GGDu0w3yXCmi1fc6LwlPEiKNSm4y6vXwq%2FNwkOTh%2FRWfeRaSmfW9s0HMFDtEk3sRqvxj3qJ6gF8Y82eIZO%2Bjq5Vh0SFLm44F5yjNqCMgihAI6JnCd%2FKgYLeqvmulp3EV1jJhEGGX6Mj4IaoF6i6Kbs2pNmFqVZUJai1OstlNRydyPPBUWbaqZGa%2F8ICHhwVTwSlWRl%2FOML7gcdSciGEx23DdPpXTj1xhgWllTa%2BWZzoAbPtAJ6ciYKJ%2BQev3uQP5loI%2FnSDSfgUoQHPwRyankjSxtGS5kO9cTF9RpIq931aPkJXKjGEQxPdnQ%3D%3D%7Ctkp%3ABFBM9MfKp9Zl&LH_BIN=1', 'image_url': '', 'is_sponsored': False, 'condition': 'Brand New', 'listing_type': 'Buy It Now', 'seller_rating': 98.2, 'item_id': '235720395134', 'source': 'eBay', '_score': 30.005000000000003}, {'title': 'Unknown Product', 'price': 0.0, 'currency': 'USD', 'url': '#', 'image_url': '', 'rating': 0.0, 'reviews': 0, 'is_sponsored': False, 'is_pickup_today': False, 'product_id': '0YE78IUAN606', 'source': 'Walmart', '_score': 30.0}, {'title': 'Unknown Product', 'price': 0.0, 'currency': 'USD', 'url': '#', 'image_url': '', 'rating': 0.0, 'reviews': 0, 'is_sponsored': False, 'is_pickup_today': False, 'product_id': '4H1F7VLDAP2X', 'source': 'Walmart', '_score': 30.0}]}
2025-05-08 20:37:25,914 - DealFinderAI.Controller - INFO - Is follow-up? True
2025-05-08 20:37:25,914 - DealFinderAI.Controller - INFO - Referenced products: 1
2025-05-08 20:37:25,914 - DealFinderAI.Controller - INFO - Handling as follow-up question about 1 products
2025-05-08 20:37:25,914 - DealFinderAI.Controller - INFO - Handling follow-up question: tell me more about first one
2025-05-08 20:37:25,914 - DealFinderAI.Controller - INFO - Referenced products: 1
2025-05-08 20:37:25,914 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: 
            I'm a shopping assistant helping a customer with product information.
            
            The customer previously searched for products and is now asking a follow-up question: "tell me more about first one"
            
            They're referring to this product:
            {
  "title": "Unknown Product",
  "price": 98.0,
  "currency": "USD",
  "url": "#",
  "image_url": "https://m.media-amazon.com/images/I/51F-Ok9xuzL._AC_UY218_.jpg",
  "rating": 4.7,
  "reviews": 26585,
  "is_sponsored": false,
  "is_prime": false,
  "asin": "B000AJIF4E",
  "source": "Amazon",
  "_score": 82.2
}
            
            Please provide a helpful, conversational response addressing their question
            about this product. Include relevant details from the product information.
            
            If the product is a "best deal", emphasize why it's a good value compared to alternatives.
            If they're asking about comparisons to other products, highlight the key differences.
            If they're asking about specific features, focus on those details.
            
2025-05-08 20:39:13,118 - DealFinderAI - INFO - Logging initialized
2025-05-08 20:39:13,118 - DealFinderAI.Main - INFO - Starting DealFinder AI
2025-05-08 20:39:13,118 - DealFinderAI.Main - INFO - Using real scrapers
2025-05-08 20:39:13,118 - DealFinderAI.Main - ERROR - Fatal error: setup_flask_app() takes from 0 to 1 positional arguments but 2 were given
2025-05-08 21:29:55,389 - DealFinderAI - INFO - Logging initialized
2025-05-08 21:29:55,390 - DealFinderAI.Main - INFO - Starting DealFinder AI
2025-05-08 21:29:55,390 - DealFinderAI.Main - INFO - Using mock scrapers
2025-05-08 21:29:55,390 - DealFinderAI.Main - ERROR - Fatal error: setup_flask_app() takes from 0 to 1 positional arguments but 2 were given
2025-05-08 21:30:39,269 - DealFinderAI - INFO - Logging initialized
2025-05-08 21:30:39,270 - DealFinderAI.Main - ERROR - Fatal error in main: 'Namespace' object has no attribute 'gemini_api_key'
2025-05-08 21:31:11,154 - DealFinderAI - INFO - Logging initialized
2025-05-08 21:31:11,155 - DealFinderAI.Main - INFO - Starting DealFinder AI
2025-05-08 21:31:11,155 - DealFinderAI.Main - INFO - Using real scrapers
2025-05-08 21:31:11,201 - DealFinderAI.Main - ERROR - Fatal error in main: name 'use_real_scrapers' is not defined
2025-05-08 21:31:46,637 - DealFinderAI - INFO - Logging initialized
2025-05-08 21:31:46,637 - DealFinderAI.Main - INFO - Starting DealFinder AI
2025-05-08 21:31:46,637 - DealFinderAI.Main - INFO - Using real scrapers
2025-05-08 21:31:46,686 - DealFinderAI.Main - ERROR - Fatal error in main: name 'use_real_scrapers' is not defined
2025-05-08 21:32:28,753 - DealFinderAI - INFO - Logging initialized
2025-05-08 21:32:28,753 - DealFinderAI.Main - INFO - Starting DealFinder AI
2025-05-08 21:32:28,753 - DealFinderAI.Main - INFO - Using real scrapers
2025-05-08 21:32:28,797 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-08 21:32:28,797 - DealFinderAI.Controller - INFO - Initialized scraper agents: ['amazon', 'walmart', 'ebay']
2025-05-08 21:32:29,043 - DealFinderAI - INFO - Logging initialized
2025-05-08 21:32:29,044 - DealFinderAI.Main - INFO - Starting DealFinder AI
2025-05-08 21:32:29,044 - DealFinderAI.Main - INFO - Using real scrapers
2025-05-08 21:32:29,068 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-08 21:32:29,068 - DealFinderAI.Controller - INFO - Initialized scraper agents: ['amazon', 'walmart', 'ebay']
2025-05-08 21:32:50,182 - DealFinderAI.Controller - INFO - Processing user query: FIND ME BEST DEAL ON SONY HEADPHONES
2025-05-08 21:32:50,182 - DealFinderAI.ChatMemoryAgent - INFO - Analyzing query: 'find me best deal on sony headphones' for conversation 20250508213250
2025-05-08 21:32:50,183 - DealFinderAI.ChatMemoryAgent - INFO - Current product info: False
2025-05-08 21:32:50,183 - DealFinderAI.ChatMemoryAgent - INFO - No product context available for this conversation
2025-05-08 21:32:50,183 - DealFinderAI.Controller - INFO - Analyze response: {'is_follow_up': False, 'focused_product': None, 'referenced_products': [], 'products': []}
2025-05-08 21:32:50,183 - DealFinderAI.Controller - INFO - Is follow-up? False
2025-05-08 21:32:50,183 - DealFinderAI.Controller - INFO - Referenced products: 0
2025-05-08 21:32:50,183 - DealFinderAI.Controller - INFO - Processing as new search query
2025-05-08 21:32:50,183 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: FIND ME BEST DEAL ON SONY HEADPHONES
2025-05-08 21:32:51,318 - DealFinderAI.GeminiAgent - WARNING - Failed to parse Gemini response as JSON: ```json
{
  "product_type": "headphones",
  "keywords": ["sony", "headphones"],
  "price_range": null,
  "brands": ["Sony"],
  "features": [],
  "sorting_preference": "price_low_to_high",
  "buy_it_now": true
}
```

2025-05-08 21:32:51,318 - DealFinderAI.Controller - INFO - Parsed search parameters: {'product_type': 'headphones', 'keywords': ['sony', 'headphones'], 'price_range': None, 'brands': ['Sony'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-08 21:32:51,318 - DealFinderAI.Controller - ERROR - Error processing query: 'DealFinderController' object has no attribute 'amazon_agent'
2025-05-08 21:37:06,626 - DealFinderAI - INFO - Logging initialized
2025-05-08 21:37:06,627 - DealFinderAI.Main - INFO - Starting DealFinder AI
2025-05-08 21:37:06,627 - DealFinderAI.Main - INFO - Using real scrapers
2025-05-08 21:37:06,671 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-08 21:37:06,671 - DealFinderAI.Controller - INFO - Initialized scraper agents: ['amazon', 'walmart', 'ebay']
2025-05-08 21:37:13,215 - DealFinderAI - INFO - Logging initialized
2025-05-08 21:37:13,215 - DealFinderAI.Main - INFO - Starting DealFinder AI
2025-05-08 21:37:13,215 - DealFinderAI.Main - INFO - Using real scrapers
2025-05-08 21:37:13,257 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-08 21:37:13,258 - DealFinderAI.Controller - INFO - Initialized scraper agents: ['amazon', 'walmart', 'ebay']
2025-05-08 21:37:28,637 - DealFinderAI.Controller - INFO - Processing user query: FIND ME BEST DEAL ON SONY HEADPHONES
2025-05-08 21:37:28,637 - DealFinderAI.ChatMemoryAgent - INFO - Analyzing query: 'find me best deal on sony headphones' for conversation 20250508213250
2025-05-08 21:37:28,638 - DealFinderAI.ChatMemoryAgent - INFO - Current product info: False
2025-05-08 21:37:28,638 - DealFinderAI.ChatMemoryAgent - INFO - No product context available for this conversation
2025-05-08 21:37:28,638 - DealFinderAI.Controller - INFO - Analyze response: {'is_follow_up': False, 'focused_product': None, 'referenced_products': [], 'products': []}
2025-05-08 21:37:28,638 - DealFinderAI.Controller - INFO - Is follow-up? False
2025-05-08 21:37:28,638 - DealFinderAI.Controller - INFO - Referenced products: 0
2025-05-08 21:37:28,638 - DealFinderAI.Controller - INFO - Processing as new search query
2025-05-08 21:37:28,638 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: FIND ME BEST DEAL ON SONY HEADPHONES
2025-05-08 21:37:29,718 - DealFinderAI.GeminiAgent - WARNING - Failed to parse Gemini response as JSON: ```json
{
  "product_type": "headphones",
  "keywords": ["sony"],
  "price_range": null,
  "brands": ["Sony"],
  "features": [],
  "sorting_preference": "price_low_to_high",
  "buy_it_now": true
}
```

2025-05-08 21:37:29,718 - DealFinderAI.Controller - INFO - Parsed search parameters: {'product_type': 'headphones', 'keywords': ['sony'], 'price_range': None, 'brands': ['Sony'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-08 21:37:29,718 - DealFinderAI.AmazonScraperAgent - INFO - Searching Amazon for: {'product_type': 'headphones', 'keywords': ['sony'], 'price_range': None, 'brands': ['Sony'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-08 21:37:32,328 - DealFinderAI.WalmartScraperAgent - INFO - Searching Walmart for: {'product_type': 'headphones', 'keywords': ['sony'], 'price_range': None, 'brands': ['Sony'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-08 21:37:35,219 - DealFinderAI.EbayScraperAgent - INFO - Searching eBay for: {'product_type': 'headphones', 'keywords': ['sony'], 'price_range': None, 'brands': ['Sony'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-08 21:37:38,041 - DealFinderAI.ResultsAggregatorAgent - INFO - Aggregating results for query: FIND ME BEST DEAL ON SONY HEADPHONES
2025-05-08 21:37:38,041 - DealFinderAI.ResultsAggregatorAgent - INFO - Found 3 results from various sources
2025-05-08 21:37:38,042 - DealFinderAI.ProductComparisonAgent - INFO - Comparing products for query: FIND ME BEST DEAL ON SONY HEADPHONES
2025-05-08 21:37:38,042 - DealFinderAI.ProductComparisonAgent - INFO - Found 10 products to compare
2025-05-08 21:37:38,042 - DealFinderAI.ChatMemoryAgent - INFO - Storing context for conversation 20250508213250
2025-05-08 21:37:38,042 - DealFinderAI.ChatMemoryAgent - INFO - Storing 10 products for conversation 20250508213250
2025-05-08 21:37:38,042 - DealFinderAI.PresentationAgent - INFO - Preparing presentation for 10 products
2025-05-08 21:37:38,043 - DealFinderAI.ChatMemoryAgent - INFO - Storing context for conversation 20250508213250
2025-05-08 21:37:38,043 - DealFinderAI.ChatMemoryAgent - INFO - Storing 10 products for conversation 20250508213250
2025-05-08 21:37:38,043 - DealFinderAI.Controller - INFO - Successfully stored search results in memory
2025-05-08 21:38:15,163 - DealFinderAI.Controller - INFO - Processing user query: GIVE ME MORE DEATAILS ON SONY MX 1000 SERIES
2025-05-08 21:38:15,164 - DealFinderAI.ChatMemoryAgent - INFO - Analyzing query: 'give me more deatails on sony mx 1000 series' for conversation 20250508213250
2025-05-08 21:38:15,164 - DealFinderAI.ChatMemoryAgent - INFO - Current product info: True
2025-05-08 21:38:15,165 - DealFinderAI.ChatMemoryAgent - INFO - Number of products in memory: 10
2025-05-08 21:38:15,165 - DealFinderAI.ChatMemoryAgent - INFO - Found 10 products in memory
2025-05-08 21:38:15,166 - DealFinderAI.ChatMemoryAgent - INFO - Follow-up analysis: False, Referenced products: 0
2025-05-08 21:38:15,166 - DealFinderAI.Controller - INFO - Analyze response: {'is_follow_up': False, 'focused_product': None, 'referenced_products': [], 'products': []}
2025-05-08 21:38:15,166 - DealFinderAI.Controller - INFO - Is follow-up? False
2025-05-08 21:38:15,166 - DealFinderAI.Controller - INFO - Referenced products: 0
2025-05-08 21:38:15,166 - DealFinderAI.Controller - INFO - Processing as new search query
2025-05-08 21:38:15,166 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: GIVE ME MORE DEATAILS ON SONY MX 1000 SERIES
2025-05-08 21:38:16,059 - DealFinderAI.GeminiAgent - WARNING - Failed to parse Gemini response as JSON: ```json
{
  "product_type": "Headphones",
  "keywords": ["SONY", "MX 1000 SERIES"],
  "price_range": null,
  "brands": ["SONY"],
  "features": [],
  "sorting_preference": null,
  "buy_it_now": true
}
```

2025-05-08 21:38:16,059 - DealFinderAI.Controller - INFO - Parsed search parameters: {'product_type': 'Headphones', 'keywords': ['SONY', 'MX 1000 SERIES'], 'price_range': None, 'brands': ['SONY'], 'features': [], 'sorting_preference': None, 'buy_it_now': True}
2025-05-08 21:38:16,060 - DealFinderAI.AmazonScraperAgent - INFO - Searching Amazon for: {'product_type': 'Headphones', 'keywords': ['SONY', 'MX 1000 SERIES'], 'price_range': None, 'brands': ['SONY'], 'features': [], 'sorting_preference': None, 'buy_it_now': True}
2025-05-08 21:38:18,825 - DealFinderAI.WalmartScraperAgent - INFO - Searching Walmart for: {'product_type': 'Headphones', 'keywords': ['SONY', 'MX 1000 SERIES'], 'price_range': None, 'brands': ['SONY'], 'features': [], 'sorting_preference': None, 'buy_it_now': True}
2025-05-08 21:38:21,571 - DealFinderAI.EbayScraperAgent - INFO - Searching eBay for: {'product_type': 'Headphones', 'keywords': ['SONY', 'MX 1000 SERIES'], 'price_range': None, 'brands': ['SONY'], 'features': [], 'sorting_preference': None, 'buy_it_now': True}
2025-05-08 21:38:24,125 - DealFinderAI.ResultsAggregatorAgent - INFO - Aggregating results for query: GIVE ME MORE DEATAILS ON SONY MX 1000 SERIES
2025-05-08 21:38:24,125 - DealFinderAI.ResultsAggregatorAgent - INFO - Found 3 results from various sources
2025-05-08 21:38:24,125 - DealFinderAI.ProductComparisonAgent - INFO - Comparing products for query: GIVE ME MORE DEATAILS ON SONY MX 1000 SERIES
2025-05-08 21:38:24,125 - DealFinderAI.ProductComparisonAgent - INFO - Found 10 products to compare
2025-05-08 21:38:24,126 - DealFinderAI.ChatMemoryAgent - INFO - Storing context for conversation 20250508213250
2025-05-08 21:38:24,126 - DealFinderAI.ChatMemoryAgent - INFO - Storing 10 products for conversation 20250508213250
2025-05-08 21:38:24,126 - DealFinderAI.PresentationAgent - INFO - Preparing presentation for 10 products
2025-05-08 21:38:24,126 - DealFinderAI.ChatMemoryAgent - INFO - Storing context for conversation 20250508213250
2025-05-08 21:38:24,126 - DealFinderAI.ChatMemoryAgent - INFO - Storing 10 products for conversation 20250508213250
2025-05-08 21:38:24,126 - DealFinderAI.Controller - INFO - Successfully stored search results in memory
2025-05-08 21:38:43,661 - DealFinderAI.Controller - INFO - Processing user query: TELL ME ABOUT THE FIRST PRODUCT
2025-05-08 21:38:43,661 - DealFinderAI.ChatMemoryAgent - INFO - Analyzing query: 'tell me about the first product' for conversation 20250508213250
2025-05-08 21:38:43,661 - DealFinderAI.ChatMemoryAgent - INFO - Current product info: True
2025-05-08 21:38:43,662 - DealFinderAI.ChatMemoryAgent - INFO - Number of products in memory: 10
2025-05-08 21:38:43,662 - DealFinderAI.ChatMemoryAgent - INFO - Found 10 products in memory
2025-05-08 21:38:43,662 - DealFinderAI.ChatMemoryAgent - INFO - Follow-up analysis: True, Referenced products: 1
2025-05-08 21:38:43,662 - DealFinderAI.Controller - INFO - Analyze response: {'is_follow_up': True, 'focused_product': None, 'referenced_products': [{'title': 'Unknown Product', 'price': 0.0, 'currency': 'USD', 'url': '#', 'image_url': 'https://m.media-amazon.com/images/I/51rpbVmi9XL._AC_UY218_.jpg', 'rating': 4.4, 'reviews': 9747, 'is_sponsored': False, 'is_prime': True, 'asin': 'B0BS1QCFHX', 'source': 'Amazon', '_score': 97.0}], 'products': [{'title': 'Unknown Product', 'price': 0.0, 'currency': 'USD', 'url': '#', 'image_url': 'https://m.media-amazon.com/images/I/51rpbVmi9XL._AC_UY218_.jpg', 'rating': 4.4, 'reviews': 9747, 'is_sponsored': False, 'is_prime': True, 'asin': 'B0BS1QCFHX', 'source': 'Amazon', '_score': 97.0}, {'title': 'Sony WH-1000XM5 The Best Wireless Noise Canceling Headphones - Black', 'price': 165.95, 'shipping': 0.0, 'total_price': 165.95, 'is_free_shipping': True, 'currency': 'USD', 'url': 'https://www.ebay.com/itm/196911196844?_skw=Headphones+SONY+MX+1000+SERIES+SONY&epid=22054478105&itmmeta=01JTSB33C7HVG00DZQ7K1A9M51&hash=item2dd8d26aac%3Ag%3AQnsAAOSwXTFna7R3&itmprp=enc%3AAQAKAAABAFkggFvd1GGDu0w3yXCmi1ez7l230Dk5cjPe%2F7rGuFOE8F%2Bn604rMbSl6zwCoQUEkbIhfL%2FjAcn0BZU0SLuTQdppRrb%2B0DcFEoynVv2UQqzFGB8WdoIDi4RvgLEe4KuSxv9o1ZzRCIMQ9pmJF1UcqWMKQ9OTguLvkEXoM1hl8MWW5dtzLue3uoJ4fJsIopPXGPrMF3k%2BBi3YxjAmgogRDaanz4lWR%2F3P%2Bvy477G1fHNSyvu3WgzKGtJMxHl07Iuc3de7rvLHfb9s6Vq6gDzzEXkI0p85zOGkBEoqoqKvTnIDwXF5Pm5Xzn6LfNfBHmajM1LESPhx36ClfH7D7FlpUvM%3D%7Ctkp%3ABFBMnraMq9Zl&LH_BIN=1', 'image_url': '', 'is_sponsored': False, 'condition': 'Good - Refurbished', 'listing_type': 'Buy It Now', 'seller_rating': 99.2, 'item_id': '196911196844', 'source': 'eBay', '_score': 38.405}, {'title': 'Unknown Product', 'price': 0.0, 'currency': 'USD', 'url': '#', 'image_url': '', 'rating': 0.0, 'reviews': 0, 'is_sponsored': False, 'is_pickup_today': False, 'product_id': '2P9FP9H47OOW', 'source': 'Walmart', '_score': 30.0}, {'title': 'Unknown Product', 'price': 198.0, 'currency': 'USD', 'url': '#', 'image_url': 'https://m.media-amazon.com/images/I/610DB8Cwm7L._AC_UY218_.jpg', 'rating': 4.3, 'reviews': 1399, 'is_sponsored': False, 'is_prime': True, 'asin': 'B0CWVX1GNX', 'source': 'Amazon', '_score': 76.2}, {'title': 'Unknown Product', 'price': 149.0, 'currency': 'USD', 'url': '#', 'image_url': 'https://m.media-amazon.com/images/I/71fPlPPNMkL._AC_UY218_.jpg', 'rating': 4.3, 'reviews': 138, 'is_sponsored': False, 'is_prime': True, 'asin': 'B087QV671C', 'source': 'Amazon', '_score': 71.1}, {'title': 'Unknown Product', 'price': 348.0, 'currency': 'USD', 'url': '#', 'image_url': 'https://m.media-amazon.com/images/I/51aXvjzcukL._AC_UY218_.jpg', 'rating': 4.3, 'reviews': 16880, 'is_sponsored': False, 'is_prime': False, 'asin': 'B09XS7JWHH', 'source': 'Amazon', '_score': 58.0}, {'title': 'Unknown Product', 'price': 298.0, 'currency': 'USD', 'url': '#', 'image_url': 'https://m.media-amazon.com/images/I/61oqO1AMbdL._AC_UY218_.jpg', 'rating': 4.6, 'reviews': 0, 'is_sponsored': False, 'is_prime': False, 'asin': 'B0863TXGM3', 'source': 'Amazon', '_score': 46.2}, {'title': 'Sony WH-1000XM4 Wireless Bluetooth Noise Canceling Over Ear Headphones - Black', 'price': 119.99, 'shipping': 0.0, 'total_price': 119.99, 'is_free_shipping': True, 'currency': 'USD', 'url': 'https://www.ebay.com/itm/116573444690?_skw=Headphones+SONY+MX+1000+SERIES+SONY&itmmeta=01JTSB33C7T8KW1QTA8JXGKN5V&hash=item1b24519a52%3Ag%3A24UAAOSwMY5k5lN%7E&itmprp=enc%3AAQAKAAABAFkggFvd1GGDu0w3yXCmi1fJPw6dr8xhrWaKdFdZ01bNOb8azzKUSut3J3W%2FXskBfuSxpUhwPJPHG9oNhX9AOun3tmN1b3wVgVEHx9UYTWHd5oxiibGeYvyTIyKe2ughI%2BcQkRaAjvkAoao5oqDo%2Ffmwqv2Vb5D7n2jMxKZ29wkWSRthh22YFBbfS8qK24es1QhDZbjhbo8%2FpWiuqgcoUuxeslc2pDVmoqt1tou9iuPDu8JNOgvTXeLj7%2FuWQnGK%2BOoc5rOaKIfUGAXkJptT6SfK2F8MNnE%2B4fh9ehKszDrNCNO839%2Fm3bSS8V3c9GilVRPqZ953e7RuoW4sIgujQE4%3D%7Ctkp%3ABFBMnraMq9Zl&LH_BIN=1', 'image_url': '', 'is_sponsored': False, 'condition': 'Pre-Owned', 'listing_type': 'Buy It Now', 'seller_rating': 97.5, 'item_id': '116573444690', 'source': 'eBay', '_score': 38.001000000000005}, {'title': 'Unknown Product', 'price': 0.0, 'currency': 'USD', 'url': 'https://www.walmart.com/ip/Sony-WH-1000XM4-Wireless-Noise-Canceling-Over-the-Ear-Headphones-with-Google-Assistant-Black/310157752?classType=REGULAR&athbdg=L1600&from=/search', 'image_url': '', 'rating': 0.0, 'reviews': 0, 'is_sponsored': False, 'is_pickup_today': False, 'product_id': '58BYGX03ZG1X', 'source': 'Walmart', '_score': 30.0}, {'title': 'Unknown Product', 'price': 0.0, 'currency': 'USD', 'url': 'https://www.walmart.com/ip/Sony-WH-1000XM5-The-Best-Wireless-Noise-Canceling-Headphones-Black/386006068?classType=VARIANT&from=/search', 'image_url': '', 'rating': 0.0, 'reviews': 0, 'is_sponsored': False, 'is_pickup_today': False, 'product_id': '7L1R4YYVLYOY', 'source': 'Walmart', '_score': 30.0}]}
2025-05-08 21:38:43,663 - DealFinderAI.Controller - INFO - Is follow-up? True
2025-05-08 21:38:43,663 - DealFinderAI.Controller - INFO - Referenced products: 1
2025-05-08 21:38:43,663 - DealFinderAI.Controller - INFO - Handling as follow-up question about 1 products
2025-05-08 21:38:43,663 - DealFinderAI.Controller - INFO - Handling follow-up question: TELL ME ABOUT THE FIRST PRODUCT
2025-05-08 21:38:43,663 - DealFinderAI.Controller - INFO - Referenced products: 1
2025-05-08 21:38:43,663 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: 
            I'm a shopping assistant helping a customer with product information.
            
            The customer previously searched for products and is now asking a follow-up question: "TELL ME ABOUT THE FIRST PRODUCT"
            
            They're referring to this product:
            {
  "title": "Unknown Product",
  "price": 0.0,
  "currency": "USD",
  "url": "#",
  "image_url": "https://m.media-amazon.com/images/I/51rpbVmi9XL._AC_UY218_.jpg",
  "rating": 4.4,
  "reviews": 9747,
  "is_sponsored": false,
  "is_prime": true,
  "asin": "B0BS1QCFHX",
  "source": "Amazon",
  "_score": 97.0
}
            
            Please provide a helpful, conversational response addressing their question
            about this product. Include relevant details from the product information.
            
            If the product is a "best deal", emphasize why it's a good value compared to alternatives.
            If they're asking about comparisons to other products, highlight the key differences.
            If they're asking about specific features, focus on those details.
            
2025-05-08 22:11:04,617 - DealFinderAI - INFO - Logging initialized
2025-05-08 22:11:04,617 - DealFinderAI.Main - INFO - Starting DealFinder AI
2025-05-08 22:11:04,617 - DealFinderAI.Main - INFO - Using real scrapers
2025-05-08 22:11:04,663 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-08 22:11:04,663 - DealFinderAI.Controller - INFO - Initialized scraper agents: ['amazon', 'walmart', 'ebay']
2025-05-08 22:11:24,601 - DealFinderAI.Controller - INFO - Processing user query: find me best deal on sony headphones
2025-05-08 22:11:24,602 - DealFinderAI.ChatMemoryAgent - INFO - Analyzing query: 'find me best deal on sony headphones' for conversation 20250508213250
2025-05-08 22:11:24,602 - DealFinderAI.ChatMemoryAgent - INFO - Current product info: False
2025-05-08 22:11:24,602 - DealFinderAI.ChatMemoryAgent - INFO - No product context available for this conversation
2025-05-08 22:11:24,602 - DealFinderAI.Controller - INFO - Analyze response: {'is_follow_up': False, 'focused_product': None, 'referenced_products': [], 'products': []}
2025-05-08 22:11:24,602 - DealFinderAI.Controller - INFO - Is follow-up? False
2025-05-08 22:11:24,602 - DealFinderAI.Controller - INFO - Referenced products: 0
2025-05-08 22:11:24,602 - DealFinderAI.Controller - INFO - Processing as new search query
2025-05-08 22:11:24,602 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: find me best deal on sony headphones
2025-05-08 22:11:25,654 - DealFinderAI.GeminiAgent - WARNING - Failed to parse Gemini response as JSON: ```json
{
  "product_type": "headphones",
  "keywords": ["sony", "headphones"],
  "price_range": null,
  "brands": ["Sony"],
  "features": [],
  "sorting_preference": "price_low_to_high",
  "buy_it_now": true
}
```

2025-05-08 22:11:25,654 - DealFinderAI.Controller - INFO - Parsed search parameters: {'product_type': 'headphones', 'keywords': ['sony', 'headphones'], 'price_range': None, 'brands': ['Sony'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-08 22:11:25,654 - DealFinderAI.AmazonScraperAgent - INFO - Searching Amazon for: {'product_type': 'headphones', 'keywords': ['sony', 'headphones'], 'price_range': None, 'brands': ['Sony'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-08 22:11:28,298 - DealFinderAI.WalmartScraperAgent - INFO - Searching Walmart for: {'product_type': 'headphones', 'keywords': ['sony', 'headphones'], 'price_range': None, 'brands': ['Sony'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-08 22:11:31,574 - DealFinderAI.EbayScraperAgent - INFO - Searching eBay for: {'product_type': 'headphones', 'keywords': ['sony', 'headphones'], 'price_range': None, 'brands': ['Sony'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-08 22:11:34,406 - DealFinderAI.ResultsAggregatorAgent - INFO - Aggregating results for query: find me best deal on sony headphones
2025-05-08 22:11:34,406 - DealFinderAI.ResultsAggregatorAgent - INFO - Found 3 results from various sources
2025-05-08 22:11:34,406 - DealFinderAI.ProductComparisonAgent - INFO - Comparing products for query: find me best deal on sony headphones
2025-05-08 22:11:34,406 - DealFinderAI.ProductComparisonAgent - INFO - Found 10 products to compare
2025-05-08 22:11:34,407 - DealFinderAI.ChatMemoryAgent - INFO - Storing context for conversation 20250508213250
2025-05-08 22:11:34,407 - DealFinderAI.ChatMemoryAgent - INFO - Storing 10 products for conversation 20250508213250
2025-05-08 22:11:34,407 - DealFinderAI.PresentationAgent - INFO - Preparing presentation for 10 products
2025-05-08 22:11:34,407 - DealFinderAI.ChatMemoryAgent - INFO - Storing context for conversation 20250508213250
2025-05-08 22:11:34,408 - DealFinderAI.ChatMemoryAgent - INFO - Storing 10 products for conversation 20250508213250
2025-05-08 22:11:34,408 - DealFinderAI.Controller - INFO - Successfully stored search results in memory
2025-05-08 22:19:21,076 - DealFinderAI - INFO - Logging initialized
2025-05-08 22:19:21,076 - DealFinderAI.Main - INFO - Starting DealFinder AI
2025-05-08 22:19:21,076 - DealFinderAI.Main - INFO - Using real scrapers
2025-05-08 22:19:21,123 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-08 22:19:21,124 - DealFinderAI.Controller - INFO - Initialized scraper agents: ['amazon', 'walmart', 'ebay']
2025-05-08 22:34:38,086 - DealFinderAI - INFO - Logging initialized
2025-05-08 22:34:38,086 - DealFinderAI.Main - INFO - Starting DealFinder AI
2025-05-08 22:34:38,086 - DealFinderAI.Main - INFO - Using real scrapers
2025-05-08 22:34:38,130 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-08 22:34:38,130 - DealFinderAI.Controller - INFO - Initialized scraper agents: ['amazon', 'walmart', 'ebay']
2025-05-08 22:34:38,382 - DealFinderAI - INFO - Logging initialized
2025-05-08 22:34:38,382 - DealFinderAI.Main - INFO - Starting DealFinder AI
2025-05-08 22:34:38,382 - DealFinderAI.Main - INFO - Using real scrapers
2025-05-08 22:34:38,408 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-08 22:34:38,408 - DealFinderAI.Controller - INFO - Initialized scraper agents: ['amazon', 'walmart', 'ebay']
2025-05-08 22:35:09,330 - DealFinderAI.Controller - INFO - Processing user query: find me the best deal on sony headphones
2025-05-08 22:35:09,331 - DealFinderAI.ChatMemoryAgent - INFO - Analyzing query: 'find me the best deal on sony headphones' for conversation 20250508203649
2025-05-08 22:35:09,331 - DealFinderAI.ChatMemoryAgent - INFO - Current product info: False
2025-05-08 22:35:09,331 - DealFinderAI.ChatMemoryAgent - INFO - No product context available for this conversation
2025-05-08 22:35:09,331 - DealFinderAI.Controller - INFO - Analyze response: {'is_follow_up': False, 'focused_product': None, 'referenced_products': [], 'products': []}
2025-05-08 22:35:09,331 - DealFinderAI.Controller - INFO - Is follow-up? False
2025-05-08 22:35:09,331 - DealFinderAI.Controller - INFO - Referenced products: 0
2025-05-08 22:35:09,331 - DealFinderAI.Controller - INFO - Processing as new search query
2025-05-08 22:35:09,332 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: find me the best deal on sony headphones
2025-05-08 22:35:10,486 - DealFinderAI.GeminiAgent - WARNING - Failed to parse Gemini response as JSON: ```json
{
  "product_type": "headphones",
  "keywords": ["sony", "headphones"],
  "price_range": null,
  "brands": ["Sony"],
  "features": [],
  "sorting_preference": "price_low_to_high",
  "buy_it_now": true
}
```

2025-05-08 22:35:10,487 - DealFinderAI.Controller - INFO - Parsed search parameters: {'product_type': 'headphones', 'keywords': ['sony', 'headphones'], 'price_range': None, 'brands': ['Sony'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-08 22:35:10,487 - DealFinderAI.AmazonScraperAgent - INFO - Searching Amazon for: {'product_type': 'headphones', 'keywords': ['sony', 'headphones'], 'price_range': None, 'brands': ['Sony'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-08 22:35:11,898 - DealFinderAI.AmazonScraperAgent - WARNING - Incomplete data for ASIN B011TNK6V4, falling back to Gemini extraction.
2025-05-08 22:35:11,898 - DealFinderAI.AmazonScraperAgent - ERROR - Gemini fallback failed: 'GeminiAgent' object has no attribute 'run'
2025-05-08 22:35:13,180 - DealFinderAI.WalmartScraperAgent - INFO - Searching Walmart for: {'product_type': 'headphones', 'keywords': ['sony', 'headphones'], 'price_range': None, 'brands': ['Sony'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-08 22:35:29,089 - DealFinderAI.EbayScraperAgent - INFO - Searching eBay for: {'product_type': 'headphones', 'keywords': ['sony', 'headphones'], 'price_range': None, 'brands': ['Sony'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-08 22:35:30,830 - DealFinderAI.ResultsAggregatorAgent - INFO - Aggregating results for query: find me the best deal on sony headphones
2025-05-08 22:35:30,830 - DealFinderAI.ResultsAggregatorAgent - INFO - Found 3 results from various sources
2025-05-08 22:35:30,830 - DealFinderAI.ProductComparisonAgent - INFO - Comparing products for query: find me the best deal on sony headphones
2025-05-08 22:35:30,830 - DealFinderAI.ProductComparisonAgent - INFO - Found 10 products to compare
2025-05-08 22:35:30,831 - DealFinderAI.ChatMemoryAgent - INFO - Storing context for conversation 20250508203649
2025-05-08 22:35:30,831 - DealFinderAI.ChatMemoryAgent - INFO - Storing 10 products for conversation 20250508203649
2025-05-08 22:35:30,831 - DealFinderAI.PresentationAgent - INFO - Preparing presentation for 10 products
2025-05-08 22:35:30,831 - DealFinderAI.ChatMemoryAgent - INFO - Storing context for conversation 20250508203649
2025-05-08 22:35:30,831 - DealFinderAI.ChatMemoryAgent - INFO - Storing 10 products for conversation 20250508203649
2025-05-08 22:35:30,831 - DealFinderAI.Controller - INFO - Successfully stored search results in memory
2025-05-08 22:35:54,956 - DealFinderAI.Controller - INFO - Processing user query: tell me more about proudct 1
2025-05-08 22:35:54,957 - DealFinderAI.ChatMemoryAgent - INFO - Analyzing query: 'tell me more about proudct 1' for conversation 20250508203649
2025-05-08 22:35:54,957 - DealFinderAI.ChatMemoryAgent - INFO - Current product info: True
2025-05-08 22:35:54,957 - DealFinderAI.ChatMemoryAgent - INFO - Number of products in memory: 10
2025-05-08 22:35:54,957 - DealFinderAI.ChatMemoryAgent - INFO - Found 10 products in memory
2025-05-08 22:35:54,958 - DealFinderAI.ChatMemoryAgent - INFO - Follow-up analysis: True, Referenced products: 0
2025-05-08 22:35:54,958 - DealFinderAI.Controller - INFO - Analyze response: {'is_follow_up': True, 'focused_product': None, 'referenced_products': [], 'products': [{'title': 'Amazon Product B011TNK6V4', 'price': 0.0, 'currency': 'USD', 'url': 'https://www.amazon.com/dp/B011TNK6V4', 'image_url': 'https://m.media-amazon.com/images/I/715hXtbXdzL._AC_UY218_.jpg', 'rating': 4.5, 'reviews': 4751, 'is_sponsored': False, 'is_prime': False, 'asin': 'B011TNK6V4', 'source': 'Amazon', '_score': 90.0}, {'title': '1Pcs Headphones Pads Cushion Replacement Ear For Sony MDR-7506 MDR-V6 MDR-CD', 'price': 4.57, 'shipping': 0.0, 'total_price': 4.57, 'is_free_shipping': True, 'currency': 'USD', 'url': 'https://www.ebay.com/itm/286178183056?_skw=headphones+sony+headphones+Sony&itmmeta=01JTSEBP89X8KGKCBXMVXG56J4&hash=item42a18c8790%3Ag%3AYJ4AAOSwIjJnQDms&itmprp=enc%3AAQAKAAAA4FkggFvd1GGDu0w3yXCmi1fxF52Z4DUjbmy1JwOceR4r%2Fp0rddUTVwfsrM%2F0VUDoKB8McshNzxLz6dL3UMMeM01YUwlZqDZBvD7J1RhJnYv2suI3tYZ%2FfNzQHVDMPE0YvkUg3ADUZOghhuU81Yd0rdyY3zqXkg7Y7g0y8nNhyyIP79oUxXb%2BFBdSiQOPfbcgYFvMqGZ2U6PLPxtYR1729lu7LdIZfOnLciVmAYT217C9tV8VEcPd1rnUnnwbRVWYiugcForvJqyAjpTxRVUApzVVzww%2Bou%2F0Lm94Dtm4ofKX%7Ctkp%3ABk9SR6jkrq7WZQ&LH_BIN=1', 'image_url': '', 'is_sponsored': False, 'condition': 'Brand New', 'listing_type': 'Buy It Now', 'seller_rating': 97.6, 'item_id': '286178183056', 'source': 'eBay', '_score': 59.543}, {'title': 'Replacement Noise Isolation Silicone Soft Ear Buds Earplug Tips for Senso, TOZO, Sony, Zeus, Otium, Hussar Sport in Ear Headphones Wireless Earphones (Red, Small - 5 Pair)', 'price': 6.95, 'currency': 'USD', 'url': '/ip/Replacement-Noise-Isolation-Silicone-Soft-Ear-Buds-Earplug-Tips-Senso-TOZO-Sony-Zeus-Otium-Hussar-Sport-Ear-Headphones-Wireless-Earphones-Red-Small-5/197701625?classType=REGULAR&from=/search', 'image_url': 'https://i5.walmartimages.com/seo/Replacement-Noise-Isolation-Silicone-Soft-Ear-Buds-Earplug-Tips-Senso-TOZO-Sony-Zeus-Otium-Hussar-Sport-Headphones-Wireless-Earphones-Red-Small-5-Pai_1e87279f-a075-4014-9f9a-3642903c7cdf.e824b1d3c2d74c7a4780aa17205c2518.jpeg?odnHeight=580&odnWidth=580&odnBg=FFFFFF', 'rating': 0.0, 'reviews': 0, 'is_sponsored': False, 'is_pickup_today': False, 'product_id': '6V19OHDDA2X5', 'source': 'Walmart', '_score': 29.305}, {'title': 'Amazon Product B01M6CW9S2', 'price': 19.99, 'currency': 'USD', 'url': 'https://www.amazon.com/dp/B01M6CW9S2', 'image_url': 'https://m.media-amazon.com/images/I/619kwhuB7UL._AC_UY218_.jpg', 'rating': 4.2, 'reviews': 795, 'is_sponsored': False, 'is_prime': False, 'asin': 'B01M6CW9S2', 'source': 'Amazon', '_score': 80.001}, {'title': 'Amazon Product B00AHIAVJ0', 'price': 19.95, 'currency': 'USD', 'url': 'https://www.amazon.com/dp/B00AHIAVJ0', 'image_url': 'https://m.media-amazon.com/images/I/61eCn7tzf-L._AC_UY218_.jpg', 'rating': 4.6, 'reviews': 12, 'is_sponsored': False, 'is_prime': False, 'asin': 'B00AHIAVJ0', 'source': 'Amazon', '_score': 74.005}, {'title': 'Amazon Product B00P9SO6YE', 'price': 19.95, 'currency': 'USD', 'url': 'https://www.amazon.com/dp/B00P9SO6YE', 'image_url': 'https://m.media-amazon.com/images/I/31JEGZhUQWL._AC_UY218_.jpg', 'rating': 4.6, 'reviews': 4, 'is_sponsored': False, 'is_prime': False, 'asin': 'B00P9SO6YE', 'source': 'Amazon', '_score': 74.005}, {'title': 'Amazon Product B009HW15UG', 'price': 8.95, 'currency': 'USD', 'url': 'https://www.amazon.com/dp/B009HW15UG', 'image_url': 'https://m.media-amazon.com/images/I/51LKP8UnrPL._AC_UY218_.jpg', 'rating': 3.4, 'reviews': 111, 'is_sponsored': False, 'is_prime': False, 'asin': 'B009HW15UG', 'source': 'Amazon', '_score': 68.105}, {'title': 'Sony MDREX15LP in-Ear Earbud Headphones, Black', 'price': 6.29, 'shipping': 0.0, 'total_price': 6.29, 'is_free_shipping': True, 'currency': 'USD', 'url': 'https://www.ebay.com/itm/376098584751?_skw=headphones+sony+headphones+Sony&epid=1724872641&itmmeta=01JTSEBP89M4S9A1ZW6EHKA4W3&hash=item579138f8af%3Ag%3ArEwAAeSwx0Fn4wDa&itmprp=enc%3AAQAKAAAA4FkggFvd1GGDu0w3yXCmi1fNxi1zv%2FXymRTo1DF4UISiuE39%2B3op1mH4eGZJy%2B4nlO2l73PDUzVxly8lbBVw9AxsbzEKZZTyKT79EDAqKFigSd%2BmHxdLtEBh6sfXXO2%2FJ7ECv62vrPRNA2lQ94e5IrIVnPXIwsQDhkcBw75xYKw3pPKoEd8ySblpZqdq0eO39Yje4XRczNvGXgqnJSOEp%2FsjIK17OSUKfBABxI9tWO04HC3NGygJQs8zR567TdGY5IG75tL2jeuivZR3ejXRYcukO%2FD7s41tRLOwSysb7xAm%7Ctkp%3ABk9SR6jkrq7WZQ&LH_BIN=1', 'image_url': '', 'is_sponsored': False, 'condition': 'Pre-Owned', 'listing_type': 'Buy It Now', 'seller_rating': 97.1, 'item_id': '376098584751', 'source': 'eBay', '_score': 49.370999999999995}, {'title': 'SONY WH-RF400R Wireless Headphones Transmitter Charging Base ONLY', 'price': 7.2, 'shipping': 0.0, 'total_price': 7.2, 'is_free_shipping': True, 'currency': 'USD', 'url': 'https://www.ebay.com/itm/226685097291?_skw=headphones+sony+headphones+Sony&epid=15064443473&itmmeta=01JTSEBP89CWAF8ATQ1KXYHS7P&hash=item34c77c154b%3Ag%3AAtoAAOSw3hpnFDyZ&itmprp=enc%3AAQAKAAAA4FkggFvd1GGDu0w3yXCmi1f1iDmqDWX%2FnwOWOs83qQxbv%2Fbn55jqknIfX%2FvNQ1ENhsAmM%2BtVh%2FikOhEpPIBX05oeIEziWjfuCrQO%2Fr5vgxG7PHzHAM%2FgZ8fa6AjMkrCUwt4sbMoSg7KVkd%2FxC%2FmE2cP9bsUrk2%2F286dn2jOkDWzafyHsqTl70mH7oXB%2BNgVZ3tLqKxQ9Dg%2Bx%2BgwlFI2r1QmC8U9elmWoHJBJeA2jqifdF4haSK7VqKKh7WMNJm5QCmOhK96j3asUwiZ7zVdfFrCFG3isQNUvLk1L419WUVwA%7Ctkp%3ABk9SR6jkrq7WZQ&LH_BIN=1', 'image_url': '', 'is_sponsored': False, 'condition': 'Pre-Owned', 'listing_type': 'Buy It Now', 'seller_rating': 98.3, 'item_id': '226685097291', 'source': 'eBay', '_score': 49.28}, {'title': 'Sony PSP White And Silver Headphones Earbuds With Volume Control', 'price': 6.99, 'currency': 'USD', 'url': '/ip/Sony-PSP-White-And-Silver-Headphones-Earbuds-With-Volume-Control/457065488?classType=REGULAR&from=/search', 'image_url': 'https://i5.walmartimages.com/seo/Sony-PSP-White-And-Silver-Headphones-Earbuds-With-Volume-Control_e432d291-452e-4645-b762-b5319736b58b.538eb1acc3b3f1b64447dcc003ca33d1.jpeg?odnHeight=580&odnWidth=580&odnBg=FFFFFF', 'rating': 0.0, 'reviews': 0, 'is_sponsored': False, 'is_pickup_today': False, 'product_id': '4V6GHHRSL5CH', 'source': 'Walmart', '_score': 29.301}]}
2025-05-08 22:35:54,959 - DealFinderAI.Controller - INFO - Is follow-up? True
2025-05-08 22:35:54,959 - DealFinderAI.Controller - INFO - Referenced products: 0
2025-05-08 22:35:54,959 - DealFinderAI.Controller - INFO - Processing as new search query
2025-05-08 22:35:54,959 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: tell me more about proudct 1
2025-05-08 22:35:55,701 - DealFinderAI.GeminiAgent - WARNING - Failed to parse Gemini response as JSON: ```json
{
  "product_type": null,
  "keywords": ["product 1"],
  "price_range": null,
  "brands": null,
  "features": null,
  "sorting_preference": null,
  "buy_it_now": null
}
```

2025-05-08 22:35:55,701 - DealFinderAI.Controller - INFO - Parsed search parameters: {'product_type': None, 'keywords': ['product 1'], 'price_range': None, 'brands': None, 'features': None, 'sorting_preference': None, 'buy_it_now': None}
2025-05-08 22:35:55,701 - DealFinderAI.AmazonScraperAgent - INFO - Searching Amazon for: {'product_type': None, 'keywords': ['product 1'], 'price_range': None, 'brands': None, 'features': None, 'sorting_preference': None, 'buy_it_now': None}
2025-05-08 22:35:55,702 - DealFinderAI.AmazonScraperAgent - ERROR - Error scraping Amazon: sequence item 0: expected str instance, NoneType found
2025-05-08 22:35:55,702 - DealFinderAI.Controller - WARNING - Amazon search error: {'error': 'Amazon scraping error: sequence item 0: expected str instance, NoneType found'}
2025-05-08 22:35:55,702 - DealFinderAI.WalmartScraperAgent - INFO - Searching Walmart for: {'product_type': None, 'keywords': ['product 1'], 'price_range': None, 'brands': None, 'features': None, 'sorting_preference': None, 'buy_it_now': None}
2025-05-08 22:35:55,702 - DealFinderAI.WalmartScraperAgent - ERROR - Error scraping Walmart: sequence item 0: expected str instance, NoneType found
2025-05-08 22:35:55,702 - DealFinderAI.Controller - WARNING - Walmart search error: {'error': 'Walmart scraping error: sequence item 0: expected str instance, NoneType found'}
2025-05-08 22:35:55,702 - DealFinderAI.EbayScraperAgent - INFO - Searching eBay for: {'product_type': None, 'keywords': ['product 1'], 'price_range': None, 'brands': None, 'features': None, 'sorting_preference': None, 'buy_it_now': None}
2025-05-08 22:35:55,702 - DealFinderAI.EbayScraperAgent - ERROR - Error scraping eBay: sequence item 0: expected str instance, NoneType found
2025-05-08 22:35:55,702 - DealFinderAI.Controller - WARNING - eBay search error: {'error': 'eBay scraping error: sequence item 0: expected str instance, NoneType found'}
2025-05-08 22:35:55,702 - DealFinderAI.ResultsAggregatorAgent - INFO - Aggregating results for query: tell me more about proudct 1
2025-05-08 22:35:55,702 - DealFinderAI.ResultsAggregatorAgent - INFO - Found 0 results from various sources
2025-05-08 22:36:08,282 - DealFinderAI.Controller - INFO - Processing user query: Amazon Product B011TNK6V4
2025-05-08 22:36:08,283 - DealFinderAI.ChatMemoryAgent - INFO - Analyzing query: 'amazon product b011tnk6v4' for conversation 20250508203649
2025-05-08 22:36:08,284 - DealFinderAI.ChatMemoryAgent - INFO - Current product info: True
2025-05-08 22:36:08,284 - DealFinderAI.ChatMemoryAgent - INFO - Number of products in memory: 10
2025-05-08 22:36:08,284 - DealFinderAI.ChatMemoryAgent - INFO - Found 10 products in memory
2025-05-08 22:36:08,284 - DealFinderAI.ChatMemoryAgent - INFO - Defaulting to first product based on generic reference
2025-05-08 22:36:08,285 - DealFinderAI.ChatMemoryAgent - INFO - Follow-up analysis: True, Referenced products: 1
2025-05-08 22:36:08,285 - DealFinderAI.Controller - INFO - Analyze response: {'is_follow_up': True, 'focused_product': None, 'referenced_products': [{'title': 'Amazon Product B011TNK6V4', 'price': 0.0, 'currency': 'USD', 'url': 'https://www.amazon.com/dp/B011TNK6V4', 'image_url': 'https://m.media-amazon.com/images/I/715hXtbXdzL._AC_UY218_.jpg', 'rating': 4.5, 'reviews': 4751, 'is_sponsored': False, 'is_prime': False, 'asin': 'B011TNK6V4', 'source': 'Amazon', '_score': 90.0}], 'products': [{'title': 'Amazon Product B011TNK6V4', 'price': 0.0, 'currency': 'USD', 'url': 'https://www.amazon.com/dp/B011TNK6V4', 'image_url': 'https://m.media-amazon.com/images/I/715hXtbXdzL._AC_UY218_.jpg', 'rating': 4.5, 'reviews': 4751, 'is_sponsored': False, 'is_prime': False, 'asin': 'B011TNK6V4', 'source': 'Amazon', '_score': 90.0}, {'title': '1Pcs Headphones Pads Cushion Replacement Ear For Sony MDR-7506 MDR-V6 MDR-CD', 'price': 4.57, 'shipping': 0.0, 'total_price': 4.57, 'is_free_shipping': True, 'currency': 'USD', 'url': 'https://www.ebay.com/itm/286178183056?_skw=headphones+sony+headphones+Sony&itmmeta=01JTSEBP89X8KGKCBXMVXG56J4&hash=item42a18c8790%3Ag%3AYJ4AAOSwIjJnQDms&itmprp=enc%3AAQAKAAAA4FkggFvd1GGDu0w3yXCmi1fxF52Z4DUjbmy1JwOceR4r%2Fp0rddUTVwfsrM%2F0VUDoKB8McshNzxLz6dL3UMMeM01YUwlZqDZBvD7J1RhJnYv2suI3tYZ%2FfNzQHVDMPE0YvkUg3ADUZOghhuU81Yd0rdyY3zqXkg7Y7g0y8nNhyyIP79oUxXb%2BFBdSiQOPfbcgYFvMqGZ2U6PLPxtYR1729lu7LdIZfOnLciVmAYT217C9tV8VEcPd1rnUnnwbRVWYiugcForvJqyAjpTxRVUApzVVzww%2Bou%2F0Lm94Dtm4ofKX%7Ctkp%3ABk9SR6jkrq7WZQ&LH_BIN=1', 'image_url': '', 'is_sponsored': False, 'condition': 'Brand New', 'listing_type': 'Buy It Now', 'seller_rating': 97.6, 'item_id': '286178183056', 'source': 'eBay', '_score': 59.543}, {'title': 'Replacement Noise Isolation Silicone Soft Ear Buds Earplug Tips for Senso, TOZO, Sony, Zeus, Otium, Hussar Sport in Ear Headphones Wireless Earphones (Red, Small - 5 Pair)', 'price': 6.95, 'currency': 'USD', 'url': '/ip/Replacement-Noise-Isolation-Silicone-Soft-Ear-Buds-Earplug-Tips-Senso-TOZO-Sony-Zeus-Otium-Hussar-Sport-Ear-Headphones-Wireless-Earphones-Red-Small-5/197701625?classType=REGULAR&from=/search', 'image_url': 'https://i5.walmartimages.com/seo/Replacement-Noise-Isolation-Silicone-Soft-Ear-Buds-Earplug-Tips-Senso-TOZO-Sony-Zeus-Otium-Hussar-Sport-Headphones-Wireless-Earphones-Red-Small-5-Pai_1e87279f-a075-4014-9f9a-3642903c7cdf.e824b1d3c2d74c7a4780aa17205c2518.jpeg?odnHeight=580&odnWidth=580&odnBg=FFFFFF', 'rating': 0.0, 'reviews': 0, 'is_sponsored': False, 'is_pickup_today': False, 'product_id': '6V19OHDDA2X5', 'source': 'Walmart', '_score': 29.305}, {'title': 'Amazon Product B01M6CW9S2', 'price': 19.99, 'currency': 'USD', 'url': 'https://www.amazon.com/dp/B01M6CW9S2', 'image_url': 'https://m.media-amazon.com/images/I/619kwhuB7UL._AC_UY218_.jpg', 'rating': 4.2, 'reviews': 795, 'is_sponsored': False, 'is_prime': False, 'asin': 'B01M6CW9S2', 'source': 'Amazon', '_score': 80.001}, {'title': 'Amazon Product B00AHIAVJ0', 'price': 19.95, 'currency': 'USD', 'url': 'https://www.amazon.com/dp/B00AHIAVJ0', 'image_url': 'https://m.media-amazon.com/images/I/61eCn7tzf-L._AC_UY218_.jpg', 'rating': 4.6, 'reviews': 12, 'is_sponsored': False, 'is_prime': False, 'asin': 'B00AHIAVJ0', 'source': 'Amazon', '_score': 74.005}, {'title': 'Amazon Product B00P9SO6YE', 'price': 19.95, 'currency': 'USD', 'url': 'https://www.amazon.com/dp/B00P9SO6YE', 'image_url': 'https://m.media-amazon.com/images/I/31JEGZhUQWL._AC_UY218_.jpg', 'rating': 4.6, 'reviews': 4, 'is_sponsored': False, 'is_prime': False, 'asin': 'B00P9SO6YE', 'source': 'Amazon', '_score': 74.005}, {'title': 'Amazon Product B009HW15UG', 'price': 8.95, 'currency': 'USD', 'url': 'https://www.amazon.com/dp/B009HW15UG', 'image_url': 'https://m.media-amazon.com/images/I/51LKP8UnrPL._AC_UY218_.jpg', 'rating': 3.4, 'reviews': 111, 'is_sponsored': False, 'is_prime': False, 'asin': 'B009HW15UG', 'source': 'Amazon', '_score': 68.105}, {'title': 'Sony MDREX15LP in-Ear Earbud Headphones, Black', 'price': 6.29, 'shipping': 0.0, 'total_price': 6.29, 'is_free_shipping': True, 'currency': 'USD', 'url': 'https://www.ebay.com/itm/376098584751?_skw=headphones+sony+headphones+Sony&epid=1724872641&itmmeta=01JTSEBP89M4S9A1ZW6EHKA4W3&hash=item579138f8af%3Ag%3ArEwAAeSwx0Fn4wDa&itmprp=enc%3AAQAKAAAA4FkggFvd1GGDu0w3yXCmi1fNxi1zv%2FXymRTo1DF4UISiuE39%2B3op1mH4eGZJy%2B4nlO2l73PDUzVxly8lbBVw9AxsbzEKZZTyKT79EDAqKFigSd%2BmHxdLtEBh6sfXXO2%2FJ7ECv62vrPRNA2lQ94e5IrIVnPXIwsQDhkcBw75xYKw3pPKoEd8ySblpZqdq0eO39Yje4XRczNvGXgqnJSOEp%2FsjIK17OSUKfBABxI9tWO04HC3NGygJQs8zR567TdGY5IG75tL2jeuivZR3ejXRYcukO%2FD7s41tRLOwSysb7xAm%7Ctkp%3ABk9SR6jkrq7WZQ&LH_BIN=1', 'image_url': '', 'is_sponsored': False, 'condition': 'Pre-Owned', 'listing_type': 'Buy It Now', 'seller_rating': 97.1, 'item_id': '376098584751', 'source': 'eBay', '_score': 49.370999999999995}, {'title': 'SONY WH-RF400R Wireless Headphones Transmitter Charging Base ONLY', 'price': 7.2, 'shipping': 0.0, 'total_price': 7.2, 'is_free_shipping': True, 'currency': 'USD', 'url': 'https://www.ebay.com/itm/226685097291?_skw=headphones+sony+headphones+Sony&epid=15064443473&itmmeta=01JTSEBP89CWAF8ATQ1KXYHS7P&hash=item34c77c154b%3Ag%3AAtoAAOSw3hpnFDyZ&itmprp=enc%3AAQAKAAAA4FkggFvd1GGDu0w3yXCmi1f1iDmqDWX%2FnwOWOs83qQxbv%2Fbn55jqknIfX%2FvNQ1ENhsAmM%2BtVh%2FikOhEpPIBX05oeIEziWjfuCrQO%2Fr5vgxG7PHzHAM%2FgZ8fa6AjMkrCUwt4sbMoSg7KVkd%2FxC%2FmE2cP9bsUrk2%2F286dn2jOkDWzafyHsqTl70mH7oXB%2BNgVZ3tLqKxQ9Dg%2Bx%2BgwlFI2r1QmC8U9elmWoHJBJeA2jqifdF4haSK7VqKKh7WMNJm5QCmOhK96j3asUwiZ7zVdfFrCFG3isQNUvLk1L419WUVwA%7Ctkp%3ABk9SR6jkrq7WZQ&LH_BIN=1', 'image_url': '', 'is_sponsored': False, 'condition': 'Pre-Owned', 'listing_type': 'Buy It Now', 'seller_rating': 98.3, 'item_id': '226685097291', 'source': 'eBay', '_score': 49.28}, {'title': 'Sony PSP White And Silver Headphones Earbuds With Volume Control', 'price': 6.99, 'currency': 'USD', 'url': '/ip/Sony-PSP-White-And-Silver-Headphones-Earbuds-With-Volume-Control/457065488?classType=REGULAR&from=/search', 'image_url': 'https://i5.walmartimages.com/seo/Sony-PSP-White-And-Silver-Headphones-Earbuds-With-Volume-Control_e432d291-452e-4645-b762-b5319736b58b.538eb1acc3b3f1b64447dcc003ca33d1.jpeg?odnHeight=580&odnWidth=580&odnBg=FFFFFF', 'rating': 0.0, 'reviews': 0, 'is_sponsored': False, 'is_pickup_today': False, 'product_id': '4V6GHHRSL5CH', 'source': 'Walmart', '_score': 29.301}]}
2025-05-08 22:36:08,286 - DealFinderAI.Controller - INFO - Is follow-up? True
2025-05-08 22:36:08,286 - DealFinderAI.Controller - INFO - Referenced products: 1
2025-05-08 22:36:08,286 - DealFinderAI.Controller - INFO - Handling as follow-up question about 1 products
2025-05-08 22:36:08,286 - DealFinderAI.Controller - INFO - Handling follow-up question: Amazon Product B011TNK6V4
2025-05-08 22:36:08,286 - DealFinderAI.Controller - INFO - Referenced products: 1
2025-05-08 22:36:08,286 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: 
            I'm a shopping assistant helping a customer with product information.
            
            The customer previously searched for products and is now asking a follow-up question: "Amazon Product B011TNK6V4"
            
            They're referring to this product:
            {
  "title": "Amazon Product B011TNK6V4",
  "price": 0.0,
  "currency": "USD",
  "url": "https://www.amazon.com/dp/B011TNK6V4",
  "image_url": "https://m.media-amazon.com/images/I/715hXtbXdzL._AC_UY218_.jpg",
  "rating": 4.5,
  "reviews": 4751,
  "is_sponsored": false,
  "is_prime": false,
  "asin": "B011TNK6V4",
  "source": "Amazon",
  "_score": 90.0
}
            
            Please provide a helpful, conversational response addressing their question
            about this product. Include relevant details from the product information.
            
            If the product is a "best deal", emphasize why it's a good value compared to alternatives.
            If they're asking about comparisons to other products, highlight the key differences.
            If they're asking about specific features, focus on those details.
            
2025-05-08 22:36:48,835 - DealFinderAI.Controller - INFO - Processing user query: what is the name of the product
2025-05-08 22:36:48,837 - DealFinderAI.ChatMemoryAgent - INFO - Analyzing query: 'what is the name of the product' for conversation 20250508203649
2025-05-08 22:36:48,837 - DealFinderAI.ChatMemoryAgent - INFO - Current product info: True
2025-05-08 22:36:48,837 - DealFinderAI.ChatMemoryAgent - INFO - Number of products in memory: 10
2025-05-08 22:36:48,837 - DealFinderAI.ChatMemoryAgent - INFO - Found 10 products in memory
2025-05-08 22:36:48,837 - DealFinderAI.ChatMemoryAgent - INFO - Using focused product: 0
2025-05-08 22:36:48,838 - DealFinderAI.ChatMemoryAgent - INFO - Follow-up analysis: True, Referenced products: 1
2025-05-08 22:36:48,838 - DealFinderAI.Controller - INFO - Analyze response: {'is_follow_up': True, 'focused_product': 0, 'referenced_products': [{'title': 'Amazon Product B011TNK6V4', 'price': 0.0, 'currency': 'USD', 'url': 'https://www.amazon.com/dp/B011TNK6V4', 'image_url': 'https://m.media-amazon.com/images/I/715hXtbXdzL._AC_UY218_.jpg', 'rating': 4.5, 'reviews': 4751, 'is_sponsored': False, 'is_prime': False, 'asin': 'B011TNK6V4', 'source': 'Amazon', '_score': 90.0}], 'products': [{'title': 'Amazon Product B011TNK6V4', 'price': 0.0, 'currency': 'USD', 'url': 'https://www.amazon.com/dp/B011TNK6V4', 'image_url': 'https://m.media-amazon.com/images/I/715hXtbXdzL._AC_UY218_.jpg', 'rating': 4.5, 'reviews': 4751, 'is_sponsored': False, 'is_prime': False, 'asin': 'B011TNK6V4', 'source': 'Amazon', '_score': 90.0}, {'title': '1Pcs Headphones Pads Cushion Replacement Ear For Sony MDR-7506 MDR-V6 MDR-CD', 'price': 4.57, 'shipping': 0.0, 'total_price': 4.57, 'is_free_shipping': True, 'currency': 'USD', 'url': 'https://www.ebay.com/itm/286178183056?_skw=headphones+sony+headphones+Sony&itmmeta=01JTSEBP89X8KGKCBXMVXG56J4&hash=item42a18c8790%3Ag%3AYJ4AAOSwIjJnQDms&itmprp=enc%3AAQAKAAAA4FkggFvd1GGDu0w3yXCmi1fxF52Z4DUjbmy1JwOceR4r%2Fp0rddUTVwfsrM%2F0VUDoKB8McshNzxLz6dL3UMMeM01YUwlZqDZBvD7J1RhJnYv2suI3tYZ%2FfNzQHVDMPE0YvkUg3ADUZOghhuU81Yd0rdyY3zqXkg7Y7g0y8nNhyyIP79oUxXb%2BFBdSiQOPfbcgYFvMqGZ2U6PLPxtYR1729lu7LdIZfOnLciVmAYT217C9tV8VEcPd1rnUnnwbRVWYiugcForvJqyAjpTxRVUApzVVzww%2Bou%2F0Lm94Dtm4ofKX%7Ctkp%3ABk9SR6jkrq7WZQ&LH_BIN=1', 'image_url': '', 'is_sponsored': False, 'condition': 'Brand New', 'listing_type': 'Buy It Now', 'seller_rating': 97.6, 'item_id': '286178183056', 'source': 'eBay', '_score': 59.543}, {'title': 'Replacement Noise Isolation Silicone Soft Ear Buds Earplug Tips for Senso, TOZO, Sony, Zeus, Otium, Hussar Sport in Ear Headphones Wireless Earphones (Red, Small - 5 Pair)', 'price': 6.95, 'currency': 'USD', 'url': '/ip/Replacement-Noise-Isolation-Silicone-Soft-Ear-Buds-Earplug-Tips-Senso-TOZO-Sony-Zeus-Otium-Hussar-Sport-Ear-Headphones-Wireless-Earphones-Red-Small-5/197701625?classType=REGULAR&from=/search', 'image_url': 'https://i5.walmartimages.com/seo/Replacement-Noise-Isolation-Silicone-Soft-Ear-Buds-Earplug-Tips-Senso-TOZO-Sony-Zeus-Otium-Hussar-Sport-Headphones-Wireless-Earphones-Red-Small-5-Pai_1e87279f-a075-4014-9f9a-3642903c7cdf.e824b1d3c2d74c7a4780aa17205c2518.jpeg?odnHeight=580&odnWidth=580&odnBg=FFFFFF', 'rating': 0.0, 'reviews': 0, 'is_sponsored': False, 'is_pickup_today': False, 'product_id': '6V19OHDDA2X5', 'source': 'Walmart', '_score': 29.305}, {'title': 'Amazon Product B01M6CW9S2', 'price': 19.99, 'currency': 'USD', 'url': 'https://www.amazon.com/dp/B01M6CW9S2', 'image_url': 'https://m.media-amazon.com/images/I/619kwhuB7UL._AC_UY218_.jpg', 'rating': 4.2, 'reviews': 795, 'is_sponsored': False, 'is_prime': False, 'asin': 'B01M6CW9S2', 'source': 'Amazon', '_score': 80.001}, {'title': 'Amazon Product B00AHIAVJ0', 'price': 19.95, 'currency': 'USD', 'url': 'https://www.amazon.com/dp/B00AHIAVJ0', 'image_url': 'https://m.media-amazon.com/images/I/61eCn7tzf-L._AC_UY218_.jpg', 'rating': 4.6, 'reviews': 12, 'is_sponsored': False, 'is_prime': False, 'asin': 'B00AHIAVJ0', 'source': 'Amazon', '_score': 74.005}, {'title': 'Amazon Product B00P9SO6YE', 'price': 19.95, 'currency': 'USD', 'url': 'https://www.amazon.com/dp/B00P9SO6YE', 'image_url': 'https://m.media-amazon.com/images/I/31JEGZhUQWL._AC_UY218_.jpg', 'rating': 4.6, 'reviews': 4, 'is_sponsored': False, 'is_prime': False, 'asin': 'B00P9SO6YE', 'source': 'Amazon', '_score': 74.005}, {'title': 'Amazon Product B009HW15UG', 'price': 8.95, 'currency': 'USD', 'url': 'https://www.amazon.com/dp/B009HW15UG', 'image_url': 'https://m.media-amazon.com/images/I/51LKP8UnrPL._AC_UY218_.jpg', 'rating': 3.4, 'reviews': 111, 'is_sponsored': False, 'is_prime': False, 'asin': 'B009HW15UG', 'source': 'Amazon', '_score': 68.105}, {'title': 'Sony MDREX15LP in-Ear Earbud Headphones, Black', 'price': 6.29, 'shipping': 0.0, 'total_price': 6.29, 'is_free_shipping': True, 'currency': 'USD', 'url': 'https://www.ebay.com/itm/376098584751?_skw=headphones+sony+headphones+Sony&epid=1724872641&itmmeta=01JTSEBP89M4S9A1ZW6EHKA4W3&hash=item579138f8af%3Ag%3ArEwAAeSwx0Fn4wDa&itmprp=enc%3AAQAKAAAA4FkggFvd1GGDu0w3yXCmi1fNxi1zv%2FXymRTo1DF4UISiuE39%2B3op1mH4eGZJy%2B4nlO2l73PDUzVxly8lbBVw9AxsbzEKZZTyKT79EDAqKFigSd%2BmHxdLtEBh6sfXXO2%2FJ7ECv62vrPRNA2lQ94e5IrIVnPXIwsQDhkcBw75xYKw3pPKoEd8ySblpZqdq0eO39Yje4XRczNvGXgqnJSOEp%2FsjIK17OSUKfBABxI9tWO04HC3NGygJQs8zR567TdGY5IG75tL2jeuivZR3ejXRYcukO%2FD7s41tRLOwSysb7xAm%7Ctkp%3ABk9SR6jkrq7WZQ&LH_BIN=1', 'image_url': '', 'is_sponsored': False, 'condition': 'Pre-Owned', 'listing_type': 'Buy It Now', 'seller_rating': 97.1, 'item_id': '376098584751', 'source': 'eBay', '_score': 49.370999999999995}, {'title': 'SONY WH-RF400R Wireless Headphones Transmitter Charging Base ONLY', 'price': 7.2, 'shipping': 0.0, 'total_price': 7.2, 'is_free_shipping': True, 'currency': 'USD', 'url': 'https://www.ebay.com/itm/226685097291?_skw=headphones+sony+headphones+Sony&epid=15064443473&itmmeta=01JTSEBP89CWAF8ATQ1KXYHS7P&hash=item34c77c154b%3Ag%3AAtoAAOSw3hpnFDyZ&itmprp=enc%3AAQAKAAAA4FkggFvd1GGDu0w3yXCmi1f1iDmqDWX%2FnwOWOs83qQxbv%2Fbn55jqknIfX%2FvNQ1ENhsAmM%2BtVh%2FikOhEpPIBX05oeIEziWjfuCrQO%2Fr5vgxG7PHzHAM%2FgZ8fa6AjMkrCUwt4sbMoSg7KVkd%2FxC%2FmE2cP9bsUrk2%2F286dn2jOkDWzafyHsqTl70mH7oXB%2BNgVZ3tLqKxQ9Dg%2Bx%2BgwlFI2r1QmC8U9elmWoHJBJeA2jqifdF4haSK7VqKKh7WMNJm5QCmOhK96j3asUwiZ7zVdfFrCFG3isQNUvLk1L419WUVwA%7Ctkp%3ABk9SR6jkrq7WZQ&LH_BIN=1', 'image_url': '', 'is_sponsored': False, 'condition': 'Pre-Owned', 'listing_type': 'Buy It Now', 'seller_rating': 98.3, 'item_id': '226685097291', 'source': 'eBay', '_score': 49.28}, {'title': 'Sony PSP White And Silver Headphones Earbuds With Volume Control', 'price': 6.99, 'currency': 'USD', 'url': '/ip/Sony-PSP-White-And-Silver-Headphones-Earbuds-With-Volume-Control/457065488?classType=REGULAR&from=/search', 'image_url': 'https://i5.walmartimages.com/seo/Sony-PSP-White-And-Silver-Headphones-Earbuds-With-Volume-Control_e432d291-452e-4645-b762-b5319736b58b.538eb1acc3b3f1b64447dcc003ca33d1.jpeg?odnHeight=580&odnWidth=580&odnBg=FFFFFF', 'rating': 0.0, 'reviews': 0, 'is_sponsored': False, 'is_pickup_today': False, 'product_id': '4V6GHHRSL5CH', 'source': 'Walmart', '_score': 29.301}]}
2025-05-08 22:36:48,838 - DealFinderAI.Controller - INFO - Is follow-up? True
2025-05-08 22:36:48,838 - DealFinderAI.Controller - INFO - Referenced products: 1
2025-05-08 22:36:48,838 - DealFinderAI.Controller - INFO - Handling as follow-up question about 1 products
2025-05-08 22:36:48,838 - DealFinderAI.Controller - INFO - Handling follow-up question: what is the name of the product
2025-05-08 22:36:48,838 - DealFinderAI.Controller - INFO - Referenced products: 1
2025-05-08 22:36:48,839 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: 
            I'm a shopping assistant helping a customer with product information.
            
            The customer previously searched for products and is now asking a follow-up question: "what is the name of the product"
            
            They're referring to this product:
            {
  "title": "Amazon Product B011TNK6V4",
  "price": 0.0,
  "currency": "USD",
  "url": "https://www.amazon.com/dp/B011TNK6V4",
  "image_url": "https://m.media-amazon.com/images/I/715hXtbXdzL._AC_UY218_.jpg",
  "rating": 4.5,
  "reviews": 4751,
  "is_sponsored": false,
  "is_prime": false,
  "asin": "B011TNK6V4",
  "source": "Amazon",
  "_score": 90.0
}
            
            Please provide a helpful, conversational response addressing their question
            about this product. Include relevant details from the product information.
            
            If the product is a "best deal", emphasize why it's a good value compared to alternatives.
            If they're asking about comparisons to other products, highlight the key differences.
            If they're asking about specific features, focus on those details.
            
2025-05-08 22:44:39,014 - DealFinderAI - INFO - Logging initialized
2025-05-08 22:44:39,015 - DealFinderAI.Main - INFO - Starting DealFinder AI
2025-05-08 22:44:39,015 - DealFinderAI.Main - INFO - Using real scrapers
2025-05-08 22:44:39,060 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-08 22:44:39,060 - DealFinderAI.Controller - INFO - Initialized scraper agents: ['amazon', 'walmart', 'ebay']
2025-05-08 22:44:40,381 - DealFinderAI - INFO - Logging initialized
2025-05-08 22:44:40,381 - DealFinderAI.Main - INFO - Starting DealFinder AI
2025-05-08 22:44:40,381 - DealFinderAI.Main - INFO - Using real scrapers
2025-05-08 22:44:40,407 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-08 22:44:40,407 - DealFinderAI.Controller - INFO - Initialized scraper agents: ['amazon', 'walmart', 'ebay']
2025-05-08 22:45:00,794 - DealFinderAI.Controller - INFO - Processing user query: find me best deal on sony wireless headphones
2025-05-08 22:45:00,795 - DealFinderAI.ChatMemoryAgent - INFO - Analyzing query: 'find me best deal on sony wireless headphones' for conversation 20250508203649
2025-05-08 22:45:00,795 - DealFinderAI.ChatMemoryAgent - INFO - Current product info: False
2025-05-08 22:45:00,795 - DealFinderAI.ChatMemoryAgent - INFO - No product context available for this conversation
2025-05-08 22:45:00,795 - DealFinderAI.Controller - INFO - Analyze response: {'is_follow_up': False, 'focused_product': None, 'referenced_products': [], 'products': []}
2025-05-08 22:45:00,795 - DealFinderAI.Controller - INFO - Is follow-up? False
2025-05-08 22:45:00,795 - DealFinderAI.Controller - INFO - Referenced products: 0
2025-05-08 22:45:00,795 - DealFinderAI.Controller - INFO - Processing as new search query
2025-05-08 22:45:00,795 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: find me best deal on sony wireless headphones
2025-05-08 22:45:01,801 - DealFinderAI.GeminiAgent - WARNING - Failed to parse Gemini response as JSON: ```json
{
  "product_type": "headphones",
  "keywords": ["wireless", "sony"],
  "price_range": null,
  "brands": ["Sony"],
  "features": ["wireless"],
  "sorting_preference": "price_low_to_high",
  "buy_it_now": true
}
```

2025-05-08 22:45:01,801 - DealFinderAI.Controller - INFO - Parsed search parameters: {'product_type': 'headphones', 'keywords': ['wireless', 'sony'], 'price_range': None, 'brands': ['Sony'], 'features': ['wireless'], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-08 22:45:01,802 - DealFinderAI.AmazonScraperAgent - INFO - Searching Amazon for: {'product_type': 'headphones', 'keywords': ['wireless', 'sony'], 'price_range': None, 'brands': ['Sony'], 'features': ['wireless'], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-08 22:45:03,269 - DealFinderAI.AmazonScraperAgent - WARNING - Incomplete data for ASIN B00GV9VH3S, falling back to Gemini extraction.
2025-05-08 22:45:06,283 - DealFinderAI.AmazonScraperAgent - WARNING - Incomplete data for ASIN B0856SSF5N, falling back to Gemini extraction.
2025-05-08 22:45:10,248 - DealFinderAI.WalmartScraperAgent - INFO - Searching Walmart for: {'product_type': 'headphones', 'keywords': ['wireless', 'sony'], 'price_range': None, 'brands': ['Sony'], 'features': ['wireless'], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-08 22:45:26,141 - DealFinderAI.EbayScraperAgent - INFO - Searching eBay for: {'product_type': 'headphones', 'keywords': ['wireless', 'sony'], 'price_range': None, 'brands': ['Sony'], 'features': ['wireless'], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-08 22:45:28,277 - DealFinderAI.ResultsAggregatorAgent - INFO - Aggregating results for query: find me best deal on sony wireless headphones
2025-05-08 22:45:28,277 - DealFinderAI.ResultsAggregatorAgent - INFO - Found 3 results from various sources
2025-05-08 22:45:28,278 - DealFinderAI.ProductComparisonAgent - INFO - Comparing products for query: find me best deal on sony wireless headphones
2025-05-08 22:45:28,278 - DealFinderAI.ProductComparisonAgent - INFO - Found 10 products to compare
2025-05-08 22:45:28,279 - DealFinderAI.ChatMemoryAgent - INFO - Storing context for conversation 20250508203649
2025-05-08 22:45:28,279 - DealFinderAI.ChatMemoryAgent - INFO - Storing 10 products for conversation 20250508203649
2025-05-08 22:45:28,280 - DealFinderAI.PresentationAgent - INFO - Preparing presentation for 10 products
2025-05-08 22:45:28,280 - DealFinderAI.ChatMemoryAgent - INFO - Storing context for conversation 20250508203649
2025-05-08 22:45:28,280 - DealFinderAI.ChatMemoryAgent - INFO - Storing 10 products for conversation 20250508203649
2025-05-08 22:45:28,280 - DealFinderAI.Controller - INFO - Successfully stored search results in memory
2025-05-08 22:46:43,523 - DealFinderAI.Controller - INFO - Processing user query: i want headphones not charges
2025-05-08 22:46:43,524 - DealFinderAI.ChatMemoryAgent - INFO - Analyzing query: 'i want headphones not charges' for conversation 20250508203649
2025-05-08 22:46:43,524 - DealFinderAI.ChatMemoryAgent - INFO - Current product info: True
2025-05-08 22:46:43,525 - DealFinderAI.ChatMemoryAgent - INFO - Number of products in memory: 10
2025-05-08 22:46:43,525 - DealFinderAI.ChatMemoryAgent - INFO - Found 10 products in memory
2025-05-08 22:46:43,526 - DealFinderAI.ChatMemoryAgent - INFO - Follow-up analysis: True, Referenced products: 0
2025-05-08 22:46:43,527 - DealFinderAI.Controller - INFO - Analyze response: {'is_follow_up': True, 'focused_product': None, 'referenced_products': [], 'products': [{'title': 'Amazon Product B00NJ2M43M', 'price': 10.99, 'currency': 'USD', 'url': 'https://www.amazon.com/dp/B00NJ2M43M', 'image_url': 'https://m.media-amazon.com/images/I/416mZ6bkTyL._AC_UY218_.jpg', 'rating': 4.5, 'reviews': 122446, 'is_sponsored': False, 'is_prime': True, 'asin': 'B00NJ2M43M', 'source': 'Amazon', '_score': 96.901}, {'title': 'SONY Wireless In-Ear Headphones Product Catalog From JAPAN F/S', 'price': 6.0, 'shipping': 0.0, 'total_price': 6.0, 'is_free_shipping': True, 'currency': 'USD', 'url': 'https://www.ebay.com/itm/355268101385?_skw=headphones+wireless+sony+Sony+wireless&itmmeta=01JTSEXX8ZSDH14FKTQ6JS4G5W&hash=item52b7a10509%3Ag%3APPEAAOSwdhVlXKQ5&itmprp=enc%3AAQAKAAAA4FkggFvd1GGDu0w3yXCmi1cV5Fxn665BJsKvKsX%2FjI6VQH6Wc8Itb73YAXdaBY4fWWHrvdphfe84vz6OpBY5Jl7uVCM8piCaN3r834H32eoOhIbOwmzpQ8socp%2Byh9o90TVk%2FCqOI9Oahe7i5qu%2BwQcZz0FzepCvG%2B--4gxL%2BZ1Dw9K%2BBgc266BbpsVKExgfcGnff%2FxAbqhNnz3sQPWVkiLKSWxbpDumGi6BZGHRE5BkTguGemcvvhw6R5%2BeH0LvzvOXAaDailpokOvvqJWqqtIJ9wltyv4OB7hTSrU1Bsxc%7Ctkp%3ABk9SR9jU967WZQ&LH_BIN=1', 'image_url': '', 'is_sponsored': False, 'condition': 'Brand New', 'listing_type': 'Buy It Now', 'seller_rating': 98.4, 'item_id': '355268101385', 'source': 'eBay', '_score': 59.4}, {'title': 'Replacement Noise Isolation Silicone Soft Ear Buds Earplug Tips for Senso, TOZO, Sony, Zeus, Otium, Hussar Sport in Ear Headphones Wireless Earphones (Red, Small - 5 Pair)', 'price': 6.95, 'currency': 'USD', 'url': '/ip/Replacement-Noise-Isolation-Silicone-Soft-Ear-Buds-Earplug-Tips-Senso-TOZO-Sony-Zeus-Otium-Hussar-Sport-Ear-Headphones-Wireless-Earphones-Red-Small-5/197701625?classType=REGULAR&from=/search', 'image_url': 'https://i5.walmartimages.com/seo/Replacement-Noise-Isolation-Silicone-Soft-Ear-Buds-Earplug-Tips-Senso-TOZO-Sony-Zeus-Otium-Hussar-Sport-Headphones-Wireless-Earphones-Red-Small-5-Pai_1e87279f-a075-4014-9f9a-3642903c7cdf.e824b1d3c2d74c7a4780aa17205c2518.jpeg?odnHeight=580&odnWidth=580&odnBg=FFFFFF', 'rating': 0.0, 'reviews': 0, 'is_sponsored': False, 'is_pickup_today': False, 'product_id': '6V19OHDDA2X5', 'source': 'Walmart', '_score': 29.305}, {'title': 'Amazon Product B00NBR7962', 'price': 16.99, 'currency': 'USD', 'url': 'https://www.amazon.com/dp/B00NBR7962', 'image_url': 'https://m.media-amazon.com/images/I/41MYTe-t4HL._AC_UY218_.jpg', 'rating': 4.4, 'reviews': 16372, 'is_sponsored': False, 'is_prime': True, 'asin': 'B00NBR7962', 'source': 'Amazon', '_score': 95.301}, {'title': 'Amazon Product B00GV9VH3S', 'price': 0.0, 'currency': 'USD', 'url': 'https://www.amazon.com/dp/B00GV9VH3S', 'image_url': 'https://m.media-amazon.com/images/I/51FSkvGJfYL._AC_UY218_.jpg', 'rating': 4.0, 'reviews': 1255, 'is_sponsored': False, 'is_prime': False, 'asin': 'B00GV9VH3S', 'source': 'Amazon', '_score': 85.0}, {'title': 'Amazon Product B07TB5Z58C', 'price': 14.99, 'currency': 'USD', 'url': 'https://www.amazon.com/dp/B07TB5Z58C', 'image_url': 'https://m.media-amazon.com/images/I/61SH9WHgRaL._AC_UY218_.jpg', 'rating': 4.4, 'reviews': 8, 'is_sponsored': False, 'is_prime': True, 'asin': 'B07TB5Z58C', 'source': 'Amazon', '_score': 80.501}, {'title': 'Amazon Product B0856SSF5N', 'price': 0.0, 'currency': 'USD', 'url': 'https://www.amazon.com/dp/B0856SSF5N', 'image_url': 'https://m.media-amazon.com/images/I/51vGOck3quL._AC_UY218_.jpg', 'rating': 4.5, 'reviews': 83, 'is_sponsored': False, 'is_prime': False, 'asin': 'B0856SSF5N', 'source': 'Amazon', '_score': 75.0}, {'title': 'SONY WH-RF400R Wireless Headphones Transmitter', 'price': 7.99, 'shipping': 0.0, 'total_price': 7.99, 'is_free_shipping': False, 'currency': 'USD', 'url': 'https://www.ebay.com/itm/166161328516?_skw=headphones+wireless+sony+Sony+wireless&epid=11027829188&itmmeta=01JTSEXX8Z6G0A3FYZBRASJ4JT&hash=item26affca984%3Ag%3Aw4sAAOSwtc1kg5At&itmprp=enc%3AAQAKAAABAFkggFvd1GGDu0w3yXCmi1fSqLAYgK09lyqn2smIOznDMtFTUnZ9fuHQRLgPExsmx5iVYYlx4JysAv9yfEMUn%2FUJ%2FDAIJiSOsfDT9FUVPhcwQy1o66WAO%2FYUX9X7LaW597TtiLqsCUVM7yPd45lNINgE7NTY%2FOBKjN9FSMrLMTLw0xmW%2ByR7pBk3WXRs2AbHKKDKBnKKDqXuP49Y%2FZYR3iN6gIV6wJipP7iKQqQ1YFPdqtRBkcWuIEzz838H5eIwoBSz2gIvYlx7kXNoAVj%2FmOmnAkqf0%2BRJ7ARWHTFTsF3NK1T%2BDpX4%2F9kacXcPhuETNqtxae5FAXn8Qcq%2FjJ2ebms%3D%7Ctkp%3ABk9SR9jU967WZQ&LH_BIN=1', 'image_url': '', 'is_sponsored': False, 'condition': 'New (Other)', 'listing_type': 'Buy It Now', 'seller_rating': 96.6, 'item_id': '166161328516', 'source': 'eBay', '_score': 54.201, 'effective_price': 7.99}, {'title': 'SONY WH-RF400R Wireless Headphones Transmitter Charging Base ONLY', 'price': 7.2, 'shipping': 0.0, 'total_price': 7.2, 'is_free_shipping': True, 'currency': 'USD', 'url': 'https://www.ebay.com/itm/226685097291?_skw=headphones+wireless+sony+Sony+wireless&epid=15064443473&itmmeta=01JTSEXX8Z70N9Q00VXVW0TZW1&hash=item34c77c154b%3Ag%3AAtoAAOSw3hpnFDyZ&itmprp=enc%3AAQAKAAAA4FkggFvd1GGDu0w3yXCmi1f1iDmqDWX%2FnwOWOs83qQxbv%2Fbn55jqknIfX%2FvNQ1ENhowYF40btw%2BHWvcDqHMkYrLFLWyXJdH5zkHEKIwPjDb1v21QgIQ46Uvf0herCn46uw4BsiGr6g2bVzSNlq3WMdER8Y4UBQsJ9Ho7I87SR5ZRA1nsT1yBh6QDrr0Cgrwu4Rr%2FUDU0UO%2B8i1oUPjLegUo2DmPCNW860OE8NV%2BoYhMXX79U60RO%2BjKNQF67jLmhtkKZ5Wqsm0kx47egvLg9DSn8UiO1sJvpDqgFYQ5jKHC%2B%7Ctkp%3ABk9SR9jU967WZQ&LH_BIN=1', 'image_url': '', 'is_sponsored': False, 'condition': 'Pre-Owned', 'listing_type': 'Buy It Now', 'seller_rating': 98.3, 'item_id': '226685097291', 'source': 'eBay', '_score': 49.28, 'effective_price': 7.2}, {'title': 'Sony MDR-EX14AP Wired In-ear Earbud Headphones with Microphone, White', 'price': 7.88, 'currency': 'USD', 'url': '/ip/Sony-MDREX14AP-W6-In-Ear-Earbud-Headphones-with-Mic-White/962793502?classType=VARIANT&from=/search', 'image_url': 'https://i5.walmartimages.com/seo/Sony-MDREX14AP-W6-In-Ear-Earbud-Headphones-with-Mic-White_c8a99049-9d14-4189-b141-a1f9d0fa898c_1.0617d7b256ffbe6c2f4794741ae78cfd.png?odnHeight=580&odnWidth=580&odnBg=FFFFFF', 'rating': 0.0, 'reviews': 0, 'is_sponsored': False, 'is_pickup_today': False, 'product_id': '64184Z9N9F4Y', 'source': 'Walmart', '_score': 29.212}]}
2025-05-08 22:46:43,535 - DealFinderAI.Controller - INFO - Is follow-up? True
2025-05-08 22:46:43,535 - DealFinderAI.Controller - INFO - Referenced products: 0
2025-05-08 22:46:43,535 - DealFinderAI.Controller - INFO - Processing as new search query
2025-05-08 22:46:43,535 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: i want headphones not charges
2025-05-08 22:46:44,305 - DealFinderAI.GeminiAgent - WARNING - Failed to parse Gemini response as JSON: ```json
{
  "product_type": "headphones",
  "keywords": ["headphones"],
  "price_range": null,
  "brands": null,
  "features": [],
  "sorting_preference": null,
  "buy_it_now": null
}
```

2025-05-08 22:46:44,305 - DealFinderAI.Controller - INFO - Parsed search parameters: {'product_type': 'headphones', 'keywords': ['headphones'], 'price_range': None, 'brands': None, 'features': [], 'sorting_preference': None, 'buy_it_now': None}
2025-05-08 22:46:44,306 - DealFinderAI.AmazonScraperAgent - INFO - Searching Amazon for: {'product_type': 'headphones', 'keywords': ['headphones'], 'price_range': None, 'brands': None, 'features': [], 'sorting_preference': None, 'buy_it_now': None}
2025-05-08 22:46:47,193 - DealFinderAI.WalmartScraperAgent - INFO - Searching Walmart for: {'product_type': 'headphones', 'keywords': ['headphones'], 'price_range': None, 'brands': None, 'features': [], 'sorting_preference': None, 'buy_it_now': None}
2025-05-08 22:47:03,947 - DealFinderAI.EbayScraperAgent - INFO - Searching eBay for: {'product_type': 'headphones', 'keywords': ['headphones'], 'price_range': None, 'brands': None, 'features': [], 'sorting_preference': None, 'buy_it_now': None}
2025-05-08 22:47:07,316 - DealFinderAI.ResultsAggregatorAgent - INFO - Aggregating results for query: i want headphones not charges
2025-05-08 22:47:07,316 - DealFinderAI.ResultsAggregatorAgent - INFO - Found 3 results from various sources
2025-05-08 22:47:07,317 - DealFinderAI.ProductComparisonAgent - INFO - Comparing products for query: i want headphones not charges
2025-05-08 22:47:07,317 - DealFinderAI.ProductComparisonAgent - INFO - Found 10 products to compare
2025-05-08 22:47:07,318 - DealFinderAI.ChatMemoryAgent - INFO - Storing context for conversation 20250508203649
2025-05-08 22:47:07,318 - DealFinderAI.ChatMemoryAgent - INFO - Storing 10 products for conversation 20250508203649
2025-05-08 22:47:07,318 - DealFinderAI.PresentationAgent - INFO - Preparing presentation for 10 products
2025-05-08 22:47:07,318 - DealFinderAI.ChatMemoryAgent - INFO - Storing context for conversation 20250508203649
2025-05-08 22:47:07,319 - DealFinderAI.ChatMemoryAgent - INFO - Storing 10 products for conversation 20250508203649
2025-05-08 22:47:07,319 - DealFinderAI.Controller - INFO - Successfully stored search results in memory
2025-05-08 22:47:40,230 - DealFinderAI.Controller - INFO - Processing user query: find me cheapest macbookpro
2025-05-08 22:47:40,232 - DealFinderAI.ChatMemoryAgent - INFO - Analyzing query: 'find me cheapest macbookpro' for conversation 20250508203649
2025-05-08 22:47:40,232 - DealFinderAI.ChatMemoryAgent - INFO - Current product info: True
2025-05-08 22:47:40,232 - DealFinderAI.ChatMemoryAgent - INFO - Number of products in memory: 10
2025-05-08 22:47:40,232 - DealFinderAI.ChatMemoryAgent - INFO - Found 10 products in memory
2025-05-08 22:47:40,232 - DealFinderAI.ChatMemoryAgent - INFO - Follow-up analysis: True, Referenced products: 0
2025-05-08 22:47:40,233 - DealFinderAI.Controller - INFO - Analyze response: {'is_follow_up': True, 'focused_product': None, 'referenced_products': [], 'products': [{'title': 'Amazon Product B0BKPRTRXK', 'price': 19.99, 'currency': 'USD', 'url': 'https://www.amazon.com/dp/B0BKPRTRXK', 'image_url': 'https://m.media-amazon.com/images/I/61qZS7I49GL._AC_UY218_.jpg', 'rating': 4.4, 'reviews': 6072, 'is_sponsored': False, 'is_prime': True, 'asin': 'B0BKPRTRXK', 'source': 'Amazon', '_score': 95.001}, {'title': 'Wireless Bluetooth Headphones with Noise Canceling Over-Ear Stereo Headphones US', 'price': 7.59, 'shipping': 0.5, 'total_price': 8.09, 'is_free_shipping': False, 'currency': 'USD', 'url': 'https://www.ebay.com/itm/286328603290?_skw=headphones+headphones&itmmeta=01JTSF0Y2M0J1VGK1QY53JNEHZ&hash=item42aa83c29a:g:~70AAOSwHQJnr1AI&itmprp=enc%3AAQAKAAAA0FkggFvd1GGDu0w3yXCmi1eGm0r3mCUpLDrSfoweAHHCkNGtUa%2Fi3PVxGhjzguVpUCHFDn1nDne9PqmDUFyeNNtAb6L1mEsxzt0LLQyeHhbx1asa9XVLy%2BF7mtltXUgs2WyQjtI%2Fu1eCAZOW3Dp%2F%2B1TrHSyMNJHkxe8pr8Ni53T4YUCV88MKF%2B1zqC%2FZCmieehMouMOJdV%2FsbTpye8vFGcaBenDTqO88eSeGmUFGIBDrCusYfl1D6DqkGJpZwgg2%2FK%2BQ4GF5tS9jxUcxdkamBxQ%3D%7Ctkp%3ABlBMUPDhg6_WZQ', 'image_url': '', 'is_sponsored': False, 'condition': 'Brand New', 'listing_type': 'Buy It Now', 'seller_rating': 97.6, 'item_id': '286328603290', 'source': 'eBay', '_score': 49.241}, {'title': 'Seenda Kids Bluetooth Headphones for Girls Boys, Wired & Wireless Headphones for Kids with Microphone, 85/94dB Safe Volume, Colorful LED Light, 35Hrs Playtime, Back to School Gifts for Kids', 'price': 19.99, 'currency': 'USD', 'url': 'https://www.walmart.com/ip/Seenda-Kids-Bluetooth-Headphones-Girls-Boys-Wired-Wireless-Headphones-Kids-Microphone-85-94dB-Safe-Volume-Colorful-LED-Light-35Hrs-Playtime-Back-Scho/216676883?classType=VARIANT&adsRedirect=true', 'image_url': 'https://i5.walmartimages.com/seo/Seenda-Kids-Bluetooth-Headphones-Girls-Boys-Wired-Wireless-Headphones-Kids-Microphone-85-94dB-Safe-Volume-Colorful-LED-Light-35Hrs-Playtime-Back-Scho_7e078f41-654f-4c8c-80c6-d04a58602701.0b9a4d9c00a4ad296525acefddcab705.jpeg?odnHeight=580&odnWidth=580&odnBg=FFFFFF', 'rating': 0.0, 'reviews': 0, 'is_sponsored': False, 'is_pickup_today': False, 'product_id': '60YMD4EP9JQE', 'source': 'Walmart', '_score': 28.001}, {'title': 'Amazon Product B07HH1QSLB', 'price': 8.37, 'currency': 'USD', 'url': 'https://www.amazon.com/dp/B07HH1QSLB', 'image_url': 'https://m.media-amazon.com/images/I/51vZrA9+uIL._AC_UY218_.jpg', 'rating': 4.2, 'reviews': 12659, 'is_sponsored': False, 'is_prime': True, 'asin': 'B07HH1QSLB', 'source': 'Amazon', '_score': 94.163}, {'title': 'Amazon Product B07SHBQY7Z', 'price': 19.99, 'currency': 'USD', 'url': 'https://www.amazon.com/dp/B07SHBQY7Z', 'image_url': 'https://m.media-amazon.com/images/I/91zwGjFN5NL._AC_UY218_.jpg', 'rating': 4.2, 'reviews': 55145, 'is_sponsored': False, 'is_prime': True, 'asin': 'B07SHBQY7Z', 'source': 'Amazon', '_score': 93.001}, {'title': 'Amazon Product B0DMP36MVC', 'price': 9.99, 'currency': 'USD', 'url': 'https://www.amazon.com/dp/B0DMP36MVC', 'image_url': 'https://m.media-amazon.com/images/I/61LkSC2WBdL._AC_UY218_.jpg', 'rating': 4.4, 'reviews': 0, 'is_sponsored': False, 'is_prime': True, 'asin': 'B0DMP36MVC', 'source': 'Amazon', '_score': 81.001}, {'title': 'JBL Tune 660NC, Wireless, on-ear, active noise-cancelling headphones.', 'price': 74.96, 'shipping': 0.0, 'total_price': 74.96, 'is_free_shipping': True, 'currency': 'USD', 'url': 'https://www.ebay.com/itm/395561777786?_skw=headphones+headphones&itmmeta=01JTSF0Y2M1TFT0CD5BHAWJXXH&hash=item5c1951ba7a:g:85AAAOSwd8Jmp3Fe&itmprp=enc%3AAQAKAAAA8FkggFvd1GGDu0w3yXCmi1d0SdauFhMtb3kO2IKavuxzrDFEgA%2BhpJUujF%2B8VRI3nVkm168Cl%2FYFcNAca0ZRki2DcE9NMv6gYZs1vW8oAlckJPtoKdQS9FCjX8bK5%2FTjBhcXYT0aKqf4qdnzXny05p42GLeH5c8sOHdgumK%2Fmy9Cj4ku1LWlHOGhuHByiI43ZnSfH8Se6HqE5LySZcaFmPUCPScIiC2FqRT7VSWCFg5eet7nuPVEbCJKLiqO8J4d32xun3EZ9XoGj%2F1U8DPTKbY1gmhtO4u%2FzxttYsJQr7YvZF00oOgbL6jnAp8%2Fj1RAbw%3D%3D%7Ctkp%3ABFBM8OGDr9Zl', 'image_url': '', 'is_sponsored': False, 'condition': 'Certified - Refurbished', 'listing_type': 'Buy It Now', 'seller_rating': 97.9, 'item_id': '395561777786', 'source': 'eBay', '_score': 47.504000000000005}, {'title': 'JBL Tune Flex, True wireless Noise Cancelling earbuds', 'price': 74.96, 'shipping': 0.0, 'total_price': 74.96, 'is_free_shipping': True, 'currency': 'USD', 'url': 'https://www.ebay.com/itm/204911174256?_skw=headphones+headphones&itmmeta=01JTSF0Y2M7K2SP874EDJK8478&hash=item2fb5a86270:g:aCYAAOSwF5tmp84b&itmprp=enc%3AAQAKAAAA8FkggFvd1GGDu0w3yXCmi1f0MbJSN4i4ZGjSDrvykW84rfR2IsMvnwBHgWCqKxLoY%2FOVJPsis1VdSTnR%2BA60YZFb9l3AX1gag8a7%2FqHUGrKfYVf6VU0plLBjN7ljdsNpQ2a5h1DuxFJ1k116rdHpVwDX%2B1j1JAxfMXRYMRrkm8z8c1H4wmkSb7js7%2F3pHGzVOMyoP9Iqy%2Fkgcym6KBkS5U0AqLGh9DALGQFdQkWfDZoRhFL4nQSie%2F4HqAjBZFFzwFLOlN5NvpcD%2BulPs4nCcYtdd2tb7t2pU5IN7pIbgicOsQfmro5QVCDiopYeamTGrQ%3D%3D%7Ctkp%3ABFBM8OGDr9Zl', 'image_url': '', 'is_sponsored': False, 'condition': 'Certified - Refurbished', 'listing_type': 'Buy It Now', 'seller_rating': 97.9, 'item_id': '204911174256', 'source': 'eBay', '_score': 47.504000000000005}, {'title': 'Amazon Product B00U1II968', 'price': 439.95, 'currency': 'USD', 'url': 'https://www.amazon.com/dp/B00U1II968', 'image_url': 'https://m.media-amazon.com/images/I/71GR886DcJL._AC_UY218_.jpg', 'rating': 4.5, 'reviews': 13, 'is_sponsored': False, 'is_prime': False, 'asin': 'B00U1II968', 'source': 'Amazon', '_score': 45.0}, {'title': 'OneOdio Wired over-Ear Headphones with Mic | Noise Cancelling Earcups & Studio DJ Headphones with Dual Ports for Computer-Black', 'price': 31.99, 'currency': 'USD', 'url': 'https://www.walmart.com/ip/OneOdio-Wired-Over-Ear-Headphones-with-Mic-Noise-Cancelling-Earbuds-Studio-DJ-Headphones-with-Dual-Ports-for-Computer-Black/950096760?classType=VARIANT&adsRedirect=true', 'image_url': 'https://i5.walmartimages.com/seo/OneOdio-Wired-Over-Ear-Headphones-with-Mic-Noise-Cancelling-Earbuds-Studio-DJ-Headphones-with-Dual-Ports-for-Computer-Black_b995a0de-a528-4f65-8660-6ed26fe55502.512d338ebf3d87425e2cf2ad12cb8644.jpeg?odnHeight=580&odnWidth=580&odnBg=FFFFFF', 'rating': 0.0, 'reviews': 0, 'is_sponsored': False, 'is_pickup_today': False, 'product_id': '3DQ2GXGKRH5J', 'source': 'Walmart', '_score': 26.801000000000002}]}
2025-05-08 22:47:40,233 - DealFinderAI.Controller - INFO - Is follow-up? True
2025-05-08 22:47:40,234 - DealFinderAI.Controller - INFO - Referenced products: 0
2025-05-08 22:47:40,234 - DealFinderAI.Controller - INFO - Processing as new search query
2025-05-08 22:47:40,234 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: find me cheapest macbookpro
2025-05-08 22:47:41,043 - DealFinderAI.GeminiAgent - WARNING - Failed to parse Gemini response as JSON: ```json
{
  "product_type": "laptop",
  "keywords": ["macbookpro", "macbook pro"],
  "price_range": null,
  "brands": ["apple"],
  "features": [],
  "sorting_preference": "price_low_to_high",
  "buy_it_now": true
}
```

2025-05-08 22:47:41,043 - DealFinderAI.Controller - INFO - Parsed search parameters: {'product_type': 'laptop', 'keywords': ['macbookpro', 'macbook pro'], 'price_range': None, 'brands': ['apple'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-08 22:47:41,043 - DealFinderAI.AmazonScraperAgent - INFO - Searching Amazon for: {'product_type': 'laptop', 'keywords': ['macbookpro', 'macbook pro'], 'price_range': None, 'brands': ['apple'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-08 22:47:43,977 - DealFinderAI.WalmartScraperAgent - INFO - Searching Walmart for: {'product_type': 'laptop', 'keywords': ['macbookpro', 'macbook pro'], 'price_range': None, 'brands': ['apple'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-08 22:48:00,729 - DealFinderAI.EbayScraperAgent - INFO - Searching eBay for: {'product_type': 'laptop', 'keywords': ['macbookpro', 'macbook pro'], 'price_range': None, 'brands': ['apple'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-08 22:48:03,423 - DealFinderAI.ResultsAggregatorAgent - INFO - Aggregating results for query: find me cheapest macbookpro
2025-05-08 22:48:03,424 - DealFinderAI.ResultsAggregatorAgent - INFO - Found 3 results from various sources
2025-05-08 22:48:03,424 - DealFinderAI.ProductComparisonAgent - INFO - Comparing products for query: find me cheapest macbookpro
2025-05-08 22:48:03,424 - DealFinderAI.ProductComparisonAgent - INFO - Found 10 products to compare
2025-05-08 22:48:03,425 - DealFinderAI.ChatMemoryAgent - INFO - Storing context for conversation 20250508203649
2025-05-08 22:48:03,425 - DealFinderAI.ChatMemoryAgent - INFO - Storing 10 products for conversation 20250508203649
2025-05-08 22:48:03,425 - DealFinderAI.PresentationAgent - INFO - Preparing presentation for 10 products
2025-05-08 22:48:03,426 - DealFinderAI.ChatMemoryAgent - INFO - Storing context for conversation 20250508203649
2025-05-08 22:48:03,426 - DealFinderAI.ChatMemoryAgent - INFO - Storing 10 products for conversation 20250508203649
2025-05-08 22:48:03,426 - DealFinderAI.Controller - INFO - Successfully stored search results in memory
2025-05-08 23:03:09,758 - DealFinderAI - INFO - Logging initialized
2025-05-08 23:03:09,758 - DealFinderAI.Main - INFO - Starting DealFinder AI
2025-05-08 23:03:09,758 - DealFinderAI.Main - INFO - Using real scrapers
2025-05-08 23:03:09,803 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-08 23:03:09,803 - DealFinderAI.Controller - INFO - Initialized scraper agents: ['amazon', 'walmart', 'ebay']
2025-05-08 23:03:11,166 - DealFinderAI - INFO - Logging initialized
2025-05-08 23:03:11,166 - DealFinderAI.Main - INFO - Starting DealFinder AI
2025-05-08 23:03:11,166 - DealFinderAI.Main - INFO - Using real scrapers
2025-05-08 23:03:11,193 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-08 23:03:11,193 - DealFinderAI.Controller - INFO - Initialized scraper agents: ['amazon', 'walmart', 'ebay']
2025-05-08 23:03:30,646 - DealFinderAI.Controller - INFO - Processing user query: find best deal on sony headphones
2025-05-08 23:03:30,647 - DealFinderAI.ChatMemoryAgent - INFO - Analyzing query: 'find best deal on sony headphones' for conversation 20250508203649
2025-05-08 23:03:30,647 - DealFinderAI.ChatMemoryAgent - INFO - Current product info: False
2025-05-08 23:03:30,647 - DealFinderAI.ChatMemoryAgent - INFO - No product context available for this conversation
2025-05-08 23:03:30,647 - DealFinderAI.Controller - INFO - Analyze response: {'is_follow_up': False, 'focused_product': None, 'referenced_products': [], 'products': []}
2025-05-08 23:03:30,647 - DealFinderAI.Controller - INFO - Is follow-up? False
2025-05-08 23:03:30,648 - DealFinderAI.Controller - INFO - Referenced products: 0
2025-05-08 23:03:30,648 - DealFinderAI.Controller - INFO - Processing as new search query
2025-05-08 23:03:30,648 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: find best deal on sony headphones
2025-05-08 23:03:31,708 - DealFinderAI.GeminiAgent - WARNING - Failed to parse Gemini response as JSON: ```json
{
  "product_type": "headphones",
  "keywords": ["sony", "headphones"],
  "price_range": null,
  "brands": ["Sony"],
  "features": [],
  "sorting_preference": "price_low_to_high",
  "buy_it_now": true
}
```

2025-05-08 23:03:31,708 - DealFinderAI.Controller - INFO - Parsed search parameters: {'product_type': 'headphones', 'keywords': ['sony', 'headphones'], 'price_range': None, 'brands': ['Sony'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-08 23:03:31,708 - DealFinderAI.AmazonScraperAgent - INFO - Searching Amazon for: {'product_type': 'headphones', 'keywords': ['sony', 'headphones'], 'price_range': None, 'brands': ['Sony'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-08 23:03:33,057 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B0BGVNXHNH at 2.99 USD
2025-05-08 23:03:33,058 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B009HW15UG at 8.95 USD
2025-05-08 23:03:33,061 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B00NJ2M43M at 10.99 USD
2025-05-08 23:03:33,063 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B07TB5Z58C at 14.99 USD
2025-05-08 23:03:33,064 - DealFinderAI.AmazonScraperAgent - WARNING - Incomplete data for ASIN B00GV9VH3S, falling back to Gemini extraction.
2025-05-08 23:03:36,114 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B00GV9VH3S at 0.0 USD
2025-05-08 23:03:37,104 - DealFinderAI.WalmartScraperAgent - INFO - Searching Walmart for: {'product_type': 'headphones', 'keywords': ['sony', 'headphones'], 'price_range': None, 'brands': ['Sony'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-08 23:03:42,392 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-08 23:03:42,392 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Replacement Noise Isolation Silicone Soft Ear Buds Earplug Tips for Senso, TOZO, Sony, Zeus, Otium, Hussar Sport in Ear Headphones Wireless Earphones (Red, Small - 5 Pair) at 6.95 USD
2025-05-08 23:03:42,393 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Replacement Noise Isolation Silicone Soft Ear Buds Earplug Tips for Senso, TOZO, Sony, Zeus, Otium, Hussar Sport in Ear Headphones Wireless Earphones (Red, Small - 5 Pair) at 6.95 USD
2025-05-08 23:03:44,530 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-08 23:03:44,530 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Sony PSP White And Silver Headphones Earbuds With Volume Control at 6.99 USD
2025-05-08 23:03:44,531 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Sony PSP White And Silver Headphones Earbuds With Volume Control at 6.99 USD
2025-05-08 23:03:46,780 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-08 23:03:46,780 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Sony MDR-EX14AP Wired In-ear Earbud Headphones with Microphone, White at 7.88 USD
2025-05-08 23:03:46,780 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Sony MDR-EX14AP Wired In-ear Earbud Headphones with Microphone, White at 7.88 USD
2025-05-08 23:03:48,974 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-08 23:03:48,975 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Sony MDR-EX14AP Wired In-ear Earbud Headphones with Microphone, Black at 7.88 USD
2025-05-08 23:03:48,975 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Sony MDR-EX14AP Wired In-ear Earbud Headphones with Microphone, Black at 7.88 USD
2025-05-08 23:03:51,409 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-08 23:03:51,409 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Premium Sound Headphones Noise Isolation Earphones Earbuds Bass Enhance Stereo with Microphone Remote Control Compatible for Smartphones Tablets - Samsung/iPhone/LG/Sony/HPC-White at 7.89 USD
2025-05-08 23:03:51,409 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Premium Sound Headphones Noise Isolation Earphones Earbuds Bass Enhance Stereo with Microphone Remote Control Compatible for Smartphones Tablets - Samsung/iPhone/LG/Sony/HPC-White at 7.89 USD
2025-05-08 23:03:51,409 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Replacement Noise Isolation Silicone Soft Ear Buds Earplug Tips for Senso, TOZO, Sony, Zeus, Otium, Hussar Sport in Ear Headphones Wireless Earphones (Red, Small - 5 Pair) at 6.95 USD
2025-05-08 23:03:51,410 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Sony PSP White And Silver Headphones Earbuds With Volume Control at 6.99 USD
2025-05-08 23:03:51,410 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Sony MDR-EX14AP Wired In-ear Earbud Headphones with Microphone, White at 7.88 USD
2025-05-08 23:03:51,410 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Sony MDR-EX14AP Wired In-ear Earbud Headphones with Microphone, Black at 7.88 USD
2025-05-08 23:03:51,410 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Premium Sound Headphones Noise Isolation Earphones Earbuds Bass Enhance Stereo with Microphone Remote Control Compatible for Smartphones Tablets - Samsung/iPhone/LG/Sony/HPC-White at 7.89 USD
2025-05-08 23:03:52,395 - DealFinderAI.EbayScraperAgent - INFO - Searching eBay for: {'product_type': 'headphones', 'keywords': ['sony', 'headphones'], 'price_range': None, 'brands': ['Sony'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-08 23:03:53,776 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: 1Pcs Headphones Pads Cushion Replacement Ear For Sony MDR-7506 MDR-V6 MDR-CD at 4.57 USD
2025-05-08 23:03:53,776 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: 1Pcs Headphones Pads Cushion Replacement Ear For Sony MDR-7506 MDR-V6 MDR-CD at 4.57 USD
2025-05-08 23:03:53,777 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Sony MDREX15LP in-Ear Earbud Headphones, Black at 6.29 USD
2025-05-08 23:03:53,777 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Sony MDREX15LP in-Ear Earbud Headphones, Black at 6.29 USD
2025-05-08 23:03:53,778 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: SONY WH-RF400R Wireless Headphones Transmitter Charging Base ONLY at 7.2 USD
2025-05-08 23:03:53,778 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: SONY WH-RF400R Wireless Headphones Transmitter Charging Base ONLY at 7.2 USD
2025-05-08 23:03:54,877 - DealFinderAI.ResultsAggregatorAgent - INFO - Aggregating results for query: find best deal on sony headphones
2025-05-08 23:03:54,877 - DealFinderAI.ResultsAggregatorAgent - INFO - Found 3 results from various sources
2025-05-08 23:03:54,877 - DealFinderAI.ProductComparisonAgent - INFO - Comparing products for query: find best deal on sony headphones
2025-05-08 23:03:54,877 - DealFinderAI.ProductComparisonAgent - INFO - Found 8 products to compare
2025-05-08 23:03:54,877 - DealFinderAI.ChatMemoryAgent - INFO - Storing context for conversation 20250508203649
2025-05-08 23:03:54,877 - DealFinderAI.ChatMemoryAgent - INFO - Storing 8 products for conversation 20250508203649
2025-05-08 23:03:54,877 - DealFinderAI.PresentationAgent - INFO - Preparing presentation for 8 products
2025-05-08 23:03:54,877 - DealFinderAI.ChatMemoryAgent - INFO - Storing context for conversation 20250508203649
2025-05-08 23:03:54,877 - DealFinderAI.ChatMemoryAgent - INFO - Storing 8 products for conversation 20250508203649
2025-05-08 23:03:54,877 - DealFinderAI.Controller - INFO - Successfully stored search results in memory
2025-05-11 14:12:13,038 - DealFinderAI.Controller - INFO - Processing user query: find me best deal on souncore p40i
2025-05-11 14:12:13,042 - DealFinderAI.ChatMemoryAgent - INFO - Analyzing query: 'find me best deal on souncore p40i' for conversation 20250508203649
2025-05-11 14:12:13,042 - DealFinderAI.ChatMemoryAgent - INFO - Current product info: True
2025-05-11 14:12:13,042 - DealFinderAI.ChatMemoryAgent - INFO - Number of products in memory: 8
2025-05-11 14:12:13,043 - DealFinderAI.ChatMemoryAgent - INFO - Found 8 products in memory
2025-05-11 14:12:13,050 - DealFinderAI.ChatMemoryAgent - INFO - Follow-up analysis: True, Referenced products: 1
2025-05-11 14:12:13,054 - DealFinderAI.Controller - INFO - Analyze response: {'is_follow_up': True, 'focused_product': None, 'referenced_products': [{'title': '1Pcs Headphones Pads Cushion Replacement Ear For Sony MDR-7506 MDR-V6 MDR-CD', 'price': 4.57, 'shipping': 0.0, 'total_price': 4.57, 'is_free_shipping': True, 'currency': 'USD', 'url': 'https://www.ebay.com/itm/286178183056?_skw=headphones+sony+headphones+Sony&itmmeta=01JTSFZNPQA0JSP5X0FEE16N6G&hash=item42a18c8790%3Ag%3AYJ4AAOSwIjJnQDms&itmprp=enc%3AAQAKAAABAFkggFvd1GGDu0w3yXCmi1ewYuKjUHKMSyuC8%2FvK8s1Qk8WZ7NEsf0%2B9W7zpszkkI1iqNluR1YgzQ7M302Jz%2FNcU%2B5MFn9e5pdv512GW1JytGkrZwkAMPi6bojE8%2FXjbM67k7FwcZTPuH7pYSsN%2BHXosqzlVOe3sXrbmZHqvKrL1ZzUnxH29506Z8kM4rdNETtoGR55Y9V%2BLEmdEjsFquNLQ7MKyqxv8uHLHGsZiF4WCIVCR2fbfxZLpz5d5s8%2BGig4OYO9bmqxNC5%2BDsxi%2Fz6DNi4sGlVCibugkQi8pqn7MTHA%2FlZ9XU50O%2F1MADOxRQkqdOC9h78mOOpUjgBoGVVQ%3D%7Ctkp%3ABk9SR8Db_q_WZQ&LH_BIN=1', 'image_url': '', 'is_sponsored': False, 'condition': 'Brand New', 'listing_type': 'Buy It Now', 'seller_rating': 97.6, 'item_id': '286178183056', 'source': 'eBay', '_score': 59.543}], 'products': [{'title': '1Pcs Headphones Pads Cushion Replacement Ear For Sony MDR-7506 MDR-V6 MDR-CD', 'price': 4.57, 'shipping': 0.0, 'total_price': 4.57, 'is_free_shipping': True, 'currency': 'USD', 'url': 'https://www.ebay.com/itm/286178183056?_skw=headphones+sony+headphones+Sony&itmmeta=01JTSFZNPQA0JSP5X0FEE16N6G&hash=item42a18c8790%3Ag%3AYJ4AAOSwIjJnQDms&itmprp=enc%3AAQAKAAABAFkggFvd1GGDu0w3yXCmi1ewYuKjUHKMSyuC8%2FvK8s1Qk8WZ7NEsf0%2B9W7zpszkkI1iqNluR1YgzQ7M302Jz%2FNcU%2B5MFn9e5pdv512GW1JytGkrZwkAMPi6bojE8%2FXjbM67k7FwcZTPuH7pYSsN%2BHXosqzlVOe3sXrbmZHqvKrL1ZzUnxH29506Z8kM4rdNETtoGR55Y9V%2BLEmdEjsFquNLQ7MKyqxv8uHLHGsZiF4WCIVCR2fbfxZLpz5d5s8%2BGig4OYO9bmqxNC5%2BDsxi%2Fz6DNi4sGlVCibugkQi8pqn7MTHA%2FlZ9XU50O%2F1MADOxRQkqdOC9h78mOOpUjgBoGVVQ%3D%7Ctkp%3ABk9SR8Db_q_WZQ&LH_BIN=1', 'image_url': '', 'is_sponsored': False, 'condition': 'Brand New', 'listing_type': 'Buy It Now', 'seller_rating': 97.6, 'item_id': '286178183056', 'source': 'eBay', '_score': 59.543}, {'title': 'Replacement Noise Isolation Silicone Soft Ear Buds Earplug Tips for Senso, TOZO, Sony, Zeus, Otium, Hussar Sport in Ear Headphones Wireless Earphones (Red, Small - 5 Pair)', 'price': 6.95, 'currency': 'USD', 'url': '/ip/Replacement-Noise-Isolation-Silicone-Soft-Ear-Buds-Earplug-Tips-Senso-TOZO-Sony-Zeus-Otium-Hussar-Sport-Ear-Headphones-Wireless-Earphones-Red-Small-5/197701625?classType=REGULAR&from=/search', 'image_url': 'https://i5.walmartimages.com/seo/Replacement-Noise-Isolation-Silicone-Soft-Ear-Buds-Earplug-Tips-Senso-TOZO-Sony-Zeus-Otium-Hussar-Sport-Headphones-Wireless-Earphones-Red-Small-5-Pai_1e87279f-a075-4014-9f9a-3642903c7cdf.e824b1d3c2d74c7a4780aa17205c2518.jpeg?odnHeight=580&odnWidth=580&odnBg=FFFFFF', 'rating': 0.0, 'reviews': 0, 'is_sponsored': False, 'is_pickup_today': False, 'product_id': '6V19OHDDA2X5', 'source': 'Walmart', '_score': 29.305}, {'title': 'Sony MDREX15LP in-Ear Earbud Headphones, Black', 'price': 6.29, 'shipping': 0.0, 'total_price': 6.29, 'is_free_shipping': True, 'currency': 'USD', 'url': 'https://www.ebay.com/itm/376098584751?_skw=headphones+sony+headphones+Sony&epid=1724872641&itmmeta=01JTSFZNPQG55BPX2FTYG99YXV&hash=item579138f8af%3Ag%3ArEwAAeSwx0Fn4wDa&itmprp=enc%3AAQAKAAAA4FkggFvd1GGDu0w3yXCmi1fNxi1zv%2FXymRTo1DF4UISiuE39%2B3op1mH4eGZJy%2B4nlB1xHJv2DEAAISdhDai31bC0lYffXJAQHshELBXaljywhxL4ZC%2BPb8KmxGsnYJ1U9D%2FkJ1rueQihgPcx6tUdZCbkQG9Z2PqDZ2Owu5iEUi2JC%2FfCr1hOE7Kk8gjHX%2BCqIEkodcnb4i3xB49Au%2BBF6cjGReKgPnx%2BK7w%2FD5edNfMcjoCtybmxjrsaI7xjOzxXuTr9YL8lsaJysUlCuAgn%2FrpnmB5q5LxmuFQFGuYXLIUa%7Ctkp%3ABk9SR8Db_q_WZQ&LH_BIN=1', 'image_url': '', 'is_sponsored': False, 'condition': 'Pre-Owned', 'listing_type': 'Buy It Now', 'seller_rating': 97.1, 'item_id': '376098584751', 'source': 'eBay', '_score': 49.370999999999995}, {'title': 'SONY WH-RF400R Wireless Headphones Transmitter Charging Base ONLY', 'price': 7.2, 'shipping': 0.0, 'total_price': 7.2, 'is_free_shipping': True, 'currency': 'USD', 'url': 'https://www.ebay.com/itm/226685097291?_skw=headphones+sony+headphones+Sony&epid=15064443473&itmmeta=01JTSFZNPQGBNB249AEMQ63ZR0&hash=item34c77c154b%3Ag%3AAtoAAOSw3hpnFDyZ&itmprp=enc%3AAQAKAAABAFkggFvd1GGDu0w3yXCmi1f32OJroP3LRBlKld3Fu1VjRCQ8pdKBPiP7Wcbfqm7FjjBx1fH6mLNwi6cZvdZ8JYxKWwi71xA1WCrYa0XmU1W37IfhD77BdUX9zY5xQp9M1MFJidPZsz8xtsHs2F1697OLi1Ss7iZTnk%2FUm%2BGGjRqvh6mjpedUHIs1xdlSJ2mXRwh%2F3PtN1Msp9EzlEyl1tCeWU7B8YhIN5VoakEdoPvwYUCBzc2JDMGOzF%2Br9t8%2FUHRmtGbX4Zj%2FX6TMHRNkMk0ieTUbsddPiTkgh1w6aGo%2Bm7haraiWcy6%2FiI0aIF7LuPR6gvQNUBcib%2BHdX%2BaQI1aw%3D%7Ctkp%3ABk9SR8Db_q_WZQ&LH_BIN=1', 'image_url': '', 'is_sponsored': False, 'condition': 'Pre-Owned', 'listing_type': 'Buy It Now', 'seller_rating': 98.3, 'item_id': '226685097291', 'source': 'eBay', '_score': 49.28}, {'title': 'Sony PSP White And Silver Headphones Earbuds With Volume Control', 'price': 6.99, 'currency': 'USD', 'url': '/ip/Sony-PSP-White-And-Silver-Headphones-Earbuds-With-Volume-Control/457065488?classType=REGULAR&from=/search', 'image_url': 'https://i5.walmartimages.com/seo/Sony-PSP-White-And-Silver-Headphones-Earbuds-With-Volume-Control_e432d291-452e-4645-b762-b5319736b58b.538eb1acc3b3f1b64447dcc003ca33d1.jpeg?odnHeight=580&odnWidth=580&odnBg=FFFFFF', 'rating': 0.0, 'reviews': 0, 'is_sponsored': False, 'is_pickup_today': False, 'product_id': '4V6GHHRSL5CH', 'source': 'Walmart', '_score': 29.301}, {'title': 'Sony MDR-EX14AP Wired In-ear Earbud Headphones with Microphone, White', 'price': 7.88, 'currency': 'USD', 'url': '/ip/Sony-MDREX14AP-W6-In-Ear-Earbud-Headphones-with-Mic-White/962793502?classType=VARIANT&from=/search', 'image_url': 'https://i5.walmartimages.com/seo/Sony-MDREX14AP-W6-In-Ear-Earbud-Headphones-with-Mic-White_c8a99049-9d14-4189-b141-a1f9d0fa898c_1.0617d7b256ffbe6c2f4794741ae78cfd.png?odnHeight=580&odnWidth=580&odnBg=FFFFFF', 'rating': 0.0, 'reviews': 0, 'is_sponsored': False, 'is_pickup_today': False, 'product_id': '64184Z9N9F4Y', 'source': 'Walmart', '_score': 29.212, 'effective_price': 7.88}, {'title': 'Sony MDR-EX14AP Wired In-ear Earbud Headphones with Microphone, Black', 'price': 7.88, 'currency': 'USD', 'url': '/ip/Sony-In-Ear-Headphones-Black-MDREX14AP-B6/479338409?classType=VARIANT&athbdg=L1600&from=/search', 'image_url': 'https://i5.walmartimages.com/seo/Sony-In-Ear-Headphones-Black-MDREX14AP-B6_6ccaeb5f-25c9-4861-b081-9fe779ae61fd_1.7ce0f6276276e67934ee100c02732086.png?odnHeight=580&odnWidth=580&odnBg=FFFFFF', 'rating': 0.0, 'reviews': 0, 'is_sponsored': False, 'is_pickup_today': False, 'product_id': '5MOD5EC3ERXW', 'source': 'Walmart', '_score': 29.212, 'effective_price': 7.88}, {'title': 'Premium Sound Headphones Noise Isolation Earphones Earbuds Bass Enhance Stereo with Microphone Remote Control Compatible for Smartphones Tablets - Samsung/iPhone/LG/Sony/HPC-White', 'price': 7.89, 'currency': 'USD', 'url': '/ip/Premium-Sound-Headphones-Noise-Isolation-Earphones-Earbuds-Bass-Enhance-Stereo-Microphone-Remote-Control-Compatible-Smartphones-Tablets-Samsung-iPhon/638381482?classType=REGULAR&from=/search', 'image_url': 'https://i5.walmartimages.com/seo/Premium-Sound-Headphones-Noise-Isolation-Earphones-Earbuds-Bass-Enhance-Stereo-Microphone-Remote-Control-Compatible-Smartphones-Tablets-Samsung-iPhon_498684f3-e339-4d10-a94c-a935f4df922a.8057b997a2c3aa1a346250a5aa6165b5.png?odnHeight=580&odnWidth=580&odnBg=FFFFFF', 'rating': 0.0, 'reviews': 0, 'is_sponsored': False, 'is_pickup_today': False, 'product_id': '0YL57G9SCI2C', 'source': 'Walmart', '_score': 29.211}]}
2025-05-11 14:12:13,055 - DealFinderAI.Controller - INFO - Is follow-up? True
2025-05-11 14:12:13,055 - DealFinderAI.Controller - INFO - Referenced products: 1
2025-05-11 14:12:13,055 - DealFinderAI.Controller - INFO - Handling as follow-up question about 1 products
2025-05-11 14:12:13,056 - DealFinderAI.Controller - INFO - Handling follow-up question: find me best deal on souncore p40i
2025-05-11 14:12:13,056 - DealFinderAI.Controller - INFO - Referenced products: 1
2025-05-11 14:12:13,057 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: 
            I'm a shopping assistant helping a customer with product information.
            
            The customer previously searched for products and is now asking a follow-up question: "find me best deal on souncore p40i"
            
            They're referring to this product:
            {
  "title": "1Pcs Headphones Pads Cushion Replacement Ear For Sony MDR-7506 MDR-V6 MDR-CD",
  "price": 4.57,
  "shipping": 0.0,
  "total_price": 4.57,
  "is_free_shipping": true,
  "currency": "USD",
  "url": "https://www.ebay.com/itm/286178183056?_skw=headphones+sony+headphones+Sony&itmmeta=01JTSFZNPQA0JSP5X0FEE16N6G&hash=item42a18c8790%3Ag%3AYJ4AAOSwIjJnQDms&itmprp=enc%3AAQAKAAABAFkggFvd1GGDu0w3yXCmi1ewYuKjUHKMSyuC8%2FvK8s1Qk8WZ7NEsf0%2B9W7zpszkkI1iqNluR1YgzQ7M302Jz%2FNcU%2B5MFn9e5pdv512GW1JytGkrZwkAMPi6bojE8%2FXjbM67k7FwcZTPuH7pYSsN%2BHXosqzlVOe3sXrbmZHqvKrL1ZzUnxH29506Z8kM4rdNETtoGR55Y9V%2BLEmdEjsFquNLQ7MKyqxv8uHLHGsZiF4WCIVCR2fbfxZLpz5d5s8%2BGig4OYO9bmqxNC5%2BDsxi%2Fz6DNi4sGlVCibugkQi8pqn7MTHA%2FlZ9XU50O%2F1MADOxRQkqdOC9h78mOOpUjgBoGVVQ%3D%7Ctkp%3ABk9SR8Db_q_WZQ&LH_BIN=1",
  "image_url": "",
  "is_sponsored": false,
  "condition": "Brand New",
  "listing_type": "Buy It Now",
  "seller_rating": 97.6,
  "item_id": "286178183056",
  "source": "eBay",
  "_score": 59.543
}
            
            Please provide a helpful, conversational response addressing their question
            about this product. Include relevant details from the product information.
            
            If the product is a "best deal", emphasize why it's a good value compared to alternatives.
            If they're asking about comparisons to other products, highlight the key differences.
            If they're asking about specific features, focus on those details.
            
2025-05-11 14:12:49,591 - DealFinderAI.Controller - INFO - Processing user query: find me best deal on souncore p40i
2025-05-11 14:12:49,593 - DealFinderAI.ChatMemoryAgent - INFO - Analyzing query: 'find me best deal on souncore p40i' for conversation 20250508203649
2025-05-11 14:12:49,593 - DealFinderAI.ChatMemoryAgent - INFO - Current product info: True
2025-05-11 14:12:49,593 - DealFinderAI.ChatMemoryAgent - INFO - Number of products in memory: 8
2025-05-11 14:12:49,593 - DealFinderAI.ChatMemoryAgent - INFO - Found 8 products in memory
2025-05-11 14:12:49,593 - DealFinderAI.ChatMemoryAgent - INFO - Follow-up analysis: True, Referenced products: 1
2025-05-11 14:12:49,594 - DealFinderAI.Controller - INFO - Analyze response: {'is_follow_up': True, 'focused_product': 0, 'referenced_products': [{'title': '1Pcs Headphones Pads Cushion Replacement Ear For Sony MDR-7506 MDR-V6 MDR-CD', 'price': 4.57, 'shipping': 0.0, 'total_price': 4.57, 'is_free_shipping': True, 'currency': 'USD', 'url': 'https://www.ebay.com/itm/286178183056?_skw=headphones+sony+headphones+Sony&itmmeta=01JTSFZNPQA0JSP5X0FEE16N6G&hash=item42a18c8790%3Ag%3AYJ4AAOSwIjJnQDms&itmprp=enc%3AAQAKAAABAFkggFvd1GGDu0w3yXCmi1ewYuKjUHKMSyuC8%2FvK8s1Qk8WZ7NEsf0%2B9W7zpszkkI1iqNluR1YgzQ7M302Jz%2FNcU%2B5MFn9e5pdv512GW1JytGkrZwkAMPi6bojE8%2FXjbM67k7FwcZTPuH7pYSsN%2BHXosqzlVOe3sXrbmZHqvKrL1ZzUnxH29506Z8kM4rdNETtoGR55Y9V%2BLEmdEjsFquNLQ7MKyqxv8uHLHGsZiF4WCIVCR2fbfxZLpz5d5s8%2BGig4OYO9bmqxNC5%2BDsxi%2Fz6DNi4sGlVCibugkQi8pqn7MTHA%2FlZ9XU50O%2F1MADOxRQkqdOC9h78mOOpUjgBoGVVQ%3D%7Ctkp%3ABk9SR8Db_q_WZQ&LH_BIN=1', 'image_url': '', 'is_sponsored': False, 'condition': 'Brand New', 'listing_type': 'Buy It Now', 'seller_rating': 97.6, 'item_id': '286178183056', 'source': 'eBay', '_score': 59.543}], 'products': [{'title': '1Pcs Headphones Pads Cushion Replacement Ear For Sony MDR-7506 MDR-V6 MDR-CD', 'price': 4.57, 'shipping': 0.0, 'total_price': 4.57, 'is_free_shipping': True, 'currency': 'USD', 'url': 'https://www.ebay.com/itm/286178183056?_skw=headphones+sony+headphones+Sony&itmmeta=01JTSFZNPQA0JSP5X0FEE16N6G&hash=item42a18c8790%3Ag%3AYJ4AAOSwIjJnQDms&itmprp=enc%3AAQAKAAABAFkggFvd1GGDu0w3yXCmi1ewYuKjUHKMSyuC8%2FvK8s1Qk8WZ7NEsf0%2B9W7zpszkkI1iqNluR1YgzQ7M302Jz%2FNcU%2B5MFn9e5pdv512GW1JytGkrZwkAMPi6bojE8%2FXjbM67k7FwcZTPuH7pYSsN%2BHXosqzlVOe3sXrbmZHqvKrL1ZzUnxH29506Z8kM4rdNETtoGR55Y9V%2BLEmdEjsFquNLQ7MKyqxv8uHLHGsZiF4WCIVCR2fbfxZLpz5d5s8%2BGig4OYO9bmqxNC5%2BDsxi%2Fz6DNi4sGlVCibugkQi8pqn7MTHA%2FlZ9XU50O%2F1MADOxRQkqdOC9h78mOOpUjgBoGVVQ%3D%7Ctkp%3ABk9SR8Db_q_WZQ&LH_BIN=1', 'image_url': '', 'is_sponsored': False, 'condition': 'Brand New', 'listing_type': 'Buy It Now', 'seller_rating': 97.6, 'item_id': '286178183056', 'source': 'eBay', '_score': 59.543}, {'title': 'Replacement Noise Isolation Silicone Soft Ear Buds Earplug Tips for Senso, TOZO, Sony, Zeus, Otium, Hussar Sport in Ear Headphones Wireless Earphones (Red, Small - 5 Pair)', 'price': 6.95, 'currency': 'USD', 'url': '/ip/Replacement-Noise-Isolation-Silicone-Soft-Ear-Buds-Earplug-Tips-Senso-TOZO-Sony-Zeus-Otium-Hussar-Sport-Ear-Headphones-Wireless-Earphones-Red-Small-5/197701625?classType=REGULAR&from=/search', 'image_url': 'https://i5.walmartimages.com/seo/Replacement-Noise-Isolation-Silicone-Soft-Ear-Buds-Earplug-Tips-Senso-TOZO-Sony-Zeus-Otium-Hussar-Sport-Headphones-Wireless-Earphones-Red-Small-5-Pai_1e87279f-a075-4014-9f9a-3642903c7cdf.e824b1d3c2d74c7a4780aa17205c2518.jpeg?odnHeight=580&odnWidth=580&odnBg=FFFFFF', 'rating': 0.0, 'reviews': 0, 'is_sponsored': False, 'is_pickup_today': False, 'product_id': '6V19OHDDA2X5', 'source': 'Walmart', '_score': 29.305}, {'title': 'Sony MDREX15LP in-Ear Earbud Headphones, Black', 'price': 6.29, 'shipping': 0.0, 'total_price': 6.29, 'is_free_shipping': True, 'currency': 'USD', 'url': 'https://www.ebay.com/itm/376098584751?_skw=headphones+sony+headphones+Sony&epid=1724872641&itmmeta=01JTSFZNPQG55BPX2FTYG99YXV&hash=item579138f8af%3Ag%3ArEwAAeSwx0Fn4wDa&itmprp=enc%3AAQAKAAAA4FkggFvd1GGDu0w3yXCmi1fNxi1zv%2FXymRTo1DF4UISiuE39%2B3op1mH4eGZJy%2B4nlB1xHJv2DEAAISdhDai31bC0lYffXJAQHshELBXaljywhxL4ZC%2BPb8KmxGsnYJ1U9D%2FkJ1rueQihgPcx6tUdZCbkQG9Z2PqDZ2Owu5iEUi2JC%2FfCr1hOE7Kk8gjHX%2BCqIEkodcnb4i3xB49Au%2BBF6cjGReKgPnx%2BK7w%2FD5edNfMcjoCtybmxjrsaI7xjOzxXuTr9YL8lsaJysUlCuAgn%2FrpnmB5q5LxmuFQFGuYXLIUa%7Ctkp%3ABk9SR8Db_q_WZQ&LH_BIN=1', 'image_url': '', 'is_sponsored': False, 'condition': 'Pre-Owned', 'listing_type': 'Buy It Now', 'seller_rating': 97.1, 'item_id': '376098584751', 'source': 'eBay', '_score': 49.370999999999995}, {'title': 'SONY WH-RF400R Wireless Headphones Transmitter Charging Base ONLY', 'price': 7.2, 'shipping': 0.0, 'total_price': 7.2, 'is_free_shipping': True, 'currency': 'USD', 'url': 'https://www.ebay.com/itm/226685097291?_skw=headphones+sony+headphones+Sony&epid=15064443473&itmmeta=01JTSFZNPQGBNB249AEMQ63ZR0&hash=item34c77c154b%3Ag%3AAtoAAOSw3hpnFDyZ&itmprp=enc%3AAQAKAAABAFkggFvd1GGDu0w3yXCmi1f32OJroP3LRBlKld3Fu1VjRCQ8pdKBPiP7Wcbfqm7FjjBx1fH6mLNwi6cZvdZ8JYxKWwi71xA1WCrYa0XmU1W37IfhD77BdUX9zY5xQp9M1MFJidPZsz8xtsHs2F1697OLi1Ss7iZTnk%2FUm%2BGGjRqvh6mjpedUHIs1xdlSJ2mXRwh%2F3PtN1Msp9EzlEyl1tCeWU7B8YhIN5VoakEdoPvwYUCBzc2JDMGOzF%2Br9t8%2FUHRmtGbX4Zj%2FX6TMHRNkMk0ieTUbsddPiTkgh1w6aGo%2Bm7haraiWcy6%2FiI0aIF7LuPR6gvQNUBcib%2BHdX%2BaQI1aw%3D%7Ctkp%3ABk9SR8Db_q_WZQ&LH_BIN=1', 'image_url': '', 'is_sponsored': False, 'condition': 'Pre-Owned', 'listing_type': 'Buy It Now', 'seller_rating': 98.3, 'item_id': '226685097291', 'source': 'eBay', '_score': 49.28}, {'title': 'Sony PSP White And Silver Headphones Earbuds With Volume Control', 'price': 6.99, 'currency': 'USD', 'url': '/ip/Sony-PSP-White-And-Silver-Headphones-Earbuds-With-Volume-Control/457065488?classType=REGULAR&from=/search', 'image_url': 'https://i5.walmartimages.com/seo/Sony-PSP-White-And-Silver-Headphones-Earbuds-With-Volume-Control_e432d291-452e-4645-b762-b5319736b58b.538eb1acc3b3f1b64447dcc003ca33d1.jpeg?odnHeight=580&odnWidth=580&odnBg=FFFFFF', 'rating': 0.0, 'reviews': 0, 'is_sponsored': False, 'is_pickup_today': False, 'product_id': '4V6GHHRSL5CH', 'source': 'Walmart', '_score': 29.301}, {'title': 'Sony MDR-EX14AP Wired In-ear Earbud Headphones with Microphone, White', 'price': 7.88, 'currency': 'USD', 'url': '/ip/Sony-MDREX14AP-W6-In-Ear-Earbud-Headphones-with-Mic-White/962793502?classType=VARIANT&from=/search', 'image_url': 'https://i5.walmartimages.com/seo/Sony-MDREX14AP-W6-In-Ear-Earbud-Headphones-with-Mic-White_c8a99049-9d14-4189-b141-a1f9d0fa898c_1.0617d7b256ffbe6c2f4794741ae78cfd.png?odnHeight=580&odnWidth=580&odnBg=FFFFFF', 'rating': 0.0, 'reviews': 0, 'is_sponsored': False, 'is_pickup_today': False, 'product_id': '64184Z9N9F4Y', 'source': 'Walmart', '_score': 29.212, 'effective_price': 7.88}, {'title': 'Sony MDR-EX14AP Wired In-ear Earbud Headphones with Microphone, Black', 'price': 7.88, 'currency': 'USD', 'url': '/ip/Sony-In-Ear-Headphones-Black-MDREX14AP-B6/479338409?classType=VARIANT&athbdg=L1600&from=/search', 'image_url': 'https://i5.walmartimages.com/seo/Sony-In-Ear-Headphones-Black-MDREX14AP-B6_6ccaeb5f-25c9-4861-b081-9fe779ae61fd_1.7ce0f6276276e67934ee100c02732086.png?odnHeight=580&odnWidth=580&odnBg=FFFFFF', 'rating': 0.0, 'reviews': 0, 'is_sponsored': False, 'is_pickup_today': False, 'product_id': '5MOD5EC3ERXW', 'source': 'Walmart', '_score': 29.212, 'effective_price': 7.88}, {'title': 'Premium Sound Headphones Noise Isolation Earphones Earbuds Bass Enhance Stereo with Microphone Remote Control Compatible for Smartphones Tablets - Samsung/iPhone/LG/Sony/HPC-White', 'price': 7.89, 'currency': 'USD', 'url': '/ip/Premium-Sound-Headphones-Noise-Isolation-Earphones-Earbuds-Bass-Enhance-Stereo-Microphone-Remote-Control-Compatible-Smartphones-Tablets-Samsung-iPhon/638381482?classType=REGULAR&from=/search', 'image_url': 'https://i5.walmartimages.com/seo/Premium-Sound-Headphones-Noise-Isolation-Earphones-Earbuds-Bass-Enhance-Stereo-Microphone-Remote-Control-Compatible-Smartphones-Tablets-Samsung-iPhon_498684f3-e339-4d10-a94c-a935f4df922a.8057b997a2c3aa1a346250a5aa6165b5.png?odnHeight=580&odnWidth=580&odnBg=FFFFFF', 'rating': 0.0, 'reviews': 0, 'is_sponsored': False, 'is_pickup_today': False, 'product_id': '0YL57G9SCI2C', 'source': 'Walmart', '_score': 29.211}]}
2025-05-11 14:12:49,596 - DealFinderAI.Controller - INFO - Is follow-up? True
2025-05-11 14:12:49,596 - DealFinderAI.Controller - INFO - Referenced products: 1
2025-05-11 14:12:49,596 - DealFinderAI.Controller - INFO - Handling as follow-up question about 1 products
2025-05-11 14:12:49,597 - DealFinderAI.Controller - INFO - Handling follow-up question: find me best deal on souncore p40i
2025-05-11 14:12:49,597 - DealFinderAI.Controller - INFO - Referenced products: 1
2025-05-11 14:12:49,597 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: 
            I'm a shopping assistant helping a customer with product information.
            
            The customer previously searched for products and is now asking a follow-up question: "find me best deal on souncore p40i"
            
            They're referring to this product:
            {
  "title": "1Pcs Headphones Pads Cushion Replacement Ear For Sony MDR-7506 MDR-V6 MDR-CD",
  "price": 4.57,
  "shipping": 0.0,
  "total_price": 4.57,
  "is_free_shipping": true,
  "currency": "USD",
  "url": "https://www.ebay.com/itm/286178183056?_skw=headphones+sony+headphones+Sony&itmmeta=01JTSFZNPQA0JSP5X0FEE16N6G&hash=item42a18c8790%3Ag%3AYJ4AAOSwIjJnQDms&itmprp=enc%3AAQAKAAABAFkggFvd1GGDu0w3yXCmi1ewYuKjUHKMSyuC8%2FvK8s1Qk8WZ7NEsf0%2B9W7zpszkkI1iqNluR1YgzQ7M302Jz%2FNcU%2B5MFn9e5pdv512GW1JytGkrZwkAMPi6bojE8%2FXjbM67k7FwcZTPuH7pYSsN%2BHXosqzlVOe3sXrbmZHqvKrL1ZzUnxH29506Z8kM4rdNETtoGR55Y9V%2BLEmdEjsFquNLQ7MKyqxv8uHLHGsZiF4WCIVCR2fbfxZLpz5d5s8%2BGig4OYO9bmqxNC5%2BDsxi%2Fz6DNi4sGlVCibugkQi8pqn7MTHA%2FlZ9XU50O%2F1MADOxRQkqdOC9h78mOOpUjgBoGVVQ%3D%7Ctkp%3ABk9SR8Db_q_WZQ&LH_BIN=1",
  "image_url": "",
  "is_sponsored": false,
  "condition": "Brand New",
  "listing_type": "Buy It Now",
  "seller_rating": 97.6,
  "item_id": "286178183056",
  "source": "eBay",
  "_score": 59.543
}
            
            Please provide a helpful, conversational response addressing their question
            about this product. Include relevant details from the product information.
            
            If the product is a "best deal", emphasize why it's a good value compared to alternatives.
            If they're asking about comparisons to other products, highlight the key differences.
            If they're asking about specific features, focus on those details.
            
2025-05-11 14:13:03,682 - DealFinderAI.Controller - INFO - Processing user query: do new search find me best deal on souncore p40i
2025-05-11 14:13:03,683 - DealFinderAI.ChatMemoryAgent - INFO - Analyzing query: 'do new search find me best deal on souncore p40i' for conversation 20250508203649
2025-05-11 14:13:03,683 - DealFinderAI.ChatMemoryAgent - INFO - Current product info: True
2025-05-11 14:13:03,683 - DealFinderAI.ChatMemoryAgent - INFO - Number of products in memory: 8
2025-05-11 14:13:03,683 - DealFinderAI.ChatMemoryAgent - INFO - Found 8 products in memory
2025-05-11 14:13:03,684 - DealFinderAI.ChatMemoryAgent - INFO - Follow-up analysis: True, Referenced products: 1
2025-05-11 14:13:03,684 - DealFinderAI.Controller - INFO - Analyze response: {'is_follow_up': True, 'focused_product': 0, 'referenced_products': [{'title': '1Pcs Headphones Pads Cushion Replacement Ear For Sony MDR-7506 MDR-V6 MDR-CD', 'price': 4.57, 'shipping': 0.0, 'total_price': 4.57, 'is_free_shipping': True, 'currency': 'USD', 'url': 'https://www.ebay.com/itm/286178183056?_skw=headphones+sony+headphones+Sony&itmmeta=01JTSFZNPQA0JSP5X0FEE16N6G&hash=item42a18c8790%3Ag%3AYJ4AAOSwIjJnQDms&itmprp=enc%3AAQAKAAABAFkggFvd1GGDu0w3yXCmi1ewYuKjUHKMSyuC8%2FvK8s1Qk8WZ7NEsf0%2B9W7zpszkkI1iqNluR1YgzQ7M302Jz%2FNcU%2B5MFn9e5pdv512GW1JytGkrZwkAMPi6bojE8%2FXjbM67k7FwcZTPuH7pYSsN%2BHXosqzlVOe3sXrbmZHqvKrL1ZzUnxH29506Z8kM4rdNETtoGR55Y9V%2BLEmdEjsFquNLQ7MKyqxv8uHLHGsZiF4WCIVCR2fbfxZLpz5d5s8%2BGig4OYO9bmqxNC5%2BDsxi%2Fz6DNi4sGlVCibugkQi8pqn7MTHA%2FlZ9XU50O%2F1MADOxRQkqdOC9h78mOOpUjgBoGVVQ%3D%7Ctkp%3ABk9SR8Db_q_WZQ&LH_BIN=1', 'image_url': '', 'is_sponsored': False, 'condition': 'Brand New', 'listing_type': 'Buy It Now', 'seller_rating': 97.6, 'item_id': '286178183056', 'source': 'eBay', '_score': 59.543}], 'products': [{'title': '1Pcs Headphones Pads Cushion Replacement Ear For Sony MDR-7506 MDR-V6 MDR-CD', 'price': 4.57, 'shipping': 0.0, 'total_price': 4.57, 'is_free_shipping': True, 'currency': 'USD', 'url': 'https://www.ebay.com/itm/286178183056?_skw=headphones+sony+headphones+Sony&itmmeta=01JTSFZNPQA0JSP5X0FEE16N6G&hash=item42a18c8790%3Ag%3AYJ4AAOSwIjJnQDms&itmprp=enc%3AAQAKAAABAFkggFvd1GGDu0w3yXCmi1ewYuKjUHKMSyuC8%2FvK8s1Qk8WZ7NEsf0%2B9W7zpszkkI1iqNluR1YgzQ7M302Jz%2FNcU%2B5MFn9e5pdv512GW1JytGkrZwkAMPi6bojE8%2FXjbM67k7FwcZTPuH7pYSsN%2BHXosqzlVOe3sXrbmZHqvKrL1ZzUnxH29506Z8kM4rdNETtoGR55Y9V%2BLEmdEjsFquNLQ7MKyqxv8uHLHGsZiF4WCIVCR2fbfxZLpz5d5s8%2BGig4OYO9bmqxNC5%2BDsxi%2Fz6DNi4sGlVCibugkQi8pqn7MTHA%2FlZ9XU50O%2F1MADOxRQkqdOC9h78mOOpUjgBoGVVQ%3D%7Ctkp%3ABk9SR8Db_q_WZQ&LH_BIN=1', 'image_url': '', 'is_sponsored': False, 'condition': 'Brand New', 'listing_type': 'Buy It Now', 'seller_rating': 97.6, 'item_id': '286178183056', 'source': 'eBay', '_score': 59.543}, {'title': 'Replacement Noise Isolation Silicone Soft Ear Buds Earplug Tips for Senso, TOZO, Sony, Zeus, Otium, Hussar Sport in Ear Headphones Wireless Earphones (Red, Small - 5 Pair)', 'price': 6.95, 'currency': 'USD', 'url': '/ip/Replacement-Noise-Isolation-Silicone-Soft-Ear-Buds-Earplug-Tips-Senso-TOZO-Sony-Zeus-Otium-Hussar-Sport-Ear-Headphones-Wireless-Earphones-Red-Small-5/197701625?classType=REGULAR&from=/search', 'image_url': 'https://i5.walmartimages.com/seo/Replacement-Noise-Isolation-Silicone-Soft-Ear-Buds-Earplug-Tips-Senso-TOZO-Sony-Zeus-Otium-Hussar-Sport-Headphones-Wireless-Earphones-Red-Small-5-Pai_1e87279f-a075-4014-9f9a-3642903c7cdf.e824b1d3c2d74c7a4780aa17205c2518.jpeg?odnHeight=580&odnWidth=580&odnBg=FFFFFF', 'rating': 0.0, 'reviews': 0, 'is_sponsored': False, 'is_pickup_today': False, 'product_id': '6V19OHDDA2X5', 'source': 'Walmart', '_score': 29.305}, {'title': 'Sony MDREX15LP in-Ear Earbud Headphones, Black', 'price': 6.29, 'shipping': 0.0, 'total_price': 6.29, 'is_free_shipping': True, 'currency': 'USD', 'url': 'https://www.ebay.com/itm/376098584751?_skw=headphones+sony+headphones+Sony&epid=1724872641&itmmeta=01JTSFZNPQG55BPX2FTYG99YXV&hash=item579138f8af%3Ag%3ArEwAAeSwx0Fn4wDa&itmprp=enc%3AAQAKAAAA4FkggFvd1GGDu0w3yXCmi1fNxi1zv%2FXymRTo1DF4UISiuE39%2B3op1mH4eGZJy%2B4nlB1xHJv2DEAAISdhDai31bC0lYffXJAQHshELBXaljywhxL4ZC%2BPb8KmxGsnYJ1U9D%2FkJ1rueQihgPcx6tUdZCbkQG9Z2PqDZ2Owu5iEUi2JC%2FfCr1hOE7Kk8gjHX%2BCqIEkodcnb4i3xB49Au%2BBF6cjGReKgPnx%2BK7w%2FD5edNfMcjoCtybmxjrsaI7xjOzxXuTr9YL8lsaJysUlCuAgn%2FrpnmB5q5LxmuFQFGuYXLIUa%7Ctkp%3ABk9SR8Db_q_WZQ&LH_BIN=1', 'image_url': '', 'is_sponsored': False, 'condition': 'Pre-Owned', 'listing_type': 'Buy It Now', 'seller_rating': 97.1, 'item_id': '376098584751', 'source': 'eBay', '_score': 49.370999999999995}, {'title': 'SONY WH-RF400R Wireless Headphones Transmitter Charging Base ONLY', 'price': 7.2, 'shipping': 0.0, 'total_price': 7.2, 'is_free_shipping': True, 'currency': 'USD', 'url': 'https://www.ebay.com/itm/226685097291?_skw=headphones+sony+headphones+Sony&epid=15064443473&itmmeta=01JTSFZNPQGBNB249AEMQ63ZR0&hash=item34c77c154b%3Ag%3AAtoAAOSw3hpnFDyZ&itmprp=enc%3AAQAKAAABAFkggFvd1GGDu0w3yXCmi1f32OJroP3LRBlKld3Fu1VjRCQ8pdKBPiP7Wcbfqm7FjjBx1fH6mLNwi6cZvdZ8JYxKWwi71xA1WCrYa0XmU1W37IfhD77BdUX9zY5xQp9M1MFJidPZsz8xtsHs2F1697OLi1Ss7iZTnk%2FUm%2BGGjRqvh6mjpedUHIs1xdlSJ2mXRwh%2F3PtN1Msp9EzlEyl1tCeWU7B8YhIN5VoakEdoPvwYUCBzc2JDMGOzF%2Br9t8%2FUHRmtGbX4Zj%2FX6TMHRNkMk0ieTUbsddPiTkgh1w6aGo%2Bm7haraiWcy6%2FiI0aIF7LuPR6gvQNUBcib%2BHdX%2BaQI1aw%3D%7Ctkp%3ABk9SR8Db_q_WZQ&LH_BIN=1', 'image_url': '', 'is_sponsored': False, 'condition': 'Pre-Owned', 'listing_type': 'Buy It Now', 'seller_rating': 98.3, 'item_id': '226685097291', 'source': 'eBay', '_score': 49.28}, {'title': 'Sony PSP White And Silver Headphones Earbuds With Volume Control', 'price': 6.99, 'currency': 'USD', 'url': '/ip/Sony-PSP-White-And-Silver-Headphones-Earbuds-With-Volume-Control/457065488?classType=REGULAR&from=/search', 'image_url': 'https://i5.walmartimages.com/seo/Sony-PSP-White-And-Silver-Headphones-Earbuds-With-Volume-Control_e432d291-452e-4645-b762-b5319736b58b.538eb1acc3b3f1b64447dcc003ca33d1.jpeg?odnHeight=580&odnWidth=580&odnBg=FFFFFF', 'rating': 0.0, 'reviews': 0, 'is_sponsored': False, 'is_pickup_today': False, 'product_id': '4V6GHHRSL5CH', 'source': 'Walmart', '_score': 29.301}, {'title': 'Sony MDR-EX14AP Wired In-ear Earbud Headphones with Microphone, White', 'price': 7.88, 'currency': 'USD', 'url': '/ip/Sony-MDREX14AP-W6-In-Ear-Earbud-Headphones-with-Mic-White/962793502?classType=VARIANT&from=/search', 'image_url': 'https://i5.walmartimages.com/seo/Sony-MDREX14AP-W6-In-Ear-Earbud-Headphones-with-Mic-White_c8a99049-9d14-4189-b141-a1f9d0fa898c_1.0617d7b256ffbe6c2f4794741ae78cfd.png?odnHeight=580&odnWidth=580&odnBg=FFFFFF', 'rating': 0.0, 'reviews': 0, 'is_sponsored': False, 'is_pickup_today': False, 'product_id': '64184Z9N9F4Y', 'source': 'Walmart', '_score': 29.212, 'effective_price': 7.88}, {'title': 'Sony MDR-EX14AP Wired In-ear Earbud Headphones with Microphone, Black', 'price': 7.88, 'currency': 'USD', 'url': '/ip/Sony-In-Ear-Headphones-Black-MDREX14AP-B6/479338409?classType=VARIANT&athbdg=L1600&from=/search', 'image_url': 'https://i5.walmartimages.com/seo/Sony-In-Ear-Headphones-Black-MDREX14AP-B6_6ccaeb5f-25c9-4861-b081-9fe779ae61fd_1.7ce0f6276276e67934ee100c02732086.png?odnHeight=580&odnWidth=580&odnBg=FFFFFF', 'rating': 0.0, 'reviews': 0, 'is_sponsored': False, 'is_pickup_today': False, 'product_id': '5MOD5EC3ERXW', 'source': 'Walmart', '_score': 29.212, 'effective_price': 7.88}, {'title': 'Premium Sound Headphones Noise Isolation Earphones Earbuds Bass Enhance Stereo with Microphone Remote Control Compatible for Smartphones Tablets - Samsung/iPhone/LG/Sony/HPC-White', 'price': 7.89, 'currency': 'USD', 'url': '/ip/Premium-Sound-Headphones-Noise-Isolation-Earphones-Earbuds-Bass-Enhance-Stereo-Microphone-Remote-Control-Compatible-Smartphones-Tablets-Samsung-iPhon/638381482?classType=REGULAR&from=/search', 'image_url': 'https://i5.walmartimages.com/seo/Premium-Sound-Headphones-Noise-Isolation-Earphones-Earbuds-Bass-Enhance-Stereo-Microphone-Remote-Control-Compatible-Smartphones-Tablets-Samsung-iPhon_498684f3-e339-4d10-a94c-a935f4df922a.8057b997a2c3aa1a346250a5aa6165b5.png?odnHeight=580&odnWidth=580&odnBg=FFFFFF', 'rating': 0.0, 'reviews': 0, 'is_sponsored': False, 'is_pickup_today': False, 'product_id': '0YL57G9SCI2C', 'source': 'Walmart', '_score': 29.211}]}
2025-05-11 14:13:03,685 - DealFinderAI.Controller - INFO - Is follow-up? True
2025-05-11 14:13:03,685 - DealFinderAI.Controller - INFO - Referenced products: 1
2025-05-11 14:13:03,685 - DealFinderAI.Controller - INFO - Handling as follow-up question about 1 products
2025-05-11 14:13:03,685 - DealFinderAI.Controller - INFO - Handling follow-up question: do new search find me best deal on souncore p40i
2025-05-11 14:13:03,685 - DealFinderAI.Controller - INFO - Referenced products: 1
2025-05-11 14:13:03,685 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: 
            I'm a shopping assistant helping a customer with product information.
            
            The customer previously searched for products and is now asking a follow-up question: "do new search find me best deal on souncore p40i"
            
            They're referring to this product:
            {
  "title": "1Pcs Headphones Pads Cushion Replacement Ear For Sony MDR-7506 MDR-V6 MDR-CD",
  "price": 4.57,
  "shipping": 0.0,
  "total_price": 4.57,
  "is_free_shipping": true,
  "currency": "USD",
  "url": "https://www.ebay.com/itm/286178183056?_skw=headphones+sony+headphones+Sony&itmmeta=01JTSFZNPQA0JSP5X0FEE16N6G&hash=item42a18c8790%3Ag%3AYJ4AAOSwIjJnQDms&itmprp=enc%3AAQAKAAABAFkggFvd1GGDu0w3yXCmi1ewYuKjUHKMSyuC8%2FvK8s1Qk8WZ7NEsf0%2B9W7zpszkkI1iqNluR1YgzQ7M302Jz%2FNcU%2B5MFn9e5pdv512GW1JytGkrZwkAMPi6bojE8%2FXjbM67k7FwcZTPuH7pYSsN%2BHXosqzlVOe3sXrbmZHqvKrL1ZzUnxH29506Z8kM4rdNETtoGR55Y9V%2BLEmdEjsFquNLQ7MKyqxv8uHLHGsZiF4WCIVCR2fbfxZLpz5d5s8%2BGig4OYO9bmqxNC5%2BDsxi%2Fz6DNi4sGlVCibugkQi8pqn7MTHA%2FlZ9XU50O%2F1MADOxRQkqdOC9h78mOOpUjgBoGVVQ%3D%7Ctkp%3ABk9SR8Db_q_WZQ&LH_BIN=1",
  "image_url": "",
  "is_sponsored": false,
  "condition": "Brand New",
  "listing_type": "Buy It Now",
  "seller_rating": 97.6,
  "item_id": "286178183056",
  "source": "eBay",
  "_score": 59.543
}
            
            Please provide a helpful, conversational response addressing their question
            about this product. Include relevant details from the product information.
            
            If the product is a "best deal", emphasize why it's a good value compared to alternatives.
            If they're asking about comparisons to other products, highlight the key differences.
            If they're asking about specific features, focus on those details.
            
2025-05-12 12:45:43,691 - DealFinderAI - INFO - Logging initialized
2025-05-12 12:45:43,692 - DealFinderAI.Main - INFO - Starting DealFinder AI
2025-05-12 12:45:43,692 - DealFinderAI.Main - INFO - Using real scrapers
2025-05-12 12:45:43,738 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-12 12:45:43,738 - DealFinderAI.Controller - INFO - Initialized scraper agents: ['amazon', 'walmart', 'ebay']
2025-05-12 12:46:15,385 - DealFinderAI - INFO - Logging initialized
2025-05-12 12:46:15,385 - DealFinderAI.Main - INFO - Starting DealFinder AI
2025-05-12 12:46:15,385 - DealFinderAI.Main - INFO - Using real scrapers
2025-05-12 12:46:15,429 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-12 12:46:15,429 - DealFinderAI.Controller - INFO - Initialized scraper agents: ['amazon', 'walmart', 'ebay']
2025-05-12 12:46:15,672 - DealFinderAI - INFO - Logging initialized
2025-05-12 12:46:15,673 - DealFinderAI.Main - INFO - Starting DealFinder AI
2025-05-12 12:46:15,673 - DealFinderAI.Main - INFO - Using real scrapers
2025-05-12 12:46:15,697 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-12 12:46:15,697 - DealFinderAI.Controller - INFO - Initialized scraper agents: ['amazon', 'walmart', 'ebay']
2025-05-12 12:46:41,983 - DealFinderAI.Controller - INFO - Processing user query: find me best deal on apple i phone
2025-05-12 12:46:41,983 - DealFinderAI.ChatMemoryAgent - INFO - Analyzing query: 'find me best deal on apple i phone' for conversation 20250508213250
2025-05-12 12:46:41,983 - DealFinderAI.ChatMemoryAgent - INFO - Current product info: False
2025-05-12 12:46:41,984 - DealFinderAI.ChatMemoryAgent - INFO - No product context available for this conversation
2025-05-12 12:46:41,984 - DealFinderAI.Controller - INFO - Analyze response: {'is_follow_up': False, 'focused_product': None, 'referenced_products': [], 'products': []}
2025-05-12 12:46:41,984 - DealFinderAI.Controller - INFO - Is follow-up? False
2025-05-12 12:46:41,984 - DealFinderAI.Controller - INFO - Referenced products: 0
2025-05-12 12:46:41,984 - DealFinderAI.Controller - INFO - Processing as new search query
2025-05-12 12:46:41,984 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: find me best deal on apple i phone
2025-05-12 12:46:43,088 - DealFinderAI.GeminiAgent - WARNING - Failed to parse Gemini response as JSON: ```json
{
  "product_type": "smartphone",
  "keywords": ["apple", "iphone"],
  "price_range": null,
  "brands": ["Apple"],
  "features": [],
  "sorting_preference": "price_low_to_high",
  "buy_it_now": true
}
```

2025-05-12 12:46:43,089 - DealFinderAI.Controller - INFO - Parsed search parameters: {'product_type': 'smartphone', 'keywords': ['apple', 'iphone'], 'price_range': None, 'brands': ['Apple'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-12 12:46:43,089 - DealFinderAI.AmazonScraperAgent - INFO - Searching Amazon for: {'product_type': 'smartphone', 'keywords': ['apple', 'iphone'], 'price_range': None, 'brands': ['Apple'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-12 12:46:44,312 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B0CYH98RCK at 0.01 USD
2025-05-12 12:46:44,313 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B0CQS4Z8H1 at 5.79 USD
2025-05-12 12:46:44,315 - DealFinderAI.AmazonScraperAgent - WARNING - Incomplete data for ASIN 0789738236, falling back to Gemini extraction.
2025-05-12 12:46:47,196 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product 0789738236 at 0.0 USD
2025-05-12 12:46:47,206 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B079H39ZHT at 6.99 USD
2025-05-12 12:46:47,211 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B08TZY5JCV at 7.99 USD
2025-05-12 12:46:48,217 - DealFinderAI.WalmartScraperAgent - INFO - Searching Walmart for: {'product_type': 'smartphone', 'keywords': ['apple', 'iphone'], 'price_range': None, 'brands': ['Apple'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-12 12:46:53,062 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-12 12:46:53,063 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Pre-Owned Apple iPhone 8 64GB Fully Unlocked Smartphone at 89.89 USD
2025-05-12 12:46:53,063 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Pre-Owned Apple iPhone 8 64GB Fully Unlocked Smartphone at 89.89 USD
2025-05-12 12:46:55,429 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-12 12:46:55,430 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Restored Apple iPhone X - Fully Unlocked - 64 GB Space Gray (Refurbished) at 112.47 USD
2025-05-12 12:46:55,430 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Restored Apple iPhone X - Fully Unlocked - 64 GB Space Gray (Refurbished) at 112.47 USD
2025-05-12 12:46:58,030 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-12 12:46:58,030 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Straight Talk Apple iPhone SE (2020), 64GB, White - Prepaid Smartphone Grade A [Locked to Straight Talk] at 118.53 USD
2025-05-12 12:46:58,031 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Straight Talk Apple iPhone SE (2020), 64GB, White - Prepaid Smartphone Grade A [Locked to Straight Talk] at 118.53 USD
2025-05-12 12:47:00,411 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-12 12:47:00,411 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Pre-Owned Apple iPhone XR 64GB Factory Unlocked Smartphone 4G LTE iOS Smartphone ( Good) at 139.0 USD
2025-05-12 12:47:00,412 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Pre-Owned Apple iPhone XR 64GB Factory Unlocked Smartphone 4G LTE iOS Smartphone ( Good) at 139.0 USD
2025-05-12 12:47:02,741 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-12 12:47:02,742 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Pre-Owned Apple iPhone XR 64GB Factory Unlocked Smartphone 4G LTE iOS (Good) at 142.0 USD
2025-05-12 12:47:02,742 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Pre-Owned Apple iPhone XR 64GB Factory Unlocked Smartphone 4G LTE iOS (Good) at 142.0 USD
2025-05-12 12:47:02,742 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Pre-Owned Apple iPhone 8 64GB Fully Unlocked Smartphone at 89.89 USD
2025-05-12 12:47:02,742 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Restored Apple iPhone X - Fully Unlocked - 64 GB Space Gray (Refurbished) at 112.47 USD
2025-05-12 12:47:02,742 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Straight Talk Apple iPhone SE (2020), 64GB, White - Prepaid Smartphone Grade A [Locked to Straight Talk] at 118.53 USD
2025-05-12 12:47:02,742 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Pre-Owned Apple iPhone XR 64GB Factory Unlocked Smartphone 4G LTE iOS Smartphone ( Good) at 139.0 USD
2025-05-12 12:47:02,742 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Pre-Owned Apple iPhone XR 64GB Factory Unlocked Smartphone 4G LTE iOS (Good) at 142.0 USD
2025-05-12 12:47:03,961 - DealFinderAI.EbayScraperAgent - INFO - Searching eBay for: {'product_type': 'smartphone', 'keywords': ['apple', 'iphone'], 'price_range': None, 'brands': ['Apple'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-12 12:47:05,655 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: New Apple iPhone 13 MINI A2481 128/256GB Factory Unlocked All Carrier &Color LOT at 2.49 USD
2025-05-12 12:47:05,655 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: New Apple iPhone 13 MINI A2481 128/256GB Factory Unlocked All Carrier &Color LOT at 2.49 USD
2025-05-12 12:47:05,656 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Clear Case for Apple iPhone 11 Smartphones - Clear at 6.0 USD
2025-05-12 12:47:05,656 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Clear Case for Apple iPhone 11 Smartphones - Clear at 6.0 USD
2025-05-12 12:47:05,657 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: For Apple iPhone 16 15 14 13 12 11 Pro Max Plus Tempered Glass Screen Protector at 7.88 USD
2025-05-12 12:47:05,657 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: For Apple iPhone 16 15 14 13 12 11 Pro Max Plus Tempered Glass Screen Protector at 7.88 USD
2025-05-12 12:47:06,786 - DealFinderAI.ResultsAggregatorAgent - INFO - Aggregating results for query: find me best deal on apple i phone
2025-05-12 12:47:06,787 - DealFinderAI.ResultsAggregatorAgent - INFO - Found 3 results from various sources
2025-05-12 12:47:06,787 - DealFinderAI.ProductComparisonAgent - INFO - Comparing products for query: find me best deal on apple i phone
2025-05-12 12:47:06,788 - DealFinderAI.ProductComparisonAgent - INFO - Found 8 products to compare
2025-05-12 12:47:06,788 - DealFinderAI.ChatMemoryAgent - INFO - Storing context for conversation 20250508213250
2025-05-12 12:47:06,789 - DealFinderAI.ChatMemoryAgent - INFO - Storing 8 products for conversation 20250508213250
2025-05-12 12:47:06,789 - DealFinderAI.PresentationAgent - INFO - Preparing presentation for 8 products
2025-05-12 12:47:06,789 - DealFinderAI.ChatMemoryAgent - INFO - Storing context for conversation 20250508213250
2025-05-12 12:47:06,789 - DealFinderAI.ChatMemoryAgent - INFO - Storing 8 products for conversation 20250508213250
2025-05-12 12:47:06,789 - DealFinderAI.Controller - INFO - Successfully stored search results in memory
2025-05-12 12:48:21,564 - DealFinderAI.Controller - INFO - Processing user query: find me best deal on iphone between 500-1000 dollar
2025-05-12 12:48:21,566 - DealFinderAI.ChatMemoryAgent - INFO - Analyzing query: 'find me best deal on iphone between 500-1000 dollar' for conversation 20250508213250
2025-05-12 12:48:21,566 - DealFinderAI.ChatMemoryAgent - INFO - Current product info: True
2025-05-12 12:48:21,566 - DealFinderAI.ChatMemoryAgent - INFO - Number of products in memory: 8
2025-05-12 12:48:21,566 - DealFinderAI.ChatMemoryAgent - INFO - Found 8 products in memory
2025-05-12 12:48:21,567 - DealFinderAI.ChatMemoryAgent - INFO - Follow-up analysis: True, Referenced products: 1
2025-05-12 12:48:21,568 - DealFinderAI.Controller - INFO - Analyze response: {'is_follow_up': True, 'focused_product': None, 'referenced_products': [{'title': 'New Apple iPhone 13 MINI A2481 128/256GB Factory Unlocked All Carrier &Color LOT', 'price': 2.49, 'shipping': 0.0, 'total_price': 2.49, 'is_free_shipping': True, 'currency': 'USD', 'url': 'https://www.ebay.com/itm/365440659055?_skw=smartphone+apple+iphone+Apple&itmmeta=01JV2P94WD6VPY3PVG11JP7QV1&hash=item5515f5ee6f%3Ag%3AJyYAAOSwqqRnyBKC&itmprp=enc%3AAQAKAAABAFkggFvd1GGDu0w3yXCmi1ecAZY3bNJdvGDoN0fT3XKA9K%2BpPCUtLzguC9m0hzTtX1cdBKSwfXGuTFcT%2FzoqSW%2FUnePrlEOcOgH%2B5rK2bKvaMSMmT5mVZpW9EnY1GY0f%2FByMOHPId%2BNNHA0MUqIjIBdOJIDoDWk4T9bfpi0AZmURSLCn2uNebY%2FEyMDE9zaHKaaX1rfMKTpgKphT%2Fqub9a7fVVsikpHYBtKG98ilQGqYE8hsXePbX5urppQrzA%2Fz9vat6x%2Bm8lEgPHD%2Bi5G82wMlWFOHbZv7D6ILhiI2%2BN3CiYt69PM6v%2BboH%2BoWOgVXzAg2qxbvlGdQhOpO5bpyndc%3D%7Ctkp%3ABk9SR67OpNbYZQ&LH_BIN=1', 'image_url': '', 'is_sponsored': False, 'condition': 'Brand New', 'listing_type': 'Buy It Now', 'seller_rating': 99.6, 'item_id': '365440659055', 'source': 'eBay', '_score': 59.751000000000005}], 'products': [{'title': 'New Apple iPhone 13 MINI A2481 128/256GB Factory Unlocked All Carrier &Color LOT', 'price': 2.49, 'shipping': 0.0, 'total_price': 2.49, 'is_free_shipping': True, 'currency': 'USD', 'url': 'https://www.ebay.com/itm/365440659055?_skw=smartphone+apple+iphone+Apple&itmmeta=01JV2P94WD6VPY3PVG11JP7QV1&hash=item5515f5ee6f%3Ag%3AJyYAAOSwqqRnyBKC&itmprp=enc%3AAQAKAAABAFkggFvd1GGDu0w3yXCmi1ecAZY3bNJdvGDoN0fT3XKA9K%2BpPCUtLzguC9m0hzTtX1cdBKSwfXGuTFcT%2FzoqSW%2FUnePrlEOcOgH%2B5rK2bKvaMSMmT5mVZpW9EnY1GY0f%2FByMOHPId%2BNNHA0MUqIjIBdOJIDoDWk4T9bfpi0AZmURSLCn2uNebY%2FEyMDE9zaHKaaX1rfMKTpgKphT%2Fqub9a7fVVsikpHYBtKG98ilQGqYE8hsXePbX5urppQrzA%2Fz9vat6x%2Bm8lEgPHD%2Bi5G82wMlWFOHbZv7D6ILhiI2%2BN3CiYt69PM6v%2BboH%2BoWOgVXzAg2qxbvlGdQhOpO5bpyndc%3D%7Ctkp%3ABk9SR67OpNbYZQ&LH_BIN=1', 'image_url': '', 'is_sponsored': False, 'condition': 'Brand New', 'listing_type': 'Buy It Now', 'seller_rating': 99.6, 'item_id': '365440659055', 'source': 'eBay', '_score': 59.751000000000005}, {'title': 'Pre-Owned Apple iPhone 8 64GB Fully Unlocked Smartphone', 'price': 89.89, 'currency': 'USD', 'url': '/ip/Apple-iPhone-8-64GB-GSM-Unlocked-Phone-12MP-Camera-Space-Gray-Used/179489451?conditionGroupCode=3&classType=VARIANT&from=/search', 'image_url': 'https://i5.walmartimages.com/seo/Apple-iPhone-8-64GB-GSM-Unlocked-Phone-12MP-Camera-Space-Gray-Used_86f79c87-5730-49bd-a9c2-1a9367c24518.4dfff9def878547f484a5f4d569195e3.jpeg?odnHeight=580&odnWidth=580&odnBg=FFFFFF', 'rating': 0.0, 'reviews': 0, 'is_sponsored': False, 'is_pickup_today': False, 'product_id': '6U7KWYVRVFKW', 'source': 'Walmart', '_score': 21.011}, {'title': 'For Apple iPhone 16 15 14 13 12 11 Pro Max Plus Tempered Glass Screen Protector', 'price': 7.88, 'shipping': 0.0, 'total_price': 7.88, 'is_free_shipping': False, 'currency': 'USD', 'url': 'https://www.ebay.com/itm/355694209237?_skw=smartphone+apple+iphone+Apple&itmmeta=01JV2P94WD4QQBCC9MP1W2CQ0R&hash=item52d106e8d5%3Ag%3AZa8AAOSwWSZmIyft&itmprp=enc%3AAQAKAAABAFkggFvd1GGDu0w3yXCmi1f03qpxwZVMRuKHASC0b5uPxZxE%2Bq2SppESkO3T%2BBuGVaj6APO%2FjTMzHqmXzWgKu5eTdqou11gHvUb83skg8ZJbkihE%2BLxp8uF5apzHeff6wDjBus1lk808hQkj0FxN4t0kAlIU4m%2Bbq0DLc7zNhPwaXhrK0zZIXj2%2FrbnSC31yJSonB44rcTdGzKPmXr4UwbW8%2FEr9pX0BK2BxGYINbPIZEAemnDzjNpcFREQUi89wxSCj247EpX%2BwXV7tCvAyVJEE1ZY9pqWrQoivxUFM5gMk6sqPLr%2FNsPY1BtT%2B9iU6OE1oKDTmhfNim6%2B8Od7Wqe8%3D%7Ctkp%3ABk9SR67OpNbYZQ&LH_BIN=1', 'image_url': '', 'is_sponsored': False, 'condition': 'Brand New', 'listing_type': 'Buy It Now', 'seller_rating': 92.2, 'item_id': '355694209237', 'source': 'eBay', '_score': 52.212}, {'title': 'Clear Case for Apple iPhone 11 Smartphones - Clear', 'price': 6.0, 'shipping': 0.0, 'total_price': 6.0, 'is_free_shipping': False, 'currency': 'USD', 'url': 'https://www.ebay.com/itm/354988772823?_skw=smartphone+apple+iphone+Apple&itmmeta=01JV2P94WDYCTYZ1WMV6Q54B3A&hash=item52a6facdd7%3Ag%3ATcUAAOSwg0hk4O2s&itmprp=enc%3AAQAKAAAA4FkggFvd1GGDu0w3yXCmi1djI4fxlwqHrNRelqqMSooHDPs7U7Yea2x%2Bid538qcYz%2FZMBVJ--dYnp7M%2FwaOQzZYhReqVEFDxTbk1PqwCxGpLuvGB3j0VypEYhp9Cem%2FsnDaWWNwsjbRxgYMYhQ9veYmxagGpgy2tmabJ6fOCY09I8jX2LiHWDJV7Af2QmdaXZI3YA0qBfwuaJKhclZCEUF5%2BenE3c6FQCsIBuBbu27O9J5Xg3akuecwoBPXxAIDKLUh6kmf5aMiUm69ke95qYIm22M9GqMtP8bKGKeLFV3kU%7Ctkp%3ABk9SR67OpNbYZQ&LH_BIN=1', 'image_url': '', 'is_sponsored': False, 'condition': 'Pre-Owned', 'listing_type': 'Buy It Now', 'seller_rating': 100.0, 'item_id': '354988772823', 'source': 'eBay', '_score': 44.4}, {'title': 'Restored Apple iPhone X - Fully Unlocked - 64 GB Space Gray (Refurbished)', 'price': 112.47, 'currency': 'USD', 'url': '/ip/Restored-Apple-iPhone-X-64GB-Unlocked-GSM-Not-CDMA-Space-Gray-Refurbished/281295999?conditionGroupCode=2&classType=VARIANT&from=/search', 'image_url': 'https://i5.walmartimages.com/seo/Restored-Apple-iPhone-X-64GB-Unlocked-GSM-Not-CDMA-Space-Gray-Refurbished_aa11ca41-b720-491c-b89f-6544614cb0a8.3be1e1a343e50dfe302b84c3675c80c9.jpeg?odnHeight=580&odnWidth=580&odnBg=FFFFFF', 'rating': 0.0, 'reviews': 0, 'is_sponsored': False, 'is_pickup_today': False, 'product_id': '1RRJ739FB8HJ', 'source': 'Walmart', '_score': 18.753}, {'title': 'Straight Talk Apple iPhone SE (2020), 64GB, White - Prepaid Smartphone Grade A [Locked to Straight Talk]', 'price': 118.53, 'currency': 'USD', 'url': '/ip/Straight-Talk-Apple-iPhone-SE-2020-64GB-White-Prepaid-Smartphone-Grade-A-Refurb-Locked-to-Straight-Talk/2082485607?classType=REGULAR&from=/search', 'image_url': 'https://i5.walmartimages.com/seo/Straight-Talk-Apple-iPhone-SE-2020-64GB-White-Prepaid-Smartphone-Grade-A-Refurb-Locked-to-Straight-Talk_e72ffd81-c626-48ab-810e-cbb27c30d030_2.0d4e6e5dbd6bc1e39b0a3d0b8ecb4553.jpeg?odnHeight=580&odnWidth=580&odnBg=FFFFFF', 'rating': 0.0, 'reviews': 0, 'is_sponsored': False, 'is_pickup_today': False, 'product_id': '4WHVHXP44XK3', 'source': 'Walmart', '_score': 18.147}, {'title': 'Pre-Owned Apple iPhone XR 64GB Factory Unlocked Smartphone 4G LTE iOS Smartphone ( Good)', 'price': 139.0, 'currency': 'USD', 'url': '/ip/Pre-Owned-Apple-iPhone-XR-64GB-Factory-Unlocked-Smartphone-4G-LTE-iOS-Smartphone-Refurbished-Good/248382693?conditionGroupCode=3&classType=VARIANT', 'image_url': 'https://i5.walmartimages.com/seo/Pre-Owned-Apple-iPhone-XR-64GB-Factory-Unlocked-Smartphone-4G-LTE-iOS-Smartphone-Refurbished-Good_88f612cf-cf8b-471e-8a42-04cd8d2a2197.a08bdbf382503b38f7e5aa20fadb33e1.jpeg?odnHeight=580&odnWidth=580&odnBg=FFFFFF', 'rating': 0.0, 'reviews': 0, 'is_sponsored': False, 'is_pickup_today': False, 'product_id': '1QM0GKL3XH2S', 'source': 'Walmart', '_score': 16.1}, {'title': 'Pre-Owned Apple iPhone XR 64GB Factory Unlocked Smartphone 4G LTE iOS (Good)', 'price': 142.0, 'currency': 'USD', 'url': '/ip/Apple-iPhone-XR-64GB-Factory-Unlocked-Smartphone-4G-LTE-iOS-Refurbished-Good/811611903?conditionGroupCode=3&classType=VARIANT', 'image_url': 'https://i5.walmartimages.com/seo/Apple-iPhone-XR-64GB-Factory-Unlocked-Smartphone-4G-LTE-iOS-Refurbished-Good_c50ff9a7-defe-48a7-8d81-b2f7ff8370b9.9f89ae49fc3e5a43bb7feaf676f7b9f3.jpeg?odnHeight=580&odnWidth=580&odnBg=FFFFFF', 'rating': 0.0, 'reviews': 0, 'is_sponsored': False, 'is_pickup_today': False, 'product_id': '2F8ZZ8IZ6TUR', 'source': 'Walmart', '_score': 15.8}]}
2025-05-12 12:48:21,569 - DealFinderAI.Controller - INFO - Is follow-up? True
2025-05-12 12:48:21,569 - DealFinderAI.Controller - INFO - Referenced products: 1
2025-05-12 12:48:21,569 - DealFinderAI.Controller - INFO - Handling as follow-up question about 1 products
2025-05-12 12:48:21,569 - DealFinderAI.Controller - INFO - Handling follow-up question: find me best deal on iphone between 500-1000 dollar
2025-05-12 12:48:21,569 - DealFinderAI.Controller - INFO - Referenced products: 1
2025-05-12 12:48:21,569 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: 
            I'm a shopping assistant helping a customer with product information.
            
            The customer previously searched for products and is now asking a follow-up question: "find me best deal on iphone between 500-1000 dollar"
            
            They're referring to this product:
            {
  "title": "New Apple iPhone 13 MINI A2481 128/256GB Factory Unlocked All Carrier &Color LOT",
  "price": 2.49,
  "shipping": 0.0,
  "total_price": 2.49,
  "is_free_shipping": true,
  "currency": "USD",
  "url": "https://www.ebay.com/itm/365440659055?_skw=smartphone+apple+iphone+Apple&itmmeta=01JV2P94WD6VPY3PVG11JP7QV1&hash=item5515f5ee6f%3Ag%3AJyYAAOSwqqRnyBKC&itmprp=enc%3AAQAKAAABAFkggFvd1GGDu0w3yXCmi1ecAZY3bNJdvGDoN0fT3XKA9K%2BpPCUtLzguC9m0hzTtX1cdBKSwfXGuTFcT%2FzoqSW%2FUnePrlEOcOgH%2B5rK2bKvaMSMmT5mVZpW9EnY1GY0f%2FByMOHPId%2BNNHA0MUqIjIBdOJIDoDWk4T9bfpi0AZmURSLCn2uNebY%2FEyMDE9zaHKaaX1rfMKTpgKphT%2Fqub9a7fVVsikpHYBtKG98ilQGqYE8hsXePbX5urppQrzA%2Fz9vat6x%2Bm8lEgPHD%2Bi5G82wMlWFOHbZv7D6ILhiI2%2BN3CiYt69PM6v%2BboH%2BoWOgVXzAg2qxbvlGdQhOpO5bpyndc%3D%7Ctkp%3ABk9SR67OpNbYZQ&LH_BIN=1",
  "image_url": "",
  "is_sponsored": false,
  "condition": "Brand New",
  "listing_type": "Buy It Now",
  "seller_rating": 99.6,
  "item_id": "365440659055",
  "source": "eBay",
  "_score": 59.751000000000005
}
            
            Please provide a helpful, conversational response addressing their question
            about this product. Include relevant details from the product information.
            
            If the product is a "best deal", emphasize why it's a good value compared to alternatives.
            If they're asking about comparisons to other products, highlight the key differences.
            If they're asking about specific features, focus on those details.
            
2025-05-12 12:48:58,118 - DealFinderAI.Controller - INFO - Processing user query: find me best deal on iphone between 500-1000 dollar
2025-05-12 12:48:58,119 - DealFinderAI.ChatMemoryAgent - INFO - Analyzing query: 'find me best deal on iphone between 500-1000 dollar' for conversation 20250508213250
2025-05-12 12:48:58,120 - DealFinderAI.ChatMemoryAgent - INFO - Current product info: True
2025-05-12 12:48:58,120 - DealFinderAI.ChatMemoryAgent - INFO - Number of products in memory: 8
2025-05-12 12:48:58,120 - DealFinderAI.ChatMemoryAgent - INFO - Found 8 products in memory
2025-05-12 12:48:58,121 - DealFinderAI.ChatMemoryAgent - INFO - Follow-up analysis: True, Referenced products: 1
2025-05-12 12:48:58,121 - DealFinderAI.Controller - INFO - Analyze response: {'is_follow_up': True, 'focused_product': 0, 'referenced_products': [{'title': 'New Apple iPhone 13 MINI A2481 128/256GB Factory Unlocked All Carrier &Color LOT', 'price': 2.49, 'shipping': 0.0, 'total_price': 2.49, 'is_free_shipping': True, 'currency': 'USD', 'url': 'https://www.ebay.com/itm/365440659055?_skw=smartphone+apple+iphone+Apple&itmmeta=01JV2P94WD6VPY3PVG11JP7QV1&hash=item5515f5ee6f%3Ag%3AJyYAAOSwqqRnyBKC&itmprp=enc%3AAQAKAAABAFkggFvd1GGDu0w3yXCmi1ecAZY3bNJdvGDoN0fT3XKA9K%2BpPCUtLzguC9m0hzTtX1cdBKSwfXGuTFcT%2FzoqSW%2FUnePrlEOcOgH%2B5rK2bKvaMSMmT5mVZpW9EnY1GY0f%2FByMOHPId%2BNNHA0MUqIjIBdOJIDoDWk4T9bfpi0AZmURSLCn2uNebY%2FEyMDE9zaHKaaX1rfMKTpgKphT%2Fqub9a7fVVsikpHYBtKG98ilQGqYE8hsXePbX5urppQrzA%2Fz9vat6x%2Bm8lEgPHD%2Bi5G82wMlWFOHbZv7D6ILhiI2%2BN3CiYt69PM6v%2BboH%2BoWOgVXzAg2qxbvlGdQhOpO5bpyndc%3D%7Ctkp%3ABk9SR67OpNbYZQ&LH_BIN=1', 'image_url': '', 'is_sponsored': False, 'condition': 'Brand New', 'listing_type': 'Buy It Now', 'seller_rating': 99.6, 'item_id': '365440659055', 'source': 'eBay', '_score': 59.751000000000005}], 'products': [{'title': 'New Apple iPhone 13 MINI A2481 128/256GB Factory Unlocked All Carrier &Color LOT', 'price': 2.49, 'shipping': 0.0, 'total_price': 2.49, 'is_free_shipping': True, 'currency': 'USD', 'url': 'https://www.ebay.com/itm/365440659055?_skw=smartphone+apple+iphone+Apple&itmmeta=01JV2P94WD6VPY3PVG11JP7QV1&hash=item5515f5ee6f%3Ag%3AJyYAAOSwqqRnyBKC&itmprp=enc%3AAQAKAAABAFkggFvd1GGDu0w3yXCmi1ecAZY3bNJdvGDoN0fT3XKA9K%2BpPCUtLzguC9m0hzTtX1cdBKSwfXGuTFcT%2FzoqSW%2FUnePrlEOcOgH%2B5rK2bKvaMSMmT5mVZpW9EnY1GY0f%2FByMOHPId%2BNNHA0MUqIjIBdOJIDoDWk4T9bfpi0AZmURSLCn2uNebY%2FEyMDE9zaHKaaX1rfMKTpgKphT%2Fqub9a7fVVsikpHYBtKG98ilQGqYE8hsXePbX5urppQrzA%2Fz9vat6x%2Bm8lEgPHD%2Bi5G82wMlWFOHbZv7D6ILhiI2%2BN3CiYt69PM6v%2BboH%2BoWOgVXzAg2qxbvlGdQhOpO5bpyndc%3D%7Ctkp%3ABk9SR67OpNbYZQ&LH_BIN=1', 'image_url': '', 'is_sponsored': False, 'condition': 'Brand New', 'listing_type': 'Buy It Now', 'seller_rating': 99.6, 'item_id': '365440659055', 'source': 'eBay', '_score': 59.751000000000005}, {'title': 'Pre-Owned Apple iPhone 8 64GB Fully Unlocked Smartphone', 'price': 89.89, 'currency': 'USD', 'url': '/ip/Apple-iPhone-8-64GB-GSM-Unlocked-Phone-12MP-Camera-Space-Gray-Used/179489451?conditionGroupCode=3&classType=VARIANT&from=/search', 'image_url': 'https://i5.walmartimages.com/seo/Apple-iPhone-8-64GB-GSM-Unlocked-Phone-12MP-Camera-Space-Gray-Used_86f79c87-5730-49bd-a9c2-1a9367c24518.4dfff9def878547f484a5f4d569195e3.jpeg?odnHeight=580&odnWidth=580&odnBg=FFFFFF', 'rating': 0.0, 'reviews': 0, 'is_sponsored': False, 'is_pickup_today': False, 'product_id': '6U7KWYVRVFKW', 'source': 'Walmart', '_score': 21.011}, {'title': 'For Apple iPhone 16 15 14 13 12 11 Pro Max Plus Tempered Glass Screen Protector', 'price': 7.88, 'shipping': 0.0, 'total_price': 7.88, 'is_free_shipping': False, 'currency': 'USD', 'url': 'https://www.ebay.com/itm/355694209237?_skw=smartphone+apple+iphone+Apple&itmmeta=01JV2P94WD4QQBCC9MP1W2CQ0R&hash=item52d106e8d5%3Ag%3AZa8AAOSwWSZmIyft&itmprp=enc%3AAQAKAAABAFkggFvd1GGDu0w3yXCmi1f03qpxwZVMRuKHASC0b5uPxZxE%2Bq2SppESkO3T%2BBuGVaj6APO%2FjTMzHqmXzWgKu5eTdqou11gHvUb83skg8ZJbkihE%2BLxp8uF5apzHeff6wDjBus1lk808hQkj0FxN4t0kAlIU4m%2Bbq0DLc7zNhPwaXhrK0zZIXj2%2FrbnSC31yJSonB44rcTdGzKPmXr4UwbW8%2FEr9pX0BK2BxGYINbPIZEAemnDzjNpcFREQUi89wxSCj247EpX%2BwXV7tCvAyVJEE1ZY9pqWrQoivxUFM5gMk6sqPLr%2FNsPY1BtT%2B9iU6OE1oKDTmhfNim6%2B8Od7Wqe8%3D%7Ctkp%3ABk9SR67OpNbYZQ&LH_BIN=1', 'image_url': '', 'is_sponsored': False, 'condition': 'Brand New', 'listing_type': 'Buy It Now', 'seller_rating': 92.2, 'item_id': '355694209237', 'source': 'eBay', '_score': 52.212}, {'title': 'Clear Case for Apple iPhone 11 Smartphones - Clear', 'price': 6.0, 'shipping': 0.0, 'total_price': 6.0, 'is_free_shipping': False, 'currency': 'USD', 'url': 'https://www.ebay.com/itm/354988772823?_skw=smartphone+apple+iphone+Apple&itmmeta=01JV2P94WDYCTYZ1WMV6Q54B3A&hash=item52a6facdd7%3Ag%3ATcUAAOSwg0hk4O2s&itmprp=enc%3AAQAKAAAA4FkggFvd1GGDu0w3yXCmi1djI4fxlwqHrNRelqqMSooHDPs7U7Yea2x%2Bid538qcYz%2FZMBVJ--dYnp7M%2FwaOQzZYhReqVEFDxTbk1PqwCxGpLuvGB3j0VypEYhp9Cem%2FsnDaWWNwsjbRxgYMYhQ9veYmxagGpgy2tmabJ6fOCY09I8jX2LiHWDJV7Af2QmdaXZI3YA0qBfwuaJKhclZCEUF5%2BenE3c6FQCsIBuBbu27O9J5Xg3akuecwoBPXxAIDKLUh6kmf5aMiUm69ke95qYIm22M9GqMtP8bKGKeLFV3kU%7Ctkp%3ABk9SR67OpNbYZQ&LH_BIN=1', 'image_url': '', 'is_sponsored': False, 'condition': 'Pre-Owned', 'listing_type': 'Buy It Now', 'seller_rating': 100.0, 'item_id': '354988772823', 'source': 'eBay', '_score': 44.4}, {'title': 'Restored Apple iPhone X - Fully Unlocked - 64 GB Space Gray (Refurbished)', 'price': 112.47, 'currency': 'USD', 'url': '/ip/Restored-Apple-iPhone-X-64GB-Unlocked-GSM-Not-CDMA-Space-Gray-Refurbished/281295999?conditionGroupCode=2&classType=VARIANT&from=/search', 'image_url': 'https://i5.walmartimages.com/seo/Restored-Apple-iPhone-X-64GB-Unlocked-GSM-Not-CDMA-Space-Gray-Refurbished_aa11ca41-b720-491c-b89f-6544614cb0a8.3be1e1a343e50dfe302b84c3675c80c9.jpeg?odnHeight=580&odnWidth=580&odnBg=FFFFFF', 'rating': 0.0, 'reviews': 0, 'is_sponsored': False, 'is_pickup_today': False, 'product_id': '1RRJ739FB8HJ', 'source': 'Walmart', '_score': 18.753}, {'title': 'Straight Talk Apple iPhone SE (2020), 64GB, White - Prepaid Smartphone Grade A [Locked to Straight Talk]', 'price': 118.53, 'currency': 'USD', 'url': '/ip/Straight-Talk-Apple-iPhone-SE-2020-64GB-White-Prepaid-Smartphone-Grade-A-Refurb-Locked-to-Straight-Talk/2082485607?classType=REGULAR&from=/search', 'image_url': 'https://i5.walmartimages.com/seo/Straight-Talk-Apple-iPhone-SE-2020-64GB-White-Prepaid-Smartphone-Grade-A-Refurb-Locked-to-Straight-Talk_e72ffd81-c626-48ab-810e-cbb27c30d030_2.0d4e6e5dbd6bc1e39b0a3d0b8ecb4553.jpeg?odnHeight=580&odnWidth=580&odnBg=FFFFFF', 'rating': 0.0, 'reviews': 0, 'is_sponsored': False, 'is_pickup_today': False, 'product_id': '4WHVHXP44XK3', 'source': 'Walmart', '_score': 18.147}, {'title': 'Pre-Owned Apple iPhone XR 64GB Factory Unlocked Smartphone 4G LTE iOS Smartphone ( Good)', 'price': 139.0, 'currency': 'USD', 'url': '/ip/Pre-Owned-Apple-iPhone-XR-64GB-Factory-Unlocked-Smartphone-4G-LTE-iOS-Smartphone-Refurbished-Good/248382693?conditionGroupCode=3&classType=VARIANT', 'image_url': 'https://i5.walmartimages.com/seo/Pre-Owned-Apple-iPhone-XR-64GB-Factory-Unlocked-Smartphone-4G-LTE-iOS-Smartphone-Refurbished-Good_88f612cf-cf8b-471e-8a42-04cd8d2a2197.a08bdbf382503b38f7e5aa20fadb33e1.jpeg?odnHeight=580&odnWidth=580&odnBg=FFFFFF', 'rating': 0.0, 'reviews': 0, 'is_sponsored': False, 'is_pickup_today': False, 'product_id': '1QM0GKL3XH2S', 'source': 'Walmart', '_score': 16.1}, {'title': 'Pre-Owned Apple iPhone XR 64GB Factory Unlocked Smartphone 4G LTE iOS (Good)', 'price': 142.0, 'currency': 'USD', 'url': '/ip/Apple-iPhone-XR-64GB-Factory-Unlocked-Smartphone-4G-LTE-iOS-Refurbished-Good/811611903?conditionGroupCode=3&classType=VARIANT', 'image_url': 'https://i5.walmartimages.com/seo/Apple-iPhone-XR-64GB-Factory-Unlocked-Smartphone-4G-LTE-iOS-Refurbished-Good_c50ff9a7-defe-48a7-8d81-b2f7ff8370b9.9f89ae49fc3e5a43bb7feaf676f7b9f3.jpeg?odnHeight=580&odnWidth=580&odnBg=FFFFFF', 'rating': 0.0, 'reviews': 0, 'is_sponsored': False, 'is_pickup_today': False, 'product_id': '2F8ZZ8IZ6TUR', 'source': 'Walmart', '_score': 15.8}]}
2025-05-12 12:48:58,122 - DealFinderAI.Controller - INFO - Is follow-up? True
2025-05-12 12:48:58,122 - DealFinderAI.Controller - INFO - Referenced products: 1
2025-05-12 12:48:58,122 - DealFinderAI.Controller - INFO - Handling as follow-up question about 1 products
2025-05-12 12:48:58,122 - DealFinderAI.Controller - INFO - Handling follow-up question: find me best deal on iphone between 500-1000 dollar
2025-05-12 12:48:58,122 - DealFinderAI.Controller - INFO - Referenced products: 1
2025-05-12 12:48:58,122 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: 
            I'm a shopping assistant helping a customer with product information.
            
            The customer previously searched for products and is now asking a follow-up question: "find me best deal on iphone between 500-1000 dollar"
            
            They're referring to this product:
            {
  "title": "New Apple iPhone 13 MINI A2481 128/256GB Factory Unlocked All Carrier &Color LOT",
  "price": 2.49,
  "shipping": 0.0,
  "total_price": 2.49,
  "is_free_shipping": true,
  "currency": "USD",
  "url": "https://www.ebay.com/itm/365440659055?_skw=smartphone+apple+iphone+Apple&itmmeta=01JV2P94WD6VPY3PVG11JP7QV1&hash=item5515f5ee6f%3Ag%3AJyYAAOSwqqRnyBKC&itmprp=enc%3AAQAKAAABAFkggFvd1GGDu0w3yXCmi1ecAZY3bNJdvGDoN0fT3XKA9K%2BpPCUtLzguC9m0hzTtX1cdBKSwfXGuTFcT%2FzoqSW%2FUnePrlEOcOgH%2B5rK2bKvaMSMmT5mVZpW9EnY1GY0f%2FByMOHPId%2BNNHA0MUqIjIBdOJIDoDWk4T9bfpi0AZmURSLCn2uNebY%2FEyMDE9zaHKaaX1rfMKTpgKphT%2Fqub9a7fVVsikpHYBtKG98ilQGqYE8hsXePbX5urppQrzA%2Fz9vat6x%2Bm8lEgPHD%2Bi5G82wMlWFOHbZv7D6ILhiI2%2BN3CiYt69PM6v%2BboH%2BoWOgVXzAg2qxbvlGdQhOpO5bpyndc%3D%7Ctkp%3ABk9SR67OpNbYZQ&LH_BIN=1",
  "image_url": "",
  "is_sponsored": false,
  "condition": "Brand New",
  "listing_type": "Buy It Now",
  "seller_rating": 99.6,
  "item_id": "365440659055",
  "source": "eBay",
  "_score": 59.751000000000005
}
            
            Please provide a helpful, conversational response addressing their question
            about this product. Include relevant details from the product information.
            
            If the product is a "best deal", emphasize why it's a good value compared to alternatives.
            If they're asking about comparisons to other products, highlight the key differences.
            If they're asking about specific features, focus on those details.
            
2025-05-12 12:49:13,602 - DealFinderAI - INFO - Logging initialized
2025-05-12 12:49:13,602 - DealFinderAI.Main - INFO - Starting DealFinder AI
2025-05-12 12:49:13,602 - DealFinderAI.Main - INFO - Using real scrapers
2025-05-12 12:49:13,645 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-12 12:49:13,645 - DealFinderAI.Controller - INFO - Initialized scraper agents: ['amazon', 'walmart', 'ebay']
2025-05-12 12:49:25,491 - DealFinderAI - INFO - Logging initialized
2025-05-12 12:49:25,491 - DealFinderAI.Main - INFO - Starting DealFinder AI
2025-05-12 12:49:25,491 - DealFinderAI.Main - INFO - Using real scrapers
2025-05-12 12:49:25,531 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-12 12:49:25,531 - DealFinderAI.Controller - INFO - Initialized scraper agents: ['amazon', 'walmart', 'ebay']
2025-05-12 12:49:25,772 - DealFinderAI - INFO - Logging initialized
2025-05-12 12:49:25,772 - DealFinderAI.Main - INFO - Starting DealFinder AI
2025-05-12 12:49:25,772 - DealFinderAI.Main - INFO - Using real scrapers
2025-05-12 12:49:25,804 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-12 12:49:25,804 - DealFinderAI.Controller - INFO - Initialized scraper agents: ['amazon', 'walmart', 'ebay']
2025-05-12 12:49:36,815 - DealFinderAI.Controller - INFO - Processing user query: find me best deal on iphone between 500-1000 dollar
2025-05-12 12:49:36,816 - DealFinderAI.ChatMemoryAgent - INFO - Analyzing query: 'find me best deal on iphone between 500-1000 dollar' for conversation 20250508213250
2025-05-12 12:49:36,816 - DealFinderAI.ChatMemoryAgent - INFO - Current product info: False
2025-05-12 12:49:36,817 - DealFinderAI.ChatMemoryAgent - INFO - No product context available for this conversation
2025-05-12 12:49:36,817 - DealFinderAI.Controller - INFO - Analyze response: {'is_follow_up': False, 'focused_product': None, 'referenced_products': [], 'products': []}
2025-05-12 12:49:36,817 - DealFinderAI.Controller - INFO - Is follow-up? False
2025-05-12 12:49:36,817 - DealFinderAI.Controller - INFO - Referenced products: 0
2025-05-12 12:49:36,817 - DealFinderAI.Controller - INFO - Processing as new search query
2025-05-12 12:49:36,817 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: find me best deal on iphone between 500-1000 dollar
2025-05-12 12:49:37,927 - DealFinderAI.GeminiAgent - WARNING - Failed to parse Gemini response as JSON: ```json
{
  "product_type": "iphone",
  "keywords": ["iphone"],
  "price_range": [500, 1000],
  "brands": ["apple"],
  "features": [],
  "sorting_preference": "price_low_to_high",
  "buy_it_now": true
}
```

2025-05-12 12:49:37,928 - DealFinderAI.Controller - INFO - Parsed search parameters: {'product_type': 'iphone', 'keywords': ['iphone'], 'price_range': [500, 1000], 'brands': ['apple'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-12 12:49:37,928 - DealFinderAI.AmazonScraperAgent - INFO - Searching Amazon for: {'product_type': 'iphone', 'keywords': ['iphone'], 'price_range': [500, 1000], 'brands': ['apple'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-12 12:49:39,357 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B0CMPLZDG8 at 516.85 USD
2025-05-12 12:49:39,360 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B0BN9P8PQD at 578.34 USD
2025-05-12 12:49:39,361 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B0DK2K7JHJ at 479.99 USD
2025-05-12 12:49:39,364 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B0BYLFC3V2 at 505.97 USD
2025-05-12 12:49:39,366 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B0CG84XR6N at 509.0 USD
2025-05-12 12:49:40,488 - DealFinderAI.WalmartScraperAgent - INFO - Searching Walmart for: {'product_type': 'iphone', 'keywords': ['iphone'], 'price_range': [500, 1000], 'brands': ['apple'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-12 12:49:45,169 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-12 12:49:45,169 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Restored Premium Apple iPhone 15, 128GB, Fully Unlocked, Black (Refurbished) at 509.0 USD
2025-05-12 12:49:45,170 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Restored Premium Apple iPhone 15, 128GB, Fully Unlocked, Black (Refurbished) at 509.0 USD
2025-05-12 12:49:47,518 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-12 12:49:47,518 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Restored Premium Apple iPhone 15 - Fully Unlocked - 128 GB Black - (Refurbished) at 509.0 USD
2025-05-12 12:49:47,518 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Restored Premium Apple iPhone 15 - Fully Unlocked - 128 GB Black - (Refurbished) at 509.0 USD
2025-05-12 12:49:49,802 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-12 12:49:49,803 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Restored Apple iPhone 15 128GB - Pink (T-Mobile) (Refurbished) at 509.95 USD
2025-05-12 12:49:49,803 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Restored Apple iPhone 15 128GB - Pink (T-Mobile) (Refurbished) at 509.95 USD
2025-05-12 12:49:52,215 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-12 12:49:52,216 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Restored Apple iPhone 15 128GB 6.1" 5G AT&T Only, Black (Refurbished) at 482.99 USD
2025-05-12 12:49:52,216 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Restored Apple iPhone 15 128GB 6.1" 5G AT&T Only, Black (Refurbished) at 482.99 USD
2025-05-12 12:49:54,695 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-12 12:49:54,696 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Restored Apple iPhone 15 Plus - Cricket Wireless - 128 GB Black (Refurbished) at 525.0 USD
2025-05-12 12:49:54,696 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Restored Apple iPhone 15 Plus - Cricket Wireless - 128 GB Black (Refurbished) at 525.0 USD
2025-05-12 12:49:54,696 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Restored Premium Apple iPhone 15, 128GB, Fully Unlocked, Black (Refurbished) at 509.0 USD
2025-05-12 12:49:54,696 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Restored Premium Apple iPhone 15 - Fully Unlocked - 128 GB Black - (Refurbished) at 509.0 USD
2025-05-12 12:49:54,697 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Restored Apple iPhone 15 128GB - Pink (T-Mobile) (Refurbished) at 509.95 USD
2025-05-12 12:49:54,697 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Restored Apple iPhone 15 128GB 6.1" 5G AT&T Only, Black (Refurbished) at 482.99 USD
2025-05-12 12:49:54,697 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Restored Apple iPhone 15 Plus - Cricket Wireless - 128 GB Black (Refurbished) at 525.0 USD
2025-05-12 12:49:55,741 - DealFinderAI.EbayScraperAgent - INFO - Searching eBay for: {'product_type': 'iphone', 'keywords': ['iphone'], 'price_range': [500, 1000], 'brands': ['apple'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-12 12:49:57,314 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 13 - 128GB - Red (Verizon) at 500.0 USD
2025-05-12 12:49:57,315 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 13 - 128GB - Red (Verizon) at 500.0 USD
2025-05-12 12:49:57,316 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 11 - 64GB -Green (Verizon) A2111 (CDMA + GSM) at 500.0 USD
2025-05-12 12:49:57,316 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 11 - 64GB -Green (Verizon) A2111 (CDMA + GSM) at 500.0 USD
2025-05-12 12:49:57,316 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 13 Pro- 128GB - Graphite (Unlocked) A2483 (CDMA + GSM) at 500.0 USD
2025-05-12 12:49:57,317 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 13 Pro- 128GB - Graphite (Unlocked) A2483 (CDMA + GSM) at 500.0 USD
2025-05-12 12:49:58,137 - DealFinderAI.ResultsAggregatorAgent - INFO - Aggregating results for query: find me best deal on iphone between 500-1000 dollar
2025-05-12 12:49:58,138 - DealFinderAI.ResultsAggregatorAgent - INFO - Found 3 results from various sources
2025-05-12 12:49:58,138 - DealFinderAI.ProductComparisonAgent - INFO - Comparing products for query: find me best deal on iphone between 500-1000 dollar
2025-05-12 12:49:58,138 - DealFinderAI.ProductComparisonAgent - INFO - Found 8 products to compare
2025-05-12 12:49:58,139 - DealFinderAI.ChatMemoryAgent - INFO - Storing context for conversation 20250508213250
2025-05-12 12:49:58,139 - DealFinderAI.ChatMemoryAgent - INFO - Storing 8 products for conversation 20250508213250
2025-05-12 12:49:58,139 - DealFinderAI.PresentationAgent - INFO - Preparing presentation for 8 products
2025-05-12 12:49:58,140 - DealFinderAI.ChatMemoryAgent - INFO - Storing context for conversation 20250508213250
2025-05-12 12:49:58,140 - DealFinderAI.ChatMemoryAgent - INFO - Storing 8 products for conversation 20250508213250
2025-05-12 12:49:58,140 - DealFinderAI.Controller - INFO - Successfully stored search results in memory
2025-05-12 12:58:45,632 - DealFinderAI.Controller - INFO - Processing user query: give me more detail about first product
2025-05-12 12:58:45,634 - DealFinderAI.ChatMemoryAgent - INFO - Analyzing query: 'give me more detail about first product' for conversation 20250508213250
2025-05-12 12:58:45,634 - DealFinderAI.ChatMemoryAgent - INFO - Current product info: True
2025-05-12 12:58:45,634 - DealFinderAI.ChatMemoryAgent - INFO - Number of products in memory: 8
2025-05-12 12:58:45,634 - DealFinderAI.ChatMemoryAgent - INFO - Found 8 products in memory
2025-05-12 12:58:45,636 - DealFinderAI.ChatMemoryAgent - INFO - Follow-up analysis: True, Referenced products: 1
2025-05-12 12:58:45,637 - DealFinderAI.Controller - INFO - Analyze response: {'is_follow_up': True, 'focused_product': None, 'referenced_products': [{'title': 'Apple iPhone 13 - 128GB - Red (Verizon)', 'price': 500.0, 'shipping': 0.0, 'total_price': 500.0, 'is_free_shipping': True, 'currency': 'USD', 'url': 'https://www.ebay.com/itm/394893875038?_skw=iphone+iphone+apple&epid=22049282595&itmmeta=01JV2PECJ1NXPAWVEZCW75JFHF&hash=item5bf182575e%3Ag%3AsZoAAOSwr7FlDMK-&itmprp=enc%3AAQAKAAAA0FkggFvd1GGDu0w3yXCmi1ctbcDGvnLkQ81UJSdNoHb46veI2hLXe%2FTWP0P2YMG3tysBM8Ers1Os68YpgiODebd71jUgXVH2cnS5rNZpXjUrCJZ99gDouKUjjhY8VGScVIcrMEJV%2F6PP32k3jHvI%2Fse2e5pX2EJ%2BHmy1uuqbAyOROgF375fpRUZmXtWPWvpDdzofPFrOf7K1aRKFuz2AUbRrdnryp4tLt4lbyxKzmoP9W6%2BVoALLAJauZRMHJtQtu1cDhfvmSshhxNzMJ83gh0w%3D%7Ctkp%3ABk9SR5bJudbYZQ&keyword=iphone+iphone+apple&sacat=0&relatedSearch=true&LH_BIN=1', 'image_url': '', 'is_sponsored': False, 'condition': 'Open Box', 'listing_type': 'Buy It Now', 'seller_rating': 0.0, 'item_id': '394893875038', 'source': 'eBay', '_score': 35}], 'products': [{'title': 'Apple iPhone 13 - 128GB - Red (Verizon)', 'price': 500.0, 'shipping': 0.0, 'total_price': 500.0, 'is_free_shipping': True, 'currency': 'USD', 'url': 'https://www.ebay.com/itm/394893875038?_skw=iphone+iphone+apple&epid=22049282595&itmmeta=01JV2PECJ1NXPAWVEZCW75JFHF&hash=item5bf182575e%3Ag%3AsZoAAOSwr7FlDMK-&itmprp=enc%3AAQAKAAAA0FkggFvd1GGDu0w3yXCmi1ctbcDGvnLkQ81UJSdNoHb46veI2hLXe%2FTWP0P2YMG3tysBM8Ers1Os68YpgiODebd71jUgXVH2cnS5rNZpXjUrCJZ99gDouKUjjhY8VGScVIcrMEJV%2F6PP32k3jHvI%2Fse2e5pX2EJ%2BHmy1uuqbAyOROgF375fpRUZmXtWPWvpDdzofPFrOf7K1aRKFuz2AUbRrdnryp4tLt4lbyxKzmoP9W6%2BVoALLAJauZRMHJtQtu1cDhfvmSshhxNzMJ83gh0w%3D%7Ctkp%3ABk9SR5bJudbYZQ&keyword=iphone+iphone+apple&sacat=0&relatedSearch=true&LH_BIN=1', 'image_url': '', 'is_sponsored': False, 'condition': 'Open Box', 'listing_type': 'Buy It Now', 'seller_rating': 0.0, 'item_id': '394893875038', 'source': 'eBay', '_score': 35}, {'title': 'Restored Premium Apple iPhone 15, 128GB, Fully Unlocked, Black (Refurbished)', 'price': 509.0, 'currency': 'USD', 'url': '/ip/Restored-iPhone-15-128GB-Fully-Unlocked-Black-Refurbished/15175405696?conditionGroupCode=2&classType=VARIANT&from=/search', 'image_url': 'https://i5.walmartimages.com/seo/Restored-iPhone-15-128GB-Fully-Unlocked-Black-Refurbished_45fab98d-1652-4594-9dfb-ff04eacac2cc.f1db95fd13e6f230b8261da9e91c16dd.jpeg?odnHeight=580&odnWidth=580&odnBg=FFFFFF', 'rating': 0.0, 'reviews': 0, 'is_sponsored': False, 'is_pickup_today': False, 'product_id': '1HSEWQ5EWMVT', 'source': 'Walmart', '_score': 20.0}, {'title': 'Apple iPhone 11 - 64GB -Green (Verizon) A2111 (CDMA + GSM)', 'price': 500.0, 'shipping': 0.0, 'total_price': 500.0, 'is_free_shipping': True, 'currency': 'USD', 'url': 'https://www.ebay.com/itm/304031624399?_skw=iphone+iphone+apple&epid=3042453711&itmmeta=01JV2PECJ17J6JFK2634J2VJTY&hash=item46c9b26ccf%3Ag%3ACwcAAOSwxydgxosj&itmprp=enc%3AAQAKAAAA0FkggFvd1GGDu0w3yXCmi1cpLYcSO%2B14loJJzbHcecFeohY5gM0Q0ydye4MkDI8K1MMJ7BXrwUB0t3K%2F7q0E4WbhjrErOO5aU1ovx9s6WcXf1SWUqc7GXaT8oCAtLI6F4wyEu2bp1WNGqdKK1NGlRvhruI%2BFJc61V4EkdxhhxtYuhZQ6pbPdxoYUUa3%2FsbjOCuESv19i0KVqjmgHFlvX1FFLPp%2BZpuPO4NC01MBy1PLIk8sXZJZMZogscdZvfzFoAZ5oKMmnDCqEPDETdynVbOA%3D%7Ctkp%3ABk9SR5bJudbYZQ&keyword=iphone+iphone+apple&sacat=0&relatedSearch=true&LH_BIN=1', 'image_url': '', 'is_sponsored': False, 'condition': 'Pre-Owned', 'listing_type': 'Buy It Now', 'seller_rating': 0.0, 'item_id': '304031624399', 'source': 'eBay', '_score': 35}, {'title': 'Apple iPhone 13 Pro- 128GB - Graphite (Unlocked) A2483 (CDMA + GSM)', 'price': 500.0, 'shipping': 0.0, 'total_price': 500.0, 'is_free_shipping': False, 'currency': 'USD', 'url': 'https://www.ebay.com/itm/226263839057?_skw=iphone+iphone+apple&epid=8072579682&itmmeta=01JV2PECJ1PJC7M937PN0Z2N16&hash=item34ae603151%3Ag%3AssEAAOSwRtZmotN0&itmprp=enc%3AAQAKAAAA8FkggFvd1GGDu0w3yXCmi1et0eecKMgT3xq85XE4PTw%2FotvuDjs1M9kdxclOualBpoovvSZBtSRiIgNuLXuSuj%2B1vdfL9psS%2BF4q2m%2ByoV6jxQJC%2FGuDlHi6zJJ1C4vdPPdMeZmrdkDwHeQHFsSIJ0ak3LHsOD%2BBZdC6ygpQtufm%2FGZOmti3%2Bu45DRuHDCCJSh1%2Bd%2F8tEsPA9xgTKCtzOGB0KXdpgB1geC6UD%2B6y%2BrFTuQHzp7o4Uv8z7qmUEfyNoFsMR%2ByPGE%2FqfakocDoerXTWiMzYJ4qylEiiVH7mQYK3geAG%2BulG3iYgXOFXe1JwSQ%3D%3D%7Ctkp%3ABk9SR5bJudbYZQ&keyword=iphone+iphone+apple&sacat=0&relatedSearch=true&LH_BIN=1', 'image_url': '', 'is_sponsored': False, 'condition': 'Pre-Owned', 'listing_type': 'Buy It Now', 'seller_rating': 100.0, 'item_id': '226263839057', 'source': 'eBay', '_score': 35}, {'title': 'Restored Premium Apple iPhone 15 - Fully Unlocked - 128 GB Black - (Refurbished)', 'price': 509.0, 'currency': 'USD', 'url': '/ip/Restored-Apple-iPhone-15-Fully-Unlocked-128-GB-Black-Refurbished/14867153475?conditionGroupCode=2&classType=VARIANT&from=/search', 'image_url': 'https://i5.walmartimages.com/seo/Restored-Apple-iPhone-15-Fully-Unlocked-128-GB-Black-Refurbished_7ebff7a1-0ae8-477b-9917-91183cedd23b.c9269fbb2b2e527a042acce32f302630.jpeg?odnHeight=580&odnWidth=580&odnBg=FFFFFF', 'rating': 0.0, 'reviews': 0, 'is_sponsored': False, 'is_pickup_today': False, 'product_id': '6OA8BVU0X2ZO', 'source': 'Walmart', '_score': 20.0}, {'title': 'Restored Apple iPhone 15 128GB - Pink (T-Mobile) (Refurbished)', 'price': 509.95, 'currency': 'USD', 'url': '/ip/Restored-Apple-iPhone-15-128GB-Pink-T-Mobile-Refurbished/5200687100?conditionGroupCode=2&classType=VARIANT&from=/search', 'image_url': 'https://i5.walmartimages.com/seo/Restored-Apple-iPhone-15-128GB-Pink-T-Mobile-Refurbished_5408dcfc-8fee-4b3f-a7bd-123d74e90d7c.e02f78e661e575959b2db9bb9c1dec97.jpeg?odnHeight=580&odnWidth=580&odnBg=FFFFFF', 'rating': 0.0, 'reviews': 0, 'is_sponsored': False, 'is_pickup_today': False, 'product_id': '787ICX22RTK0', 'source': 'Walmart', '_score': 20.0}, {'title': 'Restored Apple iPhone 15 Plus - Cricket Wireless - 128 GB Black (Refurbished)', 'price': 525.0, 'currency': 'USD', 'url': '/ip/Restored-Apple-iPhone-15-Plus-128GB-Cricket-Wireless-Black-MTXR3LL-A-Excellent-Condition/5227607412?conditionGroupCode=2&classType=VARIANT&from=/search', 'image_url': 'https://i5.walmartimages.com/seo/Restored-Apple-iPhone-15-Plus-128GB-Cricket-Wireless-Black-MTXR3LL-A-Excellent-Condition_83f5df6e-8f02-4d98-ae21-56efbec62b9a.ed248fc9cd6cb433585cb278b84d5d0a.jpeg?odnHeight=580&odnWidth=580&odnBg=FFFFFF', 'rating': 0.0, 'reviews': 0, 'is_sponsored': False, 'is_pickup_today': False, 'product_id': '52NROV03BESZ', 'source': 'Walmart', '_score': 20.0}, {'title': 'Restored Apple iPhone 15 128GB 6.1" 5G AT&T Only, Black (Refurbished)', 'price': 482.99, 'currency': 'USD', 'url': '/ip/Restored-Apple-iPhone-15-128GB-6-1-5G-AT-T-Only-Black-Refurbished/11394312170?conditionGroupCode=2&classType=VARIANT&from=/search', 'image_url': 'https://i5.walmartimages.com/seo/Restored-Apple-iPhone-15-128GB-6-1-5G-AT-T-Only-Black-Refurbished_95c5c33f-86b2-4143-bd5d-47e8d28c05be.ae527a376fceb9f4d6d6a0f26899e7d9.jpeg?odnHeight=580&odnWidth=580&odnBg=FFFFFF', 'rating': 0.0, 'reviews': 0, 'is_sponsored': False, 'is_pickup_today': False, 'product_id': '7L6ULXU399VL', 'source': 'Walmart', '_score': -5.0}]}
2025-05-12 12:58:45,641 - DealFinderAI.Controller - INFO - Is follow-up? True
2025-05-12 12:58:45,641 - DealFinderAI.Controller - INFO - Referenced products: 1
2025-05-12 12:58:45,641 - DealFinderAI.Controller - INFO - Handling as follow-up question about 1 products
2025-05-12 12:58:45,642 - DealFinderAI.Controller - INFO - Handling follow-up question: give me more detail about first product
2025-05-12 12:58:45,642 - DealFinderAI.Controller - INFO - Referenced products: 1
2025-05-12 12:58:45,642 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: 
            I'm a shopping assistant helping a customer with product information.
            
            The customer previously searched for products and is now asking a follow-up question: "give me more detail about first product"
            
            They're referring to this product:
            {
  "title": "Apple iPhone 13 - 128GB - Red (Verizon)",
  "price": 500.0,
  "shipping": 0.0,
  "total_price": 500.0,
  "is_free_shipping": true,
  "currency": "USD",
  "url": "https://www.ebay.com/itm/394893875038?_skw=iphone+iphone+apple&epid=22049282595&itmmeta=01JV2PECJ1NXPAWVEZCW75JFHF&hash=item5bf182575e%3Ag%3AsZoAAOSwr7FlDMK-&itmprp=enc%3AAQAKAAAA0FkggFvd1GGDu0w3yXCmi1ctbcDGvnLkQ81UJSdNoHb46veI2hLXe%2FTWP0P2YMG3tysBM8Ers1Os68YpgiODebd71jUgXVH2cnS5rNZpXjUrCJZ99gDouKUjjhY8VGScVIcrMEJV%2F6PP32k3jHvI%2Fse2e5pX2EJ%2BHmy1uuqbAyOROgF375fpRUZmXtWPWvpDdzofPFrOf7K1aRKFuz2AUbRrdnryp4tLt4lbyxKzmoP9W6%2BVoALLAJauZRMHJtQtu1cDhfvmSshhxNzMJ83gh0w%3D%7Ctkp%3ABk9SR5bJudbYZQ&keyword=iphone+iphone+apple&sacat=0&relatedSearch=true&LH_BIN=1",
  "image_url": "",
  "is_sponsored": false,
  "condition": "Open Box",
  "listing_type": "Buy It Now",
  "seller_rating": 0.0,
  "item_id": "394893875038",
  "source": "eBay",
  "_score": 35
}
            
            Please provide a helpful, conversational response addressing their question
            about this product. Include relevant details from the product information.
            
            If the product is a "best deal", emphasize why it's a good value compared to alternatives.
            If they're asking about comparisons to other products, highlight the key differences.
            If they're asking about specific features, focus on those details.
            
2025-05-12 12:59:27,213 - DealFinderAI.Controller - INFO - Processing user query: can u compare this on other websites
2025-05-12 12:59:27,214 - DealFinderAI.ChatMemoryAgent - INFO - Analyzing query: 'can u compare this on other websites' for conversation 20250508213250
2025-05-12 12:59:27,215 - DealFinderAI.ChatMemoryAgent - INFO - Current product info: True
2025-05-12 12:59:27,215 - DealFinderAI.ChatMemoryAgent - INFO - Number of products in memory: 8
2025-05-12 12:59:27,215 - DealFinderAI.ChatMemoryAgent - INFO - Found 8 products in memory
2025-05-12 12:59:27,215 - DealFinderAI.ChatMemoryAgent - INFO - Using focused product: 0
2025-05-12 12:59:27,215 - DealFinderAI.ChatMemoryAgent - INFO - Follow-up analysis: True, Referenced products: 1
2025-05-12 12:59:27,216 - DealFinderAI.Controller - INFO - Analyze response: {'is_follow_up': True, 'focused_product': 0, 'referenced_products': [{'title': 'Apple iPhone 13 - 128GB - Red (Verizon)', 'price': 500.0, 'shipping': 0.0, 'total_price': 500.0, 'is_free_shipping': True, 'currency': 'USD', 'url': 'https://www.ebay.com/itm/394893875038?_skw=iphone+iphone+apple&epid=22049282595&itmmeta=01JV2PECJ1NXPAWVEZCW75JFHF&hash=item5bf182575e%3Ag%3AsZoAAOSwr7FlDMK-&itmprp=enc%3AAQAKAAAA0FkggFvd1GGDu0w3yXCmi1ctbcDGvnLkQ81UJSdNoHb46veI2hLXe%2FTWP0P2YMG3tysBM8Ers1Os68YpgiODebd71jUgXVH2cnS5rNZpXjUrCJZ99gDouKUjjhY8VGScVIcrMEJV%2F6PP32k3jHvI%2Fse2e5pX2EJ%2BHmy1uuqbAyOROgF375fpRUZmXtWPWvpDdzofPFrOf7K1aRKFuz2AUbRrdnryp4tLt4lbyxKzmoP9W6%2BVoALLAJauZRMHJtQtu1cDhfvmSshhxNzMJ83gh0w%3D%7Ctkp%3ABk9SR5bJudbYZQ&keyword=iphone+iphone+apple&sacat=0&relatedSearch=true&LH_BIN=1', 'image_url': '', 'is_sponsored': False, 'condition': 'Open Box', 'listing_type': 'Buy It Now', 'seller_rating': 0.0, 'item_id': '394893875038', 'source': 'eBay', '_score': 35}], 'products': [{'title': 'Apple iPhone 13 - 128GB - Red (Verizon)', 'price': 500.0, 'shipping': 0.0, 'total_price': 500.0, 'is_free_shipping': True, 'currency': 'USD', 'url': 'https://www.ebay.com/itm/394893875038?_skw=iphone+iphone+apple&epid=22049282595&itmmeta=01JV2PECJ1NXPAWVEZCW75JFHF&hash=item5bf182575e%3Ag%3AsZoAAOSwr7FlDMK-&itmprp=enc%3AAQAKAAAA0FkggFvd1GGDu0w3yXCmi1ctbcDGvnLkQ81UJSdNoHb46veI2hLXe%2FTWP0P2YMG3tysBM8Ers1Os68YpgiODebd71jUgXVH2cnS5rNZpXjUrCJZ99gDouKUjjhY8VGScVIcrMEJV%2F6PP32k3jHvI%2Fse2e5pX2EJ%2BHmy1uuqbAyOROgF375fpRUZmXtWPWvpDdzofPFrOf7K1aRKFuz2AUbRrdnryp4tLt4lbyxKzmoP9W6%2BVoALLAJauZRMHJtQtu1cDhfvmSshhxNzMJ83gh0w%3D%7Ctkp%3ABk9SR5bJudbYZQ&keyword=iphone+iphone+apple&sacat=0&relatedSearch=true&LH_BIN=1', 'image_url': '', 'is_sponsored': False, 'condition': 'Open Box', 'listing_type': 'Buy It Now', 'seller_rating': 0.0, 'item_id': '394893875038', 'source': 'eBay', '_score': 35}, {'title': 'Restored Premium Apple iPhone 15, 128GB, Fully Unlocked, Black (Refurbished)', 'price': 509.0, 'currency': 'USD', 'url': '/ip/Restored-iPhone-15-128GB-Fully-Unlocked-Black-Refurbished/15175405696?conditionGroupCode=2&classType=VARIANT&from=/search', 'image_url': 'https://i5.walmartimages.com/seo/Restored-iPhone-15-128GB-Fully-Unlocked-Black-Refurbished_45fab98d-1652-4594-9dfb-ff04eacac2cc.f1db95fd13e6f230b8261da9e91c16dd.jpeg?odnHeight=580&odnWidth=580&odnBg=FFFFFF', 'rating': 0.0, 'reviews': 0, 'is_sponsored': False, 'is_pickup_today': False, 'product_id': '1HSEWQ5EWMVT', 'source': 'Walmart', '_score': 20.0}, {'title': 'Apple iPhone 11 - 64GB -Green (Verizon) A2111 (CDMA + GSM)', 'price': 500.0, 'shipping': 0.0, 'total_price': 500.0, 'is_free_shipping': True, 'currency': 'USD', 'url': 'https://www.ebay.com/itm/304031624399?_skw=iphone+iphone+apple&epid=3042453711&itmmeta=01JV2PECJ17J6JFK2634J2VJTY&hash=item46c9b26ccf%3Ag%3ACwcAAOSwxydgxosj&itmprp=enc%3AAQAKAAAA0FkggFvd1GGDu0w3yXCmi1cpLYcSO%2B14loJJzbHcecFeohY5gM0Q0ydye4MkDI8K1MMJ7BXrwUB0t3K%2F7q0E4WbhjrErOO5aU1ovx9s6WcXf1SWUqc7GXaT8oCAtLI6F4wyEu2bp1WNGqdKK1NGlRvhruI%2BFJc61V4EkdxhhxtYuhZQ6pbPdxoYUUa3%2FsbjOCuESv19i0KVqjmgHFlvX1FFLPp%2BZpuPO4NC01MBy1PLIk8sXZJZMZogscdZvfzFoAZ5oKMmnDCqEPDETdynVbOA%3D%7Ctkp%3ABk9SR5bJudbYZQ&keyword=iphone+iphone+apple&sacat=0&relatedSearch=true&LH_BIN=1', 'image_url': '', 'is_sponsored': False, 'condition': 'Pre-Owned', 'listing_type': 'Buy It Now', 'seller_rating': 0.0, 'item_id': '304031624399', 'source': 'eBay', '_score': 35}, {'title': 'Apple iPhone 13 Pro- 128GB - Graphite (Unlocked) A2483 (CDMA + GSM)', 'price': 500.0, 'shipping': 0.0, 'total_price': 500.0, 'is_free_shipping': False, 'currency': 'USD', 'url': 'https://www.ebay.com/itm/226263839057?_skw=iphone+iphone+apple&epid=8072579682&itmmeta=01JV2PECJ1PJC7M937PN0Z2N16&hash=item34ae603151%3Ag%3AssEAAOSwRtZmotN0&itmprp=enc%3AAQAKAAAA8FkggFvd1GGDu0w3yXCmi1et0eecKMgT3xq85XE4PTw%2FotvuDjs1M9kdxclOualBpoovvSZBtSRiIgNuLXuSuj%2B1vdfL9psS%2BF4q2m%2ByoV6jxQJC%2FGuDlHi6zJJ1C4vdPPdMeZmrdkDwHeQHFsSIJ0ak3LHsOD%2BBZdC6ygpQtufm%2FGZOmti3%2Bu45DRuHDCCJSh1%2Bd%2F8tEsPA9xgTKCtzOGB0KXdpgB1geC6UD%2B6y%2BrFTuQHzp7o4Uv8z7qmUEfyNoFsMR%2ByPGE%2FqfakocDoerXTWiMzYJ4qylEiiVH7mQYK3geAG%2BulG3iYgXOFXe1JwSQ%3D%3D%7Ctkp%3ABk9SR5bJudbYZQ&keyword=iphone+iphone+apple&sacat=0&relatedSearch=true&LH_BIN=1', 'image_url': '', 'is_sponsored': False, 'condition': 'Pre-Owned', 'listing_type': 'Buy It Now', 'seller_rating': 100.0, 'item_id': '226263839057', 'source': 'eBay', '_score': 35}, {'title': 'Restored Premium Apple iPhone 15 - Fully Unlocked - 128 GB Black - (Refurbished)', 'price': 509.0, 'currency': 'USD', 'url': '/ip/Restored-Apple-iPhone-15-Fully-Unlocked-128-GB-Black-Refurbished/14867153475?conditionGroupCode=2&classType=VARIANT&from=/search', 'image_url': 'https://i5.walmartimages.com/seo/Restored-Apple-iPhone-15-Fully-Unlocked-128-GB-Black-Refurbished_7ebff7a1-0ae8-477b-9917-91183cedd23b.c9269fbb2b2e527a042acce32f302630.jpeg?odnHeight=580&odnWidth=580&odnBg=FFFFFF', 'rating': 0.0, 'reviews': 0, 'is_sponsored': False, 'is_pickup_today': False, 'product_id': '6OA8BVU0X2ZO', 'source': 'Walmart', '_score': 20.0}, {'title': 'Restored Apple iPhone 15 128GB - Pink (T-Mobile) (Refurbished)', 'price': 509.95, 'currency': 'USD', 'url': '/ip/Restored-Apple-iPhone-15-128GB-Pink-T-Mobile-Refurbished/5200687100?conditionGroupCode=2&classType=VARIANT&from=/search', 'image_url': 'https://i5.walmartimages.com/seo/Restored-Apple-iPhone-15-128GB-Pink-T-Mobile-Refurbished_5408dcfc-8fee-4b3f-a7bd-123d74e90d7c.e02f78e661e575959b2db9bb9c1dec97.jpeg?odnHeight=580&odnWidth=580&odnBg=FFFFFF', 'rating': 0.0, 'reviews': 0, 'is_sponsored': False, 'is_pickup_today': False, 'product_id': '787ICX22RTK0', 'source': 'Walmart', '_score': 20.0}, {'title': 'Restored Apple iPhone 15 Plus - Cricket Wireless - 128 GB Black (Refurbished)', 'price': 525.0, 'currency': 'USD', 'url': '/ip/Restored-Apple-iPhone-15-Plus-128GB-Cricket-Wireless-Black-MTXR3LL-A-Excellent-Condition/5227607412?conditionGroupCode=2&classType=VARIANT&from=/search', 'image_url': 'https://i5.walmartimages.com/seo/Restored-Apple-iPhone-15-Plus-128GB-Cricket-Wireless-Black-MTXR3LL-A-Excellent-Condition_83f5df6e-8f02-4d98-ae21-56efbec62b9a.ed248fc9cd6cb433585cb278b84d5d0a.jpeg?odnHeight=580&odnWidth=580&odnBg=FFFFFF', 'rating': 0.0, 'reviews': 0, 'is_sponsored': False, 'is_pickup_today': False, 'product_id': '52NROV03BESZ', 'source': 'Walmart', '_score': 20.0}, {'title': 'Restored Apple iPhone 15 128GB 6.1" 5G AT&T Only, Black (Refurbished)', 'price': 482.99, 'currency': 'USD', 'url': '/ip/Restored-Apple-iPhone-15-128GB-6-1-5G-AT-T-Only-Black-Refurbished/11394312170?conditionGroupCode=2&classType=VARIANT&from=/search', 'image_url': 'https://i5.walmartimages.com/seo/Restored-Apple-iPhone-15-128GB-6-1-5G-AT-T-Only-Black-Refurbished_95c5c33f-86b2-4143-bd5d-47e8d28c05be.ae527a376fceb9f4d6d6a0f26899e7d9.jpeg?odnHeight=580&odnWidth=580&odnBg=FFFFFF', 'rating': 0.0, 'reviews': 0, 'is_sponsored': False, 'is_pickup_today': False, 'product_id': '7L6ULXU399VL', 'source': 'Walmart', '_score': -5.0}]}
2025-05-12 12:59:27,216 - DealFinderAI.Controller - INFO - Is follow-up? True
2025-05-12 12:59:27,217 - DealFinderAI.Controller - INFO - Referenced products: 1
2025-05-12 12:59:27,217 - DealFinderAI.Controller - INFO - Handling as follow-up question about 1 products
2025-05-12 12:59:27,217 - DealFinderAI.Controller - INFO - Handling follow-up question: can u compare this on other websites
2025-05-12 12:59:27,217 - DealFinderAI.Controller - INFO - Referenced products: 1
2025-05-12 12:59:27,217 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: 
            I'm a shopping assistant helping a customer with product information.
            
            The customer previously searched for products and is now asking a follow-up question: "can u compare this on other websites"
            
            They're referring to this product:
            {
  "title": "Apple iPhone 13 - 128GB - Red (Verizon)",
  "price": 500.0,
  "shipping": 0.0,
  "total_price": 500.0,
  "is_free_shipping": true,
  "currency": "USD",
  "url": "https://www.ebay.com/itm/394893875038?_skw=iphone+iphone+apple&epid=22049282595&itmmeta=01JV2PECJ1NXPAWVEZCW75JFHF&hash=item5bf182575e%3Ag%3AsZoAAOSwr7FlDMK-&itmprp=enc%3AAQAKAAAA0FkggFvd1GGDu0w3yXCmi1ctbcDGvnLkQ81UJSdNoHb46veI2hLXe%2FTWP0P2YMG3tysBM8Ers1Os68YpgiODebd71jUgXVH2cnS5rNZpXjUrCJZ99gDouKUjjhY8VGScVIcrMEJV%2F6PP32k3jHvI%2Fse2e5pX2EJ%2BHmy1uuqbAyOROgF375fpRUZmXtWPWvpDdzofPFrOf7K1aRKFuz2AUbRrdnryp4tLt4lbyxKzmoP9W6%2BVoALLAJauZRMHJtQtu1cDhfvmSshhxNzMJ83gh0w%3D%7Ctkp%3ABk9SR5bJudbYZQ&keyword=iphone+iphone+apple&sacat=0&relatedSearch=true&LH_BIN=1",
  "image_url": "",
  "is_sponsored": false,
  "condition": "Open Box",
  "listing_type": "Buy It Now",
  "seller_rating": 0.0,
  "item_id": "394893875038",
  "source": "eBay",
  "_score": 35
}
            
            Please provide a helpful, conversational response addressing their question
            about this product. Include relevant details from the product information.
            
            If the product is a "best deal", emphasize why it's a good value compared to alternatives.
            If they're asking about comparisons to other products, highlight the key differences.
            If they're asking about specific features, focus on those details.
            
2025-05-12 18:13:58,249 - DealFinderAI - INFO - Logging initialized
2025-05-12 18:13:58,249 - DealFinderAI.Main - INFO - Starting DealFinder AI
2025-05-12 18:13:58,249 - DealFinderAI.Main - INFO - Using real scrapers
2025-05-12 18:13:58,295 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-12 18:13:58,295 - DealFinderAI.Controller - INFO - Initialized scraper agents: ['amazon', 'walmart', 'ebay']
2025-05-12 18:14:20,176 - DealFinderAI - INFO - Logging initialized
2025-05-12 18:14:20,177 - DealFinderAI.Main - INFO - Starting DealFinder AI
2025-05-12 18:14:20,177 - DealFinderAI.Main - INFO - Using real scrapers
2025-05-12 18:14:20,217 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-12 18:14:20,218 - DealFinderAI.Controller - INFO - Initialized scraper agents: ['amazon', 'walmart', 'ebay']
2025-05-12 18:15:55,399 - DealFinderAI - INFO - Logging initialized
2025-05-12 18:15:55,399 - DealFinderAI.Main - INFO - Starting DealFinder AI
2025-05-12 18:15:55,399 - DealFinderAI.Main - INFO - Using real scrapers
2025-05-12 18:15:55,449 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-12 18:15:55,449 - DealFinderAI.Controller - INFO - Initialized scraper agents: ['amazon', 'walmart', 'ebay']
2025-05-12 18:17:07,131 - DealFinderAI - INFO - Logging initialized
2025-05-12 18:17:07,131 - DealFinderAI.Main - INFO - Starting DealFinder AI
2025-05-12 18:17:07,131 - DealFinderAI.Main - INFO - Using real scrapers
2025-05-12 18:17:07,175 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-12 18:17:07,175 - DealFinderAI.Controller - INFO - Initialized scraper agents: ['amazon', 'walmart', 'ebay']
2025-05-12 18:18:39,288 - DealFinderAI - INFO - Logging initialized
2025-05-12 18:18:39,289 - DealFinderAI.Main - INFO - Starting DealFinder AI
2025-05-12 18:18:39,289 - DealFinderAI.Main - INFO - Using real scrapers
2025-05-12 18:18:39,343 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-12 18:18:39,343 - DealFinderAI.Controller - INFO - Initialized scraper agents: ['amazon', 'walmart', 'ebay']
2025-05-12 18:18:56,062 - DealFinderAI - INFO - Logging initialized
2025-05-12 18:18:56,062 - DealFinderAI.Main - INFO - Starting DealFinder AI
2025-05-12 18:18:56,062 - DealFinderAI.Main - INFO - Using real scrapers
2025-05-12 18:18:56,104 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-12 18:18:56,104 - DealFinderAI.Controller - INFO - Initialized scraper agents: ['amazon', 'walmart', 'ebay']
2025-05-12 18:19:44,353 - DealFinderAI - INFO - Logging initialized
2025-05-12 18:19:44,353 - DealFinderAI.Main - INFO - Starting DealFinder AI
2025-05-12 18:19:44,353 - DealFinderAI.Main - INFO - Using real scrapers
2025-05-12 18:19:44,403 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-12 18:19:44,403 - DealFinderAI.Controller - INFO - Initialized scraper agents: ['amazon', 'walmart', 'ebay']
2025-05-12 18:36:52,208 - DealFinderAI - INFO - Logging initialized
2025-05-12 18:36:52,208 - DealFinderAI.Main - INFO - Starting DealFinder AI
2025-05-12 18:36:52,208 - DealFinderAI.Main - INFO - Using real scrapers
2025-05-12 18:36:52,283 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-12 18:36:52,283 - DealFinderAI.Controller - INFO - Initialized scraper agents: ['amazon', 'walmart', 'ebay']
2025-05-12 18:37:06,982 - DealFinderAI - INFO - Logging initialized
2025-05-12 18:37:06,983 - DealFinderAI.Main - INFO - Starting DealFinder AI
2025-05-12 18:37:06,983 - DealFinderAI.Main - INFO - Using real scrapers
2025-05-12 18:37:07,027 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-12 18:37:07,027 - DealFinderAI.Controller - INFO - Initialized scraper agents: ['amazon', 'walmart', 'ebay']
2025-05-12 18:37:29,774 - DealFinderAI - INFO - Logging initialized
2025-05-12 18:37:29,774 - DealFinderAI.Main - INFO - Starting DealFinder AI
2025-05-12 18:37:29,774 - DealFinderAI.Main - INFO - Using real scrapers
2025-05-12 18:37:29,815 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-12 18:37:29,815 - DealFinderAI.Controller - INFO - Initialized scraper agents: ['amazon', 'walmart', 'ebay']
2025-05-12 18:37:57,708 - DealFinderAI - INFO - Logging initialized
2025-05-12 18:37:57,708 - DealFinderAI.Main - INFO - Starting DealFinder AI
2025-05-12 18:37:57,708 - DealFinderAI.Main - INFO - Using real scrapers
2025-05-12 18:37:57,750 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-12 18:37:57,750 - DealFinderAI.Controller - INFO - Initialized scraper agents: ['amazon', 'walmart', 'ebay']
2025-05-12 18:38:06,376 - DealFinderAI - INFO - Logging initialized
2025-05-12 18:38:06,376 - DealFinderAI.Main - INFO - Starting DealFinder AI
2025-05-12 18:38:06,376 - DealFinderAI.Main - INFO - Using real scrapers
2025-05-12 18:38:06,417 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-12 18:38:06,417 - DealFinderAI.Controller - INFO - Initialized scraper agents: ['amazon', 'walmart', 'ebay']
2025-05-12 20:39:57,855 - DealFinderAI - INFO - Logging initialized
2025-05-12 20:39:57,855 - DealFinderAI.Main - INFO - Starting DealFinder AI
2025-05-12 20:39:57,855 - DealFinderAI.Main - INFO - Using real scrapers
2025-05-12 20:39:57,902 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-12 20:39:57,903 - DealFinderAI.Controller - INFO - Initialized scraper agents: ['amazon', 'walmart', 'ebay']
2025-05-12 20:41:13,650 - DealFinderAI - INFO - Logging initialized
2025-05-12 20:41:13,651 - DealFinderAI.Main - INFO - Starting DealFinder AI
2025-05-12 20:41:13,651 - DealFinderAI.Main - INFO - Using real scrapers
2025-05-12 20:41:13,696 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-12 20:41:13,696 - DealFinderAI.Controller - INFO - Initialized scraper agents: ['amazon', 'walmart', 'ebay']
2025-05-12 20:41:41,587 - DealFinderAI - INFO - Logging initialized
2025-05-12 20:41:41,587 - DealFinderAI.Main - INFO - Starting DealFinder AI
2025-05-12 20:41:41,587 - DealFinderAI.Main - INFO - Using real scrapers
2025-05-12 20:41:41,628 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-12 20:41:41,628 - DealFinderAI.Controller - INFO - Initialized scraper agents: ['amazon', 'walmart', 'ebay']
2025-05-12 20:42:21,606 - DealFinderAI - INFO - Logging initialized
2025-05-12 20:42:21,607 - DealFinderAI.Main - INFO - Starting DealFinder AI
2025-05-12 20:42:21,607 - DealFinderAI.Main - INFO - Using real scrapers
2025-05-12 20:42:21,660 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-12 20:42:21,660 - DealFinderAI.Controller - INFO - Initialized scraper agents: ['amazon', 'walmart', 'ebay']
2025-05-12 20:42:36,376 - DealFinderAI - INFO - Logging initialized
2025-05-12 20:42:36,377 - DealFinderAI.Main - INFO - Starting DealFinder AI
2025-05-12 20:42:36,377 - DealFinderAI.Main - INFO - Using real scrapers
2025-05-12 20:42:36,419 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-12 20:42:36,419 - DealFinderAI.Controller - INFO - Initialized scraper agents: ['amazon', 'walmart', 'ebay']
2025-05-12 20:43:52,261 - DealFinderAI - INFO - Logging initialized
2025-05-12 20:43:52,262 - DealFinderAI.Main - INFO - Starting DealFinder AI
2025-05-12 20:43:52,262 - DealFinderAI.Main - INFO - Using real scrapers
2025-05-12 20:43:52,311 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-12 20:43:52,311 - DealFinderAI.Controller - INFO - Initialized scraper agents: ['amazon', 'walmart', 'ebay']
2025-05-12 20:47:03,780 - DealFinderAI - INFO - Logging initialized
2025-05-12 20:47:03,781 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-12 20:47:03,781 - DealFinderAI.Controller - INFO - Initialized scraper agents: ['amazon', 'walmart', 'ebay']
2025-05-12 20:47:18,513 - DealFinderAI.Controller - INFO - Processing user query: find me best sony headphones
2025-05-12 20:47:18,513 - DealFinderAI.ChatMemoryAgent - INFO - Analyzing query: 'find me best sony headphones' for conversation session_1747097223
2025-05-12 20:47:18,513 - DealFinderAI.ChatMemoryAgent - INFO - Current product info: False
2025-05-12 20:47:18,513 - DealFinderAI.ChatMemoryAgent - INFO - No product context available for this conversation
2025-05-12 20:47:18,513 - DealFinderAI.Controller - INFO - Analyze response: {'is_follow_up': False, 'focused_product': None, 'referenced_products': [], 'products': []}
2025-05-12 20:47:18,513 - DealFinderAI.Controller - INFO - Is follow-up? False
2025-05-12 20:47:18,513 - DealFinderAI.Controller - INFO - Referenced products: 0
2025-05-12 20:47:18,513 - DealFinderAI.Controller - INFO - Processing as new search query
2025-05-12 20:47:18,513 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: find me best sony headphones
2025-05-12 20:47:19,503 - DealFinderAI.GeminiAgent - WARNING - Failed to parse Gemini response as JSON: ```json
{
  "product_type": "headphones",
  "keywords": ["best", "sony"],
  "price_range": null,
  "brands": ["Sony"],
  "features": [],
  "sorting_preference": "rating",
  "buy_it_now": true
}
```

2025-05-12 20:47:19,503 - DealFinderAI.Controller - INFO - Parsed search parameters: {'product_type': 'headphones', 'keywords': ['best', 'sony'], 'price_range': None, 'brands': ['Sony'], 'features': [], 'sorting_preference': 'rating', 'buy_it_now': True}
2025-05-12 20:47:19,503 - DealFinderAI.AmazonScraperAgent - INFO - Searching Amazon for: {'product_type': 'headphones', 'keywords': ['best', 'sony'], 'price_range': None, 'brands': ['Sony'], 'features': [], 'sorting_preference': 'rating', 'buy_it_now': True}
2025-05-12 20:47:21,248 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B000AJIF4E at 98.0 USD
2025-05-12 20:47:21,250 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B073BWKNVV at 99.0 USD
2025-05-12 20:47:21,251 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B0C1BQ99P1 at 498.73 USD
2025-05-12 20:47:21,253 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B0DD8SHVZL at 248.0 USD
2025-05-12 20:47:21,256 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B0863TXGM3 at 298.0 USD
2025-05-12 20:47:22,192 - DealFinderAI.WalmartScraperAgent - INFO - Searching Walmart for: {'product_type': 'headphones', 'keywords': ['best', 'sony'], 'price_range': None, 'brands': ['Sony'], 'features': [], 'sorting_preference': 'rating', 'buy_it_now': True}
2025-05-12 20:47:27,102 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-12 20:47:27,102 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Sony WH-1000XM5 The Best Wireless Noise Canceling Headphones, Black at 319.44 USD
2025-05-12 20:47:27,102 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Sony WH-1000XM5 The Best Wireless Noise Canceling Headphones, Black at 319.44 USD
2025-05-12 20:47:29,854 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-12 20:47:29,854 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Open Box Sony WH-1000XM4 Wireless Premium Noise Canceling Overhead Headphones with Mic for Phone Call and Alexa Voice Control, Black - at 234.99 USD
2025-05-12 20:47:29,854 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Open Box Sony WH-1000XM4 Wireless Premium Noise Canceling Overhead Headphones with Mic for Phone Call and Alexa Voice Control, Black - at 234.99 USD
2025-05-12 20:47:32,490 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-12 20:47:32,490 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Ultimaxx Essential Sony WH-1000XM5 Noise-Canceling Wireless Over-Ear Headphones Bundle (Blue) - Includes: Water-Resistant Gadget Backpack & More (7pc Bundle) at 329.95 USD
2025-05-12 20:47:32,490 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Ultimaxx Essential Sony WH-1000XM5 Noise-Canceling Wireless Over-Ear Headphones Bundle (Blue) - Includes: Water-Resistant Gadget Backpack & More (7pc Bundle) at 329.95 USD
2025-05-12 20:47:34,770 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-12 20:47:34,771 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Sony WH-1000XM5 The Best Wireless Noise Canceling Headphones, Black at 319.44 USD
2025-05-12 20:47:34,771 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Sony WH-1000XM5 The Best Wireless Noise Canceling Headphones, Black at 319.44 USD
2025-05-12 20:47:36,913 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-12 20:47:36,913 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Sony WF-C510 Truly Wireless Earbud Headphones, Black at 45.9 USD
2025-05-12 20:47:36,913 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Sony WF-C510 Truly Wireless Earbud Headphones, Black at 45.9 USD
2025-05-12 20:47:36,913 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Sony WH-1000XM5 The Best Wireless Noise Canceling Headphones, Black at 319.44 USD
2025-05-12 20:47:36,913 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Sony WH-1000XM5 The Best Wireless Noise Canceling Headphones, Black at 319.44 USD
2025-05-12 20:47:37,613 - DealFinderAI.EbayScraperAgent - INFO - Searching eBay for: {'product_type': 'headphones', 'keywords': ['best', 'sony'], 'price_range': None, 'brands': ['Sony'], 'features': [], 'sorting_preference': 'rating', 'buy_it_now': True}
2025-05-12 20:47:38,880 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Sony WF-1000XM5 The Best Truly Wireless Bluetooth Earbuds Headphones - Black at 139.99 USD
2025-05-12 20:47:38,881 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Sony WF-1000XM5 The Best Truly Wireless Bluetooth Earbuds Headphones - Black at 139.99 USD
2025-05-12 20:47:38,881 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Sony WH-1000XM5 The Best Wireless Noise Canceling Headphones,Black READ!! at 120.0 USD
2025-05-12 20:47:38,881 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Sony WH-1000XM5 The Best Wireless Noise Canceling Headphones,Black READ!! at 120.0 USD
2025-05-12 20:47:38,882 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Sony WH-1000XM5 The Best Wireless Auto Noise Canceling Headphones Optimizer at 299.95 USD
2025-05-12 20:47:38,882 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Sony WH-1000XM5 The Best Wireless Auto Noise Canceling Headphones Optimizer at 299.95 USD
2025-05-12 20:47:40,113 - DealFinderAI.ResultsAggregatorAgent - INFO - Aggregating results for query: find me best sony headphones
2025-05-12 20:47:40,113 - DealFinderAI.ResultsAggregatorAgent - INFO - Found 3 results from various sources
2025-05-12 20:47:40,114 - DealFinderAI.ProductComparisonAgent - INFO - Comparing products for query: find me best sony headphones
2025-05-12 20:47:40,114 - DealFinderAI.ProductComparisonAgent - INFO - Found 5 products to compare
2025-05-12 20:47:40,114 - DealFinderAI.ChatMemoryAgent - INFO - Storing context for conversation session_1747097223
2025-05-12 20:47:40,115 - DealFinderAI.ChatMemoryAgent - INFO - Storing 5 products for conversation session_1747097223
2025-05-12 20:47:40,115 - DealFinderAI.PresentationAgent - INFO - Preparing presentation for 5 products
2025-05-12 20:47:40,115 - DealFinderAI.ChatMemoryAgent - INFO - Storing context for conversation session_1747097223
2025-05-12 20:47:40,115 - DealFinderAI.ChatMemoryAgent - INFO - Storing 5 products for conversation session_1747097223
2025-05-12 20:47:40,115 - DealFinderAI.Controller - INFO - Successfully stored search results in memory
2025-05-12 20:48:29,924 - DealFinderAI.Controller - INFO - Processing user query: tell me more about the first product
2025-05-12 20:48:29,926 - DealFinderAI.ChatMemoryAgent - INFO - Analyzing query: 'tell me more about the first product' for conversation session_1747097223
2025-05-12 20:48:29,926 - DealFinderAI.ChatMemoryAgent - INFO - Current product info: True
2025-05-12 20:48:29,926 - DealFinderAI.ChatMemoryAgent - INFO - Number of products in memory: 5
2025-05-12 20:48:29,926 - DealFinderAI.ChatMemoryAgent - INFO - Found 5 products in memory
2025-05-12 20:48:29,927 - DealFinderAI.ChatMemoryAgent - INFO - Follow-up analysis: True, Referenced products: 1
2025-05-12 20:48:29,927 - DealFinderAI.Controller - INFO - Analyze response: {'is_follow_up': True, 'focused_product': None, 'referenced_products': [{'title': 'Sony WH-1000XM5 The Best Wireless Noise Canceling Headphones,Black READ!!', 'price': 120.0, 'shipping': 0.0, 'total_price': 120.0, 'is_free_shipping': True, 'currency': 'USD', 'url': 'https://www.ebay.com/itm/256929236833?_skw=headphones+best+sony+Sony&itmmeta=01JV3HS2GCT67NTHSTY4YMY1C9&hash=item3bd22d0761%3Ag%3AS8wAAOSwgTxoIgPm&itmprp=enc%3AAQAKAAAA8FkggFvd1GGDu0w3yXCmi1fWKc2WmtA0XWoR85OH6guse3cAs34tAal9JL%2Fh2pWvei8j3cvRnppkKW6%2FKSo8yYZvQhMUvR3wpNGSkrczsJFq4hERTIvCVADjNsgZk4k1UxNFNbhArX%2B9BOV9%2FFbN7ZGcy1ap7SWSkVqVf%2BlZIZee4U8SxjYXTHXHdcyHISknndrIp9DOt2%2FSXxKEPAXoAnio3Gmy2R72ZDsaGA9PuKqo%2Bp1N6HhmPSx1leTUAR4OF559GfNI8hdmBO%2BxMlooeztEvgKcyVHNcZHUeXeB9z30atwZ1mOhmcqbITBNYexm7A%3D%3D%7Ctkp%3ABFBMrqjk8dhl&LH_BIN=1', 'image_url': '', 'is_sponsored': False, 'condition': 'Parts Only', 'listing_type': 'Buy It Now', 'seller_rating': 96.9, 'item_id': '256929236833', 'source': 'eBay', '_score': 38.0, 'effective_price': 120.0}], 'products': [{'title': 'Sony WH-1000XM5 The Best Wireless Noise Canceling Headphones,Black READ!!', 'price': 120.0, 'shipping': 0.0, 'total_price': 120.0, 'is_free_shipping': True, 'currency': 'USD', 'url': 'https://www.ebay.com/itm/256929236833?_skw=headphones+best+sony+Sony&itmmeta=01JV3HS2GCT67NTHSTY4YMY1C9&hash=item3bd22d0761%3Ag%3AS8wAAOSwgTxoIgPm&itmprp=enc%3AAQAKAAAA8FkggFvd1GGDu0w3yXCmi1fWKc2WmtA0XWoR85OH6guse3cAs34tAal9JL%2Fh2pWvei8j3cvRnppkKW6%2FKSo8yYZvQhMUvR3wpNGSkrczsJFq4hERTIvCVADjNsgZk4k1UxNFNbhArX%2B9BOV9%2FFbN7ZGcy1ap7SWSkVqVf%2BlZIZee4U8SxjYXTHXHdcyHISknndrIp9DOt2%2FSXxKEPAXoAnio3Gmy2R72ZDsaGA9PuKqo%2Bp1N6HhmPSx1leTUAR4OF559GfNI8hdmBO%2BxMlooeztEvgKcyVHNcZHUeXeB9z30atwZ1mOhmcqbITBNYexm7A%3D%3D%7Ctkp%3ABFBMrqjk8dhl&LH_BIN=1', 'image_url': '', 'is_sponsored': False, 'condition': 'Parts Only', 'listing_type': 'Buy It Now', 'seller_rating': 96.9, 'item_id': '256929236833', 'source': 'eBay', '_score': 38.0, 'effective_price': 120.0}, {'title': 'Sony WF-1000XM5 The Best Truly Wireless Bluetooth Earbuds Headphones - Black', 'price': 139.99, 'shipping': 0.0, 'total_price': 139.99, 'is_free_shipping': True, 'currency': 'USD', 'url': 'https://www.ebay.com/itm/256853907827?_skw=headphones+best+sony+Sony&itmmeta=01JV3HS2GCT7M0345KEXFDX1E0&hash=item3bcdaf9973%3Ag%3A41EAAOSwDFln0Txs&itmprp=enc%3AAQAKAAABAFkggFvd1GGDu0w3yXCmi1eDHCY2ER51Urg5UlV%2B56m4ZdNkT7hrfgw2ipF8%2Fa8uHK7uJuFeHnkvXCtGV1eBA%2BNiXtxsHBFeYAJ3Wby2iUvUi7awKrpRiQICJcmzJeuYQsPdGO9DjzO%2Br71hb%2B8HFA1Vj5RXohW0iOr3ojcdoEep6IHzr5TVkBMv4NYCWND7kcTMAJt%2BP4HKJH9vHVRnHIN5CZcdT7K%2FVw9ytSGIrswkAmRRxkeAPX1R1FJ8puIVR4Trat%2FGhHIMNtmnmRB0%2FPVOPumP%2FH4NhYnUoJsXSimEQIaYGWtCloHGEErE3fcVRYtsf0vGbNgxYLv3wfeuySo%3D%7Ctkp%3ABFBMrqjk8dhl&LH_BIN=1', 'image_url': '', 'is_sponsored': False, 'condition': 'Pre-Owned', 'listing_type': 'Buy It Now', 'seller_rating': 100.0, 'item_id': '256853907827', 'source': 'eBay', '_score': 36.001}, {'title': 'Sony WH-1000XM5 The Best Wireless Auto Noise Canceling Headphones Optimizer', 'price': 299.95, 'shipping': 0.0, 'total_price': 299.95, 'is_free_shipping': True, 'currency': 'USD', 'url': 'https://www.ebay.com/itm/235720395134?_skw=headphones+best+sony+Sony&itmmeta=01JV3HS2GCFGZ2V6TRX8Y0PBJS&hash=item36e207c97e%3Ag%3A5GQAAOSw6jJm0SLC&itmprp=enc%3AAQAKAAAA8FkggFvd1GGDu0w3yXCmi1fc6LwlPEiKNSm4y6vXwq%2FNwkOTh%2FRWfeRaSmfW9s0HMFDtEk3sRqvxj3qJ6gF8Y82eIZO%2Bjq5Vh0SFLm44F5yjNqCMgihAI6JnCd%2FKgYLeqvmulp3EV1jJhEGGX6Mj4IYmYyhBQJvZVDJkOEuvVdZURB9e%2Bf03tJq2ieOrwQKLbOq970TjJnTDWWeDOp44%2Fq6O2J%2BLXKtpoGr4e%2B%2BNSMR6wZMAAmogGQ1IIQeDWzcfiqc8R5wD%2BIbaRkjiM3RTXUCFhIVKiEgyTGIDsmILgvYuRtJyIlF1VcwLVQyoE68l4g%3D%3D%7Ctkp%3ABFBMrqjk8dhl&LH_BIN=1', 'image_url': '', 'is_sponsored': False, 'condition': 'Brand New', 'listing_type': 'Buy It Now', 'seller_rating': 98.2, 'item_id': '235720395134', 'source': 'eBay', '_score': 30.005000000000003, 'effective_price': 299.95}, {'title': 'Sony WH-1000XM5 The Best Wireless Noise Canceling Headphones, Black', 'price': 319.44, 'currency': 'USD', 'url': 'https://www.walmart.com/ip/Sony-WH-1000XM5-The-Best-Wireless-Noise-Canceling-Headphones-Black/386006068?classType=VARIANT&adsRedirect=true', 'image_url': 'https://i5.walmartimages.com/seo/Sony-WH-1000XM5-The-Best-Wireless-Noise-Canceling-Headphones-Black_7384c879-1d54-47e8-9876-1d7adadcf0a5.542c245c25d295b30fa5820eacea4450.jpeg?odnHeight=580&odnWidth=580&odnBg=FFFFFF', 'rating': 0.0, 'reviews': 0, 'is_sponsored': False, 'is_pickup_today': False, 'product_id': '2P9FP9H47OOW', 'source': 'Walmart', '_score': 0.0, 'effective_price': 319.44}, {'title': 'Sony WH-1000XM5 The Best Wireless Noise Canceling Headphones, Black', 'price': 319.44, 'currency': 'USD', 'url': '/ip/Sony-WH-1000XM5-The-Best-Wireless-Noise-Canceling-Headphones-Black/386006068?classType=VARIANT&from=/search', 'image_url': 'https://i5.walmartimages.com/seo/Sony-WH-1000XM5-The-Best-Wireless-Noise-Canceling-Headphones-Black_7384c879-1d54-47e8-9876-1d7adadcf0a5.542c245c25d295b30fa5820eacea4450.jpeg?odnHeight=580&odnWidth=580&odnBg=FFFFFF', 'rating': 0.0, 'reviews': 0, 'is_sponsored': False, 'is_pickup_today': False, 'product_id': '7L1R4YYVLYOY', 'source': 'Walmart', '_score': 0.0, 'effective_price': 319.44}]}
2025-05-12 20:48:29,927 - DealFinderAI.Controller - INFO - Is follow-up? True
2025-05-12 20:48:29,927 - DealFinderAI.Controller - INFO - Referenced products: 1
2025-05-12 20:48:29,928 - DealFinderAI.Controller - INFO - Handling as follow-up question about 1 products
2025-05-12 20:48:29,928 - DealFinderAI.Controller - INFO - Handling follow-up question: tell me more about the first product
2025-05-12 20:48:29,928 - DealFinderAI.Controller - INFO - Referenced products: 1
2025-05-12 20:48:29,928 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: 
            I'm a shopping assistant helping a customer with product information.
            
            The customer previously searched for products and is now asking a follow-up question: "tell me more about the first product"
            
            They're referring to this product:
            {
  "title": "Sony WH-1000XM5 The Best Wireless Noise Canceling Headphones,Black READ!!",
  "price": 120.0,
  "shipping": 0.0,
  "total_price": 120.0,
  "is_free_shipping": true,
  "currency": "USD",
  "url": "https://www.ebay.com/itm/256929236833?_skw=headphones+best+sony+Sony&itmmeta=01JV3HS2GCT67NTHSTY4YMY1C9&hash=item3bd22d0761%3Ag%3AS8wAAOSwgTxoIgPm&itmprp=enc%3AAQAKAAAA8FkggFvd1GGDu0w3yXCmi1fWKc2WmtA0XWoR85OH6guse3cAs34tAal9JL%2Fh2pWvei8j3cvRnppkKW6%2FKSo8yYZvQhMUvR3wpNGSkrczsJFq4hERTIvCVADjNsgZk4k1UxNFNbhArX%2B9BOV9%2FFbN7ZGcy1ap7SWSkVqVf%2BlZIZee4U8SxjYXTHXHdcyHISknndrIp9DOt2%2FSXxKEPAXoAnio3Gmy2R72ZDsaGA9PuKqo%2Bp1N6HhmPSx1leTUAR4OF559GfNI8hdmBO%2BxMlooeztEvgKcyVHNcZHUeXeB9z30atwZ1mOhmcqbITBNYexm7A%3D%3D%7Ctkp%3ABFBMrqjk8dhl&LH_BIN=1",
  "image_url": "",
  "is_sponsored": false,
  "condition": "Parts Only",
  "listing_type": "Buy It Now",
  "seller_rating": 96.9,
  "item_id": "256929236833",
  "source": "eBay",
  "_score": 38.0,
  "effective_price": 120.0
}
            
            Please provide a helpful, conversational response addressing their question
            about this product. Include relevant details from the product information.
            
            If the product is a "best deal", emphasize why it's a good value compared to alternatives.
            If they're asking about comparisons to other products, highlight the key differences.
            If they're asking about specific features, focus on those details.
            
2025-05-12 20:49:07,135 - DealFinderAI.Controller - INFO - Processing user query: find me latest iphone under 1000 dollar
2025-05-12 20:49:07,136 - DealFinderAI.ChatMemoryAgent - INFO - Analyzing query: 'find me latest iphone under 1000 dollar' for conversation session_1747097223
2025-05-12 20:49:07,136 - DealFinderAI.ChatMemoryAgent - INFO - Current product info: True
2025-05-12 20:49:07,137 - DealFinderAI.ChatMemoryAgent - INFO - Number of products in memory: 5
2025-05-12 20:49:07,137 - DealFinderAI.ChatMemoryAgent - INFO - Found 5 products in memory
2025-05-12 20:49:07,137 - DealFinderAI.ChatMemoryAgent - INFO - Using focused product: 0
2025-05-12 20:49:07,137 - DealFinderAI.ChatMemoryAgent - INFO - Follow-up analysis: True, Referenced products: 1
2025-05-12 20:49:07,138 - DealFinderAI.Controller - INFO - Analyze response: {'is_follow_up': True, 'focused_product': 0, 'referenced_products': [{'title': 'Sony WH-1000XM5 The Best Wireless Noise Canceling Headphones,Black READ!!', 'price': 120.0, 'shipping': 0.0, 'total_price': 120.0, 'is_free_shipping': True, 'currency': 'USD', 'url': 'https://www.ebay.com/itm/256929236833?_skw=headphones+best+sony+Sony&itmmeta=01JV3HS2GCT67NTHSTY4YMY1C9&hash=item3bd22d0761%3Ag%3AS8wAAOSwgTxoIgPm&itmprp=enc%3AAQAKAAAA8FkggFvd1GGDu0w3yXCmi1fWKc2WmtA0XWoR85OH6guse3cAs34tAal9JL%2Fh2pWvei8j3cvRnppkKW6%2FKSo8yYZvQhMUvR3wpNGSkrczsJFq4hERTIvCVADjNsgZk4k1UxNFNbhArX%2B9BOV9%2FFbN7ZGcy1ap7SWSkVqVf%2BlZIZee4U8SxjYXTHXHdcyHISknndrIp9DOt2%2FSXxKEPAXoAnio3Gmy2R72ZDsaGA9PuKqo%2Bp1N6HhmPSx1leTUAR4OF559GfNI8hdmBO%2BxMlooeztEvgKcyVHNcZHUeXeB9z30atwZ1mOhmcqbITBNYexm7A%3D%3D%7Ctkp%3ABFBMrqjk8dhl&LH_BIN=1', 'image_url': '', 'is_sponsored': False, 'condition': 'Parts Only', 'listing_type': 'Buy It Now', 'seller_rating': 96.9, 'item_id': '256929236833', 'source': 'eBay', '_score': 38.0, 'effective_price': 120.0}], 'products': [{'title': 'Sony WH-1000XM5 The Best Wireless Noise Canceling Headphones,Black READ!!', 'price': 120.0, 'shipping': 0.0, 'total_price': 120.0, 'is_free_shipping': True, 'currency': 'USD', 'url': 'https://www.ebay.com/itm/256929236833?_skw=headphones+best+sony+Sony&itmmeta=01JV3HS2GCT67NTHSTY4YMY1C9&hash=item3bd22d0761%3Ag%3AS8wAAOSwgTxoIgPm&itmprp=enc%3AAQAKAAAA8FkggFvd1GGDu0w3yXCmi1fWKc2WmtA0XWoR85OH6guse3cAs34tAal9JL%2Fh2pWvei8j3cvRnppkKW6%2FKSo8yYZvQhMUvR3wpNGSkrczsJFq4hERTIvCVADjNsgZk4k1UxNFNbhArX%2B9BOV9%2FFbN7ZGcy1ap7SWSkVqVf%2BlZIZee4U8SxjYXTHXHdcyHISknndrIp9DOt2%2FSXxKEPAXoAnio3Gmy2R72ZDsaGA9PuKqo%2Bp1N6HhmPSx1leTUAR4OF559GfNI8hdmBO%2BxMlooeztEvgKcyVHNcZHUeXeB9z30atwZ1mOhmcqbITBNYexm7A%3D%3D%7Ctkp%3ABFBMrqjk8dhl&LH_BIN=1', 'image_url': '', 'is_sponsored': False, 'condition': 'Parts Only', 'listing_type': 'Buy It Now', 'seller_rating': 96.9, 'item_id': '256929236833', 'source': 'eBay', '_score': 38.0, 'effective_price': 120.0}, {'title': 'Sony WF-1000XM5 The Best Truly Wireless Bluetooth Earbuds Headphones - Black', 'price': 139.99, 'shipping': 0.0, 'total_price': 139.99, 'is_free_shipping': True, 'currency': 'USD', 'url': 'https://www.ebay.com/itm/256853907827?_skw=headphones+best+sony+Sony&itmmeta=01JV3HS2GCT7M0345KEXFDX1E0&hash=item3bcdaf9973%3Ag%3A41EAAOSwDFln0Txs&itmprp=enc%3AAQAKAAABAFkggFvd1GGDu0w3yXCmi1eDHCY2ER51Urg5UlV%2B56m4ZdNkT7hrfgw2ipF8%2Fa8uHK7uJuFeHnkvXCtGV1eBA%2BNiXtxsHBFeYAJ3Wby2iUvUi7awKrpRiQICJcmzJeuYQsPdGO9DjzO%2Br71hb%2B8HFA1Vj5RXohW0iOr3ojcdoEep6IHzr5TVkBMv4NYCWND7kcTMAJt%2BP4HKJH9vHVRnHIN5CZcdT7K%2FVw9ytSGIrswkAmRRxkeAPX1R1FJ8puIVR4Trat%2FGhHIMNtmnmRB0%2FPVOPumP%2FH4NhYnUoJsXSimEQIaYGWtCloHGEErE3fcVRYtsf0vGbNgxYLv3wfeuySo%3D%7Ctkp%3ABFBMrqjk8dhl&LH_BIN=1', 'image_url': '', 'is_sponsored': False, 'condition': 'Pre-Owned', 'listing_type': 'Buy It Now', 'seller_rating': 100.0, 'item_id': '256853907827', 'source': 'eBay', '_score': 36.001}, {'title': 'Sony WH-1000XM5 The Best Wireless Auto Noise Canceling Headphones Optimizer', 'price': 299.95, 'shipping': 0.0, 'total_price': 299.95, 'is_free_shipping': True, 'currency': 'USD', 'url': 'https://www.ebay.com/itm/235720395134?_skw=headphones+best+sony+Sony&itmmeta=01JV3HS2GCFGZ2V6TRX8Y0PBJS&hash=item36e207c97e%3Ag%3A5GQAAOSw6jJm0SLC&itmprp=enc%3AAQAKAAAA8FkggFvd1GGDu0w3yXCmi1fc6LwlPEiKNSm4y6vXwq%2FNwkOTh%2FRWfeRaSmfW9s0HMFDtEk3sRqvxj3qJ6gF8Y82eIZO%2Bjq5Vh0SFLm44F5yjNqCMgihAI6JnCd%2FKgYLeqvmulp3EV1jJhEGGX6Mj4IYmYyhBQJvZVDJkOEuvVdZURB9e%2Bf03tJq2ieOrwQKLbOq970TjJnTDWWeDOp44%2Fq6O2J%2BLXKtpoGr4e%2B%2BNSMR6wZMAAmogGQ1IIQeDWzcfiqc8R5wD%2BIbaRkjiM3RTXUCFhIVKiEgyTGIDsmILgvYuRtJyIlF1VcwLVQyoE68l4g%3D%3D%7Ctkp%3ABFBMrqjk8dhl&LH_BIN=1', 'image_url': '', 'is_sponsored': False, 'condition': 'Brand New', 'listing_type': 'Buy It Now', 'seller_rating': 98.2, 'item_id': '235720395134', 'source': 'eBay', '_score': 30.005000000000003, 'effective_price': 299.95}, {'title': 'Sony WH-1000XM5 The Best Wireless Noise Canceling Headphones, Black', 'price': 319.44, 'currency': 'USD', 'url': 'https://www.walmart.com/ip/Sony-WH-1000XM5-The-Best-Wireless-Noise-Canceling-Headphones-Black/386006068?classType=VARIANT&adsRedirect=true', 'image_url': 'https://i5.walmartimages.com/seo/Sony-WH-1000XM5-The-Best-Wireless-Noise-Canceling-Headphones-Black_7384c879-1d54-47e8-9876-1d7adadcf0a5.542c245c25d295b30fa5820eacea4450.jpeg?odnHeight=580&odnWidth=580&odnBg=FFFFFF', 'rating': 0.0, 'reviews': 0, 'is_sponsored': False, 'is_pickup_today': False, 'product_id': '2P9FP9H47OOW', 'source': 'Walmart', '_score': 0.0, 'effective_price': 319.44}, {'title': 'Sony WH-1000XM5 The Best Wireless Noise Canceling Headphones, Black', 'price': 319.44, 'currency': 'USD', 'url': '/ip/Sony-WH-1000XM5-The-Best-Wireless-Noise-Canceling-Headphones-Black/386006068?classType=VARIANT&from=/search', 'image_url': 'https://i5.walmartimages.com/seo/Sony-WH-1000XM5-The-Best-Wireless-Noise-Canceling-Headphones-Black_7384c879-1d54-47e8-9876-1d7adadcf0a5.542c245c25d295b30fa5820eacea4450.jpeg?odnHeight=580&odnWidth=580&odnBg=FFFFFF', 'rating': 0.0, 'reviews': 0, 'is_sponsored': False, 'is_pickup_today': False, 'product_id': '7L1R4YYVLYOY', 'source': 'Walmart', '_score': 0.0, 'effective_price': 319.44}]}
2025-05-12 20:49:07,138 - DealFinderAI.Controller - INFO - Is follow-up? True
2025-05-12 20:49:07,138 - DealFinderAI.Controller - INFO - Referenced products: 1
2025-05-12 20:49:07,138 - DealFinderAI.Controller - INFO - Handling as follow-up question about 1 products
2025-05-12 20:49:07,138 - DealFinderAI.Controller - INFO - Handling follow-up question: find me latest iphone under 1000 dollar
2025-05-12 20:49:07,139 - DealFinderAI.Controller - INFO - Referenced products: 1
2025-05-12 20:49:07,139 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: 
            I'm a shopping assistant helping a customer with product information.
            
            The customer previously searched for products and is now asking a follow-up question: "find me latest iphone under 1000 dollar"
            
            They're referring to this product:
            {
  "title": "Sony WH-1000XM5 The Best Wireless Noise Canceling Headphones,Black READ!!",
  "price": 120.0,
  "shipping": 0.0,
  "total_price": 120.0,
  "is_free_shipping": true,
  "currency": "USD",
  "url": "https://www.ebay.com/itm/256929236833?_skw=headphones+best+sony+Sony&itmmeta=01JV3HS2GCT67NTHSTY4YMY1C9&hash=item3bd22d0761%3Ag%3AS8wAAOSwgTxoIgPm&itmprp=enc%3AAQAKAAAA8FkggFvd1GGDu0w3yXCmi1fWKc2WmtA0XWoR85OH6guse3cAs34tAal9JL%2Fh2pWvei8j3cvRnppkKW6%2FKSo8yYZvQhMUvR3wpNGSkrczsJFq4hERTIvCVADjNsgZk4k1UxNFNbhArX%2B9BOV9%2FFbN7ZGcy1ap7SWSkVqVf%2BlZIZee4U8SxjYXTHXHdcyHISknndrIp9DOt2%2FSXxKEPAXoAnio3Gmy2R72ZDsaGA9PuKqo%2Bp1N6HhmPSx1leTUAR4OF559GfNI8hdmBO%2BxMlooeztEvgKcyVHNcZHUeXeB9z30atwZ1mOhmcqbITBNYexm7A%3D%3D%7Ctkp%3ABFBMrqjk8dhl&LH_BIN=1",
  "image_url": "",
  "is_sponsored": false,
  "condition": "Parts Only",
  "listing_type": "Buy It Now",
  "seller_rating": 96.9,
  "item_id": "256929236833",
  "source": "eBay",
  "_score": 38.0,
  "effective_price": 120.0
}
            
            Please provide a helpful, conversational response addressing their question
            about this product. Include relevant details from the product information.
            
            If the product is a "best deal", emphasize why it's a good value compared to alternatives.
            If they're asking about comparisons to other products, highlight the key differences.
            If they're asking about specific features, focus on those details.
            
2025-05-12 22:42:57,345 - DealFinderAI - INFO - Logging initialized
2025-05-12 22:42:57,346 - DealFinderAI.Main - INFO - Starting DealFinder AI
2025-05-12 22:42:57,346 - DealFinderAI.Main - INFO - Using LangChain implementation
2025-05-12 22:42:57,346 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-12 22:42:57,346 - DealFinderAI.Controller - INFO - Initialized scraper agents: ['amazon', 'walmart', 'ebay']
2025-05-12 22:42:57,346 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-12 22:42:57,346 - DealFinderAI.Controller - INFO - Initialized scraper agents: ['amazon', 'walmart', 'ebay']
2025-05-12 22:43:34,911 - DealFinderAI.Controller - INFO - Processing user query: find me best deal on apple iphone
2025-05-12 22:43:34,911 - DealFinderAI.ChatMemoryAgent - INFO - Analyzing query: 'find me best deal on apple iphone' for conversation 20250512224257
2025-05-12 22:43:34,911 - DealFinderAI.ChatMemoryAgent - INFO - Current product info: False
2025-05-12 22:43:34,911 - DealFinderAI.ChatMemoryAgent - INFO - No product context available for this conversation
2025-05-12 22:43:34,911 - DealFinderAI.Controller - INFO - Analyze response: {'is_follow_up': False, 'focused_product': None, 'referenced_products': [], 'products': []}
2025-05-12 22:43:34,911 - DealFinderAI.Controller - INFO - Is follow-up? False
2025-05-12 22:43:34,911 - DealFinderAI.Controller - INFO - Referenced products: 0
2025-05-12 22:43:34,911 - DealFinderAI.Controller - INFO - Processing as new search query
2025-05-12 22:43:34,911 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: find me best deal on apple iphone
2025-05-12 22:43:35,919 - DealFinderAI.GeminiAgent - WARNING - Failed to parse Gemini response as JSON: ```json
{
  "product_type": "smartphone",
  "keywords": ["iphone", "apple iphone"],
  "price_range": null,
  "brands": ["Apple"],
  "features": [],
  "sorting_preference": "price_low_to_high",
  "buy_it_now": true
}
```

2025-05-12 22:43:35,920 - DealFinderAI.Controller - INFO - Parsed search parameters: {'product_type': 'smartphone', 'keywords': ['iphone', 'apple iphone'], 'price_range': None, 'brands': ['Apple'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-12 22:43:35,920 - DealFinderAI.AmazonScraperAgent - INFO - Searching Amazon for: {'product_type': 'smartphone', 'keywords': ['iphone', 'apple iphone'], 'price_range': None, 'brands': ['Apple'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-12 22:43:37,299 - DealFinderAI.AmazonScraperAgent - WARNING - Incomplete data for ASIN B0D8K8XBWW, falling back to Gemini extraction.
2025-05-12 22:43:40,355 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B0D8K8XBWW at 0.0 USD
2025-05-12 22:43:40,358 - DealFinderAI.AmazonScraperAgent - WARNING - Incomplete data for ASIN B0D8SBT22L, falling back to Gemini extraction.
2025-05-12 22:43:43,602 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B0D8SBT22L at 0.0 USD
2025-05-12 22:43:43,607 - DealFinderAI.AmazonScraperAgent - WARNING - Incomplete data for ASIN B0D8JBQWQT, falling back to Gemini extraction.
2025-05-12 22:43:46,664 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B0D8JBQWQT at 0.0 USD
2025-05-12 22:43:46,671 - DealFinderAI.AmazonScraperAgent - WARNING - Incomplete data for ASIN B0D8SXN21D, falling back to Gemini extraction.
2025-05-12 22:43:49,865 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B0D8SXN21D at 0.0 USD
2025-05-12 22:43:49,872 - DealFinderAI.AmazonScraperAgent - WARNING - Incomplete data for ASIN B0D8SM2B53, falling back to Gemini extraction.
2025-05-12 22:43:52,889 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B0D8SM2B53 at 0.0 USD
2025-05-12 22:43:54,202 - DealFinderAI.WalmartScraperAgent - INFO - Searching Walmart for: {'product_type': 'smartphone', 'keywords': ['iphone', 'apple iphone'], 'price_range': None, 'brands': ['Apple'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-12 22:43:58,707 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-12 22:43:58,708 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Straight Talk Apple iPhone 16e, 128GB, White - Prepaid Smartphone at 549.0 USD
2025-05-12 22:43:58,708 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Straight Talk Apple iPhone 16e, 128GB, White - Prepaid Smartphone at 549.0 USD
2025-05-12 22:44:01,046 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-12 22:44:01,047 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Straight Talk Apple iPhone 16e, 5G, 128GB, Black - Prepaid Smartphone [Locked to Straight Talk] at 549.0 USD
2025-05-12 22:44:01,047 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Straight Talk Apple iPhone 16e, 5G, 128GB, Black - Prepaid Smartphone [Locked to Straight Talk] at 549.0 USD
2025-05-12 22:44:03,383 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-12 22:44:03,384 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Straight Talk Apple iPhone 15, 128GB, Pink - Prepaid Smartphone at 579.0 USD
2025-05-12 22:44:03,384 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Straight Talk Apple iPhone 15, 128GB, Pink - Prepaid Smartphone at 579.0 USD
2025-05-12 22:44:06,000 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-12 22:44:06,002 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Straight Talk Apple iPhone 15, 128GB, 5G, Black - Prepaid Smartphone [Locked to Straight Talk] at 579.0 USD
2025-05-12 22:44:06,002 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Straight Talk Apple iPhone 15, 128GB, 5G, Black - Prepaid Smartphone [Locked to Straight Talk] at 579.0 USD
2025-05-12 22:44:08,249 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-12 22:44:08,249 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Straight Talk Apple iPhone 15, 128GB, Green - Prepaid Smartphone at 579.0 USD
2025-05-12 22:44:08,249 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Straight Talk Apple iPhone 15, 128GB, Green - Prepaid Smartphone at 579.0 USD
2025-05-12 22:44:08,249 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Straight Talk Apple iPhone 16e, 128GB, White - Prepaid Smartphone at 549.0 USD
2025-05-12 22:44:08,250 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Straight Talk Apple iPhone 16e, 5G, 128GB, Black - Prepaid Smartphone [Locked to Straight Talk] at 549.0 USD
2025-05-12 22:44:08,250 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Straight Talk Apple iPhone 15, 128GB, Pink - Prepaid Smartphone at 579.0 USD
2025-05-12 22:44:08,250 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Straight Talk Apple iPhone 15, 128GB, 5G, Black - Prepaid Smartphone [Locked to Straight Talk] at 579.0 USD
2025-05-12 22:44:08,250 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Straight Talk Apple iPhone 15, 128GB, Green - Prepaid Smartphone at 579.0 USD
2025-05-12 22:44:09,442 - DealFinderAI.EbayScraperAgent - INFO - Searching eBay for: {'product_type': 'smartphone', 'keywords': ['iphone', 'apple iphone'], 'price_range': None, 'brands': ['Apple'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-12 22:44:10,845 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: New Apple iPhone 13 MINI A2481 128/256GB Factory Unlocked All Carrier &Color LOT at 2.49 USD
2025-05-12 22:44:10,845 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: New Apple iPhone 13 MINI A2481 128/256GB Factory Unlocked All Carrier &Color LOT at 2.49 USD
2025-05-12 22:44:10,846 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Clear Case for Apple iPhone 11 Smartphones - Clear at 6.0 USD
2025-05-12 22:44:10,846 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Clear Case for Apple iPhone 11 Smartphones - Clear at 6.0 USD
2025-05-12 22:44:10,846 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: For Apple iPhone 16 15 14 13 12 11 Pro Max Plus Tempered Glass Screen Protector at 7.88 USD
2025-05-12 22:44:10,846 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: For Apple iPhone 16 15 14 13 12 11 Pro Max Plus Tempered Glass Screen Protector at 7.88 USD
2025-05-12 22:44:12,123 - DealFinderAI.ResultsAggregatorAgent - INFO - Aggregating results for query: find me best deal on apple iphone
2025-05-12 22:44:12,123 - DealFinderAI.ResultsAggregatorAgent - INFO - Found 3 results from various sources
2025-05-12 22:44:12,124 - DealFinderAI.ProductComparisonAgent - INFO - Comparing products for query: find me best deal on apple iphone
2025-05-12 22:44:12,124 - DealFinderAI.ProductComparisonAgent - INFO - Found 8 products to compare
2025-05-12 22:44:12,125 - DealFinderAI.ChatMemoryAgent - INFO - Storing context for conversation 20250512224257
2025-05-12 22:44:12,125 - DealFinderAI.ChatMemoryAgent - INFO - Storing 8 products for conversation 20250512224257
2025-05-12 22:44:12,126 - DealFinderAI.PresentationAgent - INFO - Preparing presentation for 8 products
2025-05-12 22:44:12,126 - DealFinderAI.ChatMemoryAgent - INFO - Storing context for conversation 20250512224257
2025-05-12 22:44:12,127 - DealFinderAI.ChatMemoryAgent - INFO - Storing 8 products for conversation 20250512224257
2025-05-12 22:44:12,127 - DealFinderAI.Controller - INFO - Successfully stored search results in memory
2025-05-12 22:46:41,248 - DealFinderAI - INFO - Logging initialized
2025-05-12 22:46:41,249 - DealFinderAI.Main - INFO - Starting DealFinder AI
2025-05-12 22:46:41,249 - DealFinderAI.Main - INFO - Using LangChain implementation
2025-05-12 22:46:41,722 - DealFinderAI.Main - ERROR - Fatal error in main: No module named 'flask_cors'
2025-05-12 22:48:11,548 - DealFinderAI - INFO - Logging initialized
2025-05-12 22:48:11,549 - DealFinderAI.Main - INFO - Starting DealFinder AI
2025-05-12 22:48:11,549 - DealFinderAI.Main - INFO - Using LangChain implementation
2025-05-12 22:48:11,587 - DealFinderAI.Main - ERROR - Fatal error in main: No module named 'flask_cors'
2025-05-12 22:48:36,126 - DealFinderAI - INFO - Logging initialized
2025-05-12 22:48:36,126 - DealFinderAI.Main - INFO - Starting DealFinder AI
2025-05-12 22:48:36,126 - DealFinderAI.Main - INFO - Using LangChain implementation
2025-05-12 22:48:36,165 - DealFinderAI.Main - ERROR - Fatal error in main: No module named 'flask_cors'
2025-05-12 22:48:46,887 - DealFinderAI - INFO - Logging initialized
2025-05-12 22:48:46,888 - DealFinderAI.Main - INFO - Starting DealFinder AI
2025-05-12 22:48:46,888 - DealFinderAI.Main - INFO - Using LangChain implementation
2025-05-12 22:48:46,927 - DealFinderAI.Main - ERROR - Fatal error in main: No module named 'flask_cors'
2025-05-12 22:49:58,098 - DealFinderAI - INFO - Logging initialized
2025-05-12 22:49:58,099 - DealFinderAI.Main - INFO - Starting DealFinder AI
2025-05-12 22:49:58,099 - DealFinderAI.Main - INFO - Using LangChain implementation
2025-05-12 22:49:58,139 - DealFinderAI.Main - ERROR - Fatal error in main: No module named 'flask_cors'
2025-05-12 22:53:42,777 - DealFinderAI - INFO - Logging initialized
2025-05-12 22:53:42,777 - DealFinderAI.Main - INFO - Starting DealFinder AI
2025-05-12 22:53:42,777 - DealFinderAI.Main - INFO - Using LangChain implementation
2025-05-12 22:53:42,819 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-12 22:53:42,819 - DealFinderAI.Controller - INFO - Initialized scraper agents: ['amazon', 'walmart', 'ebay']
2025-05-12 22:53:42,819 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-12 22:53:42,819 - DealFinderAI.Controller - INFO - Initialized scraper agents: ['amazon', 'walmart', 'ebay']
2025-05-12 22:53:42,819 - DealFinderAI.Main - INFO - Web app using LangChain implementation with Gemini model
2025-05-12 22:53:43,119 - DealFinderAI - INFO - Logging initialized
2025-05-12 22:53:43,119 - DealFinderAI.Main - INFO - Starting DealFinder AI
2025-05-12 22:53:43,119 - DealFinderAI.Main - INFO - Using LangChain implementation
2025-05-12 22:53:43,151 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-12 22:53:43,151 - DealFinderAI.Controller - INFO - Initialized scraper agents: ['amazon', 'walmart', 'ebay']
2025-05-12 22:53:43,151 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-12 22:53:43,151 - DealFinderAI.Controller - INFO - Initialized scraper agents: ['amazon', 'walmart', 'ebay']
2025-05-12 22:53:43,151 - DealFinderAI.Main - INFO - Web app using LangChain implementation with Gemini model
2025-05-12 22:55:37,822 - DealFinderAI - INFO - Logging initialized
2025-05-12 22:55:37,823 - DealFinderAI.Main - INFO - Starting DealFinder AI
2025-05-12 22:55:37,823 - DealFinderAI.Main - INFO - Using LangChain implementation
2025-05-12 22:55:37,861 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-12 22:55:37,861 - DealFinderAI.Controller - INFO - Initialized scraper agents: ['amazon', 'walmart', 'ebay']
2025-05-12 22:55:37,862 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-12 22:55:37,862 - DealFinderAI.Controller - INFO - Initialized scraper agents: ['amazon', 'walmart', 'ebay']
2025-05-12 22:55:37,862 - DealFinderAI.Main - INFO - Web app using LangChain implementation with Gemini model
2025-05-12 22:55:55,262 - DealFinderAI - INFO - Logging initialized
2025-05-12 22:55:55,263 - DealFinderAI.Main - INFO - Starting DealFinder AI
2025-05-12 22:55:55,263 - DealFinderAI.Main - INFO - Using LangChain implementation
2025-05-12 22:55:55,300 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-12 22:55:55,300 - DealFinderAI.Controller - INFO - Initialized scraper agents: ['amazon', 'walmart', 'ebay']
2025-05-12 22:55:55,300 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-12 22:55:55,300 - DealFinderAI.Controller - INFO - Initialized scraper agents: ['amazon', 'walmart', 'ebay']
2025-05-12 22:55:55,300 - DealFinderAI.Main - INFO - Web app using LangChain implementation with Gemini model
2025-05-12 22:55:55,552 - DealFinderAI - INFO - Logging initialized
2025-05-12 22:55:55,553 - DealFinderAI.Main - INFO - Starting DealFinder AI
2025-05-12 22:55:55,553 - DealFinderAI.Main - INFO - Using LangChain implementation
2025-05-12 22:55:55,579 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-12 22:55:55,579 - DealFinderAI.Controller - INFO - Initialized scraper agents: ['amazon', 'walmart', 'ebay']
2025-05-12 22:55:55,579 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-12 22:55:55,579 - DealFinderAI.Controller - INFO - Initialized scraper agents: ['amazon', 'walmart', 'ebay']
2025-05-12 22:55:55,579 - DealFinderAI.Main - INFO - Web app using LangChain implementation with Gemini model
2025-05-12 22:56:08,456 - DealFinderAI.Controller - INFO - Processing user query: hi
2025-05-12 22:56:08,457 - DealFinderAI.ChatMemoryAgent - INFO - Analyzing query: 'hi' for conversation 20250508213250
2025-05-12 22:56:08,457 - DealFinderAI.ChatMemoryAgent - INFO - Current product info: False
2025-05-12 22:56:08,457 - DealFinderAI.ChatMemoryAgent - INFO - No product context available for this conversation
2025-05-12 22:56:08,457 - DealFinderAI.Controller - INFO - Analyze response: {'is_follow_up': False, 'focused_product': None, 'referenced_products': [], 'products': []}
2025-05-12 22:56:08,457 - DealFinderAI.Controller - INFO - Is follow-up? False
2025-05-12 22:56:08,457 - DealFinderAI.Controller - INFO - Referenced products: 0
2025-05-12 22:56:08,458 - DealFinderAI.Controller - INFO - Processing as new search query
2025-05-12 22:56:08,458 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: hi
2025-05-12 22:56:09,536 - DealFinderAI.GeminiAgent - WARNING - Failed to parse Gemini response as JSON: ```json
{
  "product_type": null,
  "keywords": [],
  "price_range": null,
  "brands": [],
  "features": [],
  "sorting_preference": null,
  "buy_it_now": null
}
```

2025-05-12 22:56:09,536 - DealFinderAI.Controller - INFO - Parsed search parameters: {'keywords': ['hi']}
2025-05-12 22:56:09,536 - DealFinderAI.AmazonScraperAgent - INFO - Searching Amazon for: {'keywords': ['hi']}
2025-05-12 22:56:11,461 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B09QW6LPGV at 17.99 USD
2025-05-12 22:56:11,463 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B08F4MVQ7B at 8.52 USD
2025-05-12 22:56:11,465 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B07DYLRCGW at 23.88 USD
2025-05-12 22:56:11,467 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B0BXBHW6Z2 at 10.99 USD
2025-05-12 22:56:11,469 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B074N7KTJK at 20.96 USD
2025-05-12 22:56:12,126 - DealFinderAI.WalmartScraperAgent - INFO - Searching Walmart for: {'keywords': ['hi']}
2025-05-12 22:56:17,726 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-12 22:56:17,727 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Hi Chew 17 Flavors, Bulk 330+ Pieces, 4 Pound (Strawberry, Mango, Green Apple, Grape, Pineapple, Kiwi, Dragon Fruit, Ramune, Cola, 3 Yogurt, Grapefruit, Lemon, Watermelon) at 44.0 USD
2025-05-12 22:56:17,727 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Hi Chew 17 Flavors, Bulk 330+ Pieces, 4 Pound (Strawberry, Mango, Green Apple, Grape, Pineapple, Kiwi, Dragon Fruit, Ramune, Cola, 3 Yogurt, Grapefruit, Lemon, Watermelon) at 44.0 USD
2025-05-12 22:56:20,616 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-12 22:56:20,616 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Hi-C Flashin Fruit Punch Juice, 6 fl oz, 8 Juice Boxes at 2.54 USD
2025-05-12 22:56:20,617 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Hi-C Flashin Fruit Punch Juice, 6 fl oz, 8 Juice Boxes at 2.54 USD
2025-05-12 22:56:23,459 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-12 22:56:23,463 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Hi-C Orange Lavaburst Fruit Juice, 6 fl oz, 8 Juice Boxes at 2.54 USD
2025-05-12 22:56:23,463 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Hi-C Orange Lavaburst Fruit Juice, 6 fl oz, 8 Juice Boxes at 2.54 USD
2025-05-12 22:56:25,498 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-12 22:56:25,498 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Hi! (Paperback) at 5.49 USD
2025-05-12 22:56:25,498 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Hi! (Paperback) at 5.49 USD
2025-05-12 22:56:28,463 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-12 22:56:28,463 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Hi-C 100% Vitamin C Boppin Strawberry Fruit Juice, 6 fl oz, 8 Juice Boxes at 2.54 USD
2025-05-12 22:56:28,463 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Hi-C 100% Vitamin C Boppin Strawberry Fruit Juice, 6 fl oz, 8 Juice Boxes at 2.54 USD
2025-05-12 22:56:28,463 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Hi Chew 17 Flavors, Bulk 330+ Pieces, 4 Pound (Strawberry, Mango, Green Apple, Grape, Pineapple, Kiwi, Dragon Fruit, Ramune, Cola, 3 Yogurt, Grapefruit, Lemon, Watermelon) at 44.0 USD
2025-05-12 22:56:28,463 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Hi-C Flashin Fruit Punch Juice, 6 fl oz, 8 Juice Boxes at 2.54 USD
2025-05-12 22:56:28,463 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Hi-C Orange Lavaburst Fruit Juice, 6 fl oz, 8 Juice Boxes at 2.54 USD
2025-05-12 22:56:28,463 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Hi! (Paperback) at 5.49 USD
2025-05-12 22:56:28,463 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Hi-C 100% Vitamin C Boppin Strawberry Fruit Juice, 6 fl oz, 8 Juice Boxes at 2.54 USD
2025-05-12 22:56:29,350 - DealFinderAI.EbayScraperAgent - INFO - Searching eBay for: {'keywords': ['hi']}
2025-05-12 22:56:31,157 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: adidas men Short Sleeve Pregame Badge of Sport Tee at 16.0 USD
2025-05-12 22:56:31,158 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: NEW REEBOK Royal BB4500 HI2 Sneakers Basketball Shoes Men's 8 Black at 54.69 USD
2025-05-12 22:56:31,158 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: NEW REEBOK Royal BB4500 HI2 Sneakers Basketball Shoes Men's 8 Black at 54.69 USD
2025-05-12 22:56:31,159 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Vans Comfycush Sk8-HI VN0A3WMBVNE Mens Black Skate Inspired Sneakers Shoes at 42.29 USD
2025-05-12 22:56:31,159 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Vans Comfycush Sk8-HI VN0A3WMBVNE Mens Black Skate Inspired Sneakers Shoes at 42.29 USD
2025-05-12 22:56:31,896 - DealFinderAI.ResultsAggregatorAgent - INFO - Aggregating results for query: hi
2025-05-12 22:56:31,896 - DealFinderAI.ResultsAggregatorAgent - INFO - Found 3 results from various sources
2025-05-12 22:56:31,897 - DealFinderAI.ProductComparisonAgent - INFO - Comparing products for query: hi
2025-05-12 22:56:31,897 - DealFinderAI.ProductComparisonAgent - INFO - Found 7 products to compare
2025-05-12 22:56:31,897 - DealFinderAI.ChatMemoryAgent - INFO - Storing context for conversation 20250508213250
2025-05-12 22:56:31,898 - DealFinderAI.ChatMemoryAgent - INFO - Storing 7 products for conversation 20250508213250
2025-05-12 22:56:31,898 - DealFinderAI.PresentationAgent - INFO - Preparing presentation for 7 products
2025-05-12 22:56:31,898 - DealFinderAI.ChatMemoryAgent - INFO - Storing context for conversation 20250508213250
2025-05-12 22:56:31,898 - DealFinderAI.ChatMemoryAgent - INFO - Storing 7 products for conversation 20250508213250
2025-05-12 22:56:31,898 - DealFinderAI.Controller - INFO - Successfully stored search results in memory
2025-05-12 23:05:57,092 - DealFinderAI - INFO - Logging initialized
2025-05-12 23:05:57,093 - DealFinderAI.Main - INFO - Starting DealFinder AI
2025-05-12 23:05:57,093 - DealFinderAI.Main - INFO - Using LangChain implementation
2025-05-12 23:05:57,132 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-12 23:05:57,132 - DealFinderAI.Controller - INFO - Initialized scraper agents: ['amazon', 'walmart', 'ebay']
2025-05-12 23:05:57,132 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-12 23:05:57,132 - DealFinderAI.Controller - INFO - Initialized scraper agents: ['amazon', 'walmart', 'ebay']
2025-05-12 23:05:57,132 - DealFinderAI.Main - INFO - Web app using LangChain implementation with Gemini model
2025-05-12 23:05:57,435 - DealFinderAI - INFO - Logging initialized
2025-05-12 23:05:57,436 - DealFinderAI.Main - INFO - Starting DealFinder AI
2025-05-12 23:05:57,436 - DealFinderAI.Main - INFO - Using LangChain implementation
2025-05-12 23:05:57,463 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-12 23:05:57,463 - DealFinderAI.Controller - INFO - Initialized scraper agents: ['amazon', 'walmart', 'ebay']
2025-05-12 23:05:57,463 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-12 23:05:57,463 - DealFinderAI.Controller - INFO - Initialized scraper agents: ['amazon', 'walmart', 'ebay']
2025-05-12 23:05:57,463 - DealFinderAI.Main - INFO - Web app using LangChain implementation with Gemini model
2025-05-12 23:06:10,635 - DealFinderAI.Main - INFO - Toggled LangChain integration to: False
2025-05-12 23:06:35,341 - DealFinderAI.Controller - INFO - Processing user query: find me best sony headphones
2025-05-12 23:06:35,342 - DealFinderAI.ChatMemoryAgent - INFO - Analyzing query: 'find me best sony headphones' for conversation session_20250512230602_1988a3a8
2025-05-12 23:06:35,342 - DealFinderAI.ChatMemoryAgent - INFO - Current product info: False
2025-05-12 23:06:35,342 - DealFinderAI.ChatMemoryAgent - INFO - No product context available for this conversation
2025-05-12 23:06:35,342 - DealFinderAI.Controller - INFO - Analyze response: {'is_follow_up': False, 'focused_product': None, 'referenced_products': [], 'products': []}
2025-05-12 23:06:35,342 - DealFinderAI.Controller - INFO - Is follow-up? False
2025-05-12 23:06:35,342 - DealFinderAI.Controller - INFO - Referenced products: 0
2025-05-12 23:06:35,342 - DealFinderAI.Controller - INFO - Processing as new search query
2025-05-12 23:06:35,343 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: find me best sony headphones
2025-05-12 23:06:36,486 - DealFinderAI.GeminiAgent - WARNING - Failed to parse Gemini response as JSON: ```json
{
  "product_type": "headphones",
  "keywords": ["sony", "best"],
  "price_range": null,
  "brands": ["sony"],
  "features": [],
  "sorting_preference": null,
  "buy_it_now": true
}
```

2025-05-12 23:06:36,486 - DealFinderAI.Controller - INFO - Parsed search parameters: {'product_type': 'headphones', 'keywords': ['sony', 'best'], 'price_range': None, 'brands': ['sony'], 'features': [], 'sorting_preference': None, 'buy_it_now': True}
2025-05-12 23:06:36,486 - DealFinderAI.AmazonScraperAgent - INFO - Searching Amazon for: {'product_type': 'headphones', 'keywords': ['sony', 'best'], 'price_range': None, 'brands': ['sony'], 'features': [], 'sorting_preference': None, 'buy_it_now': True}
2025-05-12 23:06:38,203 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B0CFV9XR2Q at 16.99 USD
2025-05-12 23:06:38,206 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B0BPXXPSBR at 119.99 USD
2025-05-12 23:06:38,210 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B0863TXGM3 at 298.0 USD
2025-05-12 23:06:38,212 - DealFinderAI.AmazonScraperAgent - WARNING - Incomplete data for ASIN B0BS1QCFHX, falling back to Gemini extraction.
2025-05-12 23:06:41,783 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B0BS1QCFHX at 0.0 USD
2025-05-12 23:06:41,786 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B000AJIF4E at 98.0 USD
2025-05-12 23:06:43,027 - DealFinderAI.WalmartScraperAgent - INFO - Searching Walmart for: {'product_type': 'headphones', 'keywords': ['sony', 'best'], 'price_range': None, 'brands': ['sony'], 'features': [], 'sorting_preference': None, 'buy_it_now': True}
2025-05-12 23:06:47,784 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-12 23:06:47,784 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Sony WH-1000XM5 The Best Wireless Noise Canceling Headphones, Black at 319.44 USD
2025-05-12 23:06:47,784 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Sony WH-1000XM5 The Best Wireless Noise Canceling Headphones, Black at 319.44 USD
2025-05-12 23:06:50,682 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-12 23:06:50,682 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Open Box Sony WH-1000XM4 Wireless Premium Noise Canceling Overhead Headphones with Mic for Phone Call and Alexa Voice Control, Black at 234.99 USD
2025-05-12 23:06:50,682 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Open Box Sony WH-1000XM4 Wireless Premium Noise Canceling Overhead Headphones with Mic for Phone Call and Alexa Voice Control, Black at 234.99 USD
2025-05-12 23:06:53,097 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-12 23:06:53,097 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Sony WH-1000XM5 The Best Wireless Noise Canceling Headphones, Black at 319.44 USD
2025-05-12 23:06:53,097 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Sony WH-1000XM5 The Best Wireless Noise Canceling Headphones, Black at 319.44 USD
2025-05-12 23:06:55,796 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-12 23:06:55,797 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Sony WF-C510 Truly Wireless Earbud Headphones, Black at 45.9 USD
2025-05-12 23:06:55,797 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Sony WF-C510 Truly Wireless Earbud Headphones, Black at 45.9 USD
2025-05-12 23:06:58,213 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-12 23:06:58,214 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Sony WF-1000XM5 Wireless Over-Ear Noise Canceling Headphones (Pink) at 288.49 USD
2025-05-12 23:06:58,214 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Sony WF-1000XM5 Wireless Over-Ear Noise Canceling Headphones (Pink) at 288.49 USD
2025-05-12 23:06:58,215 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Sony WH-1000XM5 The Best Wireless Noise Canceling Headphones, Black at 319.44 USD
2025-05-12 23:06:58,215 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Sony WH-1000XM5 The Best Wireless Noise Canceling Headphones, Black at 319.44 USD
2025-05-12 23:06:58,751 - DealFinderAI.EbayScraperAgent - INFO - Searching eBay for: {'product_type': 'headphones', 'keywords': ['sony', 'best'], 'price_range': None, 'brands': ['sony'], 'features': [], 'sorting_preference': None, 'buy_it_now': True}
2025-05-12 23:06:59,894 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Sony WF-1000XM5 The Best Truly Wireless Bluetooth Earbuds Headphones - Black at 139.99 USD
2025-05-12 23:06:59,894 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Sony WF-1000XM5 The Best Truly Wireless Bluetooth Earbuds Headphones - Black at 139.99 USD
2025-05-12 23:06:59,895 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Sony WH-1000XM5 The Best Wireless Noise Canceling Headphones,Black READ!! at 120.0 USD
2025-05-12 23:06:59,895 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Sony WH-1000XM5 The Best Wireless Noise Canceling Headphones,Black READ!! at 120.0 USD
2025-05-12 23:06:59,896 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Sony WH-1000XM5 The Best Wireless Auto Noise Canceling Headphones Optimizer at 299.95 USD
2025-05-12 23:06:59,896 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Sony WH-1000XM5 The Best Wireless Auto Noise Canceling Headphones Optimizer at 299.95 USD
2025-05-12 23:07:01,320 - DealFinderAI.ResultsAggregatorAgent - INFO - Aggregating results for query: find me best sony headphones
2025-05-12 23:07:01,320 - DealFinderAI.ResultsAggregatorAgent - INFO - Found 3 results from various sources
2025-05-12 23:07:01,320 - DealFinderAI.ProductComparisonAgent - INFO - Comparing products for query: find me best sony headphones
2025-05-12 23:07:01,320 - DealFinderAI.ProductComparisonAgent - INFO - Found 5 products to compare
2025-05-12 23:07:01,320 - DealFinderAI.ChatMemoryAgent - INFO - Storing context for conversation session_20250512230602_1988a3a8
2025-05-12 23:07:01,321 - DealFinderAI.ChatMemoryAgent - INFO - Storing 5 products for conversation session_20250512230602_1988a3a8
2025-05-12 23:07:01,321 - DealFinderAI.PresentationAgent - INFO - Preparing presentation for 5 products
2025-05-12 23:07:01,321 - DealFinderAI.ChatMemoryAgent - INFO - Storing context for conversation session_20250512230602_1988a3a8
2025-05-12 23:07:01,321 - DealFinderAI.ChatMemoryAgent - INFO - Storing 5 products for conversation session_20250512230602_1988a3a8
2025-05-12 23:07:01,321 - DealFinderAI.Controller - INFO - Successfully stored search results in memory
2025-05-12 23:07:35,353 - DealFinderAI.Controller - INFO - Processing user query: tell me more about 3rd product
2025-05-12 23:07:35,353 - DealFinderAI.ChatMemoryAgent - INFO - Analyzing query: 'tell me more about 3rd product' for conversation session_20250512230602_1988a3a8
2025-05-12 23:07:35,353 - DealFinderAI.ChatMemoryAgent - INFO - Current product info: True
2025-05-12 23:07:35,353 - DealFinderAI.ChatMemoryAgent - INFO - Number of products in memory: 5
2025-05-12 23:07:35,353 - DealFinderAI.ChatMemoryAgent - INFO - Found 5 products in memory
2025-05-12 23:07:35,353 - DealFinderAI.ChatMemoryAgent - INFO - Follow-up analysis: True, Referenced products: 1
2025-05-12 23:07:35,353 - DealFinderAI.Controller - INFO - Analyze response: {'is_follow_up': True, 'focused_product': None, 'referenced_products': [{'title': 'Sony WH-1000XM5 The Best Wireless Auto Noise Canceling Headphones Optimizer', 'price': 299.95, 'shipping': 0.0, 'total_price': 299.95, 'is_free_shipping': True, 'currency': 'USD', 'url': 'https://www.ebay.com/itm/235720395134?_skw=headphones+sony+best+sony&itmmeta=01JV3SR7J8XSX733WE78TSSF42&hash=item36e207c97e%3Ag%3A5GQAAOSw6jJm0SLC&itmprp=enc%3AAQAKAAAA8FkggFvd1GGDu0w3yXCmi1fc6LwlPEiKNSm4y6vXwq%2FNwkOTh%2FRWfeRaSmfW9s0HMFDtEk3sRqvxj3qJ6gF8Y82eIZO%2Bjq5Vh0SFLm44F5yjNqCMgihAI6JnCd%2FKgYLeqvmulp3EV1jJhEGGX6Mj4IZwRnAP%2BklapI2gmwbGesZk1ZZgHrnpMySMXgA7OOhchAP5duE0DEc1HU7Q9wE%2F0Sy0wsEpgqPtUSpDo6kjpzVIHqalL1k4RRSLQWSOE%2BeJXjlqOvDcEWJ2zbeUr4ClvSuZQaDmQW7ZYWs%2FITYMlcDBJIT5O6%2BrAM02JjL%2FJRCzUw%3D%3D%7Ctkp%3ABFBMnvng-dhl&LH_BIN=1', 'image_url': '', 'is_sponsored': False, 'condition': 'Brand New', 'listing_type': 'Buy It Now', 'seller_rating': 98.2, 'item_id': '235720395134', 'source': 'eBay', '_score': 30.005000000000003, 'effective_price': 299.95}], 'products': [{'title': 'Sony WH-1000XM5 The Best Wireless Noise Canceling Headphones,Black READ!!', 'price': 120.0, 'shipping': 0.0, 'total_price': 120.0, 'is_free_shipping': True, 'currency': 'USD', 'url': 'https://www.ebay.com/itm/256929236833?_skw=headphones+sony+best+sony&itmmeta=01JV3SR7J8YJ0J324Q1DA6AR0Y&hash=item3bd22d0761%3Ag%3AS8wAAOSwgTxoIgPm&itmprp=enc%3AAQAKAAAA8FkggFvd1GGDu0w3yXCmi1fWKc2WmtA0XWoR85OH6guse3cAs34tAal9JL%2Fh2pWvei8j3cvRnppkKW6%2FKSo8yYZvQhMUvR3wpNGSkrczsJFq4hERTIvCVADjNsgZk4k1UxNFNbhArX%2B9BOV9%2FFbN7ZHW%2BSUYQMIwwCme%2BqQ9YwSnix%2BCqo9EV9jnh4a9uZqRR%2BnSfe3fx9YnlYRlVpIvovhAJlLNczt9%2Fr2g0Z8Q5VzWFEhkukC%2FRI2vLhR1AoTfoZhwCR0wukQW82iLu3CwMR%2FlkGMbfhakAJbxai97bRUHj6%2B4vWE9YhhBYg8gfnuDyA%3D%3D%7Ctkp%3ABFBMnvng-dhl&LH_BIN=1', 'image_url': '', 'is_sponsored': False, 'condition': 'Parts Only', 'listing_type': 'Buy It Now', 'seller_rating': 96.9, 'item_id': '256929236833', 'source': 'eBay', '_score': 38.0, 'effective_price': 120.0}, {'title': 'Sony WF-1000XM5 The Best Truly Wireless Bluetooth Earbuds Headphones - Black', 'price': 139.99, 'shipping': 0.0, 'total_price': 139.99, 'is_free_shipping': True, 'currency': 'USD', 'url': 'https://www.ebay.com/itm/256853907827?_skw=headphones+sony+best+sony&itmmeta=01JV3SR7J7WJ36AMZ5NXHX11R9&hash=item3bcdaf9973%3Ag%3A41EAAOSwDFln0Txs&itmprp=enc%3AAQAKAAABAFkggFvd1GGDu0w3yXCmi1eDHCY2ER51Urg5UlV%2B56m4ZdNkT7hrfgw2ipF8%2Fa8uHK7uJuFeHnkvXCtGV1eBA%2BNiXtxsHBFeYAJ3Wby2iUvUi7awKrpRiQICJcmzJeuYQsPdGO9DjzO%2Br71hb%2B8HFA2Ox5zHXi1qh9TiLhnI4uC34T04sCSBe8hEewHuYnbxk1JWelSxiiGy3uHUqNb783WnGXr4o5daMjUPXC2fM5ojbRI68Zu4XadqFlHSra2J%2F%2B1GgGAC9PMRRrP4Mg9uw2NA2HwvD2c5Avqun%2FFhigK94J66SzjrQ0e%2F0ZPiyQuZvAiEnBOseVhkVRV05PuKK1E%3D%7Ctkp%3ABFBMnvng-dhl&LH_BIN=1', 'image_url': '', 'is_sponsored': False, 'condition': 'Pre-Owned', 'listing_type': 'Buy It Now', 'seller_rating': 100.0, 'item_id': '256853907827', 'source': 'eBay', '_score': 36.001}, {'title': 'Sony WH-1000XM5 The Best Wireless Auto Noise Canceling Headphones Optimizer', 'price': 299.95, 'shipping': 0.0, 'total_price': 299.95, 'is_free_shipping': True, 'currency': 'USD', 'url': 'https://www.ebay.com/itm/235720395134?_skw=headphones+sony+best+sony&itmmeta=01JV3SR7J8XSX733WE78TSSF42&hash=item36e207c97e%3Ag%3A5GQAAOSw6jJm0SLC&itmprp=enc%3AAQAKAAAA8FkggFvd1GGDu0w3yXCmi1fc6LwlPEiKNSm4y6vXwq%2FNwkOTh%2FRWfeRaSmfW9s0HMFDtEk3sRqvxj3qJ6gF8Y82eIZO%2Bjq5Vh0SFLm44F5yjNqCMgihAI6JnCd%2FKgYLeqvmulp3EV1jJhEGGX6Mj4IZwRnAP%2BklapI2gmwbGesZk1ZZgHrnpMySMXgA7OOhchAP5duE0DEc1HU7Q9wE%2F0Sy0wsEpgqPtUSpDo6kjpzVIHqalL1k4RRSLQWSOE%2BeJXjlqOvDcEWJ2zbeUr4ClvSuZQaDmQW7ZYWs%2FITYMlcDBJIT5O6%2BrAM02JjL%2FJRCzUw%3D%3D%7Ctkp%3ABFBMnvng-dhl&LH_BIN=1', 'image_url': '', 'is_sponsored': False, 'condition': 'Brand New', 'listing_type': 'Buy It Now', 'seller_rating': 98.2, 'item_id': '235720395134', 'source': 'eBay', '_score': 30.005000000000003, 'effective_price': 299.95}, {'title': 'Sony WH-1000XM5 The Best Wireless Noise Canceling Headphones, Black', 'price': 319.44, 'currency': 'USD', 'url': 'https://www.walmart.com/ip/Sony-WH-1000XM5-The-Best-Wireless-Noise-Canceling-Headphones-Black/386006068?classType=VARIANT&adsRedirect=true', 'image_url': 'https://i5.walmartimages.com/seo/Sony-WH-1000XM5-The-Best-Wireless-Noise-Canceling-Headphones-Black_7384c879-1d54-47e8-9876-1d7adadcf0a5.542c245c25d295b30fa5820eacea4450.jpeg?odnHeight=580&odnWidth=580&odnBg=FFFFFF', 'rating': 0.0, 'reviews': 0, 'is_sponsored': False, 'is_pickup_today': False, 'product_id': '2P9FP9H47OOW', 'source': 'Walmart', '_score': 0.0, 'effective_price': 319.44}, {'title': 'Sony WH-1000XM5 The Best Wireless Noise Canceling Headphones, Black', 'price': 319.44, 'currency': 'USD', 'url': '/ip/Sony-WH-1000XM5-The-Best-Wireless-Noise-Canceling-Headphones-Black/386006068?classType=VARIANT&from=/search', 'image_url': 'https://i5.walmartimages.com/seo/Sony-WH-1000XM5-The-Best-Wireless-Noise-Canceling-Headphones-Black_7384c879-1d54-47e8-9876-1d7adadcf0a5.542c245c25d295b30fa5820eacea4450.jpeg?odnHeight=580&odnWidth=580&odnBg=FFFFFF', 'rating': 0.0, 'reviews': 0, 'is_sponsored': False, 'is_pickup_today': False, 'product_id': '7L1R4YYVLYOY', 'source': 'Walmart', '_score': 0.0, 'effective_price': 319.44}]}
2025-05-12 23:07:35,353 - DealFinderAI.Controller - INFO - Is follow-up? True
2025-05-12 23:07:35,353 - DealFinderAI.Controller - INFO - Referenced products: 1
2025-05-12 23:07:35,353 - DealFinderAI.Controller - INFO - Handling as follow-up question about 1 products
2025-05-12 23:07:35,353 - DealFinderAI.Controller - INFO - Handling follow-up question: tell me more about 3rd product
2025-05-12 23:07:35,353 - DealFinderAI.Controller - INFO - Referenced products: 1
2025-05-12 23:07:35,353 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: 
            I'm a shopping assistant helping a customer with product information.
            
            The customer previously searched for products and is now asking a follow-up question: "tell me more about 3rd product"
            
            They're referring to this product:
            {
  "title": "Sony WH-1000XM5 The Best Wireless Auto Noise Canceling Headphones Optimizer",
  "price": 299.95,
  "shipping": 0.0,
  "total_price": 299.95,
  "is_free_shipping": true,
  "currency": "USD",
  "url": "https://www.ebay.com/itm/235720395134?_skw=headphones+sony+best+sony&itmmeta=01JV3SR7J8XSX733WE78TSSF42&hash=item36e207c97e%3Ag%3A5GQAAOSw6jJm0SLC&itmprp=enc%3AAQAKAAAA8FkggFvd1GGDu0w3yXCmi1fc6LwlPEiKNSm4y6vXwq%2FNwkOTh%2FRWfeRaSmfW9s0HMFDtEk3sRqvxj3qJ6gF8Y82eIZO%2Bjq5Vh0SFLm44F5yjNqCMgihAI6JnCd%2FKgYLeqvmulp3EV1jJhEGGX6Mj4IZwRnAP%2BklapI2gmwbGesZk1ZZgHrnpMySMXgA7OOhchAP5duE0DEc1HU7Q9wE%2F0Sy0wsEpgqPtUSpDo6kjpzVIHqalL1k4RRSLQWSOE%2BeJXjlqOvDcEWJ2zbeUr4ClvSuZQaDmQW7ZYWs%2FITYMlcDBJIT5O6%2BrAM02JjL%2FJRCzUw%3D%3D%7Ctkp%3ABFBMnvng-dhl&LH_BIN=1",
  "image_url": "",
  "is_sponsored": false,
  "condition": "Brand New",
  "listing_type": "Buy It Now",
  "seller_rating": 98.2,
  "item_id": "235720395134",
  "source": "eBay",
  "_score": 30.005000000000003,
  "effective_price": 299.95
}
            
            Please provide a helpful, conversational response addressing their question
            about this product. Include relevant details from the product information.
            
            If the product is a "best deal", emphasize why it's a good value compared to alternatives.
            If they're asking about comparisons to other products, highlight the key differences.
            If they're asking about specific features, focus on those details.
            
2025-05-12 23:09:27,527 - DealFinderAI.Main - INFO - Toggled LangChain integration to: True
2025-05-12 23:09:48,086 - DealFinderAI.Controller - INFO - Processing user query: find me best deal on sony headphones
2025-05-12 23:09:48,087 - DealFinderAI.ChatMemoryAgent - INFO - Analyzing query: 'find me best deal on sony headphones' for conversation session_20250512230602_1988a3a8
2025-05-12 23:09:48,087 - DealFinderAI.ChatMemoryAgent - INFO - Current product info: True
2025-05-12 23:09:48,087 - DealFinderAI.ChatMemoryAgent - INFO - Number of products in memory: 5
2025-05-12 23:09:48,087 - DealFinderAI.ChatMemoryAgent - INFO - Found 5 products in memory
2025-05-12 23:09:48,087 - DealFinderAI.ChatMemoryAgent - INFO - Follow-up analysis: True, Referenced products: 1
2025-05-12 23:09:48,087 - DealFinderAI.Controller - INFO - Analyze response: {'is_follow_up': True, 'focused_product': 0, 'referenced_products': [{'title': 'Sony WH-1000XM5 The Best Wireless Noise Canceling Headphones,Black READ!!', 'price': 120.0, 'shipping': 0.0, 'total_price': 120.0, 'is_free_shipping': True, 'currency': 'USD', 'url': 'https://www.ebay.com/itm/256929236833?_skw=headphones+sony+best+sony&itmmeta=01JV3SR7J8YJ0J324Q1DA6AR0Y&hash=item3bd22d0761%3Ag%3AS8wAAOSwgTxoIgPm&itmprp=enc%3AAQAKAAAA8FkggFvd1GGDu0w3yXCmi1fWKc2WmtA0XWoR85OH6guse3cAs34tAal9JL%2Fh2pWvei8j3cvRnppkKW6%2FKSo8yYZvQhMUvR3wpNGSkrczsJFq4hERTIvCVADjNsgZk4k1UxNFNbhArX%2B9BOV9%2FFbN7ZHW%2BSUYQMIwwCme%2BqQ9YwSnix%2BCqo9EV9jnh4a9uZqRR%2BnSfe3fx9YnlYRlVpIvovhAJlLNczt9%2Fr2g0Z8Q5VzWFEhkukC%2FRI2vLhR1AoTfoZhwCR0wukQW82iLu3CwMR%2FlkGMbfhakAJbxai97bRUHj6%2B4vWE9YhhBYg8gfnuDyA%3D%3D%7Ctkp%3ABFBMnvng-dhl&LH_BIN=1', 'image_url': '', 'is_sponsored': False, 'condition': 'Parts Only', 'listing_type': 'Buy It Now', 'seller_rating': 96.9, 'item_id': '256929236833', 'source': 'eBay', '_score': 38.0, 'effective_price': 120.0}], 'products': [{'title': 'Sony WH-1000XM5 The Best Wireless Noise Canceling Headphones,Black READ!!', 'price': 120.0, 'shipping': 0.0, 'total_price': 120.0, 'is_free_shipping': True, 'currency': 'USD', 'url': 'https://www.ebay.com/itm/256929236833?_skw=headphones+sony+best+sony&itmmeta=01JV3SR7J8YJ0J324Q1DA6AR0Y&hash=item3bd22d0761%3Ag%3AS8wAAOSwgTxoIgPm&itmprp=enc%3AAQAKAAAA8FkggFvd1GGDu0w3yXCmi1fWKc2WmtA0XWoR85OH6guse3cAs34tAal9JL%2Fh2pWvei8j3cvRnppkKW6%2FKSo8yYZvQhMUvR3wpNGSkrczsJFq4hERTIvCVADjNsgZk4k1UxNFNbhArX%2B9BOV9%2FFbN7ZHW%2BSUYQMIwwCme%2BqQ9YwSnix%2BCqo9EV9jnh4a9uZqRR%2BnSfe3fx9YnlYRlVpIvovhAJlLNczt9%2Fr2g0Z8Q5VzWFEhkukC%2FRI2vLhR1AoTfoZhwCR0wukQW82iLu3CwMR%2FlkGMbfhakAJbxai97bRUHj6%2B4vWE9YhhBYg8gfnuDyA%3D%3D%7Ctkp%3ABFBMnvng-dhl&LH_BIN=1', 'image_url': '', 'is_sponsored': False, 'condition': 'Parts Only', 'listing_type': 'Buy It Now', 'seller_rating': 96.9, 'item_id': '256929236833', 'source': 'eBay', '_score': 38.0, 'effective_price': 120.0}, {'title': 'Sony WF-1000XM5 The Best Truly Wireless Bluetooth Earbuds Headphones - Black', 'price': 139.99, 'shipping': 0.0, 'total_price': 139.99, 'is_free_shipping': True, 'currency': 'USD', 'url': 'https://www.ebay.com/itm/256853907827?_skw=headphones+sony+best+sony&itmmeta=01JV3SR7J7WJ36AMZ5NXHX11R9&hash=item3bcdaf9973%3Ag%3A41EAAOSwDFln0Txs&itmprp=enc%3AAQAKAAABAFkggFvd1GGDu0w3yXCmi1eDHCY2ER51Urg5UlV%2B56m4ZdNkT7hrfgw2ipF8%2Fa8uHK7uJuFeHnkvXCtGV1eBA%2BNiXtxsHBFeYAJ3Wby2iUvUi7awKrpRiQICJcmzJeuYQsPdGO9DjzO%2Br71hb%2B8HFA2Ox5zHXi1qh9TiLhnI4uC34T04sCSBe8hEewHuYnbxk1JWelSxiiGy3uHUqNb783WnGXr4o5daMjUPXC2fM5ojbRI68Zu4XadqFlHSra2J%2F%2B1GgGAC9PMRRrP4Mg9uw2NA2HwvD2c5Avqun%2FFhigK94J66SzjrQ0e%2F0ZPiyQuZvAiEnBOseVhkVRV05PuKK1E%3D%7Ctkp%3ABFBMnvng-dhl&LH_BIN=1', 'image_url': '', 'is_sponsored': False, 'condition': 'Pre-Owned', 'listing_type': 'Buy It Now', 'seller_rating': 100.0, 'item_id': '256853907827', 'source': 'eBay', '_score': 36.001}, {'title': 'Sony WH-1000XM5 The Best Wireless Auto Noise Canceling Headphones Optimizer', 'price': 299.95, 'shipping': 0.0, 'total_price': 299.95, 'is_free_shipping': True, 'currency': 'USD', 'url': 'https://www.ebay.com/itm/235720395134?_skw=headphones+sony+best+sony&itmmeta=01JV3SR7J8XSX733WE78TSSF42&hash=item36e207c97e%3Ag%3A5GQAAOSw6jJm0SLC&itmprp=enc%3AAQAKAAAA8FkggFvd1GGDu0w3yXCmi1fc6LwlPEiKNSm4y6vXwq%2FNwkOTh%2FRWfeRaSmfW9s0HMFDtEk3sRqvxj3qJ6gF8Y82eIZO%2Bjq5Vh0SFLm44F5yjNqCMgihAI6JnCd%2FKgYLeqvmulp3EV1jJhEGGX6Mj4IZwRnAP%2BklapI2gmwbGesZk1ZZgHrnpMySMXgA7OOhchAP5duE0DEc1HU7Q9wE%2F0Sy0wsEpgqPtUSpDo6kjpzVIHqalL1k4RRSLQWSOE%2BeJXjlqOvDcEWJ2zbeUr4ClvSuZQaDmQW7ZYWs%2FITYMlcDBJIT5O6%2BrAM02JjL%2FJRCzUw%3D%3D%7Ctkp%3ABFBMnvng-dhl&LH_BIN=1', 'image_url': '', 'is_sponsored': False, 'condition': 'Brand New', 'listing_type': 'Buy It Now', 'seller_rating': 98.2, 'item_id': '235720395134', 'source': 'eBay', '_score': 30.005000000000003, 'effective_price': 299.95}, {'title': 'Sony WH-1000XM5 The Best Wireless Noise Canceling Headphones, Black', 'price': 319.44, 'currency': 'USD', 'url': 'https://www.walmart.com/ip/Sony-WH-1000XM5-The-Best-Wireless-Noise-Canceling-Headphones-Black/386006068?classType=VARIANT&adsRedirect=true', 'image_url': 'https://i5.walmartimages.com/seo/Sony-WH-1000XM5-The-Best-Wireless-Noise-Canceling-Headphones-Black_7384c879-1d54-47e8-9876-1d7adadcf0a5.542c245c25d295b30fa5820eacea4450.jpeg?odnHeight=580&odnWidth=580&odnBg=FFFFFF', 'rating': 0.0, 'reviews': 0, 'is_sponsored': False, 'is_pickup_today': False, 'product_id': '2P9FP9H47OOW', 'source': 'Walmart', '_score': 0.0, 'effective_price': 319.44}, {'title': 'Sony WH-1000XM5 The Best Wireless Noise Canceling Headphones, Black', 'price': 319.44, 'currency': 'USD', 'url': '/ip/Sony-WH-1000XM5-The-Best-Wireless-Noise-Canceling-Headphones-Black/386006068?classType=VARIANT&from=/search', 'image_url': 'https://i5.walmartimages.com/seo/Sony-WH-1000XM5-The-Best-Wireless-Noise-Canceling-Headphones-Black_7384c879-1d54-47e8-9876-1d7adadcf0a5.542c245c25d295b30fa5820eacea4450.jpeg?odnHeight=580&odnWidth=580&odnBg=FFFFFF', 'rating': 0.0, 'reviews': 0, 'is_sponsored': False, 'is_pickup_today': False, 'product_id': '7L1R4YYVLYOY', 'source': 'Walmart', '_score': 0.0, 'effective_price': 319.44}]}
2025-05-12 23:09:48,088 - DealFinderAI.Controller - INFO - Is follow-up? True
2025-05-12 23:09:48,088 - DealFinderAI.Controller - INFO - Referenced products: 1
2025-05-12 23:09:48,088 - DealFinderAI.Controller - INFO - Handling as follow-up question about 1 products
2025-05-12 23:09:48,088 - DealFinderAI.Controller - INFO - Handling follow-up question: find me best deal on sony headphones
2025-05-12 23:09:48,088 - DealFinderAI.Controller - INFO - Referenced products: 1
2025-05-12 23:09:48,088 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: 
            I'm a shopping assistant helping a customer with product information.
            
            The customer previously searched for products and is now asking a follow-up question: "find me best deal on sony headphones"
            
            They're referring to this product:
            {
  "title": "Sony WH-1000XM5 The Best Wireless Noise Canceling Headphones,Black READ!!",
  "price": 120.0,
  "shipping": 0.0,
  "total_price": 120.0,
  "is_free_shipping": true,
  "currency": "USD",
  "url": "https://www.ebay.com/itm/256929236833?_skw=headphones+sony+best+sony&itmmeta=01JV3SR7J8YJ0J324Q1DA6AR0Y&hash=item3bd22d0761%3Ag%3AS8wAAOSwgTxoIgPm&itmprp=enc%3AAQAKAAAA8FkggFvd1GGDu0w3yXCmi1fWKc2WmtA0XWoR85OH6guse3cAs34tAal9JL%2Fh2pWvei8j3cvRnppkKW6%2FKSo8yYZvQhMUvR3wpNGSkrczsJFq4hERTIvCVADjNsgZk4k1UxNFNbhArX%2B9BOV9%2FFbN7ZHW%2BSUYQMIwwCme%2BqQ9YwSnix%2BCqo9EV9jnh4a9uZqRR%2BnSfe3fx9YnlYRlVpIvovhAJlLNczt9%2Fr2g0Z8Q5VzWFEhkukC%2FRI2vLhR1AoTfoZhwCR0wukQW82iLu3CwMR%2FlkGMbfhakAJbxai97bRUHj6%2B4vWE9YhhBYg8gfnuDyA%3D%3D%7Ctkp%3ABFBMnvng-dhl&LH_BIN=1",
  "image_url": "",
  "is_sponsored": false,
  "condition": "Parts Only",
  "listing_type": "Buy It Now",
  "seller_rating": 96.9,
  "item_id": "256929236833",
  "source": "eBay",
  "_score": 38.0,
  "effective_price": 120.0
}
            
            Please provide a helpful, conversational response addressing their question
            about this product. Include relevant details from the product information.
            
            If the product is a "best deal", emphasize why it's a good value compared to alternatives.
            If they're asking about comparisons to other products, highlight the key differences.
            If they're asking about specific features, focus on those details.
            
2025-05-12 23:09:56,166 - DealFinderAI.Main - INFO - Toggled LangChain integration to: False
2025-05-12 23:09:56,887 - DealFinderAI.Main - INFO - Toggled LangChain integration to: True
2025-05-12 23:10:09,713 - DealFinderAI.Controller - INFO - Processing user query: find me best deal on sony headphones
2025-05-12 23:10:09,715 - DealFinderAI.ChatMemoryAgent - INFO - Analyzing query: 'find me best deal on sony headphones' for conversation session_20250512230602_1988a3a8
2025-05-12 23:10:09,715 - DealFinderAI.ChatMemoryAgent - INFO - Current product info: True
2025-05-12 23:10:09,715 - DealFinderAI.ChatMemoryAgent - INFO - Number of products in memory: 5
2025-05-12 23:10:09,715 - DealFinderAI.ChatMemoryAgent - INFO - Found 5 products in memory
2025-05-12 23:10:09,715 - DealFinderAI.ChatMemoryAgent - INFO - Follow-up analysis: True, Referenced products: 1
2025-05-12 23:10:09,716 - DealFinderAI.Controller - INFO - Analyze response: {'is_follow_up': True, 'focused_product': 0, 'referenced_products': [{'title': 'Sony WH-1000XM5 The Best Wireless Noise Canceling Headphones,Black READ!!', 'price': 120.0, 'shipping': 0.0, 'total_price': 120.0, 'is_free_shipping': True, 'currency': 'USD', 'url': 'https://www.ebay.com/itm/256929236833?_skw=headphones+sony+best+sony&itmmeta=01JV3SR7J8YJ0J324Q1DA6AR0Y&hash=item3bd22d0761%3Ag%3AS8wAAOSwgTxoIgPm&itmprp=enc%3AAQAKAAAA8FkggFvd1GGDu0w3yXCmi1fWKc2WmtA0XWoR85OH6guse3cAs34tAal9JL%2Fh2pWvei8j3cvRnppkKW6%2FKSo8yYZvQhMUvR3wpNGSkrczsJFq4hERTIvCVADjNsgZk4k1UxNFNbhArX%2B9BOV9%2FFbN7ZHW%2BSUYQMIwwCme%2BqQ9YwSnix%2BCqo9EV9jnh4a9uZqRR%2BnSfe3fx9YnlYRlVpIvovhAJlLNczt9%2Fr2g0Z8Q5VzWFEhkukC%2FRI2vLhR1AoTfoZhwCR0wukQW82iLu3CwMR%2FlkGMbfhakAJbxai97bRUHj6%2B4vWE9YhhBYg8gfnuDyA%3D%3D%7Ctkp%3ABFBMnvng-dhl&LH_BIN=1', 'image_url': '', 'is_sponsored': False, 'condition': 'Parts Only', 'listing_type': 'Buy It Now', 'seller_rating': 96.9, 'item_id': '256929236833', 'source': 'eBay', '_score': 38.0, 'effective_price': 120.0}], 'products': [{'title': 'Sony WH-1000XM5 The Best Wireless Noise Canceling Headphones,Black READ!!', 'price': 120.0, 'shipping': 0.0, 'total_price': 120.0, 'is_free_shipping': True, 'currency': 'USD', 'url': 'https://www.ebay.com/itm/256929236833?_skw=headphones+sony+best+sony&itmmeta=01JV3SR7J8YJ0J324Q1DA6AR0Y&hash=item3bd22d0761%3Ag%3AS8wAAOSwgTxoIgPm&itmprp=enc%3AAQAKAAAA8FkggFvd1GGDu0w3yXCmi1fWKc2WmtA0XWoR85OH6guse3cAs34tAal9JL%2Fh2pWvei8j3cvRnppkKW6%2FKSo8yYZvQhMUvR3wpNGSkrczsJFq4hERTIvCVADjNsgZk4k1UxNFNbhArX%2B9BOV9%2FFbN7ZHW%2BSUYQMIwwCme%2BqQ9YwSnix%2BCqo9EV9jnh4a9uZqRR%2BnSfe3fx9YnlYRlVpIvovhAJlLNczt9%2Fr2g0Z8Q5VzWFEhkukC%2FRI2vLhR1AoTfoZhwCR0wukQW82iLu3CwMR%2FlkGMbfhakAJbxai97bRUHj6%2B4vWE9YhhBYg8gfnuDyA%3D%3D%7Ctkp%3ABFBMnvng-dhl&LH_BIN=1', 'image_url': '', 'is_sponsored': False, 'condition': 'Parts Only', 'listing_type': 'Buy It Now', 'seller_rating': 96.9, 'item_id': '256929236833', 'source': 'eBay', '_score': 38.0, 'effective_price': 120.0}, {'title': 'Sony WF-1000XM5 The Best Truly Wireless Bluetooth Earbuds Headphones - Black', 'price': 139.99, 'shipping': 0.0, 'total_price': 139.99, 'is_free_shipping': True, 'currency': 'USD', 'url': 'https://www.ebay.com/itm/256853907827?_skw=headphones+sony+best+sony&itmmeta=01JV3SR7J7WJ36AMZ5NXHX11R9&hash=item3bcdaf9973%3Ag%3A41EAAOSwDFln0Txs&itmprp=enc%3AAQAKAAABAFkggFvd1GGDu0w3yXCmi1eDHCY2ER51Urg5UlV%2B56m4ZdNkT7hrfgw2ipF8%2Fa8uHK7uJuFeHnkvXCtGV1eBA%2BNiXtxsHBFeYAJ3Wby2iUvUi7awKrpRiQICJcmzJeuYQsPdGO9DjzO%2Br71hb%2B8HFA2Ox5zHXi1qh9TiLhnI4uC34T04sCSBe8hEewHuYnbxk1JWelSxiiGy3uHUqNb783WnGXr4o5daMjUPXC2fM5ojbRI68Zu4XadqFlHSra2J%2F%2B1GgGAC9PMRRrP4Mg9uw2NA2HwvD2c5Avqun%2FFhigK94J66SzjrQ0e%2F0ZPiyQuZvAiEnBOseVhkVRV05PuKK1E%3D%7Ctkp%3ABFBMnvng-dhl&LH_BIN=1', 'image_url': '', 'is_sponsored': False, 'condition': 'Pre-Owned', 'listing_type': 'Buy It Now', 'seller_rating': 100.0, 'item_id': '256853907827', 'source': 'eBay', '_score': 36.001}, {'title': 'Sony WH-1000XM5 The Best Wireless Auto Noise Canceling Headphones Optimizer', 'price': 299.95, 'shipping': 0.0, 'total_price': 299.95, 'is_free_shipping': True, 'currency': 'USD', 'url': 'https://www.ebay.com/itm/235720395134?_skw=headphones+sony+best+sony&itmmeta=01JV3SR7J8XSX733WE78TSSF42&hash=item36e207c97e%3Ag%3A5GQAAOSw6jJm0SLC&itmprp=enc%3AAQAKAAAA8FkggFvd1GGDu0w3yXCmi1fc6LwlPEiKNSm4y6vXwq%2FNwkOTh%2FRWfeRaSmfW9s0HMFDtEk3sRqvxj3qJ6gF8Y82eIZO%2Bjq5Vh0SFLm44F5yjNqCMgihAI6JnCd%2FKgYLeqvmulp3EV1jJhEGGX6Mj4IZwRnAP%2BklapI2gmwbGesZk1ZZgHrnpMySMXgA7OOhchAP5duE0DEc1HU7Q9wE%2F0Sy0wsEpgqPtUSpDo6kjpzVIHqalL1k4RRSLQWSOE%2BeJXjlqOvDcEWJ2zbeUr4ClvSuZQaDmQW7ZYWs%2FITYMlcDBJIT5O6%2BrAM02JjL%2FJRCzUw%3D%3D%7Ctkp%3ABFBMnvng-dhl&LH_BIN=1', 'image_url': '', 'is_sponsored': False, 'condition': 'Brand New', 'listing_type': 'Buy It Now', 'seller_rating': 98.2, 'item_id': '235720395134', 'source': 'eBay', '_score': 30.005000000000003, 'effective_price': 299.95}, {'title': 'Sony WH-1000XM5 The Best Wireless Noise Canceling Headphones, Black', 'price': 319.44, 'currency': 'USD', 'url': 'https://www.walmart.com/ip/Sony-WH-1000XM5-The-Best-Wireless-Noise-Canceling-Headphones-Black/386006068?classType=VARIANT&adsRedirect=true', 'image_url': 'https://i5.walmartimages.com/seo/Sony-WH-1000XM5-The-Best-Wireless-Noise-Canceling-Headphones-Black_7384c879-1d54-47e8-9876-1d7adadcf0a5.542c245c25d295b30fa5820eacea4450.jpeg?odnHeight=580&odnWidth=580&odnBg=FFFFFF', 'rating': 0.0, 'reviews': 0, 'is_sponsored': False, 'is_pickup_today': False, 'product_id': '2P9FP9H47OOW', 'source': 'Walmart', '_score': 0.0, 'effective_price': 319.44}, {'title': 'Sony WH-1000XM5 The Best Wireless Noise Canceling Headphones, Black', 'price': 319.44, 'currency': 'USD', 'url': '/ip/Sony-WH-1000XM5-The-Best-Wireless-Noise-Canceling-Headphones-Black/386006068?classType=VARIANT&from=/search', 'image_url': 'https://i5.walmartimages.com/seo/Sony-WH-1000XM5-The-Best-Wireless-Noise-Canceling-Headphones-Black_7384c879-1d54-47e8-9876-1d7adadcf0a5.542c245c25d295b30fa5820eacea4450.jpeg?odnHeight=580&odnWidth=580&odnBg=FFFFFF', 'rating': 0.0, 'reviews': 0, 'is_sponsored': False, 'is_pickup_today': False, 'product_id': '7L1R4YYVLYOY', 'source': 'Walmart', '_score': 0.0, 'effective_price': 319.44}]}
2025-05-12 23:10:09,716 - DealFinderAI.Controller - INFO - Is follow-up? True
2025-05-12 23:10:09,716 - DealFinderAI.Controller - INFO - Referenced products: 1
2025-05-12 23:10:09,717 - DealFinderAI.Controller - INFO - Handling as follow-up question about 1 products
2025-05-12 23:10:09,717 - DealFinderAI.Controller - INFO - Handling follow-up question: find me best deal on sony headphones
2025-05-12 23:10:09,717 - DealFinderAI.Controller - INFO - Referenced products: 1
2025-05-12 23:10:09,717 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: 
            I'm a shopping assistant helping a customer with product information.
            
            The customer previously searched for products and is now asking a follow-up question: "find me best deal on sony headphones"
            
            They're referring to this product:
            {
  "title": "Sony WH-1000XM5 The Best Wireless Noise Canceling Headphones,Black READ!!",
  "price": 120.0,
  "shipping": 0.0,
  "total_price": 120.0,
  "is_free_shipping": true,
  "currency": "USD",
  "url": "https://www.ebay.com/itm/256929236833?_skw=headphones+sony+best+sony&itmmeta=01JV3SR7J8YJ0J324Q1DA6AR0Y&hash=item3bd22d0761%3Ag%3AS8wAAOSwgTxoIgPm&itmprp=enc%3AAQAKAAAA8FkggFvd1GGDu0w3yXCmi1fWKc2WmtA0XWoR85OH6guse3cAs34tAal9JL%2Fh2pWvei8j3cvRnppkKW6%2FKSo8yYZvQhMUvR3wpNGSkrczsJFq4hERTIvCVADjNsgZk4k1UxNFNbhArX%2B9BOV9%2FFbN7ZHW%2BSUYQMIwwCme%2BqQ9YwSnix%2BCqo9EV9jnh4a9uZqRR%2BnSfe3fx9YnlYRlVpIvovhAJlLNczt9%2Fr2g0Z8Q5VzWFEhkukC%2FRI2vLhR1AoTfoZhwCR0wukQW82iLu3CwMR%2FlkGMbfhakAJbxai97bRUHj6%2B4vWE9YhhBYg8gfnuDyA%3D%3D%7Ctkp%3ABFBMnvng-dhl&LH_BIN=1",
  "image_url": "",
  "is_sponsored": false,
  "condition": "Parts Only",
  "listing_type": "Buy It Now",
  "seller_rating": 96.9,
  "item_id": "256929236833",
  "source": "eBay",
  "_score": 38.0,
  "effective_price": 120.0
}
            
            Please provide a helpful, conversational response addressing their question
            about this product. Include relevant details from the product information.
            
            If the product is a "best deal", emphasize why it's a good value compared to alternatives.
            If they're asking about comparisons to other products, highlight the key differences.
            If they're asking about specific features, focus on those details.
            
2025-05-12 23:10:30,408 - DealFinderAI - INFO - Logging initialized
2025-05-12 23:10:30,409 - DealFinderAI.Main - INFO - Starting DealFinder AI
2025-05-12 23:10:30,409 - DealFinderAI.Main - INFO - Using LangChain implementation
2025-05-12 23:10:30,450 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-12 23:10:30,450 - DealFinderAI.Controller - INFO - Initialized scraper agents: ['amazon', 'walmart', 'ebay']
2025-05-12 23:10:30,450 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-12 23:10:30,450 - DealFinderAI.Controller - INFO - Initialized scraper agents: ['amazon', 'walmart', 'ebay']
2025-05-12 23:10:30,450 - DealFinderAI.Main - INFO - Web app using LangChain implementation with Gemini model
2025-05-12 23:11:09,436 - DealFinderAI - INFO - Logging initialized
2025-05-12 23:11:09,436 - DealFinderAI.Main - INFO - Starting DealFinder AI
2025-05-12 23:11:09,436 - DealFinderAI.Main - INFO - Using LangChain implementation
2025-05-12 23:11:09,475 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-12 23:11:09,475 - DealFinderAI.Controller - INFO - Initialized scraper agents: ['amazon', 'walmart', 'ebay']
2025-05-12 23:11:09,475 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-12 23:11:09,475 - DealFinderAI.Controller - INFO - Initialized scraper agents: ['amazon', 'walmart', 'ebay']
2025-05-12 23:11:09,475 - DealFinderAI.Main - INFO - Web app using LangChain implementation with Gemini model
2025-05-12 23:11:09,737 - DealFinderAI - INFO - Logging initialized
2025-05-12 23:11:09,737 - DealFinderAI.Main - INFO - Starting DealFinder AI
2025-05-12 23:11:09,738 - DealFinderAI.Main - INFO - Using LangChain implementation
2025-05-12 23:11:09,763 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-12 23:11:09,763 - DealFinderAI.Controller - INFO - Initialized scraper agents: ['amazon', 'walmart', 'ebay']
2025-05-12 23:11:09,763 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-12 23:11:09,763 - DealFinderAI.Controller - INFO - Initialized scraper agents: ['amazon', 'walmart', 'ebay']
2025-05-12 23:11:09,764 - DealFinderAI.Main - INFO - Web app using LangChain implementation with Gemini model
2025-05-12 23:11:16,029 - DealFinderAI.Main - INFO - Toggled LangChain integration to: False
2025-05-12 23:11:16,689 - DealFinderAI.Main - INFO - Toggled LangChain integration to: True
2025-05-12 23:11:34,617 - DealFinderAI.Controller - INFO - Processing user query: find me best deal on bose speakers
2025-05-12 23:11:34,618 - DealFinderAI.ChatMemoryAgent - INFO - Analyzing query: 'find me best deal on bose speakers' for conversation session_20250512231114_0f8c502c
2025-05-12 23:11:34,618 - DealFinderAI.ChatMemoryAgent - INFO - Current product info: False
2025-05-12 23:11:34,618 - DealFinderAI.ChatMemoryAgent - INFO - No product context available for this conversation
2025-05-12 23:11:34,618 - DealFinderAI.Controller - INFO - Analyze response: {'is_follow_up': False, 'focused_product': None, 'referenced_products': [], 'products': []}
2025-05-12 23:11:34,618 - DealFinderAI.Controller - INFO - Is follow-up? False
2025-05-12 23:11:34,618 - DealFinderAI.Controller - INFO - Referenced products: 0
2025-05-12 23:11:34,618 - DealFinderAI.Controller - INFO - Processing as new search query
2025-05-12 23:11:34,618 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: find me best deal on bose speakers
2025-05-12 23:11:35,723 - DealFinderAI.GeminiAgent - WARNING - Failed to parse Gemini response as JSON: ```json
{
  "product_type": "speakers",
  "keywords": ["bose", "speakers"],
  "price_range": null,
  "brands": ["Bose"],
  "features": [],
  "sorting_preference": "price_low_to_high",
  "buy_it_now": true
}
```

2025-05-12 23:11:35,724 - DealFinderAI.Controller - INFO - Parsed search parameters: {'product_type': 'speakers', 'keywords': ['bose', 'speakers'], 'price_range': None, 'brands': ['Bose'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-12 23:11:35,724 - DealFinderAI.AmazonScraperAgent - INFO - Searching Amazon for: {'product_type': 'speakers', 'keywords': ['bose', 'speakers'], 'price_range': None, 'brands': ['Bose'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-12 23:11:37,072 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B07WPG4QDK at 19.95 USD
2025-05-12 23:11:37,073 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B07L9GYSZX at 19.99 USD
2025-05-12 23:11:37,075 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B07BKNKMKT at 19.99 USD
2025-05-12 23:11:37,077 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B07WWKCS7R at 29.0 USD
2025-05-12 23:11:37,078 - DealFinderAI.AmazonScraperAgent - WARNING - Incomplete data for ASIN B00HWSXVAY, falling back to Gemini extraction.
2025-05-12 23:11:40,193 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B00HWSXVAY at 0.0 USD
2025-05-12 23:11:41,167 - DealFinderAI.WalmartScraperAgent - INFO - Searching Walmart for: {'product_type': 'speakers', 'keywords': ['bose', 'speakers'], 'price_range': None, 'brands': ['Bose'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-12 23:11:47,264 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-12 23:11:47,264 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Smart Speaker Carrying Box Dustproof Waterproof for Bose SoundLink Flex at 12.99 USD
2025-05-12 23:11:47,265 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Smart Speaker Carrying Box Dustproof Waterproof for Bose SoundLink Flex at 12.99 USD
2025-05-12 23:11:49,669 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-12 23:11:49,669 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: CHAXIN Bluetooth-compatible Speaker Carrying Box with Zipper for Bose SoundLink Flex at 12.99 USD
2025-05-12 23:11:49,669 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: CHAXIN Bluetooth-compatible Speaker Carrying Box with Zipper for Bose SoundLink Flex at 12.99 USD
2025-05-12 23:11:52,072 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-12 23:11:52,072 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: 1x 1M Speaker Charging Cradle Base Charger Stand Cable For Bose SoundLink Revolve/Revolve at 13.6 USD
2025-05-12 23:11:52,072 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: 1x 1M Speaker Charging Cradle Base Charger Stand Cable For Bose SoundLink Revolve/Revolve at 13.6 USD
2025-05-12 23:11:54,312 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-12 23:11:54,313 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Bluetooth-Compatible Audio Speaker Cover for Bose SoundLink Flex (White) at 13.99 USD
2025-05-12 23:11:54,313 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Bluetooth-Compatible Audio Speaker Cover for Bose SoundLink Flex (White) at 13.99 USD
2025-05-12 23:11:56,951 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-12 23:11:56,952 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: CHAXIN Anti-Fall Protector Accessory Bluetooth-Compatible Speaker Case for Bose SoundLink Flex Protective Cover Shell at 14.19 USD
2025-05-12 23:11:56,953 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: CHAXIN Anti-Fall Protector Accessory Bluetooth-Compatible Speaker Case for Bose SoundLink Flex Protective Cover Shell at 14.19 USD
2025-05-12 23:11:58,114 - DealFinderAI.EbayScraperAgent - INFO - Searching eBay for: {'product_type': 'speakers', 'keywords': ['bose', 'speakers'], 'price_range': None, 'brands': ['Bose'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-12 23:11:59,699 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Bose Satellite Speaker at 5.0 USD
2025-05-12 23:11:59,699 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: BOSE AM-500  ACOUSTIMASS SPEAKERS SYSTEM OWNER'S MANUAL . at 10.87 USD
2025-05-12 23:11:59,699 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: BOSE AM-500  ACOUSTIMASS SPEAKERS SYSTEM OWNER'S MANUAL . at 10.87 USD
2025-05-12 23:11:59,700 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Bose D462.065 One Genuine Speakers System at 19.99 USD
2025-05-12 23:11:59,700 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Bose D462.065 One Genuine Speakers System at 19.99 USD
2025-05-12 23:12:00,393 - DealFinderAI.ResultsAggregatorAgent - INFO - Aggregating results for query: find me best deal on bose speakers
2025-05-12 23:12:00,394 - DealFinderAI.ResultsAggregatorAgent - INFO - Found 3 results from various sources
2025-05-12 23:12:00,394 - DealFinderAI.ProductComparisonAgent - INFO - Comparing products for query: find me best deal on bose speakers
2025-05-12 23:12:00,394 - DealFinderAI.ProductComparisonAgent - INFO - Found 2 products to compare
2025-05-12 23:12:00,394 - DealFinderAI.ChatMemoryAgent - INFO - Storing context for conversation session_20250512231114_0f8c502c
2025-05-12 23:12:00,394 - DealFinderAI.ChatMemoryAgent - INFO - Storing 2 products for conversation session_20250512231114_0f8c502c
2025-05-12 23:12:00,394 - DealFinderAI.PresentationAgent - INFO - Preparing presentation for 2 products
2025-05-12 23:12:00,394 - DealFinderAI.ChatMemoryAgent - INFO - Storing context for conversation session_20250512231114_0f8c502c
2025-05-12 23:12:00,394 - DealFinderAI.ChatMemoryAgent - INFO - Storing 2 products for conversation session_20250512231114_0f8c502c
2025-05-12 23:12:00,394 - DealFinderAI.Controller - INFO - Successfully stored search results in memory
2025-05-12 23:15:58,479 - DealFinderAI.Controller - INFO - Processing user query: find me best deal on sony headphones
2025-05-12 23:15:58,481 - DealFinderAI.ChatMemoryAgent - INFO - Analyzing query: 'find me best deal on sony headphones' for conversation session_20250512231114_0f8c502c
2025-05-12 23:15:58,481 - DealFinderAI.ChatMemoryAgent - INFO - Current product info: True
2025-05-12 23:15:58,481 - DealFinderAI.ChatMemoryAgent - INFO - Number of products in memory: 2
2025-05-12 23:15:58,481 - DealFinderAI.ChatMemoryAgent - INFO - Found 2 products in memory
2025-05-12 23:15:58,481 - DealFinderAI.ChatMemoryAgent - INFO - Follow-up analysis: True, Referenced products: 1
2025-05-12 23:15:58,481 - DealFinderAI.Controller - INFO - Analyze response: {'is_follow_up': True, 'focused_product': None, 'referenced_products': [{'title': 'Bose D462.065 One Genuine Speakers System', 'price': 19.99, 'shipping': 0.0, 'total_price': 19.99, 'is_free_shipping': True, 'currency': 'USD', 'url': 'https://www.ebay.com/itm/204244450663?_skw=speakers+bose+speakers+Bose&itmmeta=01JV3T1BYKE2239818W41V55QY&hash=item2f8deafd67%3Ag%3AWbEAAOSwjZFj7HOE&itmprp=enc%3AAQAKAAABAFkggFvd1GGDu0w3yXCmi1ey7%2Bl4K2Rfv3H5d6jFoAwqPGF3RCHVjfNUa07z0diEiZb4734IDu5TdsT4qiJ2pgU80AnhLb10lCAqF3KvPNYQ%2FrXqCJkxnO93jvJuNSe4SxCEqZsEx%2FOz08ro84CINUhO2fEHVgFDnB78Oe8caY2KNDaGLVhYx41T7cl1g7QkpyVkp1zsWsmbGSSOA4e%2BebMk0sG9ph0opgbZgsISq9VkkwqYZ8aDGrxsDIdVCMSDOv1NU%2BXWcFL3q8mWZSl%2FYC0v1Ggj4C5KFbw9A69fXy6oUEbYCzclf%2BnF8gVYPEC7BLt%2B2D8A7liX41HyI--fdw0%3D%7Ctkp%3ABk9SR8S_hfrYZQ&LH_BIN=1', 'image_url': '', 'is_sponsored': False, 'condition': 'Pre-Owned', 'listing_type': 'Buy It Now', 'seller_rating': 99.0, 'item_id': '204244450663', 'source': 'eBay', '_score': 48.001000000000005}], 'products': [{'title': 'Bose D462.065 One Genuine Speakers System', 'price': 19.99, 'shipping': 0.0, 'total_price': 19.99, 'is_free_shipping': True, 'currency': 'USD', 'url': 'https://www.ebay.com/itm/204244450663?_skw=speakers+bose+speakers+Bose&itmmeta=01JV3T1BYKE2239818W41V55QY&hash=item2f8deafd67%3Ag%3AWbEAAOSwjZFj7HOE&itmprp=enc%3AAQAKAAABAFkggFvd1GGDu0w3yXCmi1ey7%2Bl4K2Rfv3H5d6jFoAwqPGF3RCHVjfNUa07z0diEiZb4734IDu5TdsT4qiJ2pgU80AnhLb10lCAqF3KvPNYQ%2FrXqCJkxnO93jvJuNSe4SxCEqZsEx%2FOz08ro84CINUhO2fEHVgFDnB78Oe8caY2KNDaGLVhYx41T7cl1g7QkpyVkp1zsWsmbGSSOA4e%2BebMk0sG9ph0opgbZgsISq9VkkwqYZ8aDGrxsDIdVCMSDOv1NU%2BXWcFL3q8mWZSl%2FYC0v1Ggj4C5KFbw9A69fXy6oUEbYCzclf%2BnF8gVYPEC7BLt%2B2D8A7liX41HyI--fdw0%3D%7Ctkp%3ABk9SR8S_hfrYZQ&LH_BIN=1', 'image_url': '', 'is_sponsored': False, 'condition': 'Pre-Owned', 'listing_type': 'Buy It Now', 'seller_rating': 99.0, 'item_id': '204244450663', 'source': 'eBay', '_score': 48.001000000000005}, {'title': "BOSE AM-500  ACOUSTIMASS SPEAKERS SYSTEM OWNER'S MANUAL .", 'price': 10.87, 'shipping': 7.35, 'total_price': 18.22, 'is_free_shipping': False, 'currency': 'USD', 'url': 'https://www.ebay.com/itm/316581231732?_skw=speakers+bose+speakers+Bose&itmmeta=01JV3T1BYK8MC2BHWYTYZSQT7A&hash=item49b5b63c74%3Ag%3AhUkAAeSwjiVn6tfc&itmprp=enc%3AAQAKAAAA4FkggFvd1GGDu0w3yXCmi1fp4qXg3e7wuwV08aZ4bsoP55QfFz3VnP7auRNkRZyomuB0nY7yXLueHrGz4irMGPoUWXwl0ITNLx1oe%2FvU2UHkQZRi2YflMmWBs11jPXeEvzd4WG8nZjmZc1L%2F4ZStY6LZOePXGOXgDY%2FCRAAeErhGCFLLjtaWApwpOskggwCkoqjDtg%2FTzktpaaroVyA7nm47Udewm6T%2B%2FDBT6SJwKHn2M9opYjWUc98Ib54uPeb2NY9oHvLZxbnu2%2FpMRlKeslMnRD9DPjiv0x3tO2GrlRVG%7Ctkp%3ABk9SR8S_hfrYZQ&LH_BIN=1', 'image_url': '', 'is_sponsored': False, 'condition': 'Pre-Owned', 'listing_type': 'Buy It Now', 'seller_rating': 99.3, 'item_id': '316581231732', 'source': 'eBay', '_score': 38.913}]}
2025-05-12 23:15:58,481 - DealFinderAI.Controller - INFO - Is follow-up? True
2025-05-12 23:15:58,481 - DealFinderAI.Controller - INFO - Referenced products: 1
2025-05-12 23:15:58,481 - DealFinderAI.Controller - INFO - Handling as follow-up question about 1 products
2025-05-12 23:15:58,481 - DealFinderAI.Controller - INFO - Handling follow-up question: find me best deal on sony headphones
2025-05-12 23:15:58,481 - DealFinderAI.Controller - INFO - Referenced products: 1
2025-05-12 23:15:58,481 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: 
            I'm a shopping assistant helping a customer with product information.
            
            The customer previously searched for products and is now asking a follow-up question: "find me best deal on sony headphones"
            
            They're referring to this product:
            {
  "title": "Bose D462.065 One Genuine Speakers System",
  "price": 19.99,
  "shipping": 0.0,
  "total_price": 19.99,
  "is_free_shipping": true,
  "currency": "USD",
  "url": "https://www.ebay.com/itm/204244450663?_skw=speakers+bose+speakers+Bose&itmmeta=01JV3T1BYKE2239818W41V55QY&hash=item2f8deafd67%3Ag%3AWbEAAOSwjZFj7HOE&itmprp=enc%3AAQAKAAABAFkggFvd1GGDu0w3yXCmi1ey7%2Bl4K2Rfv3H5d6jFoAwqPGF3RCHVjfNUa07z0diEiZb4734IDu5TdsT4qiJ2pgU80AnhLb10lCAqF3KvPNYQ%2FrXqCJkxnO93jvJuNSe4SxCEqZsEx%2FOz08ro84CINUhO2fEHVgFDnB78Oe8caY2KNDaGLVhYx41T7cl1g7QkpyVkp1zsWsmbGSSOA4e%2BebMk0sG9ph0opgbZgsISq9VkkwqYZ8aDGrxsDIdVCMSDOv1NU%2BXWcFL3q8mWZSl%2FYC0v1Ggj4C5KFbw9A69fXy6oUEbYCzclf%2BnF8gVYPEC7BLt%2B2D8A7liX41HyI--fdw0%3D%7Ctkp%3ABk9SR8S_hfrYZQ&LH_BIN=1",
  "image_url": "",
  "is_sponsored": false,
  "condition": "Pre-Owned",
  "listing_type": "Buy It Now",
  "seller_rating": 99.0,
  "item_id": "204244450663",
  "source": "eBay",
  "_score": 48.001000000000005
}
            
            Please provide a helpful, conversational response addressing their question
            about this product. Include relevant details from the product information.
            
            If the product is a "best deal", emphasize why it's a good value compared to alternatives.
            If they're asking about comparisons to other products, highlight the key differences.
            If they're asking about specific features, focus on those details.
            
2025-05-12 23:23:34,665 - DealFinderAI - INFO - Logging initialized
2025-05-12 23:23:34,666 - DealFinderAI.Main - INFO - Starting DealFinder AI
2025-05-12 23:23:34,666 - DealFinderAI.Main - INFO - Using LangChain implementation
2025-05-12 23:23:34,705 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-12 23:23:34,705 - DealFinderAI.Controller - INFO - Initialized scraper agents: ['amazon', 'walmart', 'ebay']
2025-05-12 23:23:34,705 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-12 23:23:34,705 - DealFinderAI.Controller - INFO - Initialized scraper agents: ['amazon', 'walmart', 'ebay']
2025-05-12 23:23:34,705 - DealFinderAI.Main - INFO - Web app using LangChain implementation with Gemini model
2025-05-12 23:24:16,973 - DealFinderAI - INFO - Logging initialized
2025-05-12 23:24:16,973 - DealFinderAI.Main - INFO - Starting DealFinder AI
2025-05-12 23:24:16,974 - DealFinderAI.Main - INFO - Using LangChain implementation
2025-05-12 23:24:17,015 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-12 23:24:17,015 - DealFinderAI.Controller - INFO - Initialized scraper agents: ['amazon', 'walmart', 'ebay']
2025-05-12 23:24:17,015 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-12 23:24:17,015 - DealFinderAI.Controller - INFO - Initialized scraper agents: ['amazon', 'walmart', 'ebay']
2025-05-12 23:24:17,015 - DealFinderAI.Main - INFO - Web app using LangChain implementation with Gemini model
2025-05-12 23:29:27,070 - DealFinderAI - INFO - Logging initialized
2025-05-12 23:29:27,071 - DealFinderAI.Main - INFO - Starting DealFinder AI
2025-05-12 23:29:27,071 - DealFinderAI.Main - INFO - Using LangChain implementation
2025-05-12 23:29:27,113 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-12 23:29:27,113 - DealFinderAI.Controller - INFO - Initialized scraper agents: ['amazon', 'walmart', 'ebay']
2025-05-12 23:29:27,113 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-12 23:29:27,113 - DealFinderAI.Controller - INFO - Initialized scraper agents: ['amazon', 'walmart', 'ebay']
2025-05-12 23:29:27,113 - DealFinderAI.Main - INFO - Web app using LangChain implementation with Gemini model
2025-05-12 23:34:18,011 - DealFinderAI.Controller - INFO - Processing user query: find the best deal on sony headphones
2025-05-12 23:34:18,013 - DealFinderAI.ChatMemoryAgent - INFO - Analyzing query: 'find the best deal on sony headphones' for conversation session_20250512233355_48e00641
2025-05-12 23:34:18,013 - DealFinderAI.ChatMemoryAgent - INFO - Current product info: False
2025-05-12 23:34:18,013 - DealFinderAI.ChatMemoryAgent - INFO - No product context available for this conversation
2025-05-12 23:34:18,013 - DealFinderAI.Controller - INFO - Analyze response: {'is_follow_up': False, 'focused_product': None, 'referenced_products': [], 'products': []}
2025-05-12 23:34:18,013 - DealFinderAI.Controller - INFO - Is follow-up? False
2025-05-12 23:34:18,013 - DealFinderAI.Controller - INFO - Referenced products: 0
2025-05-12 23:34:18,014 - DealFinderAI.Controller - INFO - Processing as new search query
2025-05-12 23:34:18,014 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: find the best deal on sony headphones
2025-05-12 23:34:19,187 - DealFinderAI.GeminiAgent - WARNING - Failed to parse Gemini response as JSON: ```json
{
  "product_type": "headphones",
  "keywords": ["sony", "headphones"],
  "price_range": null,
  "brands": ["Sony"],
  "features": [],
  "sorting_preference": "price_low_to_high",
  "buy_it_now": true
}
```

2025-05-12 23:34:19,188 - DealFinderAI.Controller - INFO - Parsed search parameters: {'product_type': 'headphones', 'keywords': ['sony', 'headphones'], 'price_range': None, 'brands': ['Sony'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-12 23:34:19,188 - DealFinderAI.AmazonScraperAgent - INFO - Searching Amazon for: {'product_type': 'headphones', 'keywords': ['sony', 'headphones'], 'price_range': None, 'brands': ['Sony'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-12 23:34:20,568 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B0BGVNXHNH at 2.99 USD
2025-05-12 23:34:20,569 - DealFinderAI.AmazonScraperAgent - WARNING - Incomplete data for ASIN B004MMG380, falling back to Gemini extraction.
2025-05-12 23:34:23,813 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B004MMG380 at 0.0 USD
2025-05-12 23:34:23,819 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B009HW15UG at 8.95 USD
2025-05-12 23:34:23,828 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B00NJ2M43M at 10.99 USD
2025-05-12 23:34:23,833 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B07TB5Z58C at 14.99 USD
2025-05-12 23:34:24,749 - DealFinderAI.WalmartScraperAgent - INFO - Searching Walmart for: {'product_type': 'headphones', 'keywords': ['sony', 'headphones'], 'price_range': None, 'brands': ['Sony'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-12 23:34:30,895 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-12 23:34:30,896 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Replacement Noise Isolation Silicone Soft Ear Buds Earplug Tips for Senso, TOZO, Sony, Zeus, Otium, Hussar Sport in Ear Headphones Wireless Earphones (Red, Small - 5 Pair) at 6.95 USD
2025-05-12 23:34:30,896 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Replacement Noise Isolation Silicone Soft Ear Buds Earplug Tips for Senso, TOZO, Sony, Zeus, Otium, Hussar Sport in Ear Headphones Wireless Earphones (Red, Small - 5 Pair) at 6.95 USD
2025-05-12 23:34:33,849 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-12 23:34:33,850 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: UrbanX R2 Wired in-Ear Headphones with Mic For Sony Xperia L3 with Tangle-Free Cord, Noise Isolating Earphones, Deep Bass, In Ear Bud Silicone Tips at 7.02 USD
2025-05-12 23:34:33,850 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: UrbanX R2 Wired in-Ear Headphones with Mic For Sony Xperia L3 with Tangle-Free Cord, Noise Isolating Earphones, Deep Bass, In Ear Bud Silicone Tips at 7.02 USD
2025-05-12 23:34:36,713 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-12 23:34:36,714 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: UrbanX R2 Wired in-Ear Headphones with Mic For Sony Xperia Z5 Premium Dual with Tangle-Free Cord, Noise Isolating Earphones, Deep Bass, In Ear Bud Silicone Tips at 7.02 USD
2025-05-12 23:34:36,714 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: UrbanX R2 Wired in-Ear Headphones with Mic For Sony Xperia Z5 Premium Dual with Tangle-Free Cord, Noise Isolating Earphones, Deep Bass, In Ear Bud Silicone Tips at 7.02 USD
2025-05-12 23:34:39,180 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-12 23:34:39,180 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Sony MDR-EX14AP Wired In-ear Earbud Headphones with Microphone, White at 7.88 USD
2025-05-12 23:34:39,180 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Sony MDR-EX14AP Wired In-ear Earbud Headphones with Microphone, White at 7.88 USD
2025-05-12 23:34:41,633 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-12 23:34:41,633 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Sony MDR-EX14AP Wired In-ear Earbud Headphones with Microphone, Black at 7.88 USD
2025-05-12 23:34:41,634 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Sony MDR-EX14AP Wired In-ear Earbud Headphones with Microphone, Black at 7.88 USD
2025-05-12 23:34:41,634 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Replacement Noise Isolation Silicone Soft Ear Buds Earplug Tips for Senso, TOZO, Sony, Zeus, Otium, Hussar Sport in Ear Headphones Wireless Earphones (Red, Small - 5 Pair) at 6.95 USD
2025-05-12 23:34:41,634 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: UrbanX R2 Wired in-Ear Headphones with Mic For Sony Xperia L3 with Tangle-Free Cord, Noise Isolating Earphones, Deep Bass, In Ear Bud Silicone Tips at 7.02 USD
2025-05-12 23:34:41,635 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: UrbanX R2 Wired in-Ear Headphones with Mic For Sony Xperia Z5 Premium Dual with Tangle-Free Cord, Noise Isolating Earphones, Deep Bass, In Ear Bud Silicone Tips at 7.02 USD
2025-05-12 23:34:41,635 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Sony MDR-EX14AP Wired In-ear Earbud Headphones with Microphone, White at 7.88 USD
2025-05-12 23:34:41,635 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Sony MDR-EX14AP Wired In-ear Earbud Headphones with Microphone, Black at 7.88 USD
2025-05-12 23:34:42,586 - DealFinderAI.EbayScraperAgent - INFO - Searching eBay for: {'product_type': 'headphones', 'keywords': ['sony', 'headphones'], 'price_range': None, 'brands': ['Sony'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-12 23:34:43,855 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: 1Pcs Headphones Pads Cushion Replacement Ear For Sony MDR-7506 MDR-V6 MDR-CD at 4.57 USD
2025-05-12 23:34:43,855 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: 1Pcs Headphones Pads Cushion Replacement Ear For Sony MDR-7506 MDR-V6 MDR-CD at 4.57 USD
2025-05-12 23:34:43,856 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Sony MDREX15LP in-Ear Earbud Headphones, Black at 6.29 USD
2025-05-12 23:34:43,856 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Sony MDREX15LP in-Ear Earbud Headphones, Black at 6.29 USD
2025-05-12 23:34:43,857 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Sony MDREX14AP In-Ear Earbud Headphones with Mic (Black) at 7.25 USD
2025-05-12 23:34:43,857 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Sony MDREX14AP In-Ear Earbud Headphones with Mic (Black) at 7.25 USD
2025-05-12 23:34:45,260 - DealFinderAI.ResultsAggregatorAgent - INFO - Aggregating results for query: find the best deal on sony headphones
2025-05-12 23:34:45,261 - DealFinderAI.ResultsAggregatorAgent - INFO - Found 3 results from various sources
2025-05-12 23:34:45,262 - DealFinderAI.ProductComparisonAgent - INFO - Comparing products for query: find the best deal on sony headphones
2025-05-12 23:34:45,262 - DealFinderAI.ProductComparisonAgent - INFO - Found 8 products to compare
2025-05-12 23:34:45,263 - DealFinderAI.ChatMemoryAgent - INFO - Storing context for conversation session_20250512233355_48e00641
2025-05-12 23:34:45,263 - DealFinderAI.ChatMemoryAgent - INFO - Storing 8 products for conversation session_20250512233355_48e00641
2025-05-12 23:34:45,264 - DealFinderAI.PresentationAgent - INFO - Preparing presentation for 8 products
2025-05-12 23:34:45,264 - DealFinderAI.ChatMemoryAgent - INFO - Storing context for conversation session_20250512233355_48e00641
2025-05-12 23:34:45,264 - DealFinderAI.ChatMemoryAgent - INFO - Storing 8 products for conversation session_20250512233355_48e00641
2025-05-12 23:34:45,264 - DealFinderAI.Controller - INFO - Successfully stored search results in memory
2025-05-12 23:37:52,547 - DealFinderAI.Main - INFO - Toggled LangChain integration to: False
2025-05-12 23:38:06,399 - DealFinderAI.Controller - INFO - Processing user query: find me best deal on sony headphones
2025-05-12 23:38:06,400 - DealFinderAI.ChatMemoryAgent - INFO - Analyzing query: 'find me best deal on sony headphones' for conversation session_20250512233355_48e00641
2025-05-12 23:38:06,400 - DealFinderAI.ChatMemoryAgent - INFO - Current product info: True
2025-05-12 23:38:06,401 - DealFinderAI.ChatMemoryAgent - INFO - Number of products in memory: 8
2025-05-12 23:38:06,401 - DealFinderAI.ChatMemoryAgent - INFO - Found 8 products in memory
2025-05-12 23:38:06,404 - DealFinderAI.ChatMemoryAgent - INFO - Follow-up analysis: True, Referenced products: 1
2025-05-12 23:38:06,406 - DealFinderAI.Controller - INFO - Analyze response: {'is_follow_up': True, 'focused_product': None, 'referenced_products': [{'title': '1Pcs Headphones Pads Cushion Replacement Ear For Sony MDR-7506 MDR-V6 MDR-CD', 'price': 4.57, 'shipping': 0.0, 'total_price': 4.57, 'is_free_shipping': True, 'currency': 'USD', 'url': 'https://www.ebay.com/itm/286178183056?_skw=headphones+sony+headphones+Sony&itmmeta=01JV3VB0GAS774E83Q94G5Y9XT&hash=item42a18c8790%3Ag%3AYJ4AAOSwIjJnQDms&itmprp=enc%3AAQAKAAABAFkggFvd1GGDu0w3yXCmi1ewYuKjUHKMSyuC8%2FvK8s1Qk8WZ7NEsf0%2B9W7zpszkkI1iqNluR1YgzQ7M302Jz%2FNcU%2B5MFn9e5pdv512GW1JytGkrZwkAMPi6bojE8%2FXjbM67k7FwcZTPuH7pYSsN%2BHXr2BaxuEXTJYGlNr5RX2bWIyi03zOjZfbkY%2FuEk1ylzEeqECZIkwQ7s6Y2NYWDp2Xx9CuI35NQ5bN4onOLgijZ%2BALRPeIZj0aKdY7zZPlWO9E%2BU8mauFvMk60hzDm0VN7%2FPjO3QLinwXayPMjLEX9dm3lEctmgPyOWiXmH8tjY5DIy6PfzAZQ%2F9HiUBseTvgzc%3D%7Ctkp%3ABk9SR6qIrPvYZQ&keyword=headphones+sony+headphones+Sony&sacat=0&relatedSearch=true&LH_BIN=1', 'image_url': '', 'is_sponsored': False, 'condition': 'Brand New', 'listing_type': 'Buy It Now', 'seller_rating': 97.6, 'item_id': '286178183056', 'source': 'eBay', '_score': 59.543}], 'products': [{'title': '1Pcs Headphones Pads Cushion Replacement Ear For Sony MDR-7506 MDR-V6 MDR-CD', 'price': 4.57, 'shipping': 0.0, 'total_price': 4.57, 'is_free_shipping': True, 'currency': 'USD', 'url': 'https://www.ebay.com/itm/286178183056?_skw=headphones+sony+headphones+Sony&itmmeta=01JV3VB0GAS774E83Q94G5Y9XT&hash=item42a18c8790%3Ag%3AYJ4AAOSwIjJnQDms&itmprp=enc%3AAQAKAAABAFkggFvd1GGDu0w3yXCmi1ewYuKjUHKMSyuC8%2FvK8s1Qk8WZ7NEsf0%2B9W7zpszkkI1iqNluR1YgzQ7M302Jz%2FNcU%2B5MFn9e5pdv512GW1JytGkrZwkAMPi6bojE8%2FXjbM67k7FwcZTPuH7pYSsN%2BHXr2BaxuEXTJYGlNr5RX2bWIyi03zOjZfbkY%2FuEk1ylzEeqECZIkwQ7s6Y2NYWDp2Xx9CuI35NQ5bN4onOLgijZ%2BALRPeIZj0aKdY7zZPlWO9E%2BU8mauFvMk60hzDm0VN7%2FPjO3QLinwXayPMjLEX9dm3lEctmgPyOWiXmH8tjY5DIy6PfzAZQ%2F9HiUBseTvgzc%3D%7Ctkp%3ABk9SR6qIrPvYZQ&keyword=headphones+sony+headphones+Sony&sacat=0&relatedSearch=true&LH_BIN=1', 'image_url': '', 'is_sponsored': False, 'condition': 'Brand New', 'listing_type': 'Buy It Now', 'seller_rating': 97.6, 'item_id': '286178183056', 'source': 'eBay', '_score': 59.543}, {'title': 'Replacement Noise Isolation Silicone Soft Ear Buds Earplug Tips for Senso, TOZO, Sony, Zeus, Otium, Hussar Sport in Ear Headphones Wireless Earphones (Red, Small - 5 Pair)', 'price': 6.95, 'currency': 'USD', 'url': '/ip/Replacement-Noise-Isolation-Silicone-Soft-Ear-Buds-Earplug-Tips-Senso-TOZO-Sony-Zeus-Otium-Hussar-Sport-Ear-Headphones-Wireless-Earphones-Red-Small-5/197701625?classType=REGULAR&from=/search', 'image_url': 'https://i5.walmartimages.com/seo/Replacement-Noise-Isolation-Silicone-Soft-Ear-Buds-Earplug-Tips-Senso-TOZO-Sony-Zeus-Otium-Hussar-Sport-Headphones-Wireless-Earphones-Red-Small-5-Pai_1e87279f-a075-4014-9f9a-3642903c7cdf.e824b1d3c2d74c7a4780aa17205c2518.jpeg?odnHeight=580&odnWidth=580&odnBg=FFFFFF', 'rating': 0.0, 'reviews': 0, 'is_sponsored': False, 'is_pickup_today': False, 'product_id': '6V19OHDDA2X5', 'source': 'Walmart', '_score': 29.305}, {'title': 'Sony MDREX15LP in-Ear Earbud Headphones, Black', 'price': 6.29, 'shipping': 0.0, 'total_price': 6.29, 'is_free_shipping': True, 'currency': 'USD', 'url': 'https://www.ebay.com/itm/376098584751?_skw=headphones+sony+headphones+Sony&epid=1724872641&itmmeta=01JV3VB0GA3CTAMF5RJPM4PR4P&hash=item579138f8af%3Ag%3ArEwAAeSwx0Fn4wDa&itmprp=enc%3AAQAKAAABAFkggFvd1GGDu0w3yXCmi1c%2BIv143s1Urd5k59VL6M5dN%2BAY8%2BjhxNKYSgrIvEXQocJlVwNNIR9N%2Bv%2FScoItnq1tDzSWKR%2B92oxYScDnxDS3Row77kVWIU%2FasS15Zdxod8gP3ekxHhJzyX%2BuncPA1t7Po6KHnFFg3XuO18QJApyUjDAArMKNS%2BhZjpV9l%2Falq2bEEy7uZkciEY2ZfXQdoV2OUENlN454eJ91723WpfvGXD7HN3BcvwUKWTtCB4AQpKJxjrKK5oWkMbhfFiVkIPwhep8%2BCnpPDCU%2BrPTcclFsphM1H8ER4aVdopHDQM3kRNfTC%2BDGyt2p2PgeD5CeHfE%3D%7Ctkp%3ABk9SR6qIrPvYZQ&keyword=headphones+sony+headphones+Sony&sacat=0&relatedSearch=true&LH_BIN=1', 'image_url': '', 'is_sponsored': False, 'condition': 'Pre-Owned', 'listing_type': 'Buy It Now', 'seller_rating': 97.0, 'item_id': '376098584751', 'source': 'eBay', '_score': 49.370999999999995}, {'title': 'Sony MDREX14AP In-Ear Earbud Headphones with Mic (Black)', 'price': 7.25, 'shipping': 0.0, 'total_price': 7.25, 'is_free_shipping': True, 'currency': 'USD', 'url': 'https://www.ebay.com/itm/286198002791?_skw=headphones+sony+headphones+Sony&itmmeta=01JV3VB0GAQCDJG6K4N6GG2G3B&hash=item42a2baf467%3Ag%3AYrgAAOSwuvFmtloX&itmprp=enc%3AAQAKAAAA4FkggFvd1GGDu0w3yXCmi1exm%2FZITpLOmODDLDsQ%2BNj602Hz6%2BQWjDZ6v9VzFuBkUKP6sevuya7PDB8UWARCVqMVmjwJ9I1ed9rYjoP8gbEHxTsiooe9jm1uvTCwihNhGfDYTX0UDiMyghhLi9X3iIH7IqruyidyuN3XESrhEON3zf2qJOc94Qh2%2B0MQKbGxpYNNH%2B0jAuYRX6gbwEm1OGfoRlo5yJQK8oNBoW%2FubB3ir%2Bvpmq3QSY1x1E1RpzZo794nbRFFYOE3pFORIuxu6t12Ztq07jHMwmU7vOFkvJHd%7Ctkp%3ABk9SR6qIrPvYZQ&keyword=headphones+sony+headphones+Sony&sacat=0&relatedSearch=true&LH_BIN=1', 'image_url': '', 'is_sponsored': False, 'condition': 'Pre-Owned', 'listing_type': 'Buy It Now', 'seller_rating': 96.9, 'item_id': '286198002791', 'source': 'eBay', '_score': 49.275, 'effective_price': 7.25}, {'title': 'UrbanX R2 Wired in-Ear Headphones with Mic For Sony Xperia L3 with Tangle-Free Cord, Noise Isolating Earphones, Deep Bass, In Ear Bud Silicone Tips', 'price': 7.02, 'currency': 'USD', 'url': '/ip/UrbanX-R2-Wired-in-Ear-Headphones-with-Mic-For-Sony-Xperia-L3-with-Tangle-Free-Cord-Noise-Isolating-Earphones-Deep-Bass-In-Ear-Bud-Silicone-Tips/999158094?classType=VARIANT&from=/search', 'image_url': 'https://i5.walmartimages.com/seo/UrbanX-R2-Wired-in-Ear-Headphones-with-Mic-For-Sony-Xperia-L3-with-Tangle-Free-Cord-Noise-Isolating-Earphones-Deep-Bass-In-Ear-Bud-Silicone-Tips_7b16269a-7a2c-4653-88ab-f721e9339bfa.7f1583e0800acc545ef6f29467971859.png?odnHeight=580&odnWidth=580&odnBg=FFFFFF', 'rating': 0.0, 'reviews': 0, 'is_sponsored': False, 'is_pickup_today': False, 'product_id': '1PLVPJV5V7MY', 'source': 'Walmart', '_score': 29.298000000000002, 'effective_price': 7.02}, {'title': 'UrbanX R2 Wired in-Ear Headphones with Mic For Sony Xperia Z5 Premium Dual with Tangle-Free Cord, Noise Isolating Earphones, Deep Bass, In Ear Bud Silicone Tips', 'price': 7.02, 'currency': 'USD', 'url': '/ip/UrbanX-R2-Wired-in-Ear-Headphones-Mic-Sony-Xperia-Z5-Premium-Dual-Tangle-Free-Cord-Noise-Isolating-Earphones-Deep-Bass-Ear-Bud-Silicone-Tips/391153749?classType=VARIANT&from=/search', 'image_url': 'https://i5.walmartimages.com/seo/UrbanX-R2-Wired-in-Ear-Headphones-Mic-For-Sony-Xperia-Z5-Premium-Dual-Tangle-Free-Cord-Noise-Isolating-Earphones-Deep-Bass-In-Ear-Bud-Silicone-Tips_7b16269a-7a2c-4653-88ab-f721e9339bfa.7f1583e0800acc545ef6f29467971859.png?odnHeight=580&odnWidth=580&odnBg=FFFFFF', 'rating': 0.0, 'reviews': 0, 'is_sponsored': False, 'is_pickup_today': False, 'product_id': '61QTNLPO4MO6', 'source': 'Walmart', '_score': 29.298000000000002, 'effective_price': 7.02}, {'title': 'Sony MDR-EX14AP Wired In-ear Earbud Headphones with Microphone, White', 'price': 7.88, 'currency': 'USD', 'url': '/ip/Sony-MDREX14AP-W6-In-Ear-Earbud-Headphones-with-Mic-White/962793502?classType=VARIANT&from=/search', 'image_url': 'https://i5.walmartimages.com/seo/Sony-MDREX14AP-W6-In-Ear-Earbud-Headphones-with-Mic-White_c8a99049-9d14-4189-b141-a1f9d0fa898c_1.0617d7b256ffbe6c2f4794741ae78cfd.png?odnHeight=580&odnWidth=580&odnBg=FFFFFF', 'rating': 0.0, 'reviews': 0, 'is_sponsored': False, 'is_pickup_today': False, 'product_id': '64184Z9N9F4Y', 'source': 'Walmart', '_score': 29.212, 'effective_price': 7.88}, {'title': 'Sony MDR-EX14AP Wired In-ear Earbud Headphones with Microphone, Black', 'price': 7.88, 'currency': 'USD', 'url': '/ip/Sony-In-Ear-Headphones-Black-MDREX14AP-B6/479338409?classType=VARIANT&athbdg=L1600&from=/search', 'image_url': 'https://i5.walmartimages.com/seo/Sony-In-Ear-Headphones-Black-MDREX14AP-B6_6ccaeb5f-25c9-4861-b081-9fe779ae61fd_1.7ce0f6276276e67934ee100c02732086.png?odnHeight=580&odnWidth=580&odnBg=FFFFFF', 'rating': 0.0, 'reviews': 0, 'is_sponsored': False, 'is_pickup_today': False, 'product_id': '5MOD5EC3ERXW', 'source': 'Walmart', '_score': 29.212, 'effective_price': 7.88}]}
2025-05-12 23:38:06,407 - DealFinderAI.Controller - INFO - Is follow-up? True
2025-05-12 23:38:06,407 - DealFinderAI.Controller - INFO - Referenced products: 1
2025-05-12 23:38:06,408 - DealFinderAI.Controller - INFO - Handling as follow-up question about 1 products
2025-05-12 23:38:06,408 - DealFinderAI.Controller - INFO - Handling follow-up question: find me best deal on sony headphones
2025-05-12 23:38:06,408 - DealFinderAI.Controller - INFO - Referenced products: 1
2025-05-12 23:38:06,408 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: 
            I'm a shopping assistant helping a customer with product information.
            
            The customer previously searched for products and is now asking a follow-up question: "find me best deal on sony headphones"
            
            They're referring to this product:
            {
  "title": "1Pcs Headphones Pads Cushion Replacement Ear For Sony MDR-7506 MDR-V6 MDR-CD",
  "price": 4.57,
  "shipping": 0.0,
  "total_price": 4.57,
  "is_free_shipping": true,
  "currency": "USD",
  "url": "https://www.ebay.com/itm/286178183056?_skw=headphones+sony+headphones+Sony&itmmeta=01JV3VB0GAS774E83Q94G5Y9XT&hash=item42a18c8790%3Ag%3AYJ4AAOSwIjJnQDms&itmprp=enc%3AAQAKAAABAFkggFvd1GGDu0w3yXCmi1ewYuKjUHKMSyuC8%2FvK8s1Qk8WZ7NEsf0%2B9W7zpszkkI1iqNluR1YgzQ7M302Jz%2FNcU%2B5MFn9e5pdv512GW1JytGkrZwkAMPi6bojE8%2FXjbM67k7FwcZTPuH7pYSsN%2BHXr2BaxuEXTJYGlNr5RX2bWIyi03zOjZfbkY%2FuEk1ylzEeqECZIkwQ7s6Y2NYWDp2Xx9CuI35NQ5bN4onOLgijZ%2BALRPeIZj0aKdY7zZPlWO9E%2BU8mauFvMk60hzDm0VN7%2FPjO3QLinwXayPMjLEX9dm3lEctmgPyOWiXmH8tjY5DIy6PfzAZQ%2F9HiUBseTvgzc%3D%7Ctkp%3ABk9SR6qIrPvYZQ&keyword=headphones+sony+headphones+Sony&sacat=0&relatedSearch=true&LH_BIN=1",
  "image_url": "",
  "is_sponsored": false,
  "condition": "Brand New",
  "listing_type": "Buy It Now",
  "seller_rating": 97.6,
  "item_id": "286178183056",
  "source": "eBay",
  "_score": 59.543
}
            
            Please provide a helpful, conversational response addressing their question
            about this product. Include relevant details from the product information.
            
            If the product is a "best deal", emphasize why it's a good value compared to alternatives.
            If they're asking about comparisons to other products, highlight the key differences.
            If they're asking about specific features, focus on those details.
            
2025-05-12 23:38:19,731 - DealFinderAI.Main - INFO - Toggled LangChain integration to: True
2025-05-12 23:40:19,466 - DealFinderAI - INFO - Logging initialized
2025-05-12 23:40:19,467 - DealFinderAI.Main - INFO - Starting DealFinder AI
2025-05-12 23:40:19,467 - DealFinderAI.Main - INFO - Using LangChain implementation
2025-05-12 23:40:19,507 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-12 23:40:19,507 - DealFinderAI.Controller - INFO - Initialized scraper agents: ['amazon', 'walmart', 'ebay']
2025-05-12 23:40:19,507 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-12 23:40:19,507 - DealFinderAI.Controller - INFO - Initialized scraper agents: ['amazon', 'walmart', 'ebay']
2025-05-12 23:40:19,507 - DealFinderAI.Main - INFO - Web app using LangChain implementation with Gemini model
2025-05-12 23:40:32,022 - DealFinderAI - INFO - Logging initialized
2025-05-12 23:40:32,022 - DealFinderAI.Main - INFO - Starting DealFinder AI
2025-05-12 23:40:32,022 - DealFinderAI.Main - INFO - Using LangChain implementation
2025-05-12 23:40:32,060 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-12 23:40:32,060 - DealFinderAI.Controller - INFO - Initialized scraper agents: ['amazon', 'walmart', 'ebay']
2025-05-12 23:40:32,060 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-12 23:40:32,060 - DealFinderAI.Controller - INFO - Initialized scraper agents: ['amazon', 'walmart', 'ebay']
2025-05-12 23:40:32,060 - DealFinderAI.Main - INFO - Web app using LangChain implementation with Gemini model
2025-05-12 23:40:32,342 - DealFinderAI - INFO - Logging initialized
2025-05-12 23:40:32,343 - DealFinderAI.Main - INFO - Starting DealFinder AI
2025-05-12 23:40:32,343 - DealFinderAI.Main - INFO - Using LangChain implementation
2025-05-12 23:40:32,370 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-12 23:40:32,370 - DealFinderAI.Controller - INFO - Initialized scraper agents: ['amazon', 'walmart', 'ebay']
2025-05-12 23:40:32,370 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-12 23:40:32,370 - DealFinderAI.Controller - INFO - Initialized scraper agents: ['amazon', 'walmart', 'ebay']
2025-05-12 23:40:32,370 - DealFinderAI.Main - INFO - Web app using LangChain implementation with Gemini model
2025-05-12 23:40:50,958 - DealFinderAI.Controller - INFO - Processing user query: find me the best deal on sony headphones
2025-05-12 23:40:50,958 - DealFinderAI.ChatMemoryAgent - INFO - Analyzing query: 'find me the best deal on sony headphones' for conversation session_20250512234036_a9d76dcf
2025-05-12 23:40:50,959 - DealFinderAI.ChatMemoryAgent - INFO - Current product info: False
2025-05-12 23:40:50,959 - DealFinderAI.ChatMemoryAgent - INFO - No product context available for this conversation
2025-05-12 23:40:50,959 - DealFinderAI.Controller - INFO - Analyze response: {'is_follow_up': False, 'focused_product': None, 'referenced_products': [], 'products': []}
2025-05-12 23:40:50,959 - DealFinderAI.Controller - INFO - Is follow-up? False
2025-05-12 23:40:50,959 - DealFinderAI.Controller - INFO - Referenced products: 0
2025-05-12 23:40:50,959 - DealFinderAI.Controller - INFO - Processing as new search query
2025-05-12 23:40:50,959 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: find me the best deal on sony headphones
2025-05-12 23:40:52,131 - DealFinderAI.GeminiAgent - WARNING - Failed to parse Gemini response as JSON: ```json
{
  "product_type": "headphones",
  "keywords": ["sony", "headphones"],
  "price_range": null,
  "brands": ["Sony"],
  "features": [],
  "sorting_preference": "price_low_to_high",
  "buy_it_now": true
}
```

2025-05-12 23:40:52,131 - DealFinderAI.Controller - INFO - Parsed search parameters: {'product_type': 'headphones', 'keywords': ['sony', 'headphones'], 'price_range': None, 'brands': ['Sony'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-12 23:40:52,132 - DealFinderAI.AmazonScraperAgent - INFO - Searching Amazon for: {'product_type': 'headphones', 'keywords': ['sony', 'headphones'], 'price_range': None, 'brands': ['Sony'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-12 23:40:53,334 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B0BGVNXHNH at 2.99 USD
2025-05-12 23:40:53,335 - DealFinderAI.AmazonScraperAgent - WARNING - Incomplete data for ASIN B004MMG380, falling back to Gemini extraction.
2025-05-12 23:40:56,438 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B004MMG380 at 0.0 USD
2025-05-12 23:40:56,447 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B009HW15UG at 8.95 USD
2025-05-12 23:40:56,456 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B00NJ2M43M at 10.99 USD
2025-05-12 23:40:56,460 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B07TB5Z58C at 14.99 USD
2025-05-12 23:40:57,779 - DealFinderAI.WalmartScraperAgent - INFO - Searching Walmart for: {'product_type': 'headphones', 'keywords': ['sony', 'headphones'], 'price_range': None, 'brands': ['Sony'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-12 23:41:02,244 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-12 23:41:02,244 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Replacement Noise Isolation Silicone Soft Ear Buds Earplug Tips for Senso, TOZO, Sony, Zeus, Otium, Hussar Sport in Ear Headphones Wireless Earphones (Red, Small - 5 Pair) at 6.95 USD
2025-05-12 23:41:02,245 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Replacement Noise Isolation Silicone Soft Ear Buds Earplug Tips for Senso, TOZO, Sony, Zeus, Otium, Hussar Sport in Ear Headphones Wireless Earphones (Red, Small - 5 Pair) at 6.95 USD
2025-05-12 23:41:05,200 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-12 23:41:05,200 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: UrbanX R2 Wired in-Ear Headphones with Mic For Sony Xperia L3 with Tangle-Free Cord, Noise Isolating Earphones, Deep Bass, In Ear Bud Silicone Tips at 7.02 USD
2025-05-12 23:41:05,201 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: UrbanX R2 Wired in-Ear Headphones with Mic For Sony Xperia L3 with Tangle-Free Cord, Noise Isolating Earphones, Deep Bass, In Ear Bud Silicone Tips at 7.02 USD
2025-05-12 23:41:08,017 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-12 23:41:08,018 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: UrbanX R2 Wired in-Ear Headphones with Mic For Sony Xperia Z5 Premium Dual with Tangle-Free Cord, Noise Isolating Earphones, Deep Bass, In Ear Bud Silicone Tips at 7.02 USD
2025-05-12 23:41:08,018 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: UrbanX R2 Wired in-Ear Headphones with Mic For Sony Xperia Z5 Premium Dual with Tangle-Free Cord, Noise Isolating Earphones, Deep Bass, In Ear Bud Silicone Tips at 7.02 USD
2025-05-12 23:41:10,533 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-12 23:41:10,533 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Sony MDR-EX14AP Wired In-ear Earbud Headphones with Microphone, White at 7.88 USD
2025-05-12 23:41:10,533 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Sony MDR-EX14AP Wired In-ear Earbud Headphones with Microphone, White at 7.88 USD
2025-05-12 23:41:12,883 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-12 23:41:12,884 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Sony MDR-EX14AP Wired In-ear Earbud Headphones with Microphone, Black at 7.88 USD
2025-05-12 23:41:12,884 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Sony MDR-EX14AP Wired In-ear Earbud Headphones with Microphone, Black at 7.88 USD
2025-05-12 23:41:12,885 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Replacement Noise Isolation Silicone Soft Ear Buds Earplug Tips for Senso, TOZO, Sony, Zeus, Otium, Hussar Sport in Ear Headphones Wireless Earphones (Red, Small - 5 Pair) at 6.95 USD
2025-05-12 23:41:12,885 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: UrbanX R2 Wired in-Ear Headphones with Mic For Sony Xperia L3 with Tangle-Free Cord, Noise Isolating Earphones, Deep Bass, In Ear Bud Silicone Tips at 7.02 USD
2025-05-12 23:41:12,885 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: UrbanX R2 Wired in-Ear Headphones with Mic For Sony Xperia Z5 Premium Dual with Tangle-Free Cord, Noise Isolating Earphones, Deep Bass, In Ear Bud Silicone Tips at 7.02 USD
2025-05-12 23:41:12,885 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Sony MDR-EX14AP Wired In-ear Earbud Headphones with Microphone, White at 7.88 USD
2025-05-12 23:41:12,885 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Sony MDR-EX14AP Wired In-ear Earbud Headphones with Microphone, Black at 7.88 USD
2025-05-12 23:41:13,855 - DealFinderAI.EbayScraperAgent - INFO - Searching eBay for: {'product_type': 'headphones', 'keywords': ['sony', 'headphones'], 'price_range': None, 'brands': ['Sony'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-12 23:41:15,159 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: 1Pcs Headphones Pads Cushion Replacement Ear For Sony MDR-7506 MDR-V6 MDR-CD at 4.57 USD
2025-05-12 23:41:15,159 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: 1Pcs Headphones Pads Cushion Replacement Ear For Sony MDR-7506 MDR-V6 MDR-CD at 4.57 USD
2025-05-12 23:41:15,161 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Sony MDREX15LP in-Ear Earbud Headphones, Black at 6.29 USD
2025-05-12 23:41:15,161 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Sony MDREX15LP in-Ear Earbud Headphones, Black at 6.29 USD
2025-05-12 23:41:15,162 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Sony MDR-EX14AP Headset Ear Bud Headphones MDREX14AP WHITE #93 NEW at 6.95 USD
2025-05-12 23:41:15,162 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Sony MDR-EX14AP Headset Ear Bud Headphones MDREX14AP WHITE #93 NEW at 6.95 USD
2025-05-12 23:41:16,440 - DealFinderAI.ResultsAggregatorAgent - INFO - Aggregating results for query: find me the best deal on sony headphones
2025-05-12 23:41:16,440 - DealFinderAI.ResultsAggregatorAgent - INFO - Found 3 results from various sources
2025-05-12 23:41:16,440 - DealFinderAI.ProductComparisonAgent - INFO - Comparing products for query: find me the best deal on sony headphones
2025-05-12 23:41:16,440 - DealFinderAI.ProductComparisonAgent - INFO - Found 8 products to compare
2025-05-12 23:41:16,441 - DealFinderAI.ChatMemoryAgent - INFO - Storing context for conversation session_20250512234036_a9d76dcf
2025-05-12 23:41:16,441 - DealFinderAI.ChatMemoryAgent - INFO - Storing 8 products for conversation session_20250512234036_a9d76dcf
2025-05-12 23:41:16,442 - DealFinderAI.PresentationAgent - INFO - Preparing presentation for 8 products
2025-05-12 23:41:16,442 - DealFinderAI.ChatMemoryAgent - INFO - Storing context for conversation session_20250512234036_a9d76dcf
2025-05-12 23:41:16,442 - DealFinderAI.ChatMemoryAgent - INFO - Storing 8 products for conversation session_20250512234036_a9d76dcf
2025-05-12 23:41:16,442 - DealFinderAI.Controller - INFO - Successfully stored search results in memory
2025-05-13 09:29:00,214 - DealFinderAI - INFO - Logging initialized
2025-05-13 09:29:00,214 - DealFinderAI.Main - INFO - Starting DealFinder AI
2025-05-13 09:29:00,214 - DealFinderAI.Main - INFO - Using LangChain implementation
2025-05-13 09:29:00,258 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-13 09:29:00,258 - DealFinderAI.Controller - INFO - Initialized scraper agents: ['amazon', 'walmart', 'ebay']
2025-05-13 09:29:00,258 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-13 09:29:00,258 - DealFinderAI.Controller - INFO - Initialized scraper agents: ['amazon', 'walmart', 'ebay']
2025-05-13 09:29:00,258 - DealFinderAI.Main - INFO - Web app using LangChain implementation with Gemini model
2025-05-13 09:29:12,222 - DealFinderAI - INFO - Logging initialized
2025-05-13 09:29:12,222 - DealFinderAI.Main - INFO - Starting DealFinder AI
2025-05-13 09:29:12,222 - DealFinderAI.Main - INFO - Using LangChain implementation
2025-05-13 09:29:12,262 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-13 09:29:12,262 - DealFinderAI.Controller - INFO - Initialized scraper agents: ['amazon', 'walmart', 'ebay']
2025-05-13 09:29:12,262 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-13 09:29:12,262 - DealFinderAI.Controller - INFO - Initialized scraper agents: ['amazon', 'walmart', 'ebay']
2025-05-13 09:29:12,262 - DealFinderAI.Main - INFO - Web app using LangChain implementation with Gemini model
2025-05-13 09:29:12,527 - DealFinderAI - INFO - Logging initialized
2025-05-13 09:29:12,528 - DealFinderAI.Main - INFO - Starting DealFinder AI
2025-05-13 09:29:12,528 - DealFinderAI.Main - INFO - Using LangChain implementation
2025-05-13 09:29:12,554 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-13 09:29:12,554 - DealFinderAI.Controller - INFO - Initialized scraper agents: ['amazon', 'walmart', 'ebay']
2025-05-13 09:29:12,554 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-13 09:29:12,554 - DealFinderAI.Controller - INFO - Initialized scraper agents: ['amazon', 'walmart', 'ebay']
2025-05-13 09:29:12,554 - DealFinderAI.Main - INFO - Web app using LangChain implementation with Gemini model
2025-05-13 09:30:01,503 - DealFinderAI.Controller - INFO - Processing user query: find me best deal on ipad 11 pro
2025-05-13 09:30:01,504 - DealFinderAI.ChatMemoryAgent - INFO - Analyzing query: 'find me best deal on ipad 11 pro' for conversation session_20250513092918_d4816352
2025-05-13 09:30:01,504 - DealFinderAI.ChatMemoryAgent - INFO - Current product info: False
2025-05-13 09:30:01,504 - DealFinderAI.ChatMemoryAgent - INFO - No product context available for this conversation
2025-05-13 09:30:01,504 - DealFinderAI.Controller - INFO - Analyze response: {'is_follow_up': False, 'focused_product': None, 'referenced_products': [], 'products': []}
2025-05-13 09:30:01,504 - DealFinderAI.Controller - INFO - Is follow-up? False
2025-05-13 09:30:01,504 - DealFinderAI.Controller - INFO - Referenced products: 0
2025-05-13 09:30:01,504 - DealFinderAI.Controller - INFO - Processing as new search query
2025-05-13 09:30:01,505 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: find me best deal on ipad 11 pro
2025-05-13 09:30:02,680 - DealFinderAI.GeminiAgent - WARNING - Failed to parse Gemini response as JSON: ```json
{
  "product_type": "tablet",
  "keywords": ["ipad", "11 pro"],
  "price_range": null,
  "brands": ["ipad"],
  "features": [],
  "sorting_preference": "price_low_to_high",
  "buy_it_now": true
}
```

2025-05-13 09:30:02,681 - DealFinderAI.Controller - INFO - Parsed search parameters: {'product_type': 'tablet', 'keywords': ['ipad', '11 pro'], 'price_range': None, 'brands': ['ipad'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-13 09:30:02,681 - DealFinderAI.AmazonScraperAgent - INFO - Searching Amazon for: {'product_type': 'tablet', 'keywords': ['ipad', '11 pro'], 'price_range': None, 'brands': ['ipad'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-13 09:30:04,406 - DealFinderAI.AmazonScraperAgent - WARNING - Incomplete data for ASIN B0CMPP8JX4, falling back to Gemini extraction.
2025-05-13 09:30:07,833 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B0CMPP8JX4 at 0.0 USD
2025-05-13 09:30:07,846 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B0DPF1FT5M at 44.99 USD
2025-05-13 09:30:07,853 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B078MQDJR5 at 149.0 USD
2025-05-13 09:30:07,858 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B074PWW6NS at 94.99 USD
2025-05-13 09:30:07,864 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B00TREI0D4 at 89.99 USD
2025-05-13 09:30:09,086 - DealFinderAI.WalmartScraperAgent - INFO - Searching Walmart for: {'product_type': 'tablet', 'keywords': ['ipad', '11 pro'], 'price_range': None, 'brands': ['ipad'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-13 09:30:15,113 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 09:30:15,114 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: 10-11 in Tablet Neoprene IFF17 Shock Proof Sleeve Bag Carrying Case for iPad 10th Gen iPad Air 10.5 iPad Pro 11 Samsung Galaxy Tab A9+ 11 S9 S8 11 in A8 10.5 Surface Go 3 10.5 (11 inch, Black) at 22.78 USD
2025-05-13 09:30:15,114 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: 10-11 in Tablet Neoprene IFF17 Shock Proof Sleeve Bag Carrying Case for iPad 10th Gen iPad Air 10.5 iPad Pro 11 Samsung Galaxy Tab A9+ 11 S9 S8 11 in A8 10.5 Surface Go 3 10.5 (11 inch, Black) at 22.78 USD
2025-05-13 09:30:18,392 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 09:30:18,392 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: 10-11 in Tablet Neoprene SSF20 Shock Proof Sleeve Bag Carrying Case for iPad 10th Gen iPad Air 10.5 iPad Pro 11 Samsung Galaxy Tab A9+ 11 S9 S8 11 in A8 10.5 Surface Go 3 10.5 (11 inch, Black) at 22.78 USD
2025-05-13 09:30:18,393 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: 10-11 in Tablet Neoprene SSF20 Shock Proof Sleeve Bag Carrying Case for iPad 10th Gen iPad Air 10.5 iPad Pro 11 Samsung Galaxy Tab A9+ 11 S9 S8 11 in A8 10.5 Surface Go 3 10.5 (11 inch, Black) at 22.78 USD
2025-05-13 09:30:21,709 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 09:30:21,710 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: 10-11 in Tablet Neoprene RRF12 Shock Proof Sleeve Bag Carrying Case for iPad 10th Gen iPad Air 10.5 iPad Pro 11 Samsung Galaxy Tab A9+ 11 S9 S8 11 in A8 10.5 Surface Go 3 10.5 (11 inch, Black) at 22.78 USD
2025-05-13 09:30:21,710 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: 10-11 in Tablet Neoprene RRF12 Shock Proof Sleeve Bag Carrying Case for iPad 10th Gen iPad Air 10.5 iPad Pro 11 Samsung Galaxy Tab A9+ 11 S9 S8 11 in A8 10.5 Surface Go 3 10.5 (11 inch, Black) at 22.78 USD
2025-05-13 09:30:25,029 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 09:30:25,029 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: 10-11 in Tablet Neoprene KEF16 Shock Proof Sleeve Bag Carrying Case for iPad 10th Gen iPad Air 10.5 iPad Pro 11 Samsung Galaxy Tab A9+ 11 S9 S8 11 in A8 10.5 Surface Go 3 10.5 (11 inch, Black) at 22.78 USD
2025-05-13 09:30:25,030 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: 10-11 in Tablet Neoprene KEF16 Shock Proof Sleeve Bag Carrying Case for iPad 10th Gen iPad Air 10.5 iPad Pro 11 Samsung Galaxy Tab A9+ 11 S9 S8 11 in A8 10.5 Surface Go 3 10.5 (11 inch, Black) at 22.78 USD
2025-05-13 09:30:28,826 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 09:30:28,826 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: iPad PRO 11 Inch 2020 2 Gen 2021 3 Gen 2022 4 Gen A2228 A2068 A2230 MY232LL/A MXDC2LL/A MXDE2LL/A MXDG2LL/A MY252LL/A MXDD2LL/A MXDF2LL/A iPad Cover with Translucent Frosted Hard Back - Rose Gold at 29.99 USD
2025-05-13 09:30:28,827 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: iPad PRO 11 Inch 2020 2 Gen 2021 3 Gen 2022 4 Gen A2228 A2068 A2230 MY232LL/A MXDC2LL/A MXDE2LL/A MXDG2LL/A MY252LL/A MXDD2LL/A MXDF2LL/A iPad Cover with Translucent Frosted Hard Back - Rose Gold at 29.99 USD
2025-05-13 09:30:29,512 - DealFinderAI.EbayScraperAgent - INFO - Searching eBay for: {'product_type': 'tablet', 'keywords': ['ipad', '11 pro'], 'price_range': None, 'brands': ['ipad'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-13 09:30:31,080 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Transparent Tablet Case For iPad Pro 12.9 11 10th 9th 8th Air 5/4 Protect Cover at 3.37 USD
2025-05-13 09:30:31,081 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Case For iPad Air 4/5 10.9 Mini 8.3 Pro 11 Inch Rugged Kickstand EVA Tablet Case at 5.87 USD
2025-05-13 09:30:31,081 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Case For iPad Pro 11 Inch 2022 2021 2020 Silicone Hybrid Tablet Case Stand Cover at 5.99 USD
2025-05-13 09:30:31,728 - DealFinderAI.ResultsAggregatorAgent - INFO - Aggregating results for query: find me best deal on ipad 11 pro
2025-05-13 09:30:31,728 - DealFinderAI.ResultsAggregatorAgent - INFO - Found 3 results from various sources
2025-05-13 09:31:16,883 - DealFinderAI.Controller - INFO - Processing user query: find me ipad 11inch
2025-05-13 09:31:16,883 - DealFinderAI.ChatMemoryAgent - INFO - Analyzing query: 'find me ipad 11inch' for conversation session_20250513092918_d4816352
2025-05-13 09:31:16,883 - DealFinderAI.ChatMemoryAgent - INFO - Current product info: False
2025-05-13 09:31:16,883 - DealFinderAI.ChatMemoryAgent - INFO - No product context available for this conversation
2025-05-13 09:31:16,883 - DealFinderAI.Controller - INFO - Analyze response: {'is_follow_up': False, 'focused_product': None, 'referenced_products': [], 'products': []}
2025-05-13 09:31:16,884 - DealFinderAI.Controller - INFO - Is follow-up? False
2025-05-13 09:31:16,884 - DealFinderAI.Controller - INFO - Referenced products: 0
2025-05-13 09:31:16,884 - DealFinderAI.Controller - INFO - Processing as new search query
2025-05-13 09:31:16,884 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: find me ipad 11inch
2025-05-13 09:31:17,720 - DealFinderAI.GeminiAgent - WARNING - Failed to parse Gemini response as JSON: ```json
{
  "product_type": "tablet",
  "keywords": ["ipad", "11inch"],
  "price_range": null,
  "brands": ["Apple"],
  "features": ["11 inch"],
  "sorting_preference": null,
  "buy_it_now": true
}
```

2025-05-13 09:31:17,721 - DealFinderAI.Controller - INFO - Parsed search parameters: {'product_type': 'tablet', 'keywords': ['ipad', '11inch'], 'price_range': None, 'brands': ['Apple'], 'features': ['11 inch'], 'sorting_preference': None, 'buy_it_now': True}
2025-05-13 09:31:17,721 - DealFinderAI.AmazonScraperAgent - INFO - Searching Amazon for: {'product_type': 'tablet', 'keywords': ['ipad', '11inch'], 'price_range': None, 'brands': ['Apple'], 'features': ['11 inch'], 'sorting_preference': None, 'buy_it_now': True}
2025-05-13 09:31:19,159 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B0D496VGVB at 89.99 USD
2025-05-13 09:31:19,162 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B0D4QMWSX8 at 169.99 USD
2025-05-13 09:31:19,167 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B0DZ75TN5F at 299.0 USD
2025-05-13 09:31:19,171 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B0DZ754XKT at 641.0 USD
2025-05-13 09:31:19,175 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B0D3J7FC1P at 1099.0 USD
2025-05-13 09:31:19,695 - DealFinderAI.WalmartScraperAgent - INFO - Searching Walmart for: {'product_type': 'tablet', 'keywords': ['ipad', '11inch'], 'price_range': None, 'brands': ['Apple'], 'features': ['11 inch'], 'sorting_preference': None, 'buy_it_now': True}
2025-05-13 09:31:24,422 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 09:31:24,423 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: 2025 Apple 11-inch iPad A16 Wi-Fi 128GB - Silver at 327.0 USD
2025-05-13 09:31:24,423 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: 2025 Apple 11-inch iPad A16 Wi-Fi 128GB - Silver at 327.0 USD
2025-05-13 09:31:26,986 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 09:31:26,986 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Apple 11-inch iPad Air Wi-Fi + Cellular 512GB - Blue at 964.0 USD
2025-05-13 09:31:26,987 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Apple 11-inch iPad Air Wi-Fi + Cellular 512GB - Blue at 964.0 USD
2025-05-13 09:31:29,429 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 09:31:29,429 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Apple Apple 11-inch iPad Wi-Fi + Cellular 512GB - Blue at 736.0 USD
2025-05-13 09:31:29,429 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Apple Apple 11-inch iPad Wi-Fi + Cellular 512GB - Blue at 736.0 USD
2025-05-13 09:31:31,880 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 09:31:31,881 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: 2025 Apple 11-inch iPad A16 Wi-Fi 128GB - Silver at 327.0 USD
2025-05-13 09:31:31,881 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: 2025 Apple 11-inch iPad A16 Wi-Fi 128GB - Silver at 327.0 USD
2025-05-13 09:31:34,490 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 09:31:34,491 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: 2025 Apple 11-inch iPad Air M3, Built for Apple Intelligence, Wi-Fi 128GB - Space Gray at 553.0 USD
2025-05-13 09:31:34,491 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: 2025 Apple 11-inch iPad Air M3, Built for Apple Intelligence, Wi-Fi 128GB - Space Gray at 553.0 USD
2025-05-13 09:31:35,644 - DealFinderAI.EbayScraperAgent - INFO - Searching eBay for: {'product_type': 'tablet', 'keywords': ['ipad', '11inch'], 'price_range': None, 'brands': ['Apple'], 'features': ['11 inch'], 'sorting_preference': None, 'buy_it_now': True}
2025-05-13 09:31:37,262 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPad Pro 11-inch M1 3rd Gen. 256GB A2301  MHMV3LL/A Unlocked Excellent at 549.0 USD
2025-05-13 09:31:37,262 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: New 2025 Apple iPad 11-inch (A16) 11th Gen Wi-Fi - 128GB 256GB 512GB at 349.0 USD
2025-05-13 09:31:37,263 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPad Pro 11 in 3rd Gen (2021) Space Gray 256 GB WiFi Fair Condition at 639.0 USD
2025-05-13 09:31:38,015 - DealFinderAI.ResultsAggregatorAgent - INFO - Aggregating results for query: find me ipad 11inch
2025-05-13 09:31:38,015 - DealFinderAI.ResultsAggregatorAgent - INFO - Found 3 results from various sources
2025-05-13 09:31:57,955 - DealFinderAI.Controller - INFO - Processing user query: find me best deal on ipad
2025-05-13 09:31:57,955 - DealFinderAI.ChatMemoryAgent - INFO - Analyzing query: 'find me best deal on ipad' for conversation session_20250513092918_d4816352
2025-05-13 09:31:57,955 - DealFinderAI.ChatMemoryAgent - INFO - Current product info: False
2025-05-13 09:31:57,955 - DealFinderAI.ChatMemoryAgent - INFO - No product context available for this conversation
2025-05-13 09:31:57,955 - DealFinderAI.Controller - INFO - Analyze response: {'is_follow_up': False, 'focused_product': None, 'referenced_products': [], 'products': []}
2025-05-13 09:31:57,955 - DealFinderAI.Controller - INFO - Is follow-up? False
2025-05-13 09:31:57,955 - DealFinderAI.Controller - INFO - Referenced products: 0
2025-05-13 09:31:57,955 - DealFinderAI.Controller - INFO - Processing as new search query
2025-05-13 09:31:57,955 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: find me best deal on ipad
2025-05-13 09:31:58,746 - DealFinderAI.GeminiAgent - WARNING - Failed to parse Gemini response as JSON: ```json
{
  "product_type": "ipad",
  "keywords": ["ipad"],
  "price_range": null,
  "brands": null,
  "features": null,
  "sorting_preference": "price_low_to_high",
  "buy_it_now": true
}
```

2025-05-13 09:31:58,747 - DealFinderAI.Controller - INFO - Parsed search parameters: {'product_type': 'ipad', 'keywords': ['ipad'], 'price_range': None, 'brands': None, 'features': None, 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-13 09:31:58,747 - DealFinderAI.AmazonScraperAgent - INFO - Searching Amazon for: {'product_type': 'ipad', 'keywords': ['ipad'], 'price_range': None, 'brands': None, 'features': None, 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-13 09:32:00,310 - DealFinderAI.AmazonScraperAgent - WARNING - Incomplete data for ASIN B00GXKTN8Q, falling back to Gemini extraction.
2025-05-13 09:32:03,270 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B00GXKTN8Q at 0.0 USD
2025-05-13 09:32:03,272 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B0CKJ4GMSM at 11.6 USD
2025-05-13 09:32:03,273 - DealFinderAI.AmazonScraperAgent - WARNING - Incomplete data for ASIN B0CQ7LMH2N, falling back to Gemini extraction.
2025-05-13 09:32:06,682 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B0CQ7LMH2N at 0.0 USD
2025-05-13 09:32:06,692 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B0CVV7F2R5 at 17.95 USD
2025-05-13 09:32:06,697 - DealFinderAI.AmazonScraperAgent - WARNING - Incomplete data for ASIN B00GFL5SNC, falling back to Gemini extraction.
2025-05-13 09:32:10,205 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B00GFL5SNC at 0.0 USD
2025-05-13 09:32:11,422 - DealFinderAI.WalmartScraperAgent - INFO - Searching Walmart for: {'product_type': 'ipad', 'keywords': ['ipad'], 'price_range': None, 'brands': None, 'features': None, 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-13 09:32:16,874 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 09:32:16,875 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Restored Apple iPad 4 9.7-inch 16GB Wi-Fi, Black (Refurbished) at 41.25 USD
2025-05-13 09:32:16,875 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Restored Apple iPad 4 9.7-inch 16GB Wi-Fi, Black (Refurbished) at 41.25 USD
2025-05-13 09:32:19,384 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 09:32:19,385 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Restored Apple iPad 2 16GB, Wi-Fi, 9.7in - Black - (MC769LL/A) (Refurbished) at 49.89 USD
2025-05-13 09:32:19,385 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Restored Apple iPad 2 16GB, Wi-Fi, 9.7in - Black - (MC769LL/A) (Refurbished) at 49.89 USD
2025-05-13 09:32:21,762 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 09:32:21,763 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Restored Apple iPad 4 16GB Black Retina Display Wi-Fi MD510LL/A (Refurbished) at 53.99 USD
2025-05-13 09:32:21,763 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Restored Apple iPad 4 16GB Black Retina Display Wi-Fi MD510LL/A (Refurbished) at 53.99 USD
2025-05-13 09:32:24,449 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 09:32:24,450 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Restored Apple iPad 4th Gen Retina 16GB Wi-Fi 9.7in - Black - (MD510LL/A) (Refurbished) at 53.99 USD
2025-05-13 09:32:24,450 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Restored Apple iPad 4th Gen Retina 16GB Wi-Fi 9.7in - Black - (MD510LL/A) (Refurbished) at 53.99 USD
2025-05-13 09:32:26,991 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 09:32:26,991 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Restored Apple iPad mini 16GB, Wi-Fi, 7.9" - Space Gray - (MF432LL/A) (Refurbished) at 54.99 USD
2025-05-13 09:32:26,991 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Restored Apple iPad mini 16GB, Wi-Fi, 7.9" - Space Gray - (MF432LL/A) (Refurbished) at 54.99 USD
2025-05-13 09:32:26,992 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Restored Apple iPad 4 9.7-inch 16GB Wi-Fi, Black (Refurbished) at 41.25 USD
2025-05-13 09:32:26,992 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Restored Apple iPad 2 16GB, Wi-Fi, 9.7in - Black - (MC769LL/A) (Refurbished) at 49.89 USD
2025-05-13 09:32:26,992 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Restored Apple iPad 4 16GB Black Retina Display Wi-Fi MD510LL/A (Refurbished) at 53.99 USD
2025-05-13 09:32:26,992 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Restored Apple iPad 4th Gen Retina 16GB Wi-Fi 9.7in - Black - (MD510LL/A) (Refurbished) at 53.99 USD
2025-05-13 09:32:26,992 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Restored Apple iPad mini 16GB, Wi-Fi, 7.9" - Space Gray - (MF432LL/A) (Refurbished) at 54.99 USD
2025-05-13 09:32:28,334 - DealFinderAI.EbayScraperAgent - INFO - Searching eBay for: {'product_type': 'ipad', 'keywords': ['ipad'], 'price_range': None, 'brands': None, 'features': None, 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-13 09:32:29,703 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPad mini 2 32GB, Wi-Fi, 7.9in - Space Gray at 39.99 USD
2025-05-13 09:32:29,704 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPad mini 2 32GB, Wi-Fi, 7.9in - Space Gray at 39.99 USD
2025-05-13 09:32:29,704 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPad Air 1st Generation A1475 16GB Silver WiFI + Cellular Unlocked at 42.25 USD
2025-05-13 09:32:29,704 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPad Air 1st Generation A1475 16GB Silver WiFI + Cellular Unlocked at 42.25 USD
2025-05-13 09:32:29,705 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPad A1219 1st Generation 16GB 9.7" Display Touchscreen Tablet at 52.25 USD
2025-05-13 09:32:29,705 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPad A1219 1st Generation 16GB 9.7" Display Touchscreen Tablet at 52.25 USD
2025-05-13 09:32:30,380 - DealFinderAI.ResultsAggregatorAgent - INFO - Aggregating results for query: find me best deal on ipad
2025-05-13 09:32:30,381 - DealFinderAI.ResultsAggregatorAgent - INFO - Found 3 results from various sources
2025-05-13 09:32:30,381 - DealFinderAI.ProductComparisonAgent - INFO - Comparing products for query: find me best deal on ipad
2025-05-13 09:32:30,382 - DealFinderAI.ProductComparisonAgent - INFO - Found 8 products to compare
2025-05-13 09:32:30,382 - DealFinderAI.ChatMemoryAgent - INFO - Storing context for conversation session_20250513092918_d4816352
2025-05-13 09:32:30,383 - DealFinderAI.ChatMemoryAgent - INFO - Storing 8 products for conversation session_20250513092918_d4816352
2025-05-13 09:32:30,383 - DealFinderAI.PresentationAgent - INFO - Preparing presentation for 8 products
2025-05-13 09:32:30,383 - DealFinderAI.ChatMemoryAgent - INFO - Storing context for conversation session_20250513092918_d4816352
2025-05-13 09:32:30,383 - DealFinderAI.ChatMemoryAgent - INFO - Storing 8 products for conversation session_20250513092918_d4816352
2025-05-13 09:32:30,383 - DealFinderAI.Controller - INFO - Successfully stored search results in memory
2025-05-13 09:33:07,216 - DealFinderAI.Controller - INFO - Processing user query: find me latest ipad
2025-05-13 09:33:07,216 - DealFinderAI.ChatMemoryAgent - INFO - Analyzing query: 'find me latest ipad' for conversation session_20250513092918_d4816352
2025-05-13 09:33:07,216 - DealFinderAI.ChatMemoryAgent - INFO - Current product info: True
2025-05-13 09:33:07,216 - DealFinderAI.ChatMemoryAgent - INFO - Number of products in memory: 8
2025-05-13 09:33:07,216 - DealFinderAI.ChatMemoryAgent - INFO - Found 8 products in memory
2025-05-13 09:33:07,217 - DealFinderAI.ChatMemoryAgent - INFO - Follow-up analysis: True, Referenced products: 0
2025-05-13 09:33:07,217 - DealFinderAI.Controller - INFO - Analyze response: {'is_follow_up': True, 'focused_product': None, 'referenced_products': [], 'products': [{'title': 'Apple iPad A1219 1st Generation 16GB 9.7" Display Touchscreen Tablet', 'price': 52.25, 'shipping': 0.0, 'total_price': 52.25, 'is_free_shipping': True, 'currency': 'USD', 'url': 'https://www.ebay.com/itm/156803302389?_skw=ipad+ipad&itmmeta=01JV4XHHJ3C4J3T8ZGE6CH80W5&hash=item24823483f5%3Ag%3AT5oAAOSwhgxn0yre&itmprp=enc%3AAQAKAAAA0FkggFvd1GGDu0w3yXCmi1cmD6aUOgiVYy3z9if10ZAfbULsJAvMV2mhmfOjM577R0McOGoqydVLvjL07MlyWaoNEv3v1rzDNY%2BSLd409BAvvvdoNtvwUjqud0TBPmeYNdSuRUb5lpYocsEItmf%2B6Llvc8Dfww2MzNtm63LUU347dk47j9903g23fTiE1CQG4WGsfJkUF5pmR71t09YnFCRKstp4f2y0nMs6RsaBx9MsEbbeP9DMptkPhJO%2BBYKxMeyPUSXlixxYls6VXq6F8ls%3D%7Ctkp%3ABk9SR66Zxp3ZZQ&LH_BIN=1', 'image_url': '', 'is_sponsored': False, 'condition': 'Pre-Owned', 'listing_type': 'Buy It Now', 'seller_rating': 97.8, 'item_id': '156803302389', 'source': 'eBay', '_score': 44.775}, {'title': 'Restored Apple iPad 4 9.7-inch 16GB Wi-Fi, Black (Refurbished)', 'price': 41.25, 'currency': 'USD', 'url': '/ip/Apple-iPad-4-WiFi-Tablet-with-16GB-Storage-Refurbished-Grade-A/46597969?conditionGroupCode=2&classType=REGULAR&from=/search', 'image_url': 'https://i5.walmartimages.com/seo/Apple-iPad-4-WiFi-Tablet-with-16GB-Storage-Refurbished-Grade-A_18f90eda-1703-4859-b8bd-8e9e71c48213_1.9d0b1b93102d6e4d091f5f09c1b6f5a4.jpeg?odnHeight=580&odnWidth=580&odnBg=FFFFFF', 'rating': 0.0, 'reviews': 0, 'is_sponsored': False, 'is_pickup_today': False, 'product_id': '72DF51KIJRJ8', 'source': 'Walmart', '_score': 25.875}, {'title': 'Apple iPad Air 1st Generation A1475 16GB Silver WiFI + Cellular Unlocked', 'price': 42.25, 'shipping': 10.0, 'total_price': 52.25, 'is_free_shipping': False, 'currency': 'USD', 'url': 'https://www.ebay.com/itm/226492317628?_skw=ipad+ipad&itmmeta=01JV4XHHJ3YRYCDX120BV9A4PG&hash=item34bbfe7fbc%3Ag%3AoqIAAOSwXUFnWf1e&itmprp=enc%3AAQAKAAAA4FkggFvd1GGDu0w3yXCmi1cgp3mdXPDooDGHW6CsAUkp2MW7Al1%2BwKxx0r7bJJAeQ0AZoKDoG8dtAr4gLzgLSntlyz4q6ntFaUB0UFlkNh8D7FurmbxTXbMPFbHicE6xAJILPQJImOgcszfvamF8G%2FsKKLwTszZw08WOVoJwQWeR9c8hcR58FDv0mlf3JifQC3zZjweQurgvsMyV1ghYZZPHbNgkyfwaASqlFhu5FkY1toP4A8zPjgJx5he38IieAlAy0yf0tb%2FHuHqvI5eZLkxnL9p9qTKB29jWGJe%2BKbnV%7Ctkp%3ABk9SR66Zxp3ZZQ&LH_BIN=1', 'image_url': '', 'is_sponsored': False, 'condition': 'Pre-Owned', 'listing_type': 'Buy It Now', 'seller_rating': 99.3, 'item_id': '226492317628', 'source': 'eBay', '_score': 35.775}, {'title': 'Apple iPad mini 2 32GB, Wi-Fi, 7.9in - Space Gray', 'price': 39.99, 'shipping': 12.25, 'total_price': 52.24, 'is_free_shipping': False, 'currency': 'USD', 'url': 'https://www.ebay.com/itm/335164504208?_skw=ipad+ipad&epid=172927397&itmmeta=01JV4XHHJ3JA74H03A6W9NK9RZ&hash=item4e095c7890%3Ag%3A5ysAAOSwBtBleo8y&itmprp=enc%3AAQAKAAAA0FkggFvd1GGDu0w3yXCmi1eBuT4Sf5Loirf384p7PdyEY1ufLAm8I5LDvd7amdCXBqKNQSK2m9vwhEkltL6tJxenANinqJfe%2Fo2Q0xLi%2FoLnHEYJaeLZE3sth3Byq1OQdHrzS1N6Z5E00gFZwFPdRjRzSsxy15%2FSFFaEwKFQrGY3yjtKpCxRERMHDFcNIAxPloalpvozw6MeKM7ea%2FSt%2B790%2B0WWaAmi%2F%2BfYHL%2FIRnT4UCCJJ9ukEcYAVxVHxFY2Ys1irctN3m0Lz9uz5NTeTJc%3D%7Ctkp%3ABk9SR66Zxp3ZZQ&LH_BIN=1', 'image_url': '', 'is_sponsored': False, 'condition': 'Pre-Owned', 'listing_type': 'Buy It Now', 'seller_rating': 0.0, 'item_id': '335164504208', 'source': 'eBay', '_score': 31.001}, {'title': 'Restored Apple iPad 2 16GB, Wi-Fi, 9.7in - Black - (MC769LL/A) (Refurbished)', 'price': 49.89, 'currency': 'USD', 'url': '/ip/Restored-Apple-iPad-2-16GB-Wi-Fi-9-7in-Black-MC769LL-A-Refurbished/968928277?conditionGroupCode=2&classType=REGULAR&from=/search', 'image_url': 'https://i5.walmartimages.com/seo/Restored-Apple-iPad-2-16GB-Wi-Fi-9-7in-Black-MC769LL-A-Refurbished_da1d8089-fde1-4979-8100-e1d2b48d9fae.d43a9b5fabd14fbea1a35933f0eb461b.jpeg?odnHeight=580&odnWidth=580&odnBg=FFFFFF', 'rating': 0.0, 'reviews': 0, 'is_sponsored': False, 'is_pickup_today': False, 'product_id': '5LPWE8VXN3CA', 'source': 'Walmart', '_score': 25.011}, {'title': 'Restored Apple iPad 4 16GB Black Retina Display Wi-Fi MD510LL/A (Refurbished)', 'price': 53.99, 'currency': 'USD', 'url': '/ip/Restored-Apple-iPad-4-16GB-Black-Retina-Display-Wi-Fi-MD510LL-A-Refurbished/183289823?conditionGroupCode=2&classType=REGULAR&from=/search', 'image_url': 'https://i5.walmartimages.com/seo/Restored-Apple-iPad-4-16GB-Black-Retina-Display-Wi-Fi-MD510LL-A-Refurbished_f4771654-a622-42e7-8576-5cfd3068cabb.c01d2deeee7e51b3b15f3b03e75f8ad5.jpeg?odnHeight=580&odnWidth=580&odnBg=FFFFFF', 'rating': 0.0, 'reviews': 0, 'is_sponsored': False, 'is_pickup_today': False, 'product_id': '1FYPL14PAIRD', 'source': 'Walmart', '_score': 24.601, 'effective_price': 53.99}, {'title': 'Restored Apple iPad 4th Gen Retina 16GB Wi-Fi 9.7in - Black - (MD510LL/A) (Refurbished)', 'price': 53.99, 'currency': 'USD', 'url': '/ip/Restored-Apple-iPad-4th-Gen-Retina-16GB-Wi-Fi-9-7in-Black-MD510LL-A-Refurbished/784397574?conditionGroupCode=2&classType=VARIANT&from=/search', 'image_url': 'https://i5.walmartimages.com/seo/Restored-Apple-iPad-4th-Gen-Retina-16GB-Wi-Fi-9-7in-Black-MD510LL-A-Refurbished_cd031f34-0b26-42ff-ae11-dc66f87a7c21.a387daeea4f2320c1f11dbeb745e084d.jpeg?odnHeight=580&odnWidth=580&odnBg=FFFFFF', 'rating': 0.0, 'reviews': 0, 'is_sponsored': False, 'is_pickup_today': False, 'product_id': '2YKVEZLIEXH4', 'source': 'Walmart', '_score': 24.601, 'effective_price': 53.99}, {'title': 'Restored Apple iPad mini 16GB, Wi-Fi, 7.9" - Space Gray - (MF432LL/A) (Refurbished)', 'price': 54.99, 'currency': 'USD', 'url': '/ip/Restored-Apple-iPad-mini-16GB-Wi-Fi-7-9-Space-Gray-MF432LL-A-Refurbished/242800344?conditionGroupCode=2&classType=REGULAR&from=/search', 'image_url': 'https://i5.walmartimages.com/seo/Restored-Apple-iPad-mini-16GB-Wi-Fi-7-9-Space-Gray-MF432LL-A-Refurbished_84f953e4-b887-47aa-9bcd-ae57084721fd.4d758a89f03816e0085e481c9afb4d8f.png?odnHeight=580&odnWidth=580&odnBg=FFFFFF', 'rating': 0.0, 'reviews': 0, 'is_sponsored': False, 'is_pickup_today': False, 'product_id': '1ZPHZ4A6SVYP', 'source': 'Walmart', '_score': 24.500999999999998}]}
2025-05-13 09:33:07,217 - DealFinderAI.Controller - INFO - Is follow-up? True
2025-05-13 09:33:07,217 - DealFinderAI.Controller - INFO - Referenced products: 0
2025-05-13 09:33:07,217 - DealFinderAI.Controller - INFO - Processing as new search query
2025-05-13 09:33:07,217 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: find me latest ipad
2025-05-13 09:33:07,996 - DealFinderAI.GeminiAgent - WARNING - Failed to parse Gemini response as JSON: ```json
{
  "product_type": "ipad",
  "keywords": ["ipad", "latest"],
  "price_range": null,
  "brands": ["Apple"],
  "features": [],
  "sorting_preference": "newest",
  "buy_it_now": true
}
```

2025-05-13 09:33:07,997 - DealFinderAI.Controller - INFO - Parsed search parameters: {'product_type': 'ipad', 'keywords': ['ipad', 'latest'], 'price_range': None, 'brands': ['Apple'], 'features': [], 'sorting_preference': 'newest', 'buy_it_now': True}
2025-05-13 09:33:07,997 - DealFinderAI.AmazonScraperAgent - INFO - Searching Amazon for: {'product_type': 'ipad', 'keywords': ['ipad', 'latest'], 'price_range': None, 'brands': ['Apple'], 'features': [], 'sorting_preference': 'newest', 'buy_it_now': True}
2025-05-13 09:33:09,405 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B0DZL8TDBK at 629.0 USD
2025-05-13 09:33:09,409 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B0DZ763J9M at 769.99 USD
2025-05-13 09:33:09,414 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B0DZ77TPPD at 399.0 USD
2025-05-13 09:33:09,418 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B0DZ74W8QP at 683.0 USD
2025-05-13 09:33:09,421 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B0BFC1KYYY at 444.64 USD
2025-05-13 09:33:10,164 - DealFinderAI.WalmartScraperAgent - INFO - Searching Walmart for: {'product_type': 'ipad', 'keywords': ['ipad', 'latest'], 'price_range': None, 'brands': ['Apple'], 'features': [], 'sorting_preference': 'newest', 'buy_it_now': True}
2025-05-13 09:33:15,494 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 09:33:15,496 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Restored Premium Apple iPad 6th Gen (2018) WiFi Only Space Gray 32GB (Refurbished) at 109.0 USD
2025-05-13 09:33:15,496 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Restored Premium Apple iPad 6th Gen (2018) WiFi Only Space Gray 32GB (Refurbished) at 109.0 USD
2025-05-13 09:33:18,275 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 09:33:18,275 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Restored Apple iPad 8 10.2" Tablet, 2020, 32GB, Wi-Fi, Space Gray Bundle (Refurbished) at 149.97 USD
2025-05-13 09:33:18,276 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Restored Apple iPad 8 10.2" Tablet, 2020, 32GB, Wi-Fi, Space Gray Bundle (Refurbished) at 149.97 USD
2025-05-13 09:33:21,327 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 09:33:21,327 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Restored Apple iPad Air 2 9.7-inch 32GB Wi-Fi Only Bundle: USA Essentials Bluetooth/Wireless Airbuds, Case, Rapid Charger By Certified 2 Day Express (Refurbished) at 117.0 USD
2025-05-13 09:33:21,327 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Restored Apple iPad Air 2 9.7-inch 32GB Wi-Fi Only Bundle: USA Essentials Bluetooth/Wireless Airbuds, Case, Rapid Charger By Certified 2 Day Express (Refurbished) at 117.0 USD
2025-05-13 09:33:24,117 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 09:33:24,118 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: 2025 Apple 11-inch iPad Air M3, Built for Apple Intelligence, Wi-Fi 128GB - Space Gray at 553.0 USD
2025-05-13 09:33:24,118 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: 2025 Apple 11-inch iPad Air M3, Built for Apple Intelligence, Wi-Fi 128GB - Space Gray at 553.0 USD
2025-05-13 09:33:26,756 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 09:33:26,757 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Restored Apple iPad (10.2-inch, Wi-Fi, 32GB) - Space Gray (Latest Model, 8th Generation) (Refurbished) at 125.96 USD
2025-05-13 09:33:26,757 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Restored Apple iPad (10.2-inch, Wi-Fi, 32GB) - Space Gray (Latest Model, 8th Generation) (Refurbished) at 125.96 USD
2025-05-13 09:33:26,757 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Restored Apple iPad (10.2-inch, Wi-Fi, 32GB) - Space Gray (Latest Model, 8th Generation) (Refurbished) at 125.96 USD
2025-05-13 09:33:28,090 - DealFinderAI.EbayScraperAgent - INFO - Searching eBay for: {'product_type': 'ipad', 'keywords': ['ipad', 'latest'], 'price_range': None, 'brands': ['Apple'], 'features': [], 'sorting_preference': 'newest', 'buy_it_now': True}
2025-05-13 09:33:29,183 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: (Wi-Fi) Apple iPad 10th Gen 10.9-Inch Latest Model - 64GB All Colors - B GRADE at 259.0 USD
2025-05-13 09:33:29,183 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: (Wi-Fi) Apple iPad 10th Gen 10.9-Inch Latest Model - 64GB All Colors - B GRADE at 259.0 USD
2025-05-13 09:33:29,184 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: iPad Air M3 11 inch OEM Screen Replacement 2025 Model Latest One ORIGINAL APPLE at 279.99 USD
2025-05-13 09:33:29,184 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: iPad Air M3 11 inch OEM Screen Replacement 2025 Model Latest One ORIGINAL APPLE at 279.99 USD
2025-05-13 09:33:29,185 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: 2025 iPad Air 11" M3 Chip - 128GB - Latest Model - All Colors - NEW & SEALED at 599.99 USD
2025-05-13 09:33:29,185 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: 2025 iPad Air 11" M3 Chip - 128GB - Latest Model - All Colors - NEW & SEALED at 599.99 USD
2025-05-13 09:33:29,738 - DealFinderAI.ResultsAggregatorAgent - INFO - Aggregating results for query: find me latest ipad
2025-05-13 09:33:29,738 - DealFinderAI.ResultsAggregatorAgent - INFO - Found 3 results from various sources
2025-05-13 09:33:29,738 - DealFinderAI.ProductComparisonAgent - INFO - Comparing products for query: find me latest ipad
2025-05-13 09:33:29,738 - DealFinderAI.ProductComparisonAgent - INFO - Found 4 products to compare
2025-05-13 09:33:29,739 - DealFinderAI.ChatMemoryAgent - INFO - Storing context for conversation session_20250513092918_d4816352
2025-05-13 09:33:29,739 - DealFinderAI.ChatMemoryAgent - INFO - Storing 4 products for conversation session_20250513092918_d4816352
2025-05-13 09:33:29,739 - DealFinderAI.PresentationAgent - INFO - Preparing presentation for 4 products
2025-05-13 09:33:29,739 - DealFinderAI.ChatMemoryAgent - INFO - Storing context for conversation session_20250513092918_d4816352
2025-05-13 09:33:29,740 - DealFinderAI.ChatMemoryAgent - INFO - Storing 4 products for conversation session_20250513092918_d4816352
2025-05-13 09:33:29,740 - DealFinderAI.Controller - INFO - Successfully stored search results in memory
2025-05-13 09:35:29,784 - DealFinderAI.Controller - INFO - Processing user query: tell me more about product 1
2025-05-13 09:35:29,785 - DealFinderAI.ChatMemoryAgent - INFO - Analyzing query: 'tell me more about product 1' for conversation session_20250513092918_d4816352
2025-05-13 09:35:29,785 - DealFinderAI.ChatMemoryAgent - INFO - Current product info: True
2025-05-13 09:35:29,785 - DealFinderAI.ChatMemoryAgent - INFO - Number of products in memory: 4
2025-05-13 09:35:29,785 - DealFinderAI.ChatMemoryAgent - INFO - Found 4 products in memory
2025-05-13 09:35:29,786 - DealFinderAI.ChatMemoryAgent - INFO - Follow-up analysis: True, Referenced products: 1
2025-05-13 09:35:29,786 - DealFinderAI.Controller - INFO - Analyze response: {'is_follow_up': True, 'focused_product': None, 'referenced_products': [{'title': '2025 iPad Air 11" M3 Chip - 128GB - Latest Model - All Colors - NEW & SEALED', 'price': 599.99, 'shipping': 0.0, 'total_price': 599.99, 'is_free_shipping': False, 'currency': 'USD', 'url': 'https://www.ebay.com/itm/267241680999?_skw=ipad+ipad+latest+Apple&itmmeta=01JV4XKBQVGD0BXPV7VAM8XD02&hash=item3e38d87067%3Ag%3AJpoAAOSw6EdoGQym&itmprp=enc%3AAQAKAAAA0FkggFvd1GGDu0w3yXCmi1ciYF024N6vcYdnWTrcOvwxJZ94UmhPKbcJ7AXZbmGq3srh4vT3gW3x6zyPXmoNtbK4As9bteT1eIxTQCqSW6Ctym7cL%2But%2FuRJUTj4Vl1AeJiagKwOZuAmnaYNqa3uBknli3mCnhWwhH3irtKK6GrMrTK3u3Bf3g%2BVb1v8oKKRooHIBaqYT7bz1GhUe0CJ%2FfPWgeKdz0%2Bs5okJ0Odd%2BrmYsvf%2BGH2POkpE4DwKHl2EVklbvG0u2vYpjQXvoJaZuD8%3D%7Ctkp%3ABk9SR5C8zZ3ZZQ&LH_BIN=1', 'image_url': '', 'is_sponsored': False, 'condition': 'Brand New', 'listing_type': 'Buy It Now', 'seller_rating': 100.0, 'item_id': '267241680999', 'source': 'eBay', '_score': 25, 'effective_price': 599.99}], 'products': [{'title': '2025 iPad Air 11" M3 Chip - 128GB - Latest Model - All Colors - NEW & SEALED', 'price': 599.99, 'shipping': 0.0, 'total_price': 599.99, 'is_free_shipping': False, 'currency': 'USD', 'url': 'https://www.ebay.com/itm/267241680999?_skw=ipad+ipad+latest+Apple&itmmeta=01JV4XKBQVGD0BXPV7VAM8XD02&hash=item3e38d87067%3Ag%3AJpoAAOSw6EdoGQym&itmprp=enc%3AAQAKAAAA0FkggFvd1GGDu0w3yXCmi1ciYF024N6vcYdnWTrcOvwxJZ94UmhPKbcJ7AXZbmGq3srh4vT3gW3x6zyPXmoNtbK4As9bteT1eIxTQCqSW6Ctym7cL%2But%2FuRJUTj4Vl1AeJiagKwOZuAmnaYNqa3uBknli3mCnhWwhH3irtKK6GrMrTK3u3Bf3g%2BVb1v8oKKRooHIBaqYT7bz1GhUe0CJ%2FfPWgeKdz0%2Bs5okJ0Odd%2BrmYsvf%2BGH2POkpE4DwKHl2EVklbvG0u2vYpjQXvoJaZuD8%3D%7Ctkp%3ABk9SR5C8zZ3ZZQ&LH_BIN=1', 'image_url': '', 'is_sponsored': False, 'condition': 'Brand New', 'listing_type': 'Buy It Now', 'seller_rating': 100.0, 'item_id': '267241680999', 'source': 'eBay', '_score': 25, 'effective_price': 599.99}, {'title': '(Wi-Fi) Apple iPad 10th Gen 10.9-Inch Latest Model - 64GB All Colors - B GRADE', 'price': 259.0, 'shipping': 0.0, 'total_price': 259.0, 'is_free_shipping': True, 'currency': 'USD', 'url': 'https://www.ebay.com/itm/146571174213?_skw=ipad+ipad+latest+Apple&itmmeta=01JV4XKBQVE5BPAK1G6Z2C0CCF&hash=item222052a145%3Ag%3A86AAAOSwy55n0Oun&itmprp=enc%3AAQAKAAAA0FkggFvd1GGDu0w3yXCmi1cfgXDl2%2FM269TCvxP5vJyNH8wQX2kVmYzhqBxzyy48ffup8ZAo%2BZ59HAHuocfW6XT1PIdlhHnnWf8kbDpj%2BhApZ8WUIVhO3fZmKUrZGbO5Gh1djV0A4PChjFJ8QpzNmjOY0khI5Lv1lRswyzsXS1p57UAJhB9tV2mUMUt58vtTFthjXurfk%2Foh4oKUVB1DPrttpKi8FWVBlS3u6UnvrtBYzNTUReJEGSKXD8%2BhrLHKLobhZ3d%2BCz8y8BXmkwOoDi8%3D%7Ctkp%3ABk9SR5C8zZ3ZZQ&LH_BIN=1', 'image_url': '', 'is_sponsored': False, 'condition': 'Pre-Owned', 'listing_type': 'Buy It Now', 'seller_rating': 98.6, 'item_id': '146571174213', 'source': 'eBay', '_score': 24.1}, {'title': 'Restored Apple iPad (10.2-inch, Wi-Fi, 32GB) - Space Gray (Latest Model, 8th Generation) (Refurbished)', 'price': 125.96, 'currency': 'USD', 'url': '/ip/Apple-10-2-inch-iPad-8th-Gen-Wi-Fi-32GB-Space-Gray/989344107?conditionGroupCode=2&classType=VARIANT&athbdg=L1103', 'image_url': 'https://i5.walmartimages.com/seo/Apple-10-2-inch-iPad-8th-Gen-Wi-Fi-32GB-Space-Gray_f6fb2e91-b7b0-40c1-927a-e31bc0c7b065.ba6b671d4a8c226abe3396c15a67afc3.jpeg?odnHeight=580&odnWidth=580&odnBg=FFFFFF', 'rating': 0.0, 'reviews': 0, 'is_sponsored': False, 'is_pickup_today': False, 'product_id': '61MH2ASN39UV', 'source': 'Walmart', '_score': 17.404}, {'title': 'iPad Air M3 11 inch OEM Screen Replacement 2025 Model Latest One ORIGINAL APPLE', 'price': 279.99, 'shipping': 9.1, 'total_price': 289.09000000000003, 'is_free_shipping': False, 'currency': 'USD', 'url': 'https://www.ebay.com/itm/146565336057?_skw=ipad+ipad+latest+Apple&itmmeta=01JV4XKBQV25NT9SAYV3HQKNSK&hash=item221ff98bf9%3Ag%3A8jIAAeSwaW5oGieX&itmprp=enc%3AAQAKAAAA8FkggFvd1GGDu0w3yXCmi1ewUkQix%2BmAtnK8M4yC6tWd7Mbx%2BFnEEqEOKLOEhKTDYjorBLXK%2FbrBKeL2uHDgU6BcExoTtHvcZwJhJY3COTJ4qQiJmTrK64VUbebS2sue4UJ4VZC%2FTKn%2FFTKd65ddTT6Vkb4MnQo9VtuWZk%2Bsc3q6coGxvZyJhFxKsgp0BI5k1lCpWRA7RcPfQQGByXlAGGQsmFj%2FTDy7BJvoVHc5a6eNspfe4Q%2FNISjy7ryxWjLrWG1YalKmdv4pKUUTFOZB15CuIf1ENfvUs9YWdvvHqLOZ9zELwtJAbWTMGfn7%2BR98uQ%3D%3D%7Ctkp%3ABk9SR5C8zZ3ZZQ&LH_BIN=1', 'image_url': '', 'is_sponsored': False, 'condition': 'Pre-Owned', 'listing_type': 'Buy It Now', 'seller_rating': 100.0, 'item_id': '146565336057', 'source': 'eBay', '_score': 12.000999999999998, 'effective_price': 289.09000000000003}]}
2025-05-13 09:35:29,786 - DealFinderAI.Controller - INFO - Is follow-up? True
2025-05-13 09:35:29,786 - DealFinderAI.Controller - INFO - Referenced products: 1
2025-05-13 09:35:29,786 - DealFinderAI.Controller - INFO - Handling as follow-up question about 1 products
2025-05-13 09:35:29,786 - DealFinderAI.Controller - INFO - Handling follow-up question: tell me more about product 1
2025-05-13 09:35:29,787 - DealFinderAI.Controller - INFO - Referenced products: 1
2025-05-13 09:35:29,787 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: 
            I'm a shopping assistant helping a customer with product information.
            
            The customer previously searched for products and is now asking a follow-up question: "tell me more about product 1"
            
            They're referring to this product:
            {
  "title": "2025 iPad Air 11\" M3 Chip - 128GB - Latest Model - All Colors - NEW & SEALED",
  "price": 599.99,
  "shipping": 0.0,
  "total_price": 599.99,
  "is_free_shipping": false,
  "currency": "USD",
  "url": "https://www.ebay.com/itm/267241680999?_skw=ipad+ipad+latest+Apple&itmmeta=01JV4XKBQVGD0BXPV7VAM8XD02&hash=item3e38d87067%3Ag%3AJpoAAOSw6EdoGQym&itmprp=enc%3AAQAKAAAA0FkggFvd1GGDu0w3yXCmi1ciYF024N6vcYdnWTrcOvwxJZ94UmhPKbcJ7AXZbmGq3srh4vT3gW3x6zyPXmoNtbK4As9bteT1eIxTQCqSW6Ctym7cL%2But%2FuRJUTj4Vl1AeJiagKwOZuAmnaYNqa3uBknli3mCnhWwhH3irtKK6GrMrTK3u3Bf3g%2BVb1v8oKKRooHIBaqYT7bz1GhUe0CJ%2FfPWgeKdz0%2Bs5okJ0Odd%2BrmYsvf%2BGH2POkpE4DwKHl2EVklbvG0u2vYpjQXvoJaZuD8%3D%7Ctkp%3ABk9SR5C8zZ3ZZQ&LH_BIN=1",
  "image_url": "",
  "is_sponsored": false,
  "condition": "Brand New",
  "listing_type": "Buy It Now",
  "seller_rating": 100.0,
  "item_id": "267241680999",
  "source": "eBay",
  "_score": 25,
  "effective_price": 599.99
}
            
            Please provide a helpful, conversational response addressing their question
            about this product. Include relevant details from the product information.
            
            If the product is a "best deal", emphasize why it's a good value compared to alternatives.
            If they're asking about comparisons to other products, highlight the key differences.
            If they're asking about specific features, focus on those details.
            
2025-05-13 09:36:01,838 - DealFinderAI.Controller - INFO - Processing user query: is M3 the latest chip?
2025-05-13 09:36:01,839 - DealFinderAI.ChatMemoryAgent - INFO - Analyzing query: 'is m3 the latest chip?' for conversation session_20250513092918_d4816352
2025-05-13 09:36:01,839 - DealFinderAI.ChatMemoryAgent - INFO - Current product info: True
2025-05-13 09:36:01,839 - DealFinderAI.ChatMemoryAgent - INFO - Number of products in memory: 4
2025-05-13 09:36:01,839 - DealFinderAI.ChatMemoryAgent - INFO - Found 4 products in memory
2025-05-13 09:36:01,839 - DealFinderAI.ChatMemoryAgent - INFO - Using focused product: 0
2025-05-13 09:36:01,840 - DealFinderAI.ChatMemoryAgent - INFO - Follow-up analysis: True, Referenced products: 1
2025-05-13 09:36:01,840 - DealFinderAI.Controller - INFO - Analyze response: {'is_follow_up': True, 'focused_product': 0, 'referenced_products': [{'title': '2025 iPad Air 11" M3 Chip - 128GB - Latest Model - All Colors - NEW & SEALED', 'price': 599.99, 'shipping': 0.0, 'total_price': 599.99, 'is_free_shipping': False, 'currency': 'USD', 'url': 'https://www.ebay.com/itm/267241680999?_skw=ipad+ipad+latest+Apple&itmmeta=01JV4XKBQVGD0BXPV7VAM8XD02&hash=item3e38d87067%3Ag%3AJpoAAOSw6EdoGQym&itmprp=enc%3AAQAKAAAA0FkggFvd1GGDu0w3yXCmi1ciYF024N6vcYdnWTrcOvwxJZ94UmhPKbcJ7AXZbmGq3srh4vT3gW3x6zyPXmoNtbK4As9bteT1eIxTQCqSW6Ctym7cL%2But%2FuRJUTj4Vl1AeJiagKwOZuAmnaYNqa3uBknli3mCnhWwhH3irtKK6GrMrTK3u3Bf3g%2BVb1v8oKKRooHIBaqYT7bz1GhUe0CJ%2FfPWgeKdz0%2Bs5okJ0Odd%2BrmYsvf%2BGH2POkpE4DwKHl2EVklbvG0u2vYpjQXvoJaZuD8%3D%7Ctkp%3ABk9SR5C8zZ3ZZQ&LH_BIN=1', 'image_url': '', 'is_sponsored': False, 'condition': 'Brand New', 'listing_type': 'Buy It Now', 'seller_rating': 100.0, 'item_id': '267241680999', 'source': 'eBay', '_score': 25, 'effective_price': 599.99}], 'products': [{'title': '2025 iPad Air 11" M3 Chip - 128GB - Latest Model - All Colors - NEW & SEALED', 'price': 599.99, 'shipping': 0.0, 'total_price': 599.99, 'is_free_shipping': False, 'currency': 'USD', 'url': 'https://www.ebay.com/itm/267241680999?_skw=ipad+ipad+latest+Apple&itmmeta=01JV4XKBQVGD0BXPV7VAM8XD02&hash=item3e38d87067%3Ag%3AJpoAAOSw6EdoGQym&itmprp=enc%3AAQAKAAAA0FkggFvd1GGDu0w3yXCmi1ciYF024N6vcYdnWTrcOvwxJZ94UmhPKbcJ7AXZbmGq3srh4vT3gW3x6zyPXmoNtbK4As9bteT1eIxTQCqSW6Ctym7cL%2But%2FuRJUTj4Vl1AeJiagKwOZuAmnaYNqa3uBknli3mCnhWwhH3irtKK6GrMrTK3u3Bf3g%2BVb1v8oKKRooHIBaqYT7bz1GhUe0CJ%2FfPWgeKdz0%2Bs5okJ0Odd%2BrmYsvf%2BGH2POkpE4DwKHl2EVklbvG0u2vYpjQXvoJaZuD8%3D%7Ctkp%3ABk9SR5C8zZ3ZZQ&LH_BIN=1', 'image_url': '', 'is_sponsored': False, 'condition': 'Brand New', 'listing_type': 'Buy It Now', 'seller_rating': 100.0, 'item_id': '267241680999', 'source': 'eBay', '_score': 25, 'effective_price': 599.99}, {'title': '(Wi-Fi) Apple iPad 10th Gen 10.9-Inch Latest Model - 64GB All Colors - B GRADE', 'price': 259.0, 'shipping': 0.0, 'total_price': 259.0, 'is_free_shipping': True, 'currency': 'USD', 'url': 'https://www.ebay.com/itm/146571174213?_skw=ipad+ipad+latest+Apple&itmmeta=01JV4XKBQVE5BPAK1G6Z2C0CCF&hash=item222052a145%3Ag%3A86AAAOSwy55n0Oun&itmprp=enc%3AAQAKAAAA0FkggFvd1GGDu0w3yXCmi1cfgXDl2%2FM269TCvxP5vJyNH8wQX2kVmYzhqBxzyy48ffup8ZAo%2BZ59HAHuocfW6XT1PIdlhHnnWf8kbDpj%2BhApZ8WUIVhO3fZmKUrZGbO5Gh1djV0A4PChjFJ8QpzNmjOY0khI5Lv1lRswyzsXS1p57UAJhB9tV2mUMUt58vtTFthjXurfk%2Foh4oKUVB1DPrttpKi8FWVBlS3u6UnvrtBYzNTUReJEGSKXD8%2BhrLHKLobhZ3d%2BCz8y8BXmkwOoDi8%3D%7Ctkp%3ABk9SR5C8zZ3ZZQ&LH_BIN=1', 'image_url': '', 'is_sponsored': False, 'condition': 'Pre-Owned', 'listing_type': 'Buy It Now', 'seller_rating': 98.6, 'item_id': '146571174213', 'source': 'eBay', '_score': 24.1}, {'title': 'Restored Apple iPad (10.2-inch, Wi-Fi, 32GB) - Space Gray (Latest Model, 8th Generation) (Refurbished)', 'price': 125.96, 'currency': 'USD', 'url': '/ip/Apple-10-2-inch-iPad-8th-Gen-Wi-Fi-32GB-Space-Gray/989344107?conditionGroupCode=2&classType=VARIANT&athbdg=L1103', 'image_url': 'https://i5.walmartimages.com/seo/Apple-10-2-inch-iPad-8th-Gen-Wi-Fi-32GB-Space-Gray_f6fb2e91-b7b0-40c1-927a-e31bc0c7b065.ba6b671d4a8c226abe3396c15a67afc3.jpeg?odnHeight=580&odnWidth=580&odnBg=FFFFFF', 'rating': 0.0, 'reviews': 0, 'is_sponsored': False, 'is_pickup_today': False, 'product_id': '61MH2ASN39UV', 'source': 'Walmart', '_score': 17.404}, {'title': 'iPad Air M3 11 inch OEM Screen Replacement 2025 Model Latest One ORIGINAL APPLE', 'price': 279.99, 'shipping': 9.1, 'total_price': 289.09000000000003, 'is_free_shipping': False, 'currency': 'USD', 'url': 'https://www.ebay.com/itm/146565336057?_skw=ipad+ipad+latest+Apple&itmmeta=01JV4XKBQV25NT9SAYV3HQKNSK&hash=item221ff98bf9%3Ag%3A8jIAAeSwaW5oGieX&itmprp=enc%3AAQAKAAAA8FkggFvd1GGDu0w3yXCmi1ewUkQix%2BmAtnK8M4yC6tWd7Mbx%2BFnEEqEOKLOEhKTDYjorBLXK%2FbrBKeL2uHDgU6BcExoTtHvcZwJhJY3COTJ4qQiJmTrK64VUbebS2sue4UJ4VZC%2FTKn%2FFTKd65ddTT6Vkb4MnQo9VtuWZk%2Bsc3q6coGxvZyJhFxKsgp0BI5k1lCpWRA7RcPfQQGByXlAGGQsmFj%2FTDy7BJvoVHc5a6eNspfe4Q%2FNISjy7ryxWjLrWG1YalKmdv4pKUUTFOZB15CuIf1ENfvUs9YWdvvHqLOZ9zELwtJAbWTMGfn7%2BR98uQ%3D%3D%7Ctkp%3ABk9SR5C8zZ3ZZQ&LH_BIN=1', 'image_url': '', 'is_sponsored': False, 'condition': 'Pre-Owned', 'listing_type': 'Buy It Now', 'seller_rating': 100.0, 'item_id': '146565336057', 'source': 'eBay', '_score': 12.000999999999998, 'effective_price': 289.09000000000003}]}
2025-05-13 09:36:01,840 - DealFinderAI.Controller - INFO - Is follow-up? True
2025-05-13 09:36:01,840 - DealFinderAI.Controller - INFO - Referenced products: 1
2025-05-13 09:36:01,840 - DealFinderAI.Controller - INFO - Handling as follow-up question about 1 products
2025-05-13 09:36:01,840 - DealFinderAI.Controller - INFO - Handling follow-up question: is M3 the latest chip?
2025-05-13 09:36:01,840 - DealFinderAI.Controller - INFO - Referenced products: 1
2025-05-13 09:36:01,841 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: 
            I'm a shopping assistant helping a customer with product information.
            
            The customer previously searched for products and is now asking a follow-up question: "is M3 the latest chip?"
            
            They're referring to this product:
            {
  "title": "2025 iPad Air 11\" M3 Chip - 128GB - Latest Model - All Colors - NEW & SEALED",
  "price": 599.99,
  "shipping": 0.0,
  "total_price": 599.99,
  "is_free_shipping": false,
  "currency": "USD",
  "url": "https://www.ebay.com/itm/267241680999?_skw=ipad+ipad+latest+Apple&itmmeta=01JV4XKBQVGD0BXPV7VAM8XD02&hash=item3e38d87067%3Ag%3AJpoAAOSw6EdoGQym&itmprp=enc%3AAQAKAAAA0FkggFvd1GGDu0w3yXCmi1ciYF024N6vcYdnWTrcOvwxJZ94UmhPKbcJ7AXZbmGq3srh4vT3gW3x6zyPXmoNtbK4As9bteT1eIxTQCqSW6Ctym7cL%2But%2FuRJUTj4Vl1AeJiagKwOZuAmnaYNqa3uBknli3mCnhWwhH3irtKK6GrMrTK3u3Bf3g%2BVb1v8oKKRooHIBaqYT7bz1GhUe0CJ%2FfPWgeKdz0%2Bs5okJ0Odd%2BrmYsvf%2BGH2POkpE4DwKHl2EVklbvG0u2vYpjQXvoJaZuD8%3D%7Ctkp%3ABk9SR5C8zZ3ZZQ&LH_BIN=1",
  "image_url": "",
  "is_sponsored": false,
  "condition": "Brand New",
  "listing_type": "Buy It Now",
  "seller_rating": 100.0,
  "item_id": "267241680999",
  "source": "eBay",
  "_score": 25,
  "effective_price": 599.99
}
            
            Please provide a helpful, conversational response addressing their question
            about this product. Include relevant details from the product information.
            
            If the product is a "best deal", emphasize why it's a good value compared to alternatives.
            If they're asking about comparisons to other products, highlight the key differences.
            If they're asking about specific features, focus on those details.
            
2025-05-13 09:41:42,754 - DealFinderAI.Main - INFO - Toggled LangChain integration to: False
2025-05-13 09:42:02,159 - DealFinderAI.Controller - INFO - Processing user query: find me best latest sony headphones
2025-05-13 09:42:02,159 - DealFinderAI.ChatMemoryAgent - INFO - Analyzing query: 'find me best latest sony headphones' for conversation session_20250513092918_d4816352
2025-05-13 09:42:02,159 - DealFinderAI.ChatMemoryAgent - INFO - Current product info: True
2025-05-13 09:42:02,159 - DealFinderAI.ChatMemoryAgent - INFO - Number of products in memory: 4
2025-05-13 09:42:02,159 - DealFinderAI.ChatMemoryAgent - INFO - Found 4 products in memory
2025-05-13 09:42:02,160 - DealFinderAI.ChatMemoryAgent - INFO - This appears to be a new search with brands: ['sony']
2025-05-13 09:42:02,160 - DealFinderAI.Controller - INFO - Analyze response: {'is_follow_up': False, 'focused_product': None, 'referenced_products': [], 'products': []}
2025-05-13 09:42:02,160 - DealFinderAI.Controller - INFO - Is follow-up? False
2025-05-13 09:42:02,160 - DealFinderAI.Controller - INFO - Referenced products: 0
2025-05-13 09:42:02,160 - DealFinderAI.Controller - INFO - Processing as new search query
2025-05-13 09:42:02,160 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: find me best latest sony headphones
2025-05-13 09:42:03,148 - DealFinderAI.GeminiAgent - WARNING - Failed to parse Gemini response as JSON: ```json
{
  "product_type": "headphones",
  "keywords": ["sony", "latest"],
  "price_range": null,
  "brands": ["Sony"],
  "features": ["best"],
  "sorting_preference": "newest",
  "buy_it_now": true
}
```

2025-05-13 09:42:03,148 - DealFinderAI.Controller - INFO - Parsed search parameters: {'product_type': 'headphones', 'keywords': ['sony', 'latest'], 'price_range': None, 'brands': ['Sony'], 'features': ['best'], 'sorting_preference': 'newest', 'buy_it_now': True}
2025-05-13 09:42:03,149 - DealFinderAI.AmazonScraperAgent - INFO - Searching Amazon for: {'product_type': 'headphones', 'keywords': ['sony', 'latest'], 'price_range': None, 'brands': ['Sony'], 'features': ['best'], 'sorting_preference': 'newest', 'buy_it_now': True}
2025-05-13 09:42:04,624 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B0DY8TS92J at 148.0 USD
2025-05-13 09:42:04,626 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B0DVBCS1XN at 348.0 USD
2025-05-13 09:42:04,629 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B0DNY7YV16 at 348.0 USD
2025-05-13 09:42:04,633 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B0DDV3FRHR at 329.0 USD
2025-05-13 09:42:04,635 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B0DD8SHVZL at 248.0 USD
2025-05-13 09:42:05,367 - DealFinderAI.WalmartScraperAgent - INFO - Searching Walmart for: {'product_type': 'headphones', 'keywords': ['sony', 'latest'], 'price_range': None, 'brands': ['Sony'], 'features': ['best'], 'sorting_preference': 'newest', 'buy_it_now': True}
2025-05-13 09:42:10,061 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 09:42:10,062 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Sony WH-1000XM5 The Best Wireless Noise Canceling Headphones, Black at 319.44 USD
2025-05-13 09:42:10,062 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Sony WH-1000XM5 The Best Wireless Noise Canceling Headphones, Black at 319.44 USD
2025-05-13 09:42:13,026 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 09:42:13,027 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Open Box Sony WH-1000XM5 Wireless Industry Leading Noise Canceling Headphones with Auto Noise Canceling Optimizer, Crystal Clear Hands-Free Calling, and Alexa Voice Control, Black at 269.0 USD
2025-05-13 09:42:13,028 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Open Box Sony WH-1000XM5 Wireless Industry Leading Noise Canceling Headphones with Auto Noise Canceling Optimizer, Crystal Clear Hands-Free Calling, and Alexa Voice Control, Black at 269.0 USD
2025-05-13 09:42:15,759 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 09:42:15,759 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Open Box Sony WH-1000XM4 Wireless Premium Noise Canceling Overhead Headphones with Mic for Phone Call and Alexa Voice Control, Black - at 234.99 USD
2025-05-13 09:42:15,760 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Open Box Sony WH-1000XM4 Wireless Premium Noise Canceling Overhead Headphones with Mic for Phone Call and Alexa Voice Control, Black - at 234.99 USD
2025-05-13 09:42:18,319 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 09:42:18,320 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Open Box Sony ULT WEAR Noise Canceling Wireless Over Ear Headphones with Connection Cable & Carry Case, Black at 198.0 USD
2025-05-13 09:42:18,320 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Open Box Sony ULT WEAR Noise Canceling Wireless Over Ear Headphones with Connection Cable & Carry Case, Black at 198.0 USD
2025-05-13 09:42:20,654 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 09:42:20,655 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Sony WH-1000XM5 The Best Wireless Noise Canceling Headphones, Black at 319.44 USD
2025-05-13 09:42:20,655 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Sony WH-1000XM5 The Best Wireless Noise Canceling Headphones, Black at 319.44 USD
2025-05-13 09:42:22,115 - DealFinderAI.EbayScraperAgent - INFO - Searching eBay for: {'product_type': 'headphones', 'keywords': ['sony', 'latest'], 'price_range': None, 'brands': ['Sony'], 'features': ['best'], 'sorting_preference': 'newest', 'buy_it_now': True}
2025-05-13 09:42:23,854 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Sony ULT WEAR 900N Wireless Noise Canceling Bluetooth Headphones - Black at 79.99 USD
2025-05-13 09:42:23,855 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Sony ULT WEAR 900N Wireless Noise Canceling Bluetooth Headphones - Forest Gray at 79.99 USD
2025-05-13 09:42:23,856 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Sony ULT WEAR 900N Over-Ear Noise Cancelling Bluetooth Headphones - Excellent at 88.95 USD
2025-05-13 09:42:24,554 - DealFinderAI.ResultsAggregatorAgent - INFO - Aggregating results for query: find me best latest sony headphones
2025-05-13 09:42:24,555 - DealFinderAI.ResultsAggregatorAgent - INFO - Found 3 results from various sources
2025-05-13 09:43:55,110 - DealFinderAI - INFO - Logging initialized
2025-05-13 09:43:55,110 - DealFinderAI.Main - INFO - Starting DealFinder AI
2025-05-13 09:43:55,110 - DealFinderAI.Main - INFO - Using LangChain implementation
2025-05-13 09:43:55,110 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-13 09:43:55,110 - DealFinderAI.Controller - INFO - Initialized scraper agents: ['amazon', 'walmart', 'ebay']
2025-05-13 09:43:55,110 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-13 09:43:55,110 - DealFinderAI.Controller - INFO - Initialized scraper agents: ['amazon', 'walmart', 'ebay']
2025-05-13 09:44:35,054 - DealFinderAI.Controller - INFO - Processing user query: find me best deal on latest sony wireless headphones
2025-05-13 09:44:35,055 - DealFinderAI.ChatMemoryAgent - INFO - Analyzing query: 'find me best deal on latest sony wireless headphones' for conversation 20250513094355
2025-05-13 09:44:35,055 - DealFinderAI.ChatMemoryAgent - INFO - Current product info: False
2025-05-13 09:44:35,055 - DealFinderAI.ChatMemoryAgent - INFO - No product context available for this conversation
2025-05-13 09:44:35,055 - DealFinderAI.Controller - INFO - Analyze response: {'is_follow_up': False, 'focused_product': None, 'referenced_products': [], 'products': []}
2025-05-13 09:44:35,055 - DealFinderAI.Controller - INFO - Is follow-up? False
2025-05-13 09:44:35,055 - DealFinderAI.Controller - INFO - Referenced products: 0
2025-05-13 09:44:35,055 - DealFinderAI.Controller - INFO - Processing as new search query
2025-05-13 09:44:35,055 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: find me best deal on latest sony wireless headphones
2025-05-13 09:44:36,156 - DealFinderAI.GeminiAgent - WARNING - Failed to parse Gemini response as JSON: ```json
{
  "product_type": "headphones",
  "keywords": ["wireless", "sony", "latest"],
  "price_range": null,
  "brands": ["sony"],
  "features": ["wireless"],
  "sorting_preference": "price_low_to_high",
  "buy_it_now": true
}
```

2025-05-13 09:44:36,156 - DealFinderAI.Controller - INFO - Parsed search parameters: {'product_type': 'headphones', 'keywords': ['wireless', 'sony', 'latest'], 'price_range': None, 'brands': ['sony'], 'features': ['wireless'], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-13 09:44:36,156 - DealFinderAI.AmazonScraperAgent - INFO - Searching Amazon for: {'product_type': 'headphones', 'keywords': ['wireless', 'sony', 'latest'], 'price_range': None, 'brands': ['sony'], 'features': ['wireless'], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-13 09:44:37,498 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B004RE3YQW at 6.99 USD
2025-05-13 09:44:37,500 - DealFinderAI.AmazonScraperAgent - WARNING - Incomplete data for ASIN B01BC1XEK8, falling back to Gemini extraction.
2025-05-13 09:44:40,831 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B01BC1XEK8 at 0.0 USD
2025-05-13 09:44:40,840 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B00FQPCITU at 10.99 USD
2025-05-13 09:44:40,845 - DealFinderAI.AmazonScraperAgent - WARNING - Incomplete data for ASIN B011TNK6V4, falling back to Gemini extraction.
2025-05-13 09:44:44,006 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B011TNK6V4 at 0.0 USD
2025-05-13 09:44:44,016 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B01M6CW9S2 at 19.99 USD
2025-05-13 09:44:44,588 - DealFinderAI.WalmartScraperAgent - INFO - Searching Walmart for: {'product_type': 'headphones', 'keywords': ['wireless', 'sony', 'latest'], 'price_range': None, 'brands': ['sony'], 'features': ['wireless'], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-13 09:44:49,100 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 09:44:49,101 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: for Sony Xperia 5 II Bluetooth Headphones with Earhooks Waterproof IPX7 Over the Ear Wireless Sports Workout Earbuds with LED Display for Gym Running Exercise Fitness with Mic at 27.79 USD
2025-05-13 09:44:49,101 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: for Sony Xperia 5 II Bluetooth Headphones with Earhooks Waterproof IPX7 Over the Ear Wireless Sports Workout Earbuds with LED Display for Gym Running Exercise Fitness with Mic at 27.79 USD
2025-05-13 09:44:51,726 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 09:44:51,727 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: for Sony Xperia 1 V Bluetooth Headphones with Earhooks Waterproof IPX7 Over the Ear Wireless Sports Workout Earbuds with LED Display for Gym Running Exercise Fitness with Mic at 27.79 USD
2025-05-13 09:44:51,728 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: for Sony Xperia 1 V Bluetooth Headphones with Earhooks Waterproof IPX7 Over the Ear Wireless Sports Workout Earbuds with LED Display for Gym Running Exercise Fitness with Mic at 27.79 USD
2025-05-13 09:44:54,240 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 09:44:54,241 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: for Sony Xperia Pro-I Bluetooth Headphones with Earhooks Waterproof IPX7 Over the Ear Wireless Sports Workout Earbuds with LED Display for Gym Running Exercise Fitness with Mic at 27.79 USD
2025-05-13 09:44:54,241 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: for Sony Xperia Pro-I Bluetooth Headphones with Earhooks Waterproof IPX7 Over the Ear Wireless Sports Workout Earbuds with LED Display for Gym Running Exercise Fitness with Mic at 27.79 USD
2025-05-13 09:44:56,695 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 09:44:56,696 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: for Sony Xperia 5 III Bluetooth Headphones with Earhooks Waterproof IPX7 Over the Ear Wireless Sports Workout Earbuds with LED Display for Gym Running Exercise Fitness with Mic at 27.79 USD
2025-05-13 09:44:56,696 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: for Sony Xperia 5 III Bluetooth Headphones with Earhooks Waterproof IPX7 Over the Ear Wireless Sports Workout Earbuds with LED Display for Gym Running Exercise Fitness with Mic at 27.79 USD
2025-05-13 09:44:59,401 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 09:44:59,402 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Wireless Earbuds For Sony Xperia 1 , with Immersive Sound True 5.0 Bluetooth Over The Ear Sports Headphones with 2000mAh Charging Case Stereo Calls Touch Control IPX7 Sweatproof Deep Bass at 27.95 USD
2025-05-13 09:44:59,402 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Wireless Earbuds For Sony Xperia 1 , with Immersive Sound True 5.0 Bluetooth Over The Ear Sports Headphones with 2000mAh Charging Case Stereo Calls Touch Control IPX7 Sweatproof Deep Bass at 27.95 USD
2025-05-13 09:44:59,916 - DealFinderAI.EbayScraperAgent - INFO - Searching eBay for: {'product_type': 'headphones', 'keywords': ['wireless', 'sony', 'latest'], 'price_range': None, 'brands': ['sony'], 'features': ['wireless'], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-13 09:45:01,412 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Sony ULT WEAR 900N Wireless Noise Canceling Bluetooth Headphones - Black at 79.99 USD
2025-05-13 09:45:01,413 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Sony ULT WEAR 900N Wireless Noise Canceling Bluetooth Headphones - Forest Gray at 79.99 USD
2025-05-13 09:45:01,414 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Sony WH-CH720N Noise Canceling Wireless Headphones at 59.99 USD
2025-05-13 09:45:02,143 - DealFinderAI.ResultsAggregatorAgent - INFO - Aggregating results for query: find me best deal on latest sony wireless headphones
2025-05-13 09:45:02,143 - DealFinderAI.ResultsAggregatorAgent - INFO - Found 3 results from various sources
2025-05-13 12:01:55,663 - DealFinderAI - INFO - Logging initialized
2025-05-13 12:01:55,663 - DealFinderAI.Main - INFO - Starting DealFinder AI
2025-05-13 12:01:55,663 - DealFinderAI.Main - INFO - Using LangChain implementation
2025-05-13 12:01:55,663 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-13 12:01:55,664 - DealFinderAI.Controller - INFO - Initialized scraper agents: ['amazon', 'walmart', 'ebay']
2025-05-13 12:01:55,664 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-13 12:01:55,664 - DealFinderAI.Controller - INFO - Initialized scraper agents: ['amazon', 'walmart', 'ebay']
2025-05-13 12:02:14,985 - DealFinderAI.Controller - INFO - Processing user query: find me best deal on sony headphones under 1000 dollar
2025-05-13 12:02:14,985 - DealFinderAI.ChatMemoryAgent - INFO - Analyzing query: 'find me best deal on sony headphones under 1000 dollar' for conversation 20250513120155
2025-05-13 12:02:14,985 - DealFinderAI.ChatMemoryAgent - INFO - Current product info: False
2025-05-13 12:02:14,985 - DealFinderAI.ChatMemoryAgent - INFO - No product context available for this conversation
2025-05-13 12:02:14,985 - DealFinderAI.Controller - INFO - Analyze response: {'is_follow_up': False, 'focused_product': None, 'referenced_products': [], 'products': []}
2025-05-13 12:02:14,985 - DealFinderAI.Controller - INFO - Is follow-up? False
2025-05-13 12:02:14,985 - DealFinderAI.Controller - INFO - Referenced products: 0
2025-05-13 12:02:14,985 - DealFinderAI.Controller - INFO - Processing as new search query
2025-05-13 12:02:14,985 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: find me best deal on sony headphones under 1000 dollar
2025-05-13 12:02:16,090 - DealFinderAI.GeminiAgent - WARNING - Failed to parse Gemini response as JSON: ```json
{
  "product_type": "headphones",
  "keywords": ["sony", "best deal"],
  "price_range": [0, 1000],
  "brands": ["Sony"],
  "features": [],
  "sorting_preference": "price_low_to_high",
  "buy_it_now": true
}
```

2025-05-13 12:02:16,090 - DealFinderAI.Controller - INFO - Parsed search parameters: {'product_type': 'headphones', 'keywords': ['sony', 'best deal'], 'price_range': [0, 1000], 'brands': ['Sony'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-13 12:02:16,090 - DealFinderAI.AmazonScraperAgent - INFO - Searching Amazon for: {'product_type': 'headphones', 'keywords': ['sony', 'best deal'], 'price_range': [0, 1000], 'brands': ['Sony'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-13 12:02:17,464 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B0BGVNXHNH at 2.99 USD
2025-05-13 12:02:17,465 - DealFinderAI.AmazonScraperAgent - WARNING - Incomplete data for ASIN B004MMG380, falling back to Gemini extraction.
2025-05-13 12:02:20,618 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B004MMG380 at 0.0 USD
2025-05-13 12:02:20,625 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B009HW15UG at 8.95 USD
2025-05-13 12:02:20,634 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B00NJ2M43M at 10.99 USD
2025-05-13 12:02:20,639 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B07TB5Z58C at 14.99 USD
2025-05-13 12:02:21,677 - DealFinderAI.Controller - INFO - Amazon returned 0 products
2025-05-13 12:02:21,677 - DealFinderAI.WalmartScraperAgent - INFO - Searching Walmart for: {'product_type': 'headphones', 'keywords': ['sony', 'best deal'], 'price_range': [0, 1000], 'brands': ['Sony'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-13 12:02:26,768 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 12:02:26,769 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Sony MDR-EX14AP Wired In-ear Earbud Headphones with Microphone, Black at 7.88 USD
2025-05-13 12:02:26,769 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Sony MDR-EX14AP Wired In-ear Earbud Headphones with Microphone, Black at 7.88 USD
2025-05-13 12:02:28,785 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 12:02:28,786 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Sony Ultra-Lightweight Earbuds Headphones MDRE9LP/WHI-White at 8.0 USD
2025-05-13 12:02:28,786 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Sony Ultra-Lightweight Earbuds Headphones MDRE9LP/WHI-White at 8.0 USD
2025-05-13 12:02:30,804 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 12:02:30,805 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Sony In-Ear Headphones, Black, MDRE9LP at 8.99 USD
2025-05-13 12:02:30,805 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Sony In-Ear Headphones, Black, MDRE9LP at 8.99 USD
2025-05-13 12:02:32,722 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 12:02:32,722 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: MDRE9LP/BLU at 9.98 USD
2025-05-13 12:02:32,723 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: MDRE9LP/BLU at 9.98 USD
2025-05-13 12:02:34,815 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 12:02:34,816 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Sony Fashion Earbud Headphones, MDREX15LP/W at 9.99 USD
2025-05-13 12:02:34,816 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Sony Fashion Earbud Headphones, MDREX15LP/W at 9.99 USD
2025-05-13 12:02:36,099 - DealFinderAI.Controller - INFO - Walmart returned 0 products
2025-05-13 12:02:36,100 - DealFinderAI.EbayScraperAgent - INFO - Searching eBay for: {'product_type': 'headphones', 'keywords': ['sony', 'best deal'], 'price_range': [0, 1000], 'brands': ['Sony'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-13 12:02:37,643 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Sony ULT WEAR 900N Wireless Noise Canceling Bluetooth Headphones - Black at 79.99 USD
2025-05-13 12:02:37,644 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Sony WH-CH720N Noise Canceling Wireless Headphones at 59.99 USD
2025-05-13 12:02:37,645 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Sony ULT WEAR 900N Wireless Noise Canceling Bluetooth Headphones - Forest Gray at 79.99 USD
2025-05-13 12:02:38,307 - DealFinderAI.Controller - INFO - eBay returned 0 products
2025-05-13 12:02:38,307 - DealFinderAI.Controller - INFO - Total products before aggregation: 0
2025-05-13 12:02:38,307 - DealFinderAI.ResultsAggregatorAgent - INFO - Aggregating results for query: find me best deal on sony headphones under 1000 dollar
2025-05-13 12:02:38,308 - DealFinderAI.ResultsAggregatorAgent - INFO - Found 3 results from various sources
2025-05-13 12:02:38,308 - DealFinderAI.ResultsAggregatorAgent - INFO - Source Amazon: 0 products
2025-05-13 12:02:38,308 - DealFinderAI.ResultsAggregatorAgent - INFO - Source Walmart: 0 products
2025-05-13 12:02:38,308 - DealFinderAI.ResultsAggregatorAgent - INFO - Source eBay: 0 products
2025-05-13 12:02:38,308 - DealFinderAI.ResultsAggregatorAgent - INFO - Total products extracted: 0
2025-05-13 12:02:38,308 - DealFinderAI.ResultsAggregatorAgent - WARNING - No products found in any source
2025-05-13 12:03:07,091 - DealFinderAI - INFO - Logging initialized
2025-05-13 12:03:07,092 - DealFinderAI.Main - INFO - Starting DealFinder AI
2025-05-13 12:03:07,092 - DealFinderAI.Main - INFO - Using LangChain implementation
2025-05-13 12:03:07,136 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-13 12:03:07,136 - DealFinderAI.Controller - INFO - Initialized scraper agents: ['amazon', 'walmart', 'ebay']
2025-05-13 12:03:07,136 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-13 12:03:07,136 - DealFinderAI.Controller - INFO - Initialized scraper agents: ['amazon', 'walmart', 'ebay']
2025-05-13 12:03:07,136 - DealFinderAI.Main - INFO - Web app using LangChain implementation with Gemini model
2025-05-13 12:03:16,618 - DealFinderAI - INFO - Logging initialized
2025-05-13 12:03:16,619 - DealFinderAI.Main - INFO - Starting DealFinder AI
2025-05-13 12:03:16,619 - DealFinderAI.Main - INFO - Using LangChain implementation
2025-05-13 12:03:16,659 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-13 12:03:16,659 - DealFinderAI.Controller - INFO - Initialized scraper agents: ['amazon', 'walmart', 'ebay']
2025-05-13 12:03:16,659 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-13 12:03:16,659 - DealFinderAI.Controller - INFO - Initialized scraper agents: ['amazon', 'walmart', 'ebay']
2025-05-13 12:03:16,659 - DealFinderAI.Main - INFO - Web app using LangChain implementation with Gemini model
2025-05-13 12:03:16,936 - DealFinderAI - INFO - Logging initialized
2025-05-13 12:03:16,936 - DealFinderAI.Main - INFO - Starting DealFinder AI
2025-05-13 12:03:16,936 - DealFinderAI.Main - INFO - Using LangChain implementation
2025-05-13 12:03:16,962 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-13 12:03:16,962 - DealFinderAI.Controller - INFO - Initialized scraper agents: ['amazon', 'walmart', 'ebay']
2025-05-13 12:03:16,962 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-13 12:03:16,962 - DealFinderAI.Controller - INFO - Initialized scraper agents: ['amazon', 'walmart', 'ebay']
2025-05-13 12:03:16,962 - DealFinderAI.Main - INFO - Web app using LangChain implementation with Gemini model
2025-05-13 12:03:52,593 - DealFinderAI.Controller - INFO - Processing user query: find me best deal on sony wireless headphones
2025-05-13 12:03:52,594 - DealFinderAI.ChatMemoryAgent - INFO - Analyzing query: 'find me best deal on sony wireless headphones' for conversation session_20250513120320_9e5c7909
2025-05-13 12:03:52,594 - DealFinderAI.ChatMemoryAgent - INFO - Current product info: False
2025-05-13 12:03:52,594 - DealFinderAI.ChatMemoryAgent - INFO - No product context available for this conversation
2025-05-13 12:03:52,595 - DealFinderAI.Controller - INFO - Analyze response: {'is_follow_up': False, 'focused_product': None, 'referenced_products': [], 'products': []}
2025-05-13 12:03:52,595 - DealFinderAI.Controller - INFO - Is follow-up? False
2025-05-13 12:03:52,595 - DealFinderAI.Controller - INFO - Referenced products: 0
2025-05-13 12:03:52,595 - DealFinderAI.Controller - INFO - Processing as new search query
2025-05-13 12:03:52,595 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: find me best deal on sony wireless headphones
2025-05-13 12:03:53,658 - DealFinderAI.GeminiAgent - WARNING - Failed to parse Gemini response as JSON: ```json
{
  "product_type": "headphones",
  "keywords": ["wireless", "sony"],
  "price_range": null,
  "brands": ["sony"],
  "features": ["wireless"],
  "sorting_preference": "price_low_to_high",
  "buy_it_now": true
}
```

2025-05-13 12:03:53,658 - DealFinderAI.Controller - INFO - Parsed search parameters: {'product_type': 'headphones', 'keywords': ['wireless', 'sony'], 'price_range': None, 'brands': ['sony'], 'features': ['wireless'], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-13 12:03:53,658 - DealFinderAI.AmazonScraperAgent - INFO - Searching Amazon for: {'product_type': 'headphones', 'keywords': ['wireless', 'sony'], 'price_range': None, 'brands': ['sony'], 'features': ['wireless'], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-13 12:03:55,110 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B009HW15UG at 8.95 USD
2025-05-13 12:03:55,112 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B00NJ2M43M at 10.99 USD
2025-05-13 12:03:55,113 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B07TB5Z58C at 14.99 USD
2025-05-13 12:03:55,115 - DealFinderAI.AmazonScraperAgent - WARNING - Incomplete data for ASIN B00GV9VH3S, falling back to Gemini extraction.
2025-05-13 12:03:58,262 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B00GV9VH3S at 0.0 USD
2025-05-13 12:03:58,269 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B00NBR7962 at 16.99 USD
2025-05-13 12:03:59,522 - DealFinderAI.Controller - INFO - Amazon returned 0 products
2025-05-13 12:03:59,523 - DealFinderAI.WalmartScraperAgent - INFO - Searching Walmart for: {'product_type': 'headphones', 'keywords': ['wireless', 'sony'], 'price_range': None, 'brands': ['sony'], 'features': ['wireless'], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-13 12:04:04,610 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 12:04:04,611 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Replacement Noise Isolation Silicone Soft Ear Buds Earplug Tips for Senso, TOZO, Sony, Zeus, Otium, Hussar Sport in Ear Headphones Wireless Earphones (Red, Small - 5 Pair) at 6.95 USD
2025-05-13 12:04:04,612 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Replacement Noise Isolation Silicone Soft Ear Buds Earplug Tips for Senso, TOZO, Sony, Zeus, Otium, Hussar Sport in Ear Headphones Wireless Earphones (Red, Small - 5 Pair) at 6.95 USD
2025-05-13 12:04:06,914 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 12:04:06,914 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Sony MDR-EX14AP Wired In-ear Earbud Headphones with Microphone, White at 7.88 USD
2025-05-13 12:04:06,915 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Sony MDR-EX14AP Wired In-ear Earbud Headphones with Microphone, White at 7.88 USD
2025-05-13 12:04:09,429 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 12:04:09,429 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Ear Pads Cushion Replacement for Sony Ony WH-1000XM5 Bluetooth Wireless Noise Canceling Headphone Earpad PU Leather at 11.5 USD
2025-05-13 12:04:09,429 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Ear Pads Cushion Replacement for Sony Ony WH-1000XM5 Bluetooth Wireless Noise Canceling Headphone Earpad PU Leather at 11.5 USD
2025-05-13 12:04:12,036 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 12:04:12,036 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Wireless Earbuds, Bluetooth Ear Buds HiFi Stereo Sound Deep Bass Headphones with LED Charging Case for Sony Xperia Pro Touch Control, Noise Cancelling Mic, IPX7 Waterproof Earphones at 17.99 USD
2025-05-13 12:04:12,036 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Wireless Earbuds, Bluetooth Ear Buds HiFi Stereo Sound Deep Bass Headphones with LED Charging Case for Sony Xperia Pro Touch Control, Noise Cancelling Mic, IPX7 Waterproof Earphones at 17.99 USD
2025-05-13 12:04:14,858 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 12:04:14,859 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Wireless Earbuds, Bluetooth Ear Buds HiFi Stereo Sound Deep Bass Headphones with LED Charging Case for Sony Xperia 1 III Touch Control, Noise Cancelling Mic, IPX7 Waterproof Earphones at 17.99 USD
2025-05-13 12:04:14,859 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Wireless Earbuds, Bluetooth Ear Buds HiFi Stereo Sound Deep Bass Headphones with LED Charging Case for Sony Xperia 1 III Touch Control, Noise Cancelling Mic, IPX7 Waterproof Earphones at 17.99 USD
2025-05-13 12:04:14,860 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Replacement Noise Isolation Silicone Soft Ear Buds Earplug Tips for Senso, TOZO, Sony, Zeus, Otium, Hussar Sport in Ear Headphones Wireless Earphones (Red, Small - 5 Pair) at 6.95 USD
2025-05-13 12:04:14,860 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Ear Pads Cushion Replacement for Sony Ony WH-1000XM5 Bluetooth Wireless Noise Canceling Headphone Earpad PU Leather at 11.5 USD
2025-05-13 12:04:14,860 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Wireless Earbuds, Bluetooth Ear Buds HiFi Stereo Sound Deep Bass Headphones with LED Charging Case for Sony Xperia Pro Touch Control, Noise Cancelling Mic, IPX7 Waterproof Earphones at 17.99 USD
2025-05-13 12:04:14,860 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Wireless Earbuds, Bluetooth Ear Buds HiFi Stereo Sound Deep Bass Headphones with LED Charging Case for Sony Xperia 1 III Touch Control, Noise Cancelling Mic, IPX7 Waterproof Earphones at 17.99 USD
2025-05-13 12:04:15,833 - DealFinderAI.Controller - INFO - Walmart returned 4 products
2025-05-13 12:04:15,833 - DealFinderAI.EbayScraperAgent - INFO - Searching eBay for: {'product_type': 'headphones', 'keywords': ['wireless', 'sony'], 'price_range': None, 'brands': ['sony'], 'features': ['wireless'], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-13 12:04:17,113 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: SONY Wireless In-Ear Headphones Product Catalog From JAPAN F/S at 6.0 USD
2025-05-13 12:04:17,113 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: SONY Wireless In-Ear Headphones Product Catalog From JAPAN F/S at 6.0 USD
2025-05-13 12:04:17,114 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: SONY WH-RF400R Wireless Headphones Transmitter at 7.99 USD
2025-05-13 12:04:17,114 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: SONY WH-RF400R Wireless Headphones Transmitter at 7.99 USD
2025-05-13 12:04:17,115 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Sony WF1000X Truly Wireless Headphones Right Side Ear Bud WF-1000XR Gold at 7.99 USD
2025-05-13 12:04:17,115 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Sony WF1000X Truly Wireless Headphones Right Side Ear Bud WF-1000XR Gold at 7.99 USD
2025-05-13 12:04:17,779 - DealFinderAI.Controller - INFO - eBay returned 3 products
2025-05-13 12:04:17,780 - DealFinderAI.Controller - INFO - Total products before aggregation: 7
2025-05-13 12:04:17,780 - DealFinderAI.ResultsAggregatorAgent - INFO - Aggregating results for query: find me best deal on sony wireless headphones
2025-05-13 12:04:17,780 - DealFinderAI.ResultsAggregatorAgent - INFO - Found 3 results from various sources
2025-05-13 12:04:17,780 - DealFinderAI.ResultsAggregatorAgent - INFO - Source Amazon: 0 products
2025-05-13 12:04:17,780 - DealFinderAI.ResultsAggregatorAgent - INFO - Source Walmart: 4 products
2025-05-13 12:04:17,781 - DealFinderAI.ResultsAggregatorAgent - INFO - Source eBay: 3 products
2025-05-13 12:04:17,781 - DealFinderAI.ResultsAggregatorAgent - INFO - Total products extracted: 7
2025-05-13 12:04:17,781 - DealFinderAI.ResultsAggregatorAgent - INFO - Ranking 7 products
2025-05-13 12:04:17,781 - DealFinderAI.ResultsAggregatorAgent - INFO - Sorted 7 products by score
2025-05-13 12:04:17,781 - DealFinderAI.ResultsAggregatorAgent - INFO - Returning 7 diversified products
2025-05-13 12:04:17,782 - DealFinderAI.ResultsAggregatorAgent - INFO - Products after ranking: 7
2025-05-13 12:04:17,782 - DealFinderAI.ResultsAggregatorAgent - INFO - Final products: 7
2025-05-13 12:04:17,782 - DealFinderAI.Controller - INFO - Products after aggregation: 7
2025-05-13 12:04:17,782 - DealFinderAI.ProductComparisonAgent - INFO - Comparing products for query: find me best deal on sony wireless headphones
2025-05-13 12:04:17,782 - DealFinderAI.ProductComparisonAgent - INFO - Found 7 products to compare
2025-05-13 12:04:17,782 - DealFinderAI.ProductComparisonAgent - INFO - Grouping 7 products
2025-05-13 12:04:17,783 - DealFinderAI.ProductComparisonAgent - INFO - Created 1 product groups
2025-05-13 12:04:17,784 - DealFinderAI.ProductComparisonAgent - INFO - Analyzing product group with 2 items
2025-05-13 12:04:17,784 - DealFinderAI.ProductComparisonAgent - INFO - Best deal: Wireless Earbuds, Bluetooth Ear Buds HiFi Stereo Sound Deep Bass Headphones with LED Charging Case for Sony Xperia Pro Touch Control, Noise Cancelling Mic, IPX7 Waterproof Earphones at $17.99
2025-05-13 12:04:17,784 - DealFinderAI.ProductComparisonAgent - INFO - Savings: $0.00 (0.0%)
2025-05-13 12:04:17,784 - DealFinderAI.Controller - ERROR - Error processing query: 'ChatMemoryAgent' object has no attribute '_store_context'
2025-05-13 12:04:27,569 - DealFinderAI.Main - INFO - Toggled LangChain integration to: False
2025-05-13 12:04:33,694 - DealFinderAI.Controller - INFO - Processing user query: find me best deal on sony wireless headphones
2025-05-13 12:04:33,695 - DealFinderAI.ChatMemoryAgent - INFO - Analyzing query: 'find me best deal on sony wireless headphones' for conversation session_20250513120320_9e5c7909
2025-05-13 12:04:33,695 - DealFinderAI.ChatMemoryAgent - INFO - Current product info: False
2025-05-13 12:04:33,695 - DealFinderAI.ChatMemoryAgent - INFO - No product context available for this conversation
2025-05-13 12:04:33,695 - DealFinderAI.Controller - INFO - Analyze response: {'is_follow_up': False, 'focused_product': None, 'referenced_products': [], 'products': []}
2025-05-13 12:04:33,695 - DealFinderAI.Controller - INFO - Is follow-up? False
2025-05-13 12:04:33,695 - DealFinderAI.Controller - INFO - Referenced products: 0
2025-05-13 12:04:33,695 - DealFinderAI.Controller - INFO - Processing as new search query
2025-05-13 12:04:33,695 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: find me best deal on sony wireless headphones
2025-05-13 12:04:34,543 - DealFinderAI.GeminiAgent - WARNING - Failed to parse Gemini response as JSON: ```json
{
  "product_type": "headphones",
  "keywords": ["wireless", "sony"],
  "price_range": null,
  "brands": ["Sony"],
  "features": ["wireless"],
  "sorting_preference": "price_low_to_high",
  "buy_it_now": true
}
```

2025-05-13 12:04:34,545 - DealFinderAI.Controller - INFO - Parsed search parameters: {'product_type': 'headphones', 'keywords': ['wireless', 'sony'], 'price_range': None, 'brands': ['Sony'], 'features': ['wireless'], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-13 12:04:34,545 - DealFinderAI.AmazonScraperAgent - INFO - Searching Amazon for: {'product_type': 'headphones', 'keywords': ['wireless', 'sony'], 'price_range': None, 'brands': ['Sony'], 'features': ['wireless'], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-13 12:04:35,735 - DealFinderAI.AmazonScraperAgent - WARNING - Incomplete data for ASIN B07C7HMKRW, falling back to Gemini extraction.
2025-05-13 12:04:38,805 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B07C7HMKRW at 0.0 USD
2025-05-13 12:04:38,817 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B00Q6P4CMA at 6.95 USD
2025-05-13 12:04:38,825 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B004RE3YNA at 6.99 USD
2025-05-13 12:04:38,831 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B004RE3YQW at 6.99 USD
2025-05-13 12:04:38,835 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B07C7CQPKP at 7.88 USD
2025-05-13 12:04:40,012 - DealFinderAI.Controller - INFO - Amazon returned 0 products
2025-05-13 12:04:40,012 - DealFinderAI.WalmartScraperAgent - INFO - Searching Walmart for: {'product_type': 'headphones', 'keywords': ['wireless', 'sony'], 'price_range': None, 'brands': ['Sony'], 'features': ['wireless'], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-13 12:04:44,539 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 12:04:44,539 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Replacement Noise Isolation Silicone Soft Ear Buds Earplug Tips for Senso, TOZO, Sony, Zeus, Otium, Hussar Sport in Ear Headphones Wireless Earphones (Red, Small - 5 Pair) at 6.95 USD
2025-05-13 12:04:44,539 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Replacement Noise Isolation Silicone Soft Ear Buds Earplug Tips for Senso, TOZO, Sony, Zeus, Otium, Hussar Sport in Ear Headphones Wireless Earphones (Red, Small - 5 Pair) at 6.95 USD
2025-05-13 12:04:46,858 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 12:04:46,859 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Sony MDR-EX14AP Wired In-ear Earbud Headphones with Microphone, White at 7.88 USD
2025-05-13 12:04:46,859 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Sony MDR-EX14AP Wired In-ear Earbud Headphones with Microphone, White at 7.88 USD
2025-05-13 12:04:49,369 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 12:04:49,370 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Ear Pads Cushion Replacement for Sony Ony WH-1000XM5 Bluetooth Wireless Noise Canceling Headphone Earpad PU Leather at 11.5 USD
2025-05-13 12:04:49,370 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Ear Pads Cushion Replacement for Sony Ony WH-1000XM5 Bluetooth Wireless Noise Canceling Headphone Earpad PU Leather at 11.5 USD
2025-05-13 12:04:51,899 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 12:04:51,899 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Wireless Earbuds, Bluetooth Ear Buds HiFi Stereo Sound Deep Bass Headphones with LED Charging Case for Sony Xperia Pro Touch Control, Noise Cancelling Mic, IPX7 Waterproof Earphones at 17.99 USD
2025-05-13 12:04:51,899 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Wireless Earbuds, Bluetooth Ear Buds HiFi Stereo Sound Deep Bass Headphones with LED Charging Case for Sony Xperia Pro Touch Control, Noise Cancelling Mic, IPX7 Waterproof Earphones at 17.99 USD
2025-05-13 12:04:54,700 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 12:04:54,700 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Wireless Earbuds, Bluetooth Ear Buds HiFi Stereo Sound Deep Bass Headphones with LED Charging Case for Sony Xperia 1 III Touch Control, Noise Cancelling Mic, IPX7 Waterproof Earphones at 17.99 USD
2025-05-13 12:04:54,700 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Wireless Earbuds, Bluetooth Ear Buds HiFi Stereo Sound Deep Bass Headphones with LED Charging Case for Sony Xperia 1 III Touch Control, Noise Cancelling Mic, IPX7 Waterproof Earphones at 17.99 USD
2025-05-13 12:04:54,700 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Replacement Noise Isolation Silicone Soft Ear Buds Earplug Tips for Senso, TOZO, Sony, Zeus, Otium, Hussar Sport in Ear Headphones Wireless Earphones (Red, Small - 5 Pair) at 6.95 USD
2025-05-13 12:04:54,701 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Ear Pads Cushion Replacement for Sony Ony WH-1000XM5 Bluetooth Wireless Noise Canceling Headphone Earpad PU Leather at 11.5 USD
2025-05-13 12:04:54,701 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Wireless Earbuds, Bluetooth Ear Buds HiFi Stereo Sound Deep Bass Headphones with LED Charging Case for Sony Xperia Pro Touch Control, Noise Cancelling Mic, IPX7 Waterproof Earphones at 17.99 USD
2025-05-13 12:04:54,701 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Wireless Earbuds, Bluetooth Ear Buds HiFi Stereo Sound Deep Bass Headphones with LED Charging Case for Sony Xperia 1 III Touch Control, Noise Cancelling Mic, IPX7 Waterproof Earphones at 17.99 USD
2025-05-13 12:04:55,503 - DealFinderAI.Controller - INFO - Walmart returned 4 products
2025-05-13 12:04:55,503 - DealFinderAI.EbayScraperAgent - INFO - Searching eBay for: {'product_type': 'headphones', 'keywords': ['wireless', 'sony'], 'price_range': None, 'brands': ['Sony'], 'features': ['wireless'], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-13 12:04:56,767 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: SONY Wireless In-Ear Headphones Product Catalog From JAPAN F/S at 6.0 USD
2025-05-13 12:04:56,767 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: SONY Wireless In-Ear Headphones Product Catalog From JAPAN F/S at 6.0 USD
2025-05-13 12:04:56,768 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: SONY WH-RF400R Wireless Headphones Transmitter at 7.99 USD
2025-05-13 12:04:56,768 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: SONY WH-RF400R Wireless Headphones Transmitter at 7.99 USD
2025-05-13 12:04:56,769 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Sony WF1000X Truly Wireless Headphones Right Side Ear Bud WF-1000XR Gold at 7.99 USD
2025-05-13 12:04:56,769 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Sony WF1000X Truly Wireless Headphones Right Side Ear Bud WF-1000XR Gold at 7.99 USD
2025-05-13 12:04:57,545 - DealFinderAI.Controller - INFO - eBay returned 3 products
2025-05-13 12:04:57,546 - DealFinderAI.Controller - INFO - Total products before aggregation: 7
2025-05-13 12:04:57,546 - DealFinderAI.ResultsAggregatorAgent - INFO - Aggregating results for query: find me best deal on sony wireless headphones
2025-05-13 12:04:57,546 - DealFinderAI.ResultsAggregatorAgent - INFO - Found 3 results from various sources
2025-05-13 12:04:57,547 - DealFinderAI.ResultsAggregatorAgent - INFO - Source Amazon: 0 products
2025-05-13 12:04:57,547 - DealFinderAI.ResultsAggregatorAgent - INFO - Source Walmart: 4 products
2025-05-13 12:04:57,547 - DealFinderAI.ResultsAggregatorAgent - INFO - Source eBay: 3 products
2025-05-13 12:04:57,547 - DealFinderAI.ResultsAggregatorAgent - INFO - Total products extracted: 7
2025-05-13 12:04:57,547 - DealFinderAI.ResultsAggregatorAgent - INFO - Ranking 7 products
2025-05-13 12:04:57,547 - DealFinderAI.ResultsAggregatorAgent - INFO - Sorted 7 products by score
2025-05-13 12:04:57,548 - DealFinderAI.ResultsAggregatorAgent - INFO - Returning 7 diversified products
2025-05-13 12:04:57,548 - DealFinderAI.ResultsAggregatorAgent - INFO - Products after ranking: 7
2025-05-13 12:04:57,548 - DealFinderAI.ResultsAggregatorAgent - INFO - Final products: 7
2025-05-13 12:04:57,548 - DealFinderAI.Controller - INFO - Products after aggregation: 7
2025-05-13 12:04:57,548 - DealFinderAI.ProductComparisonAgent - INFO - Comparing products for query: find me best deal on sony wireless headphones
2025-05-13 12:04:57,548 - DealFinderAI.ProductComparisonAgent - INFO - Found 7 products to compare
2025-05-13 12:04:57,548 - DealFinderAI.ProductComparisonAgent - INFO - Grouping 7 products
2025-05-13 12:04:57,549 - DealFinderAI.ProductComparisonAgent - INFO - Created 1 product groups
2025-05-13 12:04:57,549 - DealFinderAI.ProductComparisonAgent - INFO - Analyzing product group with 2 items
2025-05-13 12:04:57,549 - DealFinderAI.ProductComparisonAgent - INFO - Best deal: Wireless Earbuds, Bluetooth Ear Buds HiFi Stereo Sound Deep Bass Headphones with LED Charging Case for Sony Xperia Pro Touch Control, Noise Cancelling Mic, IPX7 Waterproof Earphones at $17.99
2025-05-13 12:04:57,549 - DealFinderAI.ProductComparisonAgent - INFO - Savings: $0.00 (0.0%)
2025-05-13 12:04:57,549 - DealFinderAI.Controller - ERROR - Error processing query: 'ChatMemoryAgent' object has no attribute '_store_context'
2025-05-13 13:02:41,916 - DealFinderAI - INFO - Logging initialized
2025-05-13 13:02:41,916 - DealFinderAI.Main - INFO - Starting DealFinder AI
2025-05-13 13:02:41,916 - DealFinderAI.Main - INFO - Using LangChain implementation
2025-05-13 13:02:41,958 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-13 13:02:41,958 - DealFinderAI.Controller - INFO - Initialized scraper agents: ['amazon', 'walmart', 'ebay']
2025-05-13 13:02:41,958 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-13 13:02:41,958 - DealFinderAI.Controller - INFO - Initialized scraper agents: ['amazon', 'walmart', 'ebay']
2025-05-13 13:02:41,958 - DealFinderAI.Main - INFO - Web app using LangChain implementation with Gemini model
2025-05-13 13:04:56,573 - DealFinderAI - INFO - Logging initialized
2025-05-13 13:04:56,573 - DealFinderAI.Main - INFO - Starting DealFinder AI
2025-05-13 13:04:56,573 - DealFinderAI.Main - INFO - Using LangChain implementation
2025-05-13 13:04:56,616 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-13 13:04:56,616 - DealFinderAI.Controller - INFO - Initialized scraper agents: ['amazon', 'walmart', 'ebay']
2025-05-13 13:04:56,616 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-13 13:04:56,616 - DealFinderAI.Controller - INFO - Initialized scraper agents: ['amazon', 'walmart', 'ebay']
2025-05-13 13:04:56,616 - DealFinderAI.Main - INFO - Web app using LangChain implementation with Gemini model
2025-05-13 13:05:11,735 - DealFinderAI.Controller - INFO - Processing user query: find me best sony headphones
2025-05-13 13:05:11,735 - DealFinderAI.ChatMemoryAgent - INFO - Analyzing query: 'find me best sony headphones' for conversation session_20250513130502_31d40806
2025-05-13 13:05:11,735 - DealFinderAI.ChatMemoryAgent - INFO - Current product info: False
2025-05-13 13:05:11,735 - DealFinderAI.ChatMemoryAgent - INFO - No product context available for this conversation
2025-05-13 13:05:11,735 - DealFinderAI.Controller - INFO - Analyze response: {'is_follow_up': False, 'focused_product': None, 'referenced_products': [], 'products': []}
2025-05-13 13:05:11,735 - DealFinderAI.Controller - INFO - Is follow-up? False
2025-05-13 13:05:11,735 - DealFinderAI.Controller - INFO - Referenced products: 0
2025-05-13 13:05:11,735 - DealFinderAI.Controller - INFO - Processing as new search query
2025-05-13 13:05:11,735 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: find me best sony headphones
2025-05-13 13:05:13,405 - DealFinderAI.GeminiAgent - WARNING - Failed to parse Gemini response as JSON: ```json
{
  "product_type": "headphones",
  "keywords": ["best", "sony"],
  "price_range": null,
  "brands": ["Sony"],
  "features": [],
  "sorting_preference": null,
  "buy_it_now": true
}
```

2025-05-13 13:05:13,405 - DealFinderAI.Controller - INFO - Parsed search parameters: {'product_type': 'headphones', 'keywords': ['best', 'sony'], 'price_range': None, 'brands': ['Sony'], 'features': [], 'sorting_preference': None, 'buy_it_now': True}
2025-05-13 13:05:13,406 - DealFinderAI.AmazonScraperAgent - INFO - Searching Amazon for: {'product_type': 'headphones', 'keywords': ['best', 'sony'], 'price_range': None, 'brands': ['Sony'], 'features': [], 'sorting_preference': None, 'buy_it_now': True}
2025-05-13 13:05:15,206 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B0016MNAAI at 169.99 USD
2025-05-13 13:05:15,209 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B0B93YKQT3 at 599.0 USD
2025-05-13 13:05:15,211 - DealFinderAI.AmazonScraperAgent - WARNING - Incomplete data for ASIN B0BS1QCFHX, falling back to Gemini extraction.
2025-05-13 13:05:18,397 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B0BS1QCFHX at 0.0 USD
2025-05-13 13:05:18,408 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B09XS7JWHH at 348.0 USD
2025-05-13 13:05:18,414 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B000AJIF4E at 98.0 USD
2025-05-13 13:05:19,758 - DealFinderAI.Controller - INFO - Amazon returned 0 products
2025-05-13 13:05:19,758 - DealFinderAI.WalmartScraperAgent - INFO - Searching Walmart for: {'product_type': 'headphones', 'keywords': ['best', 'sony'], 'price_range': None, 'brands': ['Sony'], 'features': [], 'sorting_preference': None, 'buy_it_now': True}
2025-05-13 13:05:24,383 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 13:05:24,383 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Sony WH-1000XM5 The Best Wireless Noise Canceling Headphones, Black at 319.44 USD
2025-05-13 13:05:24,383 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Sony WH-1000XM5 The Best Wireless Noise Canceling Headphones, Black at 319.44 USD
2025-05-13 13:05:27,414 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 13:05:27,415 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Open Box Sony WH-1000XM4 Wireless Premium Noise Canceling Overhead Headphones with Mic for Phone Call and Alexa Voice Control, Black - at 234.99 USD
2025-05-13 13:05:27,415 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Open Box Sony WH-1000XM4 Wireless Premium Noise Canceling Overhead Headphones with Mic for Phone Call and Alexa Voice Control, Black - at 234.99 USD
2025-05-13 13:05:30,070 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 13:05:30,071 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Ultimaxx Essential Sony WH-1000XM5 Noise-Canceling Wireless Over-Ear Headphones Bundle (Blue) - Includes: Water-Resistant Gadget Backpack & More (7pc Bundle) at 329.95 USD
2025-05-13 13:05:30,071 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Ultimaxx Essential Sony WH-1000XM5 Noise-Canceling Wireless Over-Ear Headphones Bundle (Blue) - Includes: Water-Resistant Gadget Backpack & More (7pc Bundle) at 329.95 USD
2025-05-13 13:05:32,740 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 13:05:32,741 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Ultimaxx Essential Sony WH-1000XM5 Noise-Canceling Wireless Over-Ear Headphones Bundle (Silver) - Includes: Water-Resistant Gadget Backpack & More (7pc Bundle) at 349.95 USD
2025-05-13 13:05:32,741 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Ultimaxx Essential Sony WH-1000XM5 Noise-Canceling Wireless Over-Ear Headphones Bundle (Silver) - Includes: Water-Resistant Gadget Backpack & More (7pc Bundle) at 349.95 USD
2025-05-13 13:05:35,331 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 13:05:35,331 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Sony WH-1000XM5 The Best Wireless Noise Canceling Headphones, Black at 319.44 USD
2025-05-13 13:05:35,331 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Sony WH-1000XM5 The Best Wireless Noise Canceling Headphones, Black at 319.44 USD
2025-05-13 13:05:35,331 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Sony WH-1000XM5 The Best Wireless Noise Canceling Headphones, Black at 319.44 USD
2025-05-13 13:05:35,331 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Sony WH-1000XM5 The Best Wireless Noise Canceling Headphones, Black at 319.44 USD
2025-05-13 13:05:36,760 - DealFinderAI.Controller - INFO - Walmart returned 2 products
2025-05-13 13:05:36,761 - DealFinderAI.EbayScraperAgent - INFO - Searching eBay for: {'product_type': 'headphones', 'keywords': ['best', 'sony'], 'price_range': None, 'brands': ['Sony'], 'features': [], 'sorting_preference': None, 'buy_it_now': True}
2025-05-13 13:05:38,139 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Sony WH-1000XM5 The Best Wireless Auto Noise Canceling Headphones Optimizer at 299.95 USD
2025-05-13 13:05:38,139 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Sony WH-1000XM5 The Best Wireless Auto Noise Canceling Headphones Optimizer at 299.95 USD
2025-05-13 13:05:38,139 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Sony WF-1000XM5 The Best Truly Wireless Bluetooth Earbuds Headphones - Black at 139.99 USD
2025-05-13 13:05:38,139 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Sony WF-1000XM5 The Best Truly Wireless Bluetooth Earbuds Headphones - Black at 139.99 USD
2025-05-13 13:05:38,140 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Sony WH-1000XM5 The Best Wireless Noise Canceling Headphones,-Midnight Blue at 320.0 USD
2025-05-13 13:05:38,140 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Sony WH-1000XM5 The Best Wireless Noise Canceling Headphones,-Midnight Blue at 320.0 USD
2025-05-13 13:05:38,869 - DealFinderAI.Controller - INFO - eBay returned 3 products
2025-05-13 13:05:38,869 - DealFinderAI.Controller - INFO - Total products before aggregation: 5
2025-05-13 13:05:38,869 - DealFinderAI.ResultsAggregatorAgent - INFO - Aggregating results for query: find me best sony headphones
2025-05-13 13:05:38,870 - DealFinderAI.ResultsAggregatorAgent - INFO - Found 3 results from various sources
2025-05-13 13:05:38,870 - DealFinderAI.ResultsAggregatorAgent - INFO - Source Amazon: 0 products
2025-05-13 13:05:38,870 - DealFinderAI.ResultsAggregatorAgent - INFO - Source Walmart: 2 products
2025-05-13 13:05:38,870 - DealFinderAI.ResultsAggregatorAgent - INFO - Source eBay: 3 products
2025-05-13 13:05:38,870 - DealFinderAI.ResultsAggregatorAgent - INFO - Total products extracted: 5
2025-05-13 13:05:38,870 - DealFinderAI.ResultsAggregatorAgent - INFO - Ranking 5 products
2025-05-13 13:05:38,870 - DealFinderAI.ResultsAggregatorAgent - INFO - Sorted 5 products by score
2025-05-13 13:05:38,870 - DealFinderAI.ResultsAggregatorAgent - INFO - Returning all 5 sorted products
2025-05-13 13:05:38,870 - DealFinderAI.ResultsAggregatorAgent - INFO - Products after ranking: 5
2025-05-13 13:05:38,870 - DealFinderAI.ResultsAggregatorAgent - INFO - Final products: 5
2025-05-13 13:05:38,871 - DealFinderAI.Controller - INFO - Products after aggregation: 5
2025-05-13 13:05:38,871 - DealFinderAI.ProductComparisonAgent - INFO - Comparing products for query: find me best sony headphones
2025-05-13 13:05:38,871 - DealFinderAI.ProductComparisonAgent - INFO - Found 5 products to compare
2025-05-13 13:05:38,871 - DealFinderAI.ProductComparisonAgent - INFO - Grouping 5 products
2025-05-13 13:05:38,871 - DealFinderAI.ProductComparisonAgent - INFO - Created 1 product groups
2025-05-13 13:05:38,871 - DealFinderAI.ProductComparisonAgent - INFO - Analyzing product group with 4 items
2025-05-13 13:05:38,872 - DealFinderAI.ProductComparisonAgent - INFO - Best deal: Sony WH-1000XM5 The Best Wireless Auto Noise Canceling Headphones Optimizer at $299.95
2025-05-13 13:05:38,872 - DealFinderAI.ProductComparisonAgent - INFO - Savings: $14.76 (4.7%)
2025-05-13 13:05:38,872 - DealFinderAI.ChatMemoryAgent - INFO - Storing context for conversation session_20250513130502_31d40806
2025-05-13 13:05:38,872 - DealFinderAI.ChatMemoryAgent - INFO - Storing 5 products for conversation session_20250513130502_31d40806
2025-05-13 13:05:38,872 - DealFinderAI.PresentationAgent - INFO - Preparing presentation for 5 products
2025-05-13 13:05:38,872 - DealFinderAI.ChatMemoryAgent - INFO - Storing context for conversation session_20250513130502_31d40806
2025-05-13 13:05:38,872 - DealFinderAI.ChatMemoryAgent - INFO - Storing 5 products for conversation session_20250513130502_31d40806
2025-05-13 13:05:38,872 - DealFinderAI.Controller - INFO - Successfully stored search results in memory
2025-05-13 13:06:35,042 - DealFinderAI.Controller - INFO - Processing user query: tell me more about 5th product
2025-05-13 13:06:35,044 - DealFinderAI.ChatMemoryAgent - INFO - Analyzing query: 'tell me more about 5th product' for conversation session_20250513130502_31d40806
2025-05-13 13:06:35,044 - DealFinderAI.ChatMemoryAgent - INFO - Current product info: True
2025-05-13 13:06:35,044 - DealFinderAI.ChatMemoryAgent - INFO - Number of products in memory: 5
2025-05-13 13:06:35,044 - DealFinderAI.ChatMemoryAgent - INFO - Found 5 products in memory
2025-05-13 13:06:35,045 - DealFinderAI.ChatMemoryAgent - INFO - Follow-up analysis: True, Referenced products: 1
2025-05-13 13:06:35,045 - DealFinderAI.Controller - INFO - Analyze response: {'is_follow_up': True, 'focused_product': None, 'referenced_products': [{'title': 'Sony WH-1000XM5 The Best Wireless Noise Canceling Headphones, Black', 'price': 319.44, 'currency': 'USD', 'url': '/ip/Sony-WH-1000XM5-The-Best-Wireless-Noise-Canceling-Headphones-Black/386006068?classType=VARIANT&from=/search', 'image_url': 'https://i5.walmartimages.com/seo/Sony-WH-1000XM5-The-Best-Wireless-Noise-Canceling-Headphones-Black_7384c879-1d54-47e8-9876-1d7adadcf0a5.542c245c25d295b30fa5820eacea4450.jpeg?odnHeight=580&odnWidth=580&odnBg=FFFFFF', 'rating': 0.0, 'reviews': 0, 'is_sponsored': False, 'is_pickup_today': False, 'product_id': '7L1R4YYVLYOY', 'source': 'Walmart', '_score': 0.0, 'effective_price': 319.44}], 'products': [{'title': 'Sony WF-1000XM5 The Best Truly Wireless Bluetooth Earbuds Headphones - Black', 'price': 139.99, 'shipping': 0.0, 'total_price': 139.99, 'is_free_shipping': True, 'currency': 'USD', 'url': 'https://www.ebay.com/itm/256853907827?_skw=headphones+best+sony+Sony&itmmeta=01JV59QT9Z39Z96EHF34J5JNFD&hash=item3bcdaf9973%3Ag%3A41EAAOSwDFln0Txs&itmprp=enc%3AAQAKAAABAFkggFvd1GGDu0w3yXCmi1eDHCY2ER51Urg5UlV%2B56m4ZdNkT7hrfgw2ipF8%2Fa8uHK7uJuFeHnkvXCtGV1eBA%2BNiXtxsHBFeYAJ3Wby2iUvUi7awKrpRiQICJcmzJeuYQsPdGO9DjzO%2Br71hb%2B8HFA2Vmhq5i6YOfoi1WpjvZsp7CAlZ1ofHunOHs9QWyWmtFJdfH0rnByHB0XDvox%2FQfG5Xw5tt4OZWQpbslNtX16VmJYm4kj6zAMgNlo3NPyqB610yl1yybFcntoBBi2RqcpO4JNDjBF%2B%2FhHiOPe%2FzlUwWAP8R939TCH0r3h7tuu1%2FigHQl7u%2BFs4kc%2BkU35K8gi8%3D%7Ctkp%3ABFBMkqXfqdll&keyword=headphones+best+sony+Sony&sacat=0&relatedSearch=true&LH_BIN=1', 'image_url': '', 'is_sponsored': False, 'condition': 'Pre-Owned', 'listing_type': 'Buy It Now', 'seller_rating': 100.0, 'item_id': '256853907827', 'source': 'eBay', '_score': 36.001}, {'title': 'Sony WH-1000XM5 The Best Wireless Auto Noise Canceling Headphones Optimizer', 'price': 299.95, 'shipping': 0.0, 'total_price': 299.95, 'is_free_shipping': True, 'currency': 'USD', 'url': 'https://www.ebay.com/itm/235720395134?_skw=headphones+best+sony+Sony&itmmeta=01JV59QT9ZDYGP8MANYHWH7MP1&hash=item36e207c97e%3Ag%3A5GQAAOSw6jJm0SLC&itmprp=enc%3AAQAKAAAA8FkggFvd1GGDu0w3yXCmi1fc6LwlPEiKNSm4y6vXwq%2FNwkOTh%2FRWfeRaSmfW9s0HMFDtEk3sRqvxj3qJ6gF8Y82eIZO%2Bjq5Vh0SFLm44F5yjNqCMgihAI6JnCd%2FKgYLeqvmulp3EV1jJhEGGX6Mj4IaVhCIOICEfBzIe1%2BsPgd6dkY7%2B6iJHIkiyKA6TUoQTMyymdu7b7qFr3wkkywrN%2BocReM7X82%2FwyqSztlswN8WHiy5E8AFo57JSZiMrhE6F8U0W0t089O%2FGmRn9cpi04N%2Bxuys2%2BTUTXlqgSAEaJu2CZokk9Ebt8PMXo9ZQYPGtAg%3D%3D%7Ctkp%3ABFBMkqXfqdll&keyword=headphones+best+sony+Sony&sacat=0&relatedSearch=true&LH_BIN=1', 'image_url': '', 'is_sponsored': False, 'condition': 'Brand New', 'listing_type': 'Buy It Now', 'seller_rating': 98.2, 'item_id': '235720395134', 'source': 'eBay', '_score': 30.005000000000003, 'effective_price': 299.95}, {'title': 'Sony WH-1000XM5 The Best Wireless Noise Canceling Headphones,-Midnight Blue', 'price': 320.0, 'shipping': 0.0, 'total_price': 320.0, 'is_free_shipping': True, 'currency': 'USD', 'url': 'https://www.ebay.com/itm/267245638615?_skw=headphones+best+sony+Sony&epid=10061008635&itmmeta=01JV59QT9Z3RWKNH0AARKHB9E7&hash=item3e3914d3d7%3Ag%3AfV8AAOSwtKxoCUc-&itmprp=enc%3AAQAKAAAA8FkggFvd1GGDu0w3yXCmi1dF%2BdyY3o9tuL2wwP4hbohDdbwbu0mL8sc4TFyPzif3jnOuzvOmOGgdfLI5cNtfa375IgTryF2HmMdyMzaMLKX2Smqbi%2FJUIPlPMb112F6h0ypPFMFXqaHlmoI61NxzE3CV0g8FK6vJIkNgxxrGMiqeN2RxehpGqiLqfCeKEaI7RqyO5b1cfpU0C%2BNXmM6AGaTSvc1tDIafHXTq78hqbJMMDkC7lYnBnCtyAE5k7w2V5wAsKZD0NMGCgMUlGBpTA0HEWYN9CVDaYOU0kqlBS8TNCx9VnI9aM9skiVY9EhsYUQ%3D%3D%7Ctkp%3ABFBMkqXfqdll&keyword=headphones+best+sony+Sony&sacat=0&relatedSearch=true&LH_BIN=1', 'image_url': '', 'is_sponsored': False, 'condition': 'Pre-Owned', 'listing_type': 'Buy It Now', 'seller_rating': 96.9, 'item_id': '267245638615', 'source': 'eBay', '_score': 20, 'effective_price': 320.0}, {'title': 'Sony WH-1000XM5 The Best Wireless Noise Canceling Headphones, Black', 'price': 319.44, 'currency': 'USD', 'url': 'https://www.walmart.com/ip/Sony-WH-1000XM5-The-Best-Wireless-Noise-Canceling-Headphones-Black/386006068?classType=VARIANT&adsRedirect=true', 'image_url': 'https://i5.walmartimages.com/seo/Sony-WH-1000XM5-The-Best-Wireless-Noise-Canceling-Headphones-Black_7384c879-1d54-47e8-9876-1d7adadcf0a5.542c245c25d295b30fa5820eacea4450.jpeg?odnHeight=580&odnWidth=580&odnBg=FFFFFF', 'rating': 0.0, 'reviews': 0, 'is_sponsored': False, 'is_pickup_today': False, 'product_id': '2P9FP9H47OOW', 'source': 'Walmart', '_score': 0.0, 'effective_price': 319.44}, {'title': 'Sony WH-1000XM5 The Best Wireless Noise Canceling Headphones, Black', 'price': 319.44, 'currency': 'USD', 'url': '/ip/Sony-WH-1000XM5-The-Best-Wireless-Noise-Canceling-Headphones-Black/386006068?classType=VARIANT&from=/search', 'image_url': 'https://i5.walmartimages.com/seo/Sony-WH-1000XM5-The-Best-Wireless-Noise-Canceling-Headphones-Black_7384c879-1d54-47e8-9876-1d7adadcf0a5.542c245c25d295b30fa5820eacea4450.jpeg?odnHeight=580&odnWidth=580&odnBg=FFFFFF', 'rating': 0.0, 'reviews': 0, 'is_sponsored': False, 'is_pickup_today': False, 'product_id': '7L1R4YYVLYOY', 'source': 'Walmart', '_score': 0.0, 'effective_price': 319.44}]}
2025-05-13 13:06:35,046 - DealFinderAI.Controller - INFO - Is follow-up? True
2025-05-13 13:06:35,046 - DealFinderAI.Controller - INFO - Referenced products: 1
2025-05-13 13:06:35,046 - DealFinderAI.Controller - INFO - Handling as follow-up question about 1 products
2025-05-13 13:06:35,046 - DealFinderAI.Controller - INFO - Handling follow-up question: tell me more about 5th product
2025-05-13 13:06:35,046 - DealFinderAI.Controller - INFO - Referenced products: 1
2025-05-13 13:06:35,046 - DealFinderAI.Controller - INFO - Follow-up for product: Sony WH-1000XM5 The Best Wireless Noise Canceling Headphones, Black
2025-05-13 13:06:35,046 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: 
            I'm a shopping assistant helping a customer with product information.
            
            The customer previously searched for products and is now asking a follow-up question: "tell me more about 5th product"
            
            They're referring to this product:
            {
  "title": "Sony WH-1000XM5 The Best Wireless Noise Canceling Headphones, Black",
  "price": 319.44,
  "currency": "USD",
  "url": "/ip/Sony-WH-1000XM5-The-Best-Wireless-Noise-Canceling-Headphones-Black/386006068?classType=VARIANT&from=/search",
  "image_url": "https://i5.walmartimages.com/seo/Sony-WH-1000XM5-The-Best-Wireless-Noise-Canceling-Headphones-Black_7384c879-1d54-47e8-9876-1d7adadcf0a5.542c245c25d295b30fa5820eacea4450.jpeg?odnHeight=580&odnWidth=580&odnBg=FFFFFF",
  "rating": 0.0,
  "reviews": 0,
  "is_sponsored": false,
  "is_pickup_today": false,
  "product_id": "7L1R4YYVLYOY",
  "source": "Walmart",
  "_score": 0.0,
  "effective_price": 319.44,
  "formatted_price": "$319.44"
}
            
            Please provide a helpful, conversational response addressing their question
            about this specific product. Include relevant details from the product information.
            
            Important guidelines:
            1. Always format prices as exact dollar amounts (e.g., "$319.44" not "$1")
            2. Format URLs as clickable HTML links <a href="url">url</a>
            3. If the product has a price field, be sure to mention the exact price as shown in the data
            4. Be accurate about the product details - don't make up information not in the data
            5. If the product is a "best deal", explain why it's a good value
            
            Your response should be conversational but accurate, highlighting the actual price 
            and key product features. Don't create fake discounts or savings.
            
2025-05-13 13:07:14,195 - DealFinderAI.Controller - INFO - Processing user query: what is wireless headphones?
2025-05-13 13:07:14,196 - DealFinderAI.ChatMemoryAgent - INFO - Analyzing query: 'what is wireless headphones?' for conversation session_20250513130502_31d40806
2025-05-13 13:07:14,196 - DealFinderAI.ChatMemoryAgent - INFO - Current product info: True
2025-05-13 13:07:14,196 - DealFinderAI.ChatMemoryAgent - INFO - Number of products in memory: 5
2025-05-13 13:07:14,196 - DealFinderAI.ChatMemoryAgent - INFO - Found 5 products in memory
2025-05-13 13:07:14,197 - DealFinderAI.ChatMemoryAgent - INFO - Using focused product: 0
2025-05-13 13:07:14,197 - DealFinderAI.ChatMemoryAgent - INFO - Follow-up analysis: True, Referenced products: 1
2025-05-13 13:07:14,198 - DealFinderAI.Controller - INFO - Analyze response: {'is_follow_up': True, 'focused_product': 0, 'referenced_products': [{'title': 'Sony WF-1000XM5 The Best Truly Wireless Bluetooth Earbuds Headphones - Black', 'price': 139.99, 'shipping': 0.0, 'total_price': 139.99, 'is_free_shipping': True, 'currency': 'USD', 'url': 'https://www.ebay.com/itm/256853907827?_skw=headphones+best+sony+Sony&itmmeta=01JV59QT9Z39Z96EHF34J5JNFD&hash=item3bcdaf9973%3Ag%3A41EAAOSwDFln0Txs&itmprp=enc%3AAQAKAAABAFkggFvd1GGDu0w3yXCmi1eDHCY2ER51Urg5UlV%2B56m4ZdNkT7hrfgw2ipF8%2Fa8uHK7uJuFeHnkvXCtGV1eBA%2BNiXtxsHBFeYAJ3Wby2iUvUi7awKrpRiQICJcmzJeuYQsPdGO9DjzO%2Br71hb%2B8HFA2Vmhq5i6YOfoi1WpjvZsp7CAlZ1ofHunOHs9QWyWmtFJdfH0rnByHB0XDvox%2FQfG5Xw5tt4OZWQpbslNtX16VmJYm4kj6zAMgNlo3NPyqB610yl1yybFcntoBBi2RqcpO4JNDjBF%2B%2FhHiOPe%2FzlUwWAP8R939TCH0r3h7tuu1%2FigHQl7u%2BFs4kc%2BkU35K8gi8%3D%7Ctkp%3ABFBMkqXfqdll&keyword=headphones+best+sony+Sony&sacat=0&relatedSearch=true&LH_BIN=1', 'image_url': '', 'is_sponsored': False, 'condition': 'Pre-Owned', 'listing_type': 'Buy It Now', 'seller_rating': 100.0, 'item_id': '256853907827', 'source': 'eBay', '_score': 36.001}], 'products': [{'title': 'Sony WF-1000XM5 The Best Truly Wireless Bluetooth Earbuds Headphones - Black', 'price': 139.99, 'shipping': 0.0, 'total_price': 139.99, 'is_free_shipping': True, 'currency': 'USD', 'url': 'https://www.ebay.com/itm/256853907827?_skw=headphones+best+sony+Sony&itmmeta=01JV59QT9Z39Z96EHF34J5JNFD&hash=item3bcdaf9973%3Ag%3A41EAAOSwDFln0Txs&itmprp=enc%3AAQAKAAABAFkggFvd1GGDu0w3yXCmi1eDHCY2ER51Urg5UlV%2B56m4ZdNkT7hrfgw2ipF8%2Fa8uHK7uJuFeHnkvXCtGV1eBA%2BNiXtxsHBFeYAJ3Wby2iUvUi7awKrpRiQICJcmzJeuYQsPdGO9DjzO%2Br71hb%2B8HFA2Vmhq5i6YOfoi1WpjvZsp7CAlZ1ofHunOHs9QWyWmtFJdfH0rnByHB0XDvox%2FQfG5Xw5tt4OZWQpbslNtX16VmJYm4kj6zAMgNlo3NPyqB610yl1yybFcntoBBi2RqcpO4JNDjBF%2B%2FhHiOPe%2FzlUwWAP8R939TCH0r3h7tuu1%2FigHQl7u%2BFs4kc%2BkU35K8gi8%3D%7Ctkp%3ABFBMkqXfqdll&keyword=headphones+best+sony+Sony&sacat=0&relatedSearch=true&LH_BIN=1', 'image_url': '', 'is_sponsored': False, 'condition': 'Pre-Owned', 'listing_type': 'Buy It Now', 'seller_rating': 100.0, 'item_id': '256853907827', 'source': 'eBay', '_score': 36.001}, {'title': 'Sony WH-1000XM5 The Best Wireless Auto Noise Canceling Headphones Optimizer', 'price': 299.95, 'shipping': 0.0, 'total_price': 299.95, 'is_free_shipping': True, 'currency': 'USD', 'url': 'https://www.ebay.com/itm/235720395134?_skw=headphones+best+sony+Sony&itmmeta=01JV59QT9ZDYGP8MANYHWH7MP1&hash=item36e207c97e%3Ag%3A5GQAAOSw6jJm0SLC&itmprp=enc%3AAQAKAAAA8FkggFvd1GGDu0w3yXCmi1fc6LwlPEiKNSm4y6vXwq%2FNwkOTh%2FRWfeRaSmfW9s0HMFDtEk3sRqvxj3qJ6gF8Y82eIZO%2Bjq5Vh0SFLm44F5yjNqCMgihAI6JnCd%2FKgYLeqvmulp3EV1jJhEGGX6Mj4IaVhCIOICEfBzIe1%2BsPgd6dkY7%2B6iJHIkiyKA6TUoQTMyymdu7b7qFr3wkkywrN%2BocReM7X82%2FwyqSztlswN8WHiy5E8AFo57JSZiMrhE6F8U0W0t089O%2FGmRn9cpi04N%2Bxuys2%2BTUTXlqgSAEaJu2CZokk9Ebt8PMXo9ZQYPGtAg%3D%3D%7Ctkp%3ABFBMkqXfqdll&keyword=headphones+best+sony+Sony&sacat=0&relatedSearch=true&LH_BIN=1', 'image_url': '', 'is_sponsored': False, 'condition': 'Brand New', 'listing_type': 'Buy It Now', 'seller_rating': 98.2, 'item_id': '235720395134', 'source': 'eBay', '_score': 30.005000000000003, 'effective_price': 299.95}, {'title': 'Sony WH-1000XM5 The Best Wireless Noise Canceling Headphones,-Midnight Blue', 'price': 320.0, 'shipping': 0.0, 'total_price': 320.0, 'is_free_shipping': True, 'currency': 'USD', 'url': 'https://www.ebay.com/itm/267245638615?_skw=headphones+best+sony+Sony&epid=10061008635&itmmeta=01JV59QT9Z3RWKNH0AARKHB9E7&hash=item3e3914d3d7%3Ag%3AfV8AAOSwtKxoCUc-&itmprp=enc%3AAQAKAAAA8FkggFvd1GGDu0w3yXCmi1dF%2BdyY3o9tuL2wwP4hbohDdbwbu0mL8sc4TFyPzif3jnOuzvOmOGgdfLI5cNtfa375IgTryF2HmMdyMzaMLKX2Smqbi%2FJUIPlPMb112F6h0ypPFMFXqaHlmoI61NxzE3CV0g8FK6vJIkNgxxrGMiqeN2RxehpGqiLqfCeKEaI7RqyO5b1cfpU0C%2BNXmM6AGaTSvc1tDIafHXTq78hqbJMMDkC7lYnBnCtyAE5k7w2V5wAsKZD0NMGCgMUlGBpTA0HEWYN9CVDaYOU0kqlBS8TNCx9VnI9aM9skiVY9EhsYUQ%3D%3D%7Ctkp%3ABFBMkqXfqdll&keyword=headphones+best+sony+Sony&sacat=0&relatedSearch=true&LH_BIN=1', 'image_url': '', 'is_sponsored': False, 'condition': 'Pre-Owned', 'listing_type': 'Buy It Now', 'seller_rating': 96.9, 'item_id': '267245638615', 'source': 'eBay', '_score': 20, 'effective_price': 320.0}, {'title': 'Sony WH-1000XM5 The Best Wireless Noise Canceling Headphones, Black', 'price': 319.44, 'currency': 'USD', 'url': 'https://www.walmart.com/ip/Sony-WH-1000XM5-The-Best-Wireless-Noise-Canceling-Headphones-Black/386006068?classType=VARIANT&adsRedirect=true', 'image_url': 'https://i5.walmartimages.com/seo/Sony-WH-1000XM5-The-Best-Wireless-Noise-Canceling-Headphones-Black_7384c879-1d54-47e8-9876-1d7adadcf0a5.542c245c25d295b30fa5820eacea4450.jpeg?odnHeight=580&odnWidth=580&odnBg=FFFFFF', 'rating': 0.0, 'reviews': 0, 'is_sponsored': False, 'is_pickup_today': False, 'product_id': '2P9FP9H47OOW', 'source': 'Walmart', '_score': 0.0, 'effective_price': 319.44}, {'title': 'Sony WH-1000XM5 The Best Wireless Noise Canceling Headphones, Black', 'price': 319.44, 'currency': 'USD', 'url': '/ip/Sony-WH-1000XM5-The-Best-Wireless-Noise-Canceling-Headphones-Black/386006068?classType=VARIANT&from=/search', 'image_url': 'https://i5.walmartimages.com/seo/Sony-WH-1000XM5-The-Best-Wireless-Noise-Canceling-Headphones-Black_7384c879-1d54-47e8-9876-1d7adadcf0a5.542c245c25d295b30fa5820eacea4450.jpeg?odnHeight=580&odnWidth=580&odnBg=FFFFFF', 'rating': 0.0, 'reviews': 0, 'is_sponsored': False, 'is_pickup_today': False, 'product_id': '7L1R4YYVLYOY', 'source': 'Walmart', '_score': 0.0, 'effective_price': 319.44}]}
2025-05-13 13:07:14,198 - DealFinderAI.Controller - INFO - Is follow-up? True
2025-05-13 13:07:14,199 - DealFinderAI.Controller - INFO - Referenced products: 1
2025-05-13 13:07:14,199 - DealFinderAI.Controller - INFO - Handling as follow-up question about 1 products
2025-05-13 13:07:14,199 - DealFinderAI.Controller - INFO - Handling follow-up question: what is wireless headphones?
2025-05-13 13:07:14,199 - DealFinderAI.Controller - INFO - Referenced products: 1
2025-05-13 13:07:14,199 - DealFinderAI.Controller - INFO - Follow-up for product: Sony WF-1000XM5 The Best Truly Wireless Bluetooth Earbuds Headphones - Black
2025-05-13 13:07:14,200 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: 
            I'm a shopping assistant helping a customer with product information.
            
            The customer previously searched for products and is now asking a follow-up question: "what is wireless headphones?"
            
            They're referring to this product:
            {
  "title": "Sony WF-1000XM5 The Best Truly Wireless Bluetooth Earbuds Headphones - Black",
  "price": 139.99,
  "shipping": 0.0,
  "total_price": 139.99,
  "is_free_shipping": true,
  "currency": "USD",
  "url": "https://www.ebay.com/itm/256853907827?_skw=headphones+best+sony+Sony&itmmeta=01JV59QT9Z39Z96EHF34J5JNFD&hash=item3bcdaf9973%3Ag%3A41EAAOSwDFln0Txs&itmprp=enc%3AAQAKAAABAFkggFvd1GGDu0w3yXCmi1eDHCY2ER51Urg5UlV%2B56m4ZdNkT7hrfgw2ipF8%2Fa8uHK7uJuFeHnkvXCtGV1eBA%2BNiXtxsHBFeYAJ3Wby2iUvUi7awKrpRiQICJcmzJeuYQsPdGO9DjzO%2Br71hb%2B8HFA2Vmhq5i6YOfoi1WpjvZsp7CAlZ1ofHunOHs9QWyWmtFJdfH0rnByHB0XDvox%2FQfG5Xw5tt4OZWQpbslNtX16VmJYm4kj6zAMgNlo3NPyqB610yl1yybFcntoBBi2RqcpO4JNDjBF%2B%2FhHiOPe%2FzlUwWAP8R939TCH0r3h7tuu1%2FigHQl7u%2BFs4kc%2BkU35K8gi8%3D%7Ctkp%3ABFBMkqXfqdll&keyword=headphones+best+sony+Sony&sacat=0&relatedSearch=true&LH_BIN=1",
  "image_url": "",
  "is_sponsored": false,
  "condition": "Pre-Owned",
  "listing_type": "Buy It Now",
  "seller_rating": 100.0,
  "item_id": "256853907827",
  "source": "eBay",
  "_score": 36.001,
  "formatted_price": "$139.99"
}
            
            Please provide a helpful, conversational response addressing their question
            about this specific product. Include relevant details from the product information.
            
            Important guidelines:
            1. Always format prices as exact dollar amounts (e.g., "$139.99" not "$1")
            2. Format URLs as clickable HTML links <a href="url">url</a>
            3. If the product has a price field, be sure to mention the exact price as shown in the data
            4. Be accurate about the product details - don't make up information not in the data
            5. If the product is a "best deal", explain why it's a good value
            
            Your response should be conversational but accurate, highlighting the actual price 
            and key product features. Don't create fake discounts or savings.
            
2025-05-13 13:10:21,343 - DealFinderAI.Controller - INFO - Processing user query: find me best deal on iphone 16
2025-05-13 13:10:21,345 - DealFinderAI.ChatMemoryAgent - INFO - Analyzing query: 'find me best deal on iphone 16' for conversation session_20250513130502_31d40806
2025-05-13 13:10:21,346 - DealFinderAI.ChatMemoryAgent - INFO - Current product info: True
2025-05-13 13:10:21,346 - DealFinderAI.ChatMemoryAgent - INFO - Number of products in memory: 5
2025-05-13 13:10:21,346 - DealFinderAI.ChatMemoryAgent - INFO - Found 5 products in memory
2025-05-13 13:10:21,347 - DealFinderAI.ChatMemoryAgent - INFO - Follow-up analysis: True, Referenced products: 1
2025-05-13 13:10:21,347 - DealFinderAI.Controller - INFO - Analyze response: {'is_follow_up': True, 'focused_product': 0, 'referenced_products': [{'title': 'Sony WF-1000XM5 The Best Truly Wireless Bluetooth Earbuds Headphones - Black', 'price': 139.99, 'shipping': 0.0, 'total_price': 139.99, 'is_free_shipping': True, 'currency': 'USD', 'url': 'https://www.ebay.com/itm/256853907827?_skw=headphones+best+sony+Sony&itmmeta=01JV59QT9Z39Z96EHF34J5JNFD&hash=item3bcdaf9973%3Ag%3A41EAAOSwDFln0Txs&itmprp=enc%3AAQAKAAABAFkggFvd1GGDu0w3yXCmi1eDHCY2ER51Urg5UlV%2B56m4ZdNkT7hrfgw2ipF8%2Fa8uHK7uJuFeHnkvXCtGV1eBA%2BNiXtxsHBFeYAJ3Wby2iUvUi7awKrpRiQICJcmzJeuYQsPdGO9DjzO%2Br71hb%2B8HFA2Vmhq5i6YOfoi1WpjvZsp7CAlZ1ofHunOHs9QWyWmtFJdfH0rnByHB0XDvox%2FQfG5Xw5tt4OZWQpbslNtX16VmJYm4kj6zAMgNlo3NPyqB610yl1yybFcntoBBi2RqcpO4JNDjBF%2B%2FhHiOPe%2FzlUwWAP8R939TCH0r3h7tuu1%2FigHQl7u%2BFs4kc%2BkU35K8gi8%3D%7Ctkp%3ABFBMkqXfqdll&keyword=headphones+best+sony+Sony&sacat=0&relatedSearch=true&LH_BIN=1', 'image_url': '', 'is_sponsored': False, 'condition': 'Pre-Owned', 'listing_type': 'Buy It Now', 'seller_rating': 100.0, 'item_id': '256853907827', 'source': 'eBay', '_score': 36.001}], 'products': [{'title': 'Sony WF-1000XM5 The Best Truly Wireless Bluetooth Earbuds Headphones - Black', 'price': 139.99, 'shipping': 0.0, 'total_price': 139.99, 'is_free_shipping': True, 'currency': 'USD', 'url': 'https://www.ebay.com/itm/256853907827?_skw=headphones+best+sony+Sony&itmmeta=01JV59QT9Z39Z96EHF34J5JNFD&hash=item3bcdaf9973%3Ag%3A41EAAOSwDFln0Txs&itmprp=enc%3AAQAKAAABAFkggFvd1GGDu0w3yXCmi1eDHCY2ER51Urg5UlV%2B56m4ZdNkT7hrfgw2ipF8%2Fa8uHK7uJuFeHnkvXCtGV1eBA%2BNiXtxsHBFeYAJ3Wby2iUvUi7awKrpRiQICJcmzJeuYQsPdGO9DjzO%2Br71hb%2B8HFA2Vmhq5i6YOfoi1WpjvZsp7CAlZ1ofHunOHs9QWyWmtFJdfH0rnByHB0XDvox%2FQfG5Xw5tt4OZWQpbslNtX16VmJYm4kj6zAMgNlo3NPyqB610yl1yybFcntoBBi2RqcpO4JNDjBF%2B%2FhHiOPe%2FzlUwWAP8R939TCH0r3h7tuu1%2FigHQl7u%2BFs4kc%2BkU35K8gi8%3D%7Ctkp%3ABFBMkqXfqdll&keyword=headphones+best+sony+Sony&sacat=0&relatedSearch=true&LH_BIN=1', 'image_url': '', 'is_sponsored': False, 'condition': 'Pre-Owned', 'listing_type': 'Buy It Now', 'seller_rating': 100.0, 'item_id': '256853907827', 'source': 'eBay', '_score': 36.001}, {'title': 'Sony WH-1000XM5 The Best Wireless Auto Noise Canceling Headphones Optimizer', 'price': 299.95, 'shipping': 0.0, 'total_price': 299.95, 'is_free_shipping': True, 'currency': 'USD', 'url': 'https://www.ebay.com/itm/235720395134?_skw=headphones+best+sony+Sony&itmmeta=01JV59QT9ZDYGP8MANYHWH7MP1&hash=item36e207c97e%3Ag%3A5GQAAOSw6jJm0SLC&itmprp=enc%3AAQAKAAAA8FkggFvd1GGDu0w3yXCmi1fc6LwlPEiKNSm4y6vXwq%2FNwkOTh%2FRWfeRaSmfW9s0HMFDtEk3sRqvxj3qJ6gF8Y82eIZO%2Bjq5Vh0SFLm44F5yjNqCMgihAI6JnCd%2FKgYLeqvmulp3EV1jJhEGGX6Mj4IaVhCIOICEfBzIe1%2BsPgd6dkY7%2B6iJHIkiyKA6TUoQTMyymdu7b7qFr3wkkywrN%2BocReM7X82%2FwyqSztlswN8WHiy5E8AFo57JSZiMrhE6F8U0W0t089O%2FGmRn9cpi04N%2Bxuys2%2BTUTXlqgSAEaJu2CZokk9Ebt8PMXo9ZQYPGtAg%3D%3D%7Ctkp%3ABFBMkqXfqdll&keyword=headphones+best+sony+Sony&sacat=0&relatedSearch=true&LH_BIN=1', 'image_url': '', 'is_sponsored': False, 'condition': 'Brand New', 'listing_type': 'Buy It Now', 'seller_rating': 98.2, 'item_id': '235720395134', 'source': 'eBay', '_score': 30.005000000000003, 'effective_price': 299.95}, {'title': 'Sony WH-1000XM5 The Best Wireless Noise Canceling Headphones,-Midnight Blue', 'price': 320.0, 'shipping': 0.0, 'total_price': 320.0, 'is_free_shipping': True, 'currency': 'USD', 'url': 'https://www.ebay.com/itm/267245638615?_skw=headphones+best+sony+Sony&epid=10061008635&itmmeta=01JV59QT9Z3RWKNH0AARKHB9E7&hash=item3e3914d3d7%3Ag%3AfV8AAOSwtKxoCUc-&itmprp=enc%3AAQAKAAAA8FkggFvd1GGDu0w3yXCmi1dF%2BdyY3o9tuL2wwP4hbohDdbwbu0mL8sc4TFyPzif3jnOuzvOmOGgdfLI5cNtfa375IgTryF2HmMdyMzaMLKX2Smqbi%2FJUIPlPMb112F6h0ypPFMFXqaHlmoI61NxzE3CV0g8FK6vJIkNgxxrGMiqeN2RxehpGqiLqfCeKEaI7RqyO5b1cfpU0C%2BNXmM6AGaTSvc1tDIafHXTq78hqbJMMDkC7lYnBnCtyAE5k7w2V5wAsKZD0NMGCgMUlGBpTA0HEWYN9CVDaYOU0kqlBS8TNCx9VnI9aM9skiVY9EhsYUQ%3D%3D%7Ctkp%3ABFBMkqXfqdll&keyword=headphones+best+sony+Sony&sacat=0&relatedSearch=true&LH_BIN=1', 'image_url': '', 'is_sponsored': False, 'condition': 'Pre-Owned', 'listing_type': 'Buy It Now', 'seller_rating': 96.9, 'item_id': '267245638615', 'source': 'eBay', '_score': 20, 'effective_price': 320.0}, {'title': 'Sony WH-1000XM5 The Best Wireless Noise Canceling Headphones, Black', 'price': 319.44, 'currency': 'USD', 'url': 'https://www.walmart.com/ip/Sony-WH-1000XM5-The-Best-Wireless-Noise-Canceling-Headphones-Black/386006068?classType=VARIANT&adsRedirect=true', 'image_url': 'https://i5.walmartimages.com/seo/Sony-WH-1000XM5-The-Best-Wireless-Noise-Canceling-Headphones-Black_7384c879-1d54-47e8-9876-1d7adadcf0a5.542c245c25d295b30fa5820eacea4450.jpeg?odnHeight=580&odnWidth=580&odnBg=FFFFFF', 'rating': 0.0, 'reviews': 0, 'is_sponsored': False, 'is_pickup_today': False, 'product_id': '2P9FP9H47OOW', 'source': 'Walmart', '_score': 0.0, 'effective_price': 319.44}, {'title': 'Sony WH-1000XM5 The Best Wireless Noise Canceling Headphones, Black', 'price': 319.44, 'currency': 'USD', 'url': '/ip/Sony-WH-1000XM5-The-Best-Wireless-Noise-Canceling-Headphones-Black/386006068?classType=VARIANT&from=/search', 'image_url': 'https://i5.walmartimages.com/seo/Sony-WH-1000XM5-The-Best-Wireless-Noise-Canceling-Headphones-Black_7384c879-1d54-47e8-9876-1d7adadcf0a5.542c245c25d295b30fa5820eacea4450.jpeg?odnHeight=580&odnWidth=580&odnBg=FFFFFF', 'rating': 0.0, 'reviews': 0, 'is_sponsored': False, 'is_pickup_today': False, 'product_id': '7L1R4YYVLYOY', 'source': 'Walmart', '_score': 0.0, 'effective_price': 319.44}]}
2025-05-13 13:10:21,348 - DealFinderAI.Controller - INFO - Is follow-up? True
2025-05-13 13:10:21,348 - DealFinderAI.Controller - INFO - Referenced products: 1
2025-05-13 13:10:21,348 - DealFinderAI.Controller - INFO - Handling as follow-up question about 1 products
2025-05-13 13:10:21,348 - DealFinderAI.Controller - INFO - Handling follow-up question: find me best deal on iphone 16
2025-05-13 13:10:21,348 - DealFinderAI.Controller - INFO - Referenced products: 1
2025-05-13 13:10:21,348 - DealFinderAI.Controller - INFO - Follow-up for product: Sony WF-1000XM5 The Best Truly Wireless Bluetooth Earbuds Headphones - Black
2025-05-13 13:10:21,349 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: 
            I'm a shopping assistant helping a customer with product information.
            
            The customer previously searched for products and is now asking a follow-up question: "find me best deal on iphone 16"
            
            They're referring to this product:
            {
  "title": "Sony WF-1000XM5 The Best Truly Wireless Bluetooth Earbuds Headphones - Black",
  "price": 139.99,
  "shipping": 0.0,
  "total_price": 139.99,
  "is_free_shipping": true,
  "currency": "USD",
  "url": "https://www.ebay.com/itm/256853907827?_skw=headphones+best+sony+Sony&itmmeta=01JV59QT9Z39Z96EHF34J5JNFD&hash=item3bcdaf9973%3Ag%3A41EAAOSwDFln0Txs&itmprp=enc%3AAQAKAAABAFkggFvd1GGDu0w3yXCmi1eDHCY2ER51Urg5UlV%2B56m4ZdNkT7hrfgw2ipF8%2Fa8uHK7uJuFeHnkvXCtGV1eBA%2BNiXtxsHBFeYAJ3Wby2iUvUi7awKrpRiQICJcmzJeuYQsPdGO9DjzO%2Br71hb%2B8HFA2Vmhq5i6YOfoi1WpjvZsp7CAlZ1ofHunOHs9QWyWmtFJdfH0rnByHB0XDvox%2FQfG5Xw5tt4OZWQpbslNtX16VmJYm4kj6zAMgNlo3NPyqB610yl1yybFcntoBBi2RqcpO4JNDjBF%2B%2FhHiOPe%2FzlUwWAP8R939TCH0r3h7tuu1%2FigHQl7u%2BFs4kc%2BkU35K8gi8%3D%7Ctkp%3ABFBMkqXfqdll&keyword=headphones+best+sony+Sony&sacat=0&relatedSearch=true&LH_BIN=1",
  "image_url": "",
  "is_sponsored": false,
  "condition": "Pre-Owned",
  "listing_type": "Buy It Now",
  "seller_rating": 100.0,
  "item_id": "256853907827",
  "source": "eBay",
  "_score": 36.001,
  "formatted_price": "$139.99"
}
            
            Please provide a helpful, conversational response addressing their question
            about this specific product. Include relevant details from the product information.
            
            Important guidelines:
            1. Always format prices as exact dollar amounts (e.g., "$139.99" not "$1")
            2. Format URLs as clickable HTML links <a href="url">url</a>
            3. If the product has a price field, be sure to mention the exact price as shown in the data
            4. Be accurate about the product details - don't make up information not in the data
            5. If the product is a "best deal", explain why it's a good value
            
            Your response should be conversational but accurate, highlighting the actual price 
            and key product features. Don't create fake discounts or savings.
            
2025-05-13 13:11:21,458 - DealFinderAI.Controller - INFO - Processing user query: iphone 16
2025-05-13 13:11:21,459 - DealFinderAI.ChatMemoryAgent - INFO - Analyzing query: 'iphone 16' for conversation session_20250513130502_31d40806
2025-05-13 13:11:21,460 - DealFinderAI.ChatMemoryAgent - INFO - Current product info: True
2025-05-13 13:11:21,460 - DealFinderAI.ChatMemoryAgent - INFO - Number of products in memory: 5
2025-05-13 13:11:21,460 - DealFinderAI.ChatMemoryAgent - INFO - Found 5 products in memory
2025-05-13 13:11:21,460 - DealFinderAI.ChatMemoryAgent - INFO - Using focused product: 0
2025-05-13 13:11:21,460 - DealFinderAI.ChatMemoryAgent - INFO - Follow-up analysis: True, Referenced products: 1
2025-05-13 13:11:21,461 - DealFinderAI.Controller - INFO - Analyze response: {'is_follow_up': True, 'focused_product': 0, 'referenced_products': [{'title': 'Sony WF-1000XM5 The Best Truly Wireless Bluetooth Earbuds Headphones - Black', 'price': 139.99, 'shipping': 0.0, 'total_price': 139.99, 'is_free_shipping': True, 'currency': 'USD', 'url': 'https://www.ebay.com/itm/256853907827?_skw=headphones+best+sony+Sony&itmmeta=01JV59QT9Z39Z96EHF34J5JNFD&hash=item3bcdaf9973%3Ag%3A41EAAOSwDFln0Txs&itmprp=enc%3AAQAKAAABAFkggFvd1GGDu0w3yXCmi1eDHCY2ER51Urg5UlV%2B56m4ZdNkT7hrfgw2ipF8%2Fa8uHK7uJuFeHnkvXCtGV1eBA%2BNiXtxsHBFeYAJ3Wby2iUvUi7awKrpRiQICJcmzJeuYQsPdGO9DjzO%2Br71hb%2B8HFA2Vmhq5i6YOfoi1WpjvZsp7CAlZ1ofHunOHs9QWyWmtFJdfH0rnByHB0XDvox%2FQfG5Xw5tt4OZWQpbslNtX16VmJYm4kj6zAMgNlo3NPyqB610yl1yybFcntoBBi2RqcpO4JNDjBF%2B%2FhHiOPe%2FzlUwWAP8R939TCH0r3h7tuu1%2FigHQl7u%2BFs4kc%2BkU35K8gi8%3D%7Ctkp%3ABFBMkqXfqdll&keyword=headphones+best+sony+Sony&sacat=0&relatedSearch=true&LH_BIN=1', 'image_url': '', 'is_sponsored': False, 'condition': 'Pre-Owned', 'listing_type': 'Buy It Now', 'seller_rating': 100.0, 'item_id': '256853907827', 'source': 'eBay', '_score': 36.001}], 'products': [{'title': 'Sony WF-1000XM5 The Best Truly Wireless Bluetooth Earbuds Headphones - Black', 'price': 139.99, 'shipping': 0.0, 'total_price': 139.99, 'is_free_shipping': True, 'currency': 'USD', 'url': 'https://www.ebay.com/itm/256853907827?_skw=headphones+best+sony+Sony&itmmeta=01JV59QT9Z39Z96EHF34J5JNFD&hash=item3bcdaf9973%3Ag%3A41EAAOSwDFln0Txs&itmprp=enc%3AAQAKAAABAFkggFvd1GGDu0w3yXCmi1eDHCY2ER51Urg5UlV%2B56m4ZdNkT7hrfgw2ipF8%2Fa8uHK7uJuFeHnkvXCtGV1eBA%2BNiXtxsHBFeYAJ3Wby2iUvUi7awKrpRiQICJcmzJeuYQsPdGO9DjzO%2Br71hb%2B8HFA2Vmhq5i6YOfoi1WpjvZsp7CAlZ1ofHunOHs9QWyWmtFJdfH0rnByHB0XDvox%2FQfG5Xw5tt4OZWQpbslNtX16VmJYm4kj6zAMgNlo3NPyqB610yl1yybFcntoBBi2RqcpO4JNDjBF%2B%2FhHiOPe%2FzlUwWAP8R939TCH0r3h7tuu1%2FigHQl7u%2BFs4kc%2BkU35K8gi8%3D%7Ctkp%3ABFBMkqXfqdll&keyword=headphones+best+sony+Sony&sacat=0&relatedSearch=true&LH_BIN=1', 'image_url': '', 'is_sponsored': False, 'condition': 'Pre-Owned', 'listing_type': 'Buy It Now', 'seller_rating': 100.0, 'item_id': '256853907827', 'source': 'eBay', '_score': 36.001}, {'title': 'Sony WH-1000XM5 The Best Wireless Auto Noise Canceling Headphones Optimizer', 'price': 299.95, 'shipping': 0.0, 'total_price': 299.95, 'is_free_shipping': True, 'currency': 'USD', 'url': 'https://www.ebay.com/itm/235720395134?_skw=headphones+best+sony+Sony&itmmeta=01JV59QT9ZDYGP8MANYHWH7MP1&hash=item36e207c97e%3Ag%3A5GQAAOSw6jJm0SLC&itmprp=enc%3AAQAKAAAA8FkggFvd1GGDu0w3yXCmi1fc6LwlPEiKNSm4y6vXwq%2FNwkOTh%2FRWfeRaSmfW9s0HMFDtEk3sRqvxj3qJ6gF8Y82eIZO%2Bjq5Vh0SFLm44F5yjNqCMgihAI6JnCd%2FKgYLeqvmulp3EV1jJhEGGX6Mj4IaVhCIOICEfBzIe1%2BsPgd6dkY7%2B6iJHIkiyKA6TUoQTMyymdu7b7qFr3wkkywrN%2BocReM7X82%2FwyqSztlswN8WHiy5E8AFo57JSZiMrhE6F8U0W0t089O%2FGmRn9cpi04N%2Bxuys2%2BTUTXlqgSAEaJu2CZokk9Ebt8PMXo9ZQYPGtAg%3D%3D%7Ctkp%3ABFBMkqXfqdll&keyword=headphones+best+sony+Sony&sacat=0&relatedSearch=true&LH_BIN=1', 'image_url': '', 'is_sponsored': False, 'condition': 'Brand New', 'listing_type': 'Buy It Now', 'seller_rating': 98.2, 'item_id': '235720395134', 'source': 'eBay', '_score': 30.005000000000003, 'effective_price': 299.95}, {'title': 'Sony WH-1000XM5 The Best Wireless Noise Canceling Headphones,-Midnight Blue', 'price': 320.0, 'shipping': 0.0, 'total_price': 320.0, 'is_free_shipping': True, 'currency': 'USD', 'url': 'https://www.ebay.com/itm/267245638615?_skw=headphones+best+sony+Sony&epid=10061008635&itmmeta=01JV59QT9Z3RWKNH0AARKHB9E7&hash=item3e3914d3d7%3Ag%3AfV8AAOSwtKxoCUc-&itmprp=enc%3AAQAKAAAA8FkggFvd1GGDu0w3yXCmi1dF%2BdyY3o9tuL2wwP4hbohDdbwbu0mL8sc4TFyPzif3jnOuzvOmOGgdfLI5cNtfa375IgTryF2HmMdyMzaMLKX2Smqbi%2FJUIPlPMb112F6h0ypPFMFXqaHlmoI61NxzE3CV0g8FK6vJIkNgxxrGMiqeN2RxehpGqiLqfCeKEaI7RqyO5b1cfpU0C%2BNXmM6AGaTSvc1tDIafHXTq78hqbJMMDkC7lYnBnCtyAE5k7w2V5wAsKZD0NMGCgMUlGBpTA0HEWYN9CVDaYOU0kqlBS8TNCx9VnI9aM9skiVY9EhsYUQ%3D%3D%7Ctkp%3ABFBMkqXfqdll&keyword=headphones+best+sony+Sony&sacat=0&relatedSearch=true&LH_BIN=1', 'image_url': '', 'is_sponsored': False, 'condition': 'Pre-Owned', 'listing_type': 'Buy It Now', 'seller_rating': 96.9, 'item_id': '267245638615', 'source': 'eBay', '_score': 20, 'effective_price': 320.0}, {'title': 'Sony WH-1000XM5 The Best Wireless Noise Canceling Headphones, Black', 'price': 319.44, 'currency': 'USD', 'url': 'https://www.walmart.com/ip/Sony-WH-1000XM5-The-Best-Wireless-Noise-Canceling-Headphones-Black/386006068?classType=VARIANT&adsRedirect=true', 'image_url': 'https://i5.walmartimages.com/seo/Sony-WH-1000XM5-The-Best-Wireless-Noise-Canceling-Headphones-Black_7384c879-1d54-47e8-9876-1d7adadcf0a5.542c245c25d295b30fa5820eacea4450.jpeg?odnHeight=580&odnWidth=580&odnBg=FFFFFF', 'rating': 0.0, 'reviews': 0, 'is_sponsored': False, 'is_pickup_today': False, 'product_id': '2P9FP9H47OOW', 'source': 'Walmart', '_score': 0.0, 'effective_price': 319.44}, {'title': 'Sony WH-1000XM5 The Best Wireless Noise Canceling Headphones, Black', 'price': 319.44, 'currency': 'USD', 'url': '/ip/Sony-WH-1000XM5-The-Best-Wireless-Noise-Canceling-Headphones-Black/386006068?classType=VARIANT&from=/search', 'image_url': 'https://i5.walmartimages.com/seo/Sony-WH-1000XM5-The-Best-Wireless-Noise-Canceling-Headphones-Black_7384c879-1d54-47e8-9876-1d7adadcf0a5.542c245c25d295b30fa5820eacea4450.jpeg?odnHeight=580&odnWidth=580&odnBg=FFFFFF', 'rating': 0.0, 'reviews': 0, 'is_sponsored': False, 'is_pickup_today': False, 'product_id': '7L1R4YYVLYOY', 'source': 'Walmart', '_score': 0.0, 'effective_price': 319.44}]}
2025-05-13 13:11:21,461 - DealFinderAI.Controller - INFO - Is follow-up? True
2025-05-13 13:11:21,461 - DealFinderAI.Controller - INFO - Referenced products: 1
2025-05-13 13:11:21,461 - DealFinderAI.Controller - INFO - Handling as follow-up question about 1 products
2025-05-13 13:11:21,461 - DealFinderAI.Controller - INFO - Handling follow-up question: iphone 16
2025-05-13 13:11:21,461 - DealFinderAI.Controller - INFO - Referenced products: 1
2025-05-13 13:11:21,462 - DealFinderAI.Controller - INFO - Follow-up for product: Sony WF-1000XM5 The Best Truly Wireless Bluetooth Earbuds Headphones - Black
2025-05-13 13:11:21,462 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: 
            I'm a shopping assistant helping a customer with product information.
            
            The customer previously searched for products and is now asking a follow-up question: "iphone 16"
            
            They're referring to this product:
            {
  "title": "Sony WF-1000XM5 The Best Truly Wireless Bluetooth Earbuds Headphones - Black",
  "price": 139.99,
  "shipping": 0.0,
  "total_price": 139.99,
  "is_free_shipping": true,
  "currency": "USD",
  "url": "https://www.ebay.com/itm/256853907827?_skw=headphones+best+sony+Sony&itmmeta=01JV59QT9Z39Z96EHF34J5JNFD&hash=item3bcdaf9973%3Ag%3A41EAAOSwDFln0Txs&itmprp=enc%3AAQAKAAABAFkggFvd1GGDu0w3yXCmi1eDHCY2ER51Urg5UlV%2B56m4ZdNkT7hrfgw2ipF8%2Fa8uHK7uJuFeHnkvXCtGV1eBA%2BNiXtxsHBFeYAJ3Wby2iUvUi7awKrpRiQICJcmzJeuYQsPdGO9DjzO%2Br71hb%2B8HFA2Vmhq5i6YOfoi1WpjvZsp7CAlZ1ofHunOHs9QWyWmtFJdfH0rnByHB0XDvox%2FQfG5Xw5tt4OZWQpbslNtX16VmJYm4kj6zAMgNlo3NPyqB610yl1yybFcntoBBi2RqcpO4JNDjBF%2B%2FhHiOPe%2FzlUwWAP8R939TCH0r3h7tuu1%2FigHQl7u%2BFs4kc%2BkU35K8gi8%3D%7Ctkp%3ABFBMkqXfqdll&keyword=headphones+best+sony+Sony&sacat=0&relatedSearch=true&LH_BIN=1",
  "image_url": "",
  "is_sponsored": false,
  "condition": "Pre-Owned",
  "listing_type": "Buy It Now",
  "seller_rating": 100.0,
  "item_id": "256853907827",
  "source": "eBay",
  "_score": 36.001,
  "formatted_price": "$139.99"
}
            
            Please provide a helpful, conversational response addressing their question
            about this specific product. Include relevant details from the product information.
            
            Important guidelines:
            1. Always format prices as exact dollar amounts (e.g., "$139.99" not "$1")
            2. Format URLs as clickable HTML links <a href="url">url</a>
            3. If the product has a price field, be sure to mention the exact price as shown in the data
            4. Be accurate about the product details - don't make up information not in the data
            5. If the product is a "best deal", explain why it's a good value
            
            Your response should be conversational but accurate, highlighting the actual price 
            and key product features. Don't create fake discounts or savings.
            
2025-05-13 13:35:33,938 - DealFinderAI - INFO - Logging initialized
2025-05-13 13:35:33,938 - DealFinderAI.Main - INFO - Starting DealFinder AI
2025-05-13 13:35:33,938 - DealFinderAI.Main - INFO - Using LangChain implementation
2025-05-13 13:35:33,981 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-13 13:35:33,981 - DealFinderAI.Controller - INFO - Initialized scraper agents: ['amazon', 'walmart', 'ebay']
2025-05-13 13:35:33,981 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-13 13:35:33,981 - DealFinderAI.Controller - INFO - Initialized scraper agents: ['amazon', 'walmart', 'ebay']
2025-05-13 13:35:33,981 - DealFinderAI.Main - INFO - Web app using LangChain implementation with Gemini model
2025-05-13 13:35:56,352 - DealFinderAI.Controller - INFO - Processing user query: find me best deal on iphone 16 under 1000 dollar
2025-05-13 13:35:56,353 - DealFinderAI.ChatMemoryAgent - INFO - Analyzing query: 'find me best deal on iphone 16 under 1000 dollar' for conversation session_20250513133541_ce703fae
2025-05-13 13:35:56,353 - DealFinderAI.ChatMemoryAgent - INFO - No product context available for this conversation
2025-05-13 13:35:56,353 - DealFinderAI.Controller - INFO - Analyze response: {'is_follow_up': False, 'focused_product': None, 'referenced_products': [], 'products': []}
2025-05-13 13:35:56,353 - DealFinderAI.Controller - INFO - Is follow-up? False
2025-05-13 13:35:56,353 - DealFinderAI.Controller - INFO - Referenced products: 0
2025-05-13 13:35:56,353 - DealFinderAI.Controller - INFO - Processing as new search query
2025-05-13 13:35:56,353 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: find me best deal on iphone 16 under 1000 dollar
2025-05-13 13:35:57,676 - DealFinderAI.GeminiAgent - WARNING - Failed to parse Gemini response as JSON: ```json
{
  "product_type": "smartphone",
  "keywords": ["iphone 16"],
  "price_range": [0, 1000],
  "brands": ["Apple"],
  "features": [],
  "sorting_preference": "price_low_to_high",
  "buy_it_now": true
}
```

2025-05-13 13:35:57,677 - DealFinderAI.Controller - INFO - Parsed search parameters: {'product_type': 'smartphone', 'keywords': ['iphone 16'], 'price_range': [0, 1000], 'brands': ['Apple'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-13 13:35:57,677 - DealFinderAI.AmazonScraperAgent - INFO - Searching Amazon for: {'product_type': 'smartphone', 'keywords': ['iphone 16'], 'price_range': [0, 1000], 'brands': ['Apple'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-13 13:35:59,433 - DealFinderAI.AmazonScraperAgent - WARNING - Incomplete data for ASIN B0DHR6DR7P, falling back to Gemini extraction.
2025-05-13 13:36:03,310 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B0DHR6DR7P at 0.0 USD
2025-05-13 13:36:03,317 - DealFinderAI.AmazonScraperAgent - WARNING - Incomplete data for ASIN B091JHNTNH, falling back to Gemini extraction.
2025-05-13 13:36:06,669 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B091JHNTNH at 0.0 USD
2025-05-13 13:36:06,679 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B07886RHHK at 199.97 USD
2025-05-13 13:36:06,684 - DealFinderAI.AmazonScraperAgent - WARNING - Incomplete data for ASIN B0CKWRVHW2, falling back to Gemini extraction.
2025-05-13 13:36:10,373 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B0CKWRVHW2 at 0.0 USD
2025-05-13 13:36:10,383 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B07QL37B7D at 77.44 USD
2025-05-13 13:36:11,316 - DealFinderAI.Controller - INFO - Amazon returned 0 products
2025-05-13 13:36:11,316 - DealFinderAI.WalmartScraperAgent - INFO - Searching Walmart for: {'product_type': 'smartphone', 'keywords': ['iphone 16'], 'price_range': [0, 1000], 'brands': ['Apple'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-13 13:36:15,291 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 13:36:15,291 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: AT&T iPhone 16e 128GB Black. Apple Intelligence. at 649.0 USD
2025-05-13 13:36:15,292 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: AT&T iPhone 16e 128GB Black. Apple Intelligence. at 649.0 USD
2025-05-13 13:36:17,418 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 13:36:17,419 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: AT&T iPhone 16 128GB Ultramarine. Apple Intelligence. at 879.0 USD
2025-05-13 13:36:17,419 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: AT&T iPhone 16 128GB Ultramarine. Apple Intelligence. at 879.0 USD
2025-05-13 13:36:19,906 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 13:36:19,906 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Verizon iPhone 16 128GB Ultramarine. Apple Intelligence. at 879.0 USD
2025-05-13 13:36:19,907 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Verizon iPhone 16 128GB Ultramarine. Apple Intelligence. at 879.0 USD
2025-05-13 13:36:22,738 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 13:36:22,738 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Restored Apple iPhone SE - 4G smartphone / Internal Memory 16 GB - LCD display - 4" - 1136 x 640 pixels - rear camera 12 MP - front camera 1.2 MP - gold (Refurbished) at 55.55 USD
2025-05-13 13:36:22,738 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Restored Apple iPhone SE - 4G smartphone / Internal Memory 16 GB - LCD display - 4" - 1136 x 640 pixels - rear camera 12 MP - front camera 1.2 MP - gold (Refurbished) at 55.55 USD
2025-05-13 13:36:25,181 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 13:36:25,181 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Pre-Owned Unlocked GSM Apple iPhone 6s 16GB, Space Gray at 56.0 USD
2025-05-13 13:36:25,181 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Pre-Owned Unlocked GSM Apple iPhone 6s 16GB, Space Gray at 56.0 USD
2025-05-13 13:36:25,182 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: AT&T iPhone 16e 128GB Black. Apple Intelligence. at 649.0 USD
2025-05-13 13:36:25,182 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: AT&T iPhone 16 128GB Ultramarine. Apple Intelligence. at 879.0 USD
2025-05-13 13:36:25,182 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Verizon iPhone 16 128GB Ultramarine. Apple Intelligence. at 879.0 USD
2025-05-13 13:36:26,508 - DealFinderAI.Controller - INFO - Walmart returned 3 products
2025-05-13 13:36:26,508 - DealFinderAI.EbayScraperAgent - INFO - Searching eBay for: {'product_type': 'smartphone', 'keywords': ['iphone 16'], 'price_range': [0, 1000], 'brands': ['Apple'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-13 13:36:28,015 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: For iPhone 16 15 14 13 12 11 Pro Max Tempered Glass Screen Camera Lens Protector at 7.88 USD
2025-05-13 13:36:28,015 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: For iPhone 16 15 14 13 12 11 Pro Max Tempered Glass Screen Camera Lens Protector at 7.88 USD
2025-05-13 13:36:28,015 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: For Apple iPhone 16 15 14 13 12 11 Pro Max Plus Tempered Glass Screen Protector at 8.41 USD
2025-05-13 13:36:28,015 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: For Apple iPhone 16 15 14 13 12 11 Pro Max Plus Tempered Glass Screen Protector at 8.41 USD
2025-05-13 13:36:28,016 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: 3-Pack For iPhone 16 15 14 13 12 11 Pro XR X 8+ Tempered GLASS Screen Protector at 8.41 USD
2025-05-13 13:36:28,016 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: 3-Pack For iPhone 16 15 14 13 12 11 Pro XR X 8+ Tempered GLASS Screen Protector at 8.41 USD
2025-05-13 13:36:28,749 - DealFinderAI.Controller - INFO - eBay returned 3 products
2025-05-13 13:36:28,750 - DealFinderAI.Controller - INFO - Total products before aggregation: 6
2025-05-13 13:36:28,750 - DealFinderAI.ResultsAggregatorAgent - INFO - Aggregating results for query: find me best deal on iphone 16 under 1000 dollar
2025-05-13 13:36:28,750 - DealFinderAI.ResultsAggregatorAgent - INFO - Found 3 results from various sources
2025-05-13 13:36:28,751 - DealFinderAI.ResultsAggregatorAgent - INFO - Source Amazon: 0 products
2025-05-13 13:36:28,751 - DealFinderAI.ResultsAggregatorAgent - INFO - Source Walmart: 3 products
2025-05-13 13:36:28,751 - DealFinderAI.ResultsAggregatorAgent - INFO - Source eBay: 3 products
2025-05-13 13:36:28,751 - DealFinderAI.ResultsAggregatorAgent - INFO - Total products extracted: 6
2025-05-13 13:36:28,751 - DealFinderAI.ResultsAggregatorAgent - INFO - Ranking 6 products
2025-05-13 13:36:28,752 - DealFinderAI.ResultsAggregatorAgent - INFO - Sorted 6 products by score
2025-05-13 13:36:28,752 - DealFinderAI.ResultsAggregatorAgent - INFO - Returning 6 diversified products
2025-05-13 13:36:28,752 - DealFinderAI.ResultsAggregatorAgent - INFO - Products after ranking: 6
2025-05-13 13:36:28,752 - DealFinderAI.ResultsAggregatorAgent - INFO - Final products: 6
2025-05-13 13:36:28,752 - DealFinderAI.Controller - INFO - Products after aggregation: 6
2025-05-13 13:36:28,752 - DealFinderAI.ProductComparisonAgent - INFO - Comparing products for query: find me best deal on iphone 16 under 1000 dollar
2025-05-13 13:36:28,753 - DealFinderAI.ProductComparisonAgent - INFO - Found 6 products to compare
2025-05-13 13:36:28,753 - DealFinderAI.ProductComparisonAgent - INFO - Grouping 6 products
2025-05-13 13:36:28,753 - DealFinderAI.ProductComparisonAgent - INFO - Created 0 product groups
2025-05-13 13:36:28,754 - DealFinderAI.ChatMemoryAgent - INFO - Storing context for conversation session_20250513133541_ce703fae
2025-05-13 13:36:28,754 - DealFinderAI.ChatMemoryAgent - INFO - Storing 6 products for conversation session_20250513133541_ce703fae
2025-05-13 13:36:28,754 - DealFinderAI.PresentationAgent - INFO - Preparing presentation for 6 products
2025-05-13 13:36:28,754 - DealFinderAI.PresentationAgent - INFO - Formatting 6 products for display
2025-05-13 13:36:28,754 - DealFinderAI.PresentationAgent - INFO - Product 1: For iPhone 16 15 14 13 12 11 Pro Max Tempered Glass Screen Camera Lens Protector - Price: $7.88 - Source: eBay
2025-05-13 13:36:28,754 - DealFinderAI.PresentationAgent - INFO - Product 2: AT&T iPhone 16e 128GB Black. Apple Intelligence. - Price: $649.00 - Source: Walmart
2025-05-13 13:36:28,754 - DealFinderAI.PresentationAgent - INFO - Product 3: For Apple iPhone 16 15 14 13 12 11 Pro Max Plus Tempered Glass Screen Protector - Price: $8.41 - Source: eBay
2025-05-13 13:36:28,755 - DealFinderAI.PresentationAgent - INFO - Product 4: 3-Pack For iPhone 16 15 14 13 12 11 Pro XR X 8+ Tempered GLASS Screen Protector - Price: $8.41 - Source: eBay
2025-05-13 13:36:28,755 - DealFinderAI.PresentationAgent - INFO - Product 5: AT&T iPhone 16 128GB Ultramarine. Apple Intelligence. - Price: $879.00 - Source: Walmart
2025-05-13 13:36:28,755 - DealFinderAI.PresentationAgent - INFO - Product 6: Verizon iPhone 16 128GB Ultramarine. Apple Intelligence. - Price: $879.00 - Source: Walmart
2025-05-13 13:36:28,755 - DealFinderAI.ChatMemoryAgent - INFO - Storing context for conversation session_20250513133541_ce703fae
2025-05-13 13:36:28,755 - DealFinderAI.ChatMemoryAgent - INFO - Storing 6 products for conversation session_20250513133541_ce703fae
2025-05-13 13:36:28,756 - DealFinderAI.Controller - INFO - Successfully stored search results in memory
2025-05-13 13:38:50,497 - DealFinderAI.Controller - INFO - Processing user query: tell me more about 2nd product
2025-05-13 13:38:50,498 - DealFinderAI.ChatMemoryAgent - INFO - Analyzing query: 'tell me more about 2nd product' for conversation session_20250513133541_ce703fae
2025-05-13 13:38:50,498 - DealFinderAI.ChatMemoryAgent - INFO - Found 6 products in memory
2025-05-13 13:38:50,498 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: 
        You are an AI helping to analyze if a user's query is a follow-up question about previously shown products, or if it's a completely new search.

        Previous products shown to the user:
        Product 1: For iPhone 16 15 14 13 12 11 Pro Max Tempered Glass Screen Camera Lens Protector
Product 2: AT&T iPhone 16e 128GB Black. Apple Intelligence.
Product 3: For Apple iPhone 16 15 14 13 12 11 Pro Max Plus Tempered Glass Screen Protector
Product 4: 3-Pack For iPhone 16 15 14 13 12 11 Pro XR X 8+ Tempered GLASS Screen Protector
Product 5: AT&T iPhone 16 128GB Ultramarine. Apple Intelligence.

        User's new query: "tell me more about 2nd product"

        Please analyze if this query is:
        1. A follow-up question about the previously shown products (e.g., asking for more details, comparing them, etc.)
        2. A completely new search (e.g., asking about different products, starting a new topic)

        Return your analysis in JSON format:
        {
            "is_new_search": true/false,
            "is_follow_up": true/false,
            "reasoning": "brief explanation of your decision",
            "referenced_product_indices": [list of 0-based indices of referenced products, if any]
        }
        
        Only return the JSON, with no additional text.
        
2025-05-13 13:38:51,288 - DealFinderAI.Controller - INFO - Analyze response: {'is_follow_up': True, 'focused_product': 1, 'referenced_products': [{'title': 'AT&T iPhone 16e 128GB Black. Apple Intelligence.', 'price': 649.0, 'currency': 'USD', 'url': '/ip/AT-T-iPhone-16e-128GB-Black-Apple-Intelligence/15296401808?classType=VARIANT&from=/search', 'image_url': 'https://i5.walmartimages.com/seo/AT-T-iPhone-16e-128GB-Black-Apple-Intelligence_f88faa0e-66ef-431b-a091-585bf7642ba7.d1856c9d791f3651f7e9e2e87eb25340.jpeg?odnHeight=580&odnWidth=580&odnBg=FFFFFF', 'rating': 0.0, 'reviews': 0, 'is_sponsored': False, 'is_pickup_today': False, 'product_id': '1C7WXZ5873BH', 'source': 'Walmart', '_score': 10.0}], 'products': []}
2025-05-13 13:38:51,288 - DealFinderAI.Controller - INFO - Is follow-up? True
2025-05-13 13:38:51,288 - DealFinderAI.Controller - INFO - Referenced products: 1
2025-05-13 13:38:51,288 - DealFinderAI.Controller - INFO - Handling as follow-up question about 1 products
2025-05-13 13:38:51,288 - DealFinderAI.Controller - INFO - Handling follow-up question: tell me more about 2nd product
2025-05-13 13:38:51,288 - DealFinderAI.Controller - INFO - Referenced products: 1
2025-05-13 13:38:51,288 - DealFinderAI.Controller - INFO - Follow-up for product: AT&T iPhone 16e 128GB Black. Apple Intelligence.
2025-05-13 13:38:51,288 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: 
            I'm a shopping assistant helping a customer with product information.
            
            The customer previously searched for products and is now asking a follow-up question: "tell me more about 2nd product"
            
            They're referring to this product:
            {
  "title": "AT&T iPhone 16e 128GB Black. Apple Intelligence.",
  "price": 649.0,
  "currency": "USD",
  "url": "/ip/AT-T-iPhone-16e-128GB-Black-Apple-Intelligence/15296401808?classType=VARIANT&from=/search",
  "image_url": "https://i5.walmartimages.com/seo/AT-T-iPhone-16e-128GB-Black-Apple-Intelligence_f88faa0e-66ef-431b-a091-585bf7642ba7.d1856c9d791f3651f7e9e2e87eb25340.jpeg?odnHeight=580&odnWidth=580&odnBg=FFFFFF",
  "rating": 0.0,
  "reviews": 0,
  "is_sponsored": false,
  "is_pickup_today": false,
  "product_id": "1C7WXZ5873BH",
  "source": "Walmart",
  "_score": 10.0,
  "formatted_price": "$649.00"
}
            
            Please provide a helpful, conversational response addressing their question
            about this specific product. Include relevant details from the product information.
            
            Important guidelines:
            1. Always format prices as exact dollar amounts (e.g., "$649.00" not "$1")
            2. Format URLs as clickable HTML links <a href="url">url</a>
            3. If the product has a price field, be sure to mention the exact price as shown in the data
            4. Be accurate about the product details - don't make up information not in the data
            5. If the product is a "best deal", explain why it's a good value
            
            Your response should be conversational but accurate, highlighting the actual price 
            and key product features. Don't create fake discounts or savings.
            
2025-05-13 13:39:42,551 - DealFinderAI.Controller - INFO - Processing user query: find me best deal on sony headphones
2025-05-13 13:39:42,551 - DealFinderAI.ChatMemoryAgent - INFO - Analyzing query: 'find me best deal on sony headphones' for conversation session_20250513133541_ce703fae
2025-05-13 13:39:42,551 - DealFinderAI.ChatMemoryAgent - INFO - Found 6 products in memory
2025-05-13 13:39:42,552 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: 
        You are an AI helping to analyze if a user's query is a follow-up question about previously shown products, or if it's a completely new search.

        Previous products shown to the user:
        Product 1: For iPhone 16 15 14 13 12 11 Pro Max Tempered Glass Screen Camera Lens Protector
Product 2: AT&T iPhone 16e 128GB Black. Apple Intelligence.
Product 3: For Apple iPhone 16 15 14 13 12 11 Pro Max Plus Tempered Glass Screen Protector
Product 4: 3-Pack For iPhone 16 15 14 13 12 11 Pro XR X 8+ Tempered GLASS Screen Protector
Product 5: AT&T iPhone 16 128GB Ultramarine. Apple Intelligence.

        User's new query: "find me best deal on sony headphones"

        Please analyze if this query is:
        1. A follow-up question about the previously shown products (e.g., asking for more details, comparing them, etc.)
        2. A completely new search (e.g., asking about different products, starting a new topic)

        Return your analysis in JSON format:
        {
            "is_new_search": true/false,
            "is_follow_up": true/false,
            "reasoning": "brief explanation of your decision",
            "referenced_product_indices": [list of 0-based indices of referenced products, if any]
        }
        
        Only return the JSON, with no additional text.
        
2025-05-13 13:39:43,446 - DealFinderAI.Controller - INFO - Analyze response: {'is_follow_up': False, 'focused_product': None, 'referenced_products': [], 'products': []}
2025-05-13 13:39:43,446 - DealFinderAI.Controller - INFO - Is follow-up? False
2025-05-13 13:39:43,446 - DealFinderAI.Controller - INFO - Referenced products: 0
2025-05-13 13:39:43,446 - DealFinderAI.Controller - INFO - Processing as new search query
2025-05-13 13:39:43,446 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: find me best deal on sony headphones
2025-05-13 13:39:44,168 - DealFinderAI.GeminiAgent - WARNING - Failed to parse Gemini response as JSON: ```json
{
  "product_type": "headphones",
  "keywords": ["sony", "headphones"],
  "price_range": null,
  "brands": ["Sony"],
  "features": [],
  "sorting_preference": "price_low_to_high",
  "buy_it_now": true
}
```

2025-05-13 13:39:44,168 - DealFinderAI.Controller - INFO - Parsed search parameters: {'product_type': 'headphones', 'keywords': ['sony', 'headphones'], 'price_range': None, 'brands': ['Sony'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-13 13:39:44,168 - DealFinderAI.AmazonScraperAgent - INFO - Searching Amazon for: {'product_type': 'headphones', 'keywords': ['sony', 'headphones'], 'price_range': None, 'brands': ['Sony'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-13 13:39:45,792 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B0BGVNXHNH at 2.99 USD
2025-05-13 13:39:45,793 - DealFinderAI.AmazonScraperAgent - WARNING - Incomplete data for ASIN B004MMG380, falling back to Gemini extraction.
2025-05-13 13:39:48,822 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B004MMG380 at 0.0 USD
2025-05-13 13:39:48,824 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B009HW15UG at 8.95 USD
2025-05-13 13:39:48,828 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B00NJ2M43M at 10.99 USD
2025-05-13 13:39:48,830 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B07TB5Z58C at 14.99 USD
2025-05-13 13:39:49,699 - DealFinderAI.Controller - INFO - Amazon returned 0 products
2025-05-13 13:39:49,700 - DealFinderAI.WalmartScraperAgent - INFO - Searching Walmart for: {'product_type': 'headphones', 'keywords': ['sony', 'headphones'], 'price_range': None, 'brands': ['Sony'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-13 13:39:55,311 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 13:39:55,312 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Replacement Noise Isolation Silicone Soft Ear Buds Earplug Tips for Senso, TOZO, Sony, Zeus, Otium, Hussar Sport in Ear Headphones Wireless Earphones (Red, Small - 5 Pair) at 6.95 USD
2025-05-13 13:39:55,312 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Replacement Noise Isolation Silicone Soft Ear Buds Earplug Tips for Senso, TOZO, Sony, Zeus, Otium, Hussar Sport in Ear Headphones Wireless Earphones (Red, Small - 5 Pair) at 6.95 USD
2025-05-13 13:39:57,896 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 13:39:57,897 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: UrbanX R2 Wired in-Ear Headphones with Mic For Sony Xperia L3 with Tangle-Free Cord, Noise Isolating Earphones, Deep Bass, In Ear Bud Silicone Tips at 7.02 USD
2025-05-13 13:39:57,897 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: UrbanX R2 Wired in-Ear Headphones with Mic For Sony Xperia L3 with Tangle-Free Cord, Noise Isolating Earphones, Deep Bass, In Ear Bud Silicone Tips at 7.02 USD
2025-05-13 13:40:00,465 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 13:40:00,466 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: UrbanX R2 Wired in-Ear Headphones with Mic For Sony Xperia Z5 Premium Dual with Tangle-Free Cord, Noise Isolating Earphones, Deep Bass, In Ear Bud Silicone Tips at 7.02 USD
2025-05-13 13:40:00,466 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: UrbanX R2 Wired in-Ear Headphones with Mic For Sony Xperia Z5 Premium Dual with Tangle-Free Cord, Noise Isolating Earphones, Deep Bass, In Ear Bud Silicone Tips at 7.02 USD
2025-05-13 13:40:02,914 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 13:40:02,915 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Sony MDR-EX14AP Wired In-ear Earbud Headphones with Microphone, White at 7.88 USD
2025-05-13 13:40:02,915 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Sony MDR-EX14AP Wired In-ear Earbud Headphones with Microphone, White at 7.88 USD
2025-05-13 13:40:05,098 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 13:40:05,098 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Sony MDR-EX14AP Wired In-ear Earbud Headphones with Microphone, Black at 7.88 USD
2025-05-13 13:40:05,098 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Sony MDR-EX14AP Wired In-ear Earbud Headphones with Microphone, Black at 7.88 USD
2025-05-13 13:40:05,099 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Replacement Noise Isolation Silicone Soft Ear Buds Earplug Tips for Senso, TOZO, Sony, Zeus, Otium, Hussar Sport in Ear Headphones Wireless Earphones (Red, Small - 5 Pair) at 6.95 USD
2025-05-13 13:40:05,099 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: UrbanX R2 Wired in-Ear Headphones with Mic For Sony Xperia L3 with Tangle-Free Cord, Noise Isolating Earphones, Deep Bass, In Ear Bud Silicone Tips at 7.02 USD
2025-05-13 13:40:05,099 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: UrbanX R2 Wired in-Ear Headphones with Mic For Sony Xperia Z5 Premium Dual with Tangle-Free Cord, Noise Isolating Earphones, Deep Bass, In Ear Bud Silicone Tips at 7.02 USD
2025-05-13 13:40:05,099 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Sony MDR-EX14AP Wired In-ear Earbud Headphones with Microphone, White at 7.88 USD
2025-05-13 13:40:05,099 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Sony MDR-EX14AP Wired In-ear Earbud Headphones with Microphone, Black at 7.88 USD
2025-05-13 13:40:05,781 - DealFinderAI.Controller - INFO - Walmart returned 5 products
2025-05-13 13:40:05,781 - DealFinderAI.EbayScraperAgent - INFO - Searching eBay for: {'product_type': 'headphones', 'keywords': ['sony', 'headphones'], 'price_range': None, 'brands': ['Sony'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-13 13:40:07,901 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: 1Pcs Headphones Pads Cushion Replacement Ear For Sony MDR-7506 MDR-V6 MDR-CD at 4.54 USD
2025-05-13 13:40:07,901 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: 1Pcs Headphones Pads Cushion Replacement Ear For Sony MDR-7506 MDR-V6 MDR-CD at 4.54 USD
2025-05-13 13:40:07,902 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Sony MDREX15LP in-Ear Earbud Headphones, Black at 6.29 USD
2025-05-13 13:40:07,902 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Sony MDREX15LP in-Ear Earbud Headphones, Black at 6.29 USD
2025-05-13 13:40:07,903 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Sony MDREX14AP In-Ear Earbud Headphones with Mic (Black) at 7.25 USD
2025-05-13 13:40:07,903 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Sony MDREX14AP In-Ear Earbud Headphones with Mic (Black) at 7.25 USD
2025-05-13 13:40:08,823 - DealFinderAI.Controller - INFO - eBay returned 3 products
2025-05-13 13:40:08,823 - DealFinderAI.Controller - INFO - Total products before aggregation: 8
2025-05-13 13:40:08,823 - DealFinderAI.ResultsAggregatorAgent - INFO - Aggregating results for query: find me best deal on sony headphones
2025-05-13 13:40:08,824 - DealFinderAI.ResultsAggregatorAgent - INFO - Found 3 results from various sources
2025-05-13 13:40:08,824 - DealFinderAI.ResultsAggregatorAgent - INFO - Source Amazon: 0 products
2025-05-13 13:40:08,824 - DealFinderAI.ResultsAggregatorAgent - INFO - Source Walmart: 5 products
2025-05-13 13:40:08,824 - DealFinderAI.ResultsAggregatorAgent - INFO - Source eBay: 3 products
2025-05-13 13:40:08,824 - DealFinderAI.ResultsAggregatorAgent - INFO - Total products extracted: 8
2025-05-13 13:40:08,824 - DealFinderAI.ResultsAggregatorAgent - INFO - Ranking 8 products
2025-05-13 13:40:08,825 - DealFinderAI.ResultsAggregatorAgent - INFO - Sorted 8 products by score
2025-05-13 13:40:08,825 - DealFinderAI.ResultsAggregatorAgent - INFO - Returning 8 diversified products
2025-05-13 13:40:08,825 - DealFinderAI.ResultsAggregatorAgent - INFO - Products after ranking: 8
2025-05-13 13:40:08,825 - DealFinderAI.ResultsAggregatorAgent - INFO - Final products: 8
2025-05-13 13:40:08,825 - DealFinderAI.Controller - INFO - Products after aggregation: 8
2025-05-13 13:40:08,825 - DealFinderAI.ProductComparisonAgent - INFO - Comparing products for query: find me best deal on sony headphones
2025-05-13 13:40:08,825 - DealFinderAI.ProductComparisonAgent - INFO - Found 8 products to compare
2025-05-13 13:40:08,826 - DealFinderAI.ProductComparisonAgent - INFO - Grouping 8 products
2025-05-13 13:40:08,826 - DealFinderAI.ProductComparisonAgent - INFO - Created 2 product groups
2025-05-13 13:40:08,826 - DealFinderAI.ProductComparisonAgent - INFO - Analyzing product group with 3 items
2025-05-13 13:40:08,827 - DealFinderAI.ProductComparisonAgent - INFO - Best deal: Sony MDREX14AP In-Ear Earbud Headphones with Mic (Black) at $7.25
2025-05-13 13:40:08,827 - DealFinderAI.ProductComparisonAgent - INFO - Savings: $0.42 (5.5%)
2025-05-13 13:40:08,827 - DealFinderAI.ChatMemoryAgent - INFO - Storing context for conversation session_20250513133541_ce703fae
2025-05-13 13:40:08,827 - DealFinderAI.ChatMemoryAgent - INFO - Storing 8 products for conversation session_20250513133541_ce703fae
2025-05-13 13:40:08,827 - DealFinderAI.PresentationAgent - INFO - Preparing presentation for 8 products
2025-05-13 13:40:08,827 - DealFinderAI.ChatMemoryAgent - INFO - Storing context for conversation session_20250513133541_ce703fae
2025-05-13 13:40:08,828 - DealFinderAI.ChatMemoryAgent - INFO - Storing 8 products for conversation session_20250513133541_ce703fae
2025-05-13 13:40:08,828 - DealFinderAI.Controller - INFO - Successfully stored search results in memory
2025-05-13 13:40:30,583 - DealFinderAI.Controller - INFO - Processing user query: find me xm 1000 series
2025-05-13 13:40:30,583 - DealFinderAI.ChatMemoryAgent - INFO - Analyzing query: 'find me xm 1000 series' for conversation session_20250513133541_ce703fae
2025-05-13 13:40:30,584 - DealFinderAI.ChatMemoryAgent - INFO - Found 8 products in memory
2025-05-13 13:40:30,584 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: 
        You are an AI helping to analyze if a user's query is a follow-up question about previously shown products, or if it's a completely new search.

        Previous products shown to the user:
        Product 1: 1Pcs Headphones Pads Cushion Replacement Ear For Sony MDR-7506 MDR-V6 MDR-CD
Product 2: Replacement Noise Isolation Silicone Soft Ear Buds Earplug Tips for Senso, TOZO, Sony, Zeus, Otium, Hussar Sport in Ear Headphones Wireless Earphones (Red, Small - 5 Pair)
Product 3: Sony MDREX15LP in-Ear Earbud Headphones, Black
Product 4: Sony MDREX14AP In-Ear Earbud Headphones with Mic (Black)
Product 5: UrbanX R2 Wired in-Ear Headphones with Mic For Sony Xperia L3 with Tangle-Free Cord, Noise Isolating Earphones, Deep Bass, In Ear Bud Silicone Tips

        User's new query: "find me xm 1000 series"

        Please analyze if this query is:
        1. A follow-up question about the previously shown products (e.g., asking for more details, comparing them, etc.)
        2. A completely new search (e.g., asking about different products, starting a new topic)

        Return your analysis in JSON format:
        {
            "is_new_search": true/false,
            "is_follow_up": true/false,
            "reasoning": "brief explanation of your decision",
            "referenced_product_indices": [list of 0-based indices of referenced products, if any]
        }
        
        Only return the JSON, with no additional text.
        
2025-05-13 13:40:31,523 - DealFinderAI.Controller - INFO - Analyze response: {'is_follow_up': False, 'focused_product': None, 'referenced_products': [], 'products': []}
2025-05-13 13:40:31,524 - DealFinderAI.Controller - INFO - Is follow-up? False
2025-05-13 13:40:31,524 - DealFinderAI.Controller - INFO - Referenced products: 0
2025-05-13 13:40:31,524 - DealFinderAI.Controller - INFO - Processing as new search query
2025-05-13 13:40:31,524 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: find me xm 1000 series
2025-05-13 13:40:32,301 - DealFinderAI.GeminiAgent - WARNING - Failed to parse Gemini response as JSON: ```json
{
  "product_type": "Headphones",
  "keywords": ["xm", "1000 series"],
  "price_range": null,
  "brands": ["Sony"], 
  "features": [],
  "sorting_preference": null,
  "buy_it_now": true
}
```

2025-05-13 13:40:32,302 - DealFinderAI.Controller - INFO - Parsed search parameters: {'product_type': 'Headphones', 'keywords': ['xm', '1000 series'], 'price_range': None, 'brands': ['Sony'], 'features': [], 'sorting_preference': None, 'buy_it_now': True}
2025-05-13 13:40:32,303 - DealFinderAI.AmazonScraperAgent - INFO - Searching Amazon for: {'product_type': 'Headphones', 'keywords': ['xm', '1000 series'], 'price_range': None, 'brands': ['Sony'], 'features': [], 'sorting_preference': None, 'buy_it_now': True}
2025-05-13 13:40:33,946 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B087QV671C at 149.0 USD
2025-05-13 13:40:33,950 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B0863TXGM3 at 298.0 USD
2025-05-13 13:40:33,952 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B09XS7JWHH at 348.0 USD
2025-05-13 13:40:33,954 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B0CFT4N7T9 at 222.0 USD
2025-05-13 13:40:33,956 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B0CFSD4TSQ at 291.9 USD
2025-05-13 13:40:34,475 - DealFinderAI.Controller - INFO - Amazon returned 0 products
2025-05-13 13:40:34,475 - DealFinderAI.WalmartScraperAgent - INFO - Searching Walmart for: {'product_type': 'Headphones', 'keywords': ['xm', '1000 series'], 'price_range': None, 'brands': ['Sony'], 'features': [], 'sorting_preference': None, 'buy_it_now': True}
2025-05-13 13:40:39,808 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 13:40:39,808 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Sony WH-1000XM5 The Best Wireless Noise Canceling Headphones, Black at 319.44 USD
2025-05-13 13:40:39,808 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Sony WH-1000XM5 The Best Wireless Noise Canceling Headphones, Black at 319.44 USD
2025-05-13 13:40:42,453 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 13:40:42,454 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Open Box Sony WH-1000XM4 Wireless Premium Noise Canceling Overhead Headphones with Mic for Phone Call and Alexa Voice Control, Black - at 234.99 USD
2025-05-13 13:40:42,454 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Open Box Sony WH-1000XM4 Wireless Premium Noise Canceling Overhead Headphones with Mic for Phone Call and Alexa Voice Control, Black - at 234.99 USD
2025-05-13 13:40:45,111 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 13:40:45,112 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Sony WH-1000XM5 The Best Wireless Noise Canceling Headphones, Black at 319.44 USD
2025-05-13 13:40:45,112 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Sony WH-1000XM5 The Best Wireless Noise Canceling Headphones, Black at 319.44 USD
2025-05-13 13:40:47,767 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 13:40:47,767 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Sony WH-1000XM4 Wireless Noise Canceling Over-the-Ear Headphones with Google Assistant - Black at 236.99 USD
2025-05-13 13:40:47,768 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Sony WH-1000XM4 Wireless Noise Canceling Over-the-Ear Headphones with Google Assistant - Black at 236.99 USD
2025-05-13 13:40:49,813 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 13:40:49,813 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Sony WF-1000XM5 The Best Truly Wireless Noise Canceling Earbuds, Black at 259.0 USD
2025-05-13 13:40:49,814 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Sony WF-1000XM5 The Best Truly Wireless Noise Canceling Earbuds, Black at 259.0 USD
2025-05-13 13:40:51,077 - DealFinderAI.Controller - INFO - Walmart returned 0 products
2025-05-13 13:40:51,078 - DealFinderAI.EbayScraperAgent - INFO - Searching eBay for: {'product_type': 'Headphones', 'keywords': ['xm', '1000 series'], 'price_range': None, 'brands': ['Sony'], 'features': [], 'sorting_preference': None, 'buy_it_now': True}
2025-05-13 13:40:52,118 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Sony WH-1000XM4 Noise-Cancelling Wireless Over-Ear Bluetooth Headphones White RE at 99.99 USD
2025-05-13 13:40:52,118 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Sony WH-1000XM4 Wireless Premium Noise Canceling Headphones Black at 123.99 USD
2025-05-13 13:40:52,119 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Sony WH-1000XM5 Headphones Blue Nigo x Victor Victor Popup Event Edition at 194.99 USD
2025-05-13 13:40:53,092 - DealFinderAI.Controller - INFO - eBay returned 0 products
2025-05-13 13:40:53,092 - DealFinderAI.Controller - INFO - Total products before aggregation: 0
2025-05-13 13:40:53,092 - DealFinderAI.ResultsAggregatorAgent - INFO - Aggregating results for query: find me xm 1000 series
2025-05-13 13:40:53,092 - DealFinderAI.ResultsAggregatorAgent - INFO - Found 3 results from various sources
2025-05-13 13:40:53,092 - DealFinderAI.ResultsAggregatorAgent - INFO - Source Amazon: 0 products
2025-05-13 13:40:53,092 - DealFinderAI.ResultsAggregatorAgent - INFO - Source Walmart: 0 products
2025-05-13 13:40:53,093 - DealFinderAI.ResultsAggregatorAgent - INFO - Source eBay: 0 products
2025-05-13 13:40:53,093 - DealFinderAI.ResultsAggregatorAgent - INFO - Total products extracted: 0
2025-05-13 13:40:53,093 - DealFinderAI.ResultsAggregatorAgent - WARNING - No products found in any source
2025-05-13 13:41:08,659 - DealFinderAI.Controller - INFO - Processing user query: find me sony xm 1000 series
2025-05-13 13:41:08,660 - DealFinderAI.ChatMemoryAgent - INFO - Analyzing query: 'find me sony xm 1000 series' for conversation session_20250513133541_ce703fae
2025-05-13 13:41:08,660 - DealFinderAI.ChatMemoryAgent - INFO - Found 8 products in memory
2025-05-13 13:41:08,661 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: 
        You are an AI helping to analyze if a user's query is a follow-up question about previously shown products, or if it's a completely new search.

        Previous products shown to the user:
        Product 1: 1Pcs Headphones Pads Cushion Replacement Ear For Sony MDR-7506 MDR-V6 MDR-CD
Product 2: Replacement Noise Isolation Silicone Soft Ear Buds Earplug Tips for Senso, TOZO, Sony, Zeus, Otium, Hussar Sport in Ear Headphones Wireless Earphones (Red, Small - 5 Pair)
Product 3: Sony MDREX15LP in-Ear Earbud Headphones, Black
Product 4: Sony MDREX14AP In-Ear Earbud Headphones with Mic (Black)
Product 5: UrbanX R2 Wired in-Ear Headphones with Mic For Sony Xperia L3 with Tangle-Free Cord, Noise Isolating Earphones, Deep Bass, In Ear Bud Silicone Tips

        User's new query: "find me sony xm 1000 series"

        Please analyze if this query is:
        1. A follow-up question about the previously shown products (e.g., asking for more details, comparing them, etc.)
        2. A completely new search (e.g., asking about different products, starting a new topic)

        Return your analysis in JSON format:
        {
            "is_new_search": true/false,
            "is_follow_up": true/false,
            "reasoning": "brief explanation of your decision",
            "referenced_product_indices": [list of 0-based indices of referenced products, if any]
        }
        
        Only return the JSON, with no additional text.
        
2025-05-13 13:41:09,609 - DealFinderAI.Controller - INFO - Analyze response: {'is_follow_up': False, 'focused_product': None, 'referenced_products': [], 'products': []}
2025-05-13 13:41:09,609 - DealFinderAI.Controller - INFO - Is follow-up? False
2025-05-13 13:41:09,609 - DealFinderAI.Controller - INFO - Referenced products: 0
2025-05-13 13:41:09,610 - DealFinderAI.Controller - INFO - Processing as new search query
2025-05-13 13:41:09,610 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: find me sony xm 1000 series
2025-05-13 13:41:10,416 - DealFinderAI.GeminiAgent - WARNING - Failed to parse Gemini response as JSON: ```json
{
  "product_type": "headphones",
  "keywords": ["sony", "xm 1000 series"],
  "price_range": null,
  "brands": ["Sony"],
  "features": [],
  "sorting_preference": null,
  "buy_it_now": true
}
```

2025-05-13 13:41:10,417 - DealFinderAI.Controller - INFO - Parsed search parameters: {'product_type': 'headphones', 'keywords': ['sony', 'xm 1000 series'], 'price_range': None, 'brands': ['Sony'], 'features': [], 'sorting_preference': None, 'buy_it_now': True}
2025-05-13 13:41:10,417 - DealFinderAI.AmazonScraperAgent - INFO - Searching Amazon for: {'product_type': 'headphones', 'keywords': ['sony', 'xm 1000 series'], 'price_range': None, 'brands': ['Sony'], 'features': [], 'sorting_preference': None, 'buy_it_now': True}
2025-05-13 13:41:12,150 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B087QV671C at 149.0 USD
2025-05-13 13:41:12,152 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B0CWVX1GNX at 198.0 USD
2025-05-13 13:41:12,155 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B0863TXGM3 at 298.0 USD
2025-05-13 13:41:12,159 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B09XS7JWHH at 348.0 USD
2025-05-13 13:41:12,160 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B0CFT4N7T9 at 222.0 USD
2025-05-13 13:41:13,236 - DealFinderAI.Controller - INFO - Amazon returned 0 products
2025-05-13 13:41:13,237 - DealFinderAI.WalmartScraperAgent - INFO - Searching Walmart for: {'product_type': 'headphones', 'keywords': ['sony', 'xm 1000 series'], 'price_range': None, 'brands': ['Sony'], 'features': [], 'sorting_preference': None, 'buy_it_now': True}
2025-05-13 13:41:17,776 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 13:41:17,776 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Sony WH-1000XM5 The Best Wireless Noise Canceling Headphones, Black at 319.44 USD
2025-05-13 13:41:17,777 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Sony WH-1000XM5 The Best Wireless Noise Canceling Headphones, Black at 319.44 USD
2025-05-13 13:41:20,200 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 13:41:20,201 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Sony WH-1000XM4 Wireless Noise Cancelling Over-Ear Headphones (Silver)- (International Version) at 242.79 USD
2025-05-13 13:41:20,201 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Sony WH-1000XM4 Wireless Noise Cancelling Over-Ear Headphones (Silver)- (International Version) at 242.79 USD
2025-05-13 13:41:22,639 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 13:41:22,639 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Sony WH-1000XM5-BLACK Wireless Over-Ear Noise Canceling Headphones - Black with 3 Year Amber Protection Plan (2022) at 360.0 USD
2025-05-13 13:41:22,640 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Sony WH-1000XM5-BLACK Wireless Over-Ear Noise Canceling Headphones - Black with 3 Year Amber Protection Plan (2022) at 360.0 USD
2025-05-13 13:41:25,394 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 13:41:25,394 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Sony WH-1000XM5-BLACK Wireless Over-Ear Noise Canceling Headphones - Black with 2 Year Amber Protection Plan (2022) at 348.0 USD
2025-05-13 13:41:25,394 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Sony WH-1000XM5-BLACK Wireless Over-Ear Noise Canceling Headphones - Black with 2 Year Amber Protection Plan (2022) at 348.0 USD
2025-05-13 13:41:27,530 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 13:41:27,531 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Sony WH-1000XM5 The Best Wireless Noise Canceling Headphones, Black at 319.44 USD
2025-05-13 13:41:27,531 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Sony WH-1000XM5 The Best Wireless Noise Canceling Headphones, Black at 319.44 USD
2025-05-13 13:41:28,279 - DealFinderAI.Controller - INFO - Walmart returned 0 products
2025-05-13 13:41:28,280 - DealFinderAI.EbayScraperAgent - INFO - Searching eBay for: {'product_type': 'headphones', 'keywords': ['sony', 'xm 1000 series'], 'price_range': None, 'brands': ['Sony'], 'features': [], 'sorting_preference': None, 'buy_it_now': True}
2025-05-13 13:41:29,812 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Sony Wireless Industry Leading Noise Canceling Headphones - WH1000XM5/S - Open B at 269.0 USD
2025-05-13 13:41:29,813 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Sony WH-1000XM4 Noise-Cancelling Wireless Over-Ear Bluetooth Headphones White RE at 99.99 USD
2025-05-13 13:41:29,814 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Sony WH-1000XM4 Wireless Premium Noise Canceling Headphones Black at 123.99 USD
2025-05-13 13:41:30,621 - DealFinderAI.Controller - INFO - eBay returned 0 products
2025-05-13 13:41:30,621 - DealFinderAI.Controller - INFO - Total products before aggregation: 0
2025-05-13 13:41:30,622 - DealFinderAI.ResultsAggregatorAgent - INFO - Aggregating results for query: find me sony xm 1000 series
2025-05-13 13:41:30,622 - DealFinderAI.ResultsAggregatorAgent - INFO - Found 3 results from various sources
2025-05-13 13:41:30,622 - DealFinderAI.ResultsAggregatorAgent - INFO - Source Amazon: 0 products
2025-05-13 13:41:30,622 - DealFinderAI.ResultsAggregatorAgent - INFO - Source Walmart: 0 products
2025-05-13 13:41:30,622 - DealFinderAI.ResultsAggregatorAgent - INFO - Source eBay: 0 products
2025-05-13 13:41:30,622 - DealFinderAI.ResultsAggregatorAgent - INFO - Total products extracted: 0
2025-05-13 13:41:30,622 - DealFinderAI.ResultsAggregatorAgent - WARNING - No products found in any source
2025-05-13 13:56:39,394 - DealFinderAI - INFO - Logging initialized
2025-05-13 13:56:39,394 - DealFinderAI.Main - INFO - Starting DealFinder AI
2025-05-13 13:56:39,394 - DealFinderAI.Main - INFO - Using LangChain implementation
2025-05-13 13:56:39,436 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-13 13:56:39,436 - DealFinderAI.Controller - INFO - Initialized scraper agents: ['amazon', 'walmart', 'ebay']
2025-05-13 13:56:39,436 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-13 13:56:39,436 - DealFinderAI.Controller - INFO - Initialized scraper agents: ['amazon', 'walmart', 'ebay']
2025-05-13 13:56:39,436 - DealFinderAI.Main - INFO - Web app using LangChain implementation with Gemini model
2025-05-13 13:58:53,183 - DealFinderAI - INFO - Logging initialized
2025-05-13 13:58:53,184 - DealFinderAI.Main - INFO - Starting DealFinder AI
2025-05-13 13:58:53,184 - DealFinderAI.Main - INFO - Using LangChain implementation
2025-05-13 13:58:53,229 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-13 13:58:53,229 - DealFinderAI.Controller - INFO - Initialized scraper agents: ['amazon', 'walmart', 'ebay']
2025-05-13 13:58:53,229 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-13 13:58:53,229 - DealFinderAI.Controller - INFO - Initialized scraper agents: ['amazon', 'walmart', 'ebay']
2025-05-13 13:58:53,229 - DealFinderAI.Main - INFO - Web app using LangChain implementation with Gemini model
2025-05-13 13:59:22,163 - DealFinderAI - INFO - Logging initialized
2025-05-13 13:59:22,163 - DealFinderAI.Main - INFO - Starting DealFinder AI
2025-05-13 13:59:22,164 - DealFinderAI.Main - INFO - Using LangChain implementation
2025-05-13 13:59:22,203 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-13 13:59:22,203 - DealFinderAI.Controller - INFO - Initialized scraper agents: ['amazon', 'walmart', 'ebay']
2025-05-13 13:59:22,203 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-13 13:59:22,203 - DealFinderAI.Controller - INFO - Initialized scraper agents: ['amazon', 'walmart', 'ebay']
2025-05-13 13:59:22,203 - DealFinderAI.Main - INFO - Web app using LangChain implementation with Gemini model
2025-05-13 14:02:18,748 - DealFinderAI - INFO - Logging initialized
2025-05-13 14:02:18,752 - DealFinderAI.Main - INFO - Starting DealFinder AI
2025-05-13 14:02:18,752 - DealFinderAI.Main - INFO - Using LangChain implementation
2025-05-13 14:02:18,821 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-13 14:02:18,821 - DealFinderAI.Controller - INFO - Initialized scraper agents: ['amazon', 'walmart', 'ebay']
2025-05-13 14:02:18,821 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-13 14:02:18,821 - DealFinderAI.Controller - INFO - Initialized scraper agents: ['amazon', 'walmart', 'ebay']
2025-05-13 14:02:18,821 - DealFinderAI.Main - INFO - Web app using LangChain implementation with Gemini model
2025-05-13 14:02:27,434 - DealFinderAI - INFO - Logging initialized
2025-05-13 14:02:27,434 - DealFinderAI.Main - INFO - Starting DealFinder AI
2025-05-13 14:02:27,434 - DealFinderAI.Main - INFO - Using LangChain implementation
2025-05-13 14:02:27,474 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-13 14:02:27,474 - DealFinderAI.Controller - INFO - Initialized scraper agents: ['amazon', 'walmart', 'ebay']
2025-05-13 14:02:27,474 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-13 14:02:27,474 - DealFinderAI.Controller - INFO - Initialized scraper agents: ['amazon', 'walmart', 'ebay']
2025-05-13 14:02:27,474 - DealFinderAI.Main - INFO - Web app using LangChain implementation with Gemini model
2025-05-13 14:02:46,234 - DealFinderAI.Controller - INFO - Processing user query: find me best deal on sony wireless headphones
2025-05-13 14:02:46,235 - DealFinderAI.ChatMemoryAgent - INFO - Analyzing query: 'find me best deal on sony wireless headphones' for conversation session_20250513140231_8915a289
2025-05-13 14:02:46,236 - DealFinderAI.ChatMemoryAgent - INFO - No product context available for this conversation
2025-05-13 14:02:46,236 - DealFinderAI.Controller - INFO - Analyze response: {'is_follow_up': False, 'focused_product': None, 'referenced_products': [], 'products': []}
2025-05-13 14:02:46,236 - DealFinderAI.Controller - INFO - Is follow-up? False
2025-05-13 14:02:46,237 - DealFinderAI.Controller - INFO - Referenced products: 0
2025-05-13 14:02:46,237 - DealFinderAI.Controller - INFO - Processing as new search query
2025-05-13 14:02:46,237 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: find me best deal on sony wireless headphones
2025-05-13 14:02:47,364 - DealFinderAI.GeminiAgent - WARNING - Failed to parse Gemini response as JSON: ```json
{
  "product_type": "headphones",
  "keywords": ["wireless", "sony"],
  "price_range": null,
  "brands": ["Sony"],
  "features": ["wireless"],
  "sorting_preference": "price_low_to_high",
  "buy_it_now": true
}
```

2025-05-13 14:02:47,365 - DealFinderAI.Controller - INFO - Parsed search parameters: {'product_type': 'headphones', 'keywords': ['wireless', 'sony'], 'price_range': None, 'brands': ['Sony'], 'features': ['wireless'], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-13 14:02:47,365 - DealFinderAI.AmazonScraperAgent - INFO - Searching Amazon for: {'product_type': 'headphones', 'keywords': ['wireless', 'sony'], 'price_range': None, 'brands': ['Sony'], 'features': ['wireless'], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-13 14:02:48,883 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B009HW15UG at 8.95 USD
2025-05-13 14:02:49,216 - DealFinderAI.AmazonScraperAgent - INFO - Gemini determined product is NOT relevant: amazon product b009hw15ug
2025-05-13 14:02:49,224 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B00NJ2M43M at 10.99 USD
2025-05-13 14:02:49,540 - DealFinderAI.AmazonScraperAgent - INFO - Gemini determined product is NOT relevant: amazon product b00nj2m43m
2025-05-13 14:02:49,544 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B07TB5Z58C at 14.99 USD
2025-05-13 14:02:49,958 - DealFinderAI.AmazonScraperAgent - INFO - Gemini determined product is NOT relevant: amazon product b07tb5z58c
2025-05-13 14:02:49,963 - DealFinderAI.AmazonScraperAgent - WARNING - Incomplete data for ASIN B00GV9VH3S, falling back to Gemini extraction.
2025-05-13 14:02:53,003 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B00GV9VH3S at 0.0 USD
2025-05-13 14:02:53,340 - DealFinderAI.AmazonScraperAgent - INFO - Gemini determined product is NOT relevant: amazon product b00gv9vh3s
2025-05-13 14:02:53,350 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B00NBR7962 at 16.99 USD
2025-05-13 14:02:53,679 - DealFinderAI.AmazonScraperAgent - INFO - Gemini determined product is NOT relevant: amazon product b00nbr7962
2025-05-13 14:02:53,685 - DealFinderAI.AmazonScraperAgent - WARNING - Incomplete data for ASIN B0856SSF5N, falling back to Gemini extraction.
2025-05-13 14:02:56,550 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B0856SSF5N at 0.0 USD
2025-05-13 14:02:56,861 - DealFinderAI.AmazonScraperAgent - INFO - Gemini determined product is NOT relevant: amazon product b0856ssf5n
2025-05-13 14:02:56,868 - DealFinderAI.AmazonScraperAgent - WARNING - Incomplete data for ASIN B011TNK6V4, falling back to Gemini extraction.
2025-05-13 14:02:59,857 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B011TNK6V4 at 0.0 USD
2025-05-13 14:03:00,200 - DealFinderAI.AmazonScraperAgent - INFO - Gemini determined product is NOT relevant: amazon product b011tnk6v4
2025-05-13 14:03:00,207 - DealFinderAI.AmazonScraperAgent - WARNING - Incomplete data for ASIN B00KXL99GW, falling back to Gemini extraction.
2025-05-13 14:03:03,585 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B00KXL99GW at 0.0 USD
2025-05-13 14:03:04,255 - DealFinderAI.AmazonScraperAgent - INFO - Gemini determined product is NOT relevant: amazon product b00kxl99gw
2025-05-13 14:03:04,260 - DealFinderAI.AmazonScraperAgent - WARNING - Incomplete data for ASIN B00HZD3T6M, falling back to Gemini extraction.
2025-05-13 14:03:07,164 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B00HZD3T6M at 0.0 USD
2025-05-13 14:03:07,887 - DealFinderAI.AmazonScraperAgent - INFO - Gemini determined product is NOT relevant: amazon product b00hzd3t6m
2025-05-13 14:03:07,891 - DealFinderAI.AmazonScraperAgent - WARNING - Incomplete data for ASIN B07SXB714P, falling back to Gemini extraction.
2025-05-13 14:03:10,808 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B07SXB714P at 0.0 USD
2025-05-13 14:03:11,449 - DealFinderAI.GeminiAgent - ERROR - Error in run(): 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-flash"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
  quota_value: 15
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 48
}
]
2025-05-13 14:03:11,449 - DealFinderAI.AmazonScraperAgent - INFO - Gemini determined product is NOT relevant: amazon product b07sxb714p
2025-05-13 14:03:12,324 - DealFinderAI.AmazonScraperAgent - INFO - Returning 0 products after filtering
2025-05-13 14:03:12,325 - DealFinderAI.Controller - INFO - Amazon response content: {'source': 'Amazon', 'query': 'headphones wireless sony Sony wireless', 'products': []}
2025-05-13 14:03:12,325 - DealFinderAI.Controller - INFO - Amazon returned 0 products
2025-05-13 14:03:12,326 - DealFinderAI.WalmartScraperAgent - INFO - Searching Walmart for: {'product_type': 'headphones', 'keywords': ['wireless', 'sony'], 'price_range': None, 'brands': ['Sony'], 'features': ['wireless'], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-13 14:03:16,486 - DealFinderAI.GeminiAgent - ERROR - Error extracting product details: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-flash"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
  quota_value: 15
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 44
}
]
2025-05-13 14:03:16,486 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 14:03:16,486 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product:  at 0 USD
2025-05-13 14:03:16,487 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Unknown Product at 0.0 USD
2025-05-13 14:03:16,618 - DealFinderAI.GeminiAgent - ERROR - Error extracting product details: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-flash"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
  quota_value: 15
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 43
}
]
2025-05-13 14:03:16,619 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 14:03:16,619 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product:  at 0 USD
2025-05-13 14:03:16,619 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Unknown Product at 0.0 USD
2025-05-13 14:03:16,752 - DealFinderAI.GeminiAgent - ERROR - Error extracting product details: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-flash"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
  quota_value: 15
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 43
}
]
2025-05-13 14:03:16,753 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 14:03:16,753 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product:  at 0 USD
2025-05-13 14:03:16,753 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Unknown Product at 0.0 USD
2025-05-13 14:03:17,381 - DealFinderAI.GeminiAgent - ERROR - Error extracting product details: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-flash"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
  quota_value: 15
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 43
}
]
2025-05-13 14:03:17,381 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 14:03:17,382 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product:  at 0 USD
2025-05-13 14:03:17,382 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Unknown Product at 0.0 USD
2025-05-13 14:03:17,518 - DealFinderAI.GeminiAgent - ERROR - Error extracting product details: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-flash"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
  quota_value: 15
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 42
}
]
2025-05-13 14:03:17,519 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 14:03:17,519 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product:  at 0 USD
2025-05-13 14:03:17,519 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Unknown Product at 0.0 USD
2025-05-13 14:03:18,374 - DealFinderAI.Controller - INFO - Walmart returned 0 products
2025-05-13 14:03:18,375 - DealFinderAI.EbayScraperAgent - INFO - Searching eBay for: {'product_type': 'headphones', 'keywords': ['wireless', 'sony'], 'price_range': None, 'brands': ['Sony'], 'features': ['wireless'], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-13 14:03:20,460 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: SONY Wireless In-Ear Headphones Product Catalog From JAPAN F/S at 6.0 USD
2025-05-13 14:03:20,460 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: SONY Wireless In-Ear Headphones Product Catalog From JAPAN F/S at 6.0 USD
2025-05-13 14:03:20,462 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: SONY WH-RF400R Wireless Headphones Transmitter at 7.99 USD
2025-05-13 14:03:20,462 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: SONY WH-RF400R Wireless Headphones Transmitter at 7.99 USD
2025-05-13 14:03:20,463 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Sony WF1000X Truly Wireless Headphones Right Side Ear Bud WF-1000XR Gold at 7.99 USD
2025-05-13 14:03:20,463 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Sony WF1000X Truly Wireless Headphones Right Side Ear Bud WF-1000XR Gold at 7.99 USD
2025-05-13 14:03:21,484 - DealFinderAI.Controller - INFO - eBay returned 3 products
2025-05-13 14:03:21,485 - DealFinderAI.Controller - INFO - Total products before aggregation: 3
2025-05-13 14:03:21,485 - DealFinderAI.ResultsAggregatorAgent - INFO - Aggregating results for query: find me best deal on sony wireless headphones
2025-05-13 14:03:21,485 - DealFinderAI.ResultsAggregatorAgent - INFO - Found 3 results from various sources
2025-05-13 14:03:21,485 - DealFinderAI.ResultsAggregatorAgent - INFO - Source Amazon: 0 products
2025-05-13 14:03:21,485 - DealFinderAI.ResultsAggregatorAgent - INFO - Source Walmart: 0 products
2025-05-13 14:03:21,485 - DealFinderAI.ResultsAggregatorAgent - INFO - Source eBay: 3 products
2025-05-13 14:03:21,485 - DealFinderAI.ResultsAggregatorAgent - INFO - Total products extracted: 3
2025-05-13 14:03:21,485 - DealFinderAI.ResultsAggregatorAgent - INFO - Ranking 3 products
2025-05-13 14:03:21,486 - DealFinderAI.ResultsAggregatorAgent - INFO - Sorted 3 products by score
2025-05-13 14:03:21,486 - DealFinderAI.ResultsAggregatorAgent - INFO - Returning all 3 sorted products
2025-05-13 14:03:21,486 - DealFinderAI.ResultsAggregatorAgent - INFO - Products after ranking: 3
2025-05-13 14:03:21,486 - DealFinderAI.ResultsAggregatorAgent - INFO - Final products: 3
2025-05-13 14:03:21,486 - DealFinderAI.Controller - INFO - Products after aggregation: 3
2025-05-13 14:03:21,486 - DealFinderAI.ProductComparisonAgent - INFO - Comparing products for query: find me best deal on sony wireless headphones
2025-05-13 14:03:21,486 - DealFinderAI.ProductComparisonAgent - INFO - Found 3 products to compare
2025-05-13 14:03:21,486 - DealFinderAI.ProductComparisonAgent - INFO - Grouping 3 products
2025-05-13 14:03:21,486 - DealFinderAI.ProductComparisonAgent - INFO - Created 0 product groups
2025-05-13 14:03:21,486 - DealFinderAI.ChatMemoryAgent - INFO - Storing context for conversation session_20250513140231_8915a289
2025-05-13 14:03:21,487 - DealFinderAI.ChatMemoryAgent - INFO - Storing 3 products for conversation session_20250513140231_8915a289
2025-05-13 14:03:21,487 - DealFinderAI.PresentationAgent - INFO - Preparing presentation for 3 products
2025-05-13 14:03:21,487 - DealFinderAI.PresentationAgent - INFO - Formatting 3 products for display
2025-05-13 14:03:21,487 - DealFinderAI.PresentationAgent - INFO - Product 1: SONY Wireless In-Ear Headphones Product Catalog From JAPAN F/S - Price: $6.00 - Source: eBay
2025-05-13 14:03:21,487 - DealFinderAI.PresentationAgent - INFO - Product 2: SONY WH-RF400R Wireless Headphones Transmitter - Price: $7.99 - Source: eBay
2025-05-13 14:03:21,487 - DealFinderAI.PresentationAgent - INFO - Product 3: Sony WF1000X Truly Wireless Headphones Right Side Ear Bud WF-1000XR Gold - Price: $7.99 - Source: eBay
2025-05-13 14:03:21,487 - DealFinderAI.ChatMemoryAgent - INFO - Storing context for conversation session_20250513140231_8915a289
2025-05-13 14:03:21,487 - DealFinderAI.ChatMemoryAgent - INFO - Storing 3 products for conversation session_20250513140231_8915a289
2025-05-13 14:03:21,487 - DealFinderAI.Controller - INFO - Successfully stored search results in memory
2025-05-13 14:04:19,392 - DealFinderAI.Controller - INFO - Processing user query: find me sony xm 1000 series
2025-05-13 14:04:19,394 - DealFinderAI.ChatMemoryAgent - INFO - Analyzing query: 'find me sony xm 1000 series' for conversation session_20250513140231_8915a289
2025-05-13 14:04:19,394 - DealFinderAI.ChatMemoryAgent - INFO - Found 3 products in memory
2025-05-13 14:04:19,396 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: 
        You are an AI helping to analyze if a user's query is a follow-up question about previously shown products, or if it's a completely new search.

        Previous products shown to the user:
        Product 1: SONY Wireless In-Ear Headphones Product Catalog From JAPAN F/S
Product 2: SONY WH-RF400R Wireless Headphones Transmitter
Product 3: Sony WF1000X Truly Wireless Headphones Right Side Ear Bud WF-1000XR Gold

        User's new query: "find me sony xm 1000 series"

        Please analyze if this query is:
        1. A follow-up question about the previously shown products (e.g., asking for more details, comparing them, etc.)
        2. A completely new search (e.g., asking about different products, starting a new topic)

        Return your analysis in JSON format:
        {
            "is_new_search": true/false,
            "is_follow_up": true/false,
            "reasoning": "brief explanation of your decision",
            "referenced_product_indices": [list of 0-based indices of referenced products, if any]
        }
        
        Only return the JSON, with no additional text.
        
2025-05-13 14:04:20,480 - DealFinderAI.Controller - INFO - Analyze response: {'is_follow_up': False, 'focused_product': None, 'referenced_products': [], 'products': []}
2025-05-13 14:04:20,480 - DealFinderAI.Controller - INFO - Is follow-up? False
2025-05-13 14:04:20,480 - DealFinderAI.Controller - INFO - Referenced products: 0
2025-05-13 14:04:20,480 - DealFinderAI.Controller - INFO - Processing as new search query
2025-05-13 14:04:20,481 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: find me sony xm 1000 series
2025-05-13 14:04:21,417 - DealFinderAI.GeminiAgent - WARNING - Failed to parse Gemini response as JSON: ```json
{
  "product_type": "headphones",
  "keywords": ["sony", "xm 1000 series"],
  "price_range": null,
  "brands": ["sony"],
  "features": [],
  "sorting_preference": null,
  "buy_it_now": true
}
```

2025-05-13 14:04:21,418 - DealFinderAI.Controller - INFO - Parsed search parameters: {'product_type': 'headphones', 'keywords': ['sony', 'xm 1000 series'], 'price_range': None, 'brands': ['sony'], 'features': [], 'sorting_preference': None, 'buy_it_now': True}
2025-05-13 14:04:21,418 - DealFinderAI.AmazonScraperAgent - INFO - Searching Amazon for: {'product_type': 'headphones', 'keywords': ['sony', 'xm 1000 series'], 'price_range': None, 'brands': ['sony'], 'features': [], 'sorting_preference': None, 'buy_it_now': True}
2025-05-13 14:04:23,058 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B08LW4P9K4 at 261.99 USD
2025-05-13 14:04:23,548 - DealFinderAI.AmazonScraperAgent - INFO - Gemini determined product is NOT relevant: amazon product b08lw4p9k4
2025-05-13 14:04:23,558 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B087QV671C at 149.0 USD
2025-05-13 14:04:24,376 - DealFinderAI.AmazonScraperAgent - INFO - Gemini determined product is NOT relevant: amazon product b087qv671c
2025-05-13 14:04:24,391 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B0863TXGM3 at 298.0 USD
2025-05-13 14:04:24,703 - DealFinderAI.AmazonScraperAgent - INFO - Gemini determined product is NOT relevant: amazon product b0863txgm3
2025-05-13 14:04:24,714 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B09XS7JWHH at 348.0 USD
2025-05-13 14:04:25,008 - DealFinderAI.AmazonScraperAgent - INFO - Gemini determined product is NOT relevant: amazon product b09xs7jwhh
2025-05-13 14:04:25,018 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B0CFT4N7T9 at 222.0 USD
2025-05-13 14:04:25,396 - DealFinderAI.AmazonScraperAgent - INFO - Gemini determined product is NOT relevant: amazon product b0cft4n7t9
2025-05-13 14:04:25,399 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B0CFSD4TSQ at 291.9 USD
2025-05-13 14:04:25,661 - DealFinderAI.AmazonScraperAgent - INFO - Gemini determined product is NOT relevant: amazon product b0cfsd4tsq
2025-05-13 14:04:25,668 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B0DGVTL886 at 379.95 USD
2025-05-13 14:04:25,922 - DealFinderAI.AmazonScraperAgent - INFO - Gemini determined product is NOT relevant: amazon product b0dgvtl886
2025-05-13 14:04:25,933 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B0CFSLNT3L at 222.99 USD
2025-05-13 14:04:26,730 - DealFinderAI.AmazonScraperAgent - INFO - Gemini determined product is NOT relevant: amazon product b0cfslnt3l
2025-05-13 14:04:26,733 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B0CWVX1GNX at 198.0 USD
2025-05-13 14:04:26,999 - DealFinderAI.AmazonScraperAgent - INFO - Gemini determined product is NOT relevant: amazon product b0cwvx1gnx
2025-05-13 14:04:27,001 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B000AJIF4E at 98.0 USD
2025-05-13 14:04:27,786 - DealFinderAI.AmazonScraperAgent - INFO - Gemini determined product is NOT relevant: amazon product b000ajif4e
2025-05-13 14:04:28,712 - DealFinderAI.AmazonScraperAgent - INFO - Returning 0 products after filtering
2025-05-13 14:04:28,713 - DealFinderAI.Controller - INFO - Amazon response content: {'source': 'Amazon', 'query': 'headphones sony xm 1000 series sony', 'products': []}
2025-05-13 14:04:28,714 - DealFinderAI.Controller - INFO - Amazon returned 0 products
2025-05-13 14:04:28,714 - DealFinderAI.WalmartScraperAgent - INFO - Searching Walmart for: {'product_type': 'headphones', 'keywords': ['sony', 'xm 1000 series'], 'price_range': None, 'brands': ['sony'], 'features': [], 'sorting_preference': None, 'buy_it_now': True}
2025-05-13 14:04:34,614 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 14:04:34,615 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Sony WH-1000XM5 The Best Wireless Noise Canceling Headphones, Black at 319.44 USD
2025-05-13 14:04:34,615 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Sony WH-1000XM5 The Best Wireless Noise Canceling Headphones, Black at 319.44 USD
2025-05-13 14:04:37,245 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 14:04:37,245 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Open Box Sony WH-1000XM4 Wireless Premium Noise Canceling Overhead Headphones with Mic for Phone Call and Alexa Voice Control, Black - at 234.99 USD
2025-05-13 14:04:37,246 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Open Box Sony WH-1000XM4 Wireless Premium Noise Canceling Overhead Headphones with Mic for Phone Call and Alexa Voice Control, Black - at 234.99 USD
2025-05-13 14:04:39,455 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 14:04:39,455 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Sony WH-1000XM5 The Best Wireless Noise Canceling Headphones, Black at 319.44 USD
2025-05-13 14:04:39,456 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Sony WH-1000XM5 The Best Wireless Noise Canceling Headphones, Black at 319.44 USD
2025-05-13 14:04:41,769 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 14:04:41,770 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Sony WH-1000XM4 Wireless Noise Canceling Over-the-Ear Headphones with Google Assistant - Black at 236.99 USD
2025-05-13 14:04:41,770 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Sony WH-1000XM4 Wireless Noise Canceling Over-the-Ear Headphones with Google Assistant - Black at 236.99 USD
2025-05-13 14:04:42,429 - DealFinderAI.GeminiAgent - ERROR - Error extracting product details: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-1.5-flash"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
  quota_value: 15
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 17
}
]
2025-05-13 14:04:42,430 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 14:04:42,430 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product:  at 0 USD
2025-05-13 14:04:42,430 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Unknown Product at 0.0 USD
2025-05-13 14:04:43,370 - DealFinderAI.Controller - INFO - Walmart returned 0 products
2025-05-13 14:04:43,371 - DealFinderAI.EbayScraperAgent - INFO - Searching eBay for: {'product_type': 'headphones', 'keywords': ['sony', 'xm 1000 series'], 'price_range': None, 'brands': ['sony'], 'features': [], 'sorting_preference': None, 'buy_it_now': True}
2025-05-13 14:04:44,945 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Sony WH-1000XM4 Noise-Cancelling Wireless Over-Ear Bluetooth Headphones White RE at 99.99 USD
2025-05-13 14:04:44,946 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Sony WH-1000XM4 Wireless Premium Noise Canceling Headphones Black at 123.99 USD
2025-05-13 14:04:44,947 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Sony WH-1000XM5 Headphones Blue Nigo x Victor Victor Popup Event Edition at 194.99 USD
2025-05-13 14:04:45,644 - DealFinderAI.Controller - INFO - eBay returned 0 products
2025-05-13 14:04:45,645 - DealFinderAI.Controller - INFO - Total products before aggregation: 0
2025-05-13 14:04:45,645 - DealFinderAI.ResultsAggregatorAgent - INFO - Aggregating results for query: find me sony xm 1000 series
2025-05-13 14:04:45,645 - DealFinderAI.ResultsAggregatorAgent - INFO - Found 3 results from various sources
2025-05-13 14:04:45,646 - DealFinderAI.ResultsAggregatorAgent - INFO - Source Amazon: 0 products
2025-05-13 14:04:45,646 - DealFinderAI.ResultsAggregatorAgent - INFO - Source Walmart: 0 products
2025-05-13 14:04:45,646 - DealFinderAI.ResultsAggregatorAgent - INFO - Source eBay: 0 products
2025-05-13 14:04:45,646 - DealFinderAI.ResultsAggregatorAgent - INFO - Total products extracted: 0
2025-05-13 14:04:45,646 - DealFinderAI.ResultsAggregatorAgent - WARNING - No products found in any source
2025-05-13 14:23:03,448 - DealFinderAI - INFO - Logging initialized
2025-05-13 14:23:03,448 - DealFinderAI.Main - INFO - Starting DealFinder AI
2025-05-13 14:23:03,449 - DealFinderAI.Main - INFO - Using LangChain implementation
2025-05-13 14:23:03,497 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-13 14:23:03,497 - DealFinderAI.Controller - INFO - Initialized scraper agents: ['amazon', 'walmart', 'ebay']
2025-05-13 14:23:03,497 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-13 14:23:03,497 - DealFinderAI.Controller - INFO - Initialized scraper agents: ['amazon', 'walmart', 'ebay']
2025-05-13 14:23:03,497 - DealFinderAI.Main - INFO - Web app using LangChain implementation with Gemini model
2025-05-13 14:25:23,287 - DealFinderAI - INFO - Logging initialized
2025-05-13 14:25:23,288 - DealFinderAI.Main - INFO - Starting DealFinder AI
2025-05-13 14:25:23,288 - DealFinderAI.Main - INFO - Using LangChain implementation
2025-05-13 14:25:23,329 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-13 14:25:23,329 - DealFinderAI.Controller - INFO - Initialized scraper agents: ['amazon', 'walmart', 'ebay']
2025-05-13 14:25:23,330 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-13 14:25:23,330 - DealFinderAI.Controller - INFO - Initialized scraper agents: ['amazon', 'walmart', 'ebay']
2025-05-13 14:25:23,330 - DealFinderAI.Main - INFO - Web app using LangChain implementation with Gemini model
2025-05-13 14:29:37,066 - DealFinderAI - INFO - Logging initialized
2025-05-13 14:29:37,067 - DealFinderAI.Main - INFO - Starting DealFinder AI
2025-05-13 14:29:37,067 - DealFinderAI.Main - INFO - Using LangChain implementation
2025-05-13 14:29:37,108 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-13 14:29:37,108 - DealFinderAI.Controller - INFO - Initialized scraper agents: ['amazon', 'walmart', 'ebay']
2025-05-13 14:29:37,108 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-13 14:29:37,108 - DealFinderAI.Controller - INFO - Initialized scraper agents: ['amazon', 'walmart', 'ebay']
2025-05-13 14:29:37,108 - DealFinderAI.Main - INFO - Web app using LangChain implementation with Gemini model
2025-05-13 14:29:55,838 - DealFinderAI.Controller - INFO - Processing user query: find me best deal on sony headphones
2025-05-13 14:29:55,838 - DealFinderAI.ChatMemoryAgent - INFO - Analyzing query: 'find me best deal on sony headphones' for conversation session_20250513142944_94641cab
2025-05-13 14:29:55,838 - DealFinderAI.ChatMemoryAgent - INFO - No product context available for this conversation
2025-05-13 14:29:55,838 - DealFinderAI.Controller - INFO - Analyze response: {'is_follow_up': False, 'focused_product': None, 'referenced_products': [], 'products': []}
2025-05-13 14:29:55,839 - DealFinderAI.Controller - INFO - Is follow-up? False
2025-05-13 14:29:55,839 - DealFinderAI.Controller - INFO - Referenced products: 0
2025-05-13 14:29:55,839 - DealFinderAI.Controller - INFO - Processing as new search query
2025-05-13 14:29:55,839 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: find me best deal on sony headphones
2025-05-13 14:29:57,026 - DealFinderAI.GeminiAgent - WARNING - Failed to parse Gemini response as JSON: ```json
{
  "product_type": "headphones",
  "keywords": ["sony", "headphones"],
  "price_range": null,
  "brands": ["Sony"],
  "features": [],
  "sorting_preference": "price_low_to_high",
  "buy_it_now": true
}
```

2025-05-13 14:29:57,026 - DealFinderAI.Controller - INFO - Parsed search parameters: {'product_type': 'headphones', 'keywords': ['sony', 'headphones'], 'price_range': None, 'brands': ['Sony'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-13 14:29:57,027 - DealFinderAI.AmazonScraperAgent - INFO - Searching Amazon for: {'product_type': 'headphones', 'keywords': ['sony', 'headphones'], 'price_range': None, 'brands': ['Sony'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-13 14:29:58,649 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B0BGVNXHNH at 2.99 USD
2025-05-13 14:29:58,649 - DealFinderAI.AmazonScraperAgent - INFO - Adding product: Amazon Product B0BGVNXHNH at 2.99 USD
2025-05-13 14:29:58,650 - DealFinderAI.AmazonScraperAgent - WARNING - Incomplete data for ASIN B004MMG380, falling back to Gemini extraction.
2025-05-13 14:30:02,326 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B004MMG380 at 0.0 USD
2025-05-13 14:30:02,326 - DealFinderAI.AmazonScraperAgent - INFO - Adding product: Amazon Product B004MMG380 at 0.0 USD
2025-05-13 14:30:02,335 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B009HW15UG at 8.95 USD
2025-05-13 14:30:02,336 - DealFinderAI.AmazonScraperAgent - INFO - Adding product: Amazon Product B009HW15UG at 8.95 USD
2025-05-13 14:30:02,344 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B00NJ2M43M at 10.99 USD
2025-05-13 14:30:02,344 - DealFinderAI.AmazonScraperAgent - INFO - Adding product: Amazon Product B00NJ2M43M at 10.99 USD
2025-05-13 14:30:02,348 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B07TB5Z58C at 14.99 USD
2025-05-13 14:30:02,348 - DealFinderAI.AmazonScraperAgent - INFO - Adding product: Amazon Product B07TB5Z58C at 14.99 USD
2025-05-13 14:30:03,479 - DealFinderAI.AmazonScraperAgent - INFO - Returning 5 products
2025-05-13 14:30:03,480 - DealFinderAI.Controller - INFO - Amazon response content: {'source': 'Amazon', 'query': 'headphones sony headphones Sony', 'products': [{'title': 'Amazon Product B0BGVNXHNH', 'price': 2.99, 'currency': 'USD', 'url': 'https://www.amazon.com/dp/B0BGVNXHNH', 'image_url': 'https://m.media-amazon.com/images/I/517b-vMJ0iL._AC_UY218_.jpg', 'rating': 2.8, 'reviews': 2, 'is_sponsored': False, 'is_prime': False, 'asin': 'B0BGVNXHNH', 'description': 'Official Headset Earbud Headphone Microphone Earpiece For Sony Playstation 4 PS4 (Original Version) (Renewed) 2.8 out of 5 stars 2  Price, product page$2.99$2.99 New Price: $9.99New Price: $9.99$9.99$7.99 delivery Fri, May 23 Or fastest delivery May 15 - 19 See options', 'source': 'Amazon'}, {'title': 'Amazon Product B004MMG380', 'price': 0.0, 'currency': 'USD', 'url': 'https://www.amazon.com/dp/B004MMG380', 'image_url': 'https://m.media-amazon.com/images/I/51vSBJ5pPpL._AC_UY218_.jpg', 'rating': 4.4, 'reviews': 772, 'is_sponsored': False, 'is_prime': False, 'asin': 'B004MMG380', 'description': 'SonyMDRZX300R.AE Outdoor Headband Headphones - Red 4.4 out of 5 stars 772  See options', 'source': 'Amazon'}, {'title': 'Amazon Product B009HW15UG', 'price': 8.95, 'currency': 'USD', 'url': 'https://www.amazon.com/dp/B009HW15UG', 'image_url': 'https://m.media-amazon.com/images/I/51LKP8UnrPL._AC_UY218_.jpg', 'rating': 3.4, 'reviews': 111, 'is_sponsored': False, 'is_prime': True, 'asin': 'B009HW15UG', 'description': 'Sony R800 / R800X EC250 Headphones Adaptor (1249-0456) 3.4 out of 5 stars 111  Price, product page$8.95$8.95 FREE delivery Sun, May 18 on $35 of items shipped by AmazonOr fastest delivery Thu, May 15 Add to cart', 'source': 'Amazon'}, {'title': 'Amazon Product B00NJ2M43M', 'price': 10.99, 'currency': 'USD', 'url': 'https://www.amazon.com/dp/B00NJ2M43M', 'image_url': 'https://m.media-amazon.com/images/I/416mZ6bkTyL._AC_UY218_.jpg', 'rating': 4.5, 'reviews': 122505, 'is_sponsored': False, 'is_prime': True, 'asin': 'B00NJ2M43M', 'description': 'SonyZX Series Wired On-Ear Headphones, White MDR-ZX110 4.5 out of 5 stars 122,505  3K+ bought in past monthPrice, product page$10.99$10.99 List: $19.99List: $19.99$19.99 FREE delivery Sun, May 18 on $35 of items shipped by AmazonOr fastest delivery Thu, May 15 Add to cartMore Buying Choices$3.50(3+ used & new offers)', 'source': 'Amazon'}, {'title': 'Amazon Product B07TB5Z58C', 'price': 14.99, 'currency': 'USD', 'url': 'https://www.amazon.com/dp/B07TB5Z58C', 'image_url': 'https://m.media-amazon.com/images/I/61SH9WHgRaL._AC_UY218_.jpg', 'rating': 4.4, 'reviews': 8, 'is_sponsored': False, 'is_prime': True, 'asin': 'B07TB5Z58C', 'description': 'Sony ZX Series Wired On-Ear Headphones - Blue (MDR-ZX310AP) 4.4 out of 5 stars 8  Price, product page$14.99$14.99 New Price: $19.99New Price: $19.99$19.99 FREE delivery Sun, May 18 on $35 of items shipped by AmazonOr fastest delivery Thu, May 15 See options', 'source': 'Amazon'}]}
2025-05-13 14:30:03,481 - DealFinderAI.Controller - INFO - Amazon returned 5 products
2025-05-13 14:30:03,481 - DealFinderAI.WalmartScraperAgent - INFO - Searching Walmart for: {'product_type': 'headphones', 'keywords': ['sony', 'headphones'], 'price_range': None, 'brands': ['Sony'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-13 14:30:05,233 - DealFinderAI.WalmartScraperAgent - INFO - Extracted 0 products from JSON data
2025-05-13 14:30:05,236 - DealFinderAI.WalmartScraperAgent - INFO - Found 9 product divs in HTML
2025-05-13 14:30:07,876 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 14:30:07,877 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Replacement Noise Isolation Silicone Soft Ear Buds Earplug Tips for Senso, TOZO, Sony, Zeus, Otium, Hussar Sport in Ear Headphones Wireless Earphones (Red, Small - 5 Pair) at 6.95 USD
2025-05-13 14:30:07,878 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Replacement Noise Isolation Silicone Soft Ear Buds Earplug Tips for Senso, TOZO, Sony, Zeus, Otium, Hussar Sport in Ear Headphones Wireless Earphones (Red, Small - 5 Pair) at 6.95 USD
2025-05-13 14:30:10,516 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 14:30:10,517 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: UrbanX R2 Wired in-Ear Headphones with Mic For Sony Xperia L3 with Tangle-Free Cord, Noise Isolating Earphones, Deep Bass, In Ear Bud Silicone Tips at 7.02 USD
2025-05-13 14:30:10,517 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: UrbanX R2 Wired in-Ear Headphones with Mic For Sony Xperia L3 with Tangle-Free Cord, Noise Isolating Earphones, Deep Bass, In Ear Bud Silicone Tips at 7.02 USD
2025-05-13 14:30:13,097 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 14:30:13,097 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: UrbanX R2 Wired in-Ear Headphones with Mic For Sony Xperia Z5 Premium Dual with Tangle-Free Cord, Noise Isolating Earphones, Deep Bass, In Ear Bud Silicone Tips at 7.02 USD
2025-05-13 14:30:13,097 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: UrbanX R2 Wired in-Ear Headphones with Mic For Sony Xperia Z5 Premium Dual with Tangle-Free Cord, Noise Isolating Earphones, Deep Bass, In Ear Bud Silicone Tips at 7.02 USD
2025-05-13 14:30:15,321 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 14:30:15,321 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Sony MDR-EX14AP Wired In-ear Earbud Headphones with Microphone, White at 7.88 USD
2025-05-13 14:30:15,322 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Sony MDR-EX14AP Wired In-ear Earbud Headphones with Microphone, White at 7.88 USD
2025-05-13 14:30:17,897 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 14:30:17,898 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Sony MDR-EX14AP Wired In-ear Earbud Headphones with Microphone, Black at 7.88 USD
2025-05-13 14:30:17,898 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Sony MDR-EX14AP Wired In-ear Earbud Headphones with Microphone, Black at 7.88 USD
2025-05-13 14:30:17,898 - DealFinderAI.WalmartScraperAgent - INFO - Extracted 5 products from HTML
2025-05-13 14:30:17,899 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Replacement Noise Isolation Silicone Soft Ear Buds Earplug Tips for Senso, TOZO, Sony, Zeus, Otium, Hussar Sport in Ear Headphones Wireless Earphones (Red, Small - 5 Pair) at 6.95 USD
2025-05-13 14:30:17,899 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: UrbanX R2 Wired in-Ear Headphones with Mic For Sony Xperia L3 with Tangle-Free Cord, Noise Isolating Earphones, Deep Bass, In Ear Bud Silicone Tips at 7.02 USD
2025-05-13 14:30:17,899 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: UrbanX R2 Wired in-Ear Headphones with Mic For Sony Xperia Z5 Premium Dual with Tangle-Free Cord, Noise Isolating Earphones, Deep Bass, In Ear Bud Silicone Tips at 7.02 USD
2025-05-13 14:30:17,899 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Sony MDR-EX14AP Wired In-ear Earbud Headphones with Microphone, White at 7.88 USD
2025-05-13 14:30:17,899 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Sony MDR-EX14AP Wired In-ear Earbud Headphones with Microphone, Black at 7.88 USD
2025-05-13 14:30:19,193 - DealFinderAI.WalmartScraperAgent - INFO - Returning 5 products from Walmart
2025-05-13 14:30:19,195 - DealFinderAI.Controller - INFO - Walmart returned 5 products
2025-05-13 14:30:19,195 - DealFinderAI.EbayScraperAgent - INFO - Searching eBay for: {'product_type': 'headphones', 'keywords': ['sony', 'headphones'], 'price_range': None, 'brands': ['Sony'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-13 14:30:20,398 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: 1Pcs Headphones Pads Cushion Replacement Ear For Sony MDR-7506 MDR-V6 MDR-CD at 4.54 USD
2025-05-13 14:30:20,398 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: 1Pcs Headphones Pads Cushion Replacement Ear For Sony MDR-7506 MDR-V6 MDR-CD at 4.54 USD
2025-05-13 14:30:20,400 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Sony MDREX15LP in-Ear Earbud Headphones, Black at 6.29 USD
2025-05-13 14:30:20,400 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Sony MDREX15LP in-Ear Earbud Headphones, Black at 6.29 USD
2025-05-13 14:30:20,400 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Sony MDREX14AP In-Ear Earbud Headphones with Mic (Black) at 7.25 USD
2025-05-13 14:30:20,400 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Sony MDREX14AP In-Ear Earbud Headphones with Mic (Black) at 7.25 USD
2025-05-13 14:30:20,401 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Sony In-Ear Earbud Headphones with Mic, Black/White - demo package at 2.99 USD
2025-05-13 14:30:20,401 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Sony In-Ear Earbud Headphones with Mic, Black/White - demo package at 2.99 USD
2025-05-13 14:30:20,402 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Sony WHRF400 RF BLACK Wireless Noise Reducing Home Theater Headphones at 49.95 USD
2025-05-13 14:30:20,402 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Sony WHRF400 RF BLACK Wireless Noise Reducing Home Theater Headphones at 49.95 USD
2025-05-13 14:30:21,212 - DealFinderAI.EbayScraperAgent - INFO - Returning 5 products from eBay
2025-05-13 14:30:21,214 - DealFinderAI.Controller - INFO - eBay returned 5 products
2025-05-13 14:30:21,214 - DealFinderAI.Controller - INFO - Total products before aggregation: 15
2025-05-13 14:30:21,214 - DealFinderAI.ResultsAggregatorAgent - INFO - Aggregating results for query: find me best deal on sony headphones
2025-05-13 14:30:21,214 - DealFinderAI.ResultsAggregatorAgent - INFO - Found 3 results from various sources
2025-05-13 14:30:21,214 - DealFinderAI.ResultsAggregatorAgent - INFO - Source Amazon: 5 products
2025-05-13 14:30:21,215 - DealFinderAI.ResultsAggregatorAgent - INFO - Source Walmart: 5 products
2025-05-13 14:30:21,215 - DealFinderAI.ResultsAggregatorAgent - INFO - Source eBay: 5 products
2025-05-13 14:30:21,215 - DealFinderAI.ResultsAggregatorAgent - INFO - Total products extracted: 15
2025-05-13 14:30:21,215 - DealFinderAI.ResultsAggregatorAgent - INFO - Ranking 15 products
2025-05-13 14:30:21,215 - DealFinderAI.ResultsAggregatorAgent - INFO - Sorted 15 products by score
2025-05-13 14:30:21,215 - DealFinderAI.ResultsAggregatorAgent - INFO - Returning 10 diversified products
2025-05-13 14:30:21,215 - DealFinderAI.ResultsAggregatorAgent - INFO - Products after ranking: 10
2025-05-13 14:30:21,216 - DealFinderAI.ResultsAggregatorAgent - INFO - Final products: 10
2025-05-13 14:30:21,216 - DealFinderAI.Controller - INFO - Products after aggregation: 10
2025-05-13 14:30:21,216 - DealFinderAI.ProductComparisonAgent - INFO - Comparing products for query: find me best deal on sony headphones
2025-05-13 14:30:21,216 - DealFinderAI.ProductComparisonAgent - INFO - Found 10 products to compare
2025-05-13 14:30:21,216 - DealFinderAI.ProductComparisonAgent - INFO - Grouping 10 products
2025-05-13 14:30:21,217 - DealFinderAI.ProductComparisonAgent - INFO - Created 0 product groups
2025-05-13 14:30:21,217 - DealFinderAI.ChatMemoryAgent - INFO - Storing context for conversation session_20250513142944_94641cab
2025-05-13 14:30:21,217 - DealFinderAI.ChatMemoryAgent - INFO - Storing 10 products for conversation session_20250513142944_94641cab
2025-05-13 14:30:21,218 - DealFinderAI.PresentationAgent - INFO - Preparing presentation for 10 products
2025-05-13 14:30:21,218 - DealFinderAI.PresentationAgent - INFO - Formatting 10 products for display
2025-05-13 14:30:21,218 - DealFinderAI.PresentationAgent - INFO - Product 1: Amazon Product B00NJ2M43M - Price: $10.99 - Source: Amazon
2025-05-13 14:30:21,218 - DealFinderAI.PresentationAgent - INFO - Product 2: 1Pcs Headphones Pads Cushion Replacement Ear For Sony MDR-7506 MDR-V6 MDR-CD - Price: $4.54 - Source: eBay
2025-05-13 14:30:21,219 - DealFinderAI.PresentationAgent - INFO - Product 3: Replacement Noise Isolation Silicone Soft Ear Buds Earplug Tips for Senso, TOZO, Sony, Zeus, Otium, Hussar Sport in Ear Headphones Wireless Earphones (Red, Small - 5 Pair) - Price: $6.95 - Source: Walmart
2025-05-13 14:30:21,219 - DealFinderAI.PresentationAgent - INFO - Product 4: Amazon Product B004MMG380 - Price: $0.00 - Source: Amazon
2025-05-13 14:30:21,219 - DealFinderAI.PresentationAgent - INFO - Product 5: Amazon Product B07TB5Z58C - Price: $14.99 - Source: Amazon
2025-05-13 14:30:21,219 - DealFinderAI.PresentationAgent - INFO - Product 6: Amazon Product B009HW15UG - Price: $8.95 - Source: Amazon
2025-05-13 14:30:21,219 - DealFinderAI.PresentationAgent - INFO - Product 7: Amazon Product B0BGVNXHNH - Price: $2.99 - Source: Amazon
2025-05-13 14:30:21,219 - DealFinderAI.PresentationAgent - INFO - Product 8: Sony WHRF400 RF BLACK Wireless Noise Reducing Home Theater Headphones - Price: $49.95 - Source: eBay
2025-05-13 14:30:21,220 - DealFinderAI.PresentationAgent - INFO - Product 9: Sony In-Ear Earbud Headphones with Mic, Black/White - demo package - Price: $2.99 - Source: eBay
2025-05-13 14:30:21,220 - DealFinderAI.PresentationAgent - INFO - Product 10: Sony MDREX15LP in-Ear Earbud Headphones, Black - Price: $6.29 - Source: eBay
2025-05-13 14:30:21,220 - DealFinderAI.ChatMemoryAgent - INFO - Storing context for conversation session_20250513142944_94641cab
2025-05-13 14:30:21,220 - DealFinderAI.ChatMemoryAgent - INFO - Storing 10 products for conversation session_20250513142944_94641cab
2025-05-13 14:30:21,220 - DealFinderAI.Controller - INFO - Successfully stored search results in memory
2025-05-13 14:32:01,566 - DealFinderAI.Controller - INFO - Processing user query: tell me more about the 8th product
2025-05-13 14:32:01,567 - DealFinderAI.ChatMemoryAgent - INFO - Analyzing query: 'tell me more about the 8th product' for conversation session_20250513142944_94641cab
2025-05-13 14:32:01,567 - DealFinderAI.ChatMemoryAgent - INFO - Found 10 products in memory
2025-05-13 14:32:01,570 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: 
        You are an AI helping to analyze if a user's query is a follow-up question about previously shown products, or if it's a completely new search.

        Previous products shown to the user:
        Product 1: Amazon Product B00NJ2M43M
Product 2: 1Pcs Headphones Pads Cushion Replacement Ear For Sony MDR-7506 MDR-V6 MDR-CD
Product 3: Replacement Noise Isolation Silicone Soft Ear Buds Earplug Tips for Senso, TOZO, Sony, Zeus, Otium, Hussar Sport in Ear Headphones Wireless Earphones (Red, Small - 5 Pair)
Product 4: Amazon Product B004MMG380
Product 5: Amazon Product B07TB5Z58C

        User's new query: "tell me more about the 8th product"

        Please analyze if this query is:
        1. A follow-up question about the previously shown products (e.g., asking for more details, comparing them, etc.)
        2. A completely new search (e.g., asking about different products, starting a new topic)

        Return your analysis in JSON format:
        {
            "is_new_search": true/false,
            "is_follow_up": true/false,
            "reasoning": "brief explanation of your decision",
            "referenced_product_indices": [list of 0-based indices of referenced products, if any]
        }
        
        Only return the JSON, with no additional text.
        
2025-05-13 14:32:02,520 - DealFinderAI.Controller - INFO - Analyze response: {'is_follow_up': False, 'focused_product': None, 'referenced_products': [], 'products': []}
2025-05-13 14:32:02,520 - DealFinderAI.Controller - INFO - Is follow-up? False
2025-05-13 14:32:02,520 - DealFinderAI.Controller - INFO - Referenced products: 0
2025-05-13 14:32:02,520 - DealFinderAI.Controller - INFO - Processing as new search query
2025-05-13 14:32:02,520 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: tell me more about the 8th product
2025-05-13 14:32:03,875 - DealFinderAI.GeminiAgent - WARNING - Failed to parse Gemini response as JSON: ```json
{
  "product_type": null,
  "keywords": [],
  "price_range": null,
  "brands": null,
  "features": null,
  "sorting_preference": null,
  "buy_it_now": null
}
```

2025-05-13 14:32:03,875 - DealFinderAI.Controller - INFO - Parsed search parameters: {'keywords': ['tell me more about the 8th product']}
2025-05-13 14:32:03,875 - DealFinderAI.AmazonScraperAgent - INFO - Searching Amazon for: {'keywords': ['tell me more about the 8th product']}
2025-05-13 14:32:05,278 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B07PN78BPW at 7.99 USD
2025-05-13 14:32:05,278 - DealFinderAI.AmazonScraperAgent - INFO - Adding product: Amazon Product B07PN78BPW at 7.99 USD
2025-05-13 14:32:05,280 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B0CN5RW9QC at 1.99 USD
2025-05-13 14:32:05,280 - DealFinderAI.AmazonScraperAgent - INFO - Adding product: Amazon Product B0CN5RW9QC at 1.99 USD
2025-05-13 14:32:05,280 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Tell Me A Story (TV Series) at 2.99 USD
2025-05-13 14:32:05,280 - DealFinderAI.AmazonScraperAgent - INFO - Adding product: Tell Me A Story (TV Series) at 2.99 USD
2025-05-13 14:32:05,282 - DealFinderAI.AmazonScraperAgent - WARNING - Incomplete data for ASIN B0B8P2JWZN, falling back to Gemini extraction.
2025-05-13 14:32:08,211 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B0B8P2JWZN at 0.0 USD
2025-05-13 14:32:08,211 - DealFinderAI.AmazonScraperAgent - INFO - Adding product: Amazon Product B0B8P2JWZN at 0.0 USD
2025-05-13 14:32:08,213 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B0BWPTL836 at 3.79 USD
2025-05-13 14:32:08,213 - DealFinderAI.AmazonScraperAgent - INFO - Adding product: Amazon Product B0BWPTL836 at 3.79 USD
2025-05-13 14:32:09,371 - DealFinderAI.AmazonScraperAgent - INFO - Returning 5 products
2025-05-13 14:32:09,372 - DealFinderAI.Controller - INFO - Amazon response content: {'source': 'Amazon', 'query': 'tell me more about the 8th product', 'products': [{'title': 'Amazon Product B07PN78BPW', 'price': 7.99, 'currency': 'USD', 'url': 'https://www.amazon.com/dp/B07PN78BPW', 'image_url': 'https://m.media-amazon.com/images/I/81i4ubaM5VL._AC_UY218_.jpg', 'rating': 4.5, 'reviews': 0, 'is_sponsored': False, 'is_prime': True, 'asin': 'B07PN78BPW', 'description': 'The Eighth Life: (for Brilka) The International Bestseller by Nino Haratischvili, Charlotte Collins , et al. | Oct 1, 20194.5 out of 5 stars 2,161  Kindle Price, product page$7.99$7.99 Digital List Price: $34.99Digital List Price: $34.99$34.99Available instantlyPaperback Price, product page$21.95$21.95 List: $28.00List: $28.00$28.00 FREE delivery Sun, May 18 on $35 of items shipped by AmazonOr fastest delivery Thu, May 15 More Buying Choices$8.26(22+ used & new offers)Audible Audiobook Price, product page$0.00$0.00 $30.70$30.70Free with Audible trialAvailable instantlyOther formats: Hardcover, Mass Market Paperback, Audio CD "They lent each other happiness. They lent each other the present, and gave each other memories for the future."Highlighted by 151 Kindle readers', 'source': 'Amazon'}, {'title': 'Amazon Product B0CN5RW9QC', 'price': 1.99, 'currency': 'USD', 'url': 'https://www.amazon.com/dp/B0CN5RW9QC', 'image_url': 'https://m.media-amazon.com/images/I/71LiTCCXaNL._AC_UY218_.jpg', 'rating': 0.0, 'reviews': 2023, 'is_sponsored': False, 'is_prime': False, 'asin': 'B0CN5RW9QC', 'description': 'Tell Me About It 2023 | CCPrime Video For $1.99$1.99 to rentFor $4.99 to buy  Starring: Asad Shan  and Ariya Larker Directed by: Suman Hanif', 'source': 'Amazon'}, {'title': 'Tell Me A Story (TV Series)', 'price': 2.99, 'currency': 'USD', 'url': 'https://www.amazon.com/dp/B0CNPXSCTB', 'image_url': 'https://m.media-amazon.com/images/I/81Kt86Ou8tL._AC_UY218_.jpg', 'rating': 0.0, 'reviews': 2018, 'is_sponsored': False, 'is_prime': False, 'asin': 'B0CNPXSCTB', 'description': 'Tell Me A Story (TV Series)  2018Prime Video For $2.99$2.99 to buy episodeFor $20.09 to buy season  Starring: Danielle Campbell , Paul Wesley , James Wolk , et al.Directed by: Jeff T. Thomas , Millicent Shelton , Solvan Naim , et al.', 'source': 'Amazon'}, {'title': 'Amazon Product B0B8P2JWZN', 'price': 0.0, 'currency': 'USD', 'url': 'https://www.amazon.com/dp/B0B8P2JWZN', 'image_url': 'https://m.media-amazon.com/images/I/81LO0j2Cx8L._AC_UY218_.jpg', 'rating': 3.4, 'reviews': 2023, 'is_sponsored': False, 'is_prime': False, 'asin': 'B0B8P2JWZN', 'description': 'Tell Me A Creepy Story 2023 | TV-MA | CC3.4 out of 5 stars 33  Prime Video Watch now: Free with adsOr $0.00 with a Prime membershipStarring: Conleth Hill , Joe Sims  and Laura Bayston Directed by: Samuel Dawe , Flix Dobaire , Stuart Graham , et al.', 'source': 'Amazon'}, {'title': 'Amazon Product B0BWPTL836', 'price': 3.79, 'currency': 'USD', 'url': 'https://www.amazon.com/dp/B0BWPTL836', 'image_url': 'https://m.media-amazon.com/images/I/91-IqSmJGNL._AC_UY218_.jpg', 'rating': 4.5, 'reviews': 2012, 'is_sponsored': False, 'is_prime': False, 'asin': 'B0BWPTL836', 'description': 'Katy Perry: Part of Me 2012 | PG | CC4.5 out of 5 stars 764  Prime Video For $3.79$3.79 to rentFor $16.29 to buy  Starring: Katy Perry Directed by: Dan Cutforth  and Jane Lipsitz', 'source': 'Amazon'}]}
2025-05-13 14:32:09,372 - DealFinderAI.Controller - INFO - Amazon returned 5 products
2025-05-13 14:32:09,373 - DealFinderAI.WalmartScraperAgent - INFO - Searching Walmart for: {'keywords': ['tell me more about the 8th product']}
2025-05-13 14:32:16,367 - DealFinderAI.WalmartScraperAgent - INFO - Extracted 0 products from JSON data
2025-05-13 14:32:16,368 - DealFinderAI.WalmartScraperAgent - INFO - Found 9 product divs in HTML
2025-05-13 14:32:19,192 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 14:32:19,192 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Ematic EWT816 - Tablet - Atom 1.3 GHz - Win 8.1 - 1 GB RAM - 16 GB - 8" IPS touchscreen 1280 x 800 - black at 39.9 USD
2025-05-13 14:32:19,192 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Ematic EWT816 - Tablet - Atom 1.3 GHz - Win 8.1 - 1 GB RAM - 16 GB - 8" IPS touchscreen 1280 x 800 - black at 39.9 USD
2025-05-13 14:32:21,409 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 14:32:21,409 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Fasiaou Fashion Alphabet Initial Letter Keychain Tassel Butterfly Pendant Key Ring for Purse Handbags Women Girl at 1.99 USD
2025-05-13 14:32:21,409 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Fasiaou Fashion Alphabet Initial Letter Keychain Tassel Butterfly Pendant Key Ring for Purse Handbags Women Girl at 1.99 USD
2025-05-13 14:32:23,569 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 14:32:23,570 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: ZENSTYLE 8 Ft Soccer Goal Durable Backyard Soccer Net Weatherproof Soccer Training Equipment White at 78.48 USD
2025-05-13 14:32:23,570 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: ZENSTYLE 8 Ft Soccer Goal Durable Backyard Soccer Net Weatherproof Soccer Training Equipment White at 78.48 USD
2025-05-13 14:32:26,413 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 14:32:26,413 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: 8th Birthday Sash and Tiara for Girls - Fabulous Glitter Sash + Fabulous Rhinestone Pink Premium Metal Tiara for Girls, 8th Birthday Gifts for Princess Party at 24.99 USD
2025-05-13 14:32:26,413 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: 8th Birthday Sash and Tiara for Girls - Fabulous Glitter Sash + Fabulous Rhinestone Pink Premium Metal Tiara for Girls, 8th Birthday Gifts for Princess Party at 24.99 USD
2025-05-13 14:32:29,484 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 14:32:29,484 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: 8th Birthday Sash and Tiara for Girls - Fabulous Glitter Sash + Stars Rhinestone Silver Premium Metal Tiara for Girls, 8th Birthday Gifts for Princess Party at 9.99 USD
2025-05-13 14:32:29,484 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: 8th Birthday Sash and Tiara for Girls - Fabulous Glitter Sash + Stars Rhinestone Silver Premium Metal Tiara for Girls, 8th Birthday Gifts for Princess Party at 9.99 USD
2025-05-13 14:32:29,484 - DealFinderAI.WalmartScraperAgent - INFO - Extracted 5 products from HTML
2025-05-13 14:32:29,484 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Ematic EWT816 - Tablet - Atom 1.3 GHz - Win 8.1 - 1 GB RAM - 16 GB - 8" IPS touchscreen 1280 x 800 - black at 39.9 USD
2025-05-13 14:32:29,484 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Fasiaou Fashion Alphabet Initial Letter Keychain Tassel Butterfly Pendant Key Ring for Purse Handbags Women Girl at 1.99 USD
2025-05-13 14:32:29,484 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: ZENSTYLE 8 Ft Soccer Goal Durable Backyard Soccer Net Weatherproof Soccer Training Equipment White at 78.48 USD
2025-05-13 14:32:29,484 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: 8th Birthday Sash and Tiara for Girls - Fabulous Glitter Sash + Fabulous Rhinestone Pink Premium Metal Tiara for Girls, 8th Birthday Gifts for Princess Party at 24.99 USD
2025-05-13 14:32:29,484 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: 8th Birthday Sash and Tiara for Girls - Fabulous Glitter Sash + Stars Rhinestone Silver Premium Metal Tiara for Girls, 8th Birthday Gifts for Princess Party at 9.99 USD
2025-05-13 14:32:30,909 - DealFinderAI.WalmartScraperAgent - INFO - Returning 5 products from Walmart
2025-05-13 14:32:30,910 - DealFinderAI.Controller - INFO - Walmart returned 5 products
2025-05-13 14:32:30,910 - DealFinderAI.EbayScraperAgent - INFO - Searching eBay for: {'keywords': ['tell me more about the 8th product']}
2025-05-13 14:32:32,463 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Tell Me More About That: Solving the Empathy Crisis One Conversation at - GOOD at 6.52 USD
2025-05-13 14:32:32,463 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Tell Me More About That: Solving the Empathy Crisis One Conversation at - GOOD at 6.52 USD
2025-05-13 14:32:32,464 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Tell Me More: Stories About the 12 Hardest Things I'm Learning to Say at 5.21 USD
2025-05-13 14:32:32,464 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Tell Me More: Stories About the 12 Hardest Things I'm Learning to Say at 5.21 USD
2025-05-13 14:32:32,464 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Tell Me More: Stories About the 12 Hardest Things I'm Lea - VERY GOOD at 3.98 USD
2025-05-13 14:32:32,464 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Tell Me More: Stories About the 12 Hardest Things I'm Lea - VERY GOOD at 3.98 USD
2025-05-13 14:32:32,465 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Tell Me ... How Does My Body Fit Together?: And More About the Human Body [Tell at 29.03 USD
2025-05-13 14:32:32,465 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Tell Me ... How Does My Body Fit Together?: And More About the Human Body [Tell at 29.03 USD
2025-05-13 14:32:32,466 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Tell Me More: Stories About the 12 Hardest Things I'm Learning to Say - GOOD at 4.13 USD
2025-05-13 14:32:32,466 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Tell Me More: Stories About the 12 Hardest Things I'm Learning to Say - GOOD at 4.13 USD
2025-05-13 14:32:33,277 - DealFinderAI.EbayScraperAgent - INFO - Returning 5 products from eBay
2025-05-13 14:32:33,277 - DealFinderAI.Controller - INFO - eBay returned 5 products
2025-05-13 14:32:33,277 - DealFinderAI.Controller - INFO - Total products before aggregation: 15
2025-05-13 14:32:33,277 - DealFinderAI.ResultsAggregatorAgent - INFO - Aggregating results for query: tell me more about the 8th product
2025-05-13 14:32:33,277 - DealFinderAI.ResultsAggregatorAgent - INFO - Found 3 results from various sources
2025-05-13 14:32:33,277 - DealFinderAI.ResultsAggregatorAgent - INFO - Source Amazon: 5 products
2025-05-13 14:32:33,277 - DealFinderAI.ResultsAggregatorAgent - INFO - Source Walmart: 5 products
2025-05-13 14:32:33,277 - DealFinderAI.ResultsAggregatorAgent - INFO - Source eBay: 5 products
2025-05-13 14:32:33,277 - DealFinderAI.ResultsAggregatorAgent - INFO - Total products extracted: 15
2025-05-13 14:32:33,277 - DealFinderAI.ResultsAggregatorAgent - INFO - Ranking 15 products
2025-05-13 14:32:33,277 - DealFinderAI.ResultsAggregatorAgent - INFO - Sorted 15 products by score
2025-05-13 14:32:33,277 - DealFinderAI.ResultsAggregatorAgent - INFO - Returning 10 diversified products
2025-05-13 14:32:33,277 - DealFinderAI.ResultsAggregatorAgent - INFO - Products after ranking: 10
2025-05-13 14:32:33,277 - DealFinderAI.ResultsAggregatorAgent - INFO - Final products: 10
2025-05-13 14:32:33,277 - DealFinderAI.Controller - INFO - Products after aggregation: 10
2025-05-13 14:32:33,277 - DealFinderAI.ProductComparisonAgent - INFO - Comparing products for query: tell me more about the 8th product
2025-05-13 14:32:33,277 - DealFinderAI.ProductComparisonAgent - INFO - Found 10 products to compare
2025-05-13 14:32:33,277 - DealFinderAI.ProductComparisonAgent - INFO - Grouping 10 products
2025-05-13 14:32:33,277 - DealFinderAI.ProductComparisonAgent - INFO - Created 0 product groups
2025-05-13 14:32:33,277 - DealFinderAI.ChatMemoryAgent - INFO - Storing context for conversation session_20250513142944_94641cab
2025-05-13 14:32:33,277 - DealFinderAI.ChatMemoryAgent - INFO - Storing 10 products for conversation session_20250513142944_94641cab
2025-05-13 14:32:33,277 - DealFinderAI.PresentationAgent - INFO - Preparing presentation for 10 products
2025-05-13 14:32:33,278 - DealFinderAI.PresentationAgent - INFO - Formatting 10 products for display
2025-05-13 14:32:33,278 - DealFinderAI.PresentationAgent - INFO - Product 1: Amazon Product B0BWPTL836 - Price: $3.79 - Source: Amazon
2025-05-13 14:32:33,278 - DealFinderAI.PresentationAgent - INFO - Product 2: Tell Me More: Stories About the 12 Hardest Things I'm Lea - VERY GOOD - Price: $3.98 - Source: eBay
2025-05-13 14:32:33,278 - DealFinderAI.PresentationAgent - INFO - Product 3: Fasiaou Fashion Alphabet Initial Letter Keychain Tassel Butterfly Pendant Key Ring for Purse Handbags Women Girl - Price: $1.99 - Source: Walmart
2025-05-13 14:32:33,278 - DealFinderAI.PresentationAgent - INFO - Product 4: Amazon Product B07PN78BPW - Price: $7.99 - Source: Amazon
2025-05-13 14:32:33,278 - DealFinderAI.PresentationAgent - INFO - Product 5: Amazon Product B0B8P2JWZN - Price: $0.00 - Source: Amazon
2025-05-13 14:32:33,278 - DealFinderAI.PresentationAgent - INFO - Product 6: Tell Me More: Stories About the 12 Hardest Things I'm Learning to Say - GOOD - Price: $4.13 - Source: eBay
2025-05-13 14:32:33,278 - DealFinderAI.PresentationAgent - INFO - Product 7: Tell Me More: Stories About the 12 Hardest Things I'm Learning to Say - Price: $5.21 - Source: eBay
2025-05-13 14:32:33,278 - DealFinderAI.PresentationAgent - INFO - Product 8: Tell Me More About That: Solving the Empathy Crisis One Conversation at - GOOD - Price: $6.52 - Source: eBay
2025-05-13 14:32:33,278 - DealFinderAI.PresentationAgent - INFO - Product 9: Tell Me ... How Does My Body Fit Together?: And More About the Human Body [Tell - Price: $29.03 - Source: eBay
2025-05-13 14:32:33,278 - DealFinderAI.PresentationAgent - INFO - Product 10: Amazon Product B0CN5RW9QC - Price: $1.99 - Source: Amazon
2025-05-13 14:32:33,278 - DealFinderAI.ChatMemoryAgent - INFO - Storing context for conversation session_20250513142944_94641cab
2025-05-13 14:32:33,278 - DealFinderAI.ChatMemoryAgent - INFO - Storing 10 products for conversation session_20250513142944_94641cab
2025-05-13 14:32:33,278 - DealFinderAI.Controller - INFO - Successfully stored search results in memory
2025-05-13 14:32:47,457 - DealFinderAI.Controller - INFO - Processing user query: Tell me more about product 1
2025-05-13 14:32:47,457 - DealFinderAI.ChatMemoryAgent - INFO - Analyzing query: 'Tell me more about product 1' for conversation session_20250513142944_94641cab
2025-05-13 14:32:47,457 - DealFinderAI.ChatMemoryAgent - INFO - Found 10 products in memory
2025-05-13 14:32:47,457 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: 
        You are an AI helping to analyze if a user's query is a follow-up question about previously shown products, or if it's a completely new search.

        Previous products shown to the user:
        Product 1: Amazon Product B0BWPTL836
Product 2: Tell Me More: Stories About the 12 Hardest Things I'm Lea - VERY GOOD
Product 3: Fasiaou Fashion Alphabet Initial Letter Keychain Tassel Butterfly Pendant Key Ring for Purse Handbags Women Girl
Product 4: Amazon Product B07PN78BPW
Product 5: Amazon Product B0B8P2JWZN

        User's new query: "Tell me more about product 1"

        Please analyze if this query is:
        1. A follow-up question about the previously shown products (e.g., asking for more details, comparing them, etc.)
        2. A completely new search (e.g., asking about different products, starting a new topic)

        Return your analysis in JSON format:
        {
            "is_new_search": true/false,
            "is_follow_up": true/false,
            "reasoning": "brief explanation of your decision",
            "referenced_product_indices": [list of 0-based indices of referenced products, if any]
        }
        
        Only return the JSON, with no additional text.
        
2025-05-13 14:32:48,690 - DealFinderAI.Controller - INFO - Analyze response: {'is_follow_up': True, 'focused_product': 0, 'referenced_products': [{'title': 'Amazon Product B0BWPTL836', 'price': 3.79, 'currency': 'USD', 'url': 'https://www.amazon.com/dp/B0BWPTL836', 'image_url': 'https://m.media-amazon.com/images/I/91-IqSmJGNL._AC_UY218_.jpg', 'rating': 4.5, 'reviews': 2012, 'is_sponsored': False, 'is_prime': False, 'asin': 'B0BWPTL836', 'description': 'Katy Perry: Part of Me 2012 | PG | CC4.5 out of 5 stars 764  Prime Video For $3.79$3.79 to rentFor $16.29 to buy  Starring: Katy Perry Directed by: Dan Cutforth  and Jane Lipsitz', 'source': 'Amazon', '_score': 89.621}], 'products': []}
2025-05-13 14:32:48,690 - DealFinderAI.Controller - INFO - Is follow-up? True
2025-05-13 14:32:48,690 - DealFinderAI.Controller - INFO - Referenced products: 1
2025-05-13 14:32:48,690 - DealFinderAI.Controller - INFO - Handling as follow-up question about 1 products
2025-05-13 14:32:48,690 - DealFinderAI.Controller - INFO - Handling follow-up question: Tell me more about product 1
2025-05-13 14:32:48,690 - DealFinderAI.Controller - INFO - Referenced products: 1
2025-05-13 14:32:48,690 - DealFinderAI.Controller - INFO - Follow-up for product: Amazon Product B0BWPTL836
2025-05-13 14:32:48,691 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: 
            I'm a shopping assistant helping a customer with product information.
            
            The customer previously searched for products and is now asking a follow-up question: "Tell me more about product 1"
            
            They're referring to this product:
            {
  "title": "Amazon Product B0BWPTL836",
  "price": 3.79,
  "currency": "USD",
  "url": "https://www.amazon.com/dp/B0BWPTL836",
  "image_url": "https://m.media-amazon.com/images/I/91-IqSmJGNL._AC_UY218_.jpg",
  "rating": 4.5,
  "reviews": 2012,
  "is_sponsored": false,
  "is_prime": false,
  "asin": "B0BWPTL836",
  "description": "Katy Perry: Part of Me 2012 | PG | CC4.5 out of 5 stars 764  Prime Video For $3.79$3.79 to rentFor $16.29 to buy  Starring: Katy Perry Directed by: Dan Cutforth  and Jane Lipsitz",
  "source": "Amazon",
  "_score": 89.621,
  "formatted_price": "$3.79"
}
            
            Please provide a helpful, conversational response addressing their question
            about this specific product. Include relevant details from the product information.
            
            Important guidelines:
            1. Always format prices as exact dollar amounts (e.g., "$3.79" not "$1")
            2. Format URLs as clickable HTML links <a href="url">url</a>
            3. If the product has a price field, be sure to mention the exact price as shown in the data
            4. Be accurate about the product details - don't make up information not in the data
            5. If the product is a "best deal", explain why it's a good value
            
            Your response should be conversational but accurate, highlighting the actual price 
            and key product features. Don't create fake discounts or savings.
            
2025-05-13 14:33:13,438 - DealFinderAI.Controller - INFO - Processing user query: find me best xm 1000 sony headphones
2025-05-13 14:33:13,438 - DealFinderAI.ChatMemoryAgent - INFO - Analyzing query: 'find me best xm 1000 sony headphones' for conversation session_20250513142944_94641cab
2025-05-13 14:33:13,438 - DealFinderAI.ChatMemoryAgent - INFO - Found 10 products in memory
2025-05-13 14:33:13,438 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: 
        You are an AI helping to analyze if a user's query is a follow-up question about previously shown products, or if it's a completely new search.

        Previous products shown to the user:
        Product 1: Amazon Product B0BWPTL836
Product 2: Tell Me More: Stories About the 12 Hardest Things I'm Lea - VERY GOOD
Product 3: Fasiaou Fashion Alphabet Initial Letter Keychain Tassel Butterfly Pendant Key Ring for Purse Handbags Women Girl
Product 4: Amazon Product B07PN78BPW
Product 5: Amazon Product B0B8P2JWZN

        User's new query: "find me best xm 1000 sony headphones"

        Please analyze if this query is:
        1. A follow-up question about the previously shown products (e.g., asking for more details, comparing them, etc.)
        2. A completely new search (e.g., asking about different products, starting a new topic)

        Return your analysis in JSON format:
        {
            "is_new_search": true/false,
            "is_follow_up": true/false,
            "reasoning": "brief explanation of your decision",
            "referenced_product_indices": [list of 0-based indices of referenced products, if any]
        }
        
        Only return the JSON, with no additional text.
        
2025-05-13 14:33:14,759 - DealFinderAI.Controller - INFO - Analyze response: {'is_follow_up': False, 'focused_product': None, 'referenced_products': [], 'products': []}
2025-05-13 14:33:14,759 - DealFinderAI.Controller - INFO - Is follow-up? False
2025-05-13 14:33:14,760 - DealFinderAI.Controller - INFO - Referenced products: 0
2025-05-13 14:33:14,760 - DealFinderAI.Controller - INFO - Processing as new search query
2025-05-13 14:33:14,760 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: find me best xm 1000 sony headphones
2025-05-13 14:33:16,033 - DealFinderAI.GeminiAgent - WARNING - Failed to parse Gemini response as JSON: ```json
{
  "product_type": "headphones",
  "keywords": ["xm 1000", "sony"],
  "price_range": null,
  "brands": ["sony"],
  "features": [],
  "sorting_preference": "rating",
  "buy_it_now": true
}
```

2025-05-13 14:33:16,034 - DealFinderAI.Controller - INFO - Parsed search parameters: {'product_type': 'headphones', 'keywords': ['xm 1000', 'sony'], 'price_range': None, 'brands': ['sony'], 'features': [], 'sorting_preference': 'rating', 'buy_it_now': True}
2025-05-13 14:33:16,034 - DealFinderAI.AmazonScraperAgent - INFO - Searching Amazon for: {'product_type': 'headphones', 'keywords': ['xm 1000', 'sony'], 'price_range': None, 'brands': ['sony'], 'features': [], 'sorting_preference': 'rating', 'buy_it_now': True}
2025-05-13 14:33:17,722 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B0863TXGM3 at 298.0 USD
2025-05-13 14:33:17,722 - DealFinderAI.AmazonScraperAgent - INFO - Adding product: Amazon Product B0863TXGM3 at 298.0 USD
2025-05-13 14:33:17,724 - DealFinderAI.AmazonScraperAgent - WARNING - Incomplete data for ASIN B07H2DGZJR, falling back to Gemini extraction.
2025-05-13 14:33:20,846 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B07H2DGZJR at 0.0 USD
2025-05-13 14:33:20,846 - DealFinderAI.AmazonScraperAgent - INFO - Adding product: Amazon Product B07H2DGZJR at 0.0 USD
2025-05-13 14:33:20,848 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B08GKVKJQJ at 298.0 USD
2025-05-13 14:33:20,848 - DealFinderAI.AmazonScraperAgent - INFO - Adding product: Amazon Product B08GKVKJQJ at 298.0 USD
2025-05-13 14:33:20,850 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B08JWTSP24 at 329.99 USD
2025-05-13 14:33:20,850 - DealFinderAI.AmazonScraperAgent - INFO - Adding product: Amazon Product B08JWTSP24 at 329.99 USD
2025-05-13 14:33:20,852 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B08GVBS97Z at 298.0 USD
2025-05-13 14:33:20,852 - DealFinderAI.AmazonScraperAgent - INFO - Adding product: Amazon Product B08GVBS97Z at 298.0 USD
2025-05-13 14:33:21,918 - DealFinderAI.AmazonScraperAgent - INFO - Returning 5 products
2025-05-13 14:33:21,919 - DealFinderAI.Controller - INFO - Amazon response content: {'source': 'Amazon', 'query': 'headphones xm 1000 sony sony', 'products': [{'title': 'Amazon Product B0863TXGM3', 'price': 298.0, 'currency': 'USD', 'url': 'https://www.amazon.com/dp/B0863TXGM3', 'image_url': 'https://m.media-amazon.com/images/I/61oqO1AMbdL._AC_UY218_.jpg', 'rating': 4.6, 'reviews': 59730, 'is_sponsored': False, 'is_prime': False, 'asin': 'B0863TXGM3', 'description': 'SonyWH-1000XM4 Wireless Premium Noise Canceling Overhead Headphones with Mic for Phone-Call and Alexa Voice Control, Black WH1000XM4 4.6 out of 5 stars 59,730  4K+ bought in past monthPrice, product page$298.00$298.00 List: $348.00List: $348.00$348.00FREE delivery Tomorrow, May 14  Alexa Built-in Alexa Built-inAlexa Built-in devices let you talk directly to Alexa, allowing you to play music, control your smart home, get news, weather, and more using your voice. Learn more Add to cartMore Buying Choices$180.06(17+ used & new offers)', 'source': 'Amazon'}, {'title': 'Amazon Product B07H2DGZJR', 'price': 0.0, 'currency': 'USD', 'url': 'https://www.amazon.com/dp/B07H2DGZJR', 'image_url': 'https://m.media-amazon.com/images/I/51ScatQvIkL._AC_UY218_.jpg', 'rating': 4.6, 'reviews': 6791, 'is_sponsored': False, 'is_prime': False, 'asin': 'B07H2DGZJR', 'description': 'SonyWH-1000XM3 Wireless Noise canceling Stereo Headset(International Version/Seller Warrant) (Silver) 4.6 out of 5 stars 6,791  See optionsNo featured offers available$359.55(4 used & new offers)', 'source': 'Amazon'}, {'title': 'Amazon Product B08GKVKJQJ', 'price': 298.0, 'currency': 'USD', 'url': 'https://www.amazon.com/dp/B08GKVKJQJ', 'image_url': 'https://m.media-amazon.com/images/I/51Jpv8QA4QL._AC_UY218_.jpg', 'rating': 4.6, 'reviews': 1438, 'is_sponsored': False, 'is_prime': True, 'asin': 'B08GKVKJQJ', 'description': 'SonyWH-1000XM4 Wireless Noise Canceling Over-Ear Headphones (Silver) Bundle with 10000 mAh Ultra-Portable LED Display Wireless Quick Charge Battery Bank (Black) (2 Items) 4.6 out of 5 stars 1,438  Price, product page$298.00$298.00 FREE delivery Mon, May 19Or fastest delivery Sat, May 17Only 18 left in stock - order soon.Add to cart', 'source': 'Amazon'}, {'title': 'Amazon Product B08JWTSP24', 'price': 329.99, 'currency': 'USD', 'url': 'https://www.amazon.com/dp/B08JWTSP24', 'image_url': 'https://m.media-amazon.com/images/I/61GXOMkhgEL._AC_UY218_.jpg', 'rating': 4.6, 'reviews': 499, 'is_sponsored': False, 'is_prime': True, 'asin': 'B08JWTSP24', 'description': 'SonyWH-1000XM4 Wireless Industry Leading Noise Cancelling Over-Ear Headphones with Mic for Hands Free Calling and Alexa, Black WH-1000XM4/B Bundle w/Case + Deco Gear Portable Charger + Gym Bag 4.6 out of 5 stars 499  Price, product page$329.99$329.99 FREE delivery May 16 - 20Or fastest delivery Tomorrow, May 14Add to cart', 'source': 'Amazon'}, {'title': 'Amazon Product B08GVBS97Z', 'price': 298.0, 'currency': 'USD', 'url': 'https://www.amazon.com/dp/B08GVBS97Z', 'image_url': 'https://m.media-amazon.com/images/I/51cEIlw5HoL._AC_UY218_.jpg', 'rating': 4.3, 'reviews': 151, 'is_sponsored': False, 'is_prime': False, 'asin': 'B08GVBS97Z', 'description': 'SonyWH-1000XM4 Wireless Noise Canceling Over-Ear Headphones (Silver) Bundle with Headphone Hanger Mount (2 Items) 4.3 out of 5 stars 151  Price, product page$298.00$298.00FREE delivery Tomorrow, May 14Add to cartMore Buying Choices$220.72(2 used & new offers)', 'source': 'Amazon'}]}
2025-05-13 14:33:21,920 - DealFinderAI.Controller - INFO - Amazon returned 5 products
2025-05-13 14:33:21,921 - DealFinderAI.WalmartScraperAgent - INFO - Searching Walmart for: {'product_type': 'headphones', 'keywords': ['xm 1000', 'sony'], 'price_range': None, 'brands': ['sony'], 'features': [], 'sorting_preference': 'rating', 'buy_it_now': True}
2025-05-13 14:33:24,903 - DealFinderAI.WalmartScraperAgent - INFO - Extracted 0 products from JSON data
2025-05-13 14:33:24,905 - DealFinderAI.WalmartScraperAgent - INFO - Found 9 product divs in HTML
2025-05-13 14:33:27,507 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 14:33:27,507 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Sony WH-1000XM5 The Best Wireless Noise Canceling Headphones, Black at 319.44 USD
2025-05-13 14:33:27,507 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Sony WH-1000XM5 The Best Wireless Noise Canceling Headphones, Black at 319.44 USD
2025-05-13 14:33:30,220 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 14:33:30,220 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Open Box Sony WH-1000XM4 Wireless Premium Noise Canceling Overhead Headphones with Mic for Phone Call and Alexa Voice Control, Black - at 234.99 USD
2025-05-13 14:33:30,220 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Open Box Sony WH-1000XM4 Wireless Premium Noise Canceling Overhead Headphones with Mic for Phone Call and Alexa Voice Control, Black - at 234.99 USD
2025-05-13 14:33:32,871 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 14:33:32,871 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Ultimaxx Essential Sony WH-1000XM5 Noise-Canceling Wireless Over-Ear Headphones Bundle (Blue) - Includes: Water-Resistant Gadget Backpack & More (7pc Bundle) at 329.95 USD
2025-05-13 14:33:32,871 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Ultimaxx Essential Sony WH-1000XM5 Noise-Canceling Wireless Over-Ear Headphones Bundle (Blue) - Includes: Water-Resistant Gadget Backpack & More (7pc Bundle) at 329.95 USD
2025-05-13 14:33:35,114 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 14:33:35,114 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Sony WH-1000XM4 Wireless Noise Canceling Over-the-Ear Headphones with Google Assistant - Black at 236.99 USD
2025-05-13 14:33:35,114 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Sony WH-1000XM4 Wireless Noise Canceling Over-the-Ear Headphones with Google Assistant - Black at 236.99 USD
2025-05-13 14:33:37,252 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 14:33:37,252 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Sony WH-1000XM4 Wireless Noise Canceling Over-the-Ear Headphones with Google Assistant  Silver at 236.99 USD
2025-05-13 14:33:37,252 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Sony WH-1000XM4 Wireless Noise Canceling Over-the-Ear Headphones with Google Assistant  Silver at 236.99 USD
2025-05-13 14:33:37,253 - DealFinderAI.WalmartScraperAgent - INFO - Extracted 5 products from HTML
2025-05-13 14:33:37,253 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Sony WH-1000XM5 The Best Wireless Noise Canceling Headphones, Black at 319.44 USD
2025-05-13 14:33:37,253 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Open Box Sony WH-1000XM4 Wireless Premium Noise Canceling Overhead Headphones with Mic for Phone Call and Alexa Voice Control, Black - at 234.99 USD
2025-05-13 14:33:37,253 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Ultimaxx Essential Sony WH-1000XM5 Noise-Canceling Wireless Over-Ear Headphones Bundle (Blue) - Includes: Water-Resistant Gadget Backpack & More (7pc Bundle) at 329.95 USD
2025-05-13 14:33:37,253 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Sony WH-1000XM4 Wireless Noise Canceling Over-the-Ear Headphones with Google Assistant - Black at 236.99 USD
2025-05-13 14:33:37,254 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Sony WH-1000XM4 Wireless Noise Canceling Over-the-Ear Headphones with Google Assistant  Silver at 236.99 USD
2025-05-13 14:33:38,067 - DealFinderAI.WalmartScraperAgent - INFO - Returning 5 products from Walmart
2025-05-13 14:33:38,068 - DealFinderAI.Controller - INFO - Walmart returned 5 products
2025-05-13 14:33:38,068 - DealFinderAI.EbayScraperAgent - INFO - Searching eBay for: {'product_type': 'headphones', 'keywords': ['xm 1000', 'sony'], 'price_range': None, 'brands': ['sony'], 'features': [], 'sorting_preference': 'rating', 'buy_it_now': True}
2025-05-13 14:33:39,472 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Sony WH-1000XM4 Wireless Bluetooth Noise Canceling Over Ear Headphones - Black at 119.99 USD
2025-05-13 14:33:39,472 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Sony WH-1000XM4 Wireless Bluetooth Noise Canceling Over Ear Headphones - Black at 119.99 USD
2025-05-13 14:33:39,473 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Sony WH-1000XM4 Wireless Industry Leading Noise Canceling Bluetooth Headphones at 298.0 USD
2025-05-13 14:33:39,473 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Sony WH-1000XM4 Wireless Industry Leading Noise Canceling Bluetooth Headphones at 298.0 USD
2025-05-13 14:33:39,474 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Sony WH-1000XM4 Wireless Noise-Cancelling Over-the-Ear Headphones Blue [DJ1300] at 79.99 USD
2025-05-13 14:33:39,474 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Sony WH-1000XM4 Wireless Noise-Cancelling Over-the-Ear Headphones Blue [DJ1300] at 79.99 USD
2025-05-13 14:33:39,475 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Sony WF-1000XM4 Wireless Headphones - Black - at 169.99 USD
2025-05-13 14:33:39,475 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Sony WF-1000XM4 Wireless Headphones - Black - at 169.99 USD
2025-05-13 14:33:39,477 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Sony WH-1000XM5/B Wireless Industry Leading Noise Canceling Bluetooth Headphones at 179.99 USD
2025-05-13 14:33:39,477 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Sony WH-1000XM5/B Wireless Industry Leading Noise Canceling Bluetooth Headphones at 179.99 USD
2025-05-13 14:33:40,206 - DealFinderAI.EbayScraperAgent - INFO - Returning 5 products from eBay
2025-05-13 14:33:40,208 - DealFinderAI.Controller - INFO - eBay returned 5 products
2025-05-13 14:33:40,209 - DealFinderAI.Controller - INFO - Total products before aggregation: 15
2025-05-13 14:33:40,209 - DealFinderAI.ResultsAggregatorAgent - INFO - Aggregating results for query: find me best xm 1000 sony headphones
2025-05-13 14:33:40,209 - DealFinderAI.ResultsAggregatorAgent - INFO - Found 3 results from various sources
2025-05-13 14:33:40,209 - DealFinderAI.ResultsAggregatorAgent - INFO - Source Amazon: 5 products
2025-05-13 14:33:40,210 - DealFinderAI.ResultsAggregatorAgent - INFO - Source Walmart: 5 products
2025-05-13 14:33:40,210 - DealFinderAI.ResultsAggregatorAgent - INFO - Source eBay: 5 products
2025-05-13 14:33:40,210 - DealFinderAI.ResultsAggregatorAgent - INFO - Total products extracted: 15
2025-05-13 14:33:40,210 - DealFinderAI.ResultsAggregatorAgent - INFO - Ranking 15 products
2025-05-13 14:33:40,210 - DealFinderAI.ResultsAggregatorAgent - INFO - Sorted 15 products by score
2025-05-13 14:33:40,210 - DealFinderAI.ResultsAggregatorAgent - INFO - Returning 10 diversified products
2025-05-13 14:33:40,210 - DealFinderAI.ResultsAggregatorAgent - INFO - Products after ranking: 10
2025-05-13 14:33:40,210 - DealFinderAI.ResultsAggregatorAgent - INFO - Final products: 10
2025-05-13 14:33:40,211 - DealFinderAI.Controller - INFO - Products after aggregation: 10
2025-05-13 14:33:40,211 - DealFinderAI.ProductComparisonAgent - INFO - Comparing products for query: find me best xm 1000 sony headphones
2025-05-13 14:33:40,211 - DealFinderAI.ProductComparisonAgent - INFO - Found 10 products to compare
2025-05-13 14:33:40,211 - DealFinderAI.ProductComparisonAgent - INFO - Grouping 10 products
2025-05-13 14:33:40,211 - DealFinderAI.ProductComparisonAgent - INFO - Created 1 product groups
2025-05-13 14:33:40,212 - DealFinderAI.ProductComparisonAgent - INFO - Analyzing product group with 3 items
2025-05-13 14:33:40,212 - DealFinderAI.ProductComparisonAgent - INFO - Best deal: Sony WH-1000XM4 Wireless Noise-Cancelling Over-the-Ear Headphones Blue [DJ1300] at $79.99
2025-05-13 14:33:40,212 - DealFinderAI.ProductComparisonAgent - INFO - Savings: $65.00 (44.8%)
2025-05-13 14:33:40,212 - DealFinderAI.ChatMemoryAgent - INFO - Storing context for conversation session_20250513142944_94641cab
2025-05-13 14:33:40,212 - DealFinderAI.ChatMemoryAgent - INFO - Storing 10 products for conversation session_20250513142944_94641cab
2025-05-13 14:33:40,213 - DealFinderAI.PresentationAgent - INFO - Preparing presentation for 10 products
2025-05-13 14:33:40,213 - DealFinderAI.ChatMemoryAgent - INFO - Storing context for conversation session_20250513142944_94641cab
2025-05-13 14:33:40,214 - DealFinderAI.ChatMemoryAgent - INFO - Storing 10 products for conversation session_20250513142944_94641cab
2025-05-13 14:33:40,214 - DealFinderAI.Controller - INFO - Successfully stored search results in memory
2025-05-13 14:35:29,495 - DealFinderAI.Controller - INFO - Processing user query: Which one has the best reviews?
2025-05-13 14:35:29,496 - DealFinderAI.ChatMemoryAgent - INFO - Analyzing query: 'Which one has the best reviews?' for conversation session_20250513142944_94641cab
2025-05-13 14:35:29,496 - DealFinderAI.ChatMemoryAgent - INFO - Found 10 products in memory
2025-05-13 14:35:29,498 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: 
        You are an AI helping to analyze if a user's query is a follow-up question about previously shown products, or if it's a completely new search.

        Previous products shown to the user:
        Product 1: Amazon Product B07H2DGZJR
Product 2: Sony WH-1000XM4 Wireless Noise-Cancelling Over-the-Ear Headphones Blue [DJ1300]
Product 3: Open Box Sony WH-1000XM4 Wireless Premium Noise Canceling Overhead Headphones with Mic for Phone Call and Alexa Voice Control, Black -
Product 4: Amazon Product B08GKVKJQJ
Product 5: Amazon Product B0863TXGM3

        User's new query: "Which one has the best reviews?"

        Please analyze if this query is:
        1. A follow-up question about the previously shown products (e.g., asking for more details, comparing them, etc.)
        2. A completely new search (e.g., asking about different products, starting a new topic)

        Return your analysis in JSON format:
        {
            "is_new_search": true/false,
            "is_follow_up": true/false,
            "reasoning": "brief explanation of your decision",
            "referenced_product_indices": [list of 0-based indices of referenced products, if any]
        }
        
        Only return the JSON, with no additional text.
        
2025-05-13 14:35:30,855 - DealFinderAI.Controller - INFO - Analyze response: {'is_follow_up': True, 'focused_product': 0, 'referenced_products': [{'title': 'Amazon Product B07H2DGZJR', 'price': 0.0, 'currency': 'USD', 'url': 'https://www.amazon.com/dp/B07H2DGZJR', 'image_url': 'https://m.media-amazon.com/images/I/51ScatQvIkL._AC_UY218_.jpg', 'rating': 4.6, 'reviews': 6791, 'is_sponsored': False, 'is_prime': False, 'asin': 'B07H2DGZJR', 'description': 'SonyWH-1000XM3 Wireless Noise canceling Stereo Headset(International Version/Seller Warrant) (Silver) 4.6 out of 5 stars 6,791  See optionsNo featured offers available$359.55(4 used & new offers)', 'source': 'Amazon', '_score': 91.0}, {'title': 'Sony WH-1000XM4 Wireless Noise-Cancelling Over-the-Ear Headphones Blue [DJ1300]', 'price': 79.99, 'shipping': 0.0, 'total_price': 79.99, 'is_free_shipping': True, 'currency': 'USD', 'url': 'https://www.ebay.com/itm/405861055592?_skw=headphones+xm+1000+sony+sony&epid=14041626797&itmmeta=01JV5ERZRMSYFMPNF7EY3SQP5H&hash=item5e7f343c68%3Ag%3AkboAAOSweJ1oIquH&itmprp=enc%3AAQAKAAABAFkggFvd1GGDu0w3yXCmi1dKZfjgfzFwowADp69u%2B40%2FOF1Uof8nK5ILrQ6uxcZUuoTO8ZZIie56UwtGWABiwoFPrlHUmeY7BiALwBNzRvU5hF8g4yAk%2BgVvCZBAljhea1CUkPJnlQRHp%2BXb6qLwsMl7eBh0UiLWS9S%2FRomy3f%2BWRrJu%2FCdiDRHHRcsZkhey%2Fa1PHTXsH2HB9%2BPyqji%2B2v%2BXn3n8BfOVPyCigzpNSGchgGc1yR2VZB%2BsrvoV1rbYefkKWL3vBcQk84cWYd5D2VzCeX7XCG0qOYfFvO1L1miWYyqpMo0wcO7%2FRbjHA7udtlKr6bzuBEaVHWd2KaH3ujA%3D%7Ctkp%3ABFBMwPzjrtll&keyword=headphones+xm+1000+sony+sony&sacat=0&relatedSearch=true&LH_BIN=1', 'image_url': '', 'is_sponsored': False, 'condition': 'Pre-Owned', 'listing_type': 'Buy It Now', 'seller_rating': 97.8, 'item_id': '405861055592', 'description': 'Pre-Owned', 'source': 'eBay', '_score': 42.001000000000005, 'effective_price': 79.99}, {'title': 'Open Box Sony WH-1000XM4 Wireless Premium Noise Canceling Overhead Headphones with Mic for Phone Call and Alexa Voice Control, Black -', 'price': 234.99, 'currency': 'USD', 'url': 'https://www.walmart.com/ip/Open-Box-Sony-WH-1000XM4-Wireless-Premium-Noise-Canceling-Overhead-Headphones-with-Mic-for-Phone-Call-and-Alexa-Voice-Control-Black/1353592159?conditionGroupCode=3&classType=REGULAR&adsRedirect=true', 'image_url': 'https://i5.walmartimages.com/seo/Open-Box-Sony-WH-1000XM4-Wireless-Premium-Noise-Canceling-Overhead-Headphones-with-Mic-for-Phone-Call-and-Alexa-Voice-Control-Black_fd9dd488-7d8e-4486-a42a-359e67098c42.53e850a44af23e02b4b9a2ee47dfeae4.jpeg?odnHeight=580&odnWidth=580&odnBg=FFFFFF', 'rating': 0.0, 'reviews': 0, 'is_sponsored': False, 'is_pickup_today': False, 'product_id': '79G98C4QRUIV', 'description': '', 'source': 'Walmart', '_score': 6.500999999999998, 'effective_price': 234.99}, {'title': 'Amazon Product B08GKVKJQJ', 'price': 298.0, 'currency': 'USD', 'url': 'https://www.amazon.com/dp/B08GKVKJQJ', 'image_url': 'https://m.media-amazon.com/images/I/51Jpv8QA4QL._AC_UY218_.jpg', 'rating': 4.6, 'reviews': 1438, 'is_sponsored': False, 'is_prime': True, 'asin': 'B08GKVKJQJ', 'description': 'SonyWH-1000XM4 Wireless Noise Canceling Over-Ear Headphones (Silver) Bundle with 10000 mAh Ultra-Portable LED Display Wireless Quick Charge Battery Bank (Black) (2 Items) 4.6 out of 5 stars 1,438  Price, product page$298.00$298.00 FREE delivery Mon, May 19Or fastest delivery Sat, May 17Only 18 left in stock - order soon.Add to cart', 'source': 'Amazon', '_score': 69.2}, {'title': 'Amazon Product B0863TXGM3', 'price': 298.0, 'currency': 'USD', 'url': 'https://www.amazon.com/dp/B0863TXGM3', 'image_url': 'https://m.media-amazon.com/images/I/61oqO1AMbdL._AC_UY218_.jpg', 'rating': 4.6, 'reviews': 59730, 'is_sponsored': False, 'is_prime': False, 'asin': 'B0863TXGM3', 'description': 'SonyWH-1000XM4 Wireless Premium Noise Canceling Overhead Headphones with Mic for Phone-Call and Alexa Voice Control, Black WH1000XM4 4.6 out of 5 stars 59,730  4K+ bought in past monthPrice, product page$298.00$298.00 List: $348.00List: $348.00$348.00FREE delivery Tomorrow, May 14  Alexa Built-in Alexa Built-inAlexa Built-in devices let you talk directly to Alexa, allowing you to play music, control your smart home, get news, weather, and more using your voice. Learn more Add to cartMore Buying Choices$180.06(17+ used & new offers)', 'source': 'Amazon', '_score': 61.2}], 'products': []}
2025-05-13 14:35:30,856 - DealFinderAI.Controller - INFO - Is follow-up? True
2025-05-13 14:35:30,856 - DealFinderAI.Controller - INFO - Referenced products: 5
2025-05-13 14:35:30,857 - DealFinderAI.Controller - INFO - Handling as follow-up question about 5 products
2025-05-13 14:35:30,857 - DealFinderAI.Controller - INFO - Handling follow-up question: Which one has the best reviews?
2025-05-13 14:35:30,857 - DealFinderAI.Controller - INFO - Referenced products: 5
2025-05-13 14:35:30,857 - DealFinderAI.Controller - INFO - Follow-up for product: Amazon Product B07H2DGZJR
2025-05-13 14:35:30,858 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: 
            I'm a shopping assistant helping a customer with product information.
            
            The customer previously searched for products and is now asking a follow-up question: "Which one has the best reviews?"
            
            They're referring to this product:
            {
  "title": "Amazon Product B07H2DGZJR",
  "price": 0.0,
  "currency": "USD",
  "url": "https://www.amazon.com/dp/B07H2DGZJR",
  "image_url": "https://m.media-amazon.com/images/I/51ScatQvIkL._AC_UY218_.jpg",
  "rating": 4.6,
  "reviews": 6791,
  "is_sponsored": false,
  "is_prime": false,
  "asin": "B07H2DGZJR",
  "description": "SonyWH-1000XM3 Wireless Noise canceling Stereo Headset(International Version/Seller Warrant) (Silver) 4.6 out of 5 stars 6,791  See optionsNo featured offers available$359.55(4 used & new offers)",
  "source": "Amazon",
  "_score": 91.0,
  "formatted_price": "$0.00"
}
            
            Please provide a helpful, conversational response addressing their question
            about this specific product. Include relevant details from the product information.
            
            Important guidelines:
            1. Always format prices as exact dollar amounts (e.g., "$0.00" not "$1")
            2. Format URLs as clickable HTML links <a href="url">url</a>
            3. If the product has a price field, be sure to mention the exact price as shown in the data
            4. Be accurate about the product details - don't make up information not in the data
            5. If the product is a "best deal", explain why it's a good value
            
            Your response should be conversational but accurate, highlighting the actual price 
            and key product features. Don't create fake discounts or savings.
            
2025-05-13 14:36:21,738 - DealFinderAI.Controller - INFO - Processing user query: find me best deal on gaming laptop under 2000 dollars
2025-05-13 14:36:21,738 - DealFinderAI.ChatMemoryAgent - INFO - Analyzing query: 'find me best deal on gaming laptop under 2000 dollars' for conversation session_20250513142944_94641cab
2025-05-13 14:36:21,738 - DealFinderAI.ChatMemoryAgent - INFO - Found 10 products in memory
2025-05-13 14:36:21,740 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: 
        You are an AI helping to analyze if a user's query is a follow-up question about previously shown products, or if it's a completely new search.

        Previous products shown to the user:
        Product 1: Amazon Product B07H2DGZJR
Product 2: Sony WH-1000XM4 Wireless Noise-Cancelling Over-the-Ear Headphones Blue [DJ1300]
Product 3: Open Box Sony WH-1000XM4 Wireless Premium Noise Canceling Overhead Headphones with Mic for Phone Call and Alexa Voice Control, Black -
Product 4: Amazon Product B08GKVKJQJ
Product 5: Amazon Product B0863TXGM3

        User's new query: "find me best deal on gaming laptop under 2000 dollars"

        Please analyze if this query is:
        1. A follow-up question about the previously shown products (e.g., asking for more details, comparing them, etc.)
        2. A completely new search (e.g., asking about different products, starting a new topic)

        Return your analysis in JSON format:
        {
            "is_new_search": true/false,
            "is_follow_up": true/false,
            "reasoning": "brief explanation of your decision",
            "referenced_product_indices": [list of 0-based indices of referenced products, if any]
        }
        
        Only return the JSON, with no additional text.
        
2025-05-13 14:36:23,536 - DealFinderAI.Controller - INFO - Analyze response: {'is_follow_up': False, 'focused_product': None, 'referenced_products': [], 'products': []}
2025-05-13 14:36:23,536 - DealFinderAI.Controller - INFO - Is follow-up? False
2025-05-13 14:36:23,536 - DealFinderAI.Controller - INFO - Referenced products: 0
2025-05-13 14:36:23,536 - DealFinderAI.Controller - INFO - Processing as new search query
2025-05-13 14:36:23,537 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: find me best deal on gaming laptop under 2000 dollars
2025-05-13 14:36:24,392 - DealFinderAI.GeminiAgent - WARNING - Failed to parse Gemini response as JSON: ```json
{
  "product_type": "gaming laptop",
  "keywords": ["gaming", "laptop"],
  "price_range": [0, 2000],
  "brands": [],
  "features": [],
  "sorting_preference": "price_low_to_high",
  "buy_it_now": true
}
```

2025-05-13 14:36:24,392 - DealFinderAI.Controller - INFO - Parsed search parameters: {'product_type': 'gaming laptop', 'keywords': ['gaming', 'laptop'], 'price_range': [0, 2000], 'brands': [], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-13 14:36:24,393 - DealFinderAI.AmazonScraperAgent - INFO - Searching Amazon for: {'product_type': 'gaming laptop', 'keywords': ['gaming', 'laptop'], 'price_range': [0, 2000], 'brands': [], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-13 14:36:26,411 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B0DDYDL8FR at 164.62 USD
2025-05-13 14:36:26,411 - DealFinderAI.AmazonScraperAgent - INFO - Adding product: Amazon Product B0DDYDL8FR at 164.62 USD
2025-05-13 14:36:26,413 - DealFinderAI.AmazonScraperAgent - WARNING - Incomplete data for ASIN B00QUQG8RM, falling back to Gemini extraction.
2025-05-13 14:36:29,625 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B00QUQG8RM at 0.0 USD
2025-05-13 14:36:29,625 - DealFinderAI.AmazonScraperAgent - INFO - Adding product: Amazon Product B00QUQG8RM at 0.0 USD
2025-05-13 14:36:29,636 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B0DDG1F7HF at 189.99 USD
2025-05-13 14:36:29,637 - DealFinderAI.AmazonScraperAgent - INFO - Adding product: Amazon Product B0DDG1F7HF at 189.99 USD
2025-05-13 14:36:29,644 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B0F2ML52P4 at 199.0 USD
2025-05-13 14:36:29,644 - DealFinderAI.AmazonScraperAgent - INFO - Adding product: Amazon Product B0F2ML52P4 at 199.0 USD
2025-05-13 14:36:29,648 - DealFinderAI.AmazonScraperAgent - WARNING - Incomplete data for ASIN B0CNSHNZ5Q, falling back to Gemini extraction.
2025-05-13 14:36:33,616 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B0CNSHNZ5Q at 0.0 USD
2025-05-13 14:36:33,618 - DealFinderAI.AmazonScraperAgent - INFO - Adding product: Amazon Product B0CNSHNZ5Q at 0.0 USD
2025-05-13 14:36:35,083 - DealFinderAI.AmazonScraperAgent - INFO - Returning 5 products
2025-05-13 14:36:35,085 - DealFinderAI.Controller - INFO - Amazon response content: {'source': 'Amazon', 'query': 'gaming laptop gaming laptop', 'products': [{'title': 'Amazon Product B0DDYDL8FR', 'price': 164.62, 'currency': 'USD', 'url': 'https://www.amazon.com/dp/B0DDYDL8FR', 'image_url': 'https://m.media-amazon.com/images/I/71Yq+dKEQBL._AC_UY218_.jpg', 'rating': 0.0, 'reviews': 0, 'is_sponsored': False, 'is_prime': False, 'asin': 'B0DDYDL8FR', 'description': '10.1 Inch Laptop, Quad Core Processor, Ultra Slim Design Wire less Fidelity USB Port Laptop, Type C Charging, for Working, Watching Videos Gaming (Blue #16) Price, product page$164.62$164.62Save 5% at checkoutFREE delivery May 23 - Jun 4Add to cartDisplay Size:10.1 inchesDisk Size:-RAM:8Operating System:Android 12.0', 'source': 'Amazon'}, {'title': 'Amazon Product B00QUQG8RM', 'price': 0.0, 'currency': 'USD', 'url': 'https://www.amazon.com/dp/B00QUQG8RM', 'image_url': 'https://m.media-amazon.com/images/I/61Gz09TcUOL._AC_UY218_.jpg', 'rating': 0.0, 'reviews': 0, 'is_sponsored': False, 'is_prime': False, 'asin': 'B00QUQG8RM', 'description': 'Dell 15.6" FHD Gaming Laptop Computer, Hexa-Core AMD Ryzen 5 4600H, 8GB DDR4 RAM, 256GB PCIe SSD, Windows 11 See optionsDisplay Size:14 inchesDisk Size:500 GBRAM:4 GBOperating System:Windows 7', 'source': 'Amazon'}, {'title': 'Amazon Product B0DDG1F7HF', 'price': 189.99, 'currency': 'USD', 'url': 'https://www.amazon.com/dp/B0DDG1F7HF', 'image_url': 'https://m.media-amazon.com/images/I/71r5lf2y3XL._AC_UY218_.jpg', 'rating': 4.0, 'reviews': 5, 'is_sponsored': False, 'is_prime': True, 'asin': 'B0DDG1F7HF', 'description': 'Bmax 14 inch Laptop, 8GB RAM 256GB SSD Laptop, Intel Pentium Silver N5000 Processor, 14 inch FHD IPS Display, Mini HDMI, WiFi 5, BT 5.0, Long Lasting Battery Gaming Laptop, Slim Laptop Computer S14Pro 4.0 out of 5 stars 5  Price, product page$189.99$189.99 FREE delivery Sun, May 18Or fastest delivery Fri, May 16Only 1 left in stock - order soon.Add to cartDisplay Size:14 inchesDisk Size:256 GBRAM:8.00 GBOperating System:11', 'source': 'Amazon'}, {'title': 'Amazon Product B0F2ML52P4', 'price': 199.0, 'currency': 'USD', 'url': 'https://www.amazon.com/dp/B0F2ML52P4', 'image_url': 'https://m.media-amazon.com/images/I/71qttDlieWL._AC_UY218_.jpg', 'rating': 0.0, 'reviews': 0, 'is_sponsored': False, 'is_prime': True, 'asin': 'B0F2ML52P4', 'description': "KUU 15.6'' Laptop Computer, Gaming Laptops for N4000 Processor,8GB RAM, 256GB SSD, FHD 1920x1080 Display, WIFI5, BT4.2, Mini HDMI,38Wh,Supports 180 Angle Opening,Traditional Lap top Computers Price, product page$199.00$199.00 List: $209.00List: $209.00$209.00 FREE delivery Sun, May 18Or fastest delivery Thu, May 15Only 11 left in stock - order soon.Add to cartDisplay Size:15.6 inchesDisk Size:256 GBRAM:-Operating System:Windows 11 Pro", 'source': 'Amazon'}, {'title': 'Amazon Product B0CNSHNZ5Q', 'price': 0.0, 'currency': 'USD', 'url': 'https://www.amazon.com/dp/B0CNSHNZ5Q', 'image_url': 'https://m.media-amazon.com/images/I/71iiqO5ernL._AC_UY218_.jpg', 'rating': 3.4, 'reviews': 20, 'is_sponsored': False, 'is_prime': False, 'asin': 'B0CNSHNZ5Q', 'description': 'AMIAMO Laptop Computer, 12GB RAM 512GB SSD, Gaming Laptop, Intel Celeron Quad-Core Processors, 15.6" FHD IPS 1920x1080 Screen, WiFi, Bluetooth, Type-C, TF Card, Mini-HDMI, 2MP Webcam. 3.4 out of 5 stars 20  See optionsDisplay Size:15.6 inchesDisk Size:512 GBRAM:12Operating System:11', 'source': 'Amazon'}]}
2025-05-13 14:36:35,086 - DealFinderAI.Controller - INFO - Amazon returned 5 products
2025-05-13 14:36:35,087 - DealFinderAI.WalmartScraperAgent - INFO - Searching Walmart for: {'product_type': 'gaming laptop', 'keywords': ['gaming', 'laptop'], 'price_range': [0, 2000], 'brands': [], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-13 14:36:38,682 - DealFinderAI.WalmartScraperAgent - INFO - Extracted 0 products from JSON data
2025-05-13 14:36:38,685 - DealFinderAI.WalmartScraperAgent - INFO - Found 9 product divs in HTML
2025-05-13 14:36:42,382 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 14:36:42,382 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: CHUWI GemiBook Plus 15.6" Laptop 512GB SSD 16GB DDR5,12th Gen Intel N100,2K IPS Display,Quad Core,Windows 11 Gaming Notebook Computer,3.4GHz,Wifi 6,1920*1080 at 269.99 USD
2025-05-13 14:36:42,382 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: CHUWI GemiBook Plus 15.6" Laptop 512GB SSD 16GB DDR5,12th Gen Intel N100,2K IPS Display,Quad Core,Windows 11 Gaming Notebook Computer,3.4GHz,Wifi 6,1920*1080 at 269.99 USD
2025-05-13 14:36:45,488 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 14:36:45,489 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Molegar 15.6 inch Laptop Computer 16GB RAM 1TB, Laptop for Students Business Gaming Intel Gen N95 Up to 3.4GHz 15.6" FHD Screen,Fingerprint Reader,Backlit Keyboard at 280.0 USD
2025-05-13 14:36:45,489 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Molegar 15.6 inch Laptop Computer 16GB RAM 1TB, Laptop for Students Business Gaming Intel Gen N95 Up to 3.4GHz 15.6" FHD Screen,Fingerprint Reader,Backlit Keyboard at 280.0 USD
2025-05-13 14:36:49,083 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 14:36:49,084 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Latest 16" Purple Laptop-12th Gen Alder Lake N95 CPU, 12G LPDDR5 RAM, 1T NVMe SSD (Expandable to 4T+512G SD), Win 11 Pro/Office 2019, 2K FHD IPS+ Color Backlit KB, Perfect for Game/Work/Study at 319.78 USD
2025-05-13 14:36:49,084 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Latest 16" Purple Laptop-12th Gen Alder Lake N95 CPU, 12G LPDDR5 RAM, 1T NVMe SSD (Expandable to 4T+512G SD), Win 11 Pro/Office 2019, 2K FHD IPS+ Color Backlit KB, Perfect for Game/Work/Study at 319.78 USD
2025-05-13 14:36:52,707 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 14:36:52,707 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: CHUWI FreeBook 13.5" Touchscreen Laptop 512GB SSD 12GB RAM,360 Foldable,Intel 12th N100(Beat to i3-1115G4, Up to 3.4GHz),Windows 11,2 in 1 Gaming Tablet,IPS 4K,Expandable 1TB SSD at 339.99 USD
2025-05-13 14:36:52,708 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: CHUWI FreeBook 13.5" Touchscreen Laptop 512GB SSD 12GB RAM,360 Foldable,Intel 12th N100(Beat to i3-1115G4, Up to 3.4GHz),Windows 11,2 in 1 Gaming Tablet,IPS 4K,Expandable 1TB SSD at 339.99 USD
2025-05-13 14:36:56,337 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 14:36:56,338 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: CHUWI CoreBook X 14" Laptop 512GB SSD 16GB DDR4,10th Gen Intel i3-1220p,4K IPS Display,Quad Core,Windows 11 Gaming Notebook Computer,3.7GHz,WIFI 6,2160 x 1440 at 365.99 USD
2025-05-13 14:36:56,338 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: CHUWI CoreBook X 14" Laptop 512GB SSD 16GB DDR4,10th Gen Intel i3-1220p,4K IPS Display,Quad Core,Windows 11 Gaming Notebook Computer,3.7GHz,WIFI 6,2160 x 1440 at 365.99 USD
2025-05-13 14:36:56,338 - DealFinderAI.WalmartScraperAgent - INFO - Extracted 5 products from HTML
2025-05-13 14:36:56,338 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: CHUWI GemiBook Plus 15.6" Laptop 512GB SSD 16GB DDR5,12th Gen Intel N100,2K IPS Display,Quad Core,Windows 11 Gaming Notebook Computer,3.4GHz,Wifi 6,1920*1080 at 269.99 USD
2025-05-13 14:36:56,339 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Molegar 15.6 inch Laptop Computer 16GB RAM 1TB, Laptop for Students Business Gaming Intel Gen N95 Up to 3.4GHz 15.6" FHD Screen,Fingerprint Reader,Backlit Keyboard at 280.0 USD
2025-05-13 14:36:56,339 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Latest 16" Purple Laptop-12th Gen Alder Lake N95 CPU, 12G LPDDR5 RAM, 1T NVMe SSD (Expandable to 4T+512G SD), Win 11 Pro/Office 2019, 2K FHD IPS+ Color Backlit KB, Perfect for Game/Work/Study at 319.78 USD
2025-05-13 14:36:56,339 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: CHUWI FreeBook 13.5" Touchscreen Laptop 512GB SSD 12GB RAM,360 Foldable,Intel 12th N100(Beat to i3-1115G4, Up to 3.4GHz),Windows 11,2 in 1 Gaming Tablet,IPS 4K,Expandable 1TB SSD at 339.99 USD
2025-05-13 14:36:56,339 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: CHUWI CoreBook X 14" Laptop 512GB SSD 16GB DDR4,10th Gen Intel i3-1220p,4K IPS Display,Quad Core,Windows 11 Gaming Notebook Computer,3.7GHz,WIFI 6,2160 x 1440 at 365.99 USD
2025-05-13 14:36:57,208 - DealFinderAI.WalmartScraperAgent - INFO - Returning 5 products from Walmart
2025-05-13 14:36:57,211 - DealFinderAI.Controller - INFO - Walmart returned 5 products
2025-05-13 14:36:57,211 - DealFinderAI.EbayScraperAgent - INFO - Searching eBay for: {'product_type': 'gaming laptop', 'keywords': ['gaming', 'laptop'], 'price_range': [0, 2000], 'brands': [], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-13 14:36:58,529 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Dell G3 15 3590 Gaming Laptop Speakers at 7.99 USD
2025-05-13 14:36:58,529 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Dell G3 15 3590 Gaming Laptop Speakers at 7.99 USD
2025-05-13 14:36:58,529 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Dell G3 15 3590 Gaming Laptop Fan at 9.99 USD
2025-05-13 14:36:58,530 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Dell G3 15 3590 Gaming Laptop Fan at 9.99 USD
2025-05-13 14:36:58,530 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Dell G3 15 3590 Gaming Laptop Charge port at 9.99 USD
2025-05-13 14:36:58,530 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Dell G3 15 3590 Gaming Laptop Charge port at 9.99 USD
2025-05-13 14:36:58,531 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Dell G3 15 3590 Gaming Laptop SD card daughterboard at 9.99 USD
2025-05-13 14:36:58,531 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Dell G3 15 3590 Gaming Laptop SD card daughterboard at 9.99 USD
2025-05-13 14:36:58,532 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: 15.6" FHD DELL Gaming Laptop PC: Intel i7 Quad Core! 32GB RAM ~ 1TB NVME SSD! at 390.95 USD
2025-05-13 14:36:58,532 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: 15.6" FHD DELL Gaming Laptop PC: Intel i7 Quad Core! 32GB RAM ~ 1TB NVME SSD! at 390.95 USD
2025-05-13 14:36:59,159 - DealFinderAI.EbayScraperAgent - INFO - Returning 5 products from eBay
2025-05-13 14:36:59,161 - DealFinderAI.Controller - INFO - eBay returned 5 products
2025-05-13 14:36:59,161 - DealFinderAI.Controller - INFO - Total products before aggregation: 15
2025-05-13 14:36:59,162 - DealFinderAI.ResultsAggregatorAgent - INFO - Aggregating results for query: find me best deal on gaming laptop under 2000 dollars
2025-05-13 14:36:59,162 - DealFinderAI.ResultsAggregatorAgent - INFO - Found 3 results from various sources
2025-05-13 14:36:59,162 - DealFinderAI.ResultsAggregatorAgent - INFO - Source Amazon: 5 products
2025-05-13 14:36:59,162 - DealFinderAI.ResultsAggregatorAgent - INFO - Source Walmart: 5 products
2025-05-13 14:36:59,162 - DealFinderAI.ResultsAggregatorAgent - INFO - Source eBay: 5 products
2025-05-13 14:36:59,163 - DealFinderAI.ResultsAggregatorAgent - INFO - Total products extracted: 15
2025-05-13 14:36:59,163 - DealFinderAI.ResultsAggregatorAgent - INFO - Ranking 15 products
2025-05-13 14:36:59,163 - DealFinderAI.ResultsAggregatorAgent - INFO - Sorted 15 products by score
2025-05-13 14:36:59,163 - DealFinderAI.ResultsAggregatorAgent - INFO - Returning 10 diversified products
2025-05-13 14:36:59,164 - DealFinderAI.ResultsAggregatorAgent - INFO - Products after ranking: 10
2025-05-13 14:36:59,164 - DealFinderAI.ResultsAggregatorAgent - INFO - Final products: 10
2025-05-13 14:36:59,164 - DealFinderAI.Controller - INFO - Products after aggregation: 10
2025-05-13 14:36:59,164 - DealFinderAI.ProductComparisonAgent - INFO - Comparing products for query: find me best deal on gaming laptop under 2000 dollars
2025-05-13 14:36:59,164 - DealFinderAI.ProductComparisonAgent - INFO - Found 10 products to compare
2025-05-13 14:36:59,164 - DealFinderAI.ProductComparisonAgent - INFO - Grouping 10 products
2025-05-13 14:36:59,165 - DealFinderAI.ProductComparisonAgent - INFO - Created 1 product groups
2025-05-13 14:36:59,165 - DealFinderAI.ProductComparisonAgent - INFO - Analyzing product group with 4 items
2025-05-13 14:36:59,165 - DealFinderAI.ProductComparisonAgent - INFO - Best deal: Dell G3 15 3590 Gaming Laptop Speakers at $7.99
2025-05-13 14:36:59,165 - DealFinderAI.ProductComparisonAgent - INFO - Savings: $1.50 (7.8%)
2025-05-13 14:36:59,166 - DealFinderAI.ChatMemoryAgent - INFO - Storing context for conversation session_20250513142944_94641cab
2025-05-13 14:36:59,166 - DealFinderAI.ChatMemoryAgent - INFO - Storing 10 products for conversation session_20250513142944_94641cab
2025-05-13 14:36:59,166 - DealFinderAI.PresentationAgent - INFO - Preparing presentation for 10 products
2025-05-13 14:36:59,166 - DealFinderAI.ChatMemoryAgent - INFO - Storing context for conversation session_20250513142944_94641cab
2025-05-13 14:36:59,167 - DealFinderAI.ChatMemoryAgent - INFO - Storing 10 products for conversation session_20250513142944_94641cab
2025-05-13 14:36:59,167 - DealFinderAI.Controller - INFO - Successfully stored search results in memory
2025-05-13 14:37:58,592 - DealFinderAI.Controller - INFO - Processing user query: Tell me more about the best deal
2025-05-13 14:37:58,594 - DealFinderAI.ChatMemoryAgent - INFO - Analyzing query: 'Tell me more about the best deal' for conversation session_20250513142944_94641cab
2025-05-13 14:37:58,594 - DealFinderAI.ChatMemoryAgent - INFO - Found 10 products in memory
2025-05-13 14:37:58,595 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: 
        You are an AI helping to analyze if a user's query is a follow-up question about previously shown products, or if it's a completely new search.

        Previous products shown to the user:
        Product 1: Amazon Product B0CNSHNZ5Q
Product 2: Dell G3 15 3590 Gaming Laptop Speakers
Product 3: CHUWI GemiBook Plus 15.6" Laptop 512GB SSD 16GB DDR5,12th Gen Intel N100,2K IPS Display,Quad Core,Windows 11 Gaming Notebook Computer,3.4GHz,Wifi 6,1920*1080
Product 4: Amazon Product B0DDG1F7HF
Product 5: Dell G3 15 3590 Gaming Laptop Fan

        User's new query: "Tell me more about the best deal"

        Please analyze if this query is:
        1. A follow-up question about the previously shown products (e.g., asking for more details, comparing them, etc.)
        2. A completely new search (e.g., asking about different products, starting a new topic)

        Return your analysis in JSON format:
        {
            "is_new_search": true/false,
            "is_follow_up": true/false,
            "reasoning": "brief explanation of your decision",
            "referenced_product_indices": [list of 0-based indices of referenced products, if any]
        }
        
        Only return the JSON, with no additional text.
        
2025-05-13 14:38:00,578 - DealFinderAI.Controller - INFO - Analyze response: {'is_follow_up': False, 'focused_product': None, 'referenced_products': [], 'products': []}
2025-05-13 14:38:00,578 - DealFinderAI.Controller - INFO - Is follow-up? False
2025-05-13 14:38:00,578 - DealFinderAI.Controller - INFO - Referenced products: 0
2025-05-13 14:38:00,579 - DealFinderAI.Controller - INFO - Processing as new search query
2025-05-13 14:38:00,579 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: Tell me more about the best deal
2025-05-13 14:38:02,089 - DealFinderAI.GeminiAgent - WARNING - Failed to parse Gemini response as JSON: ```json
{
  "product_type": null,
  "keywords": ["best deal"],
  "price_range": null,
  "brands": null,
  "features": null,
  "sorting_preference": "price_low_to_high",
  "buy_it_now": true
}
```

2025-05-13 14:38:02,089 - DealFinderAI.Controller - INFO - Parsed search parameters: {'product_type': None, 'keywords': ['best deal'], 'price_range': None, 'brands': None, 'features': None, 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-13 14:38:02,090 - DealFinderAI.AmazonScraperAgent - INFO - Searching Amazon for: {'product_type': None, 'keywords': ['best deal'], 'price_range': None, 'brands': None, 'features': None, 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-13 14:38:02,090 - DealFinderAI.AmazonScraperAgent - ERROR - Error scraping Amazon: sequence item 0: expected str instance, NoneType found
2025-05-13 14:38:02,090 - DealFinderAI.Controller - WARNING - Amazon search error: {'error': 'Amazon scraping error: sequence item 0: expected str instance, NoneType found'}
2025-05-13 14:38:02,090 - DealFinderAI.WalmartScraperAgent - INFO - Searching Walmart for: {'product_type': None, 'keywords': ['best deal'], 'price_range': None, 'brands': None, 'features': None, 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-13 14:38:02,091 - DealFinderAI.WalmartScraperAgent - ERROR - Error scraping Walmart: sequence item 0: expected str instance, NoneType found
2025-05-13 14:38:02,091 - DealFinderAI.Controller - WARNING - Walmart search error: {'error': 'Walmart scraping error: sequence item 0: expected str instance, NoneType found'}
2025-05-13 14:38:02,091 - DealFinderAI.EbayScraperAgent - INFO - Searching eBay for: {'product_type': None, 'keywords': ['best deal'], 'price_range': None, 'brands': None, 'features': None, 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-13 14:38:02,091 - DealFinderAI.EbayScraperAgent - ERROR - Error scraping eBay: sequence item 0: expected str instance, NoneType found
2025-05-13 14:38:02,091 - DealFinderAI.Controller - WARNING - eBay search error: {'error': 'eBay scraping error: sequence item 0: expected str instance, NoneType found'}
2025-05-13 14:38:02,092 - DealFinderAI.Controller - INFO - Total products before aggregation: 0
2025-05-13 14:38:02,092 - DealFinderAI.ResultsAggregatorAgent - INFO - Aggregating results for query: Tell me more about the best deal
2025-05-13 14:38:02,092 - DealFinderAI.ResultsAggregatorAgent - INFO - Found 0 results from various sources
2025-05-13 14:38:02,092 - DealFinderAI.ResultsAggregatorAgent - INFO - Total products extracted: 0
2025-05-13 14:38:02,093 - DealFinderAI.ResultsAggregatorAgent - WARNING - No products found in any source
2025-05-13 14:38:14,397 - DealFinderAI.Controller - INFO - Processing user query: Which one has the best reviews?
2025-05-13 14:38:14,399 - DealFinderAI.ChatMemoryAgent - INFO - Analyzing query: 'Which one has the best reviews?' for conversation session_20250513142944_94641cab
2025-05-13 14:38:14,399 - DealFinderAI.ChatMemoryAgent - INFO - Found 10 products in memory
2025-05-13 14:38:14,400 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: 
        You are an AI helping to analyze if a user's query is a follow-up question about previously shown products, or if it's a completely new search.

        Previous products shown to the user:
        Product 1: Amazon Product B0CNSHNZ5Q
Product 2: Dell G3 15 3590 Gaming Laptop Speakers
Product 3: CHUWI GemiBook Plus 15.6" Laptop 512GB SSD 16GB DDR5,12th Gen Intel N100,2K IPS Display,Quad Core,Windows 11 Gaming Notebook Computer,3.4GHz,Wifi 6,1920*1080
Product 4: Amazon Product B0DDG1F7HF
Product 5: Dell G3 15 3590 Gaming Laptop Fan

        User's new query: "Which one has the best reviews?"

        Please analyze if this query is:
        1. A follow-up question about the previously shown products (e.g., asking for more details, comparing them, etc.)
        2. A completely new search (e.g., asking about different products, starting a new topic)

        Return your analysis in JSON format:
        {
            "is_new_search": true/false,
            "is_follow_up": true/false,
            "reasoning": "brief explanation of your decision",
            "referenced_product_indices": [list of 0-based indices of referenced products, if any]
        }
        
        Only return the JSON, with no additional text.
        
2025-05-13 14:38:16,330 - DealFinderAI.Controller - INFO - Analyze response: {'is_follow_up': True, 'focused_product': 0, 'referenced_products': [{'title': 'Amazon Product B0CNSHNZ5Q', 'price': 0.0, 'currency': 'USD', 'url': 'https://www.amazon.com/dp/B0CNSHNZ5Q', 'image_url': 'https://m.media-amazon.com/images/I/71iiqO5ernL._AC_UY218_.jpg', 'rating': 3.4, 'reviews': 20, 'is_sponsored': False, 'is_prime': False, 'asin': 'B0CNSHNZ5Q', 'description': 'AMIAMO Laptop Computer, 12GB RAM 512GB SSD, Gaming Laptop, Intel Celeron Quad-Core Processors, 15.6" FHD IPS 1920x1080 Screen, WiFi, Bluetooth, Type-C, TF Card, Mini-HDMI, 2MP Webcam. 3.4 out of 5 stars 20  See optionsDisplay Size:15.6 inchesDisk Size:512 GBRAM:12Operating System:11', 'source': 'Amazon', '_score': 74.0}, {'title': 'Dell G3 15 3590 Gaming Laptop Speakers', 'price': 7.99, 'shipping': 9.84, 'total_price': 17.83, 'is_free_shipping': False, 'currency': 'USD', 'url': 'https://www.ebay.com/itm/225923574317?_skw=gaming+laptop+gaming+laptop&itmmeta=01JV5EZ2156T08CHXYZAN3QMRJ&hash=item349a182a2d%3Ag%3Ay6gAAOSwf6hlgf4H&itmprp=enc%3AAQAKAAAA0FkggFvd1GGDu0w3yXCmi1do0h5Uf2bHcfMljLtaKwEWZyVv0v%2BSbhgWSA%2BsRZwaEKgkmMlOGZrbxGCOl2gcSC1d3Frb5OlxL1wLLcNfCiMsWkBcCbEMGTYKgtv2tPXC2pBbWRkJE02M8Vdyoi0nV8f6l%2BOJIf%2BAtSbwxYVS9iojfMF4uzH04UYgagsG9vtWjhwiqea%2F1sH0txaJS%2BoXk0SLcgI02v3T3L87C%2FSVXCSvRA3YPnxthraiNeg1nYXGwC%2FKqeSNBynnHtn58OZcM%2Bg%3D%7Ctkp%3ABk9SR-Sg_K7ZZQ&LH_BIN=1', 'image_url': '', 'is_sponsored': False, 'condition': 'Pre-Owned', 'listing_type': 'Buy It Now', 'seller_rating': 100.0, 'item_id': '225923574317', 'description': 'Pre-Owned  Dell', 'source': 'eBay', '_score': 49.201, 'effective_price': 17.83}, {'title': 'CHUWI GemiBook Plus 15.6" Laptop 512GB SSD 16GB DDR5,12th Gen Intel N100,2K IPS Display,Quad Core,Windows 11 Gaming Notebook Computer,3.4GHz,Wifi 6,1920*1080', 'price': 269.99, 'currency': 'USD', 'url': '/ip/CHUWI-GemiBook-Plus-15-6-Laptop-512GB-SSD-16GB-DDR5-12th-Gen-Intel-N100-2K-IPS-Display-Quad-Core-Windows-11-Gaming-Notebook-Computer-3-4GHz-Wifi-6-19/410301104?classType=VARIANT&from=/search', 'image_url': 'https://i5.walmartimages.com/seo/CHUWI-GemiBook-Plus-15-6-Laptop-512GB-SSD-16GB-DDR5-12th-Gen-Intel-N100-2K-IPS-Display-Quad-Core-Windows-11-Gaming-Notebook-Computer-3-4GHz-Wifi-6-19_455aba2a-0b55-4c52-98ce-1288cdd43d8c.60c46d4b6bd22442fb0378ea6710368f.jpeg?odnHeight=580&odnWidth=580&odnBg=FFFFFF', 'rating': 0.0, 'reviews': 0, 'is_sponsored': False, 'is_pickup_today': False, 'product_id': '5KIPW3S2FI6G', 'description': '', 'source': 'Walmart', '_score': 13.000999999999998}, {'title': 'Amazon Product B0DDG1F7HF', 'price': 189.99, 'currency': 'USD', 'url': 'https://www.amazon.com/dp/B0DDG1F7HF', 'image_url': 'https://m.media-amazon.com/images/I/71r5lf2y3XL._AC_UY218_.jpg', 'rating': 4.0, 'reviews': 5, 'is_sponsored': False, 'is_prime': True, 'asin': 'B0DDG1F7HF', 'description': 'Bmax 14 inch Laptop, 8GB RAM 256GB SSD Laptop, Intel Pentium Silver N5000 Processor, 14 inch FHD IPS Display, Mini HDMI, WiFi 5, BT 5.0, Long Lasting Battery Gaming Laptop, Slim Laptop Computer S14Pro 4.0 out of 5 stars 5  Price, product page$189.99$189.99 FREE delivery Sun, May 18Or fastest delivery Fri, May 16Only 1 left in stock - order soon.Add to cartDisplay Size:14 inchesDisk Size:256 GBRAM:8.00 GBOperating System:11', 'source': 'Amazon', '_score': 69.001}, {'title': 'Dell G3 15 3590 Gaming Laptop Fan', 'price': 9.99, 'shipping': 9.84, 'total_price': 19.83, 'is_free_shipping': False, 'currency': 'USD', 'url': 'https://www.ebay.com/itm/225923576699?_skw=gaming+laptop+gaming+laptop&itmmeta=01JV5EZ2155MYE74QTS0VFRCCF&hash=item349a18337b%3Ag%3AQ8kAAOSwcUxlgf7n&itmprp=enc%3AAQAKAAAA8FkggFvd1GGDu0w3yXCmi1cKGFAEKGMMtPZniBAHUtZT2iF6riVsZW1VBENUXLbRh6sTLbL6yCnYU8ZMT8zo2fDFhFis1CDgzS%2FnbpmYPJ25N1P4ileb%2Fo0rbXvKba2QwE8yZFgfFZCYOW5%2B6v7e1sBmyOqGi5FNMtyzsErNKrtCbVLIIE6o5nO3Sgb8YOWvDU0OtbKzFw%2FU107NTvsZ%2FUFbnfmRuxlubTX8NBMpBlOH3YU3IJf1q4TUNaLND6EMfwpTzXOh5OdiDs0izcOLeCb8pe2OerHDlUsbSj92R%2BeOktbPby0i1m8Zub2BL7hw8Q%3D%3D%7Ctkp%3ABk9SR-ag_K7ZZQ&LH_BIN=1', 'image_url': '', 'is_sponsored': False, 'condition': 'Pre-Owned', 'listing_type': 'Buy It Now', 'seller_rating': 100.0, 'item_id': '225923576699', 'description': 'Pre-Owned  Dell', 'source': 'eBay', '_score': 49.001000000000005, 'effective_price': 19.83}], 'products': []}
2025-05-13 14:38:16,331 - DealFinderAI.Controller - INFO - Is follow-up? True
2025-05-13 14:38:16,332 - DealFinderAI.Controller - INFO - Referenced products: 5
2025-05-13 14:38:16,332 - DealFinderAI.Controller - INFO - Handling as follow-up question about 5 products
2025-05-13 14:38:16,332 - DealFinderAI.Controller - INFO - Handling follow-up question: Which one has the best reviews?
2025-05-13 14:38:16,332 - DealFinderAI.Controller - INFO - Referenced products: 5
2025-05-13 14:38:16,332 - DealFinderAI.Controller - INFO - Follow-up for product: Amazon Product B0CNSHNZ5Q
2025-05-13 14:38:16,333 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: 
            I'm a shopping assistant helping a customer with product information.
            
            The customer previously searched for products and is now asking a follow-up question: "Which one has the best reviews?"
            
            They're referring to this product:
            {
  "title": "Amazon Product B0CNSHNZ5Q",
  "price": 0.0,
  "currency": "USD",
  "url": "https://www.amazon.com/dp/B0CNSHNZ5Q",
  "image_url": "https://m.media-amazon.com/images/I/71iiqO5ernL._AC_UY218_.jpg",
  "rating": 3.4,
  "reviews": 20,
  "is_sponsored": false,
  "is_prime": false,
  "asin": "B0CNSHNZ5Q",
  "description": "AMIAMO Laptop Computer, 12GB RAM 512GB SSD, Gaming Laptop, Intel Celeron Quad-Core Processors, 15.6\" FHD IPS 1920x1080 Screen, WiFi, Bluetooth, Type-C, TF Card, Mini-HDMI, 2MP Webcam. 3.4 out of 5 stars 20  See optionsDisplay Size:15.6 inchesDisk Size:512 GBRAM:12Operating System:11",
  "source": "Amazon",
  "_score": 74.0,
  "formatted_price": "$0.00"
}
            
            Please provide a helpful, conversational response addressing their question
            about this specific product. Include relevant details from the product information.
            
            Important guidelines:
            1. Always format prices as exact dollar amounts (e.g., "$0.00" not "$1")
            2. Format URLs as clickable HTML links <a href="url">url</a>
            3. If the product has a price field, be sure to mention the exact price as shown in the data
            4. Be accurate about the product details - don't make up information not in the data
            5. If the product is a "best deal", explain why it's a good value
            
            Your response should be conversational but accurate, highlighting the actual price 
            and key product features. Don't create fake discounts or savings.
            
2025-05-13 14:38:40,977 - DealFinderAI.Controller - INFO - Processing user query: find me best deal on iphone 16
2025-05-13 14:38:40,979 - DealFinderAI.ChatMemoryAgent - INFO - Analyzing query: 'find me best deal on iphone 16' for conversation session_20250513142944_94641cab
2025-05-13 14:38:40,979 - DealFinderAI.ChatMemoryAgent - INFO - Found 10 products in memory
2025-05-13 14:38:40,980 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: 
        You are an AI helping to analyze if a user's query is a follow-up question about previously shown products, or if it's a completely new search.

        Previous products shown to the user:
        Product 1: Amazon Product B0CNSHNZ5Q
Product 2: Dell G3 15 3590 Gaming Laptop Speakers
Product 3: CHUWI GemiBook Plus 15.6" Laptop 512GB SSD 16GB DDR5,12th Gen Intel N100,2K IPS Display,Quad Core,Windows 11 Gaming Notebook Computer,3.4GHz,Wifi 6,1920*1080
Product 4: Amazon Product B0DDG1F7HF
Product 5: Dell G3 15 3590 Gaming Laptop Fan

        User's new query: "find me best deal on iphone 16"

        Please analyze if this query is:
        1. A follow-up question about the previously shown products (e.g., asking for more details, comparing them, etc.)
        2. A completely new search (e.g., asking about different products, starting a new topic)

        Return your analysis in JSON format:
        {
            "is_new_search": true/false,
            "is_follow_up": true/false,
            "reasoning": "brief explanation of your decision",
            "referenced_product_indices": [list of 0-based indices of referenced products, if any]
        }
        
        Only return the JSON, with no additional text.
        
2025-05-13 14:38:41,796 - DealFinderAI.Controller - INFO - Analyze response: {'is_follow_up': False, 'focused_product': None, 'referenced_products': [], 'products': []}
2025-05-13 14:38:41,796 - DealFinderAI.Controller - INFO - Is follow-up? False
2025-05-13 14:38:41,796 - DealFinderAI.Controller - INFO - Referenced products: 0
2025-05-13 14:38:41,796 - DealFinderAI.Controller - INFO - Processing as new search query
2025-05-13 14:38:41,797 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: find me best deal on iphone 16
2025-05-13 14:38:42,596 - DealFinderAI.GeminiAgent - WARNING - Failed to parse Gemini response as JSON: ```json
{
  "product_type": "smartphone",
  "keywords": ["iphone 16"],
  "price_range": null,
  "brands": ["Apple"],
  "features": [],
  "sorting_preference": "price_low_to_high",
  "buy_it_now": true
}
```

2025-05-13 14:38:42,597 - DealFinderAI.Controller - INFO - Parsed search parameters: {'product_type': 'smartphone', 'keywords': ['iphone 16'], 'price_range': None, 'brands': ['Apple'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-13 14:38:42,597 - DealFinderAI.AmazonScraperAgent - INFO - Searching Amazon for: {'product_type': 'smartphone', 'keywords': ['iphone 16'], 'price_range': None, 'brands': ['Apple'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-13 14:38:44,262 - DealFinderAI.AmazonScraperAgent - WARNING - Incomplete data for ASIN B0DHR6DR7P, falling back to Gemini extraction.
2025-05-13 14:38:47,883 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B0DHR6DR7P at 0.0 USD
2025-05-13 14:38:47,884 - DealFinderAI.AmazonScraperAgent - INFO - Adding product: Amazon Product B0DHR6DR7P at 0.0 USD
2025-05-13 14:38:47,894 - DealFinderAI.AmazonScraperAgent - WARNING - Incomplete data for ASIN B091JHNTNH, falling back to Gemini extraction.
2025-05-13 14:38:51,025 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B091JHNTNH at 0.0 USD
2025-05-13 14:38:51,026 - DealFinderAI.AmazonScraperAgent - INFO - Adding product: Amazon Product B091JHNTNH at 0.0 USD
2025-05-13 14:38:51,040 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B088NDPK5T at 119.99 USD
2025-05-13 14:38:51,040 - DealFinderAI.AmazonScraperAgent - INFO - Adding product: Amazon Product B088NDPK5T at 119.99 USD
2025-05-13 14:38:51,048 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B0CZ7DYMJL at 88.88 USD
2025-05-13 14:38:51,048 - DealFinderAI.AmazonScraperAgent - INFO - Adding product: Amazon Product B0CZ7DYMJL at 88.88 USD
2025-05-13 14:38:51,053 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B07886RHHK at 199.97 USD
2025-05-13 14:38:51,053 - DealFinderAI.AmazonScraperAgent - INFO - Adding product: Amazon Product B07886RHHK at 199.97 USD
2025-05-13 14:38:51,772 - DealFinderAI.AmazonScraperAgent - INFO - Returning 5 products
2025-05-13 14:38:51,774 - DealFinderAI.Controller - INFO - Amazon response content: {'source': 'Amazon', 'query': 'smartphone iphone 16 Apple', 'products': [{'title': 'Amazon Product B0DHR6DR7P', 'price': 0.0, 'currency': 'USD', 'url': 'https://www.amazon.com/dp/B0DHR6DR7P', 'image_url': 'https://m.media-amazon.com/images/I/51tG88rMazL._AC_UY218_.jpg', 'rating': 4.8, 'reviews': 10, 'is_sponsored': False, 'is_prime': False, 'asin': 'B0DHR6DR7P', 'description': 'Cell Phone Holder Dashboard Home Mount Holder Non-Slip Silicone[360Rotatable 30 Adjustable Spring Design] Compatible with All Smartphones and All iPhones 16 Pro Max,Android, Pixil 4.8 out of 5 stars 10  Click to see priceFREE delivery Sun, May 18 on $35 of items shipped by AmazonOr fastest delivery Tomorrow, May 14Add to cart', 'source': 'Amazon'}, {'title': 'Amazon Product B091JHNTNH', 'price': 0.0, 'currency': 'USD', 'url': 'https://www.amazon.com/dp/B091JHNTNH', 'image_url': 'https://m.media-amazon.com/images/I/51aGOonIzSS._AC_UY218_.jpg', 'rating': 3.1, 'reviews': 424, 'is_sponsored': False, 'is_prime': False, 'asin': 'B091JHNTNH', 'description': 'iLightMini 11 Pro Smartphone The World\'s Smallest 11 Pro Max Android Mobile Phone, Super Small Micro 2.5" Touch Screen Global Unlocked Great for Kids 2GB RAM / 16GB ROM Tiny iPhone XI Pro Look Alike 3.1 out of 5 stars 424  50+ bought in past monthSee optionsNo featured offers available$57.23(2 new offers)Display Size:2.5 inchesMemory:16 GBColor:White, Black, Green, PinkBrand:iLight', 'source': 'Amazon'}, {'title': 'Amazon Product B088NDPK5T', 'price': 119.99, 'currency': 'USD', 'url': 'https://www.amazon.com/dp/B088NDPK5T', 'image_url': 'https://m.media-amazon.com/images/I/61hpoPMVgqL._AC_UY218_.jpg', 'rating': 4.2, 'reviews': 20604, 'is_sponsored': False, 'is_prime': False, 'asin': 'B088NDPK5T', 'description': 'Apple iPhone SE (2nd Generation), US Version, 128GB, White - Unlocked (Renewed) Options:3 sizesTop Reviewed for Functionality4.2 out of 5 stars 20,604  300+ bought in past monthPrice, product page$119.99$119.99 Typical price: $127.00Typical price: $127.00$127.00FREE delivery Thu, May 15Only 18 left in stock - order soon.See optionsMore Buying Choices$79.95(17+ used & new offers)Display Size:4.7 inchesMemory:128 GBColor:WhiteBrand:Apple', 'source': 'Amazon'}, {'title': 'Amazon Product B0CZ7DYMJL', 'price': 88.88, 'currency': 'USD', 'url': 'https://www.amazon.com/dp/B0CZ7DYMJL', 'image_url': 'https://m.media-amazon.com/images/I/61ayapn7-yL._AC_UY218_.jpg', 'rating': 2.5, 'reviews': 29, 'is_sponsored': False, 'is_prime': False, 'asin': 'B0CZ7DYMJL', 'description': 'Smartphone Unlocked Cell Phone IP14pro 6.7inch HD Cheap Phones 2GB/16GB Android 10 Straight Talk Phone 5000mAh 128GB Extension Dual Sim Boost Mobile Phones (Blue) 2.5 out of 5 stars 29  Price, product page$88.88$88.88FREE delivery Sun, May 18Or fastest delivery Tomorrow, May 14Add to cartDisplay Size:6.7 inchesMemory:16 GBColor:blueBrand:FUALYOU', 'source': 'Amazon'}, {'title': 'Amazon Product B07886RHHK', 'price': 199.97, 'currency': 'USD', 'url': 'https://www.amazon.com/dp/B07886RHHK', 'image_url': 'https://m.media-amazon.com/images/I/61g0wgQQxvL._AC_UY218_.jpg', 'rating': 3.4, 'reviews': 4, 'is_sponsored': False, 'is_prime': False, 'asin': 'B07886RHHK', 'description': 'Apple iPhone SE - Sprint (Refurbished) (Space Gray, 16GB) 3.4 out of 5 stars 4  Price, product page$199.97$199.97FREE delivery May 16 - 20Or fastest delivery Tomorrow, May 14Only 2 left in stock - order soon.See optionsMore Buying Choices$94.99(5+ used & new offers)Display Size:4Memory:16 GBColor:Space GrayBrand:Apple', 'source': 'Amazon'}]}
2025-05-13 14:38:51,776 - DealFinderAI.Controller - INFO - Amazon returned 5 products
2025-05-13 14:38:51,776 - DealFinderAI.WalmartScraperAgent - INFO - Searching Walmart for: {'product_type': 'smartphone', 'keywords': ['iphone 16'], 'price_range': None, 'brands': ['Apple'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-13 14:38:54,477 - DealFinderAI.WalmartScraperAgent - INFO - Extracted 0 products from JSON data
2025-05-13 14:38:54,479 - DealFinderAI.WalmartScraperAgent - INFO - Found 9 product divs in HTML
2025-05-13 14:38:56,977 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 14:38:56,978 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: AT&T iPhone 16e 128GB Black. Apple Intelligence. at 649.0 USD
2025-05-13 14:38:56,978 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: AT&T iPhone 16e 128GB Black. Apple Intelligence. at 649.0 USD
2025-05-13 14:38:58,837 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 14:38:58,838 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Verizon iPhone 16e 128GB Black. Apple Intelligence. at 649.0 USD
2025-05-13 14:38:58,838 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Verizon iPhone 16e 128GB Black. Apple Intelligence. at 649.0 USD
2025-05-13 14:39:00,862 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 14:39:00,862 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: AT&T iPhone 16 128GB Ultramarine. Apple Intelligence. at 879.0 USD
2025-05-13 14:39:00,862 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: AT&T iPhone 16 128GB Ultramarine. Apple Intelligence. at 879.0 USD
2025-05-13 14:39:03,229 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 14:39:03,230 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Verizon iPhone 16 128GB Ultramarine. Apple Intelligence. at 879.0 USD
2025-05-13 14:39:03,230 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Verizon iPhone 16 128GB Ultramarine. Apple Intelligence. at 879.0 USD
2025-05-13 14:39:05,841 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 14:39:05,841 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Restored Apple iPhone 5S - 4G smartphone / Internal Memory 16 GB - LCD display - 4" - 1136 x 640 pixels - rear camera 8 MP - front camera 1.2 MP refurbished - space gray (Refurbished) at 45.45 USD
2025-05-13 14:39:05,841 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Restored Apple iPhone 5S - 4G smartphone / Internal Memory 16 GB - LCD display - 4" - 1136 x 640 pixels - rear camera 8 MP - front camera 1.2 MP refurbished - space gray (Refurbished) at 45.45 USD
2025-05-13 14:39:05,842 - DealFinderAI.WalmartScraperAgent - INFO - Extracted 5 products from HTML
2025-05-13 14:39:05,842 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: AT&T iPhone 16e 128GB Black. Apple Intelligence. at 649.0 USD
2025-05-13 14:39:05,842 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Verizon iPhone 16e 128GB Black. Apple Intelligence. at 649.0 USD
2025-05-13 14:39:05,842 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: AT&T iPhone 16 128GB Ultramarine. Apple Intelligence. at 879.0 USD
2025-05-13 14:39:05,842 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Verizon iPhone 16 128GB Ultramarine. Apple Intelligence. at 879.0 USD
2025-05-13 14:39:05,842 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Restored Apple iPhone 5S - 4G smartphone / Internal Memory 16 GB - LCD display - 4" - 1136 x 640 pixels - rear camera 8 MP - front camera 1.2 MP refurbished - space gray (Refurbished) at 45.45 USD
2025-05-13 14:39:07,124 - DealFinderAI.WalmartScraperAgent - INFO - Returning 5 products from Walmart
2025-05-13 14:39:07,124 - DealFinderAI.Controller - INFO - Walmart returned 5 products
2025-05-13 14:39:07,124 - DealFinderAI.EbayScraperAgent - INFO - Searching eBay for: {'product_type': 'smartphone', 'keywords': ['iphone 16'], 'price_range': None, 'brands': ['Apple'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-13 14:39:08,331 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: For iPhone 16 15 14 13 12 11 Pro Max Tempered Glass Screen Camera Lens Protector at 7.88 USD
2025-05-13 14:39:08,331 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: For iPhone 16 15 14 13 12 11 Pro Max Tempered Glass Screen Camera Lens Protector at 7.88 USD
2025-05-13 14:39:08,331 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: For Apple iPhone 16 15 14 13 12 11 Pro Max Plus Tempered Glass Screen Protector at 8.41 USD
2025-05-13 14:39:08,331 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: For Apple iPhone 16 15 14 13 12 11 Pro Max Plus Tempered Glass Screen Protector at 8.41 USD
2025-05-13 14:39:08,332 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: 3X For iPhone 16 15 14 13 12 11 Pro Max  Plus Tempered GLASS Screen Protector at 8.41 USD
2025-05-13 14:39:08,332 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: 3X For iPhone 16 15 14 13 12 11 Pro Max  Plus Tempered GLASS Screen Protector at 8.41 USD
2025-05-13 14:39:08,333 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: For Apple iPhone 16 15 14 13 12 Pro Max Case Mag Safe Magnetic Camera Lens Cover at 8.99 USD
2025-05-13 14:39:08,333 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: For Apple iPhone 16 15 14 13 12 Pro Max Case Mag Safe Magnetic Camera Lens Cover at 8.99 USD
2025-05-13 14:39:08,333 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 16 A3081 - Factory Unlocked - 128GB All Colors - B GRADE at 595.0 USD
2025-05-13 14:39:08,333 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 16 A3081 - Factory Unlocked - 128GB All Colors - B GRADE at 595.0 USD
2025-05-13 14:39:09,470 - DealFinderAI.EbayScraperAgent - INFO - Returning 5 products from eBay
2025-05-13 14:39:09,473 - DealFinderAI.Controller - INFO - eBay returned 5 products
2025-05-13 14:39:09,473 - DealFinderAI.Controller - INFO - Total products before aggregation: 15
2025-05-13 14:39:09,473 - DealFinderAI.ResultsAggregatorAgent - INFO - Aggregating results for query: find me best deal on iphone 16
2025-05-13 14:39:09,473 - DealFinderAI.ResultsAggregatorAgent - INFO - Found 3 results from various sources
2025-05-13 14:39:09,474 - DealFinderAI.ResultsAggregatorAgent - INFO - Source Amazon: 5 products
2025-05-13 14:39:09,474 - DealFinderAI.ResultsAggregatorAgent - INFO - Source Walmart: 5 products
2025-05-13 14:39:09,474 - DealFinderAI.ResultsAggregatorAgent - INFO - Source eBay: 5 products
2025-05-13 14:39:09,474 - DealFinderAI.ResultsAggregatorAgent - INFO - Total products extracted: 15
2025-05-13 14:39:09,474 - DealFinderAI.ResultsAggregatorAgent - INFO - Ranking 15 products
2025-05-13 14:39:09,475 - DealFinderAI.ResultsAggregatorAgent - INFO - Sorted 15 products by score
2025-05-13 14:39:09,475 - DealFinderAI.ResultsAggregatorAgent - INFO - Returning 10 diversified products
2025-05-13 14:39:09,475 - DealFinderAI.ResultsAggregatorAgent - INFO - Products after ranking: 10
2025-05-13 14:39:09,475 - DealFinderAI.ResultsAggregatorAgent - INFO - Final products: 10
2025-05-13 14:39:09,475 - DealFinderAI.Controller - INFO - Products after aggregation: 10
2025-05-13 14:39:09,475 - DealFinderAI.ProductComparisonAgent - INFO - Comparing products for query: find me best deal on iphone 16
2025-05-13 14:39:09,475 - DealFinderAI.ProductComparisonAgent - INFO - Found 10 products to compare
2025-05-13 14:39:09,475 - DealFinderAI.ProductComparisonAgent - INFO - Grouping 10 products
2025-05-13 14:39:09,476 - DealFinderAI.ProductComparisonAgent - INFO - Created 0 product groups
2025-05-13 14:39:09,476 - DealFinderAI.ChatMemoryAgent - INFO - Storing context for conversation session_20250513142944_94641cab
2025-05-13 14:39:09,476 - DealFinderAI.ChatMemoryAgent - INFO - Storing 10 products for conversation session_20250513142944_94641cab
2025-05-13 14:39:09,476 - DealFinderAI.PresentationAgent - INFO - Preparing presentation for 10 products
2025-05-13 14:39:09,476 - DealFinderAI.PresentationAgent - INFO - Formatting 10 products for display
2025-05-13 14:39:09,477 - DealFinderAI.PresentationAgent - INFO - Product 1: Amazon Product B0DHR6DR7P - Price: $0.00 - Source: Amazon
2025-05-13 14:39:09,477 - DealFinderAI.PresentationAgent - INFO - Product 2: For iPhone 16 15 14 13 12 11 Pro Max Tempered Glass Screen Camera Lens Protector - Price: $7.88 - Source: eBay
2025-05-13 14:39:09,477 - DealFinderAI.PresentationAgent - INFO - Product 3: Restored Apple iPhone 5S - 4G smartphone / Internal Memory 16 GB - LCD display - 4" - 1136 x 640 pixels - rear camera 8 MP - front camera 1.2 MP refurbished - space gray (Refurbished) - Price: $45.45 - Source: Walmart
2025-05-13 14:39:09,477 - DealFinderAI.PresentationAgent - INFO - Product 4: Amazon Product B088NDPK5T - Price: $119.99 - Source: Amazon
2025-05-13 14:39:09,478 - DealFinderAI.PresentationAgent - INFO - Product 5: Amazon Product B091JHNTNH - Price: $0.00 - Source: Amazon
2025-05-13 14:39:09,478 - DealFinderAI.PresentationAgent - INFO - Product 6: For Apple iPhone 16 15 14 13 12 11 Pro Max Plus Tempered Glass Screen Protector - Price: $8.41 - Source: eBay
2025-05-13 14:39:09,478 - DealFinderAI.PresentationAgent - INFO - Product 7: 3X For iPhone 16 15 14 13 12 11 Pro Max  Plus Tempered GLASS Screen Protector - Price: $8.41 - Source: eBay
2025-05-13 14:39:09,478 - DealFinderAI.PresentationAgent - INFO - Product 8: For Apple iPhone 16 15 14 13 12 Pro Max Case Mag Safe Magnetic Camera Lens Cover - Price: $8.99 - Source: eBay
2025-05-13 14:39:09,478 - DealFinderAI.PresentationAgent - INFO - Product 9: Amazon Product B0CZ7DYMJL - Price: $88.88 - Source: Amazon
2025-05-13 14:39:09,478 - DealFinderAI.PresentationAgent - INFO - Product 10: Amazon Product B07886RHHK - Price: $199.97 - Source: Amazon
2025-05-13 14:39:09,478 - DealFinderAI.ChatMemoryAgent - INFO - Storing context for conversation session_20250513142944_94641cab
2025-05-13 14:39:09,479 - DealFinderAI.ChatMemoryAgent - INFO - Storing 10 products for conversation session_20250513142944_94641cab
2025-05-13 14:39:09,479 - DealFinderAI.Controller - INFO - Successfully stored search results in memory
2025-05-13 14:39:54,040 - DealFinderAI.Controller - INFO - Processing user query: find me best deal on iphone 16 500 to 1000 dollar
2025-05-13 14:39:54,041 - DealFinderAI.ChatMemoryAgent - INFO - Analyzing query: 'find me best deal on iphone 16 500 to 1000 dollar' for conversation session_20250513142944_94641cab
2025-05-13 14:39:54,042 - DealFinderAI.ChatMemoryAgent - INFO - Found 10 products in memory
2025-05-13 14:39:54,043 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: 
        You are an AI helping to analyze if a user's query is a follow-up question about previously shown products, or if it's a completely new search.

        Previous products shown to the user:
        Product 1: Amazon Product B0DHR6DR7P
Product 2: For iPhone 16 15 14 13 12 11 Pro Max Tempered Glass Screen Camera Lens Protector
Product 3: Restored Apple iPhone 5S - 4G smartphone / Internal Memory 16 GB - LCD display - 4" - 1136 x 640 pixels - rear camera 8 MP - front camera 1.2 MP refurbished - space gray (Refurbished)
Product 4: Amazon Product B088NDPK5T
Product 5: Amazon Product B091JHNTNH

        User's new query: "find me best deal on iphone 16 500 to 1000 dollar"

        Please analyze if this query is:
        1. A follow-up question about the previously shown products (e.g., asking for more details, comparing them, etc.)
        2. A completely new search (e.g., asking about different products, starting a new topic)

        Return your analysis in JSON format:
        {
            "is_new_search": true/false,
            "is_follow_up": true/false,
            "reasoning": "brief explanation of your decision",
            "referenced_product_indices": [list of 0-based indices of referenced products, if any]
        }
        
        Only return the JSON, with no additional text.
        
2025-05-13 14:39:55,343 - DealFinderAI.Controller - INFO - Analyze response: {'is_follow_up': False, 'focused_product': None, 'referenced_products': [], 'products': []}
2025-05-13 14:39:55,343 - DealFinderAI.Controller - INFO - Is follow-up? False
2025-05-13 14:39:55,344 - DealFinderAI.Controller - INFO - Referenced products: 0
2025-05-13 14:39:55,344 - DealFinderAI.Controller - INFO - Processing as new search query
2025-05-13 14:39:55,344 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: find me best deal on iphone 16 500 to 1000 dollar
2025-05-13 14:39:56,632 - DealFinderAI.GeminiAgent - WARNING - Failed to parse Gemini response as JSON: ```json
{
  "product_type": "smartphone",
  "keywords": ["iphone 16"],
  "price_range": [500, 1000],
  "brands": ["Apple"],
  "features": [],
  "sorting_preference": "price_low_to_high",
  "buy_it_now": true
}
```

2025-05-13 14:39:56,633 - DealFinderAI.Controller - INFO - Parsed search parameters: {'product_type': 'smartphone', 'keywords': ['iphone 16'], 'price_range': [500, 1000], 'brands': ['Apple'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-13 14:39:56,633 - DealFinderAI.AmazonScraperAgent - INFO - Searching Amazon for: {'product_type': 'smartphone', 'keywords': ['iphone 16'], 'price_range': [500, 1000], 'brands': ['Apple'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-13 14:39:58,175 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B0BYHFHVK2 at 505.0 USD
2025-05-13 14:39:58,175 - DealFinderAI.AmazonScraperAgent - INFO - Adding product: Amazon Product B0BYHFHVK2 at 505.0 USD
2025-05-13 14:39:58,179 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B0BN92B3DP at 519.97 USD
2025-05-13 14:39:58,179 - DealFinderAI.AmazonScraperAgent - INFO - Adding product: Amazon Product B0BN92B3DP at 519.97 USD
2025-05-13 14:39:58,181 - DealFinderAI.AmazonScraperAgent - WARNING - Incomplete data for ASIN B0BGYBTF43, falling back to Gemini extraction.
2025-05-13 14:40:01,589 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B0BGYBTF43 at 0.0 USD
2025-05-13 14:40:01,590 - DealFinderAI.AmazonScraperAgent - INFO - Adding product: Amazon Product B0BGYBTF43 at 0.0 USD
2025-05-13 14:40:01,598 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B0BYHD5LN7 at 529.99 USD
2025-05-13 14:40:01,598 - DealFinderAI.AmazonScraperAgent - INFO - Adding product: Amazon Product B0BYHD5LN7 at 529.99 USD
2025-05-13 14:40:01,603 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B0BYHD6RD4 at 539.99 USD
2025-05-13 14:40:01,603 - DealFinderAI.AmazonScraperAgent - INFO - Adding product: Amazon Product B0BYHD6RD4 at 539.99 USD
2025-05-13 14:40:02,300 - DealFinderAI.AmazonScraperAgent - INFO - Returning 5 products
2025-05-13 14:40:02,301 - DealFinderAI.Controller - INFO - Amazon response content: {'source': 'Amazon', 'query': 'smartphone iphone 16 Apple', 'products': [{'title': 'Amazon Product B0BYHFHVK2', 'price': 505.0, 'currency': 'USD', 'url': 'https://www.amazon.com/dp/B0BYHFHVK2', 'image_url': 'https://m.media-amazon.com/images/I/716fAVud8PL._AC_UY218_.jpg', 'rating': 4.5, 'reviews': 28, 'is_sponsored': False, 'is_prime': False, 'asin': 'B0BYHFHVK2', 'description': 'Apple iPhone 14 Plus, 256GB, (PRODUCT)RED for Unlocked (Renewed Premium) Top Reviewed for Functionality4.5 out of 5 stars 28  Price, product page$505.00$505.00 List Price: $529.00List Price: $529.00$529.00FREE delivery Thu, May 15Only 1 left in stock - order soon.See optionsDisplay Size:6.7 inchesMemory:256 GBColor:(PRODUCT) RedBrand:Apple', 'source': 'Amazon'}, {'title': 'Amazon Product B0BN92B3DP', 'price': 519.97, 'currency': 'USD', 'url': 'https://www.amazon.com/dp/B0BN92B3DP', 'image_url': 'https://m.media-amazon.com/images/I/51BSZYdcy2L._AC_UY218_.jpg', 'rating': 4.0, 'reviews': 3217, 'is_sponsored': False, 'is_prime': False, 'asin': 'B0BN92B3DP', 'description': 'Apple iPhone 14 Pro, 128GB, Gold for T-Mobile (Renewed) Options:4 sizesTop Reviewed for Functionality4.0 out of 5 stars 3,217  Price, product page$519.97$519.97FREE delivery May 16 - 20Or fastest delivery Fri, May 16Only 1 left in stock - order soon.See optionsMore Buying Choices$519.95(3+ used & new offers)Display Size:-Memory:128 GBColor:GoldBrand:Apple', 'source': 'Amazon'}, {'title': 'Amazon Product B0BGYBTF43', 'price': 0.0, 'currency': 'USD', 'url': 'https://www.amazon.com/dp/B0BGYBTF43', 'image_url': 'https://m.media-amazon.com/images/I/61TDqdjGSgL._AC_UY218_.jpg', 'rating': 4.2, 'reviews': 2095, 'is_sponsored': False, 'is_prime': False, 'asin': 'B0BGYBTF43', 'description': 'Apple iPhone 13 Pro, 256GB, Silver - Unlocked (Renewed Premium) Options:4 sizes4.2 out of 5 stars 2,095  50+ bought in past monthClick to see priceFREE delivery May 29 - Jun 11Or fastest delivery May 28 - Jun 8See optionsDisplay Size:6.1 inchesMemory:256 GBColor:SilverBrand:Apple', 'source': 'Amazon'}, {'title': 'Amazon Product B0BYHD5LN7', 'price': 529.99, 'currency': 'USD', 'url': 'https://www.amazon.com/dp/B0BYHD5LN7', 'image_url': 'https://m.media-amazon.com/images/I/61B0+qQriPL._AC_UY218_.jpg', 'rating': 4.0, 'reviews': 51, 'is_sponsored': False, 'is_prime': False, 'asin': 'B0BYHD5LN7', 'description': 'Apple iPhone 14 Plus, 256GB, Midnight for Unlocked (Renewed Premium) 4.0 out of 5 stars 51  Price, product page$529.99$529.99FREE delivery Thu, May 15Only 1 left in stock - order soon.See optionsMore Buying Choices$468.50(4 used & new offers)Display Size:6.7 inchesMemory:256 GBColor:MidnightBrand:Apple', 'source': 'Amazon'}, {'title': 'Amazon Product B0BYHD6RD4', 'price': 539.99, 'currency': 'USD', 'url': 'https://www.amazon.com/dp/B0BYHD6RD4', 'image_url': 'https://m.media-amazon.com/images/I/61YSNhAb00L._AC_UY218_.jpg', 'rating': 4.6, 'reviews': 59, 'is_sponsored': False, 'is_prime': False, 'asin': 'B0BYHD6RD4', 'description': 'Apple iPhone 14 Plus, 256GB, Purple for Unlocked (Renewed Premium) 4.6 out of 5 stars 59  Price, product page$539.99$539.99FREE delivery Thu, May 15Only 5 left in stock - order soon.See optionsDisplay Size:6.7 inchesMemory:256 GBColor:PurpleBrand:Apple', 'source': 'Amazon'}]}
2025-05-13 14:40:02,302 - DealFinderAI.Controller - INFO - Amazon returned 5 products
2025-05-13 14:40:02,302 - DealFinderAI.WalmartScraperAgent - INFO - Searching Walmart for: {'product_type': 'smartphone', 'keywords': ['iphone 16'], 'price_range': [500, 1000], 'brands': ['Apple'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-13 14:40:06,360 - DealFinderAI.WalmartScraperAgent - INFO - Extracted 0 products from JSON data
2025-05-13 14:40:06,363 - DealFinderAI.WalmartScraperAgent - INFO - Found 9 product divs in HTML
2025-05-13 14:40:08,914 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 14:40:08,915 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Straight Talk Apple iPhone 16, 128GB, White - Prepaid Smartphone [Locked to Straight Talk] at 829.0 USD
2025-05-13 14:40:08,915 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Straight Talk Apple iPhone 16, 128GB, White - Prepaid Smartphone [Locked to Straight Talk] at 829.0 USD
2025-05-13 14:40:11,102 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 14:40:11,103 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Straight Talk Apple iPhone 16, 128GB, Teal - Prepaid Smartphone [Locked to Straight Talk] at 829.0 USD
2025-05-13 14:40:11,104 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Straight Talk Apple iPhone 16, 128GB, Teal - Prepaid Smartphone [Locked to Straight Talk] at 829.0 USD
2025-05-13 14:40:13,767 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 14:40:13,767 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Straight Talk Apple iPhone 16, 256GB, White - Prepaid Smartphone [Locked to Straight Talk] at 929.0 USD
2025-05-13 14:40:13,767 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Straight Talk Apple iPhone 16, 256GB, White - Prepaid Smartphone [Locked to Straight Talk] at 929.0 USD
2025-05-13 14:40:16,027 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 14:40:16,027 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Straight Talk Apple iPhone 16 Plus, 128GB, Blue - Prepaid Smartphone [Locked to Straight Talk] at 929.0 USD
2025-05-13 14:40:16,028 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Straight Talk Apple iPhone 16 Plus, 128GB, Blue - Prepaid Smartphone [Locked to Straight Talk] at 929.0 USD
2025-05-13 14:40:18,244 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 14:40:18,244 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Straight Talk Apple iPhone 16 Plus, 128GB, White - Prepaid Smartphone [Locked to Straight Talk] at 929.0 USD
2025-05-13 14:40:18,245 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Straight Talk Apple iPhone 16 Plus, 128GB, White - Prepaid Smartphone [Locked to Straight Talk] at 929.0 USD
2025-05-13 14:40:18,245 - DealFinderAI.WalmartScraperAgent - INFO - Extracted 5 products from HTML
2025-05-13 14:40:18,245 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Straight Talk Apple iPhone 16, 128GB, White - Prepaid Smartphone [Locked to Straight Talk] at 829.0 USD
2025-05-13 14:40:18,246 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Straight Talk Apple iPhone 16, 128GB, Teal - Prepaid Smartphone [Locked to Straight Talk] at 829.0 USD
2025-05-13 14:40:18,246 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Straight Talk Apple iPhone 16, 256GB, White - Prepaid Smartphone [Locked to Straight Talk] at 929.0 USD
2025-05-13 14:40:18,246 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Straight Talk Apple iPhone 16 Plus, 128GB, Blue - Prepaid Smartphone [Locked to Straight Talk] at 929.0 USD
2025-05-13 14:40:18,246 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Straight Talk Apple iPhone 16 Plus, 128GB, White - Prepaid Smartphone [Locked to Straight Talk] at 929.0 USD
2025-05-13 14:40:18,754 - DealFinderAI.WalmartScraperAgent - INFO - Returning 5 products from Walmart
2025-05-13 14:40:18,756 - DealFinderAI.Controller - INFO - Walmart returned 5 products
2025-05-13 14:40:18,756 - DealFinderAI.EbayScraperAgent - INFO - Searching eBay for: {'product_type': 'smartphone', 'keywords': ['iphone 16'], 'price_range': [500, 1000], 'brands': ['Apple'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-13 14:40:19,791 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 16 Plus A3082 128GB Black Smartphone  SPECTRUM  cycle count 7 at 500.0 USD
2025-05-13 14:40:19,792 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 16 Plus A3082 128GB Black Smartphone  SPECTRUM  cycle count 7 at 500.0 USD
2025-05-13 14:40:19,792 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 16 US Cellular Locked (Open New) Teal - 100% Battery at 500.0 USD
2025-05-13 14:40:19,792 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 16 US Cellular Locked (Open New) Teal - 100% Battery at 500.0 USD
2025-05-13 14:40:19,793 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 14, 128gb, Midnight, Carrier Unlocked, Excellent Condition!! at 500.0 USD
2025-05-13 14:40:19,793 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 14, 128gb, Midnight, Carrier Unlocked, Excellent Condition!! at 500.0 USD
2025-05-13 14:40:19,794 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 14 Plus- 128 GB - Purple (Unlocked) at 500.0 USD
2025-05-13 14:40:19,794 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 14 Plus- 128 GB - Purple (Unlocked) at 500.0 USD
2025-05-13 14:40:19,795 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 14 Pro Max 512GB Unlocked Very Good Condition - All Colors at 749.99 USD
2025-05-13 14:40:19,795 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 14 Pro Max 512GB Unlocked Very Good Condition - All Colors at 749.99 USD
2025-05-13 14:40:20,934 - DealFinderAI.EbayScraperAgent - INFO - Returning 5 products from eBay
2025-05-13 14:40:20,935 - DealFinderAI.Controller - INFO - eBay returned 5 products
2025-05-13 14:40:20,935 - DealFinderAI.Controller - INFO - Total products before aggregation: 15
2025-05-13 14:40:20,936 - DealFinderAI.ResultsAggregatorAgent - INFO - Aggregating results for query: find me best deal on iphone 16 500 to 1000 dollar
2025-05-13 14:40:20,936 - DealFinderAI.ResultsAggregatorAgent - INFO - Found 3 results from various sources
2025-05-13 14:40:20,936 - DealFinderAI.ResultsAggregatorAgent - INFO - Source Amazon: 5 products
2025-05-13 14:40:20,936 - DealFinderAI.ResultsAggregatorAgent - INFO - Source Walmart: 5 products
2025-05-13 14:40:20,936 - DealFinderAI.ResultsAggregatorAgent - INFO - Source eBay: 5 products
2025-05-13 14:40:20,936 - DealFinderAI.ResultsAggregatorAgent - INFO - Total products extracted: 15
2025-05-13 14:40:20,936 - DealFinderAI.ResultsAggregatorAgent - INFO - Ranking 15 products
2025-05-13 14:40:20,936 - DealFinderAI.ResultsAggregatorAgent - INFO - Sorted 15 products by score
2025-05-13 14:40:20,937 - DealFinderAI.ResultsAggregatorAgent - INFO - Returning 10 diversified products
2025-05-13 14:40:20,937 - DealFinderAI.ResultsAggregatorAgent - INFO - Products after ranking: 10
2025-05-13 14:40:20,937 - DealFinderAI.ResultsAggregatorAgent - INFO - Final products: 10
2025-05-13 14:40:20,937 - DealFinderAI.Controller - INFO - Products after aggregation: 10
2025-05-13 14:40:20,937 - DealFinderAI.ProductComparisonAgent - INFO - Comparing products for query: find me best deal on iphone 16 500 to 1000 dollar
2025-05-13 14:40:20,937 - DealFinderAI.ProductComparisonAgent - INFO - Found 10 products to compare
2025-05-13 14:40:20,937 - DealFinderAI.ProductComparisonAgent - INFO - Grouping 10 products
2025-05-13 14:40:20,938 - DealFinderAI.ProductComparisonAgent - INFO - Created 0 product groups
2025-05-13 14:40:20,938 - DealFinderAI.ChatMemoryAgent - INFO - Storing context for conversation session_20250513142944_94641cab
2025-05-13 14:40:20,938 - DealFinderAI.ChatMemoryAgent - INFO - Storing 10 products for conversation session_20250513142944_94641cab
2025-05-13 14:40:20,938 - DealFinderAI.PresentationAgent - INFO - Preparing presentation for 10 products
2025-05-13 14:40:20,938 - DealFinderAI.PresentationAgent - INFO - Formatting 10 products for display
2025-05-13 14:40:20,938 - DealFinderAI.PresentationAgent - INFO - Product 1: Amazon Product B0BGYBTF43 - Price: $0.00 - Source: Amazon
2025-05-13 14:40:20,938 - DealFinderAI.PresentationAgent - INFO - Product 2: Apple iPhone 14 Pro Max 512GB Unlocked Very Good Condition - All Colors - Price: $749.99 - Source: eBay
2025-05-13 14:40:20,938 - DealFinderAI.PresentationAgent - INFO - Product 3: Straight Talk Apple iPhone 16, 128GB, White - Prepaid Smartphone [Locked to Straight Talk] - Price: $829.00 - Source: Walmart
2025-05-13 14:40:20,938 - DealFinderAI.PresentationAgent - INFO - Product 4: Amazon Product B0BN92B3DP - Price: $519.97 - Source: Amazon
2025-05-13 14:40:20,939 - DealFinderAI.PresentationAgent - INFO - Product 5: Amazon Product B0BYHD6RD4 - Price: $539.99 - Source: Amazon
2025-05-13 14:40:20,939 - DealFinderAI.PresentationAgent - INFO - Product 6: Amazon Product B0BYHFHVK2 - Price: $505.00 - Source: Amazon
2025-05-13 14:40:20,939 - DealFinderAI.PresentationAgent - INFO - Product 7: Amazon Product B0BYHD5LN7 - Price: $529.99 - Source: Amazon
2025-05-13 14:40:20,939 - DealFinderAI.PresentationAgent - INFO - Product 8: Apple iPhone 16 Plus A3082 128GB Black Smartphone  SPECTRUM  cycle count 7 - Price: $500.00 - Source: eBay
2025-05-13 14:40:20,939 - DealFinderAI.PresentationAgent - INFO - Product 9: Apple iPhone 14, 128gb, Midnight, Carrier Unlocked, Excellent Condition!! - Price: $500.00 - Source: eBay
2025-05-13 14:40:20,939 - DealFinderAI.PresentationAgent - INFO - Product 10: Apple iPhone 14 Plus- 128 GB - Purple (Unlocked) - Price: $500.00 - Source: eBay
2025-05-13 14:40:20,939 - DealFinderAI.ChatMemoryAgent - INFO - Storing context for conversation session_20250513142944_94641cab
2025-05-13 14:40:20,939 - DealFinderAI.ChatMemoryAgent - INFO - Storing 10 products for conversation session_20250513142944_94641cab
2025-05-13 14:40:20,939 - DealFinderAI.Controller - INFO - Successfully stored search results in memory
2025-05-13 14:41:51,900 - DealFinderAI.Controller - INFO - Processing user query: Tell me more about product 6
2025-05-13 14:41:51,901 - DealFinderAI.ChatMemoryAgent - INFO - Analyzing query: 'Tell me more about product 6' for conversation session_20250513142944_94641cab
2025-05-13 14:41:51,902 - DealFinderAI.ChatMemoryAgent - INFO - Found 10 products in memory
2025-05-13 14:41:51,905 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: 
        You are an AI helping to analyze if a user's query is a follow-up question about previously shown products, or if it's a completely new search.

        Previous products shown to the user:
        Product 1: Amazon Product B0BGYBTF43
Product 2: Apple iPhone 14 Pro Max 512GB Unlocked Very Good Condition - All Colors
Product 3: Straight Talk Apple iPhone 16, 128GB, White - Prepaid Smartphone [Locked to Straight Talk]
Product 4: Amazon Product B0BN92B3DP
Product 5: Amazon Product B0BYHD6RD4

        User's new query: "Tell me more about product 6"

        Please analyze if this query is:
        1. A follow-up question about the previously shown products (e.g., asking for more details, comparing them, etc.)
        2. A completely new search (e.g., asking about different products, starting a new topic)

        Return your analysis in JSON format:
        {
            "is_new_search": true/false,
            "is_follow_up": true/false,
            "reasoning": "brief explanation of your decision",
            "referenced_product_indices": [list of 0-based indices of referenced products, if any]
        }
        
        Only return the JSON, with no additional text.
        
2025-05-13 14:41:53,734 - DealFinderAI.Controller - INFO - Analyze response: {'is_follow_up': False, 'focused_product': None, 'referenced_products': [], 'products': []}
2025-05-13 14:41:53,734 - DealFinderAI.Controller - INFO - Is follow-up? False
2025-05-13 14:41:53,734 - DealFinderAI.Controller - INFO - Referenced products: 0
2025-05-13 14:41:53,734 - DealFinderAI.Controller - INFO - Processing as new search query
2025-05-13 14:41:53,735 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: Tell me more about product 6
2025-05-13 14:41:54,476 - DealFinderAI.GeminiAgent - WARNING - Failed to parse Gemini response as JSON: ```json
{
  "product_type": null,
  "keywords": ["product 6"],
  "price_range": null,
  "brands": null,
  "features": null,
  "sorting_preference": null,
  "buy_it_now": null
}
```

2025-05-13 14:41:54,477 - DealFinderAI.Controller - INFO - Parsed search parameters: {'product_type': None, 'keywords': ['product 6'], 'price_range': None, 'brands': None, 'features': None, 'sorting_preference': None, 'buy_it_now': None}
2025-05-13 14:41:54,477 - DealFinderAI.AmazonScraperAgent - INFO - Searching Amazon for: {'product_type': None, 'keywords': ['product 6'], 'price_range': None, 'brands': None, 'features': None, 'sorting_preference': None, 'buy_it_now': None}
2025-05-13 14:41:54,478 - DealFinderAI.AmazonScraperAgent - ERROR - Error scraping Amazon: sequence item 0: expected str instance, NoneType found
2025-05-13 14:41:54,478 - DealFinderAI.Controller - WARNING - Amazon search error: {'error': 'Amazon scraping error: sequence item 0: expected str instance, NoneType found'}
2025-05-13 14:41:54,478 - DealFinderAI.WalmartScraperAgent - INFO - Searching Walmart for: {'product_type': None, 'keywords': ['product 6'], 'price_range': None, 'brands': None, 'features': None, 'sorting_preference': None, 'buy_it_now': None}
2025-05-13 14:41:54,478 - DealFinderAI.WalmartScraperAgent - ERROR - Error scraping Walmart: sequence item 0: expected str instance, NoneType found
2025-05-13 14:41:54,479 - DealFinderAI.Controller - WARNING - Walmart search error: {'error': 'Walmart scraping error: sequence item 0: expected str instance, NoneType found'}
2025-05-13 14:41:54,479 - DealFinderAI.EbayScraperAgent - INFO - Searching eBay for: {'product_type': None, 'keywords': ['product 6'], 'price_range': None, 'brands': None, 'features': None, 'sorting_preference': None, 'buy_it_now': None}
2025-05-13 14:41:54,479 - DealFinderAI.EbayScraperAgent - ERROR - Error scraping eBay: sequence item 0: expected str instance, NoneType found
2025-05-13 14:41:54,479 - DealFinderAI.Controller - WARNING - eBay search error: {'error': 'eBay scraping error: sequence item 0: expected str instance, NoneType found'}
2025-05-13 14:41:54,479 - DealFinderAI.Controller - INFO - Total products before aggregation: 0
2025-05-13 14:41:54,479 - DealFinderAI.ResultsAggregatorAgent - INFO - Aggregating results for query: Tell me more about product 6
2025-05-13 14:41:54,479 - DealFinderAI.ResultsAggregatorAgent - INFO - Found 0 results from various sources
2025-05-13 14:41:54,479 - DealFinderAI.ResultsAggregatorAgent - INFO - Total products extracted: 0
2025-05-13 14:41:54,480 - DealFinderAI.ResultsAggregatorAgent - WARNING - No products found in any source
2025-05-13 14:42:06,306 - DealFinderAI.Controller - INFO - Processing user query: Which one has the best reviews?'
2025-05-13 14:42:06,306 - DealFinderAI.ChatMemoryAgent - INFO - Analyzing query: 'Which one has the best reviews?'' for conversation session_20250513142944_94641cab
2025-05-13 14:42:06,306 - DealFinderAI.ChatMemoryAgent - INFO - Found 10 products in memory
2025-05-13 14:42:06,307 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: 
        You are an AI helping to analyze if a user's query is a follow-up question about previously shown products, or if it's a completely new search.

        Previous products shown to the user:
        Product 1: Amazon Product B0BGYBTF43
Product 2: Apple iPhone 14 Pro Max 512GB Unlocked Very Good Condition - All Colors
Product 3: Straight Talk Apple iPhone 16, 128GB, White - Prepaid Smartphone [Locked to Straight Talk]
Product 4: Amazon Product B0BN92B3DP
Product 5: Amazon Product B0BYHD6RD4

        User's new query: "Which one has the best reviews?'"

        Please analyze if this query is:
        1. A follow-up question about the previously shown products (e.g., asking for more details, comparing them, etc.)
        2. A completely new search (e.g., asking about different products, starting a new topic)

        Return your analysis in JSON format:
        {
            "is_new_search": true/false,
            "is_follow_up": true/false,
            "reasoning": "brief explanation of your decision",
            "referenced_product_indices": [list of 0-based indices of referenced products, if any]
        }
        
        Only return the JSON, with no additional text.
        
2025-05-13 14:42:07,541 - DealFinderAI.Controller - INFO - Analyze response: {'is_follow_up': True, 'focused_product': 0, 'referenced_products': [{'title': 'Amazon Product B0BGYBTF43', 'price': 0.0, 'currency': 'USD', 'url': 'https://www.amazon.com/dp/B0BGYBTF43', 'image_url': 'https://m.media-amazon.com/images/I/61TDqdjGSgL._AC_UY218_.jpg', 'rating': 4.2, 'reviews': 2095, 'is_sponsored': False, 'is_prime': False, 'asin': 'B0BGYBTF43', 'description': 'Apple iPhone 13 Pro, 256GB, Silver - Unlocked (Renewed Premium) Options:4 sizes4.2 out of 5 stars 2,095  50+ bought in past monthClick to see priceFREE delivery May 29 - Jun 11Or fastest delivery May 28 - Jun 8See optionsDisplay Size:6.1 inchesMemory:256 GBColor:SilverBrand:Apple', 'source': 'Amazon', '_score': 82.0}, {'title': 'Apple iPhone 14 Pro Max 512GB Unlocked Very Good Condition - All Colors', 'price': 749.99, 'shipping': 0.0, 'total_price': 749.99, 'is_free_shipping': True, 'currency': 'USD', 'url': 'https://www.ebay.com/itm/296097674434?_skw=smartphone+iphone+16+Apple&epid=6056270104&itmmeta=01JV5F56RT3N9J0JX9ZSSFKBZ0&hash=item44f0cbf4c2%3Ag%3A1bMAAOSwe6Nlcz%7Er&itmprp=enc%3AAQAKAAAA4FkggFvd1GGDu0w3yXCmi1dVnWjO%2BC5xwKZMkSjrFLTqrA0M7fB2quFYufouZcMMucyEpp%2Bx5Z%2BLXFte7WYYyvQUMfiSz5hW%2FyhKoe95J96I3LD8Tf3LzHVE6SEzvhDxw1rMEOBnLkf551rvxRgkPJnLlmuUndF5FEAsa9u%2B%2F0UJKoZIPVb7P87SLWmQTvd9UdS3NSIsXkNP%2BwIQL5x2DwjsXznDfYSupqdX5cpL7hsIVKb1Peht8kvTb4ZhetSWtdxIY35cm9tKWj1gr2fU3UVQAevl7RDC2pTR08fc0r08%7Ctkp%3ABlBMUKTtlK_ZZQ&keyword=smartphone+iphone+16+Apple&sacat=0&relatedSearch=true&LH_BIN=1', 'image_url': '', 'is_sponsored': False, 'condition': 'Very Good - Refurbished', 'listing_type': 'Buy It Now', 'seller_rating': 98.8, 'item_id': '296097674434', 'description': '', 'source': 'eBay', '_score': 45}, {'title': 'Straight Talk Apple iPhone 16, 128GB, White - Prepaid Smartphone [Locked to Straight Talk]', 'price': 829.0, 'currency': 'USD', 'url': '/ip/Straight-Talk-Apple-iPhone-16-128GB-White-Prepaid-Smartphone-Locked-to-Straight-Talk/11601059297?classType=REGULAR&athbdg=L1103&from=/search', 'image_url': 'https://i5.walmartimages.com/seo/Straight-Talk-Apple-iPhone-16-128GB-White-Prepaid-Smartphone-Locked-to-Straight-Talk_7f52d4b1-47ea-40cc-ae62-2b5edf40f29b.8ef1f8d28ce70177fbc03331f9fa9064.jpeg?odnHeight=580&odnWidth=580&odnBg=FFFFFF', 'rating': 0.0, 'reviews': 0, 'is_sponsored': False, 'is_pickup_today': False, 'product_id': '3VYN46XFXQYH', 'description': '', 'source': 'Walmart', '_score': 20.0}, {'title': 'Amazon Product B0BN92B3DP', 'price': 519.97, 'currency': 'USD', 'url': 'https://www.amazon.com/dp/B0BN92B3DP', 'image_url': 'https://m.media-amazon.com/images/I/51BSZYdcy2L._AC_UY218_.jpg', 'rating': 4.0, 'reviews': 3217, 'is_sponsored': False, 'is_prime': False, 'asin': 'B0BN92B3DP', 'description': 'Apple iPhone 14 Pro, 128GB, Gold for T-Mobile (Renewed) Options:4 sizesTop Reviewed for Functionality4.0 out of 5 stars 3,217  Price, product page$519.97$519.97FREE delivery May 16 - 20Or fastest delivery Fri, May 16Only 1 left in stock - order soon.See optionsMore Buying Choices$519.95(3+ used & new offers)Display Size:-Memory:128 GBColor:GoldBrand:Apple', 'source': 'Amazon', '_score': 75.0}, {'title': 'Amazon Product B0BYHD6RD4', 'price': 539.99, 'currency': 'USD', 'url': 'https://www.amazon.com/dp/B0BYHD6RD4', 'image_url': 'https://m.media-amazon.com/images/I/61YSNhAb00L._AC_UY218_.jpg', 'rating': 4.6, 'reviews': 59, 'is_sponsored': False, 'is_prime': False, 'asin': 'B0BYHD6RD4', 'description': 'Apple iPhone 14 Plus, 256GB, Purple for Unlocked (Renewed Premium) 4.6 out of 5 stars 59  Price, product page$539.99$539.99FREE delivery Thu, May 15Only 5 left in stock - order soon.See optionsDisplay Size:6.7 inchesMemory:256 GBColor:PurpleBrand:Apple', 'source': 'Amazon', '_score': 66.0}], 'products': []}
2025-05-13 14:42:07,541 - DealFinderAI.Controller - INFO - Is follow-up? True
2025-05-13 14:42:07,541 - DealFinderAI.Controller - INFO - Referenced products: 5
2025-05-13 14:42:07,542 - DealFinderAI.Controller - INFO - Handling as follow-up question about 5 products
2025-05-13 14:42:07,542 - DealFinderAI.Controller - INFO - Handling follow-up question: Which one has the best reviews?'
2025-05-13 14:42:07,542 - DealFinderAI.Controller - INFO - Referenced products: 5
2025-05-13 14:42:07,542 - DealFinderAI.Controller - INFO - Follow-up for product: Amazon Product B0BGYBTF43
2025-05-13 14:42:07,542 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: 
            I'm a shopping assistant helping a customer with product information.
            
            The customer previously searched for products and is now asking a follow-up question: "Which one has the best reviews?'"
            
            They're referring to this product:
            {
  "title": "Amazon Product B0BGYBTF43",
  "price": 0.0,
  "currency": "USD",
  "url": "https://www.amazon.com/dp/B0BGYBTF43",
  "image_url": "https://m.media-amazon.com/images/I/61TDqdjGSgL._AC_UY218_.jpg",
  "rating": 4.2,
  "reviews": 2095,
  "is_sponsored": false,
  "is_prime": false,
  "asin": "B0BGYBTF43",
  "description": "Apple iPhone 13 Pro, 256GB, Silver - Unlocked (Renewed Premium) Options:4 sizes4.2 out of 5 stars 2,095  50+ bought in past monthClick to see priceFREE delivery May 29 - Jun 11Or fastest delivery May 28 - Jun 8See optionsDisplay Size:6.1 inchesMemory:256 GBColor:SilverBrand:Apple",
  "source": "Amazon",
  "_score": 82.0,
  "formatted_price": "$0.00"
}
            
            Please provide a helpful, conversational response addressing their question
            about this specific product. Include relevant details from the product information.
            
            Important guidelines:
            1. Always format prices as exact dollar amounts (e.g., "$0.00" not "$1")
            2. Format URLs as clickable HTML links <a href="url">url</a>
            3. If the product has a price field, be sure to mention the exact price as shown in the data
            4. Be accurate about the product details - don't make up information not in the data
            5. If the product is a "best deal", explain why it's a good value
            
            Your response should be conversational but accurate, highlighting the actual price 
            and key product features. Don't create fake discounts or savings.
            
2025-05-13 14:42:16,325 - DealFinderAI.Controller - INFO - Processing user query: Tell me more about product 6
2025-05-13 14:42:16,326 - DealFinderAI.ChatMemoryAgent - INFO - Analyzing query: 'Tell me more about product 6' for conversation session_20250513142944_94641cab
2025-05-13 14:42:16,326 - DealFinderAI.ChatMemoryAgent - INFO - Found 10 products in memory
2025-05-13 14:42:16,326 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: 
        You are an AI helping to analyze if a user's query is a follow-up question about previously shown products, or if it's a completely new search.

        Previous products shown to the user:
        Product 1: Amazon Product B0BGYBTF43
Product 2: Apple iPhone 14 Pro Max 512GB Unlocked Very Good Condition - All Colors
Product 3: Straight Talk Apple iPhone 16, 128GB, White - Prepaid Smartphone [Locked to Straight Talk]
Product 4: Amazon Product B0BN92B3DP
Product 5: Amazon Product B0BYHD6RD4

        User's new query: "Tell me more about product 6"

        Please analyze if this query is:
        1. A follow-up question about the previously shown products (e.g., asking for more details, comparing them, etc.)
        2. A completely new search (e.g., asking about different products, starting a new topic)

        Return your analysis in JSON format:
        {
            "is_new_search": true/false,
            "is_follow_up": true/false,
            "reasoning": "brief explanation of your decision",
            "referenced_product_indices": [list of 0-based indices of referenced products, if any]
        }
        
        Only return the JSON, with no additional text.
        
2025-05-13 14:42:17,107 - DealFinderAI.Controller - INFO - Analyze response: {'is_follow_up': False, 'focused_product': None, 'referenced_products': [], 'products': []}
2025-05-13 14:42:17,107 - DealFinderAI.Controller - INFO - Is follow-up? False
2025-05-13 14:42:17,108 - DealFinderAI.Controller - INFO - Referenced products: 0
2025-05-13 14:42:17,108 - DealFinderAI.Controller - INFO - Processing as new search query
2025-05-13 14:42:17,108 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: Tell me more about product 6
2025-05-13 14:42:17,790 - DealFinderAI.GeminiAgent - WARNING - Failed to parse Gemini response as JSON: ```json
{
  "product_type": null,
  "keywords": ["product 6"],
  "price_range": null,
  "brands": null,
  "features": null,
  "sorting_preference": null,
  "buy_it_now": null
}
```

2025-05-13 14:42:17,791 - DealFinderAI.Controller - INFO - Parsed search parameters: {'product_type': None, 'keywords': ['product 6'], 'price_range': None, 'brands': None, 'features': None, 'sorting_preference': None, 'buy_it_now': None}
2025-05-13 14:42:17,791 - DealFinderAI.AmazonScraperAgent - INFO - Searching Amazon for: {'product_type': None, 'keywords': ['product 6'], 'price_range': None, 'brands': None, 'features': None, 'sorting_preference': None, 'buy_it_now': None}
2025-05-13 14:42:17,792 - DealFinderAI.AmazonScraperAgent - ERROR - Error scraping Amazon: sequence item 0: expected str instance, NoneType found
2025-05-13 14:42:17,792 - DealFinderAI.Controller - WARNING - Amazon search error: {'error': 'Amazon scraping error: sequence item 0: expected str instance, NoneType found'}
2025-05-13 14:42:17,792 - DealFinderAI.WalmartScraperAgent - INFO - Searching Walmart for: {'product_type': None, 'keywords': ['product 6'], 'price_range': None, 'brands': None, 'features': None, 'sorting_preference': None, 'buy_it_now': None}
2025-05-13 14:42:17,792 - DealFinderAI.WalmartScraperAgent - ERROR - Error scraping Walmart: sequence item 0: expected str instance, NoneType found
2025-05-13 14:42:17,792 - DealFinderAI.Controller - WARNING - Walmart search error: {'error': 'Walmart scraping error: sequence item 0: expected str instance, NoneType found'}
2025-05-13 14:42:17,793 - DealFinderAI.EbayScraperAgent - INFO - Searching eBay for: {'product_type': None, 'keywords': ['product 6'], 'price_range': None, 'brands': None, 'features': None, 'sorting_preference': None, 'buy_it_now': None}
2025-05-13 14:42:17,793 - DealFinderAI.EbayScraperAgent - ERROR - Error scraping eBay: sequence item 0: expected str instance, NoneType found
2025-05-13 14:42:17,793 - DealFinderAI.Controller - WARNING - eBay search error: {'error': 'eBay scraping error: sequence item 0: expected str instance, NoneType found'}
2025-05-13 14:42:17,793 - DealFinderAI.Controller - INFO - Total products before aggregation: 0
2025-05-13 14:42:17,793 - DealFinderAI.ResultsAggregatorAgent - INFO - Aggregating results for query: Tell me more about product 6
2025-05-13 14:42:17,793 - DealFinderAI.ResultsAggregatorAgent - INFO - Found 0 results from various sources
2025-05-13 14:42:17,793 - DealFinderAI.ResultsAggregatorAgent - INFO - Total products extracted: 0
2025-05-13 14:42:17,793 - DealFinderAI.ResultsAggregatorAgent - WARNING - No products found in any source
2025-05-13 14:42:58,206 - DealFinderAI.Controller - INFO - Processing user query: find me best deal on amazon echo
2025-05-13 14:42:58,207 - DealFinderAI.ChatMemoryAgent - INFO - Analyzing query: 'find me best deal on amazon echo' for conversation session_20250513142944_94641cab
2025-05-13 14:42:58,208 - DealFinderAI.ChatMemoryAgent - INFO - Found 10 products in memory
2025-05-13 14:42:58,209 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: 
        You are an AI helping to analyze if a user's query is a follow-up question about previously shown products, or if it's a completely new search.

        Previous products shown to the user:
        Product 1: Amazon Product B0BGYBTF43
Product 2: Apple iPhone 14 Pro Max 512GB Unlocked Very Good Condition - All Colors
Product 3: Straight Talk Apple iPhone 16, 128GB, White - Prepaid Smartphone [Locked to Straight Talk]
Product 4: Amazon Product B0BN92B3DP
Product 5: Amazon Product B0BYHD6RD4

        User's new query: "find me best deal on amazon echo"

        Please analyze if this query is:
        1. A follow-up question about the previously shown products (e.g., asking for more details, comparing them, etc.)
        2. A completely new search (e.g., asking about different products, starting a new topic)

        Return your analysis in JSON format:
        {
            "is_new_search": true/false,
            "is_follow_up": true/false,
            "reasoning": "brief explanation of your decision",
            "referenced_product_indices": [list of 0-based indices of referenced products, if any]
        }
        
        Only return the JSON, with no additional text.
        
2025-05-13 14:42:59,257 - DealFinderAI.Controller - INFO - Analyze response: {'is_follow_up': False, 'focused_product': None, 'referenced_products': [], 'products': []}
2025-05-13 14:42:59,258 - DealFinderAI.Controller - INFO - Is follow-up? False
2025-05-13 14:42:59,258 - DealFinderAI.Controller - INFO - Referenced products: 0
2025-05-13 14:42:59,258 - DealFinderAI.Controller - INFO - Processing as new search query
2025-05-13 14:42:59,258 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: find me best deal on amazon echo
2025-05-13 14:43:00,070 - DealFinderAI.GeminiAgent - WARNING - Failed to parse Gemini response as JSON: ```json
{
  "product_type": "smart speakers",
  "keywords": ["amazon echo"],
  "price_range": null,
  "brands": ["Amazon"],
  "features": [],
  "sorting_preference": "price_low_to_high",
  "buy_it_now": true
}
```

2025-05-13 14:43:00,071 - DealFinderAI.Controller - INFO - Parsed search parameters: {'product_type': 'smart speakers', 'keywords': ['amazon echo'], 'price_range': None, 'brands': ['Amazon'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-13 14:43:00,071 - DealFinderAI.AmazonScraperAgent - INFO - Searching Amazon for: {'product_type': 'smart speakers', 'keywords': ['amazon echo'], 'price_range': None, 'brands': ['Amazon'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-13 14:43:01,567 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B0D4Y4T1Z1 at 6.81 USD
2025-05-13 14:43:01,567 - DealFinderAI.AmazonScraperAgent - INFO - Adding product: Amazon Product B0D4Y4T1Z1 at 6.81 USD
2025-05-13 14:43:01,569 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B0D4QKLT1L at 6.81 USD
2025-05-13 14:43:01,569 - DealFinderAI.AmazonScraperAgent - INFO - Adding product: Amazon Product B0D4QKLT1L at 6.81 USD
2025-05-13 14:43:01,571 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B0D41SCX42 at 6.81 USD
2025-05-13 14:43:01,571 - DealFinderAI.AmazonScraperAgent - INFO - Adding product: Amazon Product B0D41SCX42 at 6.81 USD
2025-05-13 14:43:01,573 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B0D7THLDDL at 6.99 USD
2025-05-13 14:43:01,573 - DealFinderAI.AmazonScraperAgent - INFO - Adding product: Amazon Product B0D7THLDDL at 6.99 USD
2025-05-13 14:43:01,574 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B0CMPY1639 at 6.99 USD
2025-05-13 14:43:01,574 - DealFinderAI.AmazonScraperAgent - INFO - Adding product: Amazon Product B0CMPY1639 at 6.99 USD
2025-05-13 14:43:02,171 - DealFinderAI.AmazonScraperAgent - INFO - Returning 5 products
2025-05-13 14:43:02,173 - DealFinderAI.Controller - INFO - Amazon response content: {'source': 'Amazon', 'query': 'smart speakers amazon echo Amazon', 'products': [{'title': 'Amazon Product B0D4Y4T1Z1', 'price': 6.81, 'currency': 'USD', 'url': 'https://www.amazon.com/dp/B0D4Y4T1Z1', 'image_url': 'https://m.media-amazon.com/images/I/41O8e6nzPQL._AC_UY218_.jpg', 'rating': 0.0, 'reviews': 0, 'is_sponsored': False, 'is_prime': False, 'asin': 'B0D4Y4T1Z1', 'description': '2-Prong AC in Power Cord Cable Replacement for Amazon Echo Studio Hi-fi Smart Speaker Digital_Device_3 Digital-Device-3 3D Audio Bose Home Speaker 500 HS500B Echo Sub P5B83L 100W AC Powered Price, product page$6.81$6.81$5.99 delivery May 16 - 21 Or fastest delivery May 15 - 20 Add to cart', 'source': 'Amazon'}, {'title': 'Amazon Product B0D4QKLT1L', 'price': 6.81, 'currency': 'USD', 'url': 'https://www.amazon.com/dp/B0D4QKLT1L', 'image_url': 'https://m.media-amazon.com/images/I/61hTRIWvnDL._AC_UY218_.jpg', 'rating': 0.0, 'reviews': 0, 'is_sponsored': False, 'is_prime': False, 'asin': 'B0D4QKLT1L', 'description': 'YUSTDA2-Prong AC in Power Cord Cable Replacement for Amazon Echo Studio Hi-fi Smart Speaker Digital_Device_3 Digital-Device-3 3D Audio Bose Home Speaker 500 HS500B Echo Sub P5B83L 100W AC Powered Price, product page$6.81$6.81$6.49 delivery May 16 - 21 Or fastest delivery May 15 - 20 Add to cart', 'source': 'Amazon'}, {'title': 'Amazon Product B0D41SCX42', 'price': 6.81, 'currency': 'USD', 'url': 'https://www.amazon.com/dp/B0D41SCX42', 'image_url': 'https://m.media-amazon.com/images/I/41O8e6nzPQL._AC_UY218_.jpg', 'rating': 0.0, 'reviews': 0, 'is_sponsored': False, 'is_prime': False, 'asin': 'B0D41SCX42', 'description': '2-Prong AC Power Cord Cable Plug Compatible with Amazon Echo Studio Hi-fi Smart Speaker Digital_Device_3 Digital-Device-3 3D Audio Bose Home Speaker 500 HS500B Echo Sub P5B83L 100W AC Powered Price, product page$6.81$6.81$7.49 delivery May 16 - 21 Or fastest delivery May 15 - 20 Add to cart', 'source': 'Amazon'}, {'title': 'Amazon Product B0D7THLDDL', 'price': 6.99, 'currency': 'USD', 'url': 'https://www.amazon.com/dp/B0D7THLDDL', 'image_url': 'https://m.media-amazon.com/images/I/61vmN7LPQSL._AC_UY218_.jpg', 'rating': 0.0, 'reviews': 0, 'is_sponsored': False, 'is_prime': False, 'asin': 'B0D7THLDDL', 'description': '15V AC Adapter for RE78VS PA-1210-1AZ1 Amazon Echo Smart Speaker 21W Power Cord Price, product page$6.99$6.99$4.99 delivery May 22 - Jun 2 Or fastest delivery May 19 - 21 Add to cart', 'source': 'Amazon'}, {'title': 'Amazon Product B0CMPY1639', 'price': 6.99, 'currency': 'USD', 'url': 'https://www.amazon.com/dp/B0CMPY1639', 'image_url': 'https://m.media-amazon.com/images/I/71Gb80eKanL._AC_UY218_.jpg', 'rating': 0.0, 'reviews': 0, 'is_sponsored': False, 'is_prime': False, 'asin': 'B0CMPY1639', 'description': 'MargAC/DC Adapter for RE78VS PA-1210-1AZ1 Amazon Echo Smart Speaker 21W Power Supply Price, product page$6.99$6.99$5.90 delivery May 27 - Jun 4 Add to cart', 'source': 'Amazon'}]}
2025-05-13 14:43:02,173 - DealFinderAI.Controller - INFO - Amazon returned 5 products
2025-05-13 14:43:02,174 - DealFinderAI.WalmartScraperAgent - INFO - Searching Walmart for: {'product_type': 'smart speakers', 'keywords': ['amazon echo'], 'price_range': None, 'brands': ['Amazon'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-13 14:43:04,102 - DealFinderAI.WalmartScraperAgent - INFO - Extracted 0 products from JSON data
2025-05-13 14:43:04,104 - DealFinderAI.WalmartScraperAgent - INFO - Found 9 product divs in HTML
2025-05-13 14:43:06,285 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 14:43:06,285 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Blarkrus Red For Amazon Echo Spot 2024 Smart Speaker Silicone Protective Cover Waterproof, Dustproof And Shockproof Factory at 9.33 USD
2025-05-13 14:43:06,286 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Blarkrus Red For Amazon Echo Spot 2024 Smart Speaker Silicone Protective Cover Waterproof, Dustproof And Shockproof Factory at 9.33 USD
2025-05-13 14:43:08,573 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 14:43:08,573 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Echo Speaker Sound Bars Wireless Mini Portable Multicolor Travel at 9.91 USD
2025-05-13 14:43:08,574 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Echo Speaker Sound Bars Wireless Mini Portable Multicolor Travel at 9.91 USD
2025-05-13 14:43:10,936 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 14:43:10,936 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Blue Elephant Pattern Print - Vinyl Decal Skin Compatible with Amazon Echo Dot 3rd Generation Alexa - Decorations for Your Smart Home Speakers, great accessories gift for mom, dad, birthday, kids at 9.98 USD
2025-05-13 14:43:10,936 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Blue Elephant Pattern Print - Vinyl Decal Skin Compatible with Amazon Echo Dot 3rd Generation Alexa - Decorations for Your Smart Home Speakers, great accessories gift for mom, dad, birthday, kids at 9.98 USD
2025-05-13 14:43:13,654 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 14:43:13,654 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Onerbl 2-Prong AC in Power Cord Cable Compatible with Amazon Echo Studio Hi-fi Smart Speaker Digital_Device_3 Digital-Device_3 3D Audio Home Speaker 500 HS500B Echo Sub P5B83L 100W AC Powered at 9.99 USD
2025-05-13 14:43:13,655 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Onerbl 2-Prong AC in Power Cord Cable Compatible with Amazon Echo Studio Hi-fi Smart Speaker Digital_Device_3 Digital-Device_3 3D Audio Home Speaker 500 HS500B Echo Sub P5B83L 100W AC Powered at 9.99 USD
2025-05-13 14:43:16,156 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 14:43:16,157 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: jixopn Mini Wall Mount Holder Space-Saving Support Holder Skeleton Cooling Base for Amazon Echo Dot 5th/4th Smart Speakers at 10.18 USD
2025-05-13 14:43:16,157 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: jixopn Mini Wall Mount Holder Space-Saving Support Holder Skeleton Cooling Base for Amazon Echo Dot 5th/4th Smart Speakers at 10.18 USD
2025-05-13 14:43:16,157 - DealFinderAI.WalmartScraperAgent - INFO - Extracted 5 products from HTML
2025-05-13 14:43:16,158 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Blarkrus Red For Amazon Echo Spot 2024 Smart Speaker Silicone Protective Cover Waterproof, Dustproof And Shockproof Factory at 9.33 USD
2025-05-13 14:43:16,158 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Echo Speaker Sound Bars Wireless Mini Portable Multicolor Travel at 9.91 USD
2025-05-13 14:43:16,158 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Blue Elephant Pattern Print - Vinyl Decal Skin Compatible with Amazon Echo Dot 3rd Generation Alexa - Decorations for Your Smart Home Speakers, great accessories gift for mom, dad, birthday, kids at 9.98 USD
2025-05-13 14:43:16,158 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Onerbl 2-Prong AC in Power Cord Cable Compatible with Amazon Echo Studio Hi-fi Smart Speaker Digital_Device_3 Digital-Device_3 3D Audio Home Speaker 500 HS500B Echo Sub P5B83L 100W AC Powered at 9.99 USD
2025-05-13 14:43:16,158 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: jixopn Mini Wall Mount Holder Space-Saving Support Holder Skeleton Cooling Base for Amazon Echo Dot 5th/4th Smart Speakers at 10.18 USD
2025-05-13 14:43:16,877 - DealFinderAI.WalmartScraperAgent - INFO - Returning 5 products from Walmart
2025-05-13 14:43:16,877 - DealFinderAI.Controller - INFO - Walmart returned 5 products
2025-05-13 14:43:16,877 - DealFinderAI.EbayScraperAgent - INFO - Searching eBay for: {'product_type': 'smart speakers', 'keywords': ['amazon echo'], 'price_range': None, 'brands': ['Amazon'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-13 14:43:18,903 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Amazon Echo Look Wireless Assistant Smart Speaker w/ Accessories at 10.99 USD
2025-05-13 14:43:18,903 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Amazon Echo Look Wireless Assistant Smart Speaker w/ Accessories at 10.99 USD
2025-05-13 14:43:18,904 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Amazon Echo Dot Fabric Case at 7.0 USD
2025-05-13 14:43:18,904 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Amazon Echo Dot Fabric Case at 7.0 USD
2025-05-13 14:43:18,905 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Amazon Echo Dot Model RS03QR 2nd Generation Smart Speaker Only at 5.0 USD
2025-05-13 14:43:18,905 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Amazon Echo Dot Model RS03QR 2nd Generation Smart Speaker Only at 5.0 USD
2025-05-13 14:43:18,905 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Echo Dot (Wall Mount Only No Alexa) For Amazon Alexa  Speaker 3rd Gen FREE SHIP at 11.98 USD
2025-05-13 14:43:18,905 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Echo Dot (Wall Mount Only No Alexa) For Amazon Alexa  Speaker 3rd Gen FREE SHIP at 11.98 USD
2025-05-13 14:43:18,906 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: NEW Amazon Echo Bluetooth Wi-Fi Smart Speaker with Alexa 1st Gen Black or White at 59.99 USD
2025-05-13 14:43:18,906 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: NEW Amazon Echo Bluetooth Wi-Fi Smart Speaker with Alexa 1st Gen Black or White at 59.99 USD
2025-05-13 14:43:19,807 - DealFinderAI.EbayScraperAgent - INFO - Returning 5 products from eBay
2025-05-13 14:43:19,809 - DealFinderAI.Controller - INFO - eBay returned 5 products
2025-05-13 14:43:19,809 - DealFinderAI.Controller - INFO - Total products before aggregation: 15
2025-05-13 14:43:19,809 - DealFinderAI.ResultsAggregatorAgent - INFO - Aggregating results for query: find me best deal on amazon echo
2025-05-13 14:43:19,809 - DealFinderAI.ResultsAggregatorAgent - INFO - Found 3 results from various sources
2025-05-13 14:43:19,810 - DealFinderAI.ResultsAggregatorAgent - INFO - Source Amazon: 5 products
2025-05-13 14:43:19,810 - DealFinderAI.ResultsAggregatorAgent - INFO - Source Walmart: 5 products
2025-05-13 14:43:19,810 - DealFinderAI.ResultsAggregatorAgent - INFO - Source eBay: 5 products
2025-05-13 14:43:19,810 - DealFinderAI.ResultsAggregatorAgent - INFO - Total products extracted: 15
2025-05-13 14:43:19,810 - DealFinderAI.ResultsAggregatorAgent - INFO - Ranking 15 products
2025-05-13 14:43:19,810 - DealFinderAI.ResultsAggregatorAgent - INFO - Sorted 15 products by score
2025-05-13 14:43:19,811 - DealFinderAI.ResultsAggregatorAgent - INFO - Returning 10 diversified products
2025-05-13 14:43:19,811 - DealFinderAI.ResultsAggregatorAgent - INFO - Products after ranking: 10
2025-05-13 14:43:19,811 - DealFinderAI.ResultsAggregatorAgent - INFO - Final products: 10
2025-05-13 14:43:19,811 - DealFinderAI.Controller - INFO - Products after aggregation: 10
2025-05-13 14:43:19,811 - DealFinderAI.ProductComparisonAgent - INFO - Comparing products for query: find me best deal on amazon echo
2025-05-13 14:43:19,811 - DealFinderAI.ProductComparisonAgent - INFO - Found 10 products to compare
2025-05-13 14:43:19,811 - DealFinderAI.ProductComparisonAgent - INFO - Grouping 10 products
2025-05-13 14:43:19,812 - DealFinderAI.ProductComparisonAgent - INFO - Created 0 product groups
2025-05-13 14:43:19,812 - DealFinderAI.ChatMemoryAgent - INFO - Storing context for conversation session_20250513142944_94641cab
2025-05-13 14:43:19,812 - DealFinderAI.ChatMemoryAgent - INFO - Storing 10 products for conversation session_20250513142944_94641cab
2025-05-13 14:43:19,812 - DealFinderAI.PresentationAgent - INFO - Preparing presentation for 10 products
2025-05-13 14:43:19,812 - DealFinderAI.PresentationAgent - INFO - Formatting 10 products for display
2025-05-13 14:43:19,813 - DealFinderAI.PresentationAgent - INFO - Product 1: Echo Dot (Wall Mount Only No Alexa) For Amazon Alexa  Speaker 3rd Gen FREE SHIP - Price: $11.98 - Source: eBay
2025-05-13 14:43:19,813 - DealFinderAI.PresentationAgent - INFO - Product 2: Amazon Product B0D4Y4T1Z1 - Price: $6.81 - Source: Amazon
2025-05-13 14:43:19,813 - DealFinderAI.PresentationAgent - INFO - Product 3: Blarkrus Red For Amazon Echo Spot 2024 Smart Speaker Silicone Protective Cover Waterproof, Dustproof And Shockproof Factory - Price: $9.33 - Source: Walmart
2025-05-13 14:43:19,813 - DealFinderAI.PresentationAgent - INFO - Product 4: NEW Amazon Echo Bluetooth Wi-Fi Smart Speaker with Alexa 1st Gen Black or White - Price: $59.99 - Source: eBay
2025-05-13 14:43:19,814 - DealFinderAI.PresentationAgent - INFO - Product 5: Amazon Echo Look Wireless Assistant Smart Speaker w/ Accessories - Price: $10.99 - Source: eBay
2025-05-13 14:43:19,814 - DealFinderAI.PresentationAgent - INFO - Product 6: Amazon Echo Dot Model RS03QR 2nd Generation Smart Speaker Only - Price: $5.00 - Source: eBay
2025-05-13 14:43:19,814 - DealFinderAI.PresentationAgent - INFO - Product 7: Amazon Echo Dot Fabric Case - Price: $7.00 - Source: eBay
2025-05-13 14:43:19,814 - DealFinderAI.PresentationAgent - INFO - Product 8: Amazon Product B0D4QKLT1L - Price: $6.81 - Source: Amazon
2025-05-13 14:43:19,814 - DealFinderAI.PresentationAgent - INFO - Product 9: Amazon Product B0D41SCX42 - Price: $6.81 - Source: Amazon
2025-05-13 14:43:19,814 - DealFinderAI.PresentationAgent - INFO - Product 10: Amazon Product B0D7THLDDL - Price: $6.99 - Source: Amazon
2025-05-13 14:43:19,814 - DealFinderAI.ChatMemoryAgent - INFO - Storing context for conversation session_20250513142944_94641cab
2025-05-13 14:43:19,814 - DealFinderAI.ChatMemoryAgent - INFO - Storing 10 products for conversation session_20250513142944_94641cab
2025-05-13 14:43:19,815 - DealFinderAI.Controller - INFO - Successfully stored search results in memory
2025-05-13 14:46:02,966 - DealFinderAI.Controller - INFO - Processing user query: find me most expensive amazon echo
2025-05-13 14:46:02,967 - DealFinderAI.ChatMemoryAgent - INFO - Analyzing query: 'find me most expensive amazon echo' for conversation session_20250513142944_94641cab
2025-05-13 14:46:02,968 - DealFinderAI.ChatMemoryAgent - INFO - Found 10 products in memory
2025-05-13 14:46:02,973 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: 
        You are an AI helping to analyze if a user's query is a follow-up question about previously shown products, or if it's a completely new search.

        Previous products shown to the user:
        Product 1: Echo Dot (Wall Mount Only No Alexa) For Amazon Alexa  Speaker 3rd Gen FREE SHIP
Product 2: Amazon Product B0D4Y4T1Z1
Product 3: Blarkrus Red For Amazon Echo Spot 2024 Smart Speaker Silicone Protective Cover Waterproof, Dustproof And Shockproof Factory
Product 4: NEW Amazon Echo Bluetooth Wi-Fi Smart Speaker with Alexa 1st Gen Black or White
Product 5: Amazon Echo Look Wireless Assistant Smart Speaker w/ Accessories

        User's new query: "find me most expensive amazon echo"

        Please analyze if this query is:
        1. A follow-up question about the previously shown products (e.g., asking for more details, comparing them, etc.)
        2. A completely new search (e.g., asking about different products, starting a new topic)

        Return your analysis in JSON format:
        {
            "is_new_search": true/false,
            "is_follow_up": true/false,
            "reasoning": "brief explanation of your decision",
            "referenced_product_indices": [list of 0-based indices of referenced products, if any]
        }
        
        Only return the JSON, with no additional text.
        
2025-05-13 14:46:04,631 - DealFinderAI.Controller - INFO - Analyze response: {'is_follow_up': False, 'focused_product': None, 'referenced_products': [], 'products': []}
2025-05-13 14:46:04,632 - DealFinderAI.Controller - INFO - Is follow-up? False
2025-05-13 14:46:04,632 - DealFinderAI.Controller - INFO - Referenced products: 0
2025-05-13 14:46:04,632 - DealFinderAI.Controller - INFO - Processing as new search query
2025-05-13 14:46:04,633 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: find me most expensive amazon echo
2025-05-13 14:46:05,938 - DealFinderAI.GeminiAgent - WARNING - Failed to parse Gemini response as JSON: ```json
{
  "product_type": "Amazon Echo",
  "keywords": ["Echo"],
  "price_range": null,
  "brands": ["Amazon"],
  "features": [],
  "sorting_preference": "price_high_to_low",
  "buy_it_now": true
}
```

2025-05-13 14:46:05,939 - DealFinderAI.Controller - INFO - Parsed search parameters: {'product_type': 'Amazon Echo', 'keywords': ['Echo'], 'price_range': None, 'brands': ['Amazon'], 'features': [], 'sorting_preference': 'price_high_to_low', 'buy_it_now': True}
2025-05-13 14:46:05,939 - DealFinderAI.AmazonScraperAgent - INFO - Searching Amazon for: {'product_type': 'Amazon Echo', 'keywords': ['Echo'], 'price_range': None, 'brands': ['Amazon'], 'features': [], 'sorting_preference': 'price_high_to_low', 'buy_it_now': True}
2025-05-13 14:46:07,384 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B08M1N8522 at 264.98 USD
2025-05-13 14:46:07,384 - DealFinderAI.AmazonScraperAgent - INFO - Adding product: Amazon Product B08M1N8522 at 264.98 USD
2025-05-13 14:46:07,385 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B0DGRJTLN7 at 262.98 USD
2025-05-13 14:46:07,385 - DealFinderAI.AmazonScraperAgent - INFO - Adding product: Amazon Product B0DGRJTLN7 at 262.98 USD
2025-05-13 14:46:07,387 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B0D5P7TNFJ at 262.38 USD
2025-05-13 14:46:07,387 - DealFinderAI.AmazonScraperAgent - INFO - Adding product: Amazon Product B0D5P7TNFJ at 262.38 USD
2025-05-13 14:46:07,389 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B0DHF3TFBY at 260.75 USD
2025-05-13 14:46:07,389 - DealFinderAI.AmazonScraperAgent - INFO - Adding product: Amazon Product B0DHF3TFBY at 260.75 USD
2025-05-13 14:46:07,391 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B0CDYQ18VT at 209.98 USD
2025-05-13 14:46:07,391 - DealFinderAI.AmazonScraperAgent - INFO - Adding product: Amazon Product B0CDYQ18VT at 209.98 USD
2025-05-13 14:46:08,389 - DealFinderAI.AmazonScraperAgent - INFO - Returning 5 products
2025-05-13 14:46:08,392 - DealFinderAI.Controller - INFO - Amazon response content: {'source': 'Amazon', 'query': 'Amazon Echo Echo Amazon', 'products': [{'title': 'Amazon Product B08M1N8522', 'price': 264.98, 'currency': 'USD', 'url': 'https://www.amazon.com/dp/B08M1N8522', 'image_url': 'https://m.media-amazon.com/images/I/512m-VzcTZL._AC_UY218_.jpg', 'rating': 4.5, 'reviews': 52614, 'is_sponsored': False, 'is_prime': False, 'asin': 'B08M1N8522', 'description': 'All-new Echo Show 10 (3rd Gen) - Charcoal - bundle with Ring A19 Smart LED Bulb 4.5 out of 5 stars 52,614  Price, product page$264.98$264.98Delivery Tomorrow, May 14Add to cart', 'source': 'Amazon'}, {'title': 'Amazon Product B0DGRJTLN7', 'price': 262.98, 'currency': 'USD', 'url': 'https://www.amazon.com/dp/B0DGRJTLN7', 'image_url': 'https://m.media-amazon.com/images/I/71jDsMu5QbL._AC_UY218_.jpg', 'rating': 4.5, 'reviews': 11, 'is_sponsored': False, 'is_prime': False, 'asin': 'B0DGRJTLN7', 'description': 'Echo Show 10 with Amazon Basics Smart Color Bulb 4.5 out of 5 stars 11  Price, product page$262.98$262.98Delivery Tomorrow, May 14Add to cart', 'source': 'Amazon'}, {'title': 'Amazon Product B0D5P7TNFJ', 'price': 262.38, 'currency': 'USD', 'url': 'https://www.amazon.com/dp/B0D5P7TNFJ', 'image_url': 'https://m.media-amazon.com/images/I/51m+Cm6EKvL._AC_UY218_.jpg', 'rating': 4.7, 'reviews': 19, 'is_sponsored': False, 'is_prime': False, 'asin': 'B0D5P7TNFJ', 'description': 'Echo Show 10 (black) with Sengled Matter Color Bulb 4.7 out of 5 stars 19  Price, product page$262.38$262.38 List: $269.98List: $269.98$269.98Delivery Tomorrow, May 14Add to cart', 'source': 'Amazon'}, {'title': 'Amazon Product B0DHF3TFBY', 'price': 260.75, 'currency': 'USD', 'url': 'https://www.amazon.com/dp/B0DHF3TFBY', 'image_url': 'https://m.media-amazon.com/images/I/61kp-GIWM4L._AC_UY218_.jpg', 'rating': 0.0, 'reviews': 0, 'is_sponsored': False, 'is_prime': False, 'asin': 'B0DHF3TFBY', 'description': 'Echo Show 10 (newest model) with WiZ 60W A19 LED Smart Color Bulb - Connects to Your Wi-Fi - E26 Base - Control with Voice or App - Matter Compatible Price, product page$260.75$260.75Delivery Thu, May 15Add to cart', 'source': 'Amazon'}, {'title': 'Amazon Product B0CDYQ18VT', 'price': 209.98, 'currency': 'USD', 'url': 'https://www.amazon.com/dp/B0CDYQ18VT', 'image_url': 'https://m.media-amazon.com/images/I/61Ij3GCGd3L._AC_UY218_.jpg', 'rating': 4.0, 'reviews': 1026, 'is_sponsored': False, 'is_prime': False, 'asin': 'B0CDYQ18VT', 'description': 'All-New Echo Hub Bundle | Stand 4.0 out of 5 stars 1,026  Price, product page$209.98$209.98Delivery Tomorrow, May 14Add to cart', 'source': 'Amazon'}]}
2025-05-13 14:46:08,393 - DealFinderAI.Controller - INFO - Amazon returned 5 products
2025-05-13 14:46:08,393 - DealFinderAI.WalmartScraperAgent - INFO - Searching Walmart for: {'product_type': 'Amazon Echo', 'keywords': ['Echo'], 'price_range': None, 'brands': ['Amazon'], 'features': [], 'sorting_preference': 'price_high_to_low', 'buy_it_now': True}
2025-05-13 14:46:10,655 - DealFinderAI.WalmartScraperAgent - INFO - Extracted 0 products from JSON data
2025-05-13 14:46:10,657 - DealFinderAI.WalmartScraperAgent - INFO - Found 9 product divs in HTML
2025-05-13 14:46:12,583 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 14:46:12,584 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Power Evolution EchoBox Mini 2 Wireless Bluetooth Speaker - Black at 45.0 USD
2025-05-13 14:46:12,584 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Power Evolution EchoBox Mini 2 Wireless Bluetooth Speaker - Black at 45.0 USD
2025-05-13 14:46:14,943 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 14:46:14,943 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Yustda AC-DC Adapter Compatible with Amazon Echo 3rd Gen, Echo R9P2A5 Smart Speaker Power Supply Adapter Cord Cable at 35.48 USD
2025-05-13 14:46:14,943 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Yustda AC-DC Adapter Compatible with Amazon Echo 3rd Gen, Echo R9P2A5 Smart Speaker Power Supply Adapter Cord Cable at 35.48 USD
2025-05-13 14:46:17,287 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 14:46:17,288 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Onerbl AC-DC Adapter Compatible with Amazon Echo 3rd Gen, Echo R9P2A5 Smart Speaker Power Supply Adapter Cord Cable at 35.48 USD
2025-05-13 14:46:17,288 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Onerbl AC-DC Adapter Compatible with Amazon Echo 3rd Gen, Echo R9P2A5 Smart Speaker Power Supply Adapter Cord Cable at 35.48 USD
2025-05-13 14:46:20,138 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 14:46:20,139 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: 18V AC/DC Adapter Compatible with Amazon Echo Show 8 Model C7H6N3 15W (2nd Gen, 2021 release) HD smart display with Alexa and 13 MP camera Power Supply Cord Cable Charger Mains PSU at 25.99 USD
2025-05-13 14:46:20,140 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: 18V AC/DC Adapter Compatible with Amazon Echo Show 8 Model C7H6N3 15W (2nd Gen, 2021 release) HD smart display with Alexa and 13 MP camera Power Supply Cord Cable Charger Mains PSU at 25.99 USD
2025-05-13 14:46:23,238 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 14:46:23,239 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Yustda 18V AC/DC Adapter Compatible with Amazon Echo Show 8 Model C7H6N3 15W (2nd Gen, 2021 release) HD smart display with Alexa and 13 MP camera Power Supply Cord Cable Charger Mains PSU at 25.99 USD
2025-05-13 14:46:23,239 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Yustda 18V AC/DC Adapter Compatible with Amazon Echo Show 8 Model C7H6N3 15W (2nd Gen, 2021 release) HD smart display with Alexa and 13 MP camera Power Supply Cord Cable Charger Mains PSU at 25.99 USD
2025-05-13 14:46:23,239 - DealFinderAI.WalmartScraperAgent - INFO - Extracted 5 products from HTML
2025-05-13 14:46:23,240 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Power Evolution EchoBox Mini 2 Wireless Bluetooth Speaker - Black at 45.0 USD
2025-05-13 14:46:23,240 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Yustda AC-DC Adapter Compatible with Amazon Echo 3rd Gen, Echo R9P2A5 Smart Speaker Power Supply Adapter Cord Cable at 35.48 USD
2025-05-13 14:46:23,240 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Onerbl AC-DC Adapter Compatible with Amazon Echo 3rd Gen, Echo R9P2A5 Smart Speaker Power Supply Adapter Cord Cable at 35.48 USD
2025-05-13 14:46:23,240 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: 18V AC/DC Adapter Compatible with Amazon Echo Show 8 Model C7H6N3 15W (2nd Gen, 2021 release) HD smart display with Alexa and 13 MP camera Power Supply Cord Cable Charger Mains PSU at 25.99 USD
2025-05-13 14:46:23,240 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Yustda 18V AC/DC Adapter Compatible with Amazon Echo Show 8 Model C7H6N3 15W (2nd Gen, 2021 release) HD smart display with Alexa and 13 MP camera Power Supply Cord Cable Charger Mains PSU at 25.99 USD
2025-05-13 14:46:24,014 - DealFinderAI.WalmartScraperAgent - INFO - Returning 5 products from Walmart
2025-05-13 14:46:24,015 - DealFinderAI.Controller - INFO - Walmart returned 5 products
2025-05-13 14:46:24,015 - DealFinderAI.EbayScraperAgent - INFO - Searching eBay for: {'product_type': 'Amazon Echo', 'keywords': ['Echo'], 'price_range': None, 'brands': ['Amazon'], 'features': [], 'sorting_preference': 'price_high_to_low', 'buy_it_now': True}
2025-05-13 14:46:25,975 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: New Amazon Echo Dot 2nd Generation w/ Alexa Voice Media Device White + FREE SHIP at 9139.99 USD
2025-05-13 14:46:25,975 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: New Amazon Echo Dot 2nd Generation w/ Alexa Voice Media Device White + FREE SHIP at 9139.99 USD
2025-05-13 14:46:25,975 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: DREAME X40 Master Robot Vacuum Cleaner, 12,000Pa Suction, Auto Refilling & at 3366.78 USD
2025-05-13 14:46:25,975 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: DREAME X40 Master Robot Vacuum Cleaner, 12,000Pa Suction, Auto Refilling & at 3366.78 USD
2025-05-13 14:46:25,976 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Florio 2in1 Robot Vacuum and Mop Combo, Robot Vacuum, Self-Emptying Robot at 2530.06 USD
2025-05-13 14:46:25,976 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Florio 2in1 Robot Vacuum and Mop Combo, Robot Vacuum, Self-Emptying Robot at 2530.06 USD
2025-05-13 14:46:25,977 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Denon PRIME 4+ DJ Controller WI-FI STREAMING w Amazon Music + XS-PRIME4 W2U Case at 2489.0 USD
2025-05-13 14:46:25,977 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Denon PRIME 4+ DJ Controller WI-FI STREAMING w Amazon Music + XS-PRIME4 W2U Case at 2489.0 USD
2025-05-13 14:46:25,978 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Denon PRIME 4+ DJ Controller WI-FI STREAMING w/ Amazon Music + XS-PRIME4 W Case at 2478.0 USD
2025-05-13 14:46:25,978 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Denon PRIME 4+ DJ Controller WI-FI STREAMING w/ Amazon Music + XS-PRIME4 W Case at 2478.0 USD
2025-05-13 14:46:26,580 - DealFinderAI.EbayScraperAgent - INFO - Returning 5 products from eBay
2025-05-13 14:46:26,582 - DealFinderAI.Controller - INFO - eBay returned 5 products
2025-05-13 14:46:26,582 - DealFinderAI.Controller - INFO - Total products before aggregation: 15
2025-05-13 14:46:26,582 - DealFinderAI.ResultsAggregatorAgent - INFO - Aggregating results for query: find me most expensive amazon echo
2025-05-13 14:46:26,582 - DealFinderAI.ResultsAggregatorAgent - INFO - Found 3 results from various sources
2025-05-13 14:46:26,583 - DealFinderAI.ResultsAggregatorAgent - INFO - Source Amazon: 5 products
2025-05-13 14:46:26,583 - DealFinderAI.ResultsAggregatorAgent - INFO - Source Walmart: 5 products
2025-05-13 14:46:26,583 - DealFinderAI.ResultsAggregatorAgent - INFO - Source eBay: 5 products
2025-05-13 14:46:26,583 - DealFinderAI.ResultsAggregatorAgent - INFO - Total products extracted: 15
2025-05-13 14:46:26,583 - DealFinderAI.ResultsAggregatorAgent - INFO - Ranking 15 products
2025-05-13 14:46:26,583 - DealFinderAI.ResultsAggregatorAgent - INFO - Sorted 15 products by score
2025-05-13 14:46:26,583 - DealFinderAI.ResultsAggregatorAgent - INFO - Returning 10 diversified products
2025-05-13 14:46:26,584 - DealFinderAI.ResultsAggregatorAgent - INFO - Products after ranking: 10
2025-05-13 14:46:26,584 - DealFinderAI.ResultsAggregatorAgent - INFO - Final products: 10
2025-05-13 14:46:26,584 - DealFinderAI.Controller - INFO - Products after aggregation: 10
2025-05-13 14:46:26,584 - DealFinderAI.ProductComparisonAgent - INFO - Comparing products for query: find me most expensive amazon echo
2025-05-13 14:46:26,584 - DealFinderAI.ProductComparisonAgent - INFO - Found 10 products to compare
2025-05-13 14:46:26,584 - DealFinderAI.ProductComparisonAgent - INFO - Grouping 10 products
2025-05-13 14:46:26,585 - DealFinderAI.ProductComparisonAgent - INFO - Created 1 product groups
2025-05-13 14:46:26,585 - DealFinderAI.ProductComparisonAgent - INFO - Analyzing product group with 2 items
2025-05-13 14:46:26,585 - DealFinderAI.ProductComparisonAgent - INFO - Best deal: 18V AC/DC Adapter Compatible with Amazon Echo Show 8 Model C7H6N3 15W (2nd Gen, 2021 release) HD smart display with Alexa and 13 MP camera Power Supply Cord Cable Charger Mains PSU at $25.99
2025-05-13 14:46:26,585 - DealFinderAI.ProductComparisonAgent - INFO - Savings: $0.00 (0.0%)
2025-05-13 14:46:26,585 - DealFinderAI.ChatMemoryAgent - INFO - Storing context for conversation session_20250513142944_94641cab
2025-05-13 14:46:26,586 - DealFinderAI.ChatMemoryAgent - INFO - Storing 10 products for conversation session_20250513142944_94641cab
2025-05-13 14:46:26,586 - DealFinderAI.PresentationAgent - INFO - Preparing presentation for 10 products
2025-05-13 14:46:26,586 - DealFinderAI.ChatMemoryAgent - INFO - Storing context for conversation session_20250513142944_94641cab
2025-05-13 14:46:26,586 - DealFinderAI.ChatMemoryAgent - INFO - Storing 10 products for conversation session_20250513142944_94641cab
2025-05-13 14:46:26,587 - DealFinderAI.Controller - INFO - Successfully stored search results in memory
2025-05-13 15:13:32,176 - DealFinderAI - INFO - Logging initialized
2025-05-13 15:13:32,176 - DealFinderAI.Main - INFO - Starting DealFinder AI
2025-05-13 15:13:32,176 - DealFinderAI.Main - INFO - Using LangChain implementation
2025-05-13 15:13:32,218 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-13 15:13:32,218 - DealFinderAI.Controller - INFO - Initialized scraper agents: ['amazon', 'walmart', 'ebay']
2025-05-13 15:13:32,218 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-13 15:13:32,218 - DealFinderAI.Controller - INFO - Initialized scraper agents: ['amazon', 'walmart', 'ebay']
2025-05-13 15:13:32,218 - DealFinderAI.Main - INFO - Web app using LangChain implementation with Gemini model
2025-05-13 15:13:49,732 - DealFinderAI.Controller - INFO - Processing user query: find me best deal on iphone 16
2025-05-13 15:13:49,733 - DealFinderAI.ChatMemoryAgent - INFO - Analyzing query: 'find me best deal on iphone 16' for conversation session_20250513151340_fbd7ca8a
2025-05-13 15:13:49,733 - DealFinderAI.ChatMemoryAgent - INFO - No product context available for this conversation
2025-05-13 15:13:49,733 - DealFinderAI.Controller - INFO - Analyze response: {'is_follow_up': False, 'focused_product': None, 'referenced_products': [], 'products': []}
2025-05-13 15:13:49,733 - DealFinderAI.Controller - INFO - Is follow-up? False
2025-05-13 15:13:49,733 - DealFinderAI.Controller - INFO - Referenced products: 0
2025-05-13 15:13:49,734 - DealFinderAI.Controller - INFO - Processing as new search query
2025-05-13 15:13:49,734 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: find me best deal on iphone 16
2025-05-13 15:13:50,736 - DealFinderAI.GeminiAgent - WARNING - Failed to parse Gemini response as JSON: ```json
{
  "product_type": "smartphone",
  "keywords": ["iphone", "16"],
  "price_range": null,
  "brands": ["Apple"],
  "features": [],
  "sorting_preference": "price_low_to_high",
  "buy_it_now": true
}
```

2025-05-13 15:13:50,740 - DealFinderAI.Controller - INFO - Parsed search parameters: {'product_type': 'smartphone', 'keywords': ['iphone', '16'], 'price_range': None, 'brands': ['Apple'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-13 15:13:50,740 - DealFinderAI.AmazonScraperAgent - INFO - Searching Amazon for: {'product_type': 'smartphone', 'keywords': ['iphone', '16'], 'price_range': None, 'brands': ['Apple'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-13 15:13:51,986 - DealFinderAI.AmazonScraperAgent - WARNING - Incomplete data for ASIN B0DHR6DR7P, falling back to Gemini extraction.
2025-05-13 15:13:55,671 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B0DHR6DR7P at 0.0 USD
2025-05-13 15:13:55,672 - DealFinderAI.AmazonScraperAgent - INFO - Adding product: Amazon Product B0DHR6DR7P at 0.0 USD
2025-05-13 15:13:55,679 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B0DDXFWVHM at 29.99 USD
2025-05-13 15:13:55,679 - DealFinderAI.AmazonScraperAgent - INFO - Adding product: Amazon Product B0DDXFWVHM at 29.99 USD
2025-05-13 15:13:55,684 - DealFinderAI.AmazonScraperAgent - WARNING - Incomplete data for ASIN B091JHNTNH, falling back to Gemini extraction.
2025-05-13 15:13:59,056 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B091JHNTNH at 0.0 USD
2025-05-13 15:13:59,056 - DealFinderAI.AmazonScraperAgent - INFO - Adding product: Amazon Product B091JHNTNH at 0.0 USD
2025-05-13 15:13:59,066 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B0CZ7DYMJL at 88.88 USD
2025-05-13 15:13:59,067 - DealFinderAI.AmazonScraperAgent - INFO - Adding product: Amazon Product B0CZ7DYMJL at 88.88 USD
2025-05-13 15:13:59,074 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B0CY8R25ZG at 89.99 USD
2025-05-13 15:13:59,075 - DealFinderAI.AmazonScraperAgent - INFO - Adding product: Amazon Product B0CY8R25ZG at 89.99 USD
2025-05-13 15:14:00,374 - DealFinderAI.AmazonScraperAgent - INFO - Returning 5 products
2025-05-13 15:14:00,376 - DealFinderAI.Controller - INFO - Amazon response content: {'source': 'Amazon', 'query': 'smartphone iphone 16 Apple', 'products': [{'title': 'Amazon Product B0DHR6DR7P', 'price': 0.0, 'currency': 'USD', 'url': 'https://www.amazon.com/dp/B0DHR6DR7P', 'image_url': 'https://m.media-amazon.com/images/I/51tG88rMazL._AC_UY218_.jpg', 'rating': 4.8, 'reviews': 10, 'is_sponsored': False, 'is_prime': True, 'asin': 'B0DHR6DR7P', 'description': 'Cell Phone Holder Dashboard Home Mount Holder Non-Slip Silicone[360Rotatable 30 Adjustable Spring Design] Compatible with All Smartphones and All iPhones 16 Pro Max,Android, Pixil 4.8 out of 5 stars 10  Click to see price FREE delivery Sun, May 18 on $35 of items shipped by AmazonOr fastest delivery Tomorrow, May 14Add to cart', 'source': 'Amazon'}, {'title': 'Amazon Product B0DDXFWVHM', 'price': 29.99, 'currency': 'USD', 'url': 'https://www.amazon.com/dp/B0DDXFWVHM', 'image_url': 'https://m.media-amazon.com/images/I/61rV5hmR16L._AC_UY218_.jpg', 'rating': 2.7, 'reviews': 10, 'is_sponsored': False, 'is_prime': True, 'asin': 'B0DDXFWVHM', 'description': 'for iPhone 16 series SPNM (iPhone 16 Pro) Options:3 sizes2.7 out of 5 stars 10  Price, product page$29.99$29.99 FREE delivery Sun, May 18 on $35 of items shipped by AmazonOr fastest delivery Thu, May 15Only 3 left in stock - order soon.Add to cart', 'source': 'Amazon'}, {'title': 'Amazon Product B091JHNTNH', 'price': 0.0, 'currency': 'USD', 'url': 'https://www.amazon.com/dp/B091JHNTNH', 'image_url': 'https://m.media-amazon.com/images/I/51aGOonIzSS._AC_UY218_.jpg', 'rating': 3.1, 'reviews': 424, 'is_sponsored': False, 'is_prime': False, 'asin': 'B091JHNTNH', 'description': 'iLightMini 11 Pro Smartphone The World\'s Smallest 11 Pro Max Android Mobile Phone, Super Small Micro 2.5" Touch Screen Global Unlocked Great for Kids 2GB RAM / 16GB ROM Tiny iPhone XI Pro Look Alike 3.1 out of 5 stars 424  50+ bought in past monthSee optionsNo featured offers available$57.23(2 new offers)Display Size:2.5 inchesMemory:16 GBColor:White, Black, Green, PinkBrand:iLight', 'source': 'Amazon'}, {'title': 'Amazon Product B0CZ7DYMJL', 'price': 88.88, 'currency': 'USD', 'url': 'https://www.amazon.com/dp/B0CZ7DYMJL', 'image_url': 'https://m.media-amazon.com/images/I/61ayapn7-yL._AC_UY218_.jpg', 'rating': 2.5, 'reviews': 29, 'is_sponsored': False, 'is_prime': True, 'asin': 'B0CZ7DYMJL', 'description': 'Smartphone Unlocked Cell Phone IP14pro 6.7inch HD Cheap Phones 2GB/16GB Android 10 Straight Talk Phone 5000mAh 128GB Extension Dual Sim Boost Mobile Phones (Blue) 2.5 out of 5 stars 29  Price, product page$88.88$88.88 FREE delivery Sun, May 18Or fastest delivery Tomorrow, May 14Add to cartDisplay Size:6.7 inchesMemory:16 GBColor:blueBrand:FUALYOU', 'source': 'Amazon'}, {'title': 'Amazon Product B0CY8R25ZG', 'price': 89.99, 'currency': 'USD', 'url': 'https://www.amazon.com/dp/B0CY8R25ZG', 'image_url': 'https://m.media-amazon.com/images/I/51WlZ30kx7L._AC_UY218_.jpg', 'rating': 1.9, 'reviews': 28, 'is_sponsored': False, 'is_prime': False, 'asin': 'B0CY8R25ZG', 'description': 'Unlocked Smartphone 6.7inch Cell Phone IP14pro 2+16GB HD Full Screen Straight Talk Dual Sim Android Phones Boost Mobile 1.9 out of 5 stars 28  Price, product page$89.99$89.99FREE delivery May 19 - 23Or fastest delivery May 19 - 20Add to cartDisplay Size:6.7 inchesMemory:128 GBColor:goldBrand:HIEGOU', 'source': 'Amazon'}]}
2025-05-13 15:14:00,377 - DealFinderAI.Controller - INFO - Amazon returned 5 products
2025-05-13 15:14:00,377 - DealFinderAI.WalmartScraperAgent - INFO - Searching Walmart for: {'product_type': 'smartphone', 'keywords': ['iphone', '16'], 'price_range': None, 'brands': ['Apple'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-13 15:14:02,481 - DealFinderAI.WalmartScraperAgent - INFO - Extracted 0 products from JSON data
2025-05-13 15:14:02,484 - DealFinderAI.WalmartScraperAgent - INFO - Found 9 product divs in HTML
2025-05-13 15:14:04,791 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 15:14:04,791 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: AT&T iPhone 16e 128GB Black. Apple Intelligence. at 649.0 USD
2025-05-13 15:14:04,792 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: AT&T iPhone 16e 128GB Black. Apple Intelligence. at 649.0 USD
2025-05-13 15:14:07,124 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 15:14:07,124 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Verizon iPhone 16e 128GB Black. Apple Intelligence. at 649.0 USD
2025-05-13 15:14:07,124 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Verizon iPhone 16e 128GB Black. Apple Intelligence. at 649.0 USD
2025-05-13 15:14:09,310 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 15:14:09,311 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: AT&T iPhone 16 128GB Ultramarine. Apple Intelligence. at 879.0 USD
2025-05-13 15:14:09,311 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: AT&T iPhone 16 128GB Ultramarine. Apple Intelligence. at 879.0 USD
2025-05-13 15:14:11,679 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 15:14:11,680 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Verizon iPhone 16 128GB Ultramarine. Apple Intelligence. at 879.0 USD
2025-05-13 15:14:11,680 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Verizon iPhone 16 128GB Ultramarine. Apple Intelligence. at 879.0 USD
2025-05-13 15:14:14,036 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 15:14:14,037 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Restored Apple iPhone 5S - 4G smartphone / Internal Memory 16 GB - LCD display - 4" - 1136 x 640 pixels - rear camera 8 MP - front camera 1.2 MP refurbished - space gray (Refurbished) at 45.45 USD
2025-05-13 15:14:14,037 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Restored Apple iPhone 5S - 4G smartphone / Internal Memory 16 GB - LCD display - 4" - 1136 x 640 pixels - rear camera 8 MP - front camera 1.2 MP refurbished - space gray (Refurbished) at 45.45 USD
2025-05-13 15:14:14,037 - DealFinderAI.WalmartScraperAgent - INFO - Extracted 5 products from HTML
2025-05-13 15:14:14,037 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: AT&T iPhone 16e 128GB Black. Apple Intelligence. at 649.0 USD
2025-05-13 15:14:14,037 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Verizon iPhone 16e 128GB Black. Apple Intelligence. at 649.0 USD
2025-05-13 15:14:14,037 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: AT&T iPhone 16 128GB Ultramarine. Apple Intelligence. at 879.0 USD
2025-05-13 15:14:14,037 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Verizon iPhone 16 128GB Ultramarine. Apple Intelligence. at 879.0 USD
2025-05-13 15:14:14,038 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Restored Apple iPhone 5S - 4G smartphone / Internal Memory 16 GB - LCD display - 4" - 1136 x 640 pixels - rear camera 8 MP - front camera 1.2 MP refurbished - space gray (Refurbished) at 45.45 USD
2025-05-13 15:14:14,816 - DealFinderAI.WalmartScraperAgent - INFO - Returning 5 products from Walmart
2025-05-13 15:14:14,817 - DealFinderAI.Controller - INFO - Walmart returned 5 products
2025-05-13 15:14:14,817 - DealFinderAI.EbayScraperAgent - INFO - Searching eBay for: {'product_type': 'smartphone', 'keywords': ['iphone', '16'], 'price_range': None, 'brands': ['Apple'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-13 15:14:14,817 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: 
            Optimize this search query for eBay's search engine:
            
            "smartphone iphone 16 Apple"
            
            For eBay searches, please:
            1. Focus on exact model numbers and specific part identifiers if present
            2. Include key brand names
            3. Remove generic words that may dilute results
            4. Add eBay-specific terms that might improve results
            5. Optimize for finding the most relevant listings
            
            Return a JSON object with:
            - optimized_keywords: List of 3-5 optimized search terms (most important first)
            - category_hints: Any eBay category suggestions
            - must_include_terms: Terms that MUST be in results
            - exclude_terms: Terms that should NOT be in results
            
            Format as JSON only with no explanation.
            
2025-05-13 15:14:16,146 - DealFinderAI.EbayScraperAgent - INFO - Optimized search parameters: {'product_type': 'smartphone', 'keywords': ['iPhone 16', 'Apple iPhone 16', 'iPhone 16 Pro Max', 'iPhone 16 Pro'], 'price_range': None, 'brands': ['Apple'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True, 'category_hints': ['Cell Phones & Smartphones'], 'must_include_terms': ['Apple', 'iPhone 16'], 'exclude_terms': ['repair', 'broken', 'parts', 'damaged']}
2025-05-13 15:14:16,147 - DealFinderAI.EbayScraperAgent - INFO - Built optimized eBay search query: smartphone Apple iPhone 16 Apple iPhone 16 iPhone 16 Pro Max
2025-05-13 15:14:16,147 - DealFinderAI.EbayScraperAgent - INFO - Built eBay query: smartphone Apple iPhone 16 Apple iPhone 16 iPhone 16 Pro Max
2025-05-13 15:14:16,147 - DealFinderAI.EbayScraperAgent - INFO - Making eBay search request with params: {'_nkw': 'smartphone Apple iPhone 16 Apple iPhone 16 iPhone 16 Pro Max Cell Phones & Smartphones', '_sacat': '0', '_ipg': '96', '_sop': '15', 'LH_BIN': '1'}
2025-05-13 15:14:17,939 - DealFinderAI.EbayScraperAgent - INFO - Found 132 product listings
2025-05-13 15:14:17,941 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 14 Pro Max - 128 GB - Black (U.S. Cellular) Smartphone at 299.0 USD
2025-05-13 15:14:17,941 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 14 Pro Max - 128 GB - Black (U.S. Cellular) Smartphone at 299.0 USD
2025-05-13 15:14:17,943 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 14 Pro Max - 128 GB - AT&T ONLY - SCREEN SCRATCHES- 98% BH 95212 SL at 469.59 USD
2025-05-13 15:14:17,943 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 14 Pro Max - 128 GB - AT&T ONLY - SCREEN SCRATCHES- 98% BH 95212 SL at 469.59 USD
2025-05-13 15:14:17,944 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 14 Pro Max 256GB A2651 Purple (Locked to AT&T) Smartphone READ back at 449.99 USD
2025-05-13 15:14:17,944 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 14 Pro Max 256GB A2651 Purple (Locked to AT&T) Smartphone READ back at 449.99 USD
2025-05-13 15:14:17,945 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Used Apple iPhone 14 Pro Max 128GB Space Black (Unlocked) Smartphone at 524.99 USD
2025-05-13 15:14:17,946 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Used Apple iPhone 14 Pro Max 128GB Space Black (Unlocked) Smartphone at 524.99 USD
2025-05-13 15:14:17,946 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 14 Pro Max 256GB Unlocked Good Condition - All Colors at 619.99 USD
2025-05-13 15:14:17,946 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 14 Pro Max 256GB Unlocked Good Condition - All Colors at 619.99 USD
2025-05-13 15:14:17,947 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 14 Pro Max 128GB Unlocked Fair Condition - All Colors at 529.99 USD
2025-05-13 15:14:17,947 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 14 Pro Max 128GB Unlocked Fair Condition - All Colors at 529.99 USD
2025-05-13 15:14:17,948 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: APPLE IPHONE 16 PRO MAX 256GB 512GB (FACTORY UNLOCKED) NEVER ACTIVATEDSEALED at 1189.95 USD
2025-05-13 15:14:17,948 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: APPLE IPHONE 16 PRO MAX 256GB 512GB (FACTORY UNLOCKED) NEVER ACTIVATEDSEALED at 1189.95 USD
2025-05-13 15:14:17,948 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 16 Pro Max 512GB Unlocked AT&T T-Mobile Verizon Very Good Condition at 1099.95 USD
2025-05-13 15:14:17,948 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 16 Pro Max 512GB Unlocked AT&T T-Mobile Verizon Very Good Condition at 1099.95 USD
2025-05-13 15:14:18,861 - DealFinderAI.EbayScraperAgent - INFO - Extracted 8 products from eBay
2025-05-13 15:14:18,863 - DealFinderAI.EbayScraperAgent - INFO - Applying relevance filtering to 8 products
2025-05-13 15:14:18,864 - DealFinderAI.EbayScraperAgent - INFO - Filtered to 5 most relevant products
2025-05-13 15:14:18,864 - DealFinderAI.Controller - INFO - eBay returned 5 products
2025-05-13 15:14:18,864 - DealFinderAI.Controller - INFO - Total products before aggregation: 15
2025-05-13 15:14:18,864 - DealFinderAI.ResultsAggregatorAgent - INFO - Aggregating results for query: find me best deal on iphone 16
2025-05-13 15:14:18,864 - DealFinderAI.ResultsAggregatorAgent - INFO - Found 3 results from various sources
2025-05-13 15:14:18,864 - DealFinderAI.ResultsAggregatorAgent - INFO - Source Amazon: 5 products
2025-05-13 15:14:18,864 - DealFinderAI.ResultsAggregatorAgent - INFO - Source Walmart: 5 products
2025-05-13 15:14:18,865 - DealFinderAI.ResultsAggregatorAgent - INFO - Source eBay: 5 products
2025-05-13 15:14:18,865 - DealFinderAI.ResultsAggregatorAgent - INFO - Total products extracted: 15
2025-05-13 15:14:18,865 - DealFinderAI.ResultsAggregatorAgent - INFO - Ranking 15 products
2025-05-13 15:14:18,865 - DealFinderAI.ResultsAggregatorAgent - INFO - Sorted 15 products by score
2025-05-13 15:14:18,865 - DealFinderAI.ResultsAggregatorAgent - INFO - Returning 10 diversified products
2025-05-13 15:14:18,865 - DealFinderAI.ResultsAggregatorAgent - INFO - Products after ranking: 10
2025-05-13 15:14:18,865 - DealFinderAI.ResultsAggregatorAgent - INFO - Final products: 10
2025-05-13 15:14:18,865 - DealFinderAI.Controller - INFO - Products after aggregation: 10
2025-05-13 15:14:18,866 - DealFinderAI.ProductComparisonAgent - INFO - Comparing products for query: find me best deal on iphone 16
2025-05-13 15:14:18,866 - DealFinderAI.ProductComparisonAgent - INFO - Found 10 products to compare
2025-05-13 15:14:18,866 - DealFinderAI.ProductComparisonAgent - INFO - Grouping 10 products
2025-05-13 15:14:18,866 - DealFinderAI.ProductComparisonAgent - INFO - Created 0 product groups
2025-05-13 15:14:18,867 - DealFinderAI.ChatMemoryAgent - INFO - Storing context for conversation session_20250513151340_fbd7ca8a
2025-05-13 15:14:18,867 - DealFinderAI.ChatMemoryAgent - INFO - Storing 10 products for conversation session_20250513151340_fbd7ca8a
2025-05-13 15:14:18,867 - DealFinderAI.PresentationAgent - INFO - Preparing presentation for 10 products
2025-05-13 15:14:18,867 - DealFinderAI.PresentationAgent - INFO - Formatting 10 products for display
2025-05-13 15:14:18,867 - DealFinderAI.PresentationAgent - INFO - Product 1: Amazon Product B0DHR6DR7P - Price: $0.00 - Source: Amazon
2025-05-13 15:14:18,867 - DealFinderAI.PresentationAgent - INFO - Product 2: APPLE IPHONE 16 PRO MAX 256GB 512GB (FACTORY UNLOCKED) NEVER ACTIVATEDSEALED - Price: $1189.95 - Source: eBay
2025-05-13 15:14:18,868 - DealFinderAI.PresentationAgent - INFO - Product 3: Restored Apple iPhone 5S - 4G smartphone / Internal Memory 16 GB - LCD display - 4" - 1136 x 640 pixels - rear camera 8 MP - front camera 1.2 MP refurbished - space gray (Refurbished) - Price: $45.45 - Source: Walmart
2025-05-13 15:14:18,868 - DealFinderAI.PresentationAgent - INFO - Product 4: Amazon Product B091JHNTNH - Price: $0.00 - Source: Amazon
2025-05-13 15:14:18,868 - DealFinderAI.PresentationAgent - INFO - Product 5: Amazon Product B0DDXFWVHM - Price: $29.99 - Source: Amazon
2025-05-13 15:14:18,868 - DealFinderAI.PresentationAgent - INFO - Product 6: Amazon Product B0CZ7DYMJL - Price: $88.88 - Source: Amazon
2025-05-13 15:14:18,868 - DealFinderAI.PresentationAgent - INFO - Product 7: Amazon Product B0CY8R25ZG - Price: $89.99 - Source: Amazon
2025-05-13 15:14:18,868 - DealFinderAI.PresentationAgent - INFO - Product 8: Apple iPhone 16 Pro Max 512GB Unlocked AT&T T-Mobile Verizon Very Good Condition - Price: $1099.95 - Source: eBay
2025-05-13 15:14:18,868 - DealFinderAI.PresentationAgent - INFO - Product 9: Apple iPhone 14 Pro Max 256GB Unlocked Good Condition - All Colors - Price: $619.99 - Source: eBay
2025-05-13 15:14:18,868 - DealFinderAI.PresentationAgent - INFO - Product 10: Apple iPhone 14 Pro Max - 128 GB - Black (U.S. Cellular) Smartphone - Price: $299.00 - Source: eBay
2025-05-13 15:14:18,869 - DealFinderAI.ChatMemoryAgent - INFO - Storing context for conversation session_20250513151340_fbd7ca8a
2025-05-13 15:14:18,869 - DealFinderAI.ChatMemoryAgent - INFO - Storing 10 products for conversation session_20250513151340_fbd7ca8a
2025-05-13 15:14:18,869 - DealFinderAI.Controller - INFO - Successfully stored search results in memory
2025-05-13 15:15:43,509 - DealFinderAI.Controller - INFO - Processing user query: Tell me more about product 8
2025-05-13 15:15:43,513 - DealFinderAI.ChatMemoryAgent - INFO - Analyzing query: 'Tell me more about product 8' for conversation session_20250513151340_fbd7ca8a
2025-05-13 15:15:43,514 - DealFinderAI.ChatMemoryAgent - INFO - Found 10 products in memory
2025-05-13 15:15:43,517 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: 
        You are an AI helping to analyze if a user's query is a follow-up question about previously shown products, or if it's a completely new search.

        Previous products shown to the user:
        Product 1: Amazon Product B0DHR6DR7P
Product 2: APPLE IPHONE 16 PRO MAX 256GB 512GB (FACTORY UNLOCKED) NEVER ACTIVATEDSEALED
Product 3: Restored Apple iPhone 5S - 4G smartphone / Internal Memory 16 GB - LCD display - 4" - 1136 x 640 pixels - rear camera 8 MP - front camera 1.2 MP refurbished - space gray (Refurbished)
Product 4: Amazon Product B091JHNTNH
Product 5: Amazon Product B0DDXFWVHM

        User's new query: "Tell me more about product 8"

        Please analyze if this query is:
        1. A follow-up question about the previously shown products (e.g., asking for more details, comparing them, etc.)
        2. A completely new search (e.g., asking about different products, starting a new topic)

        Return your analysis in JSON format:
        {
            "is_new_search": true/false,
            "is_follow_up": true/false,
            "reasoning": "brief explanation of your decision",
            "referenced_product_indices": [list of 0-based indices of referenced products, if any]
        }
        
        Only return the JSON, with no additional text.
        
2025-05-13 15:15:44,922 - DealFinderAI.Controller - INFO - Analyze response: {'is_follow_up': False, 'focused_product': None, 'referenced_products': [], 'products': []}
2025-05-13 15:15:44,922 - DealFinderAI.Controller - INFO - Is follow-up? False
2025-05-13 15:15:44,922 - DealFinderAI.Controller - INFO - Referenced products: 0
2025-05-13 15:15:44,923 - DealFinderAI.Controller - INFO - Processing as new search query
2025-05-13 15:15:44,923 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: Tell me more about product 8
2025-05-13 15:15:45,645 - DealFinderAI.GeminiAgent - WARNING - Failed to parse Gemini response as JSON: ```json
{
  "product_type": null,
  "keywords": ["product 8"],
  "price_range": null,
  "brands": null,
  "features": null,
  "sorting_preference": null,
  "buy_it_now": null
}
```

2025-05-13 15:15:45,645 - DealFinderAI.Controller - INFO - Parsed search parameters: {'product_type': None, 'keywords': ['product 8'], 'price_range': None, 'brands': None, 'features': None, 'sorting_preference': None, 'buy_it_now': None}
2025-05-13 15:15:45,646 - DealFinderAI.AmazonScraperAgent - INFO - Searching Amazon for: {'product_type': None, 'keywords': ['product 8'], 'price_range': None, 'brands': None, 'features': None, 'sorting_preference': None, 'buy_it_now': None}
2025-05-13 15:15:45,646 - DealFinderAI.AmazonScraperAgent - ERROR - Error scraping Amazon: sequence item 0: expected str instance, NoneType found
2025-05-13 15:15:45,646 - DealFinderAI.Controller - WARNING - Amazon search error: {'error': 'Amazon scraping error: sequence item 0: expected str instance, NoneType found'}
2025-05-13 15:15:45,646 - DealFinderAI.WalmartScraperAgent - INFO - Searching Walmart for: {'product_type': None, 'keywords': ['product 8'], 'price_range': None, 'brands': None, 'features': None, 'sorting_preference': None, 'buy_it_now': None}
2025-05-13 15:15:45,647 - DealFinderAI.WalmartScraperAgent - ERROR - Error scraping Walmart: sequence item 0: expected str instance, NoneType found
2025-05-13 15:15:45,647 - DealFinderAI.Controller - WARNING - Walmart search error: {'error': 'Walmart scraping error: sequence item 0: expected str instance, NoneType found'}
2025-05-13 15:15:45,647 - DealFinderAI.EbayScraperAgent - INFO - Searching eBay for: {'product_type': None, 'keywords': ['product 8'], 'price_range': None, 'brands': None, 'features': None, 'sorting_preference': None, 'buy_it_now': None}
2025-05-13 15:15:45,647 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: 
            Optimize this search query for eBay's search engine:
            
            "product 8"
            
            For eBay searches, please:
            1. Focus on exact model numbers and specific part identifiers if present
            2. Include key brand names
            3. Remove generic words that may dilute results
            4. Add eBay-specific terms that might improve results
            5. Optimize for finding the most relevant listings
            
            Return a JSON object with:
            - optimized_keywords: List of 3-5 optimized search terms (most important first)
            - category_hints: Any eBay category suggestions
            - must_include_terms: Terms that MUST be in results
            - exclude_terms: Terms that should NOT be in results
            
            Format as JSON only with no explanation.
            
2025-05-13 15:15:46,532 - DealFinderAI.EbayScraperAgent - INFO - Optimized search parameters: {'product_type': None, 'keywords': ['product 8 model number', 'brand name product 8', 'product 8 part number', '8 product brand name', 'product 8 - OEM'], 'price_range': None, 'brands': None, 'features': None, 'sorting_preference': None, 'buy_it_now': None, 'category_hints': ['Electronics', 'Parts & Accessories'], 'must_include_terms': ['product', '8'], 'exclude_terms': ['used', 'broken', 'repair']}
2025-05-13 15:15:46,533 - DealFinderAI.EbayScraperAgent - INFO - Built optimized eBay search query: product 8 model number brand name product 8 product 8 part number
2025-05-13 15:15:46,533 - DealFinderAI.EbayScraperAgent - INFO - Built eBay query: product 8 model number brand name product 8 product 8 part number
2025-05-13 15:15:46,534 - DealFinderAI.EbayScraperAgent - INFO - Making eBay search request with params: {'_nkw': 'product 8 model number brand name product 8 product 8 part number Electronics', '_sacat': '0', '_ipg': '96', 'LH_BIN': '1'}
2025-05-13 15:15:49,008 - DealFinderAI.EbayScraperAgent - INFO - Found 122 product listings
2025-05-13 15:15:49,009 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: CECM Central Electronics Module 05-06 VW Jetta MK5 - Genuine - 1K0 937 049 C at 169.99 USD
2025-05-13 15:15:49,009 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: CECM Central Electronics Module 05-06 VW Jetta MK5 - Genuine - 1K0 937 049 C at 169.99 USD
2025-05-13 15:15:49,010 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: 7117667 Lift Cylinder For Bobcat 773 S175 S185 S205 T190 Skid Steer Loader New at 218.23 USD
2025-05-13 15:15:49,010 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: 7117667 Lift Cylinder For Bobcat 773 S175 S185 S205 T190 Skid Steer Loader New at 218.23 USD
2025-05-13 15:15:49,011 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Mishimoto MMFAN-14C Curved Blade Electric Fan 1300 CFM Slim Radiator Fan, 14" at 47.63 USD
2025-05-13 15:15:49,011 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Mishimoto MMFAN-14C Curved Blade Electric Fan 1300 CFM Slim Radiator Fan, 14" at 47.63 USD
2025-05-13 15:15:49,012 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: OEM Adaptive Cruise Control Radar Distance Sensor For 23-25 Honda CRV HYBRID at 189.58 USD
2025-05-13 15:15:49,012 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: OEM Adaptive Cruise Control Radar Distance Sensor For 23-25 Honda CRV HYBRID at 189.58 USD
2025-05-13 15:15:49,014 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Elo ECMG4 Single Board Computer (e228087) at 714.92 USD
2025-05-13 15:15:49,014 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Elo ECMG4 Single Board Computer (e228087) at 714.92 USD
2025-05-13 15:15:49,015 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Viking Electronics Advanced Phone Line Simulator (DLE300) at 230.18 USD
2025-05-13 15:15:49,015 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Viking Electronics Advanced Phone Line Simulator (DLE300) at 230.18 USD
2025-05-13 15:15:49,016 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: ANALOG DEVICES AD9761 Evaluation Board at 80.1 USD
2025-05-13 15:15:49,016 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: ANALOG DEVICES AD9761 Evaluation Board at 80.1 USD
2025-05-13 15:15:49,017 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: PHYSICAL ELECTRONICS  11-010, ELECTRON GUN CONTROL at 67.5 USD
2025-05-13 15:15:49,017 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: PHYSICAL ELECTRONICS  11-010, ELECTRON GUN CONTROL at 67.5 USD
2025-05-13 15:15:50,444 - DealFinderAI.EbayScraperAgent - INFO - Extracted 8 products from eBay
2025-05-13 15:15:50,445 - DealFinderAI.EbayScraperAgent - INFO - Applying relevance filtering to 8 products
2025-05-13 15:15:50,445 - DealFinderAI.EbayScraperAgent - INFO - Filtered to 5 most relevant products
2025-05-13 15:15:50,446 - DealFinderAI.Controller - INFO - eBay returned 5 products
2025-05-13 15:15:50,446 - DealFinderAI.Controller - INFO - Total products before aggregation: 5
2025-05-13 15:15:50,446 - DealFinderAI.ResultsAggregatorAgent - INFO - Aggregating results for query: Tell me more about product 8
2025-05-13 15:15:50,446 - DealFinderAI.ResultsAggregatorAgent - INFO - Found 1 results from various sources
2025-05-13 15:15:50,446 - DealFinderAI.ResultsAggregatorAgent - INFO - Source eBay: 5 products
2025-05-13 15:15:50,446 - DealFinderAI.ResultsAggregatorAgent - INFO - Total products extracted: 5
2025-05-13 15:15:50,446 - DealFinderAI.ResultsAggregatorAgent - INFO - Ranking 5 products
2025-05-13 15:15:50,446 - DealFinderAI.ResultsAggregatorAgent - INFO - Sorted 5 products by score
2025-05-13 15:15:50,446 - DealFinderAI.ResultsAggregatorAgent - INFO - Returning all 5 sorted products
2025-05-13 15:15:50,446 - DealFinderAI.ResultsAggregatorAgent - INFO - Products after ranking: 5
2025-05-13 15:15:50,447 - DealFinderAI.ResultsAggregatorAgent - INFO - Final products: 5
2025-05-13 15:15:50,447 - DealFinderAI.Controller - INFO - Products after aggregation: 5
2025-05-13 15:15:50,447 - DealFinderAI.ProductComparisonAgent - INFO - Comparing products for query: Tell me more about product 8
2025-05-13 15:15:50,447 - DealFinderAI.ProductComparisonAgent - INFO - Found 5 products to compare
2025-05-13 15:15:50,447 - DealFinderAI.ProductComparisonAgent - INFO - Grouping 5 products
2025-05-13 15:15:50,447 - DealFinderAI.ProductComparisonAgent - INFO - Created 0 product groups
2025-05-13 15:15:50,447 - DealFinderAI.ChatMemoryAgent - INFO - Storing context for conversation session_20250513151340_fbd7ca8a
2025-05-13 15:15:50,447 - DealFinderAI.ChatMemoryAgent - INFO - Storing 5 products for conversation session_20250513151340_fbd7ca8a
2025-05-13 15:15:50,447 - DealFinderAI.PresentationAgent - INFO - Preparing presentation for 5 products
2025-05-13 15:15:50,448 - DealFinderAI.PresentationAgent - INFO - Formatting 5 products for display
2025-05-13 15:15:50,448 - DealFinderAI.PresentationAgent - INFO - Product 1: ANALOG DEVICES AD9761 Evaluation Board - Price: $80.10 - Source: eBay
2025-05-13 15:15:50,448 - DealFinderAI.PresentationAgent - INFO - Product 2: OEM Adaptive Cruise Control Radar Distance Sensor For 23-25 Honda CRV HYBRID - Price: $189.58 - Source: eBay
2025-05-13 15:15:50,448 - DealFinderAI.PresentationAgent - INFO - Product 3: 7117667 Lift Cylinder For Bobcat 773 S175 S185 S205 T190 Skid Steer Loader New - Price: $218.23 - Source: eBay
2025-05-13 15:15:50,448 - DealFinderAI.PresentationAgent - INFO - Product 4: CECM Central Electronics Module 05-06 VW Jetta MK5 - Genuine - 1K0 937 049 C - Price: $169.99 - Source: eBay
2025-05-13 15:15:50,448 - DealFinderAI.PresentationAgent - INFO - Product 5: Viking Electronics Advanced Phone Line Simulator (DLE300) - Price: $230.18 - Source: eBay
2025-05-13 15:15:50,448 - DealFinderAI.ChatMemoryAgent - INFO - Storing context for conversation session_20250513151340_fbd7ca8a
2025-05-13 15:15:50,448 - DealFinderAI.ChatMemoryAgent - INFO - Storing 5 products for conversation session_20250513151340_fbd7ca8a
2025-05-13 15:15:50,448 - DealFinderAI.Controller - INFO - Successfully stored search results in memory
2025-05-13 15:31:23,854 - DealFinderAI - INFO - Logging initialized
2025-05-13 15:31:23,855 - DealFinderAI.Main - INFO - Starting DealFinder AI
2025-05-13 15:31:23,855 - DealFinderAI.Main - INFO - Using LangChain implementation
2025-05-13 15:31:23,899 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-13 15:31:23,899 - DealFinderAI.Controller - INFO - Initialized scraper agents: ['amazon', 'walmart', 'ebay']
2025-05-13 15:31:23,899 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-13 15:31:23,899 - DealFinderAI.Controller - INFO - Initialized scraper agents: ['amazon', 'walmart', 'ebay']
2025-05-13 15:31:23,899 - DealFinderAI.Main - INFO - Web app using LangChain implementation with Gemini model
2025-05-13 15:32:27,346 - DealFinderAI.Controller - INFO - Processing user query: find me best deal on iphone 16
2025-05-13 15:32:27,347 - DealFinderAI.ChatMemoryAgent - INFO - Analyzing query: 'find me best deal on iphone 16' for conversation session_20250513153215_34714ca4
2025-05-13 15:32:27,348 - DealFinderAI.ChatMemoryAgent - INFO - No product context available for this conversation
2025-05-13 15:32:27,348 - DealFinderAI.Controller - INFO - Analyze response: {'is_follow_up': False, 'focused_product': None, 'referenced_products': [], 'products': []}
2025-05-13 15:32:27,348 - DealFinderAI.Controller - INFO - Is follow-up? False
2025-05-13 15:32:27,348 - DealFinderAI.Controller - INFO - Referenced products: 0
2025-05-13 15:32:27,348 - DealFinderAI.Controller - INFO - Processing as new search query
2025-05-13 15:32:27,348 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: find me best deal on iphone 16
2025-05-13 15:32:28,843 - DealFinderAI.GeminiAgent - WARNING - Failed to parse Gemini response as JSON: ```json
{
  "product_type": "smartphone",
  "keywords": ["iphone 16"],
  "price_range": null,
  "brands": ["Apple"],
  "features": [],
  "sorting_preference": "price_low_to_high",
  "buy_it_now": true
}
```

2025-05-13 15:32:28,844 - DealFinderAI.Controller - INFO - Parsed search parameters: {'product_type': 'smartphone', 'keywords': ['iphone 16'], 'price_range': None, 'brands': ['Apple'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-13 15:32:28,844 - DealFinderAI.AmazonScraperAgent - INFO - Searching Amazon for: {'product_type': 'smartphone', 'keywords': ['iphone 16'], 'price_range': None, 'brands': ['Apple'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-13 15:32:30,430 - DealFinderAI.AmazonScraperAgent - WARNING - Incomplete data for ASIN B0DHR6DR7P, falling back to Gemini extraction.
2025-05-13 15:32:33,910 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B0DHR6DR7P at 0.0 USD
2025-05-13 15:32:33,910 - DealFinderAI.AmazonScraperAgent - INFO - Adding product: Amazon Product B0DHR6DR7P at 0.0 USD
2025-05-13 15:32:33,914 - DealFinderAI.AmazonScraperAgent - WARNING - Incomplete data for ASIN B091JHNTNH, falling back to Gemini extraction.
2025-05-13 15:32:37,541 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B091JHNTNH at 0.0 USD
2025-05-13 15:32:37,542 - DealFinderAI.AmazonScraperAgent - INFO - Adding product: Amazon Product B091JHNTNH at 0.0 USD
2025-05-13 15:32:37,549 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B088NDPK5T at 119.99 USD
2025-05-13 15:32:37,549 - DealFinderAI.AmazonScraperAgent - INFO - Adding product: Amazon Product B088NDPK5T at 119.99 USD
2025-05-13 15:32:37,554 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B0CZ7DYMJL at 88.88 USD
2025-05-13 15:32:37,554 - DealFinderAI.AmazonScraperAgent - INFO - Adding product: Amazon Product B0CZ7DYMJL at 88.88 USD
2025-05-13 15:32:37,558 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amazon Product B07886RHHK at 199.97 USD
2025-05-13 15:32:37,558 - DealFinderAI.AmazonScraperAgent - INFO - Adding product: Amazon Product B07886RHHK at 199.97 USD
2025-05-13 15:32:38,597 - DealFinderAI.AmazonScraperAgent - INFO - Returning 5 products
2025-05-13 15:32:38,598 - DealFinderAI.Controller - INFO - Amazon response content: {'source': 'Amazon', 'query': 'smartphone iphone 16 Apple', 'products': [{'title': 'Amazon Product B0DHR6DR7P', 'price': 0.0, 'currency': 'USD', 'url': 'https://www.amazon.com/dp/B0DHR6DR7P', 'image_url': 'https://m.media-amazon.com/images/I/51tG88rMazL._AC_UY218_.jpg', 'rating': 4.8, 'reviews': 10, 'is_sponsored': False, 'is_prime': True, 'asin': 'B0DHR6DR7P', 'description': 'Cell Phone Holder Dashboard Home Mount Holder Non-Slip Silicone[360Rotatable 30 Adjustable Spring Design] Compatible with All Smartphones and All iPhones 16 Pro Max,Android, Pixil 4.8 out of 5 stars 10  Click to see price FREE delivery Sun, May 18 on $35 of items shipped by AmazonOr fastest delivery Tomorrow, May 14Add to cart', 'source': 'Amazon'}, {'title': 'Amazon Product B091JHNTNH', 'price': 0.0, 'currency': 'USD', 'url': 'https://www.amazon.com/dp/B091JHNTNH', 'image_url': 'https://m.media-amazon.com/images/I/51aGOonIzSS._AC_UY218_.jpg', 'rating': 3.1, 'reviews': 424, 'is_sponsored': False, 'is_prime': False, 'asin': 'B091JHNTNH', 'description': 'iLightMini 11 Pro Smartphone The World\'s Smallest 11 Pro Max Android Mobile Phone, Super Small Micro 2.5" Touch Screen Global Unlocked Great for Kids 2GB RAM / 16GB ROM Tiny iPhone XI Pro Look Alike 3.1 out of 5 stars 424  50+ bought in past monthSee optionsNo featured offers available$57.23(2 new offers)Display Size:2.5 inchesMemory:16 GBColor:White, Black, Green, PinkBrand:iLight', 'source': 'Amazon'}, {'title': 'Amazon Product B088NDPK5T', 'price': 119.99, 'currency': 'USD', 'url': 'https://www.amazon.com/dp/B088NDPK5T', 'image_url': 'https://m.media-amazon.com/images/I/61hpoPMVgqL._AC_UY218_.jpg', 'rating': 4.2, 'reviews': 20604, 'is_sponsored': False, 'is_prime': False, 'asin': 'B088NDPK5T', 'description': 'Apple iPhone SE (2nd Generation), US Version, 128GB, White - Unlocked (Renewed) Options:3 sizesTop Reviewed for Functionality4.2 out of 5 stars 20,604  300+ bought in past monthPrice, product page$119.99$119.99 Typical price: $127.00Typical price: $127.00$127.00FREE delivery Thu, May 15Only 18 left in stock - order soon.See optionsMore Buying Choices$79.95(17+ used & new offers)Display Size:4.7 inchesMemory:128 GBColor:WhiteBrand:Apple', 'source': 'Amazon'}, {'title': 'Amazon Product B0CZ7DYMJL', 'price': 88.88, 'currency': 'USD', 'url': 'https://www.amazon.com/dp/B0CZ7DYMJL', 'image_url': 'https://m.media-amazon.com/images/I/61ayapn7-yL._AC_UY218_.jpg', 'rating': 2.5, 'reviews': 29, 'is_sponsored': False, 'is_prime': True, 'asin': 'B0CZ7DYMJL', 'description': 'Smartphone Unlocked Cell Phone IP14pro 6.7inch HD Cheap Phones 2GB/16GB Android 10 Straight Talk Phone 5000mAh 128GB Extension Dual Sim Boost Mobile Phones (Blue) 2.5 out of 5 stars 29  Price, product page$88.88$88.88 FREE delivery Sun, May 18Or fastest delivery Tomorrow, May 14Add to cartDisplay Size:6.7 inchesMemory:16 GBColor:blueBrand:FUALYOU', 'source': 'Amazon'}, {'title': 'Amazon Product B07886RHHK', 'price': 199.97, 'currency': 'USD', 'url': 'https://www.amazon.com/dp/B07886RHHK', 'image_url': 'https://m.media-amazon.com/images/I/61g0wgQQxvL._AC_UY218_.jpg', 'rating': 3.4, 'reviews': 4, 'is_sponsored': False, 'is_prime': True, 'asin': 'B07886RHHK', 'description': 'Apple iPhone SE - Sprint (Refurbished) (Space Gray, 16GB) 3.4 out of 5 stars 4  Price, product page$199.97$199.97 FREE delivery May 16 - 20Or fastest delivery Thu, May 15Only 2 left in stock - order soon.See optionsMore Buying Choices$94.99(5+ used & new offers)Display Size:4Memory:16 GBColor:Space GrayBrand:Apple', 'source': 'Amazon'}]}
2025-05-13 15:32:38,598 - DealFinderAI.Controller - INFO - Amazon returned 5 products
2025-05-13 15:32:38,598 - DealFinderAI.WalmartScraperAgent - INFO - Searching Walmart for: {'product_type': 'smartphone', 'keywords': ['iphone 16'], 'price_range': None, 'brands': ['Apple'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-13 15:32:38,598 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: 
            Optimize this search query for Walmart's search engine:
            
            "smartphone iphone 16 Apple"
            
            For Walmart searches, please:
            1. Focus on model numbers and specific identifiers if present
            2. Include key brand names (Walmart's search works well with brand names)
            3. Remove generic words that may dilute results
            4. Add Walmart-specific terms that might improve results (like "Rollback" if looking for deals)
            5. Prioritize precise product names and specifications
            
            Return a JSON object with:
            - optimized_keywords: List of 3-5 optimized search terms (most important first)
            - department_hint: Any Walmart department suggestion (Electronics, Home, etc.)
            - must_include_terms: Terms that MUST be in results
            - exclude_terms: Terms that should NOT be in results
            - walmart_specific_filters: Any Walmart-specific filters to apply
            
            Format as JSON only with no explanation.
            
2025-05-13 15:32:39,648 - DealFinderAI.WalmartScraperAgent - INFO - Optimized search parameters: {'product_type': 'smartphone', 'keywords': ['iPhone 16', 'Apple iPhone 16', 'iPhone 16 Pro Max', 'Apple iPhone 16 Pro'], 'price_range': None, 'brands': ['Apple'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True, 'department': 'Electronics', 'must_include_terms': ['Apple', 'iPhone 16'], 'exclude_terms': ['smartphone'], 'walmart_filters': ['Rollback', 'Free Shipping']}
2025-05-13 15:32:39,648 - DealFinderAI.WalmartScraperAgent - INFO - Built optimized Walmart search query: Apple smartphone iPhone 16 Apple iPhone 16 iPhone 16 Pro Max
2025-05-13 15:32:39,648 - DealFinderAI.WalmartScraperAgent - INFO - Built Walmart query: Apple smartphone iPhone 16 Apple iPhone 16 iPhone 16 Pro Max
2025-05-13 15:32:39,649 - DealFinderAI.WalmartScraperAgent - INFO - Making Walmart search request with params: {'q': 'Apple smartphone iPhone 16 Apple iPhone 16 iPhone 16 Pro Max Electronics', 'page': 1, 'affinityOverride': 'default', 'sort': 'price_low'}
2025-05-13 15:32:41,634 - DealFinderAI.WalmartScraperAgent - INFO - Extracted 0 products from JSON data
2025-05-13 15:32:41,634 - DealFinderAI.WalmartScraperAgent - INFO - JSON extraction failed, falling back to HTML extraction
2025-05-13 15:32:41,635 - DealFinderAI.WalmartScraperAgent - INFO - Found 9 product divs in HTML
2025-05-13 15:32:43,618 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 15:32:43,618 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: AT&T iPhone 16 128GB Ultramarine. Apple Intelligence. at 879.0 USD
2025-05-13 15:32:45,529 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 15:32:45,530 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Verizon iPhone 16 128GB Ultramarine. Apple Intelligence. at 879.0 USD
2025-05-13 15:32:47,497 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 15:32:47,498 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: AT&T iPhone 16 Pro 128GB Desert Titanium. Apple Intelligence. at 1049.0 USD
2025-05-13 15:32:49,394 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 15:32:49,394 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Verizon iPhone 16 Pro 128GB Desert Titanium. Apple Intelligence. at 1049.0 USD
2025-05-13 15:32:51,523 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 15:32:51,524 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: AT&T iPhone 16 Pro Max 256GB Natural Titanium. Apple Intelligence. at 1249.0 USD
2025-05-13 15:32:53,559 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 15:32:53,560 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Verizon iPhone 16 Pro Max 256GB Black Titanium. Apple Intelligence. at 1249.0 USD
2025-05-13 15:32:56,856 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 15:32:56,856 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Straight Talk Apple iPhone 16, 128GB, White - Prepaid Smartphone [Locked to Straight Talk] at 829.0 USD
2025-05-13 15:32:59,055 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 15:32:59,056 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Straight Talk Apple iPhone 16, 128GB, Teal - Prepaid Smartphone [Locked to Straight Talk] at 829.0 USD
2025-05-13 15:33:01,666 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 15:33:01,666 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Straight Talk Apple iPhone 16, 128GB, Blue - Prepaid Smartphone [Locked to Straight Talk] at 829.0 USD
2025-05-13 15:33:01,667 - DealFinderAI.WalmartScraperAgent - INFO - Extracted 9 products from HTML
2025-05-13 15:33:01,667 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: AT&T iPhone 16 128GB Ultramarine. Apple Intelligence. at 879.0 USD
2025-05-13 15:33:01,667 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Verizon iPhone 16 128GB Ultramarine. Apple Intelligence. at 879.0 USD
2025-05-13 15:33:01,667 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: AT&T iPhone 16 Pro 128GB Desert Titanium. Apple Intelligence. at 1049.0 USD
2025-05-13 15:33:01,667 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Verizon iPhone 16 Pro 128GB Desert Titanium. Apple Intelligence. at 1049.0 USD
2025-05-13 15:33:01,668 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: AT&T iPhone 16 Pro Max 256GB Natural Titanium. Apple Intelligence. at 1249.0 USD
2025-05-13 15:33:01,668 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Verizon iPhone 16 Pro Max 256GB Black Titanium. Apple Intelligence. at 1249.0 USD
2025-05-13 15:33:01,668 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Straight Talk Apple iPhone 16, 128GB, White - Prepaid Smartphone [Locked to Straight Talk] at 829.0 USD
2025-05-13 15:33:01,668 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Straight Talk Apple iPhone 16, 128GB, Teal - Prepaid Smartphone [Locked to Straight Talk] at 829.0 USD
2025-05-13 15:33:01,668 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Straight Talk Apple iPhone 16, 128GB, Blue - Prepaid Smartphone [Locked to Straight Talk] at 829.0 USD
2025-05-13 15:33:02,293 - DealFinderAI.WalmartScraperAgent - INFO - Extracted 9 products from Walmart
2025-05-13 15:33:02,295 - DealFinderAI.WalmartScraperAgent - INFO - Applying relevance filtering to 9 products
2025-05-13 15:33:02,295 - DealFinderAI.WalmartScraperAgent - INFO - Filtered to 5 most relevant products
2025-05-13 15:33:02,296 - DealFinderAI.Controller - INFO - Walmart returned 5 products
2025-05-13 15:33:02,296 - DealFinderAI.EbayScraperAgent - INFO - Searching eBay for: {'product_type': 'smartphone', 'keywords': ['iphone 16'], 'price_range': None, 'brands': ['Apple'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-13 15:33:02,296 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: 
            Optimize this search query for eBay's search engine:
            
            "smartphone iphone 16 Apple"
            
            For eBay searches, please:
            1. Focus on exact model numbers and specific part identifiers if present
            2. Include key brand names
            3. Remove generic words that may dilute results
            4. Add eBay-specific terms that might improve results
            5. Optimize for finding the most relevant listings
            
            Return a JSON object with:
            - optimized_keywords: List of 3-5 optimized search terms (most important first)
            - category_hints: Any eBay category suggestions
            - must_include_terms: Terms that MUST be in results
            - exclude_terms: Terms that should NOT be in results
            
            Format as JSON only with no explanation.
            
2025-05-13 15:33:03,178 - DealFinderAI.EbayScraperAgent - INFO - Optimized search parameters: {'product_type': 'smartphone', 'keywords': ['iPhone 16', 'Apple iPhone 16', 'iPhone 16 Pro', 'iPhone 16 Pro Max'], 'price_range': None, 'brands': ['Apple'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True, 'category_hints': ['Cell Phones & Smartphones'], 'must_include_terms': ['Apple', 'iPhone'], 'exclude_terms': ['repair', 'broken', 'parts', 'for']}
2025-05-13 15:33:03,178 - DealFinderAI.EbayScraperAgent - INFO - Built optimized eBay search query: smartphone Apple iPhone 16 Apple iPhone 16 iPhone 16 Pro
2025-05-13 15:33:03,178 - DealFinderAI.EbayScraperAgent - INFO - Built eBay query: smartphone Apple iPhone 16 Apple iPhone 16 iPhone 16 Pro
2025-05-13 15:33:03,179 - DealFinderAI.EbayScraperAgent - INFO - Making eBay search request with params: {'_nkw': 'smartphone Apple iPhone 16 Apple iPhone 16 iPhone 16 Pro Cell Phones & Smartphones', '_sacat': '0', '_ipg': '96', '_sop': '15', 'LH_BIN': '1'}
2025-05-13 15:33:04,829 - DealFinderAI.EbayScraperAgent - INFO - Found 132 product listings
2025-05-13 15:33:04,831 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 14 Pro - 512 GB - Purple (Xfinity) Smartphone at 284.0 USD
2025-05-13 15:33:04,831 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 14 Pro - 512 GB - Purple (Xfinity) Smartphone at 284.0 USD
2025-05-13 15:33:04,832 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 14 Pro Max - 128 GB - Black (U.S. Cellular) Smartphone at 299.0 USD
2025-05-13 15:33:04,832 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 14 Pro Max - 128 GB - Black (U.S. Cellular) Smartphone at 299.0 USD
2025-05-13 15:33:04,833 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 14 Pro 256GB White / Silver AT&T at 349.99 USD
2025-05-13 15:33:04,833 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 14 Pro 256GB White / Silver AT&T at 349.99 USD
2025-05-13 15:33:04,834 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 14 Pro - 128 GB - Space Black (T-Mobile) Smartphone at 364.0 USD
2025-05-13 15:33:04,834 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 14 Pro - 128 GB - Space Black (T-Mobile) Smartphone at 364.0 USD
2025-05-13 15:33:04,835 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 16 Pro 128GB Unlocked 1-Year Warranty Smartphone Excellent at 841.99 USD
2025-05-13 15:33:04,835 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 16 Pro 128GB Unlocked 1-Year Warranty Smartphone Excellent at 841.99 USD
2025-05-13 15:33:04,835 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: UNLOCKED Apple iPhone 14 Pro 512GB Smartphone - All Colors - Grade A at 619.0 USD
2025-05-13 15:33:04,835 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: UNLOCKED Apple iPhone 14 Pro 512GB Smartphone - All Colors - Grade A at 619.0 USD
2025-05-13 15:33:04,836 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: New in Sealed Box Apple iPhone 14 PRO A2650 512GB 1TB Unlocked Smartphone at 832.99 USD
2025-05-13 15:33:04,836 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: New in Sealed Box Apple iPhone 14 PRO A2650 512GB 1TB Unlocked Smartphone at 832.99 USD
2025-05-13 15:33:04,837 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 16 Pro 128GB Factory Unlocked Open Box Mint Smartphone A3083 at 857.45 USD
2025-05-13 15:33:04,837 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 16 Pro 128GB Factory Unlocked Open Box Mint Smartphone A3083 at 857.45 USD
2025-05-13 15:33:05,866 - DealFinderAI.EbayScraperAgent - INFO - Extracted 8 products from eBay
2025-05-13 15:33:05,868 - DealFinderAI.EbayScraperAgent - INFO - Applying relevance filtering to 8 products
2025-05-13 15:33:05,868 - DealFinderAI.EbayScraperAgent - INFO - Filtered to 5 most relevant products
2025-05-13 15:33:05,868 - DealFinderAI.Controller - INFO - eBay returned 5 products
2025-05-13 15:33:05,869 - DealFinderAI.Controller - INFO - Total products before aggregation: 15
2025-05-13 15:33:05,869 - DealFinderAI.ResultsAggregatorAgent - INFO - Aggregating results for query: find me best deal on iphone 16
2025-05-13 15:33:05,869 - DealFinderAI.ResultsAggregatorAgent - INFO - Found 3 results from various sources
2025-05-13 15:33:05,869 - DealFinderAI.ResultsAggregatorAgent - INFO - Source Amazon: 5 products
2025-05-13 15:33:05,869 - DealFinderAI.ResultsAggregatorAgent - INFO - Source Walmart: 5 products
2025-05-13 15:33:05,869 - DealFinderAI.ResultsAggregatorAgent - INFO - Source eBay: 5 products
2025-05-13 15:33:05,869 - DealFinderAI.ResultsAggregatorAgent - INFO - Total products extracted: 15
2025-05-13 15:33:05,870 - DealFinderAI.ResultsAggregatorAgent - INFO - Ranking 15 products
2025-05-13 15:33:05,870 - DealFinderAI.ResultsAggregatorAgent - INFO - Sorted 15 products by score
2025-05-13 15:33:05,870 - DealFinderAI.ResultsAggregatorAgent - INFO - Returning 10 diversified products
2025-05-13 15:33:05,870 - DealFinderAI.ResultsAggregatorAgent - INFO - Products after ranking: 10
2025-05-13 15:33:05,870 - DealFinderAI.ResultsAggregatorAgent - INFO - Final products: 10
2025-05-13 15:33:05,870 - DealFinderAI.Controller - INFO - Products after aggregation: 10
2025-05-13 15:33:05,871 - DealFinderAI.ProductComparisonAgent - INFO - Comparing products for query: find me best deal on iphone 16
2025-05-13 15:33:05,871 - DealFinderAI.ProductComparisonAgent - INFO - Found 10 products to compare
2025-05-13 15:33:05,871 - DealFinderAI.ProductComparisonAgent - INFO - Grouping 10 products
2025-05-13 15:33:05,872 - DealFinderAI.ProductComparisonAgent - INFO - Created 0 product groups
2025-05-13 15:33:05,872 - DealFinderAI.ChatMemoryAgent - INFO - Storing context for conversation session_20250513153215_34714ca4
2025-05-13 15:33:05,872 - DealFinderAI.ChatMemoryAgent - INFO - Storing 10 products for conversation session_20250513153215_34714ca4
2025-05-13 15:33:05,872 - DealFinderAI.PresentationAgent - INFO - Preparing presentation for 10 products
2025-05-13 15:33:05,872 - DealFinderAI.PresentationAgent - INFO - Formatting 10 products for display
2025-05-13 15:33:05,873 - DealFinderAI.PresentationAgent - INFO - Product 1: Amazon Product B0DHR6DR7P - Price: $0.00 - Source: Amazon
2025-05-13 15:33:05,873 - DealFinderAI.PresentationAgent - INFO - Product 2: New in Sealed Box Apple iPhone 14 PRO A2650 512GB 1TB Unlocked Smartphone - Price: $832.99 - Source: eBay
2025-05-13 15:33:05,873 - DealFinderAI.PresentationAgent - INFO - Product 3: AT&T iPhone 16 128GB Ultramarine. Apple Intelligence. - Price: $879.00 - Source: Walmart
2025-05-13 15:33:05,873 - DealFinderAI.PresentationAgent - INFO - Product 4: Amazon Product B088NDPK5T - Price: $119.99 - Source: Amazon
2025-05-13 15:33:05,873 - DealFinderAI.PresentationAgent - INFO - Product 5: Amazon Product B091JHNTNH - Price: $0.00 - Source: Amazon
2025-05-13 15:33:05,873 - DealFinderAI.PresentationAgent - INFO - Product 6: Amazon Product B0CZ7DYMJL - Price: $88.88 - Source: Amazon
2025-05-13 15:33:05,873 - DealFinderAI.PresentationAgent - INFO - Product 7: Amazon Product B07886RHHK - Price: $199.97 - Source: Amazon
2025-05-13 15:33:05,873 - DealFinderAI.PresentationAgent - INFO - Product 8: Apple iPhone 16 Pro 128GB Unlocked 1-Year Warranty Smartphone Excellent - Price: $841.99 - Source: eBay
2025-05-13 15:33:05,873 - DealFinderAI.PresentationAgent - INFO - Product 9: Apple iPhone 14 Pro - 512 GB - Purple (Xfinity) Smartphone - Price: $284.00 - Source: eBay
2025-05-13 15:33:05,874 - DealFinderAI.PresentationAgent - INFO - Product 10: Apple iPhone 14 Pro Max - 128 GB - Black (U.S. Cellular) Smartphone - Price: $299.00 - Source: eBay
2025-05-13 15:33:05,874 - DealFinderAI.ChatMemoryAgent - INFO - Storing context for conversation session_20250513153215_34714ca4
2025-05-13 15:33:05,874 - DealFinderAI.ChatMemoryAgent - INFO - Storing 10 products for conversation session_20250513153215_34714ca4
2025-05-13 15:33:05,874 - DealFinderAI.Controller - INFO - Successfully stored search results in memory
2025-05-13 15:40:20,949 - DealFinderAI - INFO - Logging initialized
2025-05-13 15:40:20,950 - DealFinderAI.Main - INFO - Starting DealFinder AI
2025-05-13 15:40:20,950 - DealFinderAI.Main - INFO - Using LangChain implementation
2025-05-13 15:40:20,991 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-13 15:40:20,992 - DealFinderAI.Controller - INFO - Initialized scraper agents: ['amazon', 'walmart', 'ebay']
2025-05-13 15:40:20,992 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-13 15:40:20,992 - DealFinderAI.Controller - INFO - Initialized scraper agents: ['amazon', 'walmart', 'ebay']
2025-05-13 15:40:20,992 - DealFinderAI.Main - INFO - Web app using LangChain implementation with Gemini model
2025-05-13 15:40:38,142 - DealFinderAI.Controller - INFO - Processing user query: find me beat deal on iphone 16
2025-05-13 15:40:38,143 - DealFinderAI.ChatMemoryAgent - INFO - Analyzing query: 'find me beat deal on iphone 16' for conversation session_20250513154026_23798302
2025-05-13 15:40:38,143 - DealFinderAI.ChatMemoryAgent - INFO - No product context available for this conversation
2025-05-13 15:40:38,143 - DealFinderAI.Controller - INFO - Analyze response: {'is_follow_up': False, 'focused_product': None, 'referenced_products': [], 'products': []}
2025-05-13 15:40:38,143 - DealFinderAI.Controller - INFO - Is follow-up? False
2025-05-13 15:40:38,144 - DealFinderAI.Controller - INFO - Referenced products: 0
2025-05-13 15:40:38,144 - DealFinderAI.Controller - INFO - Processing as new search query
2025-05-13 15:40:38,144 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: find me beat deal on iphone 16
2025-05-13 15:40:39,602 - DealFinderAI.GeminiAgent - WARNING - Failed to parse Gemini response as JSON: ```json
{
  "product_type": "smartphone",
  "keywords": ["iphone 16", "deal"],
  "price_range": null,
  "brands": ["Apple"],
  "features": [],
  "sorting_preference": "price_low_to_high",
  "buy_it_now": true
}
```

2025-05-13 15:40:39,602 - DealFinderAI.Controller - INFO - Parsed search parameters: {'product_type': 'smartphone', 'keywords': ['iphone 16', 'deal'], 'price_range': None, 'brands': ['Apple'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-13 15:40:39,603 - DealFinderAI.AmazonScraperAgent - INFO - Searching Amazon for: {'product_type': 'smartphone', 'keywords': ['iphone 16', 'deal'], 'price_range': None, 'brands': ['Apple'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-13 15:40:39,603 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: 
            Optimize this search query for Amazon's search engine:
            
            "smartphone iphone 16 deal Apple"
            
            For Amazon searches, please:
            1. Focus on product-specific model numbers and identifiers if present
            2. Include key brand names (Amazon's A9 algorithm prioritizes brand matches)
            3. Remove generic words that may dilute results
            4. Add Amazon-specific terms that might improve results (like "Amazon's Choice" if looking for quality products)
            5. Optimize for Amazon's search algorithm which prioritizes exact matches and recent sales volume
            
            Return a JSON object with:
            - optimized_keywords: List of 3-5 optimized search terms (most important first)
            - amazon_category: Any Amazon department/category suggestion (Electronics, Books, etc.)
            - must_include_terms: Terms that MUST be in results
            - exclude_terms: Terms that should NOT be in results
            - amazon_search_filters: Any Amazon-specific filters to apply (Prime eligible, etc.)
            
            Format as JSON only with no explanation.
            
2025-05-13 15:40:40,993 - DealFinderAI.AmazonScraperAgent - INFO - Optimized search parameters: {'product_type': 'smartphone', 'keywords': ['iPhone 16', 'Apple iPhone 16', 'iPhone 16 deals'], 'price_range': None, 'brands': ['Apple'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True, 'category': 'Electronics', 'must_include_terms': ['Apple', 'iPhone 16'], 'exclude_terms': ['smartphone', 'deal'], 'amazon_filters': ['Prime Eligible', 'New']}
2025-05-13 15:40:40,994 - DealFinderAI.AmazonScraperAgent - INFO - Built optimized Amazon search query: Apple smartphone iPhone 16 Apple iPhone 16 iPhone 16 deals
2025-05-13 15:40:40,994 - DealFinderAI.AmazonScraperAgent - INFO - Built Amazon query: Apple smartphone iPhone 16 Apple iPhone 16 iPhone 16 deals
2025-05-13 15:40:40,994 - DealFinderAI.AmazonScraperAgent - INFO - Making Amazon search request with params: {'k': 'Apple smartphone iPhone 16 Apple iPhone 16 iPhone 16 deals', 'ref': 'nb_sb_noss', 'crid': 1747165240, 'i': 'aps', 'search-alias': 'electronics', 's': 'price-asc-rank'}
2025-05-13 15:40:42,491 - DealFinderAI.AmazonScraperAgent - INFO - Found 27 product divs in search results
2025-05-13 15:40:42,497 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Case-Mate iPhone 16 Plus Case [Compatible with MagSafe] Tough Shockproof Phone Case with 16ft D3O Drop Protection - Premium Rugged Cover for iPhone 16 Plus - Clear at 1.25 USD
2025-05-13 15:40:42,497 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Case-Mate iPhone 16 Plus Case [Compatible with MagSafe] Tough Shockproof Phone Case with 16ft D3O Drop Protection - Premium Rugged Cover for iPhone 16 Plus - Clear at 1.25 USD
2025-05-13 15:40:42,502 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: LeYi for iPhone 16 Pro Max Case: iPhone 16 Pro Max Phone Case with Screen Protector 2PCS Tempered Glass, Slide Camera Cover & Magnetic Kickstand Funda para iPhone 16 Pro Max, Red at 6.49 USD
2025-05-13 15:40:42,502 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: LeYi for iPhone 16 Pro Max Case: iPhone 16 Pro Max Phone Case with Screen Protector 2PCS Tempered Glass, Slide Camera Cover & Magnetic Kickstand Funda para iPhone 16 Pro Max, Red at 6.49 USD
2025-05-13 15:40:42,507 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Case-Mate Tough Clear iPhone 15 Plus Case [16ft D3O Drop Protection] [Wireless Charging Compatible] Phone Case for iPhone 15 Plus 6.7", Shockproof Materials, Anti Yellowing, Anti Scratch Technology at 6.71 USD
2025-05-13 15:40:42,507 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Case-Mate Tough Clear iPhone 15 Plus Case [16ft D3O Drop Protection] [Wireless Charging Compatible] Phone Case for iPhone 15 Plus 6.7", Shockproof Materials, Anti Yellowing, Anti Scratch Technology at 6.71 USD
2025-05-13 15:40:42,511 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: DOMAVER Case for iPhone 16 Pro Max [Compatible with Mag Safe], Smooth Liquid Silicone Soft Rubber Microfiber Lining Cushion Cover with Magnetic Shockproof Protective for iPhone 16 Pro Max- Light Blue at 7.99 USD
2025-05-13 15:40:42,511 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: DOMAVER Case for iPhone 16 Pro Max [Compatible with Mag Safe], Smooth Liquid Silicone Soft Rubber Microfiber Lining Cushion Cover with Magnetic Shockproof Protective for iPhone 16 Pro Max- Light Blue at 7.99 USD
2025-05-13 15:40:42,516 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: DOMAVER Case for iPhone 16 6.1'' Case Smooth Liquid Silicone Soft Gel Rubber Microfiber Lining Cushion Cover Shockproof Protective Phone Cases for iPhone 16 6.1''- Hot Pink at 8.99 USD
2025-05-13 15:40:42,516 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: DOMAVER Case for iPhone 16 6.1'' Case Smooth Liquid Silicone Soft Gel Rubber Microfiber Lining Cushion Cover Shockproof Protective Phone Cases for iPhone 16 6.1''- Hot Pink at 8.99 USD
2025-05-13 15:40:42,521 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: for iPhone 11 Pro Max Case with Screen Protector - Stylish Elegant Floral Design on Soft Clear TPU - Slim Fit, Protective Phone Cover for Women and Girls - Beautiful Blossoms at 12.99 USD
2025-05-13 15:40:42,521 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: for iPhone 11 Pro Max Case with Screen Protector - Stylish Elegant Floral Design on Soft Clear TPU - Slim Fit, Protective Phone Cover for Women and Girls - Beautiful Blossoms at 12.99 USD
2025-05-13 15:40:42,525 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: for iPhone 16 Pro Case Shockproof 3-Layer Full Body Protection Rugged Heavy Duty High Impact Hard Cover Case for iPhone 16 Pro 6.3 inch,Black at 13.99 USD
2025-05-13 15:40:42,525 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: for iPhone 16 Pro Case Shockproof 3-Layer Full Body Protection Rugged Heavy Duty High Impact Hard Cover Case for iPhone 16 Pro 6.3 inch,Black at 13.99 USD
2025-05-13 15:40:42,528 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Carveit Wooden Cell Phone Ring Holder Finger Stand Metal Grip Hook Phone Kickstand Compatible with Galaxy S24 Ultra S23 iPhone 16 Pro Max 13 14 15 Pixel 9-Walnut/Rose Gold/Raven [1 Pack] at 15.99 USD
2025-05-13 15:40:42,528 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Carveit Wooden Cell Phone Ring Holder Finger Stand Metal Grip Hook Phone Kickstand Compatible with Galaxy S24 Ultra S23 iPhone 16 Pro Max 13 14 15 Pixel 9-Walnut/Rose Gold/Raven [1 Pack] at 15.99 USD
2025-05-13 15:40:42,533 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Case-Mate Tough Clear iPhone 15 Pro Case [16ft D3O Drop Protection] [Wireless Charging Compatible] Phone Case for iPhone 15 Pro 6.1", Shockproof Materials, Slim, Anti Yellow, Anti Scratch Technology at 16.59 USD
2025-05-13 15:40:42,533 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Case-Mate Tough Clear iPhone 15 Pro Case [16ft D3O Drop Protection] [Wireless Charging Compatible] Phone Case for iPhone 15 Pro 6.1", Shockproof Materials, Slim, Anti Yellow, Anti Scratch Technology at 16.59 USD
2025-05-13 15:40:42,539 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: 360Rotatable Magnetic Ring Kickstand Phone Case for iPhone 16 Pro Max Case,Compatible with Magsafe,Military Grade Shockproof Translucent for 16 Pro Max Protective Case - 6.9 inch,Black at 19.88 USD
2025-05-13 15:40:42,539 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: 360Rotatable Magnetic Ring Kickstand Phone Case for iPhone 16 Pro Max Case,Compatible with Magsafe,Military Grade Shockproof Translucent for 16 Pro Max Protective Case - 6.9 inch,Black at 19.88 USD
2025-05-13 15:40:43,876 - DealFinderAI.AmazonScraperAgent - INFO - Extracted 10 products from Amazon
2025-05-13 15:40:43,878 - DealFinderAI.AmazonScraperAgent - INFO - Applying relevance filtering to 10 products
2025-05-13 15:40:43,878 - DealFinderAI.AmazonScraperAgent - INFO - Filtered to 0 most relevant products
2025-05-13 15:40:43,879 - DealFinderAI.Controller - INFO - Amazon response content: {'source': 'Amazon', 'query': 'Apple smartphone iPhone 16 Apple iPhone 16 iPhone 16 deals', 'products': []}
2025-05-13 15:40:43,879 - DealFinderAI.Controller - INFO - Amazon returned 0 products
2025-05-13 15:40:43,880 - DealFinderAI.WalmartScraperAgent - INFO - Searching Walmart for: {'product_type': 'smartphone', 'keywords': ['iphone 16', 'deal'], 'price_range': None, 'brands': ['Apple'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-13 15:40:43,880 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: 
            Optimize this search query for Walmart's search engine:
            
            "smartphone iphone 16 deal Apple"
            
            For Walmart searches, please:
            1. Focus on model numbers and specific identifiers if present
            2. Include key brand names (Walmart's search works well with brand names)
            3. Remove generic words that may dilute results
            4. Add Walmart-specific terms that might improve results (like "Rollback" if looking for deals)
            5. Prioritize precise product names and specifications
            
            Return a JSON object with:
            - optimized_keywords: List of 3-5 optimized search terms (most important first)
            - department_hint: Any Walmart department suggestion (Electronics, Home, etc.)
            - must_include_terms: Terms that MUST be in results
            - exclude_terms: Terms that should NOT be in results
            - walmart_specific_filters: Any Walmart-specific filters to apply
            
            Format as JSON only with no explanation.
            
2025-05-13 15:40:45,318 - DealFinderAI.WalmartScraperAgent - INFO - Optimized search parameters: {'product_type': 'smartphone', 'keywords': ['iPhone 16', 'Apple iPhone 16', 'iPhone 16 Walmart Rollback', 'Apple iPhone 16 deals'], 'price_range': None, 'brands': ['Apple'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True, 'department': 'Electronics', 'must_include_terms': ['Apple', 'iPhone 16'], 'exclude_terms': ['smartphone', 'deal'], 'walmart_filters': ['Rollback', 'Deals']}
2025-05-13 15:40:45,318 - DealFinderAI.WalmartScraperAgent - INFO - Built optimized Walmart search query: Apple smartphone iPhone 16 Apple iPhone 16 iPhone 16 Walmart Rollback
2025-05-13 15:40:45,319 - DealFinderAI.WalmartScraperAgent - INFO - Built Walmart query: Apple smartphone iPhone 16 Apple iPhone 16 iPhone 16 Walmart Rollback
2025-05-13 15:40:45,319 - DealFinderAI.WalmartScraperAgent - INFO - Making Walmart search request with params: {'q': 'Apple smartphone iPhone 16 Apple iPhone 16 iPhone 16 Walmart Rollback Electronics', 'page': 1, 'affinityOverride': 'default', 'sort': 'price_low'}
2025-05-13 15:40:47,703 - DealFinderAI.WalmartScraperAgent - INFO - Extracted 0 products from JSON data
2025-05-13 15:40:47,703 - DealFinderAI.WalmartScraperAgent - INFO - JSON extraction failed, falling back to HTML extraction
2025-05-13 15:40:47,705 - DealFinderAI.WalmartScraperAgent - INFO - Found 8 product divs in HTML
2025-05-13 15:40:50,073 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 15:40:50,073 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: AT&T iPhone 16e 128GB Black. Apple Intelligence. at 649.0 USD
2025-05-13 15:40:52,103 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 15:40:52,103 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: AT&T iPhone 16 128GB Ultramarine. Apple Intelligence. at 879.0 USD
2025-05-13 15:40:54,792 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 15:40:54,793 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Verizon iPhone 16 128GB Ultramarine. Apple Intelligence. at 879.0 USD
2025-05-13 15:40:57,569 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 15:40:57,569 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Straight Talk Apple iPhone 16, 128GB, White - Prepaid Smartphone [Locked to Straight Talk] at 829.0 USD
2025-05-13 15:40:59,733 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 15:40:59,734 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Straight Talk Apple iPhone 16, 128GB, Teal - Prepaid Smartphone [Locked to Straight Talk] at 829.0 USD
2025-05-13 15:41:02,029 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 15:41:02,286 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Straight Talk Apple iPhone 16, 256GB, White - Prepaid Smartphone [Locked to Straight Talk] at 929.0 USD
2025-05-13 15:41:04,667 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 15:41:04,668 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Straight Talk Apple iPhone 16, 512GB, Black - Prepaid Smartphone [Locked to Straight Talk] at 1129.0 USD
2025-05-13 15:41:06,712 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 15:41:06,713 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Straight Talk Apple iPhone 16, 512GB, White - Prepaid Smartphone [Locked to Straight Talk} at 1129.0 USD
2025-05-13 15:41:06,713 - DealFinderAI.WalmartScraperAgent - INFO - Extracted 8 products from HTML
2025-05-13 15:41:06,713 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: AT&T iPhone 16e 128GB Black. Apple Intelligence. at 649.0 USD
2025-05-13 15:41:06,714 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: AT&T iPhone 16 128GB Ultramarine. Apple Intelligence. at 879.0 USD
2025-05-13 15:41:06,714 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Verizon iPhone 16 128GB Ultramarine. Apple Intelligence. at 879.0 USD
2025-05-13 15:41:06,714 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Straight Talk Apple iPhone 16, 128GB, White - Prepaid Smartphone [Locked to Straight Talk] at 829.0 USD
2025-05-13 15:41:06,714 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Straight Talk Apple iPhone 16, 128GB, Teal - Prepaid Smartphone [Locked to Straight Talk] at 829.0 USD
2025-05-13 15:41:06,715 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Straight Talk Apple iPhone 16, 256GB, White - Prepaid Smartphone [Locked to Straight Talk] at 929.0 USD
2025-05-13 15:41:06,715 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Straight Talk Apple iPhone 16, 512GB, Black - Prepaid Smartphone [Locked to Straight Talk] at 1129.0 USD
2025-05-13 15:41:06,715 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Straight Talk Apple iPhone 16, 512GB, White - Prepaid Smartphone [Locked to Straight Talk} at 1129.0 USD
2025-05-13 15:41:07,285 - DealFinderAI.WalmartScraperAgent - INFO - Extracted 8 products from Walmart
2025-05-13 15:41:07,288 - DealFinderAI.WalmartScraperAgent - INFO - Applying relevance filtering to 8 products
2025-05-13 15:41:07,288 - DealFinderAI.WalmartScraperAgent - INFO - Filtered to 5 most relevant products
2025-05-13 15:41:07,289 - DealFinderAI.Controller - INFO - Walmart returned 5 products
2025-05-13 15:41:07,289 - DealFinderAI.EbayScraperAgent - INFO - Searching eBay for: {'product_type': 'smartphone', 'keywords': ['iphone 16', 'deal'], 'price_range': None, 'brands': ['Apple'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-13 15:41:07,289 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: 
            Optimize this search query for eBay's search engine:
            
            "smartphone iphone 16 deal Apple"
            
            For eBay searches, please:
            1. Focus on exact model numbers and specific part identifiers if present
            2. Include key brand names
            3. Remove generic words that may dilute results
            4. Add eBay-specific terms that might improve results
            5. Optimize for finding the most relevant listings
            
            Return a JSON object with:
            - optimized_keywords: List of 3-5 optimized search terms (most important first)
            - category_hints: Any eBay category suggestions
            - must_include_terms: Terms that MUST be in results
            - exclude_terms: Terms that should NOT be in results
            
            Format as JSON only with no explanation.
            
2025-05-13 15:41:08,248 - DealFinderAI.EbayScraperAgent - INFO - Optimized search parameters: {'product_type': 'smartphone', 'keywords': ['iPhone 16', 'Apple iPhone 16', 'iPhone 16 new', 'iPhone 16 Pro', 'iPhone 16 Pro Max'], 'price_range': None, 'brands': ['Apple'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True, 'category_hints': ['Cell Phones & Smartphones'], 'must_include_terms': ['Apple', 'iPhone 16'], 'exclude_terms': ['repair', 'broken', 'parts']}
2025-05-13 15:41:08,248 - DealFinderAI.EbayScraperAgent - INFO - Built optimized eBay search query: smartphone Apple iPhone 16 Apple iPhone 16 iPhone 16 new
2025-05-13 15:41:08,249 - DealFinderAI.EbayScraperAgent - INFO - Built eBay query: smartphone Apple iPhone 16 Apple iPhone 16 iPhone 16 new
2025-05-13 15:41:08,249 - DealFinderAI.EbayScraperAgent - INFO - Making eBay search request with params: {'_nkw': 'smartphone Apple iPhone 16 Apple iPhone 16 iPhone 16 new Cell Phones & Smartphones', '_sacat': '0', '_ipg': '96', '_sop': '15', 'LH_BIN': '1'}
2025-05-13 15:41:10,558 - DealFinderAI.EbayScraperAgent - INFO - Found 132 product listings
2025-05-13 15:41:10,560 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Unlocked Apple iPhone 4s -8/16/32/64GB Black IOS6 3G WIFI Smartphone sealed at 30.0 USD
2025-05-13 15:41:10,560 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Unlocked Apple iPhone 4s -8/16/32/64GB Black IOS6 3G WIFI Smartphone sealed at 30.0 USD
2025-05-13 15:41:10,561 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 4s 16GB Black/white (Unlocked) (CDMA + GSM) IOS9 Sealed Smartphone at 31.0 USD
2025-05-13 15:41:10,561 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 4s 16GB Black/white (Unlocked) (CDMA + GSM) IOS9 Sealed Smartphone at 31.0 USD
2025-05-13 15:41:10,562 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Original Unlocked Apple iPhone 5 16/32/64GB smartphone working well at 39.0 USD
2025-05-13 15:41:10,562 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Original Unlocked Apple iPhone 5 16/32/64GB smartphone working well at 39.0 USD
2025-05-13 15:41:10,563 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Original Unlocked Apple iPhone 5s 16/32/64GB smartphone working well at 42.0 USD
2025-05-13 15:41:10,563 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Original Unlocked Apple iPhone 5s 16/32/64GB smartphone working well at 42.0 USD
2025-05-13 15:41:10,564 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 15 128GB Smartphone Fully Unlocked Very Good at 480.0 USD
2025-05-13 15:41:10,564 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 15 128GB Smartphone Fully Unlocked Very Good at 480.0 USD
2025-05-13 15:41:10,564 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: *NEW SEALED* Apple Verizon iPhone 6s Plus 16/64/128GB UNLOCKED Smartphone CF at 148.99 USD
2025-05-13 15:41:10,564 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: *NEW SEALED* Apple Verizon iPhone 6s Plus 16/64/128GB UNLOCKED Smartphone CF at 148.99 USD
2025-05-13 15:41:10,565 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: New UNOPENED  Apple iPhone SE - 16/64GB 4.0" Unlocked UNLOCKED Smartphone at 130.99 USD
2025-05-13 15:41:10,565 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: New UNOPENED  Apple iPhone SE - 16/64GB 4.0" Unlocked UNLOCKED Smartphone at 130.99 USD
2025-05-13 15:41:10,566 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: New *UNOPENDED* Apple iPhone 7 AT&T T-MOBILE Unlocked Smartphone/128GB/BLACK CF at 140.99 USD
2025-05-13 15:41:10,566 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: New *UNOPENDED* Apple iPhone 7 AT&T T-MOBILE Unlocked Smartphone/128GB/BLACK CF at 140.99 USD
2025-05-13 15:41:11,354 - DealFinderAI.EbayScraperAgent - INFO - Extracted 8 products from eBay
2025-05-13 15:41:11,355 - DealFinderAI.EbayScraperAgent - INFO - Applying relevance filtering to 8 products
2025-05-13 15:41:11,355 - DealFinderAI.EbayScraperAgent - INFO - Filtered to 5 most relevant products
2025-05-13 15:41:11,355 - DealFinderAI.Controller - INFO - eBay returned 5 products
2025-05-13 15:41:11,355 - DealFinderAI.Controller - INFO - Total products before aggregation: 10
2025-05-13 15:41:11,356 - DealFinderAI.ResultsAggregatorAgent - INFO - Aggregating results for query: find me beat deal on iphone 16
2025-05-13 15:41:11,356 - DealFinderAI.ResultsAggregatorAgent - INFO - Found 3 results from various sources
2025-05-13 15:41:11,356 - DealFinderAI.ResultsAggregatorAgent - INFO - Source Amazon: 0 products
2025-05-13 15:41:11,356 - DealFinderAI.ResultsAggregatorAgent - INFO - Source Walmart: 5 products
2025-05-13 15:41:11,356 - DealFinderAI.ResultsAggregatorAgent - INFO - Source eBay: 5 products
2025-05-13 15:41:11,356 - DealFinderAI.ResultsAggregatorAgent - INFO - Total products extracted: 10
2025-05-13 15:41:11,356 - DealFinderAI.ResultsAggregatorAgent - INFO - Ranking 10 products
2025-05-13 15:41:11,356 - DealFinderAI.ResultsAggregatorAgent - INFO - Sorted 10 products by score
2025-05-13 15:41:11,356 - DealFinderAI.ResultsAggregatorAgent - INFO - Returning 10 diversified products
2025-05-13 15:41:11,356 - DealFinderAI.ResultsAggregatorAgent - INFO - Products after ranking: 10
2025-05-13 15:41:11,356 - DealFinderAI.ResultsAggregatorAgent - INFO - Final products: 10
2025-05-13 15:41:11,356 - DealFinderAI.Controller - INFO - Products after aggregation: 10
2025-05-13 15:41:11,356 - DealFinderAI.ProductComparisonAgent - INFO - Comparing products for query: find me beat deal on iphone 16
2025-05-13 15:41:11,356 - DealFinderAI.ProductComparisonAgent - INFO - Found 10 products to compare
2025-05-13 15:41:11,356 - DealFinderAI.ProductComparisonAgent - INFO - Grouping 10 products
2025-05-13 15:41:11,357 - DealFinderAI.ProductComparisonAgent - INFO - Created 0 product groups
2025-05-13 15:41:11,357 - DealFinderAI.ChatMemoryAgent - INFO - Storing context for conversation session_20250513154026_23798302
2025-05-13 15:41:11,357 - DealFinderAI.ChatMemoryAgent - INFO - Storing 10 products for conversation session_20250513154026_23798302
2025-05-13 15:41:11,357 - DealFinderAI.PresentationAgent - INFO - Preparing presentation for 10 products
2025-05-13 15:41:11,357 - DealFinderAI.PresentationAgent - INFO - Formatting 10 products for display
2025-05-13 15:41:11,357 - DealFinderAI.PresentationAgent - INFO - Product 1: New UNOPENED  Apple iPhone SE - 16/64GB 4.0" Unlocked UNLOCKED Smartphone - Price: $130.99 - Source: eBay
2025-05-13 15:41:11,357 - DealFinderAI.PresentationAgent - INFO - Product 2: AT&T iPhone 16e 128GB Black. Apple Intelligence. - Price: $649.00 - Source: Walmart
2025-05-13 15:41:11,358 - DealFinderAI.PresentationAgent - INFO - Product 3: New *UNOPENDED* Apple iPhone 7 AT&T T-MOBILE Unlocked Smartphone/128GB/BLACK CF - Price: $140.99 - Source: eBay
2025-05-13 15:41:11,358 - DealFinderAI.PresentationAgent - INFO - Product 4: *NEW SEALED* Apple Verizon iPhone 6s Plus 16/64/128GB UNLOCKED Smartphone CF - Price: $148.99 - Source: eBay
2025-05-13 15:41:11,358 - DealFinderAI.PresentationAgent - INFO - Product 5: Original Unlocked Apple iPhone 5 16/32/64GB smartphone working well - Price: $39.00 - Source: eBay
2025-05-13 15:41:11,358 - DealFinderAI.PresentationAgent - INFO - Product 6: Apple iPhone 15 128GB Smartphone Fully Unlocked Very Good - Price: $480.00 - Source: eBay
2025-05-13 15:41:11,358 - DealFinderAI.PresentationAgent - INFO - Product 7: AT&T iPhone 16 128GB Ultramarine. Apple Intelligence. - Price: $879.00 - Source: Walmart
2025-05-13 15:41:11,358 - DealFinderAI.PresentationAgent - INFO - Product 8: Verizon iPhone 16 128GB Ultramarine. Apple Intelligence. - Price: $879.00 - Source: Walmart
2025-05-13 15:41:11,358 - DealFinderAI.PresentationAgent - INFO - Product 9: Straight Talk Apple iPhone 16, 128GB, White - Prepaid Smartphone [Locked to Straight Talk] - Price: $829.00 - Source: Walmart
2025-05-13 15:41:11,358 - DealFinderAI.PresentationAgent - INFO - Product 10: Straight Talk Apple iPhone 16, 128GB, Teal - Prepaid Smartphone [Locked to Straight Talk] - Price: $829.00 - Source: Walmart
2025-05-13 15:41:11,358 - DealFinderAI.ChatMemoryAgent - INFO - Storing context for conversation session_20250513154026_23798302
2025-05-13 15:41:11,358 - DealFinderAI.ChatMemoryAgent - INFO - Storing 10 products for conversation session_20250513154026_23798302
2025-05-13 15:41:11,358 - DealFinderAI.Controller - INFO - Successfully stored search results in memory
2025-05-13 15:43:10,226 - DealFinderAI.Controller - INFO - Processing user query: find me best deal on iphone 16
2025-05-13 15:43:10,227 - DealFinderAI.ChatMemoryAgent - INFO - Analyzing query: 'find me best deal on iphone 16' for conversation session_20250513154026_23798302
2025-05-13 15:43:10,227 - DealFinderAI.ChatMemoryAgent - INFO - Found 10 products in memory
2025-05-13 15:43:10,228 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: 
        You are an AI helping to analyze if a user's query is a follow-up question about previously shown products, or if it's a completely new search.

        Previous products shown to the user:
        Product 1: New UNOPENED  Apple iPhone SE - 16/64GB 4.0" Unlocked UNLOCKED Smartphone
Product 2: AT&T iPhone 16e 128GB Black. Apple Intelligence.
Product 3: New *UNOPENDED* Apple iPhone 7 AT&T T-MOBILE Unlocked Smartphone/128GB/BLACK CF
Product 4: *NEW SEALED* Apple Verizon iPhone 6s Plus 16/64/128GB UNLOCKED Smartphone CF
Product 5: Original Unlocked Apple iPhone 5 16/32/64GB smartphone working well

        User's new query: "find me best deal on iphone 16"

        Please analyze if this query is:
        1. A follow-up question about the previously shown products (e.g., asking for more details, comparing them, etc.)
        2. A completely new search (e.g., asking about different products, starting a new topic)

        Return your analysis in JSON format:
        {
            "is_new_search": true/false,
            "is_follow_up": true/false,
            "reasoning": "brief explanation of your decision",
            "referenced_product_indices": [list of 0-based indices of referenced products, if any]
        }
        
        Only return the JSON, with no additional text.
        
2025-05-13 15:43:11,282 - DealFinderAI.Controller - INFO - Analyze response: {'is_follow_up': False, 'focused_product': None, 'referenced_products': [], 'products': []}
2025-05-13 15:43:11,282 - DealFinderAI.Controller - INFO - Is follow-up? False
2025-05-13 15:43:11,282 - DealFinderAI.Controller - INFO - Referenced products: 0
2025-05-13 15:43:11,283 - DealFinderAI.Controller - INFO - Processing as new search query
2025-05-13 15:43:11,283 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: find me best deal on iphone 16
2025-05-13 15:43:12,024 - DealFinderAI.GeminiAgent - WARNING - Failed to parse Gemini response as JSON: ```json
{
  "product_type": "smartphone",
  "keywords": ["iphone 16"],
  "price_range": null,
  "brands": ["Apple"],
  "features": [],
  "sorting_preference": "price_low_to_high",
  "buy_it_now": true
}
```

2025-05-13 15:43:12,025 - DealFinderAI.Controller - INFO - Parsed search parameters: {'product_type': 'smartphone', 'keywords': ['iphone 16'], 'price_range': None, 'brands': ['Apple'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-13 15:43:12,025 - DealFinderAI.AmazonScraperAgent - INFO - Searching Amazon for: {'product_type': 'smartphone', 'keywords': ['iphone 16'], 'price_range': None, 'brands': ['Apple'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-13 15:43:12,026 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: 
            Optimize this search query for Amazon's search engine:
            
            "smartphone iphone 16 Apple"
            
            For Amazon searches, please:
            1. Focus on product-specific model numbers and identifiers if present
            2. Include key brand names (Amazon's A9 algorithm prioritizes brand matches)
            3. Remove generic words that may dilute results
            4. Add Amazon-specific terms that might improve results (like "Amazon's Choice" if looking for quality products)
            5. Optimize for Amazon's search algorithm which prioritizes exact matches and recent sales volume
            
            Return a JSON object with:
            - optimized_keywords: List of 3-5 optimized search terms (most important first)
            - amazon_category: Any Amazon department/category suggestion (Electronics, Books, etc.)
            - must_include_terms: Terms that MUST be in results
            - exclude_terms: Terms that should NOT be in results
            - amazon_search_filters: Any Amazon-specific filters to apply (Prime eligible, etc.)
            
            Format as JSON only with no explanation.
            
2025-05-13 15:43:12,826 - DealFinderAI.AmazonScraperAgent - INFO - Optimized search parameters: {'product_type': 'smartphone', 'keywords': ['iPhone 16', 'Apple iPhone 16', 'iPhone 16 Pro Max'], 'price_range': None, 'brands': ['Apple'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True, 'category': 'Electronics', 'must_include_terms': ['Apple', 'iPhone 16'], 'exclude_terms': ['smartphone'], 'amazon_filters': ['Prime Eligible', 'New']}
2025-05-13 15:43:12,827 - DealFinderAI.AmazonScraperAgent - INFO - Built optimized Amazon search query: Apple smartphone iPhone 16 Apple iPhone 16 iPhone 16 Pro Max
2025-05-13 15:43:12,827 - DealFinderAI.AmazonScraperAgent - INFO - Built Amazon query: Apple smartphone iPhone 16 Apple iPhone 16 iPhone 16 Pro Max
2025-05-13 15:43:12,828 - DealFinderAI.AmazonScraperAgent - INFO - Making Amazon search request with params: {'k': 'Apple smartphone iPhone 16 Apple iPhone 16 iPhone 16 Pro Max', 'ref': 'nb_sb_noss', 'crid': 1747165392, 'i': 'aps', 'search-alias': 'electronics', 's': 'price-asc-rank'}
2025-05-13 15:43:14,248 - DealFinderAI.AmazonScraperAgent - INFO - Found 24 product divs in search results
2025-05-13 15:43:14,251 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: LFGKMZ 2 Pack Camera Lens Protector Compatible with iPhone 16 Pro/iPhone 16 Pro Max,Tempered Glass Camera Cover,Auto Install,Ultra HD,Anti-Scratch,Strong Adhesion - Black Titanium at 3.99 USD
2025-05-13 15:43:14,251 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: LFGKMZ 2 Pack Camera Lens Protector Compatible with iPhone 16 Pro/iPhone 16 Pro Max,Tempered Glass Camera Cover,Auto Install,Ultra HD,Anti-Scratch,Strong Adhesion - Black Titanium at 3.99 USD
2025-05-13 15:43:14,255 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: LFGKMZ 2 Pack Tempered Glass Screen Protector for iPhone 16 Pro Max 6.9",[Military Grade Shatterproof],Auto Install,Ultra HD,9H Hardness,Zero Bubble at 3.99 USD
2025-05-13 15:43:14,255 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: LFGKMZ 2 Pack Tempered Glass Screen Protector for iPhone 16 Pro Max 6.9",[Military Grade Shatterproof],Auto Install,Ultra HD,9H Hardness,Zero Bubble at 3.99 USD
2025-05-13 15:43:14,258 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Compatible for iPhone 16 Pro/iPhone 16 Pro Max Camera Lens Protector, Ultra-HD Tempered Glass Camera Cover Screen Protector Metal Individual Ring Protector Decoration Accessories, Gold at 4.99 USD
2025-05-13 15:43:14,258 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Compatible for iPhone 16 Pro/iPhone 16 Pro Max Camera Lens Protector, Ultra-HD Tempered Glass Camera Cover Screen Protector Metal Individual Ring Protector Decoration Accessories, Gold at 4.99 USD
2025-05-13 15:43:14,262 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: 3X2 Pack Camera Lens Protector for iPhone 16 Pro Max,iPhone 16 Pro Tempered Glass Camera Lens Screen Protector Glitter Bling Camera Cover Metal Individual Ring for iPhone 16 Promax 5G,Glitter Gold at 4.99 USD
2025-05-13 15:43:14,262 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: 3X2 Pack Camera Lens Protector for iPhone 16 Pro Max,iPhone 16 Pro Tempered Glass Camera Lens Screen Protector Glitter Bling Camera Cover Metal Individual Ring for iPhone 16 Promax 5G,Glitter Gold at 4.99 USD
2025-05-13 15:43:14,266 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Camera Lens Protector for iPhone 16 Pro & iPhone 16 Pro Max, 9H Tempered Glass Camera Screen Cover, Black Metal Individual Ring at 4.99 USD
2025-05-13 15:43:14,266 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Camera Lens Protector for iPhone 16 Pro & iPhone 16 Pro Max, 9H Tempered Glass Camera Screen Cover, Black Metal Individual Ring at 4.99 USD
2025-05-13 15:43:14,271 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Compatible for iPhone 16 Pro/iPhone 16 Pro Max Camera Lens Protector Bling, 9H Tempered Glass Camera Cover Screen Protector Metal Individual Ring Protector Decoration, Colorful Glitter at 4.99 USD
2025-05-13 15:43:14,271 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Compatible for iPhone 16 Pro/iPhone 16 Pro Max Camera Lens Protector Bling, 9H Tempered Glass Camera Cover Screen Protector Metal Individual Ring Protector Decoration, Colorful Glitter at 4.99 USD
2025-05-13 15:43:14,275 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: [3 Pack Privacy Screen Protector for iPhone 16 Pro Max, Anti Spy, Anti Scratch, 9H Hardness, HD Clear, Ultra Resistant, Bubble Free, Case Friendly, Easy Installation at 5.99 USD
2025-05-13 15:43:14,275 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: [3 Pack Privacy Screen Protector for iPhone 16 Pro Max, Anti Spy, Anti Scratch, 9H Hardness, HD Clear, Ultra Resistant, Bubble Free, Case Friendly, Easy Installation at 5.99 USD
2025-05-13 15:43:14,278 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Camera Lens Protector for iPhone 16 Pro/Pro Max [3 Pack] Tempered Glass 9H Camera Protector, Case Friendly, Scratch Resistant Lens Shield, Night Shooting, Clear Cover  Clear at 5.99 USD
2025-05-13 15:43:14,278 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Camera Lens Protector for iPhone 16 Pro/Pro Max [3 Pack] Tempered Glass 9H Camera Protector, Case Friendly, Scratch Resistant Lens Shield, Night Shooting, Clear Cover  Clear at 5.99 USD
2025-05-13 15:43:14,283 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: for iPhone 16 Pro Max Case: iPhone 16 Pro Max Phone Case with Screen Protector 2PCS Tempered Glass, Slide Camera Cover & Magnetic Kickstand Funda para iPhone 16 Pro Max, Red at 6.49 USD
2025-05-13 15:43:14,283 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: for iPhone 16 Pro Max Case: iPhone 16 Pro Max Phone Case with Screen Protector 2PCS Tempered Glass, Slide Camera Cover & Magnetic Kickstand Funda para iPhone 16 Pro Max, Red at 6.49 USD
2025-05-13 15:43:14,286 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Type C Earphones for iPhone 15 15 Pro 15 Pro Max 16 16 Pro 16 Pro Max Headphones Wired, Stereo in Ear Earbuds Compatible with Most Type C Jack Devices Smartphones. at 6.99 USD
2025-05-13 15:43:14,286 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Type C Earphones for iPhone 15 15 Pro 15 Pro Max 16 16 Pro 16 Pro Max Headphones Wired, Stereo in Ear Earbuds Compatible with Most Type C Jack Devices Smartphones. at 6.99 USD
2025-05-13 15:43:15,066 - DealFinderAI.AmazonScraperAgent - INFO - Extracted 10 products from Amazon
2025-05-13 15:43:15,068 - DealFinderAI.AmazonScraperAgent - INFO - Applying relevance filtering to 10 products
2025-05-13 15:43:15,069 - DealFinderAI.AmazonScraperAgent - INFO - Filtered to 0 most relevant products
2025-05-13 15:43:15,069 - DealFinderAI.Controller - INFO - Amazon response content: {'source': 'Amazon', 'query': 'Apple smartphone iPhone 16 Apple iPhone 16 iPhone 16 Pro Max', 'products': []}
2025-05-13 15:43:15,070 - DealFinderAI.Controller - INFO - Amazon returned 0 products
2025-05-13 15:43:15,071 - DealFinderAI.WalmartScraperAgent - INFO - Searching Walmart for: {'product_type': 'smartphone', 'keywords': ['iphone 16'], 'price_range': None, 'brands': ['Apple'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-13 15:43:15,071 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: 
            Optimize this search query for Walmart's search engine:
            
            "smartphone iphone 16 Apple"
            
            For Walmart searches, please:
            1. Focus on model numbers and specific identifiers if present
            2. Include key brand names (Walmart's search works well with brand names)
            3. Remove generic words that may dilute results
            4. Add Walmart-specific terms that might improve results (like "Rollback" if looking for deals)
            5. Prioritize precise product names and specifications
            
            Return a JSON object with:
            - optimized_keywords: List of 3-5 optimized search terms (most important first)
            - department_hint: Any Walmart department suggestion (Electronics, Home, etc.)
            - must_include_terms: Terms that MUST be in results
            - exclude_terms: Terms that should NOT be in results
            - walmart_specific_filters: Any Walmart-specific filters to apply
            
            Format as JSON only with no explanation.
            
2025-05-13 15:43:16,908 - DealFinderAI.WalmartScraperAgent - INFO - Optimized search parameters: {'product_type': 'smartphone', 'keywords': ['iPhone 16', 'Apple iPhone 16', 'iPhone 16 Pro', 'iPhone 16 Pro Max'], 'price_range': None, 'brands': ['Apple'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True, 'department': 'Electronics', 'must_include_terms': ['Apple', 'iPhone 16'], 'exclude_terms': ['smartphone'], 'walmart_filters': ['Rollback', 'Deals']}
2025-05-13 15:43:16,908 - DealFinderAI.WalmartScraperAgent - INFO - Built optimized Walmart search query: Apple smartphone iPhone 16 Apple iPhone 16 iPhone 16 Pro
2025-05-13 15:43:16,910 - DealFinderAI.WalmartScraperAgent - INFO - Built Walmart query: Apple smartphone iPhone 16 Apple iPhone 16 iPhone 16 Pro
2025-05-13 15:43:16,910 - DealFinderAI.WalmartScraperAgent - INFO - Making Walmart search request with params: {'q': 'Apple smartphone iPhone 16 Apple iPhone 16 iPhone 16 Pro Electronics', 'page': 1, 'affinityOverride': 'default', 'sort': 'price_low'}
2025-05-13 15:43:18,680 - DealFinderAI.WalmartScraperAgent - INFO - Extracted 0 products from JSON data
2025-05-13 15:43:18,681 - DealFinderAI.WalmartScraperAgent - INFO - JSON extraction failed, falling back to HTML extraction
2025-05-13 15:43:18,682 - DealFinderAI.WalmartScraperAgent - INFO - Found 9 product divs in HTML
2025-05-13 15:43:20,999 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 15:43:21,000 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: AT&T iPhone 16 128GB Ultramarine. Apple Intelligence. at 879.0 USD
2025-05-13 15:43:22,970 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 15:43:22,970 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Verizon iPhone 16 128GB Ultramarine. Apple Intelligence. at 879.0 USD
2025-05-13 15:43:25,044 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 15:43:25,044 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: AT&T iPhone 16 Pro 128GB Desert Titanium. Apple Intelligence. at 1049.0 USD
2025-05-13 15:43:27,065 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 15:43:27,066 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Verizon iPhone 16 Pro 128GB Desert Titanium. Apple Intelligence. at 1049.0 USD
2025-05-13 15:43:30,086 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 15:43:30,086 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Straight Talk Apple iPhone 16, 128GB, White - Prepaid Smartphone [Locked to Straight Talk] at 829.0 USD
2025-05-13 15:43:32,297 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 15:43:32,298 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Straight Talk Apple iPhone 16, 128GB, Teal - Prepaid Smartphone [Locked to Straight Talk] at 829.0 USD
2025-05-13 15:43:35,052 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 15:43:35,053 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Straight Talk Apple iPhone 16, 128GB, Blue - Prepaid Smartphone [Locked to Straight Talk] at 829.0 USD
2025-05-13 15:43:37,448 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 15:43:37,448 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Straight Talk Apple iPhone 16, 128GB, Pink - Prepaid Smartphone [Locked to Straight Talk} at 829.0 USD
2025-05-13 15:43:39,634 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 15:43:39,634 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Straight Talk Apple iPhone 16, 256GB, White - Prepaid Smartphone [Locked to Straight Talk] at 929.0 USD
2025-05-13 15:43:39,634 - DealFinderAI.WalmartScraperAgent - INFO - Extracted 9 products from HTML
2025-05-13 15:43:39,635 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: AT&T iPhone 16 128GB Ultramarine. Apple Intelligence. at 879.0 USD
2025-05-13 15:43:39,635 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Verizon iPhone 16 128GB Ultramarine. Apple Intelligence. at 879.0 USD
2025-05-13 15:43:39,635 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: AT&T iPhone 16 Pro 128GB Desert Titanium. Apple Intelligence. at 1049.0 USD
2025-05-13 15:43:39,635 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Verizon iPhone 16 Pro 128GB Desert Titanium. Apple Intelligence. at 1049.0 USD
2025-05-13 15:43:39,635 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Straight Talk Apple iPhone 16, 128GB, White - Prepaid Smartphone [Locked to Straight Talk] at 829.0 USD
2025-05-13 15:43:39,635 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Straight Talk Apple iPhone 16, 128GB, Teal - Prepaid Smartphone [Locked to Straight Talk] at 829.0 USD
2025-05-13 15:43:39,635 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Straight Talk Apple iPhone 16, 128GB, Blue - Prepaid Smartphone [Locked to Straight Talk] at 829.0 USD
2025-05-13 15:43:39,635 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Straight Talk Apple iPhone 16, 128GB, Pink - Prepaid Smartphone [Locked to Straight Talk} at 829.0 USD
2025-05-13 15:43:39,635 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Straight Talk Apple iPhone 16, 256GB, White - Prepaid Smartphone [Locked to Straight Talk] at 929.0 USD
2025-05-13 15:43:40,751 - DealFinderAI.WalmartScraperAgent - INFO - Extracted 9 products from Walmart
2025-05-13 15:43:40,752 - DealFinderAI.WalmartScraperAgent - INFO - Applying relevance filtering to 9 products
2025-05-13 15:43:40,753 - DealFinderAI.WalmartScraperAgent - INFO - Filtered to 5 most relevant products
2025-05-13 15:43:40,753 - DealFinderAI.Controller - INFO - Walmart returned 5 products
2025-05-13 15:43:40,753 - DealFinderAI.EbayScraperAgent - INFO - Searching eBay for: {'product_type': 'smartphone', 'keywords': ['iphone 16'], 'price_range': None, 'brands': ['Apple'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-13 15:43:40,754 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: 
            Optimize this search query for eBay's search engine:
            
            "smartphone iphone 16 Apple"
            
            For eBay searches, please:
            1. Focus on exact model numbers and specific part identifiers if present
            2. Include key brand names
            3. Remove generic words that may dilute results
            4. Add eBay-specific terms that might improve results
            5. Optimize for finding the most relevant listings
            
            Return a JSON object with:
            - optimized_keywords: List of 3-5 optimized search terms (most important first)
            - category_hints: Any eBay category suggestions
            - must_include_terms: Terms that MUST be in results
            - exclude_terms: Terms that should NOT be in results
            
            Format as JSON only with no explanation.
            
2025-05-13 15:43:41,941 - DealFinderAI.EbayScraperAgent - INFO - Optimized search parameters: {'product_type': 'smartphone', 'keywords': ['iPhone 16', 'Apple iPhone 16', 'iPhone 16 Pro', 'iPhone 16 Pro Max'], 'price_range': None, 'brands': ['Apple'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True, 'category_hints': ['Cell Phones & Smartphones'], 'must_include_terms': ['Apple', 'iPhone'], 'exclude_terms': ['broken', 'repair', 'parts']}
2025-05-13 15:43:41,941 - DealFinderAI.EbayScraperAgent - INFO - Built optimized eBay search query: smartphone Apple iPhone 16 Apple iPhone 16 iPhone 16 Pro
2025-05-13 15:43:41,941 - DealFinderAI.EbayScraperAgent - INFO - Built eBay query: smartphone Apple iPhone 16 Apple iPhone 16 iPhone 16 Pro
2025-05-13 15:43:41,942 - DealFinderAI.EbayScraperAgent - INFO - Making eBay search request with params: {'_nkw': 'smartphone Apple iPhone 16 Apple iPhone 16 iPhone 16 Pro Cell Phones & Smartphones', '_sacat': '0', '_ipg': '96', '_sop': '15', 'LH_BIN': '1'}
2025-05-13 15:43:43,499 - DealFinderAI.EbayScraperAgent - INFO - Found 132 product listings
2025-05-13 15:43:43,500 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 14 Pro - 512 GB - Purple (Xfinity) Smartphone at 284.0 USD
2025-05-13 15:43:43,500 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 14 Pro - 512 GB - Purple (Xfinity) Smartphone at 284.0 USD
2025-05-13 15:43:43,501 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 14 Pro Max - 128 GB - Black (U.S. Cellular) Smartphone at 299.0 USD
2025-05-13 15:43:43,501 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 14 Pro Max - 128 GB - Black (U.S. Cellular) Smartphone at 299.0 USD
2025-05-13 15:43:43,503 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 14 Pro 256GB White / Silver AT&T at 349.99 USD
2025-05-13 15:43:43,503 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 14 Pro 256GB White / Silver AT&T at 349.99 USD
2025-05-13 15:43:43,504 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 14 Pro - 128 GB - Space Black (T-Mobile) Smartphone at 364.0 USD
2025-05-13 15:43:43,504 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 14 Pro - 128 GB - Space Black (T-Mobile) Smartphone at 364.0 USD
2025-05-13 15:43:43,505 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 16 Pro 128GB Unlocked 1-Year Warranty Smartphone Excellent at 841.99 USD
2025-05-13 15:43:43,505 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 16 Pro 128GB Unlocked 1-Year Warranty Smartphone Excellent at 841.99 USD
2025-05-13 15:43:43,505 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 16 Pro Unlocked (GSM + CDMA) Smartphone at 864.39 USD
2025-05-13 15:43:43,505 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 16 Pro Unlocked (GSM + CDMA) Smartphone at 864.39 USD
2025-05-13 15:43:43,506 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 16 Pro 128GB Factory Unlocked Open Box Mint Smartphone A3083 at 857.45 USD
2025-05-13 15:43:43,506 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 16 Pro 128GB Factory Unlocked Open Box Mint Smartphone A3083 at 857.45 USD
2025-05-13 15:43:43,507 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: APPLE IPHONE 16 PRO - 128GB - BLACK TITANIUM (FACTORY UNLOCKED)  SEALED at 938.95 USD
2025-05-13 15:43:43,507 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: APPLE IPHONE 16 PRO - 128GB - BLACK TITANIUM (FACTORY UNLOCKED)  SEALED at 938.95 USD
2025-05-13 15:43:44,153 - DealFinderAI.EbayScraperAgent - INFO - Extracted 8 products from eBay
2025-05-13 15:43:44,156 - DealFinderAI.EbayScraperAgent - INFO - Applying relevance filtering to 8 products
2025-05-13 15:43:44,157 - DealFinderAI.EbayScraperAgent - INFO - Filtered to 5 most relevant products
2025-05-13 15:43:44,157 - DealFinderAI.Controller - INFO - eBay returned 5 products
2025-05-13 15:43:44,157 - DealFinderAI.Controller - INFO - Total products before aggregation: 10
2025-05-13 15:43:44,157 - DealFinderAI.ResultsAggregatorAgent - INFO - Aggregating results for query: find me best deal on iphone 16
2025-05-13 15:43:44,157 - DealFinderAI.ResultsAggregatorAgent - INFO - Found 3 results from various sources
2025-05-13 15:43:44,157 - DealFinderAI.ResultsAggregatorAgent - INFO - Source Amazon: 0 products
2025-05-13 15:43:44,157 - DealFinderAI.ResultsAggregatorAgent - INFO - Source Walmart: 5 products
2025-05-13 15:43:44,157 - DealFinderAI.ResultsAggregatorAgent - INFO - Source eBay: 5 products
2025-05-13 15:43:44,157 - DealFinderAI.ResultsAggregatorAgent - INFO - Total products extracted: 10
2025-05-13 15:43:44,158 - DealFinderAI.ResultsAggregatorAgent - INFO - Ranking 10 products
2025-05-13 15:43:44,158 - DealFinderAI.ResultsAggregatorAgent - INFO - Sorted 10 products by score
2025-05-13 15:43:44,158 - DealFinderAI.ResultsAggregatorAgent - INFO - Returning 10 diversified products
2025-05-13 15:43:44,158 - DealFinderAI.ResultsAggregatorAgent - INFO - Products after ranking: 10
2025-05-13 15:43:44,158 - DealFinderAI.ResultsAggregatorAgent - INFO - Final products: 10
2025-05-13 15:43:44,158 - DealFinderAI.Controller - INFO - Products after aggregation: 10
2025-05-13 15:43:44,158 - DealFinderAI.ProductComparisonAgent - INFO - Comparing products for query: find me best deal on iphone 16
2025-05-13 15:43:44,158 - DealFinderAI.ProductComparisonAgent - INFO - Found 10 products to compare
2025-05-13 15:43:44,158 - DealFinderAI.ProductComparisonAgent - INFO - Grouping 10 products
2025-05-13 15:43:44,159 - DealFinderAI.ProductComparisonAgent - INFO - Created 0 product groups
2025-05-13 15:43:44,159 - DealFinderAI.ChatMemoryAgent - INFO - Storing context for conversation session_20250513154026_23798302
2025-05-13 15:43:44,159 - DealFinderAI.ChatMemoryAgent - INFO - Storing 10 products for conversation session_20250513154026_23798302
2025-05-13 15:43:44,159 - DealFinderAI.PresentationAgent - INFO - Preparing presentation for 10 products
2025-05-13 15:43:44,159 - DealFinderAI.PresentationAgent - INFO - Formatting 10 products for display
2025-05-13 15:43:44,159 - DealFinderAI.PresentationAgent - INFO - Product 1: APPLE IPHONE 16 PRO - 128GB - BLACK TITANIUM (FACTORY UNLOCKED)  SEALED - Price: $938.95 - Source: eBay
2025-05-13 15:43:44,159 - DealFinderAI.PresentationAgent - INFO - Product 2: AT&T iPhone 16 128GB Ultramarine. Apple Intelligence. - Price: $879.00 - Source: Walmart
2025-05-13 15:43:44,159 - DealFinderAI.PresentationAgent - INFO - Product 3: Apple iPhone 16 Pro 128GB Unlocked 1-Year Warranty Smartphone Excellent - Price: $841.99 - Source: eBay
2025-05-13 15:43:44,160 - DealFinderAI.PresentationAgent - INFO - Product 4: Apple iPhone 14 Pro - 512 GB - Purple (Xfinity) Smartphone - Price: $284.00 - Source: eBay
2025-05-13 15:43:44,160 - DealFinderAI.PresentationAgent - INFO - Product 5: Apple iPhone 16 Pro Unlocked (GSM + CDMA) Smartphone - Price: $864.39 - Source: eBay
2025-05-13 15:43:44,160 - DealFinderAI.PresentationAgent - INFO - Product 6: Apple iPhone 16 Pro 128GB Factory Unlocked Open Box Mint Smartphone A3083 - Price: $857.45 - Source: eBay
2025-05-13 15:43:44,160 - DealFinderAI.PresentationAgent - INFO - Product 7: Verizon iPhone 16 128GB Ultramarine. Apple Intelligence. - Price: $879.00 - Source: Walmart
2025-05-13 15:43:44,160 - DealFinderAI.PresentationAgent - INFO - Product 8: AT&T iPhone 16 Pro 128GB Desert Titanium. Apple Intelligence. - Price: $1049.00 - Source: Walmart
2025-05-13 15:43:44,160 - DealFinderAI.PresentationAgent - INFO - Product 9: Verizon iPhone 16 Pro 128GB Desert Titanium. Apple Intelligence. - Price: $1049.00 - Source: Walmart
2025-05-13 15:43:44,160 - DealFinderAI.PresentationAgent - INFO - Product 10: Straight Talk Apple iPhone 16, 128GB, White - Prepaid Smartphone [Locked to Straight Talk] - Price: $829.00 - Source: Walmart
2025-05-13 15:43:44,163 - DealFinderAI.ChatMemoryAgent - INFO - Storing context for conversation session_20250513154026_23798302
2025-05-13 15:43:44,163 - DealFinderAI.ChatMemoryAgent - INFO - Storing 10 products for conversation session_20250513154026_23798302
2025-05-13 15:43:44,163 - DealFinderAI.Controller - INFO - Successfully stored search results in memory
2025-05-13 15:47:32,438 - DealFinderAI - INFO - Logging initialized
2025-05-13 15:47:32,439 - DealFinderAI.Main - INFO - Starting DealFinder AI
2025-05-13 15:47:32,439 - DealFinderAI.Main - INFO - Using LangChain implementation
2025-05-13 15:47:32,480 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-13 15:47:32,480 - DealFinderAI.Controller - INFO - Initialized scraper agents: ['amazon', 'walmart', 'ebay']
2025-05-13 15:47:32,480 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-13 15:47:32,480 - DealFinderAI.Controller - INFO - Initialized scraper agents: ['amazon', 'walmart', 'ebay']
2025-05-13 15:47:32,480 - DealFinderAI.Main - INFO - Web app using LangChain implementation with Gemini model
2025-05-13 15:47:39,000 - DealFinderAI - INFO - Logging initialized
2025-05-13 15:47:39,000 - DealFinderAI.Main - INFO - Starting DealFinder AI
2025-05-13 15:47:39,001 - DealFinderAI.Main - INFO - Using LangChain implementation
2025-05-13 15:47:39,040 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-13 15:47:39,040 - DealFinderAI.Controller - INFO - Initialized scraper agents: ['amazon', 'walmart', 'ebay']
2025-05-13 15:47:39,040 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-13 15:47:39,040 - DealFinderAI.Controller - INFO - Initialized scraper agents: ['amazon', 'walmart', 'ebay']
2025-05-13 15:47:39,040 - DealFinderAI.Main - INFO - Web app using LangChain implementation with Gemini model
2025-05-13 15:47:54,075 - DealFinderAI.Controller - INFO - Processing user query: find me best deal on iphone 16 pro
2025-05-13 15:47:54,076 - DealFinderAI.ChatMemoryAgent - INFO - Analyzing query: 'find me best deal on iphone 16 pro' for conversation session_20250513154744_13d319f4
2025-05-13 15:47:54,076 - DealFinderAI.ChatMemoryAgent - INFO - No product context available for this conversation
2025-05-13 15:47:54,077 - DealFinderAI.Controller - INFO - Analyze response: {'is_follow_up': False, 'focused_product': None, 'referenced_products': [], 'products': []}
2025-05-13 15:47:54,077 - DealFinderAI.Controller - INFO - Is follow-up? False
2025-05-13 15:47:54,077 - DealFinderAI.Controller - INFO - Referenced products: 0
2025-05-13 15:47:54,077 - DealFinderAI.Controller - INFO - Processing as new search query
2025-05-13 15:47:54,078 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: find me best deal on iphone 16 pro
2025-05-13 15:47:55,497 - DealFinderAI.GeminiAgent - WARNING - Failed to parse Gemini response as JSON: ```json
{
  "product_type": "smartphone",
  "keywords": ["iphone", "16 pro"],
  "price_range": null,
  "brands": ["Apple"],
  "features": [],
  "sorting_preference": "price_low_to_high",
  "buy_it_now": true
}
```

2025-05-13 15:47:55,498 - DealFinderAI.Controller - INFO - Parsed search parameters: {'product_type': 'smartphone', 'keywords': ['iphone', '16 pro'], 'price_range': None, 'brands': ['Apple'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-13 15:47:55,498 - DealFinderAI.AmazonScraperAgent - INFO - Searching Amazon for: {'product_type': 'smartphone', 'keywords': ['iphone', '16 pro'], 'price_range': None, 'brands': ['Apple'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-13 15:47:55,498 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: 
            Optimize this search query for Amazon's search engine:
            
            "smartphone iphone 16 pro Apple"
            
            For Amazon searches, please:
            1. Focus on product-specific model numbers and identifiers if present
            2. Include key brand names (Amazon's A9 algorithm prioritizes brand matches)
            3. Remove generic words that may dilute results
            4. Add Amazon-specific terms that might improve results (like "Amazon's Choice" if looking for quality products)
            5. Optimize for Amazon's search algorithm which prioritizes exact matches and recent sales volume
            
            Return a JSON object with:
            - optimized_keywords: List of 3-5 optimized search terms (most important first)
            - amazon_category: Any Amazon department/category suggestion (Electronics, Books, etc.)
            - must_include_terms: Terms that MUST be in results
            - exclude_terms: Terms that should NOT be in results
            - amazon_search_filters: Any Amazon-specific filters to apply (Prime eligible, etc.)
            
            Format as JSON only with no explanation.
            
2025-05-13 15:47:56,648 - DealFinderAI.AmazonScraperAgent - INFO - Optimized search parameters: {'product_type': 'smartphone', 'keywords': ['iPhone 16 Pro', 'Apple iPhone 16 Pro', 'iPhone 16 Pro Max'], 'price_range': None, 'brands': ['Apple'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True, 'category': 'Electronics', 'must_include_terms': ['Apple', 'iPhone 16 Pro'], 'exclude_terms': ['smartphone'], 'amazon_filters': ['Prime Eligible', 'New']}
2025-05-13 15:47:56,648 - DealFinderAI.AmazonScraperAgent - INFO - Built optimized Amazon search query: Apple smartphone iPhone 16 Pro Apple iPhone 16 Pro iPhone 16 Pro Max
2025-05-13 15:47:56,648 - DealFinderAI.AmazonScraperAgent - INFO - Built Amazon query: Apple smartphone iPhone 16 Pro Apple iPhone 16 Pro iPhone 16 Pro Max
2025-05-13 15:47:56,649 - DealFinderAI.AmazonScraperAgent - INFO - Making Amazon search request with params: {'k': 'Apple smartphone iPhone 16 Pro Apple iPhone 16 Pro iPhone 16 Pro Max', 'ref': 'nb_sb_noss', 'crid': 1747165676, 'i': 'aps', 'search-alias': 'electronics', 's': 'price-asc-rank'}
2025-05-13 15:47:58,108 - DealFinderAI.AmazonScraperAgent - INFO - Found 24 product divs in search results
2025-05-13 15:47:58,113 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: LFGKMZ 2 Pack Camera Lens Protector Compatible with iPhone 16 Pro/iPhone 16 Pro Max,Tempered Glass Camera Cover,Auto Install,Ultra HD,Anti-Scratch,Strong Adhesion - Black Titanium at 3.99 USD
2025-05-13 15:47:58,113 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: LFGKMZ 2 Pack Camera Lens Protector Compatible with iPhone 16 Pro/iPhone 16 Pro Max,Tempered Glass Camera Cover,Auto Install,Ultra HD,Anti-Scratch,Strong Adhesion - Black Titanium at 3.99 USD
2025-05-13 15:47:58,116 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: LFGKMZ 2 Pack Tempered Glass Screen Protector for iPhone 16 Pro Max 6.9",[Military Grade Shatterproof],Auto Install,Ultra HD,9H Hardness,Zero Bubble at 3.99 USD
2025-05-13 15:47:58,116 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: LFGKMZ 2 Pack Tempered Glass Screen Protector for iPhone 16 Pro Max 6.9",[Military Grade Shatterproof],Auto Install,Ultra HD,9H Hardness,Zero Bubble at 3.99 USD
2025-05-13 15:47:58,119 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Suction Phone Mount for MagSafe Cases  Dual-Sided Silicone Sticky Phone Grip for iPhone 16/15/14/13/12 Pro Max/Pro/Plus/Mini, Ideal for Content Creators, Selfies, and Hands-Free Video(White) at 3.99 USD
2025-05-13 15:47:58,119 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Suction Phone Mount for MagSafe Cases  Dual-Sided Silicone Sticky Phone Grip for iPhone 16/15/14/13/12 Pro Max/Pro/Plus/Mini, Ideal for Content Creators, Selfies, and Hands-Free Video(White) at 3.99 USD
2025-05-13 15:47:58,122 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Portable Cell Phone Stand Holder for Desk, Foldable Pocket-Sized Mount, Adjustable Multi Angle Stand for iPhone 16 15 14 13 Pro Max, 4-10 iPad Smartphone, White at 3.99 USD
2025-05-13 15:47:58,122 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Portable Cell Phone Stand Holder for Desk, Foldable Pocket-Sized Mount, Adjustable Multi Angle Stand for iPhone 16 15 14 13 Pro Max, 4-10 iPad Smartphone, White at 3.99 USD
2025-05-13 15:47:58,125 - DealFinderAI.AmazonScraperAgent - WARNING - Incomplete data for ASIN B0DPMGDV36, falling back to Gemini extraction.
2025-05-13 15:47:58,126 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: 
            Extract detailed product information from this Amazon listing HTML:
            
            ```html
            <div class="sg-col-4-of-24 sg-col-4-of-12 s-result-item s-asin sg-col-4-of-16 sg-col s-widget-spacing-small sg-col-4-of-20" data-asin="B0DPMGDV36" data-component-type="s-search-result" data-index="8" data-uuid="b1bfa5d3-3fe0-48e8-832d-3e709f539147" id="b1bfa5d3-3fe0-48e8-832d-3e709f539147" role="listitem"><div class="sg-col-inner"><div cel_widget_id="MAIN-SEARCH_RESULTS-8" class="s-widget-container s-spacing-small s-widget-container-height-small celwidget slot=MAIN template=SEARCH_RESULTS widgetId=search-results_5" data-csa-c-item-id="amzn1.asin.1.B0DPMGDV36" data-csa-c-pos="5" data-csa-c-type="item" data-csa-op-log-render=""><span class="a-declarative" data-action="puis-card-container-declarative" data-csa-c-func-deps="aui-da-puis-card-container-declarative" data-csa-c-item-id="amzn1.asin.B0DPMGDV36" data-csa-c-owner="puis" data-csa-c-posx="5" data-csa-c-type="item" data-render-id="r3rgd8obqkk5t92ijocqez73izi" data-version-id="vgrbnavj5iylf2a1plj09cp2jv"><div class="puis-card-container s-card-container s-overflow-hidden aok-relative puis-expand-height puis-include-content-margin puis puis-vgrbnavj5iylf2a1plj09cp2jv s-latency-cf-section puis-card-border" data-cy="asin-faceout-container"><div class="a-section a-spacing-base"><div class="s-product-image-container aok-relative s-text-center s-image-overlay-grey puis-image-overlay-grey s-padding-left-small s-padding-right-small puis-spacing-small s-height-equalized puis puis-vgrbnavj5iylf2a1plj09cp2jv" data-cy="image-container"><span class="rush-component" data-component-type="s-product-image" data-render-id="r3rgd8obqkk5t92ijocqez73izi" data-version-id="vgrbnavj5iylf2a1plj09cp2jv"><a class="a-link-normal s-no-outline" href="/ZSAUTHREE-Protector-Compatible-Tempered-Decoration/dp/B0DPMGDV36/ref=sr_1_5?crid=1747165676&amp;dib=eyJ2IjoiMSJ9.6F9ySN-tR0LMNCWQ9hjyaeyyLiITtCbB7_HGC29aDSnFLss9i_4v2t-HHkoPBMn_tq8nFQyZKX1hP-jscyEUzmO8ZeoO45zGoJtWUWpF7w1ldJ1ralU-OaZfHiMqW3w-Q2rMuHATnjRpl84xRkxHfauUrLdWq-0uPRMSdlj6ctZS6N-lUIro8IupV6Ym99ADKmm2XkrRfpAQUGrURvY_bxcAchppeH9X2sJ_OPr8JXDYmI17pgHMDUaKkiKhakG3ErKb7UJDb7whumzQXMGD22QQWi1KbCyTWu5weGHsGHM.PBIv9s_sKwGOs9NI1ZUV3JFoPRTwyMxkVB7NOwHEsr4&amp;dib_tag=se&amp;keywords=Apple+smartphone+iPhone+16+Pro+Apple+iPhone+16+Pro+iPhone+16+Pro+Max&amp;qid=1747165676&amp;s=electronics&amp;sr=1-5" tabindex="-1"><div class="a-section aok-relative s-image-square-aspect"><img alt="ZSAUTHREE Camera Lens Protector Bling Compatible for iPhone 16 Pro/iPhone 16 Pro Max,9H Tempered Glass Camera Cover Screen..." aria-hidden="true" class="s-image" data-image-index="5" data-image-latency="s-product-image" data-image-load="" data-image-source-density="1" src="https://m.media-amazon.com/images/I/71F9UFbQVYL._AC_UL320_.jpg" srcset="https://m.media-amazon.com/images/I/71F9UFbQVYL._AC_UL320_.jpg 1x, https://m.media-amazon.com/images/I/71F9UFbQVYL._AC_UL480_FMwebp_QL65_.jpg 1.5x, https://m.media-amazon.com/images/I/71F9UFbQVYL._AC_UL640_FMwebp_QL65_.jpg 2x, https://m.media-amazon.com/images/I/71F9UFbQVYL._AC_UL800_FMwebp_QL65_.jpg 2.5x, https://m.media-amazon.com/images/I/71F9UFbQVYL._AC_UL960_FMwebp_QL65_.jpg 3x"/></div></a></span></div><div class="a-section a-spacing-small puis-padding-left-small puis-padding-right-small"><div class="a-section a-spacing-none a-text-center"><div class="a-section s-color-swatch-container s-color-swatch-container-left-aligned s-quick-view-text-align-start"><div data-csa-c-content-id="color-swatch-more-link" data-csa-c-interaction-events="click" data-csa-c-product-type="SCREEN_PROTECTOR" data-csa-c-swatch-more-url="/ZSAUTHREE-Protector-Compatible-Tempered-Decoration/dp/B0DPMGDV36/ref=cs_sr_dp?crid=1747165676&amp;dib=eyJ2IjoiMSJ9.6F9ySN-tR0LMNCWQ9hjyaeyyLiITtCbB7_HGC29aDSnFLss9i_4v2t-HHkoPBMn_tq8nFQyZKX1hP-jscyEUzmO8ZeoO45zGoJtWUWpF7w1ldJ1ralU-OaZfHiMqW3w-Q2rMuHATnjRpl84xRkxHfauUrLdWq-0uPRMSdlj6ctZS6N-lUIro8IupV6Ym99ADKmm2XkrRfpAQUGrURvY_bxcAchppeH9X2sJ_OPr8JXDYmI17pgHMDUaKkiKhakG3ErKb7UJDb7whumzQXMGD22QQWi1KbCyTWu5weGHsGHM.PBIv9s_sKwGOs9NI1ZUV3JFoPRTwyMxkVB7NOwHEsr4&amp;dib_tag=se&amp;keywords=Apple+smartphone+iPhone+16+Pro+Apple+iPhone+16+Pro+iPhone+16+Pro+Max&amp;qid=1747165676&amp;s=electronics&amp;sr=1-5" data-csa-c-swatch-remaining-count="+7 other colors/patterns" data-csa-c-type="link"><a class="a-link-normal s-color-swatch-link puis-spacing-small s-hidden-in-quick-view" href="/ZSAUTHREE-Protector-Compatible-Tempered-Decoration/dp/B0DPMGDV36/ref=cs_sr_dp?crid=1747165676&amp;dib=eyJ2IjoiMSJ9.6F9ySN-tR0LMNCWQ9hjyaeyyLiITtCbB7_HGC29aDSnFLss9i_4v2t-HHkoPBMn_tq8nFQyZKX1hP-jscyEUzmO8ZeoO45zGoJtWUWpF7w1ldJ1ralU-OaZfHiMqW3w-Q2rMuHATnjRpl84xRkxHfauUrLdWq-0uPRMSdlj6ctZS6N-lUIro8IupV6Ym99ADKmm2XkrRfpAQUGrURvY_bxcAchppeH9X2sJ_OPr8JXDYmI17pgHMDUaKkiKhakG3ErKb7UJDb7whumzQXMGD22QQWi1KbCyTWu5weGHsGHM.PBIv9s_sKwGOs9NI1ZUV3JFoPRTwyMxkVB7NOwHEsr4&amp;dib_tag=se&amp;keywords=Apple+smartphone+iPhone+16+Pro+Apple+iPhone+16+Pro+iPhone+16+Pro+Max&amp;qid=1747165676&amp;s=electronics&amp;sr=1-5" role="link"><u>+7 other colors/patterns</u></a></div></div></div><div class="a-section a-spacing-none a-spacing-top-small s-title-instructions-style" data-cy="title-recipe"><a class="a-link-normal s-line-clamp-4 s-link-style a-text-normal" href="/ZSAUTHREE-Protector-Compatible-Tempered-Decoration/dp/B0DPMGDV36/ref=sr_1_5?crid=1747165676&amp;dib=eyJ2IjoiMSJ9.6F9ySN-tR0LMNCWQ9hjyaeyyLiITtCbB7_HGC29aDSnFLss9i_4v2t-HHkoPBMn_tq8nFQyZKX1hP-jscyEUzmO8ZeoO45zGoJtWUWpF7w1ldJ1ralU-OaZfHiMqW3w-Q2rMuHATnjRpl84xRkxHfauUrLdWq-0uPRMSdlj6ctZS6N-lUIro8IupV6Ym99ADKmm2XkrRfpAQUGrURvY_bxcAchppeH9X2sJ_OPr8JXDYmI17pgHMDUaKkiKhakG3ErKb7UJDb7whumzQXMGD22QQWi1KbCyTWu5weGHsGHM.PBIv9s_sKwGOs9NI1ZUV3JFoPRTwyMxkVB7NOwHEsr4&amp;dib_tag=se&amp;keywords=Apple+smartphone+iPhone+16+Pro+Apple+iPhone+16+Pro+iPhone+16+Pro+Max&amp;qid=1747165676&amp;s=electronics&amp;sr=1-5"><h2 aria-label="Camera Lens Protector Bling Compatible for iPhone 16 Pro/iPhone 16 Pro Max,9H Tempered Glass Camera Cover Screen Protector,HD Clear,Aluminum Alloy Ring Decoration (Diamond Golden)" class="a-size-base-plus a-spacing-none a-color-base a-text-normal"><span>Camera Lens Protector Bling Compatible for iPhone 16 Pro/iPhone 16 Pro Max,9H Tempered Glass Camera Cover Screen Protector,HD Clear,Aluminum Alloy Ring Decoration (Diamond Golden)</span></h2></a> </div><div class="a-section a-spacing-none a-spacing-top-micro" data-cy="reviews-block"><div class="a-row a-size-small"><span class="a-declarative" data-a-popover='{"position":"triggerBottom","popoverLabel":"4.4 out of 5 stars, rating details","url":"/review/widgets/average-customer-review/popover/ref=acr_search__popover?ie=UTF8&amp;asin=B0DPMGDV36&amp;ref_=acr_search__popover&amp;contextId=search","closeButton":true,"closeButtonLabel":""}' data-action="a-popover" data-csa-c-func-deps="aui-da-a-popover" data-csa-c-type="widget" data-render-id="r3rgd8obqkk5t92ijocqez73izi" data-version-id="vgrbnavj5iylf2a1plj09cp2jv"><a aria-label="4.4 out of 5 stars, rating details" class="a-popover-trigger a-declarative" href="javascript:void(0)" role="button"><i aria-hidden="true" class="a-icon a-icon-star-small a-star-small-4-5" data-cy="reviews-ratings-slot"><span class="a-icon-alt">4.4 out of 5 stars</span></i><i class="a-icon a-icon-popover"></i></a></span> <span class="rush-component" data-component-type="s-client-side-analytics" data-render-id="r3rgd8obqkk5t92ijocqez73izi" data-version-id="vgrbnavj5iylf2a1plj09cp2jv"><div class="s-csa-instrumentation-wrapper alf-search-csa-instrumentation-wrapper" data-csa-c-asin="B0DPMGDV36" data-csa-c-content-id="alf-customer-ratings-count-component" data-csa-c-layout="GRID" data-csa-c-slot-id="alf-reviews" data-csa-c-type="alf-af-component" data-csa-op-log-render="" style="display: inline-block"><a aria-label="20 ratings" class="a-link-normal s-underline-text s-underline-link-text s-link-style" href="/ZSAUTHREE-Protector-Compatible-Tempered-Decoration/dp/B0DPMGDV36/ref=sr_1_5?crid=1747165676&amp;dib=eyJ2IjoiMSJ9.6F9ySN-tR0LMNCWQ9hjyaeyyLiITtCbB7_HGC29aDSnFLss9i_4v2t-HHkoPBMn_tq8nFQyZKX1hP-jscyEUzmO8ZeoO45zGoJtWUWpF7w1ldJ1ralU-OaZfHiMqW3w-Q2rMuHATnjRpl84xRkxHfauUrLdWq-0uPRMSdlj6ctZS6N-lUIro8IupV6Ym99ADKmm2XkrRfpAQUGrURvY_bxcAchppeH9X2sJ_OPr8JXDYmI17pgHMDUaKkiKhakG3ErKb7UJDb7whumzQXMGD22QQWi1KbCyTWu5weGHsGHM.PBIv9s_sKwGOs9NI1ZUV3JFoPRTwyMxkVB7NOwHEsr4&amp;dib_tag=se&amp;keywords=Apple+smartphone+iPhone+16+Pro+Apple+iPhone+16+Pro+iPhone+16+Pro+Max&amp;qid=1747165676&amp;s=electronics&amp;sr=1-5#customerReviews"><span aria-hidden="true" class="a-size-base s-underline-text">20</span> </a> </div></span></div></div><div class="a-section a-spacing-none a-spacing-top-small s-price-instructions-style" data-cy="price-recipe"><div class="a-row a-size-base a-color-base"><a class="a-link-normal s-no-hover s-underline-text s-underline-link-text s-link-style a-text-normal" href="/ZSAUTHREE-Protector-Compatible-Tempered-Decoration/dp/B0DPMGDV36/ref=sr_1_5?crid=1747165676&amp;dib=eyJ2IjoiMSJ9.6F9ySN-tR0LMNCWQ9hjyaeyyLiITtCbB7_HGC29aDSnFLss9i_4v2t-HHkoPBMn_tq8nFQyZKX1hP-jscyEUzmO8ZeoO45zGoJtWUWpF7w1ldJ1ralU-OaZfHiMqW3w-Q2rMuHATnjRpl84xRkxHfauUrLdWq-0uPRMSdlj6ctZS6N-lUIro8IupV6Ym99ADKmm2XkrRfpAQUGrURvY_bxcAchppeH9X2sJ_OPr8JXDYmI17pgHMDUaKkiKhakG3ErKb7UJDb7whumzQXMGD22QQWi1KbCyTWu5weGHsGHM.PBIv9s_sKwGOs9NI1ZUV3JFoPRTwyMxkVB7NOwHEsr4&amp;dib_tag=se&amp;keywords=Apple+smartphone+iPhone+16+Pro+Apple+iPhone+16+Pro+iPhone+16+Pro+Max&amp;qid=1747165676&amp;s=electronics&amp;sr=1-5"><span class="a-size-base-plus a-color-base a-text-normal">Click to see price</span></a></div></div><div class="a-section a-spacing-none a-spacing-top-micro" data-cy="delivery-recipe"><div class="a-row a-size-base a-color-secondary s-align-children-center"><div class="a-row s-align-children-center"><span class="aok-inline-block s-image-logo-view"><span class="aok-relative s-icon-text-medium s-prime"><i aria-label="Amazon Prime" class="a-icon a-icon-prime a-icon-medium" role="img"></i></span><span></span></span> </div><div class="a-row"><span aria-label="FREE delivery Sun, May 18 on $35 of items shipped by Amazon"><span class="a-color-base">FREE delivery </span><span class="a-color-base a-text-bold">Sun, May 18 </span><span class="a-color-base">on $35 of items shipped by Amazon</span></span></div><div class="a-row"><span aria-label="Or fastest delivery Tomorrow, May 14 "><span class="a-color-base">Or fastest delivery </span><span class="a-color-base a-text-bold">Tomorrow, May 14 </span></span></div></div></div><div class="a-section a-spacing-none a-spacing-top-mini"><div class="a-row"><div class="puis-atcb-container" data-atcb-props='{"cartType":"DEFAULT","csrfToken":"1@g8csJfbNJ7vNc8/jPvwUqKqNZf7I0g3nbe0peJjvXdEkAAAAAQAAAABoI6HtcmF3AAAAAGfA1H5nd8xGEcC3127HUQ==@ML8U5V","sessionId":"132-8813621-7915329","locale":"en-US"}' data-atcb-uid="atcb-B0DPMGDV36-5" data-cy="add-to-cart"><div class="addToCartShoppingPortalCSRFToken aok-hidden"><!-- sp:csrf --><meta content="hBN8y3VhBbmw7Wz6qAc6XbZLspn6qGgdGJxOfE0/KBNkAAAAAGgjoe0yMTg1N2VhNC04MTNkLTQ1NWQtOTFiNS00ZjYyNGIwMGZhYjc=" name="anti-csrftoken-a2z"/><!-- sp:end-csrf --></div><div class="a-section puis-atcb-add-container aok-inline-block"><div class="a-section atc-faceout-container"><form action="/cart/add-to-cart?ref=sr_atc_rt_add_5&amp;sr=1-5&amp;qid=1747165676&amp;discoveredAsins.0=B0DPMGDV36" class="a-spacing-none" method="post"><!-- sp:csrf --><input name="anti-csrftoken-a2z" type="hidden" value="hBN8y3VhBbmw7Wz6qAc6XbZLspn6qGgdGJxOfE0/KBNkAAAAAGgjoe0yMTg1N2VhNC04MTNkLTQ1NWQtOTFiNS00ZjYyNGIwMGZhYjc="/><!-- sp:end-csrf --><input name="clientName" type="hidden" value="EUIC_AddToCart_Search"><input name="items[0.base][asin]" type="hidden" value="B0DPMGDV36"/><input name="items[0.base][offerListingId]" type="hidden" value="pXbTQGvL%2F3KvaA07EwRCi2i9g%2FRkKjC2ERjRHlGavQWWnGnFwChNXJnwDqK4CD05L%2F3QZHEVt%2BuYT2dTUYhBCi%2Fti7fRtRLpuQeidb3pjaVfNOBZ4A3UK%2FWs8%2FcVlMMbnNfWF8HQvAzVeUb2WOCXy5mbYMft9apFYYomvmTVPiTY84h5Fd6cc8IvMfxe%2F%2BEv"/><input name="items[0.base][quantity]" type="hidden" value="1"/><div class="a-section ax-replace a-spacing-none"><div class="ax-atc celwidget atc-btn-container" data-csa-c-content-id="ax-atc-EUIC_AddToCart_Search-content" data-csa-c-device-env="WEB" data-csa-c-device-os="UNRECOGNIZED" data-csa-c-device-type="DESKTOP" data-csa-c-item-id="B0DPMGDV36" data-csa-c-item-type="asin" data-csa-c-pos="5" data-csa-c-slot-id="ax-atc-EUIC_AddToCart_Search" data-csa-c-type="item" id="ax-atc-EUIC_AddToCart_Search"><span class="a-declarative" data-action="puis-atcb-add-action-retail" data-csa-c-func-deps="aui-da-puis-atcb-add-action-retail" data-csa-c-type="widget" data-puis-atcb-add-action-retail='{"clientName":"EUIC_AddToCart_Search","messageSuccess":"Item Added","neoAtcUrl":"/cart/add-to-cart?ref=sr_atc_rt_add_5&amp;sr=1-5&amp;qid=1747165676&amp;discoveredAsins.0=B0DPMGDV36","messageError":"Failed to add item","additionalParameters":{},"asin":"B0DPMGDV36","spAttributionMethod":"POST","url":"https://data.amazon.com/api/marketplaces/ATVPDKIKX0DER/cart/carts/retail/items?ref=sr_atc_rt_add_5&amp;sr=1-5&amp;qid=1747165676&amp;discoveredAsins.0=B0DPMGDV36","offerListingId":"pXbTQGvL%2F3KvaA07EwRCi2i9g%2FRkKjC2ERjRHlGavQWWnGnFwChNXJnwDqK4CD05L%2F3QZHEVt%2BuYT2dTUYhBCi%2Fti7fRtRLpuQeidb3pjaVfNOBZ4A3UK%2FWs8%2FcVlMMbnNfWF8HQvAzVeUb2WOCXy5mbYMft9apFYYomvmTVPiTY84h5Fd6cc8IvMfxe%2F%2BEv"}' data-render-id="r3rgd8obqkk5t92ijocqez73izi" data-version-id="vgrbnavj5iylf2a1plj09cp2jv"><div data-csa-c-action-name="addToCart" data-csa-c-content-id="s-search-add-to-cart-action" data-csa-c-device-env="WEB" data-csa-c-device-os="UNRECOGNIZED" data-csa-c-device-type="DESKTOP" data-csa-c-item-id="B0DPMGDV36" data-csa-c-item-type="asin" data-csa-c-type="action"><span class="a-button a-button-primary a-button-icon puis-atcb-button"><span class="a-button-inner"><i class="a-icon a-icon-cart"></i><button aria-label="Add to cart" class="a-button-text" name="submit.addToCart" type="button">Add to cart</button></span></span></div></span></div></div></input></form></div></div><div class="a-section puis-atcb-error-container aok-hidden"><div class="a-box a-alert-inline a-alert-inline-error" role="alert"><div class="a-box-inner a-alert-container"><i class="a-icon a-icon-alert"></i><div class="a-alert-content"><span class="a-size-mini puis-atcb-error-message"></span></div></div></div></div><div class="a-section puis-atcb-extra-container"></div></div></div></div></div></div></div></span></div></div></div>
            ```
            
            Extract:
            - title: Full product title
            - price: Numeric price value only (no currency symbol)
            - was_price: Original price before discount (if present)
            - currency: Currency code (e.g., USD)
            - url: Product URL
            - image_url: Main product image URL
            - rating: Star rating (0-5)
            - reviews: Number of reviews
            - asin: Amazon ASIN
            - is_prime: Boolean for Prime eligible
            - is_sponsored: Boolean for sponsored listing
            - is_amazon_choice: Boolean for Amazon's Choice
            - is_best_seller: Boolean for Best Seller
            - description: Any additional description text
            - delivery_info: Delivery/shipping information
            - out_of_stock: Boolean for out of stock status
            
            Return a clean JSON object with these fields. Use null for missing values.
            
2025-05-13 15:48:02,767 - DealFinderAI.AmazonScraperAgent - INFO - Gemini extracted: Camera Lens Protector Bling Compatible for iPhone 16 Pro/iPhone 16 Pro Max,9H Tempered Glass Camera Cover Screen Protector,HD Clear,Aluminum Alloy Ring Decoration (Diamond Golden) at None USD
2025-05-13 15:48:02,767 - DealFinderAI.AmazonScraperAgent - INFO - Gemini used for product extraction
2025-05-13 15:48:02,767 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Camera Lens Protector Bling Compatible for iPhone 16 Pro/iPhone 16 Pro Max,9H Tempered Glass Camera Cover Screen Protector,HD Clear,Aluminum Alloy Ring Decoration (Diamond Golden) at None USD
2025-05-13 15:48:02,768 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Camera Lens Protector Bling Compatible for iPhone 16 Pro/iPhone 16 Pro Max,9H Tempered Glass Camera Cover Screen Protector,HD Clear,Aluminum Alloy Ring Decoration (Diamond Golden) at None USD
2025-05-13 15:48:02,782 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Universal Metal Cell Phone Stand, Multi-Angel Adjustable 360 Rotation Non-Slip Metal Phone Stand Compatible with iPhone 16 Pro Max and All Smartphones (Grey) at 4.99 USD
2025-05-13 15:48:02,782 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Universal Metal Cell Phone Stand, Multi-Angel Adjustable 360 Rotation Non-Slip Metal Phone Stand Compatible with iPhone 16 Pro Max and All Smartphones (Grey) at 4.99 USD
2025-05-13 15:48:02,791 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Misea at 4.99 USD
2025-05-13 15:48:02,791 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Misea at 4.99 USD
2025-05-13 15:48:02,800 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: 3X2 Pack Camera Lens Protector for iPhone 16 Pro Max,iPhone 16 Pro Tempered Glass Camera Lens Screen Protector Glitter Bling Camera Cover Metal Individual Ring for iPhone 16 Promax 5G,Glitter Gold at 4.99 USD
2025-05-13 15:48:02,800 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: 3X2 Pack Camera Lens Protector for iPhone 16 Pro Max,iPhone 16 Pro Tempered Glass Camera Lens Screen Protector Glitter Bling Camera Cover Metal Individual Ring for iPhone 16 Promax 5G,Glitter Gold at 4.99 USD
2025-05-13 15:48:02,806 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: iPhone 16 15 Charger Cable 60W,2Pack 1M Apple USB C to USB C Fast Charging Cable for iPhone 16/15/15 Plus/15 Pro/15 Pro Max, iPad Pro/Air/Mini,MacBook Ai at 4.99 USD
2025-05-13 15:48:02,806 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: iPhone 16 15 Charger Cable 60W,2Pack 1M Apple USB C to USB C Fast Charging Cable for iPhone 16/15/15 Plus/15 Pro/15 Pro Max, iPad Pro/Air/Mini,MacBook Ai at 4.99 USD
2025-05-13 15:48:02,811 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amiss at 4.99 USD
2025-05-13 15:48:02,811 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Amiss at 4.99 USD
2025-05-13 15:48:03,566 - DealFinderAI.AmazonScraperAgent - INFO - Extracted 10 products from Amazon
2025-05-13 15:48:03,567 - DealFinderAI.AmazonScraperAgent - INFO - Applying relevance filtering to 10 products
2025-05-13 15:48:03,567 - DealFinderAI.AmazonScraperAgent - ERROR - Error in relevance filtering: 'NoneType' object has no attribute 'lower'
2025-05-13 15:48:03,567 - DealFinderAI.Controller - INFO - Amazon response content: {'source': 'Amazon', 'query': 'Apple smartphone iPhone 16 Pro Apple iPhone 16 Pro iPhone 16 Pro Max', 'products': [{'title': 'LFGKMZ 2 Pack Camera Lens Protector Compatible with iPhone 16 Pro/iPhone 16 Pro Max,Tempered Glass Camera Cover,Auto Install,Ultra HD,Anti-Scratch,Strong Adhesion - Black Titanium', 'price': 3.99, 'was_price': None, 'currency': 'USD', 'url': 'https://www.amazon.com/Protector-Compatible-Tempered-Anti-Scratch-Adhesion/dp/B0DDQ7T2LG/ref=sr_1_1?crid=1747165676&dib=eyJ2IjoiMSJ9.6F9ySN-tR0LMNCWQ9hjyaeyyLiITtCbB7_HGC29aDSnFLss9i_4v2t-HHkoPBMn_tq8nFQyZKX1hP-jscyEUzmO8ZeoO45zGoJtWUWpF7w1ldJ1ralU-OaZfHiMqW3w-Q2rMuHATnjRpl84xRkxHfauUrLdWq-0uPRMSdlj6ctZS6N-lUIro8IupV6Ym99ADKmm2XkrRfpAQUGrURvY_bxcAchppeH9X2sJ_OPr8JXDYmI17pgHMDUaKkiKhakG3ErKb7UJDb7whumzQXMGD22QQWi1KbCyTWu5weGHsGHM.PBIv9s_sKwGOs9NI1ZUV3JFoPRTwyMxkVB7NOwHEsr4&dib_tag=se&keywords=Apple+smartphone+iPhone+16+Pro+Apple+iPhone+16+Pro+iPhone+16+Pro+Max&qid=1747165676&s=electronics&sr=1-1', 'image_url': 'https://m.media-amazon.com/images/I/61pHFBRuGHL._AC_UL320_.jpg', 'rating': 4.1, 'reviews': 5, 'is_sponsored': False, 'is_prime': True, 'is_amazon_choice': False, 'is_best_seller': False, 'asin': 'B0DDQ7T2LG', 'description': 'LFGKMZ 2 Pack Camera Lens Protector Compatible with iPhone 16 Pro/iPhone 16 Pro Max,Tempered Glass Camera Cover,Auto Install,Ultra HD,Anti-Scratch,Strong Adhesion - Black Titanium 4.1 out of 5 stars 5 Price, product page$3.99$3.99 FREE delivery Sun, May 18 on $35 of items shipped by AmazonOr fastest delivery Tomorrow, May 14 Add to cart', 'delivery_info': '', 'out_of_stock': False, 'source': 'Amazon'}, {'title': 'LFGKMZ 2 Pack Tempered Glass Screen Protector for iPhone 16 Pro Max 6.9",[Military Grade Shatterproof],Auto Install,Ultra HD,9H Hardness,Zero Bubble', 'price': 3.99, 'was_price': None, 'currency': 'USD', 'url': 'https://www.amazon.com/Tempered-Protector-Military-Shatterproof-Hardness/dp/B0DDQ7D1MB/ref=sr_1_2?crid=1747165676&dib=eyJ2IjoiMSJ9.6F9ySN-tR0LMNCWQ9hjyaeyyLiITtCbB7_HGC29aDSnFLss9i_4v2t-HHkoPBMn_tq8nFQyZKX1hP-jscyEUzmO8ZeoO45zGoJtWUWpF7w1ldJ1ralU-OaZfHiMqW3w-Q2rMuHATnjRpl84xRkxHfauUrLdWq-0uPRMSdlj6ctZS6N-lUIro8IupV6Ym99ADKmm2XkrRfpAQUGrURvY_bxcAchppeH9X2sJ_OPr8JXDYmI17pgHMDUaKkiKhakG3ErKb7UJDb7whumzQXMGD22QQWi1KbCyTWu5weGHsGHM.PBIv9s_sKwGOs9NI1ZUV3JFoPRTwyMxkVB7NOwHEsr4&dib_tag=se&keywords=Apple+smartphone+iPhone+16+Pro+Apple+iPhone+16+Pro+iPhone+16+Pro+Max&qid=1747165676&s=electronics&sr=1-2', 'image_url': 'https://m.media-amazon.com/images/I/71V5Fkh-6IL._AC_UL320_.jpg', 'rating': 4.1, 'reviews': 29, 'is_sponsored': False, 'is_prime': True, 'is_amazon_choice': False, 'is_best_seller': False, 'asin': 'B0DDQ7D1MB', 'description': '+1 other color/patternLFGKMZ 2 Pack Tempered Glass Screen Protector for iPhone 16 Pro Max 6.9",[Military Grade Shatterproof],Auto Install,Ultra HD,9H Hardness,Zero Bubble 4.1 out of 5 stars 29 Price, product page$3.99$3.99 FREE delivery Sun, May 18 on $35 of items shipped by AmazonOr fastest delivery Tomorrow, May 14 Add to cart', 'delivery_info': '', 'out_of_stock': False, 'source': 'Amazon'}, {'title': 'Suction Phone Mount for MagSafe Cases  Dual-Sided Silicone Sticky Phone Grip for iPhone 16/15/14/13/12 Pro Max/Pro/Plus/Mini, Ideal for Content Creators, Selfies, and Hands-Free Video(White)', 'price': 3.99, 'was_price': None, 'currency': 'USD', 'url': 'https://www.amazon.com/Suction-Phone-Mount-MagSafe-Cases/dp/B0DDK8XTQ2/ref=sr_1_3?crid=1747165676&dib=eyJ2IjoiMSJ9.6F9ySN-tR0LMNCWQ9hjyaeyyLiITtCbB7_HGC29aDSnFLss9i_4v2t-HHkoPBMn_tq8nFQyZKX1hP-jscyEUzmO8ZeoO45zGoJtWUWpF7w1ldJ1ralU-OaZfHiMqW3w-Q2rMuHATnjRpl84xRkxHfauUrLdWq-0uPRMSdlj6ctZS6N-lUIro8IupV6Ym99ADKmm2XkrRfpAQUGrURvY_bxcAchppeH9X2sJ_OPr8JXDYmI17pgHMDUaKkiKhakG3ErKb7UJDb7whumzQXMGD22QQWi1KbCyTWu5weGHsGHM.PBIv9s_sKwGOs9NI1ZUV3JFoPRTwyMxkVB7NOwHEsr4&dib_tag=se&keywords=Apple+smartphone+iPhone+16+Pro+Apple+iPhone+16+Pro+iPhone+16+Pro+Max&qid=1747165676&s=electronics&sr=1-3', 'image_url': 'https://m.media-amazon.com/images/I/61xLazhx-uL._AC_UL320_.jpg', 'rating': 4.0, 'reviews': 3, 'is_sponsored': False, 'is_prime': True, 'is_amazon_choice': False, 'is_best_seller': False, 'asin': 'B0DDK8XTQ2', 'description': 'Suction Phone Mount for MagSafe Cases  Dual-Sided Silicone Sticky Phone Grip for iPhone 16/15/14/13/12 Pro Max/Pro/Plus/Mini, Ideal for Content Creators, Selfies, and Hands-Free Video(White) 4.0 out of 5 stars 3 Price, product page$3.99$3.99 FREE delivery Mon, May 19 on $35 of items shipped by AmazonOnly 17 left in stock - order soon.Add to cart', 'delivery_info': '', 'out_of_stock': False, 'source': 'Amazon'}, {'title': 'Portable Cell Phone Stand Holder for Desk, Foldable Pocket-Sized Mount, Adjustable Multi Angle Stand for iPhone 16 15 14 13 Pro Max, 4-10 iPad Smartphone, White', 'price': 3.99, 'was_price': None, 'currency': 'USD', 'url': 'https://www.amazon.com/HZZADZXW-Portable-Pocket-Sized-Adjustable-Smartphone/dp/B0F5WD4KRF/ref=sr_1_4?crid=1747165676&dib=eyJ2IjoiMSJ9.6F9ySN-tR0LMNCWQ9hjyaeyyLiITtCbB7_HGC29aDSnFLss9i_4v2t-HHkoPBMn_tq8nFQyZKX1hP-jscyEUzmO8ZeoO45zGoJtWUWpF7w1ldJ1ralU-OaZfHiMqW3w-Q2rMuHATnjRpl84xRkxHfauUrLdWq-0uPRMSdlj6ctZS6N-lUIro8IupV6Ym99ADKmm2XkrRfpAQUGrURvY_bxcAchppeH9X2sJ_OPr8JXDYmI17pgHMDUaKkiKhakG3ErKb7UJDb7whumzQXMGD22QQWi1KbCyTWu5weGHsGHM.PBIv9s_sKwGOs9NI1ZUV3JFoPRTwyMxkVB7NOwHEsr4&dib_tag=se&keywords=Apple+smartphone+iPhone+16+Pro+Apple+iPhone+16+Pro+iPhone+16+Pro+Max&qid=1747165676&s=electronics&sr=1-4', 'image_url': 'https://m.media-amazon.com/images/I/61Jyz9z5Q-L._AC_UL320_.jpg', 'rating': 5.0, 'reviews': 4, 'is_sponsored': False, 'is_prime': True, 'is_amazon_choice': False, 'is_best_seller': False, 'asin': 'B0F5WD4KRF', 'description': '+7 other colors/patternsPortable Cell Phone Stand Holder for Desk, Foldable Pocket-Sized Mount, Adjustable Multi Angle Stand for iPhone 16 15 14 13 Pro Max, 4-10 iPad Smartphone, White 5.0 out of 5 stars 4 Price, product page$3.99$3.99 FREE delivery Jun 7 - 27 on $35 of items shipped by AmazonOr fastest delivery Jun 7 - 25 Add to cart', 'delivery_info': '', 'out_of_stock': False, 'source': 'Amazon'}, {'title': 'Camera Lens Protector Bling Compatible for iPhone 16 Pro/iPhone 16 Pro Max,9H Tempered Glass Camera Cover Screen Protector,HD Clear,Aluminum Alloy Ring Decoration (Diamond Golden)', 'price': None, 'was_price': None, 'currency': None, 'url': '/ZSAUTHREE-Protector-Compatible-Tempered-Decoration/dp/B0DPMGDV36/ref=sr_1_5?crid=1747165676&dib=eyJ2IjoiMSJ9.6F9ySN-tR0LMNCWQ9hjyaeyyLiITtCbB7_HGC29aDSnFLss9i_4v2t-HHkoPBMn_tq8nFQyZKX1hP-jscyEUzmO8ZeoO45zGoJtWUWpF7w1ldJ1ralU-OaZfHiMqW3w-Q2rMuHATnjRpl84xRkxHfauUrLdWq-0uPRMSdlj6ctZS6N-lUIro8IupV6Ym99ADKmm2XkrRfpAQUGrURvY_bxcAchppeH9X2sJ_OPr8JXDYmI17pgHMDUaKkiKhakG3ErKb7UJDb7whumzQXMGD22QQWi1KbCyTWu5weGHsGHM.PBIv9s_sKwGOs9NI1ZUV3JFoPRTwyMxkVB7NOwHEsr4&dib_tag=se&keywords=Apple+smartphone+iPhone+16+Pro+Apple+iPhone+16+Pro+iPhone+16+Pro+Max&qid=1747165676&s=electronics&sr=1-5', 'image_url': 'https://m.media-amazon.com/images/I/71F9UFbQVYL._AC_UL320_.jpg', 'rating': 4.4, 'reviews': 20, 'asin': 'B0DPMGDV36', 'is_prime': True, 'is_sponsored': False, 'is_amazon_choice': False, 'is_best_seller': False, 'description': None, 'delivery_info': 'FREE delivery Sun, May 18 on $35 of items shipped by Amazon\nOr fastest delivery Tomorrow, May 14', 'out_of_stock': False, 'source': 'Amazon'}]}
2025-05-13 15:48:03,568 - DealFinderAI.Controller - INFO - Amazon returned 5 products
2025-05-13 15:48:03,568 - DealFinderAI.WalmartScraperAgent - INFO - Searching Walmart for: {'product_type': 'smartphone', 'keywords': ['iphone', '16 pro'], 'price_range': None, 'brands': ['Apple'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-13 15:48:03,568 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: 
            Optimize this search query for Walmart's search engine:
            
            "smartphone iphone 16 pro Apple"
            
            For Walmart searches, please:
            1. Focus on model numbers and specific identifiers if present
            2. Include key brand names (Walmart's search works well with brand names)
            3. Remove generic words that may dilute results
            4. Add Walmart-specific terms that might improve results (like "Rollback" if looking for deals)
            5. Prioritize precise product names and specifications
            
            Return a JSON object with:
            - optimized_keywords: List of 3-5 optimized search terms (most important first)
            - department_hint: Any Walmart department suggestion (Electronics, Home, etc.)
            - must_include_terms: Terms that MUST be in results
            - exclude_terms: Terms that should NOT be in results
            - walmart_specific_filters: Any Walmart-specific filters to apply
            
            Format as JSON only with no explanation.
            
2025-05-13 15:48:04,534 - DealFinderAI.WalmartScraperAgent - INFO - Optimized search parameters: {'product_type': 'smartphone', 'keywords': ['iPhone 16 Pro', 'Apple iPhone 16 Pro', 'iPhone 16 Pro Max', 'Apple iPhone 16 Pro Max'], 'price_range': None, 'brands': ['Apple'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True, 'department': 'Electronics', 'must_include_terms': ['Apple', 'iPhone 16 Pro'], 'exclude_terms': ['smartphone'], 'walmart_filters': ['Rollback', 'New', 'Open-box']}
2025-05-13 15:48:04,534 - DealFinderAI.WalmartScraperAgent - INFO - Built optimized Walmart search query: Apple smartphone iPhone 16 Pro Apple iPhone 16 Pro iPhone 16 Pro Max
2025-05-13 15:48:04,534 - DealFinderAI.WalmartScraperAgent - INFO - Built Walmart query: Apple smartphone iPhone 16 Pro Apple iPhone 16 Pro iPhone 16 Pro Max
2025-05-13 15:48:04,534 - DealFinderAI.WalmartScraperAgent - INFO - Making Walmart search request with params: {'q': 'Apple smartphone iPhone 16 Pro Apple iPhone 16 Pro iPhone 16 Pro Max Electronics', 'page': 1, 'affinityOverride': 'default', 'sort': 'price_low'}
2025-05-13 15:48:07,173 - DealFinderAI.WalmartScraperAgent - INFO - Extracted 0 products from JSON data
2025-05-13 15:48:07,173 - DealFinderAI.WalmartScraperAgent - INFO - JSON extraction failed, falling back to HTML extraction
2025-05-13 15:48:07,176 - DealFinderAI.WalmartScraperAgent - INFO - Found 9 product divs in HTML
2025-05-13 15:48:09,116 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 15:48:09,117 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: AT&T iPhone 16 128GB Ultramarine. Apple Intelligence. at 879.0 USD
2025-05-13 15:48:11,090 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 15:48:11,091 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Verizon iPhone 16 128GB Ultramarine. Apple Intelligence. at 879.0 USD
2025-05-13 15:48:13,213 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 15:48:13,213 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: AT&T iPhone 16 Pro 128GB Desert Titanium. Apple Intelligence. at 1049.0 USD
2025-05-13 15:48:15,554 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 15:48:15,555 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Verizon iPhone 16 Pro 128GB Desert Titanium. Apple Intelligence. at 1049.0 USD
2025-05-13 15:48:18,142 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 15:48:18,143 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: AT&T iPhone 16 Pro Max 256GB Natural Titanium. Apple Intelligence. at 1249.0 USD
2025-05-13 15:48:20,134 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 15:48:20,134 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Verizon iPhone 16 Pro Max 256GB Black Titanium. Apple Intelligence. at 1249.0 USD
2025-05-13 15:48:22,857 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 15:48:22,858 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Straight Talk Apple iPhone 16, 128GB, White - Prepaid Smartphone [Locked to Straight Talk] at 829.0 USD
2025-05-13 15:48:25,072 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 15:48:25,073 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Straight Talk Apple iPhone 16, 128GB, Teal - Prepaid Smartphone [Locked to Straight Talk] at 829.0 USD
2025-05-13 15:48:27,761 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 15:48:27,761 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Straight Talk Apple iPhone 16, 256GB, White - Prepaid Smartphone [Locked to Straight Talk] at 929.0 USD
2025-05-13 15:48:27,761 - DealFinderAI.WalmartScraperAgent - INFO - Extracted 9 products from HTML
2025-05-13 15:48:27,761 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: AT&T iPhone 16 128GB Ultramarine. Apple Intelligence. at 879.0 USD
2025-05-13 15:48:27,761 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Verizon iPhone 16 128GB Ultramarine. Apple Intelligence. at 879.0 USD
2025-05-13 15:48:27,761 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: AT&T iPhone 16 Pro 128GB Desert Titanium. Apple Intelligence. at 1049.0 USD
2025-05-13 15:48:27,761 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Verizon iPhone 16 Pro 128GB Desert Titanium. Apple Intelligence. at 1049.0 USD
2025-05-13 15:48:27,761 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: AT&T iPhone 16 Pro Max 256GB Natural Titanium. Apple Intelligence. at 1249.0 USD
2025-05-13 15:48:27,761 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Verizon iPhone 16 Pro Max 256GB Black Titanium. Apple Intelligence. at 1249.0 USD
2025-05-13 15:48:27,761 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Straight Talk Apple iPhone 16, 128GB, White - Prepaid Smartphone [Locked to Straight Talk] at 829.0 USD
2025-05-13 15:48:27,761 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Straight Talk Apple iPhone 16, 128GB, Teal - Prepaid Smartphone [Locked to Straight Talk] at 829.0 USD
2025-05-13 15:48:27,761 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Straight Talk Apple iPhone 16, 256GB, White - Prepaid Smartphone [Locked to Straight Talk] at 929.0 USD
2025-05-13 15:48:28,500 - DealFinderAI.WalmartScraperAgent - INFO - Extracted 9 products from Walmart
2025-05-13 15:48:28,504 - DealFinderAI.WalmartScraperAgent - INFO - Applying relevance filtering to 9 products
2025-05-13 15:48:28,505 - DealFinderAI.WalmartScraperAgent - INFO - Filtered to 5 most relevant products
2025-05-13 15:48:28,505 - DealFinderAI.Controller - INFO - Walmart returned 5 products
2025-05-13 15:48:28,505 - DealFinderAI.EbayScraperAgent - INFO - Searching eBay for: {'product_type': 'smartphone', 'keywords': ['iphone', '16 pro'], 'price_range': None, 'brands': ['Apple'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-13 15:48:28,505 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: 
            Optimize this search query for eBay's search engine:
            
            "smartphone iphone 16 pro Apple"
            
            For eBay searches, please:
            1. Focus on exact model numbers and specific part identifiers if present
            2. Include key brand names
            3. Remove generic words that may dilute results
            4. Add eBay-specific terms that might improve results
            5. Optimize for finding the most relevant listings
            
            Return a JSON object with:
            - optimized_keywords: List of 3-5 optimized search terms (most important first)
            - category_hints: Any eBay category suggestions
            - must_include_terms: Terms that MUST be in results
            - exclude_terms: Terms that should NOT be in results
            
            Format as JSON only with no explanation.
            
2025-05-13 15:48:29,597 - DealFinderAI.EbayScraperAgent - INFO - Optimized search parameters: {'product_type': 'smartphone', 'keywords': ['iPhone 16 Pro', 'Apple iPhone 16 Pro', 'iPhone 16 Pro Max', 'Apple iPhone 16 Pro Max'], 'price_range': None, 'brands': ['Apple'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True, 'category_hints': ['Cell Phones & Smartphones', 'Consumer Electronics'], 'must_include_terms': ['Apple', 'iPhone 16 Pro'], 'exclude_terms': ['broken', 'repair', 'parts', 'damaged']}
2025-05-13 15:48:29,597 - DealFinderAI.EbayScraperAgent - INFO - Built optimized eBay search query: smartphone Apple iPhone 16 Pro Apple iPhone 16 Pro iPhone 16 Pro Max
2025-05-13 15:48:29,598 - DealFinderAI.EbayScraperAgent - INFO - Built eBay query: smartphone Apple iPhone 16 Pro Apple iPhone 16 Pro iPhone 16 Pro Max
2025-05-13 15:48:29,598 - DealFinderAI.EbayScraperAgent - INFO - Making eBay search request with params: {'_nkw': 'smartphone Apple iPhone 16 Pro Apple iPhone 16 Pro iPhone 16 Pro Max Cell Phones & Smartphones', '_sacat': '0', '_ipg': '96', '_sop': '15', 'LH_BIN': '1'}
2025-05-13 15:48:31,122 - DealFinderAI.EbayScraperAgent - INFO - Found 132 product listings
2025-05-13 15:48:31,123 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 14 Pro Max - 128 GB - Black (U.S. Cellular) Smartphone at 299.0 USD
2025-05-13 15:48:31,123 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 14 Pro Max - 128 GB - Black (U.S. Cellular) Smartphone at 299.0 USD
2025-05-13 15:48:31,125 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 14 Pro Max - 128 GB - AT&T ONLY - SCREEN SCRATCHES- 98% BH 95212 SL at 469.59 USD
2025-05-13 15:48:31,125 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 14 Pro Max - 128 GB - AT&T ONLY - SCREEN SCRATCHES- 98% BH 95212 SL at 469.59 USD
2025-05-13 15:48:31,126 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 14 Pro Max 256GB A2651 Purple (Locked to AT&T) Smartphone READ back at 449.99 USD
2025-05-13 15:48:31,126 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 14 Pro Max 256GB A2651 Purple (Locked to AT&T) Smartphone READ back at 449.99 USD
2025-05-13 15:48:31,127 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Used Apple iPhone 14 Pro Max 128GB Space Black (Unlocked) Smartphone at 524.99 USD
2025-05-13 15:48:31,127 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Used Apple iPhone 14 Pro Max 128GB Space Black (Unlocked) Smartphone at 524.99 USD
2025-05-13 15:48:31,128 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 14 Pro Max 256GB Unlocked Good Condition - All Colors at 619.99 USD
2025-05-13 15:48:31,128 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 14 Pro Max 256GB Unlocked Good Condition - All Colors at 619.99 USD
2025-05-13 15:48:31,129 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 14 Pro Max 128GB Unlocked Fair Condition - All Colors at 529.99 USD
2025-05-13 15:48:31,129 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 14 Pro Max 128GB Unlocked Fair Condition - All Colors at 529.99 USD
2025-05-13 15:48:31,129 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: APPLE IPHONE 16 PRO MAX 256GB 512GB (FACTORY UNLOCKED) NEVER ACTIVATEDSEALED at 1189.95 USD
2025-05-13 15:48:31,130 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: APPLE IPHONE 16 PRO MAX 256GB 512GB (FACTORY UNLOCKED) NEVER ACTIVATEDSEALED at 1189.95 USD
2025-05-13 15:48:31,130 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 16 Pro Max 512GB Unlocked AT&T T-Mobile Verizon Very Good Condition at 1099.95 USD
2025-05-13 15:48:31,130 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 16 Pro Max 512GB Unlocked AT&T T-Mobile Verizon Very Good Condition at 1099.95 USD
2025-05-13 15:48:32,016 - DealFinderAI.EbayScraperAgent - INFO - Extracted 8 products from eBay
2025-05-13 15:48:32,018 - DealFinderAI.EbayScraperAgent - INFO - Applying relevance filtering to 8 products
2025-05-13 15:48:32,019 - DealFinderAI.EbayScraperAgent - INFO - Filtered to 5 most relevant products
2025-05-13 15:48:32,019 - DealFinderAI.Controller - INFO - eBay returned 5 products
2025-05-13 15:48:32,020 - DealFinderAI.Controller - INFO - Total products before aggregation: 15
2025-05-13 15:48:32,020 - DealFinderAI.ResultsAggregatorAgent - INFO - Aggregating results for query: find me best deal on iphone 16 pro
2025-05-13 15:48:32,020 - DealFinderAI.ResultsAggregatorAgent - INFO - Found 3 results from various sources
2025-05-13 15:48:32,020 - DealFinderAI.ResultsAggregatorAgent - INFO - Source Amazon: 5 products
2025-05-13 15:48:32,021 - DealFinderAI.ResultsAggregatorAgent - INFO - Source Walmart: 5 products
2025-05-13 15:48:32,021 - DealFinderAI.ResultsAggregatorAgent - INFO - Source eBay: 5 products
2025-05-13 15:48:32,021 - DealFinderAI.ResultsAggregatorAgent - INFO - Total products extracted: 15
2025-05-13 15:48:32,021 - DealFinderAI.ResultsAggregatorAgent - INFO - Ranking 15 products
2025-05-13 15:48:32,021 - DealFinderAI.ResultsAggregatorAgent - WARNING - Invalid price format in product: Camera Lens Protector Bling Compatible for iPhone 16 Pro/iPhone 16 Pro Max,9H Tempered Glass Camera Cover Screen Protector,HD Clear,Aluminum Alloy Ring Decoration (Diamond Golden)
2025-05-13 15:48:32,022 - DealFinderAI.ResultsAggregatorAgent - INFO - Sorted 15 products by score
2025-05-13 15:48:32,022 - DealFinderAI.ResultsAggregatorAgent - INFO - Returning 10 diversified products
2025-05-13 15:48:32,022 - DealFinderAI.ResultsAggregatorAgent - INFO - Products after ranking: 10
2025-05-13 15:48:32,022 - DealFinderAI.ResultsAggregatorAgent - INFO - Final products: 10
2025-05-13 15:48:32,022 - DealFinderAI.Controller - INFO - Products after aggregation: 10
2025-05-13 15:48:32,022 - DealFinderAI.ProductComparisonAgent - INFO - Comparing products for query: find me best deal on iphone 16 pro
2025-05-13 15:48:32,022 - DealFinderAI.ProductComparisonAgent - INFO - Found 10 products to compare
2025-05-13 15:48:32,023 - DealFinderAI.ProductComparisonAgent - INFO - Grouping 10 products
2025-05-13 15:48:32,024 - DealFinderAI.ProductComparisonAgent - INFO - Created 0 product groups
2025-05-13 15:48:32,024 - DealFinderAI.ChatMemoryAgent - INFO - Storing context for conversation session_20250513154744_13d319f4
2025-05-13 15:48:32,024 - DealFinderAI.ChatMemoryAgent - INFO - Storing 10 products for conversation session_20250513154744_13d319f4
2025-05-13 15:48:32,024 - DealFinderAI.PresentationAgent - INFO - Preparing presentation for 10 products
2025-05-13 15:48:32,024 - DealFinderAI.PresentationAgent - INFO - Formatting 10 products for display
2025-05-13 15:48:32,024 - DealFinderAI.PresentationAgent - INFO - Product 1: Portable Cell Phone Stand Holder for Desk, Foldable Pocket-Sized Mount, Adjustable Multi Angle Stand for iPhone 16 15 14 13 Pro Max, 4-10 iPad Smartphone, White - Price: $3.99 - Source: Amazon
2025-05-13 15:48:32,025 - DealFinderAI.PresentationAgent - INFO - Product 2: APPLE IPHONE 16 PRO MAX 256GB 512GB (FACTORY UNLOCKED) NEVER ACTIVATEDSEALED - Price: $1189.95 - Source: eBay
2025-05-13 15:48:32,025 - DealFinderAI.PresentationAgent - INFO - Product 3: AT&T iPhone 16 Pro 128GB Desert Titanium. Apple Intelligence. - Price: $1049.00 - Source: Walmart
2025-05-13 15:48:32,025 - DealFinderAI.PresentationAgent - INFO - Product 4: Camera Lens Protector Bling Compatible for iPhone 16 Pro/iPhone 16 Pro Max,9H Tempered Glass Camera Cover Screen Protector,HD Clear,Aluminum Alloy Ring Decoration (Diamond Golden) - Price: $0.00 - Source: Amazon
2025-05-13 15:48:32,025 - DealFinderAI.PresentationAgent - INFO - Product 5: LFGKMZ 2 Pack Camera Lens Protector Compatible with iPhone 16 Pro/iPhone 16 Pro Max,Tempered Glass Camera Cover,Auto Install,Ultra HD,Anti-Scratch,Strong Adhesion - Black Titanium - Price: $3.99 - Source: Amazon
2025-05-13 15:48:32,025 - DealFinderAI.PresentationAgent - INFO - Product 6: LFGKMZ 2 Pack Tempered Glass Screen Protector for iPhone 16 Pro Max 6.9",[Military Grade Shatterproof],Auto Install,Ultra HD,9H Hardness,Zero Bubble - Price: $3.99 - Source: Amazon
2025-05-13 15:48:32,025 - DealFinderAI.PresentationAgent - INFO - Product 7: Suction Phone Mount for MagSafe Cases  Dual-Sided Silicone Sticky Phone Grip for iPhone 16/15/14/13/12 Pro Max/Pro/Plus/Mini, Ideal for Content Creators, Selfies, and Hands-Free Video(White) - Price: $3.99 - Source: Amazon
2025-05-13 15:48:32,025 - DealFinderAI.PresentationAgent - INFO - Product 8: Apple iPhone 16 Pro Max 512GB Unlocked AT&T T-Mobile Verizon Very Good Condition - Price: $1099.95 - Source: eBay
2025-05-13 15:48:32,026 - DealFinderAI.PresentationAgent - INFO - Product 9: Apple iPhone 14 Pro Max 256GB Unlocked Good Condition - All Colors - Price: $619.99 - Source: eBay
2025-05-13 15:48:32,026 - DealFinderAI.PresentationAgent - INFO - Product 10: Apple iPhone 14 Pro Max - 128 GB - Black (U.S. Cellular) Smartphone - Price: $299.00 - Source: eBay
2025-05-13 15:48:32,026 - DealFinderAI.ChatMemoryAgent - INFO - Storing context for conversation session_20250513154744_13d319f4
2025-05-13 15:48:32,026 - DealFinderAI.ChatMemoryAgent - INFO - Storing 10 products for conversation session_20250513154744_13d319f4
2025-05-13 15:48:32,026 - DealFinderAI.Controller - INFO - Successfully stored search results in memory
2025-05-13 15:50:25,728 - DealFinderAI - INFO - Logging initialized
2025-05-13 15:50:25,729 - DealFinderAI.Main - INFO - Starting DealFinder AI
2025-05-13 15:50:25,729 - DealFinderAI.Main - INFO - Using LangChain implementation
2025-05-13 15:50:25,768 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-13 15:50:25,769 - DealFinderAI.Controller - INFO - Initialized scraper agents: ['amazon', 'walmart', 'ebay']
2025-05-13 15:50:25,769 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-13 15:50:25,769 - DealFinderAI.Controller - INFO - Initialized scraper agents: ['amazon', 'walmart', 'ebay']
2025-05-13 15:50:25,769 - DealFinderAI.Main - INFO - Web app using LangChain implementation with Gemini model
2025-05-13 15:50:37,367 - DealFinderAI.Controller - INFO - Processing user query: find me best deal on iphone 16
2025-05-13 15:50:37,367 - DealFinderAI.ChatMemoryAgent - INFO - Analyzing query: 'find me best deal on iphone 16' for conversation session_20250513155029_660e124f
2025-05-13 15:50:37,367 - DealFinderAI.ChatMemoryAgent - INFO - No product context available for this conversation
2025-05-13 15:50:37,367 - DealFinderAI.Controller - INFO - Analyze response: {'is_follow_up': False, 'focused_product': None, 'referenced_products': [], 'products': []}
2025-05-13 15:50:37,367 - DealFinderAI.Controller - INFO - Is follow-up? False
2025-05-13 15:50:37,368 - DealFinderAI.Controller - INFO - Referenced products: 0
2025-05-13 15:50:37,368 - DealFinderAI.Controller - INFO - Processing as new search query
2025-05-13 15:50:37,368 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: find me best deal on iphone 16
2025-05-13 15:50:38,316 - DealFinderAI.GeminiAgent - WARNING - Failed to parse Gemini response as JSON: ```json
{
  "product_type": "smartphone",
  "keywords": ["iphone 16"],
  "price_range": null,
  "brands": ["Apple"],
  "features": [],
  "sorting_preference": "price_low_to_high",
  "buy_it_now": true
}
```

2025-05-13 15:50:38,317 - DealFinderAI.Controller - INFO - Parsed search parameters: {'product_type': 'smartphone', 'keywords': ['iphone 16'], 'price_range': None, 'brands': ['Apple'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-13 15:50:38,317 - DealFinderAI.AmazonScraperAgent - INFO - Searching Amazon for: {'product_type': 'smartphone', 'keywords': ['iphone 16'], 'price_range': None, 'brands': ['Apple'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-13 15:50:38,317 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: 
            Optimize this search query for Amazon's search engine:
            
            "smartphone iphone 16 Apple"
            
            For Amazon searches, please:
            1. Focus on product-specific model numbers and identifiers if present
            2. Include key brand names (Amazon's A9 algorithm prioritizes brand matches)
            3. Remove generic words that may dilute results
            4. Add Amazon-specific terms that might improve results (like "Amazon's Choice" if looking for quality products)
            5. Optimize for Amazon's search algorithm which prioritizes exact matches and recent sales volume
            
            Return a JSON object with:
            - optimized_keywords: List of 3-5 optimized search terms (most important first)
            - amazon_category: Any Amazon department/category suggestion (Electronics, Books, etc.)
            - must_include_terms: Terms that MUST be in results
            - exclude_terms: Terms that should NOT be in results
            - amazon_search_filters: Any Amazon-specific filters to apply (Prime eligible, etc.)
            
            Format as JSON only with no explanation.
            
2025-05-13 15:50:39,242 - DealFinderAI.AmazonScraperAgent - INFO - Optimized search parameters: {'product_type': 'smartphone', 'keywords': ['iPhone 16', 'Apple iPhone 16', 'iPhone 16 Pro Max', 'Apple iPhone 16 Pro'], 'price_range': None, 'brands': ['Apple'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True, 'category': 'Electronics', 'must_include_terms': ['Apple', 'iPhone 16'], 'exclude_terms': ['smartphone'], 'amazon_filters': ['Prime Eligible', 'New']}
2025-05-13 15:50:39,242 - DealFinderAI.AmazonScraperAgent - INFO - Built optimized Amazon search query: Apple smartphone iPhone 16 Apple iPhone 16 iPhone 16 Pro Max
2025-05-13 15:50:39,242 - DealFinderAI.AmazonScraperAgent - INFO - Built Amazon query: Apple smartphone iPhone 16 Apple iPhone 16 iPhone 16 Pro Max
2025-05-13 15:50:39,242 - DealFinderAI.AmazonScraperAgent - INFO - Making Amazon search request with params: {'k': 'Apple smartphone iPhone 16 Apple iPhone 16 iPhone 16 Pro Max', 'ref': 'nb_sb_noss', 'crid': 1747165839, 'i': 'aps', 'search-alias': 'electronics', 's': 'price-asc-rank'}
2025-05-13 15:50:40,248 - DealFinderAI.AmazonScraperAgent - INFO - Found 24 product divs in search results
2025-05-13 15:50:40,253 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: LFGKMZ 2 Pack Camera Lens Protector Compatible with iPhone 16 Pro/iPhone 16 Pro Max,Tempered Glass Camera Cover,Auto Install,Ultra HD,Anti-Scratch,Strong Adhesion - Black Titanium at 3.99 USD
2025-05-13 15:50:40,253 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: LFGKMZ 2 Pack Camera Lens Protector Compatible with iPhone 16 Pro/iPhone 16 Pro Max,Tempered Glass Camera Cover,Auto Install,Ultra HD,Anti-Scratch,Strong Adhesion - Black Titanium at 3.99 USD
2025-05-13 15:50:40,256 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: LFGKMZ 2 Pack Tempered Glass Screen Protector for iPhone 16 Pro Max 6.9",[Military Grade Shatterproof],Auto Install,Ultra HD,9H Hardness,Zero Bubble at 3.99 USD
2025-05-13 15:50:40,256 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: LFGKMZ 2 Pack Tempered Glass Screen Protector for iPhone 16 Pro Max 6.9",[Military Grade Shatterproof],Auto Install,Ultra HD,9H Hardness,Zero Bubble at 3.99 USD
2025-05-13 15:50:40,260 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Screen Protector for iPhone 16 Pro Max, 2 Pack Clear 9H Tempered Glass Film Cover Sensor Protection Case Friendly for 6.9 inch at 3.99 USD
2025-05-13 15:50:40,260 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Screen Protector for iPhone 16 Pro Max, 2 Pack Clear 9H Tempered Glass Film Cover Sensor Protection Case Friendly for 6.9 inch at 3.99 USD
2025-05-13 15:50:40,264 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Portable Cell Phone Stand Holder for Desk, Foldable Pocket-Sized Mount, Adjustable Multi Angle Stand for iPhone 16 15 14 13 Pro Max, 4-10 iPad Smartphone, White at 3.99 USD
2025-05-13 15:50:40,264 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Portable Cell Phone Stand Holder for Desk, Foldable Pocket-Sized Mount, Adjustable Multi Angle Stand for iPhone 16 15 14 13 Pro Max, 4-10 iPad Smartphone, White at 3.99 USD
2025-05-13 15:50:40,267 - DealFinderAI.AmazonScraperAgent - WARNING - Incomplete data for ASIN B0DPMGDV36, falling back to Gemini extraction.
2025-05-13 15:50:40,268 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: 
            Extract detailed product information from this Amazon listing HTML:
            
            ```html
            <div class="sg-col-20-of-24 s-result-item s-asin sg-col-0-of-12 sg-col-16-of-20 sg-col s-widget-spacing-small sg-col-12-of-16" data-asin="B0DPMGDV36" data-component-type="s-search-result" data-index="8" data-uuid="b80566d1-6c4e-4e71-a1d1-7cb9dd2ae5d6" id="b80566d1-6c4e-4e71-a1d1-7cb9dd2ae5d6" role="listitem"><div class="sg-col-inner"><div cel_widget_id="MAIN-SEARCH_RESULTS-8" class="s-widget-container s-spacing-small s-widget-container-height-small celwidget slot=MAIN template=SEARCH_RESULTS widgetId=search-results_5" data-csa-c-item-id="amzn1.asin.1.B0DPMGDV36" data-csa-c-pos="5" data-csa-c-type="item" data-csa-op-log-render=""><span class="a-declarative" data-action="puis-card-container-declarative" data-csa-c-func-deps="aui-da-puis-card-container-declarative" data-csa-c-item-id="amzn1.asin.B0DPMGDV36" data-csa-c-owner="puis" data-csa-c-posx="5" data-csa-c-type="item" data-render-id="rjvaa5ahb52ug22wz27sptpsa5" data-version-id="vgrbnavj5iylf2a1plj09cp2jv"><div class="puis-card-container s-card-container s-overflow-hidden aok-relative puis-include-content-margin puis puis-vgrbnavj5iylf2a1plj09cp2jv s-latency-cf-section puis-card-border" data-cy="asin-faceout-container"><div class="a-section"><div class="puisg-row"><div class="puisg-col puisg-col-4-of-4 puisg-col-4-of-8 puisg-col-4-of-12 puisg-col-4-of-16 puisg-col-4-of-20 puisg-col-4-of-24 puis-list-col-left"><div class="puisg-col-inner"><div class="a-section a-spacing-none aok-relative puis-status-badge-container s-list-status-badge-container"></div><div class="s-product-image-container aok-relative s-text-center s-image-overlay-grey puis-image-overlay-grey s-padding-left-small s-padding-right-small puis-flex-expand-height puis puis-vgrbnavj5iylf2a1plj09cp2jv" data-cy="image-container"><div class="aok-relative"><span class="rush-component" data-component-type="s-product-image" data-render-id="rjvaa5ahb52ug22wz27sptpsa5" data-version-id="vgrbnavj5iylf2a1plj09cp2jv"><a class="a-link-normal s-no-outline" href="/ZSAUTHREE-Protector-Compatible-Tempered-Decoration/dp/B0DPMGDV36/ref=sr_1_5?crid=1747165839&amp;dib=eyJ2IjoiMSJ9.6F9ySN-tR0LMNCWQ9hjyaZtihLBzXFEHCRNcPCnkYpnFLss9i_4v2t-HHkoPBMn_jyQW275VNDVjCp22oZBm2i9g0F-nZZi0fHOGIlMow7uieIKa1joNJCVUzhG9xNxvzChzCel-furt7uM87ijl2Dx6VhD9F4cG9rPNLrXFthjbbcghV5A5THBZgKWagsBTG8hGzz0lcZeyDhxqGaRT7nAOsBVwrpDG9OToh-6cmcaOGNN0vuIErIeOkAMoRH11ErKb7UJDb7whumzQXMGD22QQWi1KbCyTWu5weGHsGHM.QrF00mFjQ04Ik1fhYIvNpydAYwzJVr1S4ZqYBsyO9VI&amp;dib_tag=se&amp;keywords=Apple+smartphone+iPhone+16+Apple+iPhone+16+iPhone+16+Pro+Max&amp;qid=1747165839&amp;s=electronics&amp;sr=1-5" tabindex="-1"><div class="a-section aok-relative s-image-fixed-height"><img alt="ZSAUTHREE Camera Lens Protector Bling Compatible for iPhone 16 Pro/iPhone 16 Pro Max,9H Tempered Glass Camera Cover Screen..." aria-hidden="true" class="s-image" data-image-index="5" data-image-latency="s-product-image" data-image-load="" data-image-source-density="1" src="https://m.media-amazon.com/images/I/71F9UFbQVYL._AC_UY218_.jpg" srcset="https://m.media-amazon.com/images/I/71F9UFbQVYL._AC_UY218_.jpg 1x, https://m.media-amazon.com/images/I/71F9UFbQVYL._AC_UY327_FMwebp_QL65_.jpg 1.5x, https://m.media-amazon.com/images/I/71F9UFbQVYL._AC_UY436_FMwebp_QL65_.jpg 2x, https://m.media-amazon.com/images/I/71F9UFbQVYL._AC_UY545_FMwebp_QL65_.jpg 2.5x, https://m.media-amazon.com/images/I/71F9UFbQVYL._AC_UY654_FMwebp_QL65_.jpg 3x"/></div></a></span></div></div></div></div><div class="puisg-col puisg-col-0-of-4 puisg-col-0-of-8 puisg-col-4-of-12 puisg-col-8-of-16 puisg-col-12-of-20 puisg-col-12-of-24 puis-list-col-right"><div class="puisg-col-inner"><div class="a-section a-spacing-small a-spacing-top-small"><div class="a-section a-spacing-none puis-padding-right-small s-title-instructions-style" data-cy="title-recipe"><a class="a-link-normal s-line-clamp-2 s-link-style a-text-normal" href="/ZSAUTHREE-Protector-Compatible-Tempered-Decoration/dp/B0DPMGDV36/ref=sr_1_5?crid=1747165839&amp;dib=eyJ2IjoiMSJ9.6F9ySN-tR0LMNCWQ9hjyaZtihLBzXFEHCRNcPCnkYpnFLss9i_4v2t-HHkoPBMn_jyQW275VNDVjCp22oZBm2i9g0F-nZZi0fHOGIlMow7uieIKa1joNJCVUzhG9xNxvzChzCel-furt7uM87ijl2Dx6VhD9F4cG9rPNLrXFthjbbcghV5A5THBZgKWagsBTG8hGzz0lcZeyDhxqGaRT7nAOsBVwrpDG9OToh-6cmcaOGNN0vuIErIeOkAMoRH11ErKb7UJDb7whumzQXMGD22QQWi1KbCyTWu5weGHsGHM.QrF00mFjQ04Ik1fhYIvNpydAYwzJVr1S4ZqYBsyO9VI&amp;dib_tag=se&amp;keywords=Apple+smartphone+iPhone+16+Apple+iPhone+16+iPhone+16+Pro+Max&amp;qid=1747165839&amp;s=electronics&amp;sr=1-5"><h2 aria-label="Camera Lens Protector Bling Compatible for iPhone 16 Pro/iPhone 16 Pro Max,9H Tempered Glass Camera Cover Screen Protector,HD Clear,Aluminum Alloy Ring Decoration (Diamond Golden)" class="a-size-medium a-spacing-none a-color-base a-text-normal"><span>Camera Lens Protector Bling Compatible for iPhone 16 Pro/iPhone 16 Pro Max,9H Tempered Glass Camera Cover Screen Protector,HD Clear,Aluminum Alloy Ring Decoration (Diamond Golden)</span></h2></a> </div><div class="a-section a-spacing-none a-spacing-top-micro" data-cy="reviews-block"><div class="a-row a-size-small"><span class="a-declarative" data-a-popover='{"position":"triggerBottom","popoverLabel":"4.4 out of 5 stars, rating details","url":"/review/widgets/average-customer-review/popover/ref=acr_search__popover?ie=UTF8&amp;asin=B0DPMGDV36&amp;ref_=acr_search__popover&amp;contextId=search","closeButton":true,"closeButtonLabel":""}' data-action="a-popover" data-csa-c-func-deps="aui-da-a-popover" data-csa-c-type="widget" data-render-id="rjvaa5ahb52ug22wz27sptpsa5" data-version-id="vgrbnavj5iylf2a1plj09cp2jv"><a aria-label="4.4 out of 5 stars, rating details" class="a-popover-trigger a-declarative" href="javascript:void(0)" role="button"><i aria-hidden="true" class="a-icon a-icon-star-small a-star-small-4-5" data-cy="reviews-ratings-slot"><span class="a-icon-alt">4.4 out of 5 stars</span></i><i class="a-icon a-icon-popover"></i></a></span> <span class="rush-component" data-component-type="s-client-side-analytics" data-render-id="rjvaa5ahb52ug22wz27sptpsa5" data-version-id="vgrbnavj5iylf2a1plj09cp2jv"><div class="s-csa-instrumentation-wrapper alf-search-csa-instrumentation-wrapper" data-csa-c-asin="B0DPMGDV36" data-csa-c-content-id="alf-customer-ratings-count-component" data-csa-c-layout="LIST" data-csa-c-slot-id="alf-reviews" data-csa-c-type="alf-af-component" data-csa-op-log-render="" style="display: inline-block"><a aria-label="20 ratings" class="a-link-normal s-underline-text s-underline-link-text s-link-style" href="/ZSAUTHREE-Protector-Compatible-Tempered-Decoration/dp/B0DPMGDV36/ref=sr_1_5?crid=1747165839&amp;dib=eyJ2IjoiMSJ9.6F9ySN-tR0LMNCWQ9hjyaZtihLBzXFEHCRNcPCnkYpnFLss9i_4v2t-HHkoPBMn_jyQW275VNDVjCp22oZBm2i9g0F-nZZi0fHOGIlMow7uieIKa1joNJCVUzhG9xNxvzChzCel-furt7uM87ijl2Dx6VhD9F4cG9rPNLrXFthjbbcghV5A5THBZgKWagsBTG8hGzz0lcZeyDhxqGaRT7nAOsBVwrpDG9OToh-6cmcaOGNN0vuIErIeOkAMoRH11ErKb7UJDb7whumzQXMGD22QQWi1KbCyTWu5weGHsGHM.QrF00mFjQ04Ik1fhYIvNpydAYwzJVr1S4ZqYBsyO9VI&amp;dib_tag=se&amp;keywords=Apple+smartphone+iPhone+16+Apple+iPhone+16+iPhone+16+Pro+Max&amp;qid=1747165839&amp;s=electronics&amp;sr=1-5#customerReviews"><span aria-hidden="true" class="a-size-base s-underline-text">20</span> </a> </div></span></div></div><div class="puisg-row"><div class="puisg-col puisg-col-4-of-4 puisg-col-4-of-8 puisg-col-4-of-12 puisg-col-4-of-16 puisg-col-4-of-20 puisg-col-4-of-24"><div class="puisg-col-inner"><div class="a-section a-spacing-none a-spacing-top-micro puis-price-instructions-style" data-cy="price-recipe"><div class="a-row a-size-base a-color-base"><a class="a-link-normal s-no-hover s-underline-text s-underline-link-text s-link-style a-text-normal" href="/ZSAUTHREE-Protector-Compatible-Tempered-Decoration/dp/B0DPMGDV36/ref=sr_1_5?crid=1747165839&amp;dib=eyJ2IjoiMSJ9.6F9ySN-tR0LMNCWQ9hjyaZtihLBzXFEHCRNcPCnkYpnFLss9i_4v2t-HHkoPBMn_jyQW275VNDVjCp22oZBm2i9g0F-nZZi0fHOGIlMow7uieIKa1joNJCVUzhG9xNxvzChzCel-furt7uM87ijl2Dx6VhD9F4cG9rPNLrXFthjbbcghV5A5THBZgKWagsBTG8hGzz0lcZeyDhxqGaRT7nAOsBVwrpDG9OToh-6cmcaOGNN0vuIErIeOkAMoRH11ErKb7UJDb7whumzQXMGD22QQWi1KbCyTWu5weGHsGHM.QrF00mFjQ04Ik1fhYIvNpydAYwzJVr1S4ZqYBsyO9VI&amp;dib_tag=se&amp;keywords=Apple+smartphone+iPhone+16+Apple+iPhone+16+iPhone+16+Pro+Max&amp;qid=1747165839&amp;s=electronics&amp;sr=1-5"><span class="a-size-base-plus a-color-base a-text-normal">Click to see price</span></a></div></div><div class="a-section a-spacing-none a-spacing-top-micro" data-cy="delivery-recipe"><div class="a-row a-size-base a-color-secondary s-align-children-center"><div class="a-section a-spacing-none a-padding-none udm-delivery-block" data-cy="delivery-block"><div class="a-row a-color-base udm-badge-block"><div class="a-column a-span12"></div></div><div class="a-row a-color-base udm-primary-delivery-message"><div class="a-column a-span12">FREE delivery <span class="a-text-bold" id="WVCRIAFWG">Sun, May 18</span> on $35 of items shipped by Amazon</div></div><div class="a-row a-color-base udm-secondary-delivery-message"><div class="a-column a-span12">Or fastest delivery <span class="a-text-bold" id="WVCRIAFWG">Tomorrow, May 14</span></div></div><div class="a-row a-color-base udm-legal-and-regulatory-message"><div class="a-column a-span12"></div></div></div></div></div><div class="a-section a-spacing-none a-spacing-top-mini"><div class="a-row"><div class="puis-atcb-container" data-atcb-props='{"cartType":"DEFAULT","csrfToken":"1@g9FEmLV9rRfM2Kof+4KsGPZ/P/OsTYn4AaFdrlgeGnJQAAAAAQAAAABoI6KPcmF3AAAAAGfA1H5nd8xGEcC3127HUQ==@ML8U5V","sessionId":"138-0065093-4792806","locale":"en-US"}' data-atcb-uid="atcb-B0DPMGDV36-5" data-cy="add-to-cart"><div class="addToCartShoppingPortalCSRFToken aok-hidden"><!-- sp:csrf --><meta content="hIC7E5NYu8BE0VfkcXnUMzdHAduTKFm5zvgYaV0pDtwkAAAAAGgjoo8yMTg1N2VhNC04MTNkLTQ1NWQtOTFiNS00ZjYyNGIwMGZhYjc=" name="anti-csrftoken-a2z"/><!-- sp:end-csrf --></div><div class="a-section puis-atcb-add-container aok-inline-block"><div class="a-section atc-faceout-container"><form action="/cart/add-to-cart?ref=sr_atc_rt_add_5&amp;sr=1-5&amp;qid=1747165839&amp;discoveredAsins.0=B0DPMGDV36" class="a-spacing-none" method="post"><!-- sp:csrf --><input name="anti-csrftoken-a2z" type="hidden" value="hIC7E5NYu8BE0VfkcXnUMzdHAduTKFm5zvgYaV0pDtwkAAAAAGgjoo8yMTg1N2VhNC04MTNkLTQ1NWQtOTFiNS00ZjYyNGIwMGZhYjc="/><!-- sp:end-csrf --><input name="clientName" type="hidden" value="EUIC_AddToCart_Search"><input name="items[0.base][asin]" type="hidden" value="B0DPMGDV36"/><input name="items[0.base][offerListingId]" type="hidden" value="5mUupQ7nIxkrXngyaH%2FJ4sHzRUYlP9%2B6HysERVlwhEesekhoj2hmpL7fULPBGmXmj0RUw4P2qNZ0K5clFdON2UiYkkN5lqgbkzNaJdCrrRx4zNZTYRUell8Y6nOLECMH8hXsjeEvmATpa9%2FyaaOHrunXf5Z0J0DaCqETEtoOPcFYgQRElL%2BBsSGCxK5hx4EW"/><input name="items[0.base][quantity]" type="hidden" value="1"/><div class="a-section ax-replace a-spacing-none"><div class="ax-atc celwidget atc-btn-container" data-csa-c-content-id="ax-atc-EUIC_AddToCart_Search-content" data-csa-c-device-env="WEB" data-csa-c-device-os="UNRECOGNIZED" data-csa-c-device-type="DESKTOP" data-csa-c-item-id="B0DPMGDV36" data-csa-c-item-type="asin" data-csa-c-pos="5" data-csa-c-slot-id="ax-atc-EUIC_AddToCart_Search" data-csa-c-type="item" id="ax-atc-EUIC_AddToCart_Search"><span class="a-declarative" data-action="puis-atcb-add-action-retail" data-csa-c-func-deps="aui-da-puis-atcb-add-action-retail" data-csa-c-type="widget" data-puis-atcb-add-action-retail='{"clientName":"EUIC_AddToCart_Search","messageSuccess":"Item Added","neoAtcUrl":"/cart/add-to-cart?ref=sr_atc_rt_add_5&amp;sr=1-5&amp;qid=1747165839&amp;discoveredAsins.0=B0DPMGDV36","messageError":"Failed to add item","additionalParameters":{},"asin":"B0DPMGDV36","spAttributionMethod":"POST","url":"https://data.amazon.com/api/marketplaces/ATVPDKIKX0DER/cart/carts/retail/items?ref=sr_atc_rt_add_5&amp;sr=1-5&amp;qid=1747165839&amp;discoveredAsins.0=B0DPMGDV36","offerListingId":"5mUupQ7nIxkrXngyaH%2FJ4sHzRUYlP9%2B6HysERVlwhEesekhoj2hmpL7fULPBGmXmj0RUw4P2qNZ0K5clFdON2UiYkkN5lqgbkzNaJdCrrRx4zNZTYRUell8Y6nOLECMH8hXsjeEvmATpa9%2FyaaOHrunXf5Z0J0DaCqETEtoOPcFYgQRElL%2BBsSGCxK5hx4EW"}' data-render-id="rjvaa5ahb52ug22wz27sptpsa5" data-version-id="vgrbnavj5iylf2a1plj09cp2jv"><div data-csa-c-action-name="addToCart" data-csa-c-content-id="s-search-add-to-cart-action" data-csa-c-device-env="WEB" data-csa-c-device-os="UNRECOGNIZED" data-csa-c-device-type="DESKTOP" data-csa-c-item-id="B0DPMGDV36" data-csa-c-item-type="asin" data-csa-c-type="action"><span class="a-button a-button-primary a-button-icon puis-atcb-button"><span class="a-button-inner"><i class="a-icon a-icon-cart"></i><button aria-label="Add to cart" class="a-button-text" name="submit.addToCart" type="button">Add to cart</button></span></span></div></span></div></div></input></form></div></div><div class="a-section puis-atcb-error-container aok-hidden"><div class="a-box a-alert-inline a-alert-inline-error" role="alert"><div class="a-box-inner a-alert-container"><i class="a-icon a-icon-alert"></i><div class="a-alert-content"><span class="a-size-mini puis-atcb-error-message"></span></div></div></div></div><div class="a-section puis-atcb-extra-container"></div></div></div></div><div class="a-section a-spacing-none a-spacing-top-mini s-color-swatch-container-list-view"><div class="a-section s-color-swatch-container s-color-swatch-container-left-aligned s-quick-view-text-align-start"><div data-csa-c-content-id="color-swatch-more-link" data-csa-c-interaction-events="click" data-csa-c-product-type="SCREEN_PROTECTOR" data-csa-c-swatch-more-url="/ZSAUTHREE-Protector-Compatible-Tempered-Decoration/dp/B0DPMGDV36/ref=cs_sr_dp?crid=1747165839&amp;dib=eyJ2IjoiMSJ9.6F9ySN-tR0LMNCWQ9hjyaZtihLBzXFEHCRNcPCnkYpnFLss9i_4v2t-HHkoPBMn_jyQW275VNDVjCp22oZBm2i9g0F-nZZi0fHOGIlMow7uieIKa1joNJCVUzhG9xNxvzChzCel-furt7uM87ijl2Dx6VhD9F4cG9rPNLrXFthjbbcghV5A5THBZgKWagsBTG8hGzz0lcZeyDhxqGaRT7nAOsBVwrpDG9OToh-6cmcaOGNN0vuIErIeOkAMoRH11ErKb7UJDb7whumzQXMGD22QQWi1KbCyTWu5weGHsGHM.QrF00mFjQ04Ik1fhYIvNpydAYwzJVr1S4ZqYBsyO9VI&amp;dib_tag=se&amp;keywords=Apple+smartphone+iPhone+16+Apple+iPhone+16+iPhone+16+Pro+Max&amp;qid=1747165839&amp;s=electronics&amp;sr=1-5" data-csa-c-swatch-remaining-count="+7 other colors/patterns" data-csa-c-type="link"><a class="a-link-normal s-color-swatch-link puis-spacing-small s-hidden-in-quick-view" href="/ZSAUTHREE-Protector-Compatible-Tempered-Decoration/dp/B0DPMGDV36/ref=cs_sr_dp?crid=1747165839&amp;dib=eyJ2IjoiMSJ9.6F9ySN-tR0LMNCWQ9hjyaZtihLBzXFEHCRNcPCnkYpnFLss9i_4v2t-HHkoPBMn_jyQW275VNDVjCp22oZBm2i9g0F-nZZi0fHOGIlMow7uieIKa1joNJCVUzhG9xNxvzChzCel-furt7uM87ijl2Dx6VhD9F4cG9rPNLrXFthjbbcghV5A5THBZgKWagsBTG8hGzz0lcZeyDhxqGaRT7nAOsBVwrpDG9OToh-6cmcaOGNN0vuIErIeOkAMoRH11ErKb7UJDb7whumzQXMGD22QQWi1KbCyTWu5weGHsGHM.QrF00mFjQ04Ik1fhYIvNpydAYwzJVr1S4ZqYBsyO9VI&amp;dib_tag=se&amp;keywords=Apple+smartphone+iPhone+16+Apple+iPhone+16+iPhone+16+Pro+Max&amp;qid=1747165839&amp;s=electronics&amp;sr=1-5" role="link"><u>+7 other colors/patterns</u></a></div></div></div></div></div><div class="puisg-col puisg-col-0-of-4 puisg-col-0-of-8 puisg-col-4-of-12 puisg-col-4-of-16 puisg-col-8-of-20 puisg-col-8-of-24"><div class="puisg-col-inner"></div></div></div><div class="puisg-row"></div></div></div></div></div></div></div></span></div></div></div>
            ```
            
            Extract:
            - title: Full product title
            - price: Numeric price value only (no currency symbol)
            - was_price: Original price before discount (if present)
            - currency: Currency code (e.g., USD)
            - url: Product URL
            - image_url: Main product image URL
            - rating: Star rating (0-5)
            - reviews: Number of reviews
            - asin: Amazon ASIN
            - is_prime: Boolean for Prime eligible
            - is_sponsored: Boolean for sponsored listing
            - is_amazon_choice: Boolean for Amazon's Choice
            - is_best_seller: Boolean for Best Seller
            - description: Any additional description text
            - delivery_info: Delivery/shipping information
            - out_of_stock: Boolean for out of stock status
            
            Return a clean JSON object with these fields. Use null for missing values.
            
2025-05-13 15:50:45,250 - DealFinderAI.AmazonScraperAgent - INFO - Gemini extracted: Camera Lens Protector Bling Compatible for iPhone 16 Pro/iPhone 16 Pro Max,9H Tempered Glass Camera Cover Screen Protector,HD Clear,Aluminum Alloy Ring Decoration (Diamond Golden) at None USD
2025-05-13 15:50:45,250 - DealFinderAI.AmazonScraperAgent - INFO - Gemini used for product extraction
2025-05-13 15:50:45,251 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Camera Lens Protector Bling Compatible for iPhone 16 Pro/iPhone 16 Pro Max,9H Tempered Glass Camera Cover Screen Protector,HD Clear,Aluminum Alloy Ring Decoration (Diamond Golden) at None USD
2025-05-13 15:50:45,251 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Camera Lens Protector Bling Compatible for iPhone 16 Pro/iPhone 16 Pro Max,9H Tempered Glass Camera Cover Screen Protector,HD Clear,Aluminum Alloy Ring Decoration (Diamond Golden) at None USD
2025-05-13 15:50:45,264 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Compatible for iPhone 16 Pro/iPhone 16 Pro Max Camera Lens Protector, Ultra-HD Tempered Glass Camera Cover Screen Protector Metal Individual Ring Protector Accessories, Desert Titanium at 4.99 USD
2025-05-13 15:50:45,265 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Compatible for iPhone 16 Pro/iPhone 16 Pro Max Camera Lens Protector, Ultra-HD Tempered Glass Camera Cover Screen Protector Metal Individual Ring Protector Accessories, Desert Titanium at 4.99 USD
2025-05-13 15:50:45,272 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: 3X2 Pack Camera Lens Protector for iPhone 16 Pro Max,iPhone 16 Pro Tempered Glass Camera Lens Screen Protector Glitter Bling Camera Cover Metal Individual Ring for iPhone 16 Promax 5G,Glitter Gold at 4.99 USD
2025-05-13 15:50:45,273 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: 3X2 Pack Camera Lens Protector for iPhone 16 Pro Max,iPhone 16 Pro Tempered Glass Camera Lens Screen Protector Glitter Bling Camera Cover Metal Individual Ring for iPhone 16 Promax 5G,Glitter Gold at 4.99 USD
2025-05-13 15:50:45,280 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Compatible for iPhone 16 Pro/iPhone 16 Pro Max Camera Lens Protector Bling, 9H Tempered Glass Camera Cover Screen Protector Metal Individual Ring Protector Decoration, Natural Titanium Glitter at 4.99 USD
2025-05-13 15:50:45,280 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Compatible for iPhone 16 Pro/iPhone 16 Pro Max Camera Lens Protector Bling, 9H Tempered Glass Camera Cover Screen Protector Metal Individual Ring Protector Decoration, Natural Titanium Glitter at 4.99 USD
2025-05-13 15:50:45,286 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Camera Lens Protector for iPhone 16 Pro & iPhone 16 Pro Max, 9H Tempered Glass Camera Screen Cover, Black Metal Individual Ring at 4.99 USD
2025-05-13 15:50:45,286 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Camera Lens Protector for iPhone 16 Pro & iPhone 16 Pro Max, 9H Tempered Glass Camera Screen Cover, Black Metal Individual Ring at 4.99 USD
2025-05-13 15:50:45,291 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: 3 Pack 6 ft USB C Phone Charger Fast Charging Cable Compatible with iPhone 16 Pro/15 Pro/Plus/Max/iPad/MacBook and More at 4.99 USD
2025-05-13 15:50:45,291 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: 3 Pack 6 ft USB C Phone Charger Fast Charging Cable Compatible with iPhone 16 Pro/15 Pro/Plus/Max/iPad/MacBook and More at 4.99 USD
2025-05-13 15:50:46,192 - DealFinderAI.AmazonScraperAgent - INFO - Extracted 10 products from Amazon
2025-05-13 15:50:46,192 - DealFinderAI.AmazonScraperAgent - INFO - Applying relevance filtering to 10 products
2025-05-13 15:50:46,192 - DealFinderAI.AmazonScraperAgent - ERROR - Error in relevance filtering: 'NoneType' object has no attribute 'lower'
2025-05-13 15:50:46,192 - DealFinderAI.Controller - INFO - Amazon response content: {'source': 'Amazon', 'query': 'Apple smartphone iPhone 16 Apple iPhone 16 iPhone 16 Pro Max', 'products': [{'title': 'LFGKMZ 2 Pack Camera Lens Protector Compatible with iPhone 16 Pro/iPhone 16 Pro Max,Tempered Glass Camera Cover,Auto Install,Ultra HD,Anti-Scratch,Strong Adhesion - Black Titanium', 'price': 3.99, 'was_price': None, 'currency': 'USD', 'url': 'https://www.amazon.com/Protector-Compatible-Tempered-Anti-Scratch-Adhesion/dp/B0DDQ7T2LG/ref=sr_1_1?crid=1747165839&dib=eyJ2IjoiMSJ9.6F9ySN-tR0LMNCWQ9hjyaZtihLBzXFEHCRNcPCnkYpnFLss9i_4v2t-HHkoPBMn_jyQW275VNDVjCp22oZBm2i9g0F-nZZi0fHOGIlMow7uieIKa1joNJCVUzhG9xNxvzChzCel-furt7uM87ijl2Dx6VhD9F4cG9rPNLrXFthjbbcghV5A5THBZgKWagsBTG8hGzz0lcZeyDhxqGaRT7nAOsBVwrpDG9OToh-6cmcaOGNN0vuIErIeOkAMoRH11ErKb7UJDb7whumzQXMGD22QQWi1KbCyTWu5weGHsGHM.QrF00mFjQ04Ik1fhYIvNpydAYwzJVr1S4ZqYBsyO9VI&dib_tag=se&keywords=Apple+smartphone+iPhone+16+Apple+iPhone+16+iPhone+16+Pro+Max&qid=1747165839&s=electronics&sr=1-1', 'image_url': 'https://m.media-amazon.com/images/I/61pHFBRuGHL._AC_UY218_.jpg', 'rating': 4.1, 'reviews': 5, 'is_sponsored': False, 'is_prime': False, 'is_amazon_choice': False, 'is_best_seller': False, 'asin': 'B0DDQ7T2LG', 'description': 'LFGKMZ 2 Pack Camera Lens Protector Compatible with iPhone 16 Pro/iPhone 16 Pro Max,Tempered Glass Camera Cover,Auto Install,Ultra HD,Anti-Scratch,Strong Adhesion - Black Titanium 4.1 out of 5 stars 5 Price, product page$3.99$3.99FREE delivery Sun, May 18 on $35 of items shipped by AmazonOr fastest delivery Tomorrow, May 14Add to cart', 'delivery_info': '', 'out_of_stock': False, 'source': 'Amazon'}, {'title': 'LFGKMZ 2 Pack Tempered Glass Screen Protector for iPhone 16 Pro Max 6.9",[Military Grade Shatterproof],Auto Install,Ultra HD,9H Hardness,Zero Bubble', 'price': 3.99, 'was_price': None, 'currency': 'USD', 'url': 'https://www.amazon.com/Tempered-Protector-Military-Shatterproof-Hardness/dp/B0DDQ7D1MB/ref=sr_1_2?crid=1747165839&dib=eyJ2IjoiMSJ9.6F9ySN-tR0LMNCWQ9hjyaZtihLBzXFEHCRNcPCnkYpnFLss9i_4v2t-HHkoPBMn_jyQW275VNDVjCp22oZBm2i9g0F-nZZi0fHOGIlMow7uieIKa1joNJCVUzhG9xNxvzChzCel-furt7uM87ijl2Dx6VhD9F4cG9rPNLrXFthjbbcghV5A5THBZgKWagsBTG8hGzz0lcZeyDhxqGaRT7nAOsBVwrpDG9OToh-6cmcaOGNN0vuIErIeOkAMoRH11ErKb7UJDb7whumzQXMGD22QQWi1KbCyTWu5weGHsGHM.QrF00mFjQ04Ik1fhYIvNpydAYwzJVr1S4ZqYBsyO9VI&dib_tag=se&keywords=Apple+smartphone+iPhone+16+Apple+iPhone+16+iPhone+16+Pro+Max&qid=1747165839&s=electronics&sr=1-2', 'image_url': 'https://m.media-amazon.com/images/I/71V5Fkh-6IL._AC_UY218_.jpg', 'rating': 4.1, 'reviews': 29, 'is_sponsored': False, 'is_prime': False, 'is_amazon_choice': False, 'is_best_seller': False, 'asin': 'B0DDQ7D1MB', 'description': 'LFGKMZ 2 Pack Tempered Glass Screen Protector for iPhone 16 Pro Max 6.9",[Military Grade Shatterproof],Auto Install,Ultra HD,9H Hardness,Zero Bubble 4.1 out of 5 stars 29 Price, product page$3.99$3.99FREE delivery Sun, May 18 on $35 of items shipped by AmazonOr fastest delivery Tomorrow, May 14Add to cart+1 other color/pattern', 'delivery_info': '', 'out_of_stock': False, 'source': 'Amazon'}, {'title': 'Screen Protector for iPhone 16 Pro Max, 2 Pack Clear 9H Tempered Glass Film Cover Sensor Protection Case Friendly for 6.9 inch', 'price': 3.99, 'was_price': None, 'currency': 'USD', 'url': 'https://www.amazon.com/TENOC-Protector-Tempered-Protection-Friendly/dp/B0DBVMVC7F/ref=sr_1_3?crid=1747165839&dib=eyJ2IjoiMSJ9.6F9ySN-tR0LMNCWQ9hjyaZtihLBzXFEHCRNcPCnkYpnFLss9i_4v2t-HHkoPBMn_jyQW275VNDVjCp22oZBm2i9g0F-nZZi0fHOGIlMow7uieIKa1joNJCVUzhG9xNxvzChzCel-furt7uM87ijl2Dx6VhD9F4cG9rPNLrXFthjbbcghV5A5THBZgKWagsBTG8hGzz0lcZeyDhxqGaRT7nAOsBVwrpDG9OToh-6cmcaOGNN0vuIErIeOkAMoRH11ErKb7UJDb7whumzQXMGD22QQWi1KbCyTWu5weGHsGHM.QrF00mFjQ04Ik1fhYIvNpydAYwzJVr1S4ZqYBsyO9VI&dib_tag=se&keywords=Apple+smartphone+iPhone+16+Apple+iPhone+16+iPhone+16+Pro+Max&qid=1747165839&s=electronics&sr=1-3', 'image_url': 'https://m.media-amazon.com/images/I/617cgutvAZL._AC_UY218_.jpg', 'rating': 3.9, 'reviews': 27, 'is_sponsored': False, 'is_prime': False, 'is_amazon_choice': False, 'is_best_seller': False, 'asin': 'B0DBVMVC7F', 'description': 'TENOCScreen Protector for iPhone 16 Pro Max, 2 Pack Clear 9H Tempered Glass Film Cover Sensor Protection Case Friendly for 6.9 inch Options:4 sizes3.9 out of 5 stars 27 Price, product page$3.99$3.99FREE delivery Sun, May 18 on $35 of items shipped by AmazonOr fastest delivery Tomorrow, May 14Add to cart', 'delivery_info': '', 'out_of_stock': False, 'source': 'Amazon'}, {'title': 'Portable Cell Phone Stand Holder for Desk, Foldable Pocket-Sized Mount, Adjustable Multi Angle Stand for iPhone 16 15 14 13 Pro Max, 4-10 iPad Smartphone, White', 'price': 3.99, 'was_price': None, 'currency': 'USD', 'url': 'https://www.amazon.com/HZZADZXW-Portable-Pocket-Sized-Adjustable-Smartphone/dp/B0F5WD4KRF/ref=sr_1_4?crid=1747165839&dib=eyJ2IjoiMSJ9.6F9ySN-tR0LMNCWQ9hjyaZtihLBzXFEHCRNcPCnkYpnFLss9i_4v2t-HHkoPBMn_jyQW275VNDVjCp22oZBm2i9g0F-nZZi0fHOGIlMow7uieIKa1joNJCVUzhG9xNxvzChzCel-furt7uM87ijl2Dx6VhD9F4cG9rPNLrXFthjbbcghV5A5THBZgKWagsBTG8hGzz0lcZeyDhxqGaRT7nAOsBVwrpDG9OToh-6cmcaOGNN0vuIErIeOkAMoRH11ErKb7UJDb7whumzQXMGD22QQWi1KbCyTWu5weGHsGHM.QrF00mFjQ04Ik1fhYIvNpydAYwzJVr1S4ZqYBsyO9VI&dib_tag=se&keywords=Apple+smartphone+iPhone+16+Apple+iPhone+16+iPhone+16+Pro+Max&qid=1747165839&s=electronics&sr=1-4', 'image_url': 'https://m.media-amazon.com/images/I/61Jyz9z5Q-L._AC_UY218_.jpg', 'rating': 5.0, 'reviews': 4, 'is_sponsored': False, 'is_prime': False, 'is_amazon_choice': False, 'is_best_seller': False, 'asin': 'B0F5WD4KRF', 'description': 'Portable Cell Phone Stand Holder for Desk, Foldable Pocket-Sized Mount, Adjustable Multi Angle Stand for iPhone 16 15 14 13 Pro Max, 4-10 iPad Smartphone, White 5.0 out of 5 stars 4 Price, product page$3.99$3.99FREE delivery Jun 7 - 27 on $35 of items shipped by AmazonOr fastest delivery Jun 7 - 25Add to cart+7 other colors/patterns', 'delivery_info': '', 'out_of_stock': False, 'source': 'Amazon'}, {'title': 'Camera Lens Protector Bling Compatible for iPhone 16 Pro/iPhone 16 Pro Max,9H Tempered Glass Camera Cover Screen Protector,HD Clear,Aluminum Alloy Ring Decoration (Diamond Golden)', 'price': None, 'was_price': None, 'currency': None, 'url': '/ZSAUTHREE-Protector-Compatible-Tempered-Decoration/dp/B0DPMGDV36/ref=sr_1_5?crid=1747165839&dib=eyJ2IjoiMSJ9.6F9ySN-tR0LMNCWQ9hjyaZtihLBzXFEHCRNcPCnkYpnFLss9i_4v2t-HHkoPBMn_jyQW275VNDVjCp22oZBm2i9g0F-nZZi0fHOGIlMow7uieIKa1joNJCVUzhG9xNxvzChzCel-furt7uM87ijl2Dx6VhD9F4cG9rPNLrXFthjbbcghV5A5THBZgKWagsBTG8hGzz0lcZeyDhxqGaRT7nAOsBVwrpDG9OToh-6cmcaOGNN0vuIErIeOkAMoRH11ErKb7UJDb7whumzQXMGD22QQWi1KbCyTWu5weGHsGHM.QrF00mFjQ04Ik1fhYIvNpydAYwzJVr1S4ZqYBsyO9VI&dib_tag=se&keywords=Apple+smartphone+iPhone+16+Apple+iPhone+16+iPhone+16+Pro+Max&qid=1747165839&s=electronics&sr=1-5', 'image_url': 'https://m.media-amazon.com/images/I/71F9UFbQVYL._AC_UY218_.jpg', 'rating': 4.4, 'reviews': 20, 'asin': 'B0DPMGDV36', 'is_prime': False, 'is_sponsored': False, 'is_amazon_choice': False, 'is_best_seller': False, 'description': None, 'delivery_info': 'FREE delivery Sun, May 18 on $35 of items shipped by Amazon\nOr fastest delivery Tomorrow, May 14', 'out_of_stock': False, 'source': 'Amazon'}]}
2025-05-13 15:50:46,192 - DealFinderAI.Controller - INFO - Amazon returned 5 products
2025-05-13 15:50:46,193 - DealFinderAI.WalmartScraperAgent - INFO - Searching Walmart for: {'product_type': 'smartphone', 'keywords': ['iphone 16'], 'price_range': None, 'brands': ['Apple'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-13 15:50:46,193 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: 
            Optimize this search query for Walmart's search engine:
            
            "smartphone iphone 16 Apple"
            
            For Walmart searches, please:
            1. Focus on model numbers and specific identifiers if present
            2. Include key brand names (Walmart's search works well with brand names)
            3. Remove generic words that may dilute results
            4. Add Walmart-specific terms that might improve results (like "Rollback" if looking for deals)
            5. Prioritize precise product names and specifications
            
            Return a JSON object with:
            - optimized_keywords: List of 3-5 optimized search terms (most important first)
            - department_hint: Any Walmart department suggestion (Electronics, Home, etc.)
            - must_include_terms: Terms that MUST be in results
            - exclude_terms: Terms that should NOT be in results
            - walmart_specific_filters: Any Walmart-specific filters to apply
            
            Format as JSON only with no explanation.
            
2025-05-13 15:50:47,286 - DealFinderAI.WalmartScraperAgent - INFO - Optimized search parameters: {'product_type': 'smartphone', 'keywords': ['iPhone 16', 'Apple iPhone 16', 'iPhone 16 Pro', 'iPhone 16 Pro Max'], 'price_range': None, 'brands': ['Apple'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True, 'department': 'Electronics', 'must_include_terms': ['Apple', 'iPhone 16'], 'exclude_terms': ['smartphone'], 'walmart_filters': ['Rollback', 'Deals']}
2025-05-13 15:50:47,287 - DealFinderAI.WalmartScraperAgent - INFO - Built optimized Walmart search query: Apple smartphone iPhone 16 Apple iPhone 16 iPhone 16 Pro
2025-05-13 15:50:47,287 - DealFinderAI.WalmartScraperAgent - INFO - Built Walmart query: Apple smartphone iPhone 16 Apple iPhone 16 iPhone 16 Pro
2025-05-13 15:50:47,287 - DealFinderAI.WalmartScraperAgent - INFO - Making Walmart search request with params: {'q': 'Apple smartphone iPhone 16 Apple iPhone 16 iPhone 16 Pro Electronics', 'page': 1, 'affinityOverride': 'default', 'sort': 'price_low'}
2025-05-13 15:50:49,969 - DealFinderAI.WalmartScraperAgent - INFO - Extracted 0 products from JSON data
2025-05-13 15:50:49,969 - DealFinderAI.WalmartScraperAgent - INFO - JSON extraction failed, falling back to HTML extraction
2025-05-13 15:50:49,971 - DealFinderAI.WalmartScraperAgent - INFO - Found 9 product divs in HTML
2025-05-13 15:50:52,140 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 15:50:52,141 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: AT&T iPhone 16 128GB Ultramarine. Apple Intelligence. at 879.0 USD
2025-05-13 15:50:54,185 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 15:50:54,185 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Verizon iPhone 16 128GB Ultramarine. Apple Intelligence. at 879.0 USD
2025-05-13 15:50:56,187 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 15:50:56,187 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: AT&T iPhone 16 Pro 128GB Desert Titanium. Apple Intelligence. at 1049.0 USD
2025-05-13 15:50:58,181 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 15:50:58,181 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Verizon iPhone 16 Pro 128GB Desert Titanium. Apple Intelligence. at 1049.0 USD
2025-05-13 15:51:00,456 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 15:51:00,456 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Straight Talk Apple iPhone 16, 128GB, White - Prepaid Smartphone [Locked to Straight Talk] at 829.0 USD
2025-05-13 15:51:02,863 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 15:51:02,864 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Straight Talk Apple iPhone 16, 128GB, Teal - Prepaid Smartphone [Locked to Straight Talk] at 829.0 USD
2025-05-13 15:51:05,147 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 15:51:05,147 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Straight Talk Apple iPhone 16, 128GB, Blue - Prepaid Smartphone [Locked to Straight Talk] at 829.0 USD
2025-05-13 15:51:07,706 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 15:51:07,706 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Straight Talk Apple iPhone 16, 128GB, Pink - Prepaid Smartphone [Locked to Straight Talk} at 829.0 USD
2025-05-13 15:51:09,852 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 15:51:09,853 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Straight Talk Apple iPhone 16, 256GB, White - Prepaid Smartphone [Locked to Straight Talk] at 929.0 USD
2025-05-13 15:51:09,853 - DealFinderAI.WalmartScraperAgent - INFO - Extracted 9 products from HTML
2025-05-13 15:51:09,853 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: AT&T iPhone 16 128GB Ultramarine. Apple Intelligence. at 879.0 USD
2025-05-13 15:51:09,854 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Verizon iPhone 16 128GB Ultramarine. Apple Intelligence. at 879.0 USD
2025-05-13 15:51:09,854 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: AT&T iPhone 16 Pro 128GB Desert Titanium. Apple Intelligence. at 1049.0 USD
2025-05-13 15:51:09,854 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Verizon iPhone 16 Pro 128GB Desert Titanium. Apple Intelligence. at 1049.0 USD
2025-05-13 15:51:09,854 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Straight Talk Apple iPhone 16, 128GB, White - Prepaid Smartphone [Locked to Straight Talk] at 829.0 USD
2025-05-13 15:51:09,854 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Straight Talk Apple iPhone 16, 128GB, Teal - Prepaid Smartphone [Locked to Straight Talk] at 829.0 USD
2025-05-13 15:51:09,854 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Straight Talk Apple iPhone 16, 128GB, Blue - Prepaid Smartphone [Locked to Straight Talk] at 829.0 USD
2025-05-13 15:51:09,854 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Straight Talk Apple iPhone 16, 128GB, Pink - Prepaid Smartphone [Locked to Straight Talk} at 829.0 USD
2025-05-13 15:51:09,855 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Straight Talk Apple iPhone 16, 256GB, White - Prepaid Smartphone [Locked to Straight Talk] at 929.0 USD
2025-05-13 15:51:10,906 - DealFinderAI.WalmartScraperAgent - INFO - Extracted 9 products from Walmart
2025-05-13 15:51:10,909 - DealFinderAI.WalmartScraperAgent - INFO - Applying relevance filtering to 9 products
2025-05-13 15:51:10,910 - DealFinderAI.WalmartScraperAgent - INFO - Filtered to 5 most relevant products
2025-05-13 15:51:10,910 - DealFinderAI.Controller - INFO - Walmart returned 5 products
2025-05-13 15:51:10,910 - DealFinderAI.EbayScraperAgent - INFO - Searching eBay for: {'product_type': 'smartphone', 'keywords': ['iphone 16'], 'price_range': None, 'brands': ['Apple'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-13 15:51:10,911 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: 
            Optimize this search query for eBay's search engine:
            
            "smartphone iphone 16 Apple"
            
            For eBay searches, please:
            1. Focus on exact model numbers and specific part identifiers if present
            2. Include key brand names
            3. Remove generic words that may dilute results
            4. Add eBay-specific terms that might improve results
            5. Optimize for finding the most relevant listings
            
            Return a JSON object with:
            - optimized_keywords: List of 3-5 optimized search terms (most important first)
            - category_hints: Any eBay category suggestions
            - must_include_terms: Terms that MUST be in results
            - exclude_terms: Terms that should NOT be in results
            
            Format as JSON only with no explanation.
            
2025-05-13 15:51:12,527 - DealFinderAI.EbayScraperAgent - INFO - Optimized search parameters: {'product_type': 'smartphone', 'keywords': ['iPhone 16', 'Apple iPhone 16', 'iPhone 16 Pro', 'iPhone 16 Pro Max'], 'price_range': None, 'brands': ['Apple'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True, 'category_hints': ['Cell Phones & Smartphones'], 'must_include_terms': ['Apple', 'iPhone 16'], 'exclude_terms': ['repair', 'parts', 'broken', 'damaged']}
2025-05-13 15:51:12,528 - DealFinderAI.EbayScraperAgent - INFO - Built optimized eBay search query: smartphone Apple iPhone 16 Apple iPhone 16 iPhone 16 Pro
2025-05-13 15:51:12,528 - DealFinderAI.EbayScraperAgent - INFO - Built eBay query: smartphone Apple iPhone 16 Apple iPhone 16 iPhone 16 Pro
2025-05-13 15:51:12,528 - DealFinderAI.EbayScraperAgent - INFO - Making eBay search request with params: {'_nkw': 'smartphone Apple iPhone 16 Apple iPhone 16 iPhone 16 Pro Cell Phones & Smartphones', '_sacat': '0', '_ipg': '96', '_sop': '15', 'LH_BIN': '1'}
2025-05-13 15:51:14,849 - DealFinderAI.EbayScraperAgent - INFO - Found 132 product listings
2025-05-13 15:51:14,850 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 14 Pro - 512 GB - Purple (Xfinity) Smartphone at 284.0 USD
2025-05-13 15:51:14,850 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 14 Pro - 512 GB - Purple (Xfinity) Smartphone at 284.0 USD
2025-05-13 15:51:14,851 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 14 Pro Max - 128 GB - Black (U.S. Cellular) Smartphone at 299.0 USD
2025-05-13 15:51:14,851 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 14 Pro Max - 128 GB - Black (U.S. Cellular) Smartphone at 299.0 USD
2025-05-13 15:51:14,853 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 14 Pro 256GB White / Silver AT&T at 349.99 USD
2025-05-13 15:51:14,853 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 14 Pro 256GB White / Silver AT&T at 349.99 USD
2025-05-13 15:51:14,854 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 14 Pro - 128 GB - Space Black (T-Mobile) Smartphone at 364.0 USD
2025-05-13 15:51:14,854 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 14 Pro - 128 GB - Space Black (T-Mobile) Smartphone at 364.0 USD
2025-05-13 15:51:14,854 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 16 Pro 128GB Unlocked 1-Year Warranty Smartphone Excellent at 841.99 USD
2025-05-13 15:51:14,855 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 16 Pro 128GB Unlocked 1-Year Warranty Smartphone Excellent at 841.99 USD
2025-05-13 15:51:14,855 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 16 Pro 128GB Factory Unlocked Open Box Mint Smartphone A3083 at 857.45 USD
2025-05-13 15:51:14,855 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 16 Pro 128GB Factory Unlocked Open Box Mint Smartphone A3083 at 857.45 USD
2025-05-13 15:51:14,856 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 16 Pro Unlocked (GSM + CDMA) Smartphone at 864.39 USD
2025-05-13 15:51:14,856 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 16 Pro Unlocked (GSM + CDMA) Smartphone at 864.39 USD
2025-05-13 15:51:14,857 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: APPLE IPHONE 16 PRO - 128GB - BLACK TITANIUM (FACTORY UNLOCKED)  SEALED at 938.95 USD
2025-05-13 15:51:14,857 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: APPLE IPHONE 16 PRO - 128GB - BLACK TITANIUM (FACTORY UNLOCKED)  SEALED at 938.95 USD
2025-05-13 15:51:15,536 - DealFinderAI.EbayScraperAgent - INFO - Extracted 8 products from eBay
2025-05-13 15:51:15,538 - DealFinderAI.EbayScraperAgent - INFO - Applying relevance filtering to 8 products
2025-05-13 15:51:15,539 - DealFinderAI.EbayScraperAgent - INFO - Filtered to 5 most relevant products
2025-05-13 15:51:15,539 - DealFinderAI.Controller - INFO - eBay returned 5 products
2025-05-13 15:51:15,539 - DealFinderAI.Controller - INFO - Total products before aggregation: 15
2025-05-13 15:51:15,539 - DealFinderAI.ResultsAggregatorAgent - INFO - Aggregating results for query: find me best deal on iphone 16
2025-05-13 15:51:15,540 - DealFinderAI.ResultsAggregatorAgent - INFO - Found 3 results from various sources
2025-05-13 15:51:15,540 - DealFinderAI.ResultsAggregatorAgent - INFO - Source Amazon: 5 products
2025-05-13 15:51:15,540 - DealFinderAI.ResultsAggregatorAgent - INFO - Source Walmart: 5 products
2025-05-13 15:51:15,540 - DealFinderAI.ResultsAggregatorAgent - INFO - Source eBay: 5 products
2025-05-13 15:51:15,540 - DealFinderAI.ResultsAggregatorAgent - INFO - Total products extracted: 15
2025-05-13 15:51:15,540 - DealFinderAI.ResultsAggregatorAgent - INFO - Ranking 15 products
2025-05-13 15:51:15,540 - DealFinderAI.ResultsAggregatorAgent - WARNING - Invalid price format in product: Camera Lens Protector Bling Compatible for iPhone 16 Pro/iPhone 16 Pro Max,9H Tempered Glass Camera Cover Screen Protector,HD Clear,Aluminum Alloy Ring Decoration (Diamond Golden)
2025-05-13 15:51:15,541 - DealFinderAI.ResultsAggregatorAgent - INFO - Sorted 15 products by score
2025-05-13 15:51:15,541 - DealFinderAI.ResultsAggregatorAgent - INFO - Returning 10 diversified products
2025-05-13 15:51:15,541 - DealFinderAI.ResultsAggregatorAgent - INFO - Products after ranking: 10
2025-05-13 15:51:15,541 - DealFinderAI.ResultsAggregatorAgent - INFO - Final products: 10
2025-05-13 15:51:15,541 - DealFinderAI.Controller - INFO - Products after aggregation: 10
2025-05-13 15:51:15,541 - DealFinderAI.ProductComparisonAgent - INFO - Comparing products for query: find me best deal on iphone 16
2025-05-13 15:51:15,542 - DealFinderAI.ProductComparisonAgent - INFO - Found 10 products to compare
2025-05-13 15:51:15,542 - DealFinderAI.ProductComparisonAgent - INFO - Grouping 10 products
2025-05-13 15:51:15,543 - DealFinderAI.ProductComparisonAgent - INFO - Created 0 product groups
2025-05-13 15:51:15,543 - DealFinderAI.ChatMemoryAgent - INFO - Storing context for conversation session_20250513155029_660e124f
2025-05-13 15:51:15,543 - DealFinderAI.ChatMemoryAgent - INFO - Storing 10 products for conversation session_20250513155029_660e124f
2025-05-13 15:51:15,543 - DealFinderAI.PresentationAgent - INFO - Preparing presentation for 10 products
2025-05-13 15:51:15,544 - DealFinderAI.PresentationAgent - INFO - Formatting 10 products for display
2025-05-13 15:51:15,544 - DealFinderAI.PresentationAgent - INFO - Product 1: Portable Cell Phone Stand Holder for Desk, Foldable Pocket-Sized Mount, Adjustable Multi Angle Stand for iPhone 16 15 14 13 Pro Max, 4-10 iPad Smartphone, White - Price: $3.99 - Source: Amazon
2025-05-13 15:51:15,544 - DealFinderAI.PresentationAgent - INFO - Product 2: APPLE IPHONE 16 PRO - 128GB - BLACK TITANIUM (FACTORY UNLOCKED)  SEALED - Price: $938.95 - Source: eBay
2025-05-13 15:51:15,544 - DealFinderAI.PresentationAgent - INFO - Product 3: AT&T iPhone 16 128GB Ultramarine. Apple Intelligence. - Price: $879.00 - Source: Walmart
2025-05-13 15:51:15,544 - DealFinderAI.PresentationAgent - INFO - Product 4: Camera Lens Protector Bling Compatible for iPhone 16 Pro/iPhone 16 Pro Max,9H Tempered Glass Camera Cover Screen Protector,HD Clear,Aluminum Alloy Ring Decoration (Diamond Golden) - Price: $0.00 - Source: Amazon
2025-05-13 15:51:15,544 - DealFinderAI.PresentationAgent - INFO - Product 5: LFGKMZ 2 Pack Camera Lens Protector Compatible with iPhone 16 Pro/iPhone 16 Pro Max,Tempered Glass Camera Cover,Auto Install,Ultra HD,Anti-Scratch,Strong Adhesion - Black Titanium - Price: $3.99 - Source: Amazon
2025-05-13 15:51:15,545 - DealFinderAI.PresentationAgent - INFO - Product 6: LFGKMZ 2 Pack Tempered Glass Screen Protector for iPhone 16 Pro Max 6.9",[Military Grade Shatterproof],Auto Install,Ultra HD,9H Hardness,Zero Bubble - Price: $3.99 - Source: Amazon
2025-05-13 15:51:15,545 - DealFinderAI.PresentationAgent - INFO - Product 7: Screen Protector for iPhone 16 Pro Max, 2 Pack Clear 9H Tempered Glass Film Cover Sensor Protection Case Friendly for 6.9 inch - Price: $3.99 - Source: Amazon
2025-05-13 15:51:15,545 - DealFinderAI.PresentationAgent - INFO - Product 8: Apple iPhone 16 Pro 128GB Unlocked 1-Year Warranty Smartphone Excellent - Price: $841.99 - Source: eBay
2025-05-13 15:51:15,545 - DealFinderAI.PresentationAgent - INFO - Product 9: Apple iPhone 14 Pro - 512 GB - Purple (Xfinity) Smartphone - Price: $284.00 - Source: eBay
2025-05-13 15:51:15,545 - DealFinderAI.PresentationAgent - INFO - Product 10: Apple iPhone 16 Pro 128GB Factory Unlocked Open Box Mint Smartphone A3083 - Price: $857.45 - Source: eBay
2025-05-13 15:51:15,545 - DealFinderAI.ChatMemoryAgent - INFO - Storing context for conversation session_20250513155029_660e124f
2025-05-13 15:51:15,545 - DealFinderAI.ChatMemoryAgent - INFO - Storing 10 products for conversation session_20250513155029_660e124f
2025-05-13 15:51:15,545 - DealFinderAI.Controller - INFO - Successfully stored search results in memory
2025-05-13 15:53:21,552 - DealFinderAI - INFO - Logging initialized
2025-05-13 15:53:21,552 - DealFinderAI.Main - INFO - Starting DealFinder AI
2025-05-13 15:53:21,552 - DealFinderAI.Main - INFO - Using LangChain implementation
2025-05-13 15:53:21,595 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-13 15:53:21,595 - DealFinderAI.Controller - INFO - Initialized scraper agents: ['amazon', 'walmart', 'ebay']
2025-05-13 15:53:21,595 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-13 15:53:21,595 - DealFinderAI.Controller - INFO - Initialized scraper agents: ['amazon', 'walmart', 'ebay']
2025-05-13 15:53:21,595 - DealFinderAI.Main - INFO - Web app using LangChain implementation with Gemini model
2025-05-13 15:53:36,050 - DealFinderAI.Controller - INFO - Processing user query: find me best deal on iphone 16
2025-05-13 15:53:36,050 - DealFinderAI.ChatMemoryAgent - INFO - Analyzing query: 'find me best deal on iphone 16' for conversation session_20250513155326_32248214
2025-05-13 15:53:36,051 - DealFinderAI.ChatMemoryAgent - INFO - No product context available for this conversation
2025-05-13 15:53:36,051 - DealFinderAI.Controller - INFO - Analyze response: {'is_follow_up': False, 'focused_product': None, 'referenced_products': [], 'products': []}
2025-05-13 15:53:36,051 - DealFinderAI.Controller - INFO - Is follow-up? False
2025-05-13 15:53:36,051 - DealFinderAI.Controller - INFO - Referenced products: 0
2025-05-13 15:53:36,051 - DealFinderAI.Controller - INFO - Processing as new search query
2025-05-13 15:53:36,051 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: find me best deal on iphone 16
2025-05-13 15:53:37,233 - DealFinderAI.GeminiAgent - WARNING - Failed to parse Gemini response as JSON: ```json
{
  "product_type": "smartphone",
  "keywords": ["iphone 16", "best deal"],
  "price_range": null,
  "brands": ["Apple"],
  "features": [],
  "sorting_preference": "price_low_to_high",
  "buy_it_now": true
}
```

2025-05-13 15:53:37,233 - DealFinderAI.Controller - INFO - Parsed search parameters: {'product_type': 'smartphone', 'keywords': ['iphone 16', 'best deal'], 'price_range': None, 'brands': ['Apple'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-13 15:53:37,233 - DealFinderAI.AmazonScraperAgent - INFO - Searching Amazon for: {'product_type': 'smartphone', 'keywords': ['iphone 16', 'best deal'], 'price_range': None, 'brands': ['Apple'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-13 15:53:37,233 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: 
            Optimize this search query for Amazon's search engine:
            
            "smartphone iphone 16 best deal Apple"
            
            For Amazon searches, please:
            1. Focus on product-specific model numbers and identifiers if present
            2. Include key brand names (Amazon's A9 algorithm prioritizes brand matches)
            3. Remove generic words that may dilute results
            4. Add Amazon-specific terms that might improve results (like "Amazon's Choice" if looking for quality products)
            5. Optimize for Amazon's search algorithm which prioritizes exact matches and recent sales volume
            
            Return a JSON object with:
            - optimized_keywords: List of 3-5 optimized search terms (most important first)
            - amazon_category: Any Amazon department/category suggestion (Electronics, Books, etc.)
            - must_include_terms: Terms that MUST be in results
            - exclude_terms: Terms that should NOT be in results
            - amazon_search_filters: Any Amazon-specific filters to apply (Prime eligible, etc.)
            
            Format as JSON only with no explanation.
            
2025-05-13 15:53:38,582 - DealFinderAI.AmazonScraperAgent - INFO - Optimized search parameters: {'product_type': 'smartphone', 'keywords': ['iPhone 16', 'Apple iPhone 16', "iPhone 16 Amazon's Choice"], 'price_range': None, 'brands': ['Apple'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True, 'category': 'Electronics', 'must_include_terms': ['Apple', 'iPhone 16'], 'exclude_terms': ['best deal', 'smartphone'], 'amazon_filters': ['Prime eligible', 'New']}
2025-05-13 15:53:38,583 - DealFinderAI.AmazonScraperAgent - INFO - Built optimized Amazon search query: Apple smartphone iPhone 16 Apple iPhone 16 iPhone 16 Amazon's Choice
2025-05-13 15:53:38,583 - DealFinderAI.AmazonScraperAgent - INFO - Built Amazon query: Apple smartphone iPhone 16 Apple iPhone 16 iPhone 16 Amazon's Choice
2025-05-13 15:53:38,584 - DealFinderAI.AmazonScraperAgent - INFO - Making Amazon search request with params: {'k': "Apple smartphone iPhone 16 Apple iPhone 16 iPhone 16 Amazon's Choice", 'ref': 'nb_sb_noss', 'crid': 1747166018, 'i': 'aps', 'search-alias': 'electronics', 's': 'price-asc-rank'}
2025-05-13 15:53:40,206 - DealFinderAI.AmazonScraperAgent - INFO - Found 24 product divs in search results
2025-05-13 15:53:40,213 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Apple at 49.99 USD
2025-05-13 15:53:40,213 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Apple at 49.99 USD
2025-05-13 15:53:40,218 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Apple at 39.0 USD
2025-05-13 15:53:40,218 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Apple at 39.0 USD
2025-05-13 15:53:40,223 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Apple at 49.0 USD
2025-05-13 15:53:40,223 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Apple at 49.0 USD
2025-05-13 15:53:40,226 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Apple iPhone SE - Sprint (Refurbished) (Space Gray, 16GB) at 199.97 USD
2025-05-13 15:53:40,226 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Apple iPhone SE - Sprint (Refurbished) (Space Gray, 16GB) at 199.97 USD
2025-05-13 15:53:40,230 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Apple iPhone SE (2nd Generation), 128GB, Red, Unlocked (Renewed Premium) at 168.97 USD
2025-05-13 15:53:40,230 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Apple iPhone SE (2nd Generation), 128GB, Red, Unlocked (Renewed Premium) at 168.97 USD
2025-05-13 15:53:40,234 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Apple iPhone 11, 64GB, White - Unlocked (Renewed Premium) at 230.0 USD
2025-05-13 15:53:40,234 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Apple iPhone 11, 64GB, White - Unlocked (Renewed Premium) at 230.0 USD
2025-05-13 15:53:40,237 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Apple iPhone 12 Mini, 64GB, Black - Unlocked (Renewed Premium) at 217.75 USD
2025-05-13 15:53:40,237 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Apple iPhone 12 Mini, 64GB, Black - Unlocked (Renewed Premium) at 217.75 USD
2025-05-13 15:53:40,242 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Apple iPhone XR, 128GB, Coral - Unlocked (Renewed Premium) at 224.0 USD
2025-05-13 15:53:40,242 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Apple iPhone XR, 128GB, Coral - Unlocked (Renewed Premium) at 224.0 USD
2025-05-13 15:53:40,245 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Apple iPhone 11 Pro, 64GB, Space Gray - Unlocked (Renewed Premium) at 244.0 USD
2025-05-13 15:53:40,245 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Apple iPhone 11 Pro, 64GB, Space Gray - Unlocked (Renewed Premium) at 244.0 USD
2025-05-13 15:53:40,248 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Apple iPhone 11 Pro, 64GB, Silver - Fully Unlocked (Renewed Premium) at 245.35 USD
2025-05-13 15:53:40,248 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Apple iPhone 11 Pro, 64GB, Silver - Fully Unlocked (Renewed Premium) at 245.35 USD
2025-05-13 15:53:41,169 - DealFinderAI.AmazonScraperAgent - INFO - Extracted 10 products from Amazon
2025-05-13 15:53:41,170 - DealFinderAI.AmazonScraperAgent - INFO - Applying relevance filtering to 10 products
2025-05-13 15:53:41,171 - DealFinderAI.AmazonScraperAgent - INFO - Filtered to 5 most relevant products
2025-05-13 15:53:41,171 - DealFinderAI.Controller - INFO - Amazon response content: {'source': 'Amazon', 'query': "Apple smartphone iPhone 16 Apple iPhone 16 iPhone 16 Amazon's Choice", 'products': [{'title': 'Apple', 'price': 49.0, 'was_price': None, 'currency': 'USD', 'url': 'https://www.amazon.com/Apple-iPhone-Silicone-MagSafe-Control/dp/B0DGHJLC44/ref=sr_1_3?crid=1747166018&dib=eyJ2IjoiMSJ9.TX6I_AtV3ijd_ly6VkHvDMP1llH7Sttf6cvaUhpz33xSIcySc_hZJh64BSbyBJIeswqaEIy80pknpzmNYWk1Reyk2TZaan8J-2f4zlDt_YBVb5ENYqzX7L_H363ABo51QKcozo7MuHF9uID4SPgsByMKNpUBFnSyDgJsaGyQucV_x0eM0-ARwC0AGe8RrR-mGrg-VXoaycLW_gHYyfXS0VZDr4nEgu4QGYS-THao2DboyxV30aU6LnKAQA7YywGdLTJC3p_lmF1c57u4QJ3W0oBAss7rGJyjs8LhT914rtc.e5VFRt9znXQ8PSs2KWdFJEW1mryobtxQ7-NFqUhcLw4&dib_tag=se&keywords=Apple+smartphone+iPhone+16+Apple+iPhone+16+iPhone+16+Amazon%27s+Choice&qid=1747166018&s=electronics&sr=1-3', 'image_url': 'https://m.media-amazon.com/images/I/61UJxrJDpSL._AC_UL320_.jpg', 'rating': 4.6, 'reviews': 452, 'is_sponsored': False, 'is_prime': True, 'is_amazon_choice': False, 'is_best_seller': False, 'asin': 'B0DGHJLC44', 'description': '+5AppleiPhone 16 Plus Silicone Case with MagSafe and Camera Control - Star Fruit \u200b\u200b\u200b\u200b\u200b\u200b\u200b 4.6 out of 5 stars 452 Price, product page$49.00$49.00 FREE delivery Sun, May 18 Or fastest delivery Fri, May 16 Add to cartMore Buying Choices$27.94(2+ used & new offers)', 'delivery_info': 'More Buying Choices', 'out_of_stock': False, 'source': 'Amazon', 'relevance_score': 17}, {'title': 'Apple iPhone SE (2nd Generation), 128GB, Red, Unlocked (Renewed Premium)', 'price': 168.97, 'was_price': None, 'currency': 'USD', 'url': 'https://www.amazon.com/Apple-iPhone-2nd-Generation-128GB/dp/B08R97FHJ7/ref=sr_1_5?crid=1747166018&dib=eyJ2IjoiMSJ9.TX6I_AtV3ijd_ly6VkHvDMP1llH7Sttf6cvaUhpz33xSIcySc_hZJh64BSbyBJIeswqaEIy80pknpzmNYWk1Reyk2TZaan8J-2f4zlDt_YBVb5ENYqzX7L_H363ABo51QKcozo7MuHF9uID4SPgsByMKNpUBFnSyDgJsaGyQucV_x0eM0-ARwC0AGe8RrR-mGrg-VXoaycLW_gHYyfXS0VZDr4nEgu4QGYS-THao2DboyxV30aU6LnKAQA7YywGdLTJC3p_lmF1c57u4QJ3W0oBAss7rGJyjs8LhT914rtc.e5VFRt9znXQ8PSs2KWdFJEW1mryobtxQ7-NFqUhcLw4&dib_tag=se&keywords=Apple+smartphone+iPhone+16+Apple+iPhone+16+iPhone+16+Amazon%27s+Choice&qid=1747166018&s=electronics&sr=1-5', 'image_url': 'https://m.media-amazon.com/images/I/71LmapNYinL._AC_UL320_.jpg', 'rating': 4.2, 'reviews': 20604, 'is_sponsored': False, 'is_prime': True, 'is_amazon_choice': False, 'is_best_seller': False, 'asin': 'B08R97FHJ7', 'description': 'Apple iPhone SE (2nd Generation), 128GB, Red, Unlocked (Renewed Premium) Options:3 sizesTop Reviewed for Functionality4.2 out of 5 stars 20,604 Price, product page$168.97$168.97 FREE delivery Thu, May 15 Only 2 left in stock - order soon.See optionsMore Buying Choices$123.27(5 used & new offers)', 'delivery_info': 'More Buying Choices', 'out_of_stock': False, 'source': 'Amazon', 'relevance_score': 16}, {'title': 'Apple iPhone 11, 64GB, White - Unlocked (Renewed Premium)', 'price': 230.0, 'was_price': None, 'currency': 'USD', 'url': 'https://www.amazon.com/Apple-iPhone-11-64GB-White/dp/B08BHKSZ5P/ref=sr_1_6?crid=1747166018&dib=eyJ2IjoiMSJ9.TX6I_AtV3ijd_ly6VkHvDMP1llH7Sttf6cvaUhpz33xSIcySc_hZJh64BSbyBJIeswqaEIy80pknpzmNYWk1Reyk2TZaan8J-2f4zlDt_YBVb5ENYqzX7L_H363ABo51QKcozo7MuHF9uID4SPgsByMKNpUBFnSyDgJsaGyQucV_x0eM0-ARwC0AGe8RrR-mGrg-VXoaycLW_gHYyfXS0VZDr4nEgu4QGYS-THao2DboyxV30aU6LnKAQA7YywGdLTJC3p_lmF1c57u4QJ3W0oBAss7rGJyjs8LhT914rtc.e5VFRt9znXQ8PSs2KWdFJEW1mryobtxQ7-NFqUhcLw4&dib_tag=se&keywords=Apple+smartphone+iPhone+16+Apple+iPhone+16+iPhone+16+Amazon%27s+Choice&qid=1747166018&s=electronics&sr=1-6', 'image_url': 'https://m.media-amazon.com/images/I/613KzeDTHrS._AC_UL320_.jpg', 'rating': 4.4, 'reviews': 3004, 'is_sponsored': False, 'is_prime': True, 'is_amazon_choice': False, 'is_best_seller': False, 'asin': 'B08BHKSZ5P', 'description': 'Apple iPhone 11, 64GB, White - Unlocked (Renewed Premium) Options:3 sizesTop Reviewed for Functionality4.4 out of 5 stars 3,004 Price, product page$230.00$230.00 FREE delivery Thu, May 15 Only 1 left in stock - order soon.See optionsMore Buying Choices$215.76(5 new offers)', 'delivery_info': 'More Buying Choices', 'out_of_stock': False, 'source': 'Amazon', 'relevance_score': 16}, {'title': 'Apple', 'price': 39.0, 'was_price': 48.75, 'currency': 'USD', 'url': 'https://www.amazon.com/Apple-iPhone-16e-Silicone-Case/dp/B0DXQHCK6T/ref=sr_1_2?crid=1747166018&dib=eyJ2IjoiMSJ9.TX6I_AtV3ijd_ly6VkHvDMP1llH7Sttf6cvaUhpz33xSIcySc_hZJh64BSbyBJIeswqaEIy80pknpzmNYWk1Reyk2TZaan8J-2f4zlDt_YBVb5ENYqzX7L_H363ABo51QKcozo7MuHF9uID4SPgsByMKNpUBFnSyDgJsaGyQucV_x0eM0-ARwC0AGe8RrR-mGrg-VXoaycLW_gHYyfXS0VZDr4nEgu4QGYS-THao2DboyxV30aU6LnKAQA7YywGdLTJC3p_lmF1c57u4QJ3W0oBAss7rGJyjs8LhT914rtc.e5VFRt9znXQ8PSs2KWdFJEW1mryobtxQ7-NFqUhcLw4&dib_tag=se&keywords=Apple+smartphone+iPhone+16+Apple+iPhone+16+iPhone+16+Amazon%27s+Choice&qid=1747166018&s=electronics&sr=1-2', 'image_url': 'https://m.media-amazon.com/images/I/51vsV7HoO1L._AC_UL320_.jpg', 'rating': 4.5, 'reviews': 45, 'is_sponsored': False, 'is_prime': True, 'is_amazon_choice': False, 'is_best_seller': False, 'asin': 'B0DXQHCK6T', 'description': 'AppleiPhone 16e Silicone Case  Black \u200b\u200b\u200b\u200b\u200b\u200b\u200b 4.5 out of 5 stars 45 400+ bought in past monthPrice, product page$39.00$39.00 ($48.75$48.75/100 g) FREE delivery Sun, May 18 Or fastest delivery Tomorrow, May 14 Add to cartMore Buying Choices$33.93(2+ used & new offers)', 'delivery_info': '400+ bought in past month', 'out_of_stock': False, 'source': 'Amazon', 'relevance_score': 12}, {'title': 'Apple', 'price': 49.99, 'was_price': None, 'currency': 'USD', 'url': 'https://www.amazon.com/Apple-iPhone-Silicone-MagSafe-Control/dp/B0DGHM4ZTC/ref=sr_1_1?crid=1747166018&dib=eyJ2IjoiMSJ9.TX6I_AtV3ijd_ly6VkHvDMP1llH7Sttf6cvaUhpz33xSIcySc_hZJh64BSbyBJIeswqaEIy80pknpzmNYWk1Reyk2TZaan8J-2f4zlDt_YBVb5ENYqzX7L_H363ABo51QKcozo7MuHF9uID4SPgsByMKNpUBFnSyDgJsaGyQucV_x0eM0-ARwC0AGe8RrR-mGrg-VXoaycLW_gHYyfXS0VZDr4nEgu4QGYS-THao2DboyxV30aU6LnKAQA7YywGdLTJC3p_lmF1c57u4QJ3W0oBAss7rGJyjs8LhT914rtc.e5VFRt9znXQ8PSs2KWdFJEW1mryobtxQ7-NFqUhcLw4&dib_tag=se&keywords=Apple+smartphone+iPhone+16+Apple+iPhone+16+iPhone+16+Amazon%27s+Choice&qid=1747166018&s=electronics&sr=1-1', 'image_url': 'https://m.media-amazon.com/images/I/6101BvimzHL._AC_UL320_.jpg', 'rating': 4.5, 'reviews': 937, 'is_sponsored': False, 'is_prime': False, 'is_amazon_choice': False, 'is_best_seller': False, 'asin': 'B0DGHM4ZTC', 'description': '+3AppleiPhone 16 Silicone Case with MagSafe and Camera Control - Stone Grey \u200b\u200b\u200b\u200b\u200b\u200b\u200b 4.5 out of 5 stars 937 50+ bought in past monthPrice, product page$49.99$49.99FREE deliveryTemporarily out of stock.Add to cartMore Buying Choices$33.97(2+ used & new offers)', 'delivery_info': '50+ bought in past month', 'out_of_stock': False, 'source': 'Amazon', 'relevance_score': 11}]}
2025-05-13 15:53:41,172 - DealFinderAI.Controller - INFO - Amazon returned 5 products
2025-05-13 15:53:41,172 - DealFinderAI.WalmartScraperAgent - INFO - Searching Walmart for: {'product_type': 'smartphone', 'keywords': ['iphone 16', 'best deal'], 'price_range': None, 'brands': ['Apple'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-13 15:53:41,173 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: 
            Optimize this search query for Walmart's search engine:
            
            "smartphone iphone 16 best deal Apple"
            
            For Walmart searches, please:
            1. Focus on model numbers and specific identifiers if present
            2. Include key brand names (Walmart's search works well with brand names)
            3. Remove generic words that may dilute results
            4. Add Walmart-specific terms that might improve results (like "Rollback" if looking for deals)
            5. Prioritize precise product names and specifications
            
            Return a JSON object with:
            - optimized_keywords: List of 3-5 optimized search terms (most important first)
            - department_hint: Any Walmart department suggestion (Electronics, Home, etc.)
            - must_include_terms: Terms that MUST be in results
            - exclude_terms: Terms that should NOT be in results
            - walmart_specific_filters: Any Walmart-specific filters to apply
            
            Format as JSON only with no explanation.
            
2025-05-13 15:53:42,664 - DealFinderAI.WalmartScraperAgent - INFO - Optimized search parameters: {'product_type': 'smartphone', 'keywords': ['iPhone 16', 'Apple iPhone 16', 'iPhone 16 Walmart Rollback', 'Apple iPhone 16 deals'], 'price_range': None, 'brands': ['Apple'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True, 'department': 'Electronics', 'must_include_terms': ['iPhone', '16', 'Apple'], 'exclude_terms': ['best deal', 'smartphone'], 'walmart_filters': ['Rollback', 'Deals']}
2025-05-13 15:53:42,665 - DealFinderAI.WalmartScraperAgent - INFO - Built optimized Walmart search query: Apple smartphone iPhone 16 Apple iPhone 16 iPhone 16 Walmart Rollback
2025-05-13 15:53:42,665 - DealFinderAI.WalmartScraperAgent - INFO - Built Walmart query: Apple smartphone iPhone 16 Apple iPhone 16 iPhone 16 Walmart Rollback
2025-05-13 15:53:42,665 - DealFinderAI.WalmartScraperAgent - INFO - Making Walmart search request with params: {'q': 'Apple smartphone iPhone 16 Apple iPhone 16 iPhone 16 Walmart Rollback Electronics', 'page': 1, 'affinityOverride': 'default', 'sort': 'price_low'}
2025-05-13 15:53:43,086 - DealFinderAI.WalmartScraperAgent - INFO - Extracted 0 products from JSON data
2025-05-13 15:53:43,086 - DealFinderAI.WalmartScraperAgent - INFO - JSON extraction failed, falling back to HTML extraction
2025-05-13 15:53:43,087 - DealFinderAI.WalmartScraperAgent - INFO - Found 0 product divs in HTML
2025-05-13 15:53:43,087 - DealFinderAI.WalmartScraperAgent - INFO - Extracted 0 products from HTML
2025-05-13 15:53:44,342 - DealFinderAI.WalmartScraperAgent - INFO - Extracted 0 products from Walmart
2025-05-13 15:53:44,343 - DealFinderAI.Controller - INFO - Walmart returned 0 products
2025-05-13 15:53:44,343 - DealFinderAI.EbayScraperAgent - INFO - Searching eBay for: {'product_type': 'smartphone', 'keywords': ['iphone 16', 'best deal'], 'price_range': None, 'brands': ['Apple'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-13 15:53:44,343 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: 
            Optimize this search query for eBay's search engine:
            
            "smartphone iphone 16 best deal Apple"
            
            For eBay searches, please:
            1. Focus on exact model numbers and specific part identifiers if present
            2. Include key brand names
            3. Remove generic words that may dilute results
            4. Add eBay-specific terms that might improve results
            5. Optimize for finding the most relevant listings
            
            Return a JSON object with:
            - optimized_keywords: List of 3-5 optimized search terms (most important first)
            - category_hints: Any eBay category suggestions
            - must_include_terms: Terms that MUST be in results
            - exclude_terms: Terms that should NOT be in results
            
            Format as JSON only with no explanation.
            
2025-05-13 15:53:45,339 - DealFinderAI.EbayScraperAgent - INFO - Optimized search parameters: {'product_type': 'smartphone', 'keywords': ['iPhone 16', 'Apple iPhone 16', 'iPhone 16 new'], 'price_range': None, 'brands': ['Apple'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True, 'category_hints': ['Cell Phones & Smartphones'], 'must_include_terms': ['Apple', 'iPhone 16'], 'exclude_terms': ['repair', 'broken', 'parts']}
2025-05-13 15:53:45,339 - DealFinderAI.EbayScraperAgent - INFO - Built optimized eBay search query: smartphone Apple iPhone 16 Apple iPhone 16 iPhone 16 new
2025-05-13 15:53:45,340 - DealFinderAI.EbayScraperAgent - INFO - Built eBay query: smartphone Apple iPhone 16 Apple iPhone 16 iPhone 16 new
2025-05-13 15:53:45,340 - DealFinderAI.EbayScraperAgent - INFO - Making eBay search request with params: {'_nkw': 'smartphone Apple iPhone 16 Apple iPhone 16 iPhone 16 new Cell Phones & Smartphones', '_sacat': '0', '_ipg': '96', '_sop': '15', 'LH_BIN': '1'}
2025-05-13 15:53:47,019 - DealFinderAI.EbayScraperAgent - INFO - Found 131 product listings
2025-05-13 15:53:47,020 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Unlocked Apple iPhone 4s -8/16/32/64GB Black IOS6 3G WIFI Smartphone sealed at 30.0 USD
2025-05-13 15:53:47,020 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Unlocked Apple iPhone 4s -8/16/32/64GB Black IOS6 3G WIFI Smartphone sealed at 30.0 USD
2025-05-13 15:53:47,022 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 4s 16GB Black/white (Unlocked) (CDMA + GSM) IOS9 Sealed Smartphone at 31.0 USD
2025-05-13 15:53:47,022 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 4s 16GB Black/white (Unlocked) (CDMA + GSM) IOS9 Sealed Smartphone at 31.0 USD
2025-05-13 15:53:47,023 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Original Unlocked Apple iPhone 5 16/32/64GB smartphone working well at 39.0 USD
2025-05-13 15:53:47,023 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Original Unlocked Apple iPhone 5 16/32/64GB smartphone working well at 39.0 USD
2025-05-13 15:53:47,023 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Original Unlocked Apple iPhone 5s 16/32/64GB smartphone working well at 42.0 USD
2025-05-13 15:53:47,023 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Original Unlocked Apple iPhone 5s 16/32/64GB smartphone working well at 42.0 USD
2025-05-13 15:53:47,024 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 15 128GB Smartphone Fully Unlocked Very Good at 480.0 USD
2025-05-13 15:53:47,024 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 15 128GB Smartphone Fully Unlocked Very Good at 480.0 USD
2025-05-13 15:53:47,025 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 16 Plus 128GB Factory Unlocked Open Box Mint Smartphone A3082 at 720.7 USD
2025-05-13 15:53:47,025 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 16 Plus 128GB Factory Unlocked Open Box Mint Smartphone A3082 at 720.7 USD
2025-05-13 15:53:47,026 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 16 256GB Factory Unlocked Open Box Mint Smartphone A3081 at 778.45 USD
2025-05-13 15:53:47,026 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 16 256GB Factory Unlocked Open Box Mint Smartphone A3081 at 778.45 USD
2025-05-13 15:53:47,026 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: *NEW SEALED* Apple Verizon iPhone 6s Plus 16/64/128GB UNLOCKED Smartphone CF at 148.99 USD
2025-05-13 15:53:47,026 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: *NEW SEALED* Apple Verizon iPhone 6s Plus 16/64/128GB UNLOCKED Smartphone CF at 148.99 USD
2025-05-13 15:53:47,641 - DealFinderAI.EbayScraperAgent - INFO - Extracted 8 products from eBay
2025-05-13 15:53:47,643 - DealFinderAI.EbayScraperAgent - INFO - Applying relevance filtering to 8 products
2025-05-13 15:53:47,643 - DealFinderAI.EbayScraperAgent - INFO - Filtered to 5 most relevant products
2025-05-13 15:53:47,643 - DealFinderAI.Controller - INFO - eBay returned 5 products
2025-05-13 15:53:47,644 - DealFinderAI.Controller - INFO - Total products before aggregation: 10
2025-05-13 15:53:47,644 - DealFinderAI.ResultsAggregatorAgent - INFO - Aggregating results for query: find me best deal on iphone 16
2025-05-13 15:53:47,644 - DealFinderAI.ResultsAggregatorAgent - INFO - Found 3 results from various sources
2025-05-13 15:53:47,644 - DealFinderAI.ResultsAggregatorAgent - INFO - Source Amazon: 5 products
2025-05-13 15:53:47,644 - DealFinderAI.ResultsAggregatorAgent - INFO - Source Walmart: 0 products
2025-05-13 15:53:47,644 - DealFinderAI.ResultsAggregatorAgent - INFO - Source eBay: 5 products
2025-05-13 15:53:47,644 - DealFinderAI.ResultsAggregatorAgent - INFO - Total products extracted: 10
2025-05-13 15:53:47,645 - DealFinderAI.ResultsAggregatorAgent - INFO - Ranking 10 products
2025-05-13 15:53:47,645 - DealFinderAI.ResultsAggregatorAgent - INFO - Sorted 10 products by score
2025-05-13 15:53:47,645 - DealFinderAI.ResultsAggregatorAgent - INFO - Returning 10 diversified products
2025-05-13 15:53:47,645 - DealFinderAI.ResultsAggregatorAgent - INFO - Products after ranking: 10
2025-05-13 15:53:47,645 - DealFinderAI.ResultsAggregatorAgent - INFO - Final products: 10
2025-05-13 15:53:47,645 - DealFinderAI.Controller - INFO - Products after aggregation: 10
2025-05-13 15:53:47,646 - DealFinderAI.ProductComparisonAgent - INFO - Comparing products for query: find me best deal on iphone 16
2025-05-13 15:53:47,646 - DealFinderAI.ProductComparisonAgent - INFO - Found 10 products to compare
2025-05-13 15:53:47,646 - DealFinderAI.ProductComparisonAgent - INFO - Grouping 10 products
2025-05-13 15:53:47,647 - DealFinderAI.ProductComparisonAgent - INFO - Created 0 product groups
2025-05-13 15:53:47,647 - DealFinderAI.ChatMemoryAgent - INFO - Storing context for conversation session_20250513155326_32248214
2025-05-13 15:53:47,647 - DealFinderAI.ChatMemoryAgent - INFO - Storing 10 products for conversation session_20250513155326_32248214
2025-05-13 15:53:47,647 - DealFinderAI.PresentationAgent - INFO - Preparing presentation for 10 products
2025-05-13 15:53:47,647 - DealFinderAI.PresentationAgent - INFO - Formatting 10 products for display
2025-05-13 15:53:47,648 - DealFinderAI.PresentationAgent - INFO - Product 1: Apple - Price: $49.00 - Source: Amazon
2025-05-13 15:53:47,648 - DealFinderAI.PresentationAgent - INFO - Product 2: *NEW SEALED* Apple Verizon iPhone 6s Plus 16/64/128GB UNLOCKED Smartphone CF - Price: $148.99 - Source: eBay
2025-05-13 15:53:47,648 - DealFinderAI.PresentationAgent - INFO - Product 3: Apple - Price: $49.99 - Source: Amazon
2025-05-13 15:53:47,648 - DealFinderAI.PresentationAgent - INFO - Product 4: Apple - Price: $39.00 - Source: Amazon
2025-05-13 15:53:47,648 - DealFinderAI.PresentationAgent - INFO - Product 5: Apple iPhone SE (2nd Generation), 128GB, Red, Unlocked (Renewed Premium) - Price: $168.97 - Source: Amazon
2025-05-13 15:53:47,648 - DealFinderAI.PresentationAgent - INFO - Product 6: Apple iPhone 11, 64GB, White - Unlocked (Renewed Premium) - Price: $230.00 - Source: Amazon
2025-05-13 15:53:47,648 - DealFinderAI.PresentationAgent - INFO - Product 7: Original Unlocked Apple iPhone 5 16/32/64GB smartphone working well - Price: $39.00 - Source: eBay
2025-05-13 15:53:47,648 - DealFinderAI.PresentationAgent - INFO - Product 8: Apple iPhone 15 128GB Smartphone Fully Unlocked Very Good - Price: $480.00 - Source: eBay
2025-05-13 15:53:47,648 - DealFinderAI.PresentationAgent - INFO - Product 9: Apple iPhone 16 Plus 128GB Factory Unlocked Open Box Mint Smartphone A3082 - Price: $720.70 - Source: eBay
2025-05-13 15:53:47,649 - DealFinderAI.PresentationAgent - INFO - Product 10: Apple iPhone 16 256GB Factory Unlocked Open Box Mint Smartphone A3081 - Price: $778.45 - Source: eBay
2025-05-13 15:53:47,649 - DealFinderAI.ChatMemoryAgent - INFO - Storing context for conversation session_20250513155326_32248214
2025-05-13 15:53:47,649 - DealFinderAI.ChatMemoryAgent - INFO - Storing 10 products for conversation session_20250513155326_32248214
2025-05-13 15:53:47,649 - DealFinderAI.Controller - INFO - Successfully stored search results in memory
2025-05-13 15:54:27,677 - DealFinderAI - INFO - Logging initialized
2025-05-13 15:54:27,677 - DealFinderAI.Main - INFO - Starting DealFinder AI
2025-05-13 15:54:27,677 - DealFinderAI.Main - INFO - Using LangChain implementation
2025-05-13 15:54:27,717 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-13 15:54:27,717 - DealFinderAI.Controller - INFO - Initialized scraper agents: ['amazon', 'walmart', 'ebay']
2025-05-13 15:54:27,717 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-13 15:54:27,717 - DealFinderAI.Controller - INFO - Initialized scraper agents: ['amazon', 'walmart', 'ebay']
2025-05-13 15:54:27,717 - DealFinderAI.Main - INFO - Web app using LangChain implementation with Gemini model
2025-05-13 15:54:27,998 - DealFinderAI - INFO - Logging initialized
2025-05-13 15:54:27,998 - DealFinderAI.Main - INFO - Starting DealFinder AI
2025-05-13 15:54:27,998 - DealFinderAI.Main - INFO - Using LangChain implementation
2025-05-13 15:54:28,024 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-13 15:54:28,024 - DealFinderAI.Controller - INFO - Initialized scraper agents: ['amazon', 'walmart', 'ebay']
2025-05-13 15:54:28,024 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-13 15:54:28,024 - DealFinderAI.Controller - INFO - Initialized scraper agents: ['amazon', 'walmart', 'ebay']
2025-05-13 15:54:28,024 - DealFinderAI.Main - INFO - Web app using LangChain implementation with Gemini model
2025-05-13 15:54:40,915 - DealFinderAI.Controller - INFO - Processing user query: find me best deal on iphone 16
2025-05-13 15:54:40,916 - DealFinderAI.ChatMemoryAgent - INFO - Analyzing query: 'find me best deal on iphone 16' for conversation session_20250513155431_2e59bc28
2025-05-13 15:54:40,916 - DealFinderAI.ChatMemoryAgent - INFO - No product context available for this conversation
2025-05-13 15:54:40,916 - DealFinderAI.Controller - INFO - Analyze response: {'is_follow_up': False, 'focused_product': None, 'referenced_products': [], 'products': []}
2025-05-13 15:54:40,916 - DealFinderAI.Controller - INFO - Is follow-up? False
2025-05-13 15:54:40,916 - DealFinderAI.Controller - INFO - Referenced products: 0
2025-05-13 15:54:40,917 - DealFinderAI.Controller - INFO - Processing as new search query
2025-05-13 15:54:40,917 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: find me best deal on iphone 16
2025-05-13 15:54:41,836 - DealFinderAI.GeminiAgent - WARNING - Failed to parse Gemini response as JSON: ```json
{
  "product_type": "smartphone",
  "keywords": ["iphone 16"],
  "price_range": null,
  "brands": ["Apple"],
  "features": [],
  "sorting_preference": "price_low_to_high",
  "buy_it_now": true
}
```

2025-05-13 15:54:41,837 - DealFinderAI.Controller - INFO - Parsed search parameters: {'product_type': 'smartphone', 'keywords': ['iphone 16'], 'price_range': None, 'brands': ['Apple'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-13 15:54:41,837 - DealFinderAI.AmazonScraperAgent - INFO - Searching Amazon for: {'product_type': 'smartphone', 'keywords': ['iphone 16'], 'price_range': None, 'brands': ['Apple'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-13 15:54:41,837 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: 
            Optimize this search query for Amazon's search engine:
            
            "smartphone iphone 16 Apple"
            
            For Amazon searches, please:
            1. Focus on product-specific model numbers and identifiers if present
            2. Include key brand names (Amazon's A9 algorithm prioritizes brand matches)
            3. Remove generic words that may dilute results
            4. Add Amazon-specific terms that might improve results (like "Amazon's Choice" if looking for quality products)
            5. Optimize for Amazon's search algorithm which prioritizes exact matches and recent sales volume
            
            Return a JSON object with:
            - optimized_keywords: List of 3-5 optimized search terms (most important first)
            - amazon_category: Any Amazon department/category suggestion (Electronics, Books, etc.)
            - must_include_terms: Terms that MUST be in results
            - exclude_terms: Terms that should NOT be in results
            - amazon_search_filters: Any Amazon-specific filters to apply (Prime eligible, etc.)
            
            Format as JSON only with no explanation.
            
2025-05-13 15:54:43,261 - DealFinderAI.AmazonScraperAgent - INFO - Optimized search parameters: {'product_type': 'smartphone', 'keywords': ['iPhone 16', 'Apple iPhone 16', 'iPhone 16 Pro Max'], 'price_range': None, 'brands': ['Apple'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True, 'category': 'Electronics', 'must_include_terms': ['Apple', 'iPhone 16'], 'exclude_terms': ['smartphone'], 'amazon_filters': ['Prime Eligible', 'New']}
2025-05-13 15:54:43,261 - DealFinderAI.AmazonScraperAgent - INFO - Built optimized Amazon search query: Apple smartphone iPhone 16 Apple iPhone 16 iPhone 16 Pro Max
2025-05-13 15:54:43,262 - DealFinderAI.AmazonScraperAgent - INFO - Built Amazon query: Apple smartphone iPhone 16 Apple iPhone 16 iPhone 16 Pro Max
2025-05-13 15:54:43,262 - DealFinderAI.AmazonScraperAgent - INFO - Making Amazon search request with params: {'k': 'Apple smartphone iPhone 16 Apple iPhone 16 iPhone 16 Pro Max', 'ref': 'nb_sb_noss', 'crid': 1747166083, 'i': 'aps', 'search-alias': 'electronics', 's': 'price-asc-rank'}
2025-05-13 15:54:44,482 - DealFinderAI.AmazonScraperAgent - INFO - Found 27 product divs in search results
2025-05-13 15:54:44,488 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Adjustable Desktop Phone Holder, Gripper for Back of Phone Grip Holder Compatible with iPhone 16/15/14 All Smartphones at 2.99 USD
2025-05-13 15:54:44,488 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Adjustable Desktop Phone Holder, Gripper for Back of Phone Grip Holder Compatible with iPhone 16/15/14 All Smartphones at 2.99 USD
2025-05-13 15:54:44,491 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: LFGKMZ 2 Pack Camera Lens Protector Compatible with iPhone 16 Pro/iPhone 16 Pro Max,Tempered Glass Camera Cover,Auto Install,Ultra HD,Anti-Scratch,Strong Adhesion - Black Titanium at 3.99 USD
2025-05-13 15:54:44,491 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: LFGKMZ 2 Pack Camera Lens Protector Compatible with iPhone 16 Pro/iPhone 16 Pro Max,Tempered Glass Camera Cover,Auto Install,Ultra HD,Anti-Scratch,Strong Adhesion - Black Titanium at 3.99 USD
2025-05-13 15:54:44,495 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: LFGKMZ 2 Pack Tempered Glass Screen Protector for iPhone 16 Pro Max 6.9",[Military Grade Shatterproof],Auto Install,Ultra HD,9H Hardness,Zero Bubble at 3.99 USD
2025-05-13 15:54:44,495 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: LFGKMZ 2 Pack Tempered Glass Screen Protector for iPhone 16 Pro Max 6.9",[Military Grade Shatterproof],Auto Install,Ultra HD,9H Hardness,Zero Bubble at 3.99 USD
2025-05-13 15:54:44,499 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: TENOC at 3.99 USD
2025-05-13 15:54:44,499 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: TENOC at 3.99 USD
2025-05-13 15:54:44,503 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: FlyCoco at 3.99 USD
2025-05-13 15:54:44,503 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: FlyCoco at 3.99 USD
2025-05-13 15:54:44,506 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Premium Braided, USB-C to USB-C Fast Charge Cable, 480 MBPS Speed, for Apple iPhone 16/16 Pro/15/15 Pro/15 Pro Max/15 Plus, iPad Samsung Galaxy S25 Ultra/S Series, 3.3ft/1M, White (Braided, 3.3ft/1M) at 3.99 USD
2025-05-13 15:54:44,506 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Premium Braided, USB-C to USB-C Fast Charge Cable, 480 MBPS Speed, for Apple iPhone 16/16 Pro/15/15 Pro/15 Pro Max/15 Plus, iPad Samsung Galaxy S25 Ultra/S Series, 3.3ft/1M, White (Braided, 3.3ft/1M) at 3.99 USD
2025-05-13 15:54:44,510 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Portable Cell Phone Stand Holder for Desk, Foldable Pocket-Sized Mount, Adjustable Multi Angle Stand for iPhone 16 15 14 13 Pro Max, 4-10 iPad Smartphone, White at 3.99 USD
2025-05-13 15:54:44,510 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Portable Cell Phone Stand Holder for Desk, Foldable Pocket-Sized Mount, Adjustable Multi Angle Stand for iPhone 16 15 14 13 Pro Max, 4-10 iPad Smartphone, White at 3.99 USD
2025-05-13 15:54:44,514 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: USB C to USB 3.0 Adapter, USB Type C Male to USB A Female OTG Cable, USB to USB C Adapter, Compatible with iPhone 16/15 Pro/Max, MacBook Pro Air, iPad Pro, Google Pixel, Samsung Galaxy at 4.3 USD
2025-05-13 15:54:44,514 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: USB C to USB 3.0 Adapter, USB Type C Male to USB A Female OTG Cable, USB to USB C Adapter, Compatible with iPhone 16/15 Pro/Max, MacBook Pro Air, iPad Pro, Google Pixel, Samsung Galaxy at 4.3 USD
2025-05-13 15:54:44,517 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: USB C to USB 3.0 Adapter, USB Type C Male to USB A Female OTG Cable, Thunderbolt 3 to USB Adapter, Compatible with iPhone 16 Pro Max/16 Plus/16/15, Samsung Galaxy, MacBook Pro/Air, Google Pixel at 4.3 USD
2025-05-13 15:54:44,517 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: USB C to USB 3.0 Adapter, USB Type C Male to USB A Female OTG Cable, Thunderbolt 3 to USB Adapter, Compatible with iPhone 16 Pro Max/16 Plus/16/15, Samsung Galaxy, MacBook Pro/Air, Google Pixel at 4.3 USD
2025-05-13 15:54:44,521 - DealFinderAI.AmazonScraperAgent - WARNING - Incomplete data for ASIN B0DPMGDV36, falling back to Gemini extraction.
2025-05-13 15:54:44,521 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: 
            Extract detailed product information from this Amazon listing HTML:
            
            ```html
            <div class="sg-col-4-of-24 sg-col-4-of-12 s-result-item s-asin sg-col-4-of-16 sg-col s-widget-spacing-small sg-col-4-of-20" data-asin="B0DPMGDV36" data-component-type="s-search-result" data-index="14" data-uuid="41d91743-a093-4e73-9a8c-4bca69c4964d" id="41d91743-a093-4e73-9a8c-4bca69c4964d" role="listitem"><div class="sg-col-inner"><div cel_widget_id="MAIN-SEARCH_RESULTS-14" class="s-widget-container s-spacing-small s-widget-container-height-small celwidget slot=MAIN template=SEARCH_RESULTS widgetId=search-results_10" data-csa-c-item-id="amzn1.asin.1.B0DPMGDV36" data-csa-c-pos="10" data-csa-c-type="item" data-csa-op-log-render=""><span class="a-declarative" data-action="puis-card-container-declarative" data-csa-c-func-deps="aui-da-puis-card-container-declarative" data-csa-c-item-id="amzn1.asin.B0DPMGDV36" data-csa-c-owner="puis" data-csa-c-posx="10" data-csa-c-type="item" data-render-id="r21fbr9bkxhyva2b4tejqzetoso" data-version-id="vgrbnavj5iylf2a1plj09cp2jv"><div class="puis-card-container s-card-container s-overflow-hidden aok-relative puis-expand-height puis-include-content-margin puis puis-vgrbnavj5iylf2a1plj09cp2jv s-latency-cf-section puis-card-border" data-cy="asin-faceout-container"><div class="a-section a-spacing-base"><div class="s-product-image-container aok-relative s-text-center s-image-overlay-grey puis-image-overlay-grey s-padding-left-small s-padding-right-small puis-spacing-small s-height-equalized puis puis-vgrbnavj5iylf2a1plj09cp2jv" data-cy="image-container"><span class="rush-component" data-component-type="s-product-image" data-render-id="r21fbr9bkxhyva2b4tejqzetoso" data-version-id="vgrbnavj5iylf2a1plj09cp2jv"><a class="a-link-normal s-no-outline" href="/ZSAUTHREE-Protector-Compatible-Tempered-Decoration/dp/B0DPMGDV36/ref=sr_1_10?crid=1747166083&amp;dib=eyJ2IjoiMSJ9.VtlzIpBxw9tiX01cL8zwGjdP-sQZRnGz9pp5TR7nvsbKvsW618UtelTkf74tNfgX7O735S08dC9YUwVdnixd-0Gtox-zv9MP00nBVSrOwekoi-eLRV97IdA4GvnI3xBKPy4puF6pVUhYtbfH5uLKX2Gu5Ky7JQGZ8tpxjIu3uYl_iDRuKLM2bp-iEMLurtdh7C_F0P6nVEa6oWWE-1hmgtgh1GS7p7BT8212k_f8KScUSXvoxuAksRZGatSSMA3TLFXPQwsfXjrxPzxlf7L8z0OAbIkr8GakvCWmtfzos78.UibyH6ib8vZ_p3J9c0gMNvT3brIn7wa1FjbxxJ1KCTk&amp;dib_tag=se&amp;keywords=Apple+smartphone+iPhone+16+Apple+iPhone+16+iPhone+16+Pro+Max&amp;qid=1747166083&amp;s=electronics&amp;sr=1-10" tabindex="-1"><div class="a-section aok-relative s-image-square-aspect"><img alt="ZSAUTHREE Camera Lens Protector Bling Compatible for iPhone 16 Pro/iPhone 16 Pro Max,9H Tempered Glass Camera Cover Screen..." aria-hidden="true" class="s-image" data-image-index="10" data-image-latency="s-product-image" data-image-load="" data-image-source-density="1" src="https://m.media-amazon.com/images/I/71F9UFbQVYL._AC_UL320_.jpg" srcset="https://m.media-amazon.com/images/I/71F9UFbQVYL._AC_UL320_.jpg 1x, https://m.media-amazon.com/images/I/71F9UFbQVYL._AC_UL480_FMwebp_QL65_.jpg 1.5x, https://m.media-amazon.com/images/I/71F9UFbQVYL._AC_UL640_FMwebp_QL65_.jpg 2x, https://m.media-amazon.com/images/I/71F9UFbQVYL._AC_UL800_FMwebp_QL65_.jpg 2.5x, https://m.media-amazon.com/images/I/71F9UFbQVYL._AC_UL960_FMwebp_QL65_.jpg 3x"/></div></a></span></div><div class="a-section a-spacing-small puis-padding-left-small puis-padding-right-small"><div class="a-section a-spacing-none a-text-center"><div class="a-section s-color-swatch-container s-color-swatch-container-left-aligned s-quick-view-text-align-start"><div data-csa-c-content-id="color-swatch-more-link" data-csa-c-interaction-events="click" data-csa-c-product-type="SCREEN_PROTECTOR" data-csa-c-swatch-more-url="/ZSAUTHREE-Protector-Compatible-Tempered-Decoration/dp/B0DPMGDV36/ref=cs_sr_dp?crid=1747166083&amp;dib=eyJ2IjoiMSJ9.VtlzIpBxw9tiX01cL8zwGjdP-sQZRnGz9pp5TR7nvsbKvsW618UtelTkf74tNfgX7O735S08dC9YUwVdnixd-0Gtox-zv9MP00nBVSrOwekoi-eLRV97IdA4GvnI3xBKPy4puF6pVUhYtbfH5uLKX2Gu5Ky7JQGZ8tpxjIu3uYl_iDRuKLM2bp-iEMLurtdh7C_F0P6nVEa6oWWE-1hmgtgh1GS7p7BT8212k_f8KScUSXvoxuAksRZGatSSMA3TLFXPQwsfXjrxPzxlf7L8z0OAbIkr8GakvCWmtfzos78.UibyH6ib8vZ_p3J9c0gMNvT3brIn7wa1FjbxxJ1KCTk&amp;dib_tag=se&amp;keywords=Apple+smartphone+iPhone+16+Apple+iPhone+16+iPhone+16+Pro+Max&amp;qid=1747166083&amp;s=electronics&amp;sr=1-10" data-csa-c-swatch-remaining-count="+7 other colors/patterns" data-csa-c-type="link"><a class="a-link-normal s-color-swatch-link puis-spacing-small s-hidden-in-quick-view" href="/ZSAUTHREE-Protector-Compatible-Tempered-Decoration/dp/B0DPMGDV36/ref=cs_sr_dp?crid=1747166083&amp;dib=eyJ2IjoiMSJ9.VtlzIpBxw9tiX01cL8zwGjdP-sQZRnGz9pp5TR7nvsbKvsW618UtelTkf74tNfgX7O735S08dC9YUwVdnixd-0Gtox-zv9MP00nBVSrOwekoi-eLRV97IdA4GvnI3xBKPy4puF6pVUhYtbfH5uLKX2Gu5Ky7JQGZ8tpxjIu3uYl_iDRuKLM2bp-iEMLurtdh7C_F0P6nVEa6oWWE-1hmgtgh1GS7p7BT8212k_f8KScUSXvoxuAksRZGatSSMA3TLFXPQwsfXjrxPzxlf7L8z0OAbIkr8GakvCWmtfzos78.UibyH6ib8vZ_p3J9c0gMNvT3brIn7wa1FjbxxJ1KCTk&amp;dib_tag=se&amp;keywords=Apple+smartphone+iPhone+16+Apple+iPhone+16+iPhone+16+Pro+Max&amp;qid=1747166083&amp;s=electronics&amp;sr=1-10" role="link"><u>+7 other colors/patterns</u></a></div></div></div><div class="a-section a-spacing-none a-spacing-top-small s-title-instructions-style" data-cy="title-recipe"><a class="a-link-normal s-line-clamp-4 s-link-style a-text-normal" href="/ZSAUTHREE-Protector-Compatible-Tempered-Decoration/dp/B0DPMGDV36/ref=sr_1_10?crid=1747166083&amp;dib=eyJ2IjoiMSJ9.VtlzIpBxw9tiX01cL8zwGjdP-sQZRnGz9pp5TR7nvsbKvsW618UtelTkf74tNfgX7O735S08dC9YUwVdnixd-0Gtox-zv9MP00nBVSrOwekoi-eLRV97IdA4GvnI3xBKPy4puF6pVUhYtbfH5uLKX2Gu5Ky7JQGZ8tpxjIu3uYl_iDRuKLM2bp-iEMLurtdh7C_F0P6nVEa6oWWE-1hmgtgh1GS7p7BT8212k_f8KScUSXvoxuAksRZGatSSMA3TLFXPQwsfXjrxPzxlf7L8z0OAbIkr8GakvCWmtfzos78.UibyH6ib8vZ_p3J9c0gMNvT3brIn7wa1FjbxxJ1KCTk&amp;dib_tag=se&amp;keywords=Apple+smartphone+iPhone+16+Apple+iPhone+16+iPhone+16+Pro+Max&amp;qid=1747166083&amp;s=electronics&amp;sr=1-10"><h2 aria-label="Camera Lens Protector Bling Compatible for iPhone 16 Pro/iPhone 16 Pro Max,9H Tempered Glass Camera Cover Screen Protector,HD Clear,Aluminum Alloy Ring Decoration (Diamond Golden)" class="a-size-base-plus a-spacing-none a-color-base a-text-normal"><span>Camera Lens Protector Bling Compatible for iPhone 16 Pro/iPhone 16 Pro Max,9H Tempered Glass Camera Cover Screen Protector,HD Clear,Aluminum Alloy Ring Decoration (Diamond Golden)</span></h2></a> </div><div class="a-section a-spacing-none a-spacing-top-micro" data-cy="reviews-block"><div class="a-row a-size-small"><span class="a-declarative" data-a-popover='{"position":"triggerBottom","popoverLabel":"4.4 out of 5 stars, rating details","url":"/review/widgets/average-customer-review/popover/ref=acr_search__popover?ie=UTF8&amp;asin=B0DPMGDV36&amp;ref_=acr_search__popover&amp;contextId=search","closeButton":true,"closeButtonLabel":""}' data-action="a-popover" data-csa-c-func-deps="aui-da-a-popover" data-csa-c-type="widget" data-render-id="r21fbr9bkxhyva2b4tejqzetoso" data-version-id="vgrbnavj5iylf2a1plj09cp2jv"><a aria-label="4.4 out of 5 stars, rating details" class="a-popover-trigger a-declarative" href="javascript:void(0)" role="button"><i aria-hidden="true" class="a-icon a-icon-star-small a-star-small-4-5" data-cy="reviews-ratings-slot"><span class="a-icon-alt">4.4 out of 5 stars</span></i><i class="a-icon a-icon-popover"></i></a></span> <span class="rush-component" data-component-type="s-client-side-analytics" data-render-id="r21fbr9bkxhyva2b4tejqzetoso" data-version-id="vgrbnavj5iylf2a1plj09cp2jv"><div class="s-csa-instrumentation-wrapper alf-search-csa-instrumentation-wrapper" data-csa-c-asin="B0DPMGDV36" data-csa-c-content-id="alf-customer-ratings-count-component" data-csa-c-layout="GRID" data-csa-c-slot-id="alf-reviews" data-csa-c-type="alf-af-component" data-csa-op-log-render="" style="display: inline-block"><a aria-label="20 ratings" class="a-link-normal s-underline-text s-underline-link-text s-link-style" href="/ZSAUTHREE-Protector-Compatible-Tempered-Decoration/dp/B0DPMGDV36/ref=sr_1_10?crid=1747166083&amp;dib=eyJ2IjoiMSJ9.VtlzIpBxw9tiX01cL8zwGjdP-sQZRnGz9pp5TR7nvsbKvsW618UtelTkf74tNfgX7O735S08dC9YUwVdnixd-0Gtox-zv9MP00nBVSrOwekoi-eLRV97IdA4GvnI3xBKPy4puF6pVUhYtbfH5uLKX2Gu5Ky7JQGZ8tpxjIu3uYl_iDRuKLM2bp-iEMLurtdh7C_F0P6nVEa6oWWE-1hmgtgh1GS7p7BT8212k_f8KScUSXvoxuAksRZGatSSMA3TLFXPQwsfXjrxPzxlf7L8z0OAbIkr8GakvCWmtfzos78.UibyH6ib8vZ_p3J9c0gMNvT3brIn7wa1FjbxxJ1KCTk&amp;dib_tag=se&amp;keywords=Apple+smartphone+iPhone+16+Apple+iPhone+16+iPhone+16+Pro+Max&amp;qid=1747166083&amp;s=electronics&amp;sr=1-10#customerReviews"><span aria-hidden="true" class="a-size-base s-underline-text">20</span> </a> </div></span></div></div><div class="a-section a-spacing-none a-spacing-top-small s-price-instructions-style" data-cy="price-recipe"><div class="a-row a-size-base a-color-base"><a class="a-link-normal s-no-hover s-underline-text s-underline-link-text s-link-style a-text-normal" href="/ZSAUTHREE-Protector-Compatible-Tempered-Decoration/dp/B0DPMGDV36/ref=sr_1_10?crid=1747166083&amp;dib=eyJ2IjoiMSJ9.VtlzIpBxw9tiX01cL8zwGjdP-sQZRnGz9pp5TR7nvsbKvsW618UtelTkf74tNfgX7O735S08dC9YUwVdnixd-0Gtox-zv9MP00nBVSrOwekoi-eLRV97IdA4GvnI3xBKPy4puF6pVUhYtbfH5uLKX2Gu5Ky7JQGZ8tpxjIu3uYl_iDRuKLM2bp-iEMLurtdh7C_F0P6nVEa6oWWE-1hmgtgh1GS7p7BT8212k_f8KScUSXvoxuAksRZGatSSMA3TLFXPQwsfXjrxPzxlf7L8z0OAbIkr8GakvCWmtfzos78.UibyH6ib8vZ_p3J9c0gMNvT3brIn7wa1FjbxxJ1KCTk&amp;dib_tag=se&amp;keywords=Apple+smartphone+iPhone+16+Apple+iPhone+16+iPhone+16+Pro+Max&amp;qid=1747166083&amp;s=electronics&amp;sr=1-10"><span class="a-size-base-plus a-color-base a-text-normal">Click to see price</span></a></div></div><div class="a-section a-spacing-none a-spacing-top-micro" data-cy="delivery-recipe"><div class="a-row a-size-base a-color-secondary s-align-children-center"><div class="a-section a-spacing-none a-padding-none udm-delivery-block" data-cy="delivery-block"><div class="a-row a-color-base udm-badge-block"><div class="a-column a-span12"></div></div><div class="a-row a-color-base udm-primary-delivery-message"><div class="a-column a-span12">FREE delivery <span class="a-text-bold" id="WVCRIAFWG">Sun, May 18</span> on $35 of items shipped by Amazon</div></div><div class="a-row a-color-base udm-secondary-delivery-message"><div class="a-column a-span12">Or fastest delivery <span class="a-text-bold" id="WVCRIAFWG">Tomorrow, May 14</span></div></div><div class="a-row a-color-base udm-legal-and-regulatory-message"><div class="a-column a-span12"></div></div></div></div></div><div class="a-section a-spacing-none a-spacing-top-mini"><div class="a-row"><div class="puis-atcb-container" data-atcb-props='{"cartType":"DEFAULT","csrfToken":"1@g+QozU97wyoDAnhelT03pKgS/sWeC+IET2yryxy504ZXAAAAAQAAAABoI6OEcmF3AAAAAGfA1H5nd8xGEcC3127HUQ==@ML8U5V","sessionId":"140-3332413-1876526","locale":"en-US"}' data-atcb-uid="atcb-B0DPMGDV36-10" data-cy="add-to-cart"><div class="addToCartShoppingPortalCSRFToken aok-hidden"><!-- sp:csrf --><meta content="hKiefFG3h+rbG1SGPzOWyO+Z5NlPPPtk4jg24gNmjIp4AAAAAGgjo4QyMTg1N2VhNC04MTNkLTQ1NWQtOTFiNS00ZjYyNGIwMGZhYjc=" name="anti-csrftoken-a2z"/><!-- sp:end-csrf --></div><div class="a-section puis-atcb-add-container aok-inline-block"><div class="a-section atc-faceout-container"><form action="/cart/add-to-cart?ref=sr_atc_rt_add_10&amp;sr=1-10&amp;qid=1747166083&amp;discoveredAsins.0=B0DPMGDV36" class="a-spacing-none" method="post"><!-- sp:csrf --><input name="anti-csrftoken-a2z" type="hidden" value="hKiefFG3h+rbG1SGPzOWyO+Z5NlPPPtk4jg24gNmjIp4AAAAAGgjo4QyMTg1N2VhNC04MTNkLTQ1NWQtOTFiNS00ZjYyNGIwMGZhYjc="/><!-- sp:end-csrf --><input name="clientName" type="hidden" value="EUIC_AddToCart_Search"><input name="items[0.base][asin]" type="hidden" value="B0DPMGDV36"/><input name="items[0.base][offerListingId]" type="hidden" value="U%2F7KYvU0VB95J6QKUxzG6P8C0A%2FN35BEmzdw1tJbQ02coHN0EZhU9zv8uo359VH%2BAuUeyLVJZZz4V6E%2F4V%2BxtyFQXeZoguulNt7sRyAffLOKJbn302XZrwCU2rm0zP7HuXxk89uUCCZNgLPWO%2FGUhSwF9RDW4nl3m3N1vTzHubqItdXMKIMMW0kk1W%2BaZe%2B0"/><input name="items[0.base][quantity]" type="hidden" value="1"/><div class="a-section ax-replace a-spacing-none"><div class="ax-atc celwidget atc-btn-container" data-csa-c-content-id="ax-atc-EUIC_AddToCart_Search-content" data-csa-c-device-env="WEB" data-csa-c-device-os="UNRECOGNIZED" data-csa-c-device-type="DESKTOP" data-csa-c-item-id="B0DPMGDV36" data-csa-c-item-type="asin" data-csa-c-pos="10" data-csa-c-slot-id="ax-atc-EUIC_AddToCart_Search" data-csa-c-type="item" id="ax-atc-EUIC_AddToCart_Search"><span class="a-declarative" data-action="puis-atcb-add-action-retail" data-csa-c-func-deps="aui-da-puis-atcb-add-action-retail" data-csa-c-type="widget" data-puis-atcb-add-action-retail='{"clientName":"EUIC_AddToCart_Search","messageSuccess":"Item Added","neoAtcUrl":"/cart/add-to-cart?ref=sr_atc_rt_add_10&amp;sr=1-10&amp;qid=1747166083&amp;discoveredAsins.0=B0DPMGDV36","messageError":"Failed to add item","additionalParameters":{},"asin":"B0DPMGDV36","spAttributionMethod":"POST","url":"https://data.amazon.com/api/marketplaces/ATVPDKIKX0DER/cart/carts/retail/items?ref=sr_atc_rt_add_10&amp;sr=1-10&amp;qid=1747166083&amp;discoveredAsins.0=B0DPMGDV36","offerListingId":"U%2F7KYvU0VB95J6QKUxzG6P8C0A%2FN35BEmzdw1tJbQ02coHN0EZhU9zv8uo359VH%2BAuUeyLVJZZz4V6E%2F4V%2BxtyFQXeZoguulNt7sRyAffLOKJbn302XZrwCU2rm0zP7HuXxk89uUCCZNgLPWO%2FGUhSwF9RDW4nl3m3N1vTzHubqItdXMKIMMW0kk1W%2BaZe%2B0"}' data-render-id="r21fbr9bkxhyva2b4tejqzetoso" data-version-id="vgrbnavj5iylf2a1plj09cp2jv"><div data-csa-c-action-name="addToCart" data-csa-c-content-id="s-search-add-to-cart-action" data-csa-c-device-env="WEB" data-csa-c-device-os="UNRECOGNIZED" data-csa-c-device-type="DESKTOP" data-csa-c-item-id="B0DPMGDV36" data-csa-c-item-type="asin" data-csa-c-type="action"><span class="a-button a-button-primary a-button-icon puis-atcb-button"><span class="a-button-inner"><i class="a-icon a-icon-cart"></i><button aria-label="Add to cart" class="a-button-text" name="submit.addToCart" type="button">Add to cart</button></span></span></div></span></div></div></input></form></div></div><div class="a-section puis-atcb-error-container aok-hidden"><div class="a-box a-alert-inline a-alert-inline-error" role="alert"><div class="a-box-inner a-alert-container"><i class="a-icon a-icon-alert"></i><div class="a-alert-content"><span class="a-size-mini puis-atcb-error-message"></span></div></div></div></div><div class="a-section puis-atcb-extra-container"></div></div></div></div></div></div></div></span></div></div></div>
            ```
            
            Extract:
            - title: Full product title
            - price: Numeric price value only (no currency symbol)
            - was_price: Original price before discount (if present)
            - currency: Currency code (e.g., USD)
            - url: Product URL
            - image_url: Main product image URL
            - rating: Star rating (0-5)
            - reviews: Number of reviews
            - asin: Amazon ASIN
            - is_prime: Boolean for Prime eligible
            - is_sponsored: Boolean for sponsored listing
            - is_amazon_choice: Boolean for Amazon's Choice
            - is_best_seller: Boolean for Best Seller
            - description: Any additional description text
            - delivery_info: Delivery/shipping information
            - out_of_stock: Boolean for out of stock status
            
            Return a clean JSON object with these fields. Use null for missing values.
            
2025-05-13 15:54:49,612 - DealFinderAI.AmazonScraperAgent - INFO - Gemini extracted: Camera Lens Protector Bling Compatible for iPhone 16 Pro/iPhone 16 Pro Max,9H Tempered Glass Camera Cover Screen Protector,HD Clear,Aluminum Alloy Ring Decoration (Diamond Golden) at None USD
2025-05-13 15:54:49,613 - DealFinderAI.AmazonScraperAgent - INFO - Gemini used for product extraction
2025-05-13 15:54:49,613 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Camera Lens Protector Bling Compatible for iPhone 16 Pro/iPhone 16 Pro Max,9H Tempered Glass Camera Cover Screen Protector,HD Clear,Aluminum Alloy Ring Decoration (Diamond Golden) at None USD
2025-05-13 15:54:49,613 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Camera Lens Protector Bling Compatible for iPhone 16 Pro/iPhone 16 Pro Max,9H Tempered Glass Camera Cover Screen Protector,HD Clear,Aluminum Alloy Ring Decoration (Diamond Golden) at None USD
2025-05-13 15:54:50,566 - DealFinderAI.AmazonScraperAgent - INFO - Extracted 10 products from Amazon
2025-05-13 15:54:50,596 - DealFinderAI.AmazonScraperAgent - INFO - Applying relevance filtering to 10 products
2025-05-13 15:54:50,597 - DealFinderAI.AmazonScraperAgent - ERROR - Error in relevance filtering: 'NoneType' object has no attribute 'lower'
2025-05-13 15:54:50,597 - DealFinderAI.Controller - INFO - Amazon response content: {'source': 'Amazon', 'query': 'Apple smartphone iPhone 16 Apple iPhone 16 iPhone 16 Pro Max', 'products': [{'title': 'Adjustable Desktop Phone Holder, Gripper for Back of Phone Grip Holder Compatible with iPhone 16/15/14 All Smartphones', 'price': 2.99, 'was_price': None, 'currency': 'USD', 'url': 'https://www.amazon.com/Adjustable-Desktop-Gripper-Compatible-Smartphones/dp/B0DZCHZ8R8/ref=sr_1_1?crid=1747166083&dib=eyJ2IjoiMSJ9.VtlzIpBxw9tiX01cL8zwGjdP-sQZRnGz9pp5TR7nvsbKvsW618UtelTkf74tNfgX7O735S08dC9YUwVdnixd-0Gtox-zv9MP00nBVSrOwekoi-eLRV97IdA4GvnI3xBKPy4puF6pVUhYtbfH5uLKX2Gu5Ky7JQGZ8tpxjIu3uYl_iDRuKLM2bp-iEMLurtdh7C_F0P6nVEa6oWWE-1hmgtgh1GS7p7BT8212k_f8KScUSXvoxuAksRZGatSSMA3TLFXPQwsfXjrxPzxlf7L8z0OAbIkr8GakvCWmtfzos78.UibyH6ib8vZ_p3J9c0gMNvT3brIn7wa1FjbxxJ1KCTk&dib_tag=se&keywords=Apple+smartphone+iPhone+16+Apple+iPhone+16+iPhone+16+Pro+Max&qid=1747166083&s=electronics&sr=1-1', 'image_url': 'https://m.media-amazon.com/images/I/41iVrlAonFL._AC_UL320_.jpg', 'rating': 0.0, 'reviews': 0, 'is_sponsored': False, 'is_prime': False, 'is_amazon_choice': False, 'is_best_seller': False, 'asin': 'B0DZCHZ8R8', 'description': '+4 other colors/patternsAdjustable Desktop Phone Holder, Gripper for Back of Phone Grip Holder Compatible with iPhone 16/15/14 All Smartphones Price, product page$2.99$2.99$4.99 delivery May 21 - 28Or fastest delivery May 19 - 22Add to cart', 'delivery_info': '', 'out_of_stock': False, 'source': 'Amazon'}, {'title': 'LFGKMZ 2 Pack Camera Lens Protector Compatible with iPhone 16 Pro/iPhone 16 Pro Max,Tempered Glass Camera Cover,Auto Install,Ultra HD,Anti-Scratch,Strong Adhesion - Black Titanium', 'price': 3.99, 'was_price': None, 'currency': 'USD', 'url': 'https://www.amazon.com/Protector-Compatible-Tempered-Anti-Scratch-Adhesion/dp/B0DDQ7T2LG/ref=sr_1_2?crid=1747166083&dib=eyJ2IjoiMSJ9.VtlzIpBxw9tiX01cL8zwGjdP-sQZRnGz9pp5TR7nvsbKvsW618UtelTkf74tNfgX7O735S08dC9YUwVdnixd-0Gtox-zv9MP00nBVSrOwekoi-eLRV97IdA4GvnI3xBKPy4puF6pVUhYtbfH5uLKX2Gu5Ky7JQGZ8tpxjIu3uYl_iDRuKLM2bp-iEMLurtdh7C_F0P6nVEa6oWWE-1hmgtgh1GS7p7BT8212k_f8KScUSXvoxuAksRZGatSSMA3TLFXPQwsfXjrxPzxlf7L8z0OAbIkr8GakvCWmtfzos78.UibyH6ib8vZ_p3J9c0gMNvT3brIn7wa1FjbxxJ1KCTk&dib_tag=se&keywords=Apple+smartphone+iPhone+16+Apple+iPhone+16+iPhone+16+Pro+Max&qid=1747166083&s=electronics&sr=1-2', 'image_url': 'https://m.media-amazon.com/images/I/61pHFBRuGHL._AC_UL320_.jpg', 'rating': 4.1, 'reviews': 5, 'is_sponsored': False, 'is_prime': False, 'is_amazon_choice': False, 'is_best_seller': False, 'asin': 'B0DDQ7T2LG', 'description': 'LFGKMZ 2 Pack Camera Lens Protector Compatible with iPhone 16 Pro/iPhone 16 Pro Max,Tempered Glass Camera Cover,Auto Install,Ultra HD,Anti-Scratch,Strong Adhesion - Black Titanium 4.1 out of 5 stars 5 Price, product page$3.99$3.99FREE delivery Sun, May 18 on $35 of items shipped by AmazonOr fastest delivery Tomorrow, May 14Add to cart', 'delivery_info': '', 'out_of_stock': False, 'source': 'Amazon'}, {'title': 'LFGKMZ 2 Pack Tempered Glass Screen Protector for iPhone 16 Pro Max 6.9",[Military Grade Shatterproof],Auto Install,Ultra HD,9H Hardness,Zero Bubble', 'price': 3.99, 'was_price': None, 'currency': 'USD', 'url': 'https://www.amazon.com/Tempered-Protector-Military-Shatterproof-Hardness/dp/B0DDQ7D1MB/ref=sr_1_3?crid=1747166083&dib=eyJ2IjoiMSJ9.VtlzIpBxw9tiX01cL8zwGjdP-sQZRnGz9pp5TR7nvsbKvsW618UtelTkf74tNfgX7O735S08dC9YUwVdnixd-0Gtox-zv9MP00nBVSrOwekoi-eLRV97IdA4GvnI3xBKPy4puF6pVUhYtbfH5uLKX2Gu5Ky7JQGZ8tpxjIu3uYl_iDRuKLM2bp-iEMLurtdh7C_F0P6nVEa6oWWE-1hmgtgh1GS7p7BT8212k_f8KScUSXvoxuAksRZGatSSMA3TLFXPQwsfXjrxPzxlf7L8z0OAbIkr8GakvCWmtfzos78.UibyH6ib8vZ_p3J9c0gMNvT3brIn7wa1FjbxxJ1KCTk&dib_tag=se&keywords=Apple+smartphone+iPhone+16+Apple+iPhone+16+iPhone+16+Pro+Max&qid=1747166083&s=electronics&sr=1-3', 'image_url': 'https://m.media-amazon.com/images/I/71V5Fkh-6IL._AC_UL320_.jpg', 'rating': 4.1, 'reviews': 29, 'is_sponsored': False, 'is_prime': False, 'is_amazon_choice': False, 'is_best_seller': False, 'asin': 'B0DDQ7D1MB', 'description': '+1 other color/patternLFGKMZ 2 Pack Tempered Glass Screen Protector for iPhone 16 Pro Max 6.9",[Military Grade Shatterproof],Auto Install,Ultra HD,9H Hardness,Zero Bubble 4.1 out of 5 stars 29 Price, product page$3.99$3.99FREE delivery Sun, May 18 on $35 of items shipped by AmazonOr fastest delivery Tomorrow, May 14Add to cart', 'delivery_info': '', 'out_of_stock': False, 'source': 'Amazon'}, {'title': 'TENOC', 'price': 3.99, 'was_price': None, 'currency': 'USD', 'url': 'https://www.amazon.com/TENOC-Protector-Tempered-Protection-Friendly/dp/B0DBVMVC7F/ref=sr_1_4?crid=1747166083&dib=eyJ2IjoiMSJ9.VtlzIpBxw9tiX01cL8zwGjdP-sQZRnGz9pp5TR7nvsbKvsW618UtelTkf74tNfgX7O735S08dC9YUwVdnixd-0Gtox-zv9MP00nBVSrOwekoi-eLRV97IdA4GvnI3xBKPy4puF6pVUhYtbfH5uLKX2Gu5Ky7JQGZ8tpxjIu3uYl_iDRuKLM2bp-iEMLurtdh7C_F0P6nVEa6oWWE-1hmgtgh1GS7p7BT8212k_f8KScUSXvoxuAksRZGatSSMA3TLFXPQwsfXjrxPzxlf7L8z0OAbIkr8GakvCWmtfzos78.UibyH6ib8vZ_p3J9c0gMNvT3brIn7wa1FjbxxJ1KCTk&dib_tag=se&keywords=Apple+smartphone+iPhone+16+Apple+iPhone+16+iPhone+16+Pro+Max&qid=1747166083&s=electronics&sr=1-4', 'image_url': 'https://m.media-amazon.com/images/I/617cgutvAZL._AC_UL320_.jpg', 'rating': 3.9, 'reviews': 27, 'is_sponsored': False, 'is_prime': False, 'is_amazon_choice': False, 'is_best_seller': False, 'asin': 'B0DBVMVC7F', 'description': 'TENOCScreen Protector for iPhone 16 Pro Max, 2 Pack Clear 9H Tempered Glass Film Cover Sensor Protection Case Friendly for 6.9 inch Options:4 sizes3.9 out of 5 stars 27 Price, product page$3.99$3.99FREE delivery Sun, May 18 on $35 of items shipped by AmazonOr fastest delivery Tomorrow, May 14Add to cart', 'delivery_info': '', 'out_of_stock': False, 'source': 'Amazon'}, {'title': 'FlyCoco', 'price': 3.99, 'was_price': None, 'currency': 'USD', 'url': 'https://www.amazon.com/FlyCoco-Adapter-Charger-Converter-AirPods/dp/B0D17GFQDB/ref=sr_1_5?crid=1747166083&dib=eyJ2IjoiMSJ9.VtlzIpBxw9tiX01cL8zwGjdP-sQZRnGz9pp5TR7nvsbKvsW618UtelTkf74tNfgX7O735S08dC9YUwVdnixd-0Gtox-zv9MP00nBVSrOwekoi-eLRV97IdA4GvnI3xBKPy4puF6pVUhYtbfH5uLKX2Gu5Ky7JQGZ8tpxjIu3uYl_iDRuKLM2bp-iEMLurtdh7C_F0P6nVEa6oWWE-1hmgtgh1GS7p7BT8212k_f8KScUSXvoxuAksRZGatSSMA3TLFXPQwsfXjrxPzxlf7L8z0OAbIkr8GakvCWmtfzos78.UibyH6ib8vZ_p3J9c0gMNvT3brIn7wa1FjbxxJ1KCTk&dib_tag=se&keywords=Apple+smartphone+iPhone+16+Apple+iPhone+16+iPhone+16+Pro+Max&qid=1747166083&s=electronics&sr=1-5', 'image_url': 'https://m.media-amazon.com/images/I/61UOcAGyamL._AC_UL320_.jpg', 'rating': 4.5, 'reviews': 79, 'is_sponsored': False, 'is_prime': False, 'is_amazon_choice': False, 'is_best_seller': False, 'asin': 'B0D17GFQDB', 'description': '+2 other colors/patternsFlyCocoUSB to USB C Adapter 2 Pack, USB C Female to A Male Charger Type C Converter for Apple Watch Ultra 9 10, iPhone 16 15 14 13 Plus Pro Max, AirPods 3,iPad Air, Samsung Galaxy S24, Car 4.5 out of 5 stars 79 Price, product page$3.99$3.99FREE delivery Sun, May 18 on $35 of items shipped by AmazonOr fastest delivery Fri, May 16Only 3 left in stock - order soon.Add to cart', 'delivery_info': '', 'out_of_stock': False, 'source': 'Amazon', 'relevance_score': 7}]}
2025-05-13 15:54:50,600 - DealFinderAI.Controller - INFO - Amazon returned 5 products
2025-05-13 15:54:50,600 - DealFinderAI.WalmartScraperAgent - INFO - Searching Walmart for: {'product_type': 'smartphone', 'keywords': ['iphone 16'], 'price_range': None, 'brands': ['Apple'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-13 15:54:50,601 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: 
            Optimize this search query for Walmart's search engine:
            
            "smartphone iphone 16 Apple"
            
            For Walmart searches, please:
            1. Focus on model numbers and specific identifiers if present
            2. Include key brand names (Walmart's search works well with brand names)
            3. Remove generic words that may dilute results
            4. Add Walmart-specific terms that might improve results (like "Rollback" if looking for deals)
            5. Prioritize precise product names and specifications
            
            Return a JSON object with:
            - optimized_keywords: List of 3-5 optimized search terms (most important first)
            - department_hint: Any Walmart department suggestion (Electronics, Home, etc.)
            - must_include_terms: Terms that MUST be in results
            - exclude_terms: Terms that should NOT be in results
            - walmart_specific_filters: Any Walmart-specific filters to apply
            
            Format as JSON only with no explanation.
            
2025-05-13 15:54:51,900 - DealFinderAI.WalmartScraperAgent - INFO - Optimized search parameters: {'product_type': 'smartphone', 'keywords': ['iPhone 16', 'Apple iPhone 16', 'iPhone 16 Walmart'], 'price_range': None, 'brands': ['Apple'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True, 'department': 'Electronics', 'must_include_terms': ['Apple', 'iPhone 16'], 'exclude_terms': ['smartphone'], 'walmart_filters': ['Rollback', 'New']}
2025-05-13 15:54:51,900 - DealFinderAI.WalmartScraperAgent - INFO - Built optimized Walmart search query: Apple smartphone iPhone 16 Apple iPhone 16 iPhone 16 Walmart
2025-05-13 15:54:51,900 - DealFinderAI.WalmartScraperAgent - INFO - Built Walmart query: Apple smartphone iPhone 16 Apple iPhone 16 iPhone 16 Walmart
2025-05-13 15:54:51,900 - DealFinderAI.WalmartScraperAgent - INFO - Making Walmart search request with params: {'q': 'Apple smartphone iPhone 16 Apple iPhone 16 iPhone 16 Walmart Electronics', 'page': 1, 'affinityOverride': 'default', 'sort': 'price_low'}
2025-05-13 15:54:54,091 - DealFinderAI.WalmartScraperAgent - INFO - Extracted 0 products from JSON data
2025-05-13 15:54:54,091 - DealFinderAI.WalmartScraperAgent - INFO - JSON extraction failed, falling back to HTML extraction
2025-05-13 15:54:54,093 - DealFinderAI.WalmartScraperAgent - INFO - Found 9 product divs in HTML
2025-05-13 15:54:56,170 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 15:54:56,170 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: AT&T iPhone 16e 128GB Black. Apple Intelligence. at 649.0 USD
2025-05-13 15:54:58,243 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 15:54:58,244 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: AT&T iPhone 16 128GB Ultramarine. Apple Intelligence. at 879.0 USD
2025-05-13 15:55:00,261 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 15:55:00,261 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Verizon iPhone 16 128GB Ultramarine. Apple Intelligence. at 879.0 USD
2025-05-13 15:55:02,238 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 15:55:02,238 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Apple iPhone 16 GB Unlocked, Silver at 174.61 USD
2025-05-13 15:55:04,474 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 15:55:04,474 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Straight Talk Apple iPhone 16, 128GB, White - Prepaid Smartphone [Locked to Straight Talk] at 829.0 USD
2025-05-13 15:55:06,796 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 15:55:06,797 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Straight Talk Apple iPhone 16, 128GB, Teal - Prepaid Smartphone [Locked to Straight Talk] at 829.0 USD
2025-05-13 15:55:09,201 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 15:55:09,202 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Straight Talk Apple iPhone 16, 128GB, Pink - Prepaid Smartphone [Locked to Straight Talk} at 829.0 USD
2025-05-13 15:55:11,930 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 15:55:11,930 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Straight Talk Apple iPhone 16, 128GB, Blue - Prepaid Smartphone [Locked to Straight Talk] at 829.0 USD
2025-05-13 15:55:14,089 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 15:55:14,089 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Straight Talk Apple iPhone 16, 256GB, White - Prepaid Smartphone [Locked to Straight Talk] at 929.0 USD
2025-05-13 15:55:14,089 - DealFinderAI.WalmartScraperAgent - INFO - Extracted 9 products from HTML
2025-05-13 15:55:14,089 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: AT&T iPhone 16e 128GB Black. Apple Intelligence. at 649.0 USD
2025-05-13 15:55:14,089 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: AT&T iPhone 16 128GB Ultramarine. Apple Intelligence. at 879.0 USD
2025-05-13 15:55:14,089 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Verizon iPhone 16 128GB Ultramarine. Apple Intelligence. at 879.0 USD
2025-05-13 15:55:14,089 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Apple iPhone 16 GB Unlocked, Silver at 174.61 USD
2025-05-13 15:55:14,089 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Straight Talk Apple iPhone 16, 128GB, White - Prepaid Smartphone [Locked to Straight Talk] at 829.0 USD
2025-05-13 15:55:14,089 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Straight Talk Apple iPhone 16, 128GB, Teal - Prepaid Smartphone [Locked to Straight Talk] at 829.0 USD
2025-05-13 15:55:14,089 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Straight Talk Apple iPhone 16, 128GB, Pink - Prepaid Smartphone [Locked to Straight Talk} at 829.0 USD
2025-05-13 15:55:14,089 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Straight Talk Apple iPhone 16, 128GB, Blue - Prepaid Smartphone [Locked to Straight Talk] at 829.0 USD
2025-05-13 15:55:14,089 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Straight Talk Apple iPhone 16, 256GB, White - Prepaid Smartphone [Locked to Straight Talk] at 929.0 USD
2025-05-13 15:55:15,264 - DealFinderAI.WalmartScraperAgent - INFO - Extracted 9 products from Walmart
2025-05-13 15:55:15,265 - DealFinderAI.WalmartScraperAgent - INFO - Applying relevance filtering to 9 products
2025-05-13 15:55:15,266 - DealFinderAI.WalmartScraperAgent - INFO - Filtered to 5 most relevant products
2025-05-13 15:55:15,266 - DealFinderAI.Controller - INFO - Walmart returned 5 products
2025-05-13 15:55:15,266 - DealFinderAI.EbayScraperAgent - INFO - Searching eBay for: {'product_type': 'smartphone', 'keywords': ['iphone 16'], 'price_range': None, 'brands': ['Apple'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-13 15:55:15,266 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: 
            Optimize this search query for eBay's search engine:
            
            "smartphone iphone 16 Apple"
            
            For eBay searches, please:
            1. Focus on exact model numbers and specific part identifiers if present
            2. Include key brand names
            3. Remove generic words that may dilute results
            4. Add eBay-specific terms that might improve results
            5. Optimize for finding the most relevant listings
            
            Return a JSON object with:
            - optimized_keywords: List of 3-5 optimized search terms (most important first)
            - category_hints: Any eBay category suggestions
            - must_include_terms: Terms that MUST be in results
            - exclude_terms: Terms that should NOT be in results
            
            Format as JSON only with no explanation.
            
2025-05-13 15:55:16,187 - DealFinderAI.EbayScraperAgent - INFO - Optimized search parameters: {'product_type': 'smartphone', 'keywords': ['iPhone 16', 'Apple iPhone 16', 'iPhone 16 Pro', 'iPhone 16 Pro Max'], 'price_range': None, 'brands': ['Apple'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True, 'category_hints': ['Cell Phones & Smartphones', 'Consumer Electronics'], 'must_include_terms': ['Apple', 'iPhone'], 'exclude_terms': ['broken', 'damaged', 'repair']}
2025-05-13 15:55:16,187 - DealFinderAI.EbayScraperAgent - INFO - Built optimized eBay search query: smartphone Apple iPhone 16 Apple iPhone 16 iPhone 16 Pro
2025-05-13 15:55:16,187 - DealFinderAI.EbayScraperAgent - INFO - Built eBay query: smartphone Apple iPhone 16 Apple iPhone 16 iPhone 16 Pro
2025-05-13 15:55:16,188 - DealFinderAI.EbayScraperAgent - INFO - Making eBay search request with params: {'_nkw': 'smartphone Apple iPhone 16 Apple iPhone 16 iPhone 16 Pro Cell Phones & Smartphones', '_sacat': '0', '_ipg': '96', '_sop': '15', 'LH_BIN': '1'}
2025-05-13 15:55:17,686 - DealFinderAI.EbayScraperAgent - INFO - Found 132 product listings
2025-05-13 15:55:17,687 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 14 Pro - 512 GB - Purple (Xfinity) Smartphone at 284.0 USD
2025-05-13 15:55:17,687 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 14 Pro - 512 GB - Purple (Xfinity) Smartphone at 284.0 USD
2025-05-13 15:55:17,688 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 14 Pro Max - 128 GB - Black (U.S. Cellular) Smartphone at 299.0 USD
2025-05-13 15:55:17,688 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 14 Pro Max - 128 GB - Black (U.S. Cellular) Smartphone at 299.0 USD
2025-05-13 15:55:17,689 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 14 Pro 256GB White / Silver AT&T at 349.99 USD
2025-05-13 15:55:17,689 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 14 Pro 256GB White / Silver AT&T at 349.99 USD
2025-05-13 15:55:17,691 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 14 Pro - 128 GB - Space Black (T-Mobile) Smartphone at 364.0 USD
2025-05-13 15:55:17,691 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 14 Pro - 128 GB - Space Black (T-Mobile) Smartphone at 364.0 USD
2025-05-13 15:55:17,691 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 16 Pro 128GB Unlocked 1-Year Warranty Smartphone Excellent at 841.99 USD
2025-05-13 15:55:17,691 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 16 Pro 128GB Unlocked 1-Year Warranty Smartphone Excellent at 841.99 USD
2025-05-13 15:55:17,692 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: UNLOCKED Apple iPhone 14 Pro 512GB Smartphone - All Colors - Grade A at 619.0 USD
2025-05-13 15:55:17,692 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: UNLOCKED Apple iPhone 14 Pro 512GB Smartphone - All Colors - Grade A at 619.0 USD
2025-05-13 15:55:17,693 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: New in Sealed Box Apple iPhone 14 PRO A2650 512GB 1TB Unlocked Smartphone at 832.99 USD
2025-05-13 15:55:17,693 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: New in Sealed Box Apple iPhone 14 PRO A2650 512GB 1TB Unlocked Smartphone at 832.99 USD
2025-05-13 15:55:17,693 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 16 Pro 128GB Factory Unlocked Open Box Mint Smartphone A3083 at 857.45 USD
2025-05-13 15:55:17,694 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 16 Pro 128GB Factory Unlocked Open Box Mint Smartphone A3083 at 857.45 USD
2025-05-13 15:55:18,237 - DealFinderAI.EbayScraperAgent - INFO - Extracted 8 products from eBay
2025-05-13 15:55:18,239 - DealFinderAI.EbayScraperAgent - INFO - Applying relevance filtering to 8 products
2025-05-13 15:55:18,240 - DealFinderAI.EbayScraperAgent - INFO - Filtered to 5 most relevant products
2025-05-13 15:55:18,240 - DealFinderAI.Controller - INFO - eBay returned 5 products
2025-05-13 15:55:18,240 - DealFinderAI.Controller - INFO - Total products before aggregation: 15
2025-05-13 15:55:18,240 - DealFinderAI.ResultsAggregatorAgent - INFO - Aggregating results for query: find me best deal on iphone 16
2025-05-13 15:55:18,240 - DealFinderAI.ResultsAggregatorAgent - INFO - Found 3 results from various sources
2025-05-13 15:55:18,240 - DealFinderAI.ResultsAggregatorAgent - INFO - Source Amazon: 5 products
2025-05-13 15:55:18,241 - DealFinderAI.ResultsAggregatorAgent - INFO - Source Walmart: 5 products
2025-05-13 15:55:18,241 - DealFinderAI.ResultsAggregatorAgent - INFO - Source eBay: 5 products
2025-05-13 15:55:18,241 - DealFinderAI.ResultsAggregatorAgent - INFO - Total products extracted: 15
2025-05-13 15:55:18,241 - DealFinderAI.ResultsAggregatorAgent - INFO - Ranking 15 products
2025-05-13 15:55:18,241 - DealFinderAI.ResultsAggregatorAgent - INFO - Sorted 15 products by score
2025-05-13 15:55:18,241 - DealFinderAI.ResultsAggregatorAgent - INFO - Returning 10 diversified products
2025-05-13 15:55:18,241 - DealFinderAI.ResultsAggregatorAgent - INFO - Products after ranking: 10
2025-05-13 15:55:18,241 - DealFinderAI.ResultsAggregatorAgent - INFO - Final products: 10
2025-05-13 15:55:18,242 - DealFinderAI.Controller - INFO - Products after aggregation: 10
2025-05-13 15:55:18,242 - DealFinderAI.ProductComparisonAgent - INFO - Comparing products for query: find me best deal on iphone 16
2025-05-13 15:55:18,242 - DealFinderAI.ProductComparisonAgent - INFO - Found 10 products to compare
2025-05-13 15:55:18,242 - DealFinderAI.ProductComparisonAgent - INFO - Grouping 10 products
2025-05-13 15:55:18,243 - DealFinderAI.ProductComparisonAgent - INFO - Created 0 product groups
2025-05-13 15:55:18,243 - DealFinderAI.ChatMemoryAgent - INFO - Storing context for conversation session_20250513155431_2e59bc28
2025-05-13 15:55:18,243 - DealFinderAI.ChatMemoryAgent - INFO - Storing 10 products for conversation session_20250513155431_2e59bc28
2025-05-13 15:55:18,243 - DealFinderAI.PresentationAgent - INFO - Preparing presentation for 10 products
2025-05-13 15:55:18,243 - DealFinderAI.PresentationAgent - INFO - Formatting 10 products for display
2025-05-13 15:55:18,244 - DealFinderAI.PresentationAgent - INFO - Product 1: FlyCoco - Price: $3.99 - Source: Amazon
2025-05-13 15:55:18,244 - DealFinderAI.PresentationAgent - INFO - Product 2: New in Sealed Box Apple iPhone 14 PRO A2650 512GB 1TB Unlocked Smartphone - Price: $832.99 - Source: eBay
2025-05-13 15:55:18,244 - DealFinderAI.PresentationAgent - INFO - Product 3: Apple iPhone 16 GB Unlocked, Silver - Price: $174.61 - Source: Walmart
2025-05-13 15:55:18,244 - DealFinderAI.PresentationAgent - INFO - Product 4: LFGKMZ 2 Pack Camera Lens Protector Compatible with iPhone 16 Pro/iPhone 16 Pro Max,Tempered Glass Camera Cover,Auto Install,Ultra HD,Anti-Scratch,Strong Adhesion - Black Titanium - Price: $3.99 - Source: Amazon
2025-05-13 15:55:18,244 - DealFinderAI.PresentationAgent - INFO - Product 5: LFGKMZ 2 Pack Tempered Glass Screen Protector for iPhone 16 Pro Max 6.9",[Military Grade Shatterproof],Auto Install,Ultra HD,9H Hardness,Zero Bubble - Price: $3.99 - Source: Amazon
2025-05-13 15:55:18,244 - DealFinderAI.PresentationAgent - INFO - Product 6: TENOC - Price: $3.99 - Source: Amazon
2025-05-13 15:55:18,244 - DealFinderAI.PresentationAgent - INFO - Product 7: Adjustable Desktop Phone Holder, Gripper for Back of Phone Grip Holder Compatible with iPhone 16/15/14 All Smartphones - Price: $2.99 - Source: Amazon
2025-05-13 15:55:18,244 - DealFinderAI.PresentationAgent - INFO - Product 8: Apple iPhone 16 Pro 128GB Unlocked 1-Year Warranty Smartphone Excellent - Price: $841.99 - Source: eBay
2025-05-13 15:55:18,244 - DealFinderAI.PresentationAgent - INFO - Product 9: Apple iPhone 14 Pro - 512 GB - Purple (Xfinity) Smartphone - Price: $284.00 - Source: eBay
2025-05-13 15:55:18,245 - DealFinderAI.PresentationAgent - INFO - Product 10: Apple iPhone 14 Pro Max - 128 GB - Black (U.S. Cellular) Smartphone - Price: $299.00 - Source: eBay
2025-05-13 15:55:18,245 - DealFinderAI.ChatMemoryAgent - INFO - Storing context for conversation session_20250513155431_2e59bc28
2025-05-13 15:55:18,245 - DealFinderAI.ChatMemoryAgent - INFO - Storing 10 products for conversation session_20250513155431_2e59bc28
2025-05-13 15:55:18,245 - DealFinderAI.Controller - INFO - Successfully stored search results in memory
2025-05-13 16:08:12,694 - DealFinderAI - INFO - Logging initialized
2025-05-13 16:08:12,694 - DealFinderAI.Main - INFO - Starting DealFinder AI
2025-05-13 16:08:12,694 - DealFinderAI.Main - INFO - Using LangChain implementation
2025-05-13 16:08:12,737 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-13 16:08:12,737 - DealFinderAI.Controller - INFO - Initialized scraper agents: ['amazon', 'walmart', 'ebay']
2025-05-13 16:08:12,737 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-13 16:08:12,737 - DealFinderAI.Controller - INFO - Initialized scraper agents: ['amazon', 'walmart', 'ebay']
2025-05-13 16:08:12,737 - DealFinderAI.Main - INFO - Web app using LangChain implementation with Gemini model
2025-05-13 16:08:38,278 - DealFinderAI.Controller - INFO - Processing user query: find me best deal on iphone 16
2025-05-13 16:08:38,279 - DealFinderAI.ChatMemoryAgent - INFO - Analyzing query: 'find me best deal on iphone 16' for conversation session_20250513160824_339e4c49
2025-05-13 16:08:38,279 - DealFinderAI.ChatMemoryAgent - INFO - No product context available for this conversation
2025-05-13 16:08:38,279 - DealFinderAI.Controller - INFO - Analyze response: {'is_follow_up': False, 'focused_product': None, 'referenced_products': [], 'products': []}
2025-05-13 16:08:38,279 - DealFinderAI.Controller - INFO - Is follow-up? False
2025-05-13 16:08:38,279 - DealFinderAI.Controller - INFO - Referenced products: 0
2025-05-13 16:08:38,279 - DealFinderAI.Controller - INFO - Processing as new search query
2025-05-13 16:08:38,279 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: find me best deal on iphone 16
2025-05-13 16:08:39,669 - DealFinderAI.GeminiAgent - WARNING - Failed to parse Gemini response as JSON: ```json
{
  "product_type": "smartphone",
  "keywords": ["iphone 16"],
  "price_range": null,
  "brands": ["Apple"],
  "features": [],
  "sorting_preference": "price_low_to_high",
  "buy_it_now": true
}
```

2025-05-13 16:08:39,670 - DealFinderAI.Controller - INFO - Parsed search parameters: {'product_type': 'smartphone', 'keywords': ['iphone 16'], 'price_range': None, 'brands': ['Apple'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-13 16:08:39,670 - DealFinderAI.AmazonScraperAgent - INFO - Searching Amazon for: {'product_type': 'smartphone', 'keywords': ['iphone 16'], 'price_range': None, 'brands': ['Apple'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-13 16:08:39,670 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: 
            Optimize this search query for Amazon's search engine:
            
            "smartphone iphone 16 Apple"
            
            For Amazon searches, please:
            1. Focus on product-specific model numbers and identifiers if present
            2. Include key brand names (Amazon's A9 algorithm prioritizes brand matches)
            3. Remove generic words that may dilute results
            4. Add Amazon-specific terms that might improve results (like "Amazon's Choice" if looking for quality products)
            5. Optimize for Amazon's search algorithm which prioritizes exact matches and recent sales volume
            
            Return a JSON object with:
            - optimized_keywords: List of 3-5 optimized search terms (most important first)
            - amazon_category: Any Amazon department/category suggestion (Electronics, Books, etc.)
            - must_include_terms: Terms that MUST be in results
            - exclude_terms: Terms that should NOT be in results
            - amazon_search_filters: Any Amazon-specific filters to apply (Prime eligible, etc.)
            
            Format as JSON only with no explanation.
            
2025-05-13 16:08:41,114 - DealFinderAI.AmazonScraperAgent - INFO - Optimized search parameters: {'product_type': 'smartphone', 'keywords': ['iPhone 16', 'Apple iPhone 16', 'iPhone 16 Pro', 'iPhone 16 Pro Max'], 'price_range': None, 'brands': ['Apple'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True, 'category': 'Electronics', 'must_include_terms': ['Apple', 'iPhone 16'], 'exclude_terms': ['smartphone'], 'amazon_filters': ['Prime eligible', 'New']}
2025-05-13 16:08:41,114 - DealFinderAI.AmazonScraperAgent - INFO - Built optimized Amazon search query: Apple smartphone iPhone 16 Apple iPhone 16 iPhone 16 Pro
2025-05-13 16:08:41,115 - DealFinderAI.AmazonScraperAgent - INFO - Built Amazon query: Apple smartphone iPhone 16 Apple iPhone 16 iPhone 16 Pro
2025-05-13 16:08:41,115 - DealFinderAI.AmazonScraperAgent - INFO - Making Amazon search request with params: {'k': 'Apple smartphone iPhone 16 Apple iPhone 16 iPhone 16 Pro', 'ref': 'nb_sb_noss', 'crid': 1747166921, 'i': 'aps', 'search-alias': 'electronics', 's': 'price-asc-rank'}
2025-05-13 16:08:42,775 - DealFinderAI.AmazonScraperAgent - INFO - Found 26 product divs in search results
2025-05-13 16:08:42,780 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: LFGKMZ 2 Pack Tempered Glass Screen Protector for iPhone 16 Pro 6.3",[Military Grade Shatterproof],Auto Install,Ultra HD,9H Hardness,Zero Bubble at 3.99 USD
2025-05-13 16:08:42,780 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: LFGKMZ 2 Pack Tempered Glass Screen Protector for iPhone 16 Pro 6.3",[Military Grade Shatterproof],Auto Install,Ultra HD,9H Hardness,Zero Bubble at 3.99 USD
2025-05-13 16:08:42,784 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Screen Protector for iPhone 16 Pro Max, 2 Pack Clear 9H Tempered Glass Film Cover Sensor Protection Case Friendly for 6.9 inch at 3.99 USD
2025-05-13 16:08:42,784 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Screen Protector for iPhone 16 Pro Max, 2 Pack Clear 9H Tempered Glass Film Cover Sensor Protection Case Friendly for 6.9 inch at 3.99 USD
2025-05-13 16:08:42,788 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Portable Cell Phone Stand Holder for Desk, Foldable Pocket-Sized Mount, Adjustable Multi Angle Stand for iPhone 16 15 14 13 Pro Max, 4-10 iPad Smartphone, White at 3.99 USD
2025-05-13 16:08:42,788 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Portable Cell Phone Stand Holder for Desk, Foldable Pocket-Sized Mount, Adjustable Multi Angle Stand for iPhone 16 15 14 13 Pro Max, 4-10 iPad Smartphone, White at 3.99 USD
2025-05-13 16:08:42,792 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: 3X2 Pack Camera Lens Protector for iPhone 16 Pro Max,iPhone 16 Pro Tempered Glass Camera Lens Screen Protector Glitter Bling Camera Cover Metal Individual Ring for iPhone 16 Promax 5G,Glitter Gold at 4.99 USD
2025-05-13 16:08:42,792 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: 3X2 Pack Camera Lens Protector for iPhone 16 Pro Max,iPhone 16 Pro Tempered Glass Camera Lens Screen Protector Glitter Bling Camera Cover Metal Individual Ring for iPhone 16 Promax 5G,Glitter Gold at 4.99 USD
2025-05-13 16:08:42,796 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Compatible for iPhone 16 Pro/iPhone 16 Pro Max Camera Lens Protector Bling, 9H Tempered Glass Camera Cover Screen Protector Metal Individual Ring Protector Decoration Accessories, Black Glitter at 4.99 USD
2025-05-13 16:08:42,797 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Compatible for iPhone 16 Pro/iPhone 16 Pro Max Camera Lens Protector Bling, 9H Tempered Glass Camera Cover Screen Protector Metal Individual Ring Protector Decoration Accessories, Black Glitter at 4.99 USD
2025-05-13 16:08:42,801 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: 3 Pack 6 ft USB C Phone Charger Fast Charging Cable Compatible with iPhone 16 Pro/15 Pro/Plus/Max/iPad/MacBook and More at 4.99 USD
2025-05-13 16:08:42,801 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: 3 Pack 6 ft USB C Phone Charger Fast Charging Cable Compatible with iPhone 16 Pro/15 Pro/Plus/Max/iPad/MacBook and More at 4.99 USD
2025-05-13 16:08:42,805 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: [3 Pack] Privacy Screen Protector for iPhone 16 Pro, Anti Spy, Anti Scratch, 9H Hardness, Ultra Resistant, Bubble Free, Case Friendly, Easy Installation at 5.99 USD
2025-05-13 16:08:42,805 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: [3 Pack] Privacy Screen Protector for iPhone 16 Pro, Anti Spy, Anti Scratch, 9H Hardness, Ultra Resistant, Bubble Free, Case Friendly, Easy Installation at 5.99 USD
2025-05-13 16:08:42,808 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Camera Lens Protector for iPhone 16 Pro/Pro Max [3 Pack] Tempered Glass 9H Camera Protector, Case Friendly, Scratch Resistant Lens Shield, Night Shooting, Clear Cover  Clear at 5.99 USD
2025-05-13 16:08:42,808 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Camera Lens Protector for iPhone 16 Pro/Pro Max [3 Pack] Tempered Glass 9H Camera Protector, Case Friendly, Scratch Resistant Lens Shield, Night Shooting, Clear Cover  Clear at 5.99 USD
2025-05-13 16:08:42,812 - DealFinderAI.AmazonScraperAgent - WARNING - Incomplete data for ASIN B0DYQJJ5CX, falling back to Gemini extraction.
2025-05-13 16:08:42,812 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: 
            Extract detailed product information from this Amazon listing HTML:
            
            ```html
            <div class="sg-col-20-of-24 s-result-item s-asin sg-col-0-of-12 sg-col-16-of-20 sg-col s-widget-spacing-small sg-col-12-of-16" data-asin="B0DYQJJ5CX" data-component-type="s-search-result" data-index="14" data-uuid="c5924826-f6f4-4455-9893-50d2285d6247" id="c5924826-f6f4-4455-9893-50d2285d6247" role="listitem"><div class="sg-col-inner"><div cel_widget_id="MAIN-SEARCH_RESULTS-14" class="s-widget-container s-spacing-small s-widget-container-height-small celwidget slot=MAIN template=SEARCH_RESULTS widgetId=search-results_9" data-csa-c-item-id="amzn1.asin.1.B0DYQJJ5CX" data-csa-c-pos="9" data-csa-c-type="item" data-csa-op-log-render=""><span class="a-declarative" data-action="puis-card-container-declarative" data-csa-c-func-deps="aui-da-puis-card-container-declarative" data-csa-c-item-id="amzn1.asin.B0DYQJJ5CX" data-csa-c-owner="puis" data-csa-c-posx="9" data-csa-c-type="item" data-render-id="rzybsoex93oan1zlpg5drq82mu" data-version-id="vgrbnavj5iylf2a1plj09cp2jv"><div class="puis-card-container s-card-container s-overflow-hidden aok-relative puis-include-content-margin puis puis-vgrbnavj5iylf2a1plj09cp2jv s-latency-cf-section puis-card-border" data-cy="asin-faceout-container"><div class="a-section"><div class="puisg-row"><div class="puisg-col puisg-col-4-of-4 puisg-col-4-of-8 puisg-col-4-of-12 puisg-col-4-of-16 puisg-col-4-of-20 puisg-col-4-of-24 puis-list-col-left"><div class="puisg-col-inner"><div class="a-section a-spacing-none aok-relative puis-status-badge-container s-list-status-badge-container"></div><div class="s-product-image-container aok-relative s-text-center s-image-overlay-grey puis-image-overlay-grey s-padding-left-small s-padding-right-small puis-flex-expand-height puis puis-vgrbnavj5iylf2a1plj09cp2jv" data-cy="image-container"><div class="aok-relative"><span class="rush-component" data-component-type="s-product-image" data-render-id="rzybsoex93oan1zlpg5drq82mu" data-version-id="vgrbnavj5iylf2a1plj09cp2jv"><a class="a-link-normal s-no-outline" href="/Headphone-Samsung-Earphone-Microphone-Canceling/dp/B0DYQJJ5CX/ref=sr_1_9?crid=1747166921&amp;dib=eyJ2IjoiMSJ9.SXYwH-iQ-z4Rp5BCNSl4GO0CJkFj81cv2053eHyYGdTUBneJng5g-AE7pPtkhpzp0OUy6Kl32JsfHL3RIMSWvGMMXkc2qLNk0nVMqnu8FivKJy9m7ShuOKAD-IdbPQyDgsmH71SkuhlKYOPG90FmIXvsUsT-v9k4Icq3B1KBSJ6YUUYM-axjIUFGOGukeELhmhvdk1Q3WHgka2ffdKqD_BXTieoBZLQRS4BFyGAiGEL2O_WkQsurXzn4Y4jFPdKO2iugeFMSCHumxk4SEjYA0SXHL_mCJpuNJZiZ7pm67dA.pt2BNZ7hBAnsIxHZy0m98hnB1x4_8vPXZGCPPRi4GE0&amp;dib_tag=se&amp;keywords=Apple+smartphone+iPhone+16+Apple+iPhone+16+iPhone+16+Pro&amp;qid=1747166921&amp;s=electronics&amp;sr=1-9" tabindex="-1"><div class="a-section aok-relative s-image-fixed-height"><img alt="USB C Headphone for Samsung S23 FE S22 S21 S20 A53 A54 Wired Earbuds in-Ear Type C Earphone with Microphone Volume Control..." aria-hidden="true" class="s-image" data-image-index="9" data-image-latency="s-product-image" data-image-load="" data-image-source-density="1" src="https://m.media-amazon.com/images/I/51sWVcz65yL._AC_UY218_.jpg" srcset="https://m.media-amazon.com/images/I/51sWVcz65yL._AC_UY218_.jpg 1x, https://m.media-amazon.com/images/I/51sWVcz65yL._AC_UY327_FMwebp_QL65_.jpg 1.5x, https://m.media-amazon.com/images/I/51sWVcz65yL._AC_UY436_FMwebp_QL65_.jpg 2x, https://m.media-amazon.com/images/I/51sWVcz65yL._AC_UY545_FMwebp_QL65_.jpg 2.5x, https://m.media-amazon.com/images/I/51sWVcz65yL._AC_UY654_FMwebp_QL65_.jpg 3x"/></div></a></span></div></div></div></div><div class="puisg-col puisg-col-0-of-4 puisg-col-0-of-8 puisg-col-4-of-12 puisg-col-8-of-16 puisg-col-12-of-20 puisg-col-12-of-24 puis-list-col-right"><div class="puisg-col-inner"><div class="a-section a-spacing-small a-spacing-top-small"><div class="a-section a-spacing-none puis-padding-right-small s-title-instructions-style" data-cy="title-recipe"><a class="a-link-normal s-line-clamp-2 s-link-style a-text-normal" href="/Headphone-Samsung-Earphone-Microphone-Canceling/dp/B0DYQJJ5CX/ref=sr_1_9?crid=1747166921&amp;dib=eyJ2IjoiMSJ9.SXYwH-iQ-z4Rp5BCNSl4GO0CJkFj81cv2053eHyYGdTUBneJng5g-AE7pPtkhpzp0OUy6Kl32JsfHL3RIMSWvGMMXkc2qLNk0nVMqnu8FivKJy9m7ShuOKAD-IdbPQyDgsmH71SkuhlKYOPG90FmIXvsUsT-v9k4Icq3B1KBSJ6YUUYM-axjIUFGOGukeELhmhvdk1Q3WHgka2ffdKqD_BXTieoBZLQRS4BFyGAiGEL2O_WkQsurXzn4Y4jFPdKO2iugeFMSCHumxk4SEjYA0SXHL_mCJpuNJZiZ7pm67dA.pt2BNZ7hBAnsIxHZy0m98hnB1x4_8vPXZGCPPRi4GE0&amp;dib_tag=se&amp;keywords=Apple+smartphone+iPhone+16+Apple+iPhone+16+iPhone+16+Pro&amp;qid=1747166921&amp;s=electronics&amp;sr=1-9"><h2 aria-label="USB C Headphone for Samsung S23 FE S22 S21 S20 A53 A54 Wired Earbuds in-Ear Type C Earphone with Microphone Volume Control Bass Stereo Noise Canceling for iPhone 16 15 Pro Max Plus, Pixel 9 8 (White)" class="a-size-medium a-spacing-none a-color-base a-text-normal"><span>USB C Headphone for Samsung S23 FE S22 S21 S20 A53 A54 Wired Earbuds in-Ear Type C Earphone with Microphone Volume Control Bass Stereo Noise Canceling for iPhone 16 15 Pro Max Plus, Pixel 9 8 (White)</span></h2></a> </div><div class="puisg-row"><div class="puisg-col puisg-col-4-of-4 puisg-col-4-of-8 puisg-col-4-of-12 puisg-col-4-of-16 puisg-col-4-of-20 puisg-col-4-of-24"><div class="puisg-col-inner"><div class="a-section a-spacing-none a-spacing-top-micro puis-price-instructions-style" data-cy="price-recipe"><div class="a-row a-size-base a-color-base"><div class="a-row"></div><div class="a-row"></div></div></div><div class="a-section a-spacing-none a-spacing-top-micro" data-cy="delivery-recipe"><div class="a-row a-size-base a-color-secondary s-align-children-center"></div></div><div class="a-section a-spacing-none a-spacing-top-micro" data-cy="certification-recipe"><div class="a-section a-spacing-none s-align-children-center"><div class="a-section a-spacing-none s-pc-faceout-container"><div> <div class="s-align-children-center"><span class="a-declarative" data-action="s-pc-sidesheet-open" data-csa-c-func-deps="aui-da-s-pc-sidesheet-open" data-csa-c-type="widget" data-render-id="rzybsoex93oan1zlpg5drq82mu" data-s-pc-sidesheet-open='{"preloadDomId":"pc-side-sheet-B0DYQJJ5CX","popoverLabel":"Product certifications","interactLoggingMetricsList":["provenanceCertifications_desktop_sbe_badge"],"closeButtonLabel":"Close popup","dwellMetric":"provenanceCertifications_desktop_sbe_badge_t"}' data-version-id="vgrbnavj5iylf2a1plj09cp2jv"><a class="a-link-normal s-no-underline s-pc-badge s-align-children-center aok-block" data-cy="s-pc-faceout-badge" href="javascript:void(0)" role="button"><div class="a-section s-pc-attribute-pill-text s-margin-bottom-none s-margin-bottom-none aok-block s-pc-certification-faceout"><span class="faceout-image-view"></span><img alt="" class="s-image" height="18px" src="https://m.media-amazon.com/images/I/111mHoVK0kL._SS200_.png" width="18px"/> <span class="a-size-base a-color-base">Small Business</span><div class="s-margin-bottom-none s-pc-sidesheet-chevron aok-nowrap"><i class="a-icon a-icon-popover aok-align-center" role="presentation"></i></div></div></a></span></div></div></div></div><div class="a-section puis puis-vgrbnavj5iylf2a1plj09cp2jv aok-hidden" id="pc-side-sheet-B0DYQJJ5CX"><div class="a-section s-pc-container-side-sheet"><div class="s-align-children-center a-spacing-small"><div aria-level="2" class="s-align-children-center s-pc-certification" role="heading"><span class="faceout-image-view"></span><div alt="" class="a-image-wrapper a-lazy-loaded a-manually-loaded s-image" data-a-image-source="https://m.media-amazon.com/images/I/111mHoVK0kL._SS200_.png" style="height:24px;width:24px;"><noscript><img alt="" height="24px" src="https://m.media-amazon.com/images/I/111mHoVK0kL._SS200_.png" width="24px"/></noscript></div> <span class="a-size-medium-plus a-color-base a-text-bold">Small Business</span></div></div><div class="a-spacing-medium s-pc-link-container"><span class="a-size-base a-color-secondary">Shop products from small business brands sold in Amazons store. Discover more about the small businesses partnering with Amazon and Amazons commitment to empowering them.</span> <a class="a-size-base a-link-normal s-link-style" href="https://www.amazon.com/b/ref=s9_acss_bw_cg_sbp22c_1e1_w/ref=SBE_navbar_5?pf_rd_r=6W5X52VNZRB7GK1E1VX2&amp;pf_rd_p=56621c3d-cff4-45e1-9bf4-79bbeb8006fc&amp;pf_rd_m=ATVPDKIKX0DER&amp;pf_rd_s=merchandised-search-top-3&amp;pf_rd_t=30901&amp;pf_rd_i=17879387011&amp;node=18018208011">Learn more</a> </div></div></div></div><div class="a-section a-spacing-none a-spacing-top-mini"><div class="puis-see-details-content"><div data-csa-c-content-id="s-search-see-details-button" data-csa-c-device-env="WEB" data-csa-c-device-os="UNRECOGNIZED" data-csa-c-device-type="DESKTOP" data-csa-c-item-id="B0DYQJJ5CX" data-csa-c-item-type="asin" data-csa-c-type="action"><span class="a-button a-button-base"><span class="a-button-inner"><a class="a-button-text" href="/Headphone-Samsung-Earphone-Microphone-Canceling/dp/B0DYQJJ5CX/ref=sr_1_9_so_HEADPHONES?crid=1747166921&amp;dib=eyJ2IjoiMSJ9.SXYwH-iQ-z4Rp5BCNSl4GO0CJkFj81cv2053eHyYGdTUBneJng5g-AE7pPtkhpzp0OUy6Kl32JsfHL3RIMSWvGMMXkc2qLNk0nVMqnu8FivKJy9m7ShuOKAD-IdbPQyDgsmH71SkuhlKYOPG90FmIXvsUsT-v9k4Icq3B1KBSJ6YUUYM-axjIUFGOGukeELhmhvdk1Q3WHgka2ffdKqD_BXTieoBZLQRS4BFyGAiGEL2O_WkQsurXzn4Y4jFPdKO2iugeFMSCHumxk4SEjYA0SXHL_mCJpuNJZiZ7pm67dA.pt2BNZ7hBAnsIxHZy0m98hnB1x4_8vPXZGCPPRi4GE0&amp;dib_tag=se&amp;keywords=Apple+smartphone+iPhone+16+Apple+iPhone+16+iPhone+16+Pro&amp;qid=1747166921&amp;s=electronics&amp;sr=1-9">See options</a></span></span></div></div></div><div class="a-section a-spacing-none a-spacing-top-mini" data-cy="secondary-offer-recipe"><div class="a-row a-size-base a-color-secondary"><span class="a-size-base a-color-secondary">No featured offers available</span><br/><span class="a-color-base">$6.79</span><span class="a-letter-space"></span><span class="a-declarative" data-action="s-show-all-offers-display" data-csa-c-func-deps="aui-da-s-show-all-offers-display" data-csa-c-type="widget" data-render-id="rzybsoex93oan1zlpg5drq82mu" data-s-show-all-offers-display='{"assetMismatch":"Abandon","url":"/gp/aod/ajax/ref=sr_1_9_aod?asin=B0DYQJJ5CX&amp;pc=sp&amp;s=electronics&amp;keywords=Apple+smartphone+iPhone+16+Apple+iPhone+16+iPhone+16+Pro&amp;crid=1747166921&amp;dib_tag=se&amp;dib=eyJ2IjoiMSJ9.SXYwH-iQ-z4Rp5BCNSl4GO0CJkFj81cv2053eHyYGdTUBneJng5g-AE7pPtkhpzp0OUy6Kl32JsfHL3RIMSWvGMMXkc2qLNk0nVMqnu8FivKJy9m7ShuOKAD-IdbPQyDgsmH71SkuhlKYOPG90FmIXvsUsT-v9k4Icq3B1KBSJ6YUUYM-axjIUFGOGukeELhmhvdk1Q3WHgka2ffdKqD_BXTieoBZLQRS4BFyGAiGEL2O_WkQsurXzn4Y4jFPdKO2iugeFMSCHumxk4SEjYA0SXHL_mCJpuNJZiZ7pm67dA.pt2BNZ7hBAnsIxHZy0m98hnB1x4_8vPXZGCPPRi4GE0&amp;qid=1747166921&amp;sr=1-9","fallbackUrl":"/gp/offer-listing/B0DYQJJ5CX/ref=sr_1_9_olp?s=electronics&amp;keywords=Apple+smartphone+iPhone+16+Apple+iPhone+16+iPhone+16+Pro&amp;crid=1747166921&amp;dib_tag=se&amp;dib=eyJ2IjoiMSJ9.SXYwH-iQ-z4Rp5BCNSl4GO0CJkFj81cv2053eHyYGdTUBneJng5g-AE7pPtkhpzp0OUy6Kl32JsfHL3RIMSWvGMMXkc2qLNk0nVMqnu8FivKJy9m7ShuOKAD-IdbPQyDgsmH71SkuhlKYOPG90FmIXvsUsT-v9k4Icq3B1KBSJ6YUUYM-axjIUFGOGukeELhmhvdk1Q3WHgka2ffdKqD_BXTieoBZLQRS4BFyGAiGEL2O_WkQsurXzn4Y4jFPdKO2iugeFMSCHumxk4SEjYA0SXHL_mCJpuNJZiZ7pm67dA.pt2BNZ7hBAnsIxHZy0m98hnB1x4_8vPXZGCPPRi4GE0&amp;qid=1747166921&amp;sr=1-9"}' data-version-id="vgrbnavj5iylf2a1plj09cp2jv"><a class="a-link-normal s-link-style s-underline-text s-underline-link-text" href="/gp/offer-listing/B0DYQJJ5CX/ref=sr_1_9_olp?s=electronics&amp;keywords=Apple+smartphone+iPhone+16+Apple+iPhone+16+iPhone+16+Pro&amp;crid=1747166921&amp;dib_tag=se&amp;dib=eyJ2IjoiMSJ9.SXYwH-iQ-z4Rp5BCNSl4GO0CJkFj81cv2053eHyYGdTUBneJng5g-AE7pPtkhpzp0OUy6Kl32JsfHL3RIMSWvGMMXkc2qLNk0nVMqnu8FivKJy9m7ShuOKAD-IdbPQyDgsmH71SkuhlKYOPG90FmIXvsUsT-v9k4Icq3B1KBSJ6YUUYM-axjIUFGOGukeELhmhvdk1Q3WHgka2ffdKqD_BXTieoBZLQRS4BFyGAiGEL2O_WkQsurXzn4Y4jFPdKO2iugeFMSCHumxk4SEjYA0SXHL_mCJpuNJZiZ7pm67dA.pt2BNZ7hBAnsIxHZy0m98hnB1x4_8vPXZGCPPRi4GE0&amp;qid=1747166921&amp;sr=1-9">(1 new offer)</a></span><div class="a-section aok-hidden" id="all-offers-display"><div class="a-spinner-wrapper aok-hidden" id="all-offers-display-spinner"><span class="a-spinner a-spinner-medium"></span></div></div><span class="a-declarative" data-action="close-all-offers-display" data-csa-c-func-deps="aui-da-close-all-offers-display" data-csa-c-type="widget" data-render-id="rzybsoex93oan1zlpg5drq82mu" data-version-id="vgrbnavj5iylf2a1plj09cp2jv"><div class="a-section aok-hidden aod-darken-background" id="aod-background"></div></span></div></div><div class="a-section a-spacing-none a-spacing-top-mini s-color-swatch-container-list-view"><div class="a-section s-color-swatch-container s-color-swatch-container-left-aligned s-quick-view-text-align-start"><div data-csa-c-content-id="color-swatch-more-link" data-csa-c-interaction-events="click" data-csa-c-product-type="HEADPHONES" data-csa-c-swatch-more-url="/Headphone-Samsung-Earphone-Microphone-Canceling/dp/B0DYQJJ5CX/ref=cs_sr_dp?crid=1747166921&amp;dib=eyJ2IjoiMSJ9.SXYwH-iQ-z4Rp5BCNSl4GO0CJkFj81cv2053eHyYGdTUBneJng5g-AE7pPtkhpzp0OUy6Kl32JsfHL3RIMSWvGMMXkc2qLNk0nVMqnu8FivKJy9m7ShuOKAD-IdbPQyDgsmH71SkuhlKYOPG90FmIXvsUsT-v9k4Icq3B1KBSJ6YUUYM-axjIUFGOGukeELhmhvdk1Q3WHgka2ffdKqD_BXTieoBZLQRS4BFyGAiGEL2O_WkQsurXzn4Y4jFPdKO2iugeFMSCHumxk4SEjYA0SXHL_mCJpuNJZiZ7pm67dA.pt2BNZ7hBAnsIxHZy0m98hnB1x4_8vPXZGCPPRi4GE0&amp;dib_tag=se&amp;keywords=Apple+smartphone+iPhone+16+Apple+iPhone+16+iPhone+16+Pro&amp;qid=1747166921&amp;s=electronics&amp;sr=1-9" data-csa-c-swatch-remaining-count="+1 other color/pattern" data-csa-c-type="link"><a class="a-link-normal s-color-swatch-link puis-spacing-small s-hidden-in-quick-view" href="/Headphone-Samsung-Earphone-Microphone-Canceling/dp/B0DYQJJ5CX/ref=cs_sr_dp?crid=1747166921&amp;dib=eyJ2IjoiMSJ9.SXYwH-iQ-z4Rp5BCNSl4GO0CJkFj81cv2053eHyYGdTUBneJng5g-AE7pPtkhpzp0OUy6Kl32JsfHL3RIMSWvGMMXkc2qLNk0nVMqnu8FivKJy9m7ShuOKAD-IdbPQyDgsmH71SkuhlKYOPG90FmIXvsUsT-v9k4Icq3B1KBSJ6YUUYM-axjIUFGOGukeELhmhvdk1Q3WHgka2ffdKqD_BXTieoBZLQRS4BFyGAiGEL2O_WkQsurXzn4Y4jFPdKO2iugeFMSCHumxk4SEjYA0SXHL_mCJpuNJZiZ7pm67dA.pt2BNZ7hBAnsIxHZy0m98hnB1x4_8vPXZGCPPRi4GE0&amp;dib_tag=se&amp;keywords=Apple+smartphone+iPhone+16+Apple+iPhone+16+iPhone+16+Pro&amp;qid=1747166921&amp;s=electronics&amp;sr=1-9" role="link"><u>+1 other color/pattern</u></a></div></div></div></div></div><div class="puisg-col puisg-col-0-of-4 puisg-col-0-of-8 puisg-col-4-of-12 puisg-col-4-of-16 puisg-col-8-of-20 puisg-col-8-of-24"><div class="puisg-col-inner"></div></div></div><div class="puisg-row"></div></div></div></div></div></div></div></span></div></div></div>
            ```
            
            Extract:
            - title: Full product title
            - price: Numeric price value only (no currency symbol)
            - was_price: Original price before discount (if present)
            - currency: Currency code (e.g., USD)
            - url: Product URL
            - image_url: Main product image URL
            - rating: Star rating (0-5)
            - reviews: Number of reviews
            - asin: Amazon ASIN
            - is_prime: Boolean for Prime eligible
            - is_sponsored: Boolean for sponsored listing
            - is_amazon_choice: Boolean for Amazon's Choice
            - is_best_seller: Boolean for Best Seller
            - description: Any additional description text
            - delivery_info: Delivery/shipping information
            - out_of_stock: Boolean for out of stock status
            
            Return a clean JSON object with these fields. Use null for missing values.
            
2025-05-13 16:08:47,155 - DealFinderAI.AmazonScraperAgent - INFO - Gemini extracted: USB C Headphone for Samsung S23 FE S22 S21 S20 A53 A54 Wired Earbuds in-Ear Type C Earphone with Microphone Volume Control Bass Stereo Noise Canceling for iPhone 16 15 Pro Max Plus, Pixel 9 8 (White) at 6.79 USD
2025-05-13 16:08:47,155 - DealFinderAI.AmazonScraperAgent - INFO - Gemini used for product extraction
2025-05-13 16:08:47,156 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: USB C Headphone for Samsung S23 FE S22 S21 S20 A53 A54 Wired Earbuds in-Ear Type C Earphone with Microphone Volume Control Bass Stereo Noise Canceling for iPhone 16 15 Pro Max Plus, Pixel 9 8 (White) at 6.79 USD
2025-05-13 16:08:47,156 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: USB C Headphone for Samsung S23 FE S22 S21 S20 A53 A54 Wired Earbuds in-Ear Type C Earphone with Microphone Volume Control Bass Stereo Noise Canceling for iPhone 16 15 Pro Max Plus, Pixel 9 8 (White) at 6.79 USD
2025-05-13 16:08:47,163 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: MagSafe Wallet - Magnetic Wallet Cell Phone Card Holder for iPhone 16 Series, RFID Leather Wallet Stick on Series of iPhone 15 14 13 12 Plus/Pro/Pro max & Devices at 6.89 USD
2025-05-13 16:08:47,163 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: MagSafe Wallet - Magnetic Wallet Cell Phone Card Holder for iPhone 16 Series, RFID Leather Wallet Stick on Series of iPhone 15 14 13 12 Plus/Pro/Pro max & Devices at 6.89 USD
2025-05-13 16:08:47,998 - DealFinderAI.AmazonScraperAgent - INFO - Extracted 10 products from Amazon
2025-05-13 16:08:48,001 - DealFinderAI.AmazonScraperAgent - INFO - Applying relevance filtering to 10 products
2025-05-13 16:08:48,001 - DealFinderAI.AmazonScraperAgent - ERROR - Error in relevance filtering: 'NoneType' object has no attribute 'lower'
2025-05-13 16:08:48,002 - DealFinderAI.Controller - INFO - Amazon response content: {'source': 'Amazon', 'query': 'Apple smartphone iPhone 16 Apple iPhone 16 iPhone 16 Pro', 'products': [{'title': 'LFGKMZ 2 Pack Tempered Glass Screen Protector for iPhone 16 Pro 6.3",[Military Grade Shatterproof],Auto Install,Ultra HD,9H Hardness,Zero Bubble', 'price': 3.99, 'was_price': None, 'currency': 'USD', 'url': 'https://www.amazon.com/Tempered-Protector-Military-Shatterproof-Hardness/dp/B0DDQ5YXSY/ref=sr_1_1?crid=1747166921&dib=eyJ2IjoiMSJ9.SXYwH-iQ-z4Rp5BCNSl4GO0CJkFj81cv2053eHyYGdTUBneJng5g-AE7pPtkhpzp0OUy6Kl32JsfHL3RIMSWvGMMXkc2qLNk0nVMqnu8FivKJy9m7ShuOKAD-IdbPQyDgsmH71SkuhlKYOPG90FmIXvsUsT-v9k4Icq3B1KBSJ6YUUYM-axjIUFGOGukeELhmhvdk1Q3WHgka2ffdKqD_BXTieoBZLQRS4BFyGAiGEL2O_WkQsurXzn4Y4jFPdKO2iugeFMSCHumxk4SEjYA0SXHL_mCJpuNJZiZ7pm67dA.pt2BNZ7hBAnsIxHZy0m98hnB1x4_8vPXZGCPPRi4GE0&dib_tag=se&keywords=Apple+smartphone+iPhone+16+Apple+iPhone+16+iPhone+16+Pro&qid=1747166921&s=electronics&sr=1-1', 'image_url': 'https://m.media-amazon.com/images/I/71cLnDEe5zL._AC_UY218_.jpg', 'rating': 4.1, 'reviews': 29, 'is_sponsored': False, 'is_prime': False, 'is_amazon_choice': False, 'is_best_seller': False, 'asin': 'B0DDQ5YXSY', 'description': 'LFGKMZ 2 Pack Tempered Glass Screen Protector for iPhone 16 Pro 6.3",[Military Grade Shatterproof],Auto Install,Ultra HD,9H Hardness,Zero Bubble 4.1 out of 5 stars 29 Price, product page$3.99$3.99FREE delivery Sun, May 18 on $35 of items shipped by AmazonOr fastest delivery Tomorrow, May 14Add to cart+1 other color/pattern', 'delivery_info': '', 'out_of_stock': False, 'source': 'Amazon'}, {'title': 'Screen Protector for iPhone 16 Pro Max, 2 Pack Clear 9H Tempered Glass Film Cover Sensor Protection Case Friendly for 6.9 inch', 'price': 3.99, 'was_price': None, 'currency': 'USD', 'url': 'https://www.amazon.com/TENOC-Protector-Tempered-Protection-Friendly/dp/B0DBVMVC7F/ref=sr_1_2?crid=1747166921&dib=eyJ2IjoiMSJ9.SXYwH-iQ-z4Rp5BCNSl4GO0CJkFj81cv2053eHyYGdTUBneJng5g-AE7pPtkhpzp0OUy6Kl32JsfHL3RIMSWvGMMXkc2qLNk0nVMqnu8FivKJy9m7ShuOKAD-IdbPQyDgsmH71SkuhlKYOPG90FmIXvsUsT-v9k4Icq3B1KBSJ6YUUYM-axjIUFGOGukeELhmhvdk1Q3WHgka2ffdKqD_BXTieoBZLQRS4BFyGAiGEL2O_WkQsurXzn4Y4jFPdKO2iugeFMSCHumxk4SEjYA0SXHL_mCJpuNJZiZ7pm67dA.pt2BNZ7hBAnsIxHZy0m98hnB1x4_8vPXZGCPPRi4GE0&dib_tag=se&keywords=Apple+smartphone+iPhone+16+Apple+iPhone+16+iPhone+16+Pro&qid=1747166921&s=electronics&sr=1-2', 'image_url': 'https://m.media-amazon.com/images/I/617cgutvAZL._AC_UY218_.jpg', 'rating': 3.9, 'reviews': 27, 'is_sponsored': False, 'is_prime': False, 'is_amazon_choice': False, 'is_best_seller': False, 'asin': 'B0DBVMVC7F', 'description': 'TENOCScreen Protector for iPhone 16 Pro Max, 2 Pack Clear 9H Tempered Glass Film Cover Sensor Protection Case Friendly for 6.9 inch Options:4 sizes3.9 out of 5 stars 27 Price, product page$3.99$3.99FREE delivery Sun, May 18 on $35 of items shipped by AmazonOr fastest delivery Tomorrow, May 14Add to cart', 'delivery_info': '', 'out_of_stock': False, 'source': 'Amazon'}, {'title': 'Portable Cell Phone Stand Holder for Desk, Foldable Pocket-Sized Mount, Adjustable Multi Angle Stand for iPhone 16 15 14 13 Pro Max, 4-10 iPad Smartphone, White', 'price': 3.99, 'was_price': None, 'currency': 'USD', 'url': 'https://www.amazon.com/HZZADZXW-Portable-Pocket-Sized-Adjustable-Smartphone/dp/B0F5WD4KRF/ref=sr_1_3?crid=1747166921&dib=eyJ2IjoiMSJ9.SXYwH-iQ-z4Rp5BCNSl4GO0CJkFj81cv2053eHyYGdTUBneJng5g-AE7pPtkhpzp0OUy6Kl32JsfHL3RIMSWvGMMXkc2qLNk0nVMqnu8FivKJy9m7ShuOKAD-IdbPQyDgsmH71SkuhlKYOPG90FmIXvsUsT-v9k4Icq3B1KBSJ6YUUYM-axjIUFGOGukeELhmhvdk1Q3WHgka2ffdKqD_BXTieoBZLQRS4BFyGAiGEL2O_WkQsurXzn4Y4jFPdKO2iugeFMSCHumxk4SEjYA0SXHL_mCJpuNJZiZ7pm67dA.pt2BNZ7hBAnsIxHZy0m98hnB1x4_8vPXZGCPPRi4GE0&dib_tag=se&keywords=Apple+smartphone+iPhone+16+Apple+iPhone+16+iPhone+16+Pro&qid=1747166921&s=electronics&sr=1-3', 'image_url': 'https://m.media-amazon.com/images/I/61Jyz9z5Q-L._AC_UY218_.jpg', 'rating': 5.0, 'reviews': 4, 'is_sponsored': False, 'is_prime': False, 'is_amazon_choice': False, 'is_best_seller': False, 'asin': 'B0F5WD4KRF', 'description': 'Portable Cell Phone Stand Holder for Desk, Foldable Pocket-Sized Mount, Adjustable Multi Angle Stand for iPhone 16 15 14 13 Pro Max, 4-10 iPad Smartphone, White 5.0 out of 5 stars 4 Price, product page$3.99$3.99FREE delivery Jun 7 - 27 on $35 of items shipped by AmazonOr fastest delivery Jun 7 - 25Add to cart+7 other colors/patterns', 'delivery_info': '', 'out_of_stock': False, 'source': 'Amazon'}, {'title': '3X2 Pack Camera Lens Protector for iPhone 16 Pro Max,iPhone 16 Pro Tempered Glass Camera Lens Screen Protector Glitter Bling Camera Cover Metal Individual Ring for iPhone 16 Promax 5G,Glitter Gold', 'price': 4.99, 'was_price': 5.99, 'currency': 'USD', 'url': 'https://www.amazon.com/Camera-Protector-Tempered-Glitter-Individual/dp/B0DJ7HLQ69/ref=sr_1_4?crid=1747166921&dib=eyJ2IjoiMSJ9.SXYwH-iQ-z4Rp5BCNSl4GO0CJkFj81cv2053eHyYGdTUBneJng5g-AE7pPtkhpzp0OUy6Kl32JsfHL3RIMSWvGMMXkc2qLNk0nVMqnu8FivKJy9m7ShuOKAD-IdbPQyDgsmH71SkuhlKYOPG90FmIXvsUsT-v9k4Icq3B1KBSJ6YUUYM-axjIUFGOGukeELhmhvdk1Q3WHgka2ffdKqD_BXTieoBZLQRS4BFyGAiGEL2O_WkQsurXzn4Y4jFPdKO2iugeFMSCHumxk4SEjYA0SXHL_mCJpuNJZiZ7pm67dA.pt2BNZ7hBAnsIxHZy0m98hnB1x4_8vPXZGCPPRi4GE0&dib_tag=se&keywords=Apple+smartphone+iPhone+16+Apple+iPhone+16+iPhone+16+Pro&qid=1747166921&s=electronics&sr=1-4', 'image_url': 'https://m.media-amazon.com/images/I/71HV0Z0hZ5L._AC_UY218_.jpg', 'rating': 4.4, 'reviews': 32, 'is_sponsored': False, 'is_prime': False, 'is_amazon_choice': False, 'is_best_seller': False, 'asin': 'B0DJ7HLQ69', 'description': '3X2 Pack Camera Lens Protector for iPhone 16 Pro Max,iPhone 16 Pro Tempered Glass Camera Lens Screen Protector Glitter Bling Camera Cover Metal Individual Ring for iPhone 16 Promax 5G,Glitter Gold Options:3 sizes4.4 out of 5 stars 32 100+ bought in past monthSave 17% Price, product page$4.99$4.99 Typical: $5.99Typical: $5.99$5.99Lowest price in 30 daysFREE delivery Sun, May 18 on $35 of items shipped by AmazonOr fastest delivery Tomorrow, May 14Add to cart+7 other colors/patterns', 'delivery_info': '100+ bought in past month', 'out_of_stock': False, 'source': 'Amazon'}, {'title': 'Compatible for iPhone 16 Pro/iPhone 16 Pro Max Camera Lens Protector Bling, 9H Tempered Glass Camera Cover Screen Protector Metal Individual Ring Protector Decoration Accessories, Black Glitter', 'price': 4.99, 'was_price': 9.99, 'currency': 'USD', 'url': 'https://www.amazon.com/Misea-Compatible-Individual-Decoration-Accessories/dp/B0DBDP5Z8D/ref=sr_1_5?crid=1747166921&dib=eyJ2IjoiMSJ9.SXYwH-iQ-z4Rp5BCNSl4GO0CJkFj81cv2053eHyYGdTUBneJng5g-AE7pPtkhpzp0OUy6Kl32JsfHL3RIMSWvGMMXkc2qLNk0nVMqnu8FivKJy9m7ShuOKAD-IdbPQyDgsmH71SkuhlKYOPG90FmIXvsUsT-v9k4Icq3B1KBSJ6YUUYM-axjIUFGOGukeELhmhvdk1Q3WHgka2ffdKqD_BXTieoBZLQRS4BFyGAiGEL2O_WkQsurXzn4Y4jFPdKO2iugeFMSCHumxk4SEjYA0SXHL_mCJpuNJZiZ7pm67dA.pt2BNZ7hBAnsIxHZy0m98hnB1x4_8vPXZGCPPRi4GE0&dib_tag=se&keywords=Apple+smartphone+iPhone+16+Apple+iPhone+16+iPhone+16+Pro&qid=1747166921&s=electronics&sr=1-5', 'image_url': 'https://m.media-amazon.com/images/I/71YzAun3p+L._AC_UY218_.jpg', 'rating': 4.4, 'reviews': 678, 'is_sponsored': False, 'is_prime': False, 'is_amazon_choice': False, 'is_best_seller': False, 'asin': 'B0DBDP5Z8D', 'description': 'MiseaCompatible for iPhone 16 Pro/iPhone 16 Pro Max Camera Lens Protector Bling, 9H Tempered Glass Camera Cover Screen Protector Metal Individual Ring Protector Decoration Accessories, Black Glitter Options:3 sizes4.4 out of 5 stars 678 Limited time deal Price, product page$4.99$4.99 Typical: $9.99Typical: $9.99$9.99FREE delivery Sun, May 18 on $35 of items shipped by AmazonOr fastest delivery Tomorrow, May 14Add to cart+17 other colors/patterns', 'delivery_info': 'Typical:', 'out_of_stock': False, 'source': 'Amazon'}]}
2025-05-13 16:08:48,002 - DealFinderAI.Controller - INFO - Amazon returned 5 products
2025-05-13 16:08:48,002 - DealFinderAI.WalmartScraperAgent - INFO - Searching Walmart for: {'product_type': 'smartphone', 'keywords': ['iphone 16'], 'price_range': None, 'brands': ['Apple'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-13 16:08:48,002 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: 
            Optimize this search query for Walmart's search engine:
            
            "smartphone iphone 16 Apple"
            
            For Walmart searches, please:
            1. Focus on model numbers and specific identifiers if present
            2. Include key brand names (Walmart's search works well with brand names)
            3. Remove generic words that may dilute results
            4. Add Walmart-specific terms that might improve results (like "Rollback" if looking for deals)
            5. Prioritize precise product names and specifications
            
            Return a JSON object with:
            - optimized_keywords: List of 3-5 optimized search terms (most important first)
            - department_hint: Any Walmart department suggestion (Electronics, Home, etc.)
            - must_include_terms: Terms that MUST be in results
            - exclude_terms: Terms that should NOT be in results
            - walmart_specific_filters: Any Walmart-specific filters to apply
            
            Format as JSON only with no explanation.
            
2025-05-13 16:08:49,733 - DealFinderAI.WalmartScraperAgent - INFO - Optimized search parameters: {'product_type': 'smartphone', 'keywords': ['iPhone 16', 'Apple iPhone 16', 'iPhone 16 Walmart'], 'price_range': None, 'brands': ['Apple'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True, 'department': 'Electronics', 'must_include_terms': ['Apple', 'iPhone 16'], 'exclude_terms': ['smartphone'], 'walmart_filters': ['Rollback', 'Deals']}
2025-05-13 16:08:49,733 - DealFinderAI.WalmartScraperAgent - INFO - Built optimized Walmart search query: Apple smartphone iPhone 16 Apple iPhone 16 iPhone 16 Walmart
2025-05-13 16:08:49,734 - DealFinderAI.WalmartScraperAgent - INFO - Built Walmart query: Apple smartphone iPhone 16 Apple iPhone 16 iPhone 16 Walmart
2025-05-13 16:08:49,734 - DealFinderAI.WalmartScraperAgent - INFO - Making Walmart search request with params: {'q': 'Apple smartphone iPhone 16 Apple iPhone 16 iPhone 16 Walmart Electronics', 'page': 1, 'affinityOverride': 'default', 'sort': 'price_low'}
2025-05-13 16:08:53,425 - DealFinderAI.WalmartScraperAgent - INFO - Extracted 0 products from JSON data
2025-05-13 16:08:53,425 - DealFinderAI.WalmartScraperAgent - INFO - JSON extraction failed, falling back to HTML extraction
2025-05-13 16:08:53,428 - DealFinderAI.WalmartScraperAgent - INFO - Found 9 product divs in HTML
2025-05-13 16:08:55,802 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 16:08:55,802 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: AT&T iPhone 16e 128GB Black. Apple Intelligence. at 649.0 USD
2025-05-13 16:08:58,513 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 16:08:58,514 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: AT&T iPhone 16 128GB Ultramarine. Apple Intelligence. at 879.0 USD
2025-05-13 16:09:00,555 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 16:09:00,556 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Verizon iPhone 16 128GB Ultramarine. Apple Intelligence. at 879.0 USD
2025-05-13 16:09:03,310 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 16:09:03,311 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Straight Talk Apple iPhone 16, 128GB, White - Prepaid Smartphone [Locked to Straight Talk] at 829.0 USD
2025-05-13 16:09:05,965 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 16:09:05,965 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Straight Talk Apple iPhone 16, 128GB, Teal - Prepaid Smartphone [Locked to Straight Talk] at 829.0 USD
2025-05-13 16:09:08,631 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 16:09:08,632 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Straight Talk Apple iPhone 16, 128GB, Blue - Prepaid Smartphone [Locked to Straight Talk] at 829.0 USD
2025-05-13 16:09:10,831 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 16:09:10,831 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Straight Talk Apple iPhone 16, 128GB, Pink - Prepaid Smartphone [Locked to Straight Talk} at 829.0 USD
2025-05-13 16:09:13,462 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 16:09:13,463 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Straight Talk Apple iPhone 16, 256GB, White - Prepaid Smartphone [Locked to Straight Talk] at 929.0 USD
2025-05-13 16:09:15,588 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 16:09:15,589 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Straight Talk Apple iPhone 16, 512GB, Black - Prepaid Smartphone [Locked to Straight Talk] at 1129.0 USD
2025-05-13 16:09:15,589 - DealFinderAI.WalmartScraperAgent - INFO - Extracted 9 products from HTML
2025-05-13 16:09:15,589 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: AT&T iPhone 16e 128GB Black. Apple Intelligence. at 649.0 USD
2025-05-13 16:09:15,589 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: AT&T iPhone 16 128GB Ultramarine. Apple Intelligence. at 879.0 USD
2025-05-13 16:09:15,589 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Verizon iPhone 16 128GB Ultramarine. Apple Intelligence. at 879.0 USD
2025-05-13 16:09:15,589 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Straight Talk Apple iPhone 16, 128GB, White - Prepaid Smartphone [Locked to Straight Talk] at 829.0 USD
2025-05-13 16:09:15,589 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Straight Talk Apple iPhone 16, 128GB, Teal - Prepaid Smartphone [Locked to Straight Talk] at 829.0 USD
2025-05-13 16:09:15,589 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Straight Talk Apple iPhone 16, 128GB, Blue - Prepaid Smartphone [Locked to Straight Talk] at 829.0 USD
2025-05-13 16:09:15,589 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Straight Talk Apple iPhone 16, 128GB, Pink - Prepaid Smartphone [Locked to Straight Talk} at 829.0 USD
2025-05-13 16:09:15,589 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Straight Talk Apple iPhone 16, 256GB, White - Prepaid Smartphone [Locked to Straight Talk] at 929.0 USD
2025-05-13 16:09:15,589 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Straight Talk Apple iPhone 16, 512GB, Black - Prepaid Smartphone [Locked to Straight Talk] at 1129.0 USD
2025-05-13 16:09:16,539 - DealFinderAI.WalmartScraperAgent - INFO - Extracted 9 products from Walmart
2025-05-13 16:09:16,542 - DealFinderAI.WalmartScraperAgent - INFO - Applying relevance filtering to 9 products
2025-05-13 16:09:16,542 - DealFinderAI.WalmartScraperAgent - INFO - Filtered to 5 most relevant products
2025-05-13 16:09:16,542 - DealFinderAI.Controller - INFO - Walmart returned 5 products
2025-05-13 16:09:16,543 - DealFinderAI.EbayScraperAgent - INFO - Searching eBay for: {'product_type': 'smartphone', 'keywords': ['iphone 16'], 'price_range': None, 'brands': ['Apple'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-13 16:09:16,543 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: 
            Optimize this search query for eBay's search engine:
            
            "smartphone iphone 16 Apple"
            
            For eBay searches, please:
            1. Focus on exact model numbers and specific part identifiers if present
            2. Include key brand names
            3. Remove generic words that may dilute results
            4. Add eBay-specific terms that might improve results
            5. Optimize for finding the most relevant listings
            
            Return a JSON object with:
            - optimized_keywords: List of 3-5 optimized search terms (most important first)
            - category_hints: Any eBay category suggestions
            - must_include_terms: Terms that MUST be in results
            - exclude_terms: Terms that should NOT be in results
            
            Format as JSON only with no explanation.
            
2025-05-13 16:09:17,657 - DealFinderAI.EbayScraperAgent - INFO - Optimized search parameters: {'product_type': 'smartphone', 'keywords': ['iPhone 16', 'Apple iPhone 16', 'iPhone 16 Pro', 'iPhone 16 Pro Max'], 'price_range': None, 'brands': ['Apple'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True, 'category_hints': ['Cell Phones & Smartphones'], 'must_include_terms': ['Apple', 'iPhone'], 'exclude_terms': ['broken', 'repair', 'parts', 'for parts']}
2025-05-13 16:09:17,657 - DealFinderAI.EbayScraperAgent - INFO - Built optimized eBay search query: smartphone Apple iPhone 16 Apple iPhone 16 iPhone 16 Pro
2025-05-13 16:09:17,657 - DealFinderAI.EbayScraperAgent - INFO - Built eBay query: smartphone Apple iPhone 16 Apple iPhone 16 iPhone 16 Pro
2025-05-13 16:09:17,657 - DealFinderAI.EbayScraperAgent - INFO - Making eBay search request with params: {'_nkw': 'smartphone Apple iPhone 16 Apple iPhone 16 iPhone 16 Pro Cell Phones & Smartphones', '_sacat': '0', '_ipg': '96', '_sop': '15', 'LH_BIN': '1'}
2025-05-13 16:09:19,901 - DealFinderAI.EbayScraperAgent - INFO - Found 132 product listings
2025-05-13 16:09:19,902 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 14 Pro - 512 GB - Purple (Xfinity) Smartphone at 284.0 USD
2025-05-13 16:09:19,902 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 14 Pro - 512 GB - Purple (Xfinity) Smartphone at 284.0 USD
2025-05-13 16:09:19,903 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 14 Pro Max - 128 GB - Black (U.S. Cellular) Smartphone at 299.0 USD
2025-05-13 16:09:19,904 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 14 Pro Max - 128 GB - Black (U.S. Cellular) Smartphone at 299.0 USD
2025-05-13 16:09:19,905 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 14 Pro 256GB White / Silver AT&T at 349.99 USD
2025-05-13 16:09:19,905 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 14 Pro 256GB White / Silver AT&T at 349.99 USD
2025-05-13 16:09:19,906 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 14 Pro - 128 GB - Space Black (T-Mobile) Smartphone at 364.0 USD
2025-05-13 16:09:19,906 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 14 Pro - 128 GB - Space Black (T-Mobile) Smartphone at 364.0 USD
2025-05-13 16:09:19,907 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 16 Pro 128GB Unlocked 1-Year Warranty Smartphone Excellent at 841.99 USD
2025-05-13 16:09:19,907 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 16 Pro 128GB Unlocked 1-Year Warranty Smartphone Excellent at 841.99 USD
2025-05-13 16:09:19,908 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 16 Pro 128GB Factory Unlocked Open Box Mint Smartphone A3083 at 857.45 USD
2025-05-13 16:09:19,908 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 16 Pro 128GB Factory Unlocked Open Box Mint Smartphone A3083 at 857.45 USD
2025-05-13 16:09:19,908 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 16 Pro Unlocked (GSM + CDMA) Smartphone at 864.39 USD
2025-05-13 16:09:19,908 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 16 Pro Unlocked (GSM + CDMA) Smartphone at 864.39 USD
2025-05-13 16:09:19,909 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: APPLE IPHONE 16 PRO - 128GB - BLACK TITANIUM (FACTORY UNLOCKED)  SEALED at 938.95 USD
2025-05-13 16:09:19,909 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: APPLE IPHONE 16 PRO - 128GB - BLACK TITANIUM (FACTORY UNLOCKED)  SEALED at 938.95 USD
2025-05-13 16:09:20,756 - DealFinderAI.EbayScraperAgent - INFO - Extracted 8 products from eBay
2025-05-13 16:09:20,756 - DealFinderAI.EbayScraperAgent - INFO - Applying relevance filtering to 8 products
2025-05-13 16:09:20,756 - DealFinderAI.EbayScraperAgent - INFO - Filtered to 5 most relevant products
2025-05-13 16:09:20,756 - DealFinderAI.Controller - INFO - eBay returned 5 products
2025-05-13 16:09:20,756 - DealFinderAI.Controller - INFO - Total products before aggregation: 15
2025-05-13 16:09:20,756 - DealFinderAI.ResultsAggregatorAgent - INFO - Aggregating results for query: find me best deal on iphone 16
2025-05-13 16:09:20,756 - DealFinderAI.ResultsAggregatorAgent - INFO - Found 3 results from various sources
2025-05-13 16:09:20,756 - DealFinderAI.ResultsAggregatorAgent - INFO - Source Amazon: 5 products
2025-05-13 16:09:20,756 - DealFinderAI.ResultsAggregatorAgent - INFO - Source Walmart: 5 products
2025-05-13 16:09:20,756 - DealFinderAI.ResultsAggregatorAgent - INFO - Source eBay: 5 products
2025-05-13 16:09:20,756 - DealFinderAI.ResultsAggregatorAgent - INFO - Total products extracted: 15
2025-05-13 16:09:20,756 - DealFinderAI.ResultsAggregatorAgent - INFO - Ranking 15 products
2025-05-13 16:09:20,757 - DealFinderAI.ResultsAggregatorAgent - INFO - Sorted 15 products by score
2025-05-13 16:09:20,757 - DealFinderAI.ResultsAggregatorAgent - INFO - Returning 10 diversified products
2025-05-13 16:09:20,757 - DealFinderAI.ResultsAggregatorAgent - INFO - Products after ranking: 10
2025-05-13 16:09:20,757 - DealFinderAI.ResultsAggregatorAgent - INFO - Final products: 10
2025-05-13 16:09:20,757 - DealFinderAI.Controller - INFO - Products after aggregation: 10
2025-05-13 16:09:20,757 - DealFinderAI.ProductComparisonAgent - INFO - Comparing products for query: find me best deal on iphone 16
2025-05-13 16:09:20,757 - DealFinderAI.ProductComparisonAgent - INFO - Found 10 products to compare
2025-05-13 16:09:20,757 - DealFinderAI.ProductComparisonAgent - INFO - Grouping 10 products
2025-05-13 16:09:20,757 - DealFinderAI.ProductComparisonAgent - INFO - Created 0 product groups
2025-05-13 16:09:20,757 - DealFinderAI.ChatMemoryAgent - INFO - Storing context for conversation session_20250513160824_339e4c49
2025-05-13 16:09:20,757 - DealFinderAI.ChatMemoryAgent - INFO - Storing 10 products for conversation session_20250513160824_339e4c49
2025-05-13 16:09:20,757 - DealFinderAI.PresentationAgent - INFO - Preparing presentation for 10 products
2025-05-13 16:09:20,757 - DealFinderAI.PresentationAgent - INFO - Formatting 10 products for display
2025-05-13 16:09:20,757 - DealFinderAI.PresentationAgent - INFO - Product 1: Compatible for iPhone 16 Pro/iPhone 16 Pro Max Camera Lens Protector Bling, 9H Tempered Glass Camera Cover Screen Protector Metal Individual Ring Protector Decoration Accessories, Black Glitter - Price: $4.99 - Source: Amazon
2025-05-13 16:09:20,757 - DealFinderAI.PresentationAgent - INFO - Product 2: APPLE IPHONE 16 PRO - 128GB - BLACK TITANIUM (FACTORY UNLOCKED)  SEALED - Price: $938.95 - Source: eBay
2025-05-13 16:09:20,757 - DealFinderAI.PresentationAgent - INFO - Product 3: AT&T iPhone 16e 128GB Black. Apple Intelligence. - Price: $649.00 - Source: Walmart
2025-05-13 16:09:20,757 - DealFinderAI.PresentationAgent - INFO - Product 4: Portable Cell Phone Stand Holder for Desk, Foldable Pocket-Sized Mount, Adjustable Multi Angle Stand for iPhone 16 15 14 13 Pro Max, 4-10 iPad Smartphone, White - Price: $3.99 - Source: Amazon
2025-05-13 16:09:20,757 - DealFinderAI.PresentationAgent - INFO - Product 5: 3X2 Pack Camera Lens Protector for iPhone 16 Pro Max,iPhone 16 Pro Tempered Glass Camera Lens Screen Protector Glitter Bling Camera Cover Metal Individual Ring for iPhone 16 Promax 5G,Glitter Gold - Price: $4.99 - Source: Amazon
2025-05-13 16:09:20,757 - DealFinderAI.PresentationAgent - INFO - Product 6: LFGKMZ 2 Pack Tempered Glass Screen Protector for iPhone 16 Pro 6.3",[Military Grade Shatterproof],Auto Install,Ultra HD,9H Hardness,Zero Bubble - Price: $3.99 - Source: Amazon
2025-05-13 16:09:20,757 - DealFinderAI.PresentationAgent - INFO - Product 7: Screen Protector for iPhone 16 Pro Max, 2 Pack Clear 9H Tempered Glass Film Cover Sensor Protection Case Friendly for 6.9 inch - Price: $3.99 - Source: Amazon
2025-05-13 16:09:20,757 - DealFinderAI.PresentationAgent - INFO - Product 8: Apple iPhone 16 Pro 128GB Unlocked 1-Year Warranty Smartphone Excellent - Price: $841.99 - Source: eBay
2025-05-13 16:09:20,757 - DealFinderAI.PresentationAgent - INFO - Product 9: Apple iPhone 16 Pro 128GB Factory Unlocked Open Box Mint Smartphone A3083 - Price: $857.45 - Source: eBay
2025-05-13 16:09:20,757 - DealFinderAI.PresentationAgent - INFO - Product 10: Apple iPhone 16 Pro Unlocked (GSM + CDMA) Smartphone - Price: $864.39 - Source: eBay
2025-05-13 16:09:20,758 - DealFinderAI.ChatMemoryAgent - INFO - Storing context for conversation session_20250513160824_339e4c49
2025-05-13 16:09:20,758 - DealFinderAI.ChatMemoryAgent - INFO - Storing 10 products for conversation session_20250513160824_339e4c49
2025-05-13 16:09:20,758 - DealFinderAI.Controller - INFO - Successfully stored search results in memory
2025-05-13 16:12:52,541 - DealFinderAI.Controller - INFO - Processing user query: find me best deal on sony xm4 series
2025-05-13 16:12:52,542 - DealFinderAI.ChatMemoryAgent - INFO - Analyzing query: 'find me best deal on sony xm4 series' for conversation session_20250513160824_339e4c49
2025-05-13 16:12:52,542 - DealFinderAI.ChatMemoryAgent - INFO - Found 10 products in memory
2025-05-13 16:12:52,543 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: 
        You are an AI helping to analyze if a user's query is a follow-up question about previously shown products, or if it's a completely new search.

        Previous products shown to the user:
        Product 1: Compatible for iPhone 16 Pro/iPhone 16 Pro Max Camera Lens Protector Bling, 9H Tempered Glass Camera Cover Screen Protector Metal Individual Ring Protector Decoration Accessories, Black Glitter
Product 2: APPLE IPHONE 16 PRO - 128GB - BLACK TITANIUM (FACTORY UNLOCKED)  SEALED
Product 3: AT&T iPhone 16e 128GB Black. Apple Intelligence.
Product 4: Portable Cell Phone Stand Holder for Desk, Foldable Pocket-Sized Mount, Adjustable Multi Angle Stand for iPhone 16 15 14 13 Pro Max, 4-10 iPad Smartphone, White
Product 5: 3X2 Pack Camera Lens Protector for iPhone 16 Pro Max,iPhone 16 Pro Tempered Glass Camera Lens Screen Protector Glitter Bling Camera Cover Metal Individual Ring for iPhone 16 Promax 5G,Glitter Gold

        User's new query: "find me best deal on sony xm4 series"

        Please analyze if this query is:
        1. A follow-up question about the previously shown products (e.g., asking for more details, comparing them, etc.)
        2. A completely new search (e.g., asking about different products, starting a new topic)

        Return your analysis in JSON format:
        {
            "is_new_search": true/false,
            "is_follow_up": true/false,
            "reasoning": "brief explanation of your decision",
            "referenced_product_indices": [list of 0-based indices of referenced products, if any]
        }
        
        Only return the JSON, with no additional text.
        
2025-05-13 16:12:53,882 - DealFinderAI.Controller - INFO - Analyze response: {'is_follow_up': False, 'focused_product': None, 'referenced_products': [], 'products': []}
2025-05-13 16:12:53,883 - DealFinderAI.Controller - INFO - Is follow-up? False
2025-05-13 16:12:53,883 - DealFinderAI.Controller - INFO - Referenced products: 0
2025-05-13 16:12:53,883 - DealFinderAI.Controller - INFO - Processing as new search query
2025-05-13 16:12:53,883 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: find me best deal on sony xm4 series
2025-05-13 16:12:54,687 - DealFinderAI.GeminiAgent - WARNING - Failed to parse Gemini response as JSON: ```json
{
  "product_type": "headphones",
  "keywords": ["sony", "xm4", "series"],
  "price_range": null,
  "brands": ["sony"],
  "features": [],
  "sorting_preference": "price_low_to_high",
  "buy_it_now": true
}
```

2025-05-13 16:12:54,687 - DealFinderAI.Controller - INFO - Parsed search parameters: {'product_type': 'headphones', 'keywords': ['sony', 'xm4', 'series'], 'price_range': None, 'brands': ['sony'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-13 16:12:54,687 - DealFinderAI.AmazonScraperAgent - INFO - Searching Amazon for: {'product_type': 'headphones', 'keywords': ['sony', 'xm4', 'series'], 'price_range': None, 'brands': ['sony'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-13 16:12:54,688 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: 
            Optimize this search query for Amazon's search engine:
            
            "headphones sony xm4 series sony"
            
            For Amazon searches, please:
            1. Focus on product-specific model numbers and identifiers if present
            2. Include key brand names (Amazon's A9 algorithm prioritizes brand matches)
            3. Remove generic words that may dilute results
            4. Add Amazon-specific terms that might improve results (like "Amazon's Choice" if looking for quality products)
            5. Optimize for Amazon's search algorithm which prioritizes exact matches and recent sales volume
            
            Return a JSON object with:
            - optimized_keywords: List of 3-5 optimized search terms (most important first)
            - amazon_category: Any Amazon department/category suggestion (Electronics, Books, etc.)
            - must_include_terms: Terms that MUST be in results
            - exclude_terms: Terms that should NOT be in results
            - amazon_search_filters: Any Amazon-specific filters to apply (Prime eligible, etc.)
            
            Format as JSON only with no explanation.
            
2025-05-13 16:12:56,052 - DealFinderAI.AmazonScraperAgent - INFO - Optimized search parameters: {'product_type': 'headphones', 'keywords': ['Sony WH-1000XM4', 'Sony XM4 headphones', 'Sony WH-1000XM4 headphones'], 'price_range': None, 'brands': ['sony'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True, 'category': 'Electronics', 'must_include_terms': ['Sony', 'WH-1000XM4'], 'exclude_terms': ['series'], 'amazon_filters': ['Prime Eligible', 'New']}
2025-05-13 16:12:56,053 - DealFinderAI.AmazonScraperAgent - INFO - Built optimized Amazon search query: sony headphones Sony WH-1000XM4 Sony XM4 headphones Sony WH-1000XM4 headphones
2025-05-13 16:12:56,053 - DealFinderAI.AmazonScraperAgent - INFO - Built Amazon query: sony headphones Sony WH-1000XM4 Sony XM4 headphones Sony WH-1000XM4 headphones
2025-05-13 16:12:56,053 - DealFinderAI.AmazonScraperAgent - INFO - Making Amazon search request with params: {'k': 'sony headphones Sony WH-1000XM4 Sony XM4 headphones Sony WH-1000XM4 headphones', 'ref': 'nb_sb_noss', 'crid': 1747167176, 'i': 'aps', 'search-alias': 'electronics', 's': 'price-asc-rank'}
2025-05-13 16:12:57,893 - DealFinderAI.AmazonScraperAgent - INFO - Found 26 product divs in search results
2025-05-13 16:12:57,897 - DealFinderAI.AmazonScraperAgent - WARNING - Incomplete data for ASIN B0BVPPB88D, falling back to Gemini extraction.
2025-05-13 16:12:57,898 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: 
            Extract detailed product information from this Amazon listing HTML:
            
            ```html
            <div class="sg-col-20-of-24 s-result-item s-asin sg-col-0-of-12 sg-col-16-of-20 sg-col s-widget-spacing-small sg-col-12-of-16" data-asin="B0BVPPB88D" data-component-type="s-search-result" data-index="3" data-uuid="60d0946a-678a-47a5-abcf-50edd9c59e26" id="60d0946a-678a-47a5-abcf-50edd9c59e26" role="listitem"><div class="sg-col-inner"><div cel_widget_id="MAIN-SEARCH_RESULTS-3" class="s-widget-container s-spacing-small s-widget-container-height-small celwidget slot=MAIN template=SEARCH_RESULTS widgetId=search-results_1" data-csa-c-item-id="amzn1.asin.1.B0BVPPB88D" data-csa-c-pos="1" data-csa-c-type="item" data-csa-op-log-render=""><span class="a-declarative" data-action="puis-card-container-declarative" data-csa-c-func-deps="aui-da-puis-card-container-declarative" data-csa-c-item-id="amzn1.asin.B0BVPPB88D" data-csa-c-owner="puis" data-csa-c-posx="1" data-csa-c-type="item" data-render-id="r1gn1lc2yyffru2s4njhgb6aqo5" data-version-id="vgrbnavj5iylf2a1plj09cp2jv"><div class="puis-card-container s-card-container s-overflow-hidden aok-relative puis-include-content-margin puis puis-vgrbnavj5iylf2a1plj09cp2jv s-latency-cf-section puis-card-border" data-cy="asin-faceout-container"><div class="a-section"><div class="puisg-row"><div class="puisg-col puisg-col-4-of-4 puisg-col-4-of-8 puisg-col-4-of-12 puisg-col-4-of-16 puisg-col-4-of-20 puisg-col-4-of-24 puis-list-col-left"><div class="puisg-col-inner"><div class="a-section a-spacing-none aok-relative puis-status-badge-container s-list-status-badge-container"></div><div class="s-product-image-container aok-relative s-text-center s-image-overlay-grey puis-image-overlay-grey s-padding-left-small s-padding-right-small puis-flex-expand-height puis puis-vgrbnavj5iylf2a1plj09cp2jv" data-cy="image-container"><div class="aok-relative"><span class="rush-component" data-component-type="s-product-image" data-render-id="r1gn1lc2yyffru2s4njhgb6aqo5" data-version-id="vgrbnavj5iylf2a1plj09cp2jv"><a class="a-link-normal s-no-outline" href="/Sony-WH-CH520-Bluetooth-Headphones-Microphone/dp/B0BVPPB88D/ref=sr_1_1?crid=1747167176&amp;dib=eyJ2IjoiMSJ9.P5fd7Y2gv2tXww9t5BeoO9lJE3aF9u4FwyTddP4jCpcKoYIc3GUXe7Dk1tq2WKRjePccSO0bUb3RrmeHm24MVI9jy7oGamqGNzXz4ckA5I7-A3b38jSFZoltWJW-wAVCntuzqDoG5v_5_CsqcEroM__VvK5VUvt8RdJVsViKtTHqhlbjPAfF9qbySHx_hADrsjpGjNdJsra9fH-LxHHLVdTKNyjA4kzsKjD_CWrRejp3Q0fyv3TKSdFVEynZR5E9Da2f2lfpCuNH8eptNztELilxds2UdGCll2m8qIjsqx0.oiRFLW-0xusDjFMKUZQP-t4EKRqXZUIzZA92wV93-Ac&amp;dib_tag=se&amp;keywords=sony+headphones+Sony+WH-1000XM4+Sony+XM4+headphones+Sony+WH-1000XM4+headphones&amp;qid=1747167176&amp;s=electronics&amp;sr=1-1" tabindex="-1"><div class="a-section aok-relative s-image-fixed-height"><img alt="Sony WH-CH520 Best Wireless Bluetooth On-Ear Headphones with Microphone for Calls and Voice Control, Up to 50 Hours Batter..." aria-hidden="true" class="s-image" data-image-index="1" data-image-latency="s-product-image" data-image-load="" data-image-source-density="1" src="https://m.media-amazon.com/images/I/511-Wvj9E2L._AC_UY218_.jpg" srcset="https://m.media-amazon.com/images/I/511-Wvj9E2L._AC_UY218_.jpg 1x, https://m.media-amazon.com/images/I/511-Wvj9E2L._AC_UY327_FMwebp_QL65_.jpg 1.5x, https://m.media-amazon.com/images/I/511-Wvj9E2L._AC_UY436_FMwebp_QL65_.jpg 2x, https://m.media-amazon.com/images/I/511-Wvj9E2L._AC_UY545_FMwebp_QL65_.jpg 2.5x, https://m.media-amazon.com/images/I/511-Wvj9E2L._AC_UY654_FMwebp_QL65_.jpg 3x"/></div></a></span></div></div></div></div><div class="puisg-col puisg-col-0-of-4 puisg-col-0-of-8 puisg-col-4-of-12 puisg-col-8-of-16 puisg-col-12-of-20 puisg-col-12-of-24 puis-list-col-right"><div class="puisg-col-inner"><div class="a-section a-spacing-small a-spacing-top-small"><div class="a-section a-spacing-none puis-padding-right-small s-title-instructions-style" data-cy="title-recipe"><div class="a-row"><div class="a-row a-color-secondary"><h2 class="a-size-mini s-line-clamp-1"><span class="a-size-medium a-color-base">Sony</span></h2></div></div><a class="a-link-normal s-line-clamp-2 s-link-style a-text-normal" href="/Sony-WH-CH520-Bluetooth-Headphones-Microphone/dp/B0BVPPB88D/ref=sr_1_1?crid=1747167176&amp;dib=eyJ2IjoiMSJ9.P5fd7Y2gv2tXww9t5BeoO9lJE3aF9u4FwyTddP4jCpcKoYIc3GUXe7Dk1tq2WKRjePccSO0bUb3RrmeHm24MVI9jy7oGamqGNzXz4ckA5I7-A3b38jSFZoltWJW-wAVCntuzqDoG5v_5_CsqcEroM__VvK5VUvt8RdJVsViKtTHqhlbjPAfF9qbySHx_hADrsjpGjNdJsra9fH-LxHHLVdTKNyjA4kzsKjD_CWrRejp3Q0fyv3TKSdFVEynZR5E9Da2f2lfpCuNH8eptNztELilxds2UdGCll2m8qIjsqx0.oiRFLW-0xusDjFMKUZQP-t4EKRqXZUIzZA92wV93-Ac&amp;dib_tag=se&amp;keywords=sony+headphones+Sony+WH-1000XM4+Sony+XM4+headphones+Sony+WH-1000XM4+headphones&amp;qid=1747167176&amp;s=electronics&amp;sr=1-1"><h2 aria-label="WH-CH520 Best Wireless Bluetooth On-Ear Headphones with Microphone for Calls and Voice Control, Up to 50 Hours Battery Life with Quick Charge Function, Includes USB-C Charging Cable - Beige" class="a-size-medium a-spacing-none a-color-base a-text-normal"><span>WH-CH520 Best Wireless Bluetooth On-Ear Headphones with Microphone for Calls and Voice Control, Up to 50 Hours Battery Life with Quick Charge Function, Includes USB-C Charging Cable - Beige</span></h2></a> </div><div class="a-section a-spacing-none a-spacing-top-micro" data-cy="reviews-block"><div class="a-row a-size-small"><span class="a-declarative" data-a-popover='{"position":"triggerBottom","popoverLabel":"4.4 out of 5 stars, rating details","url":"/review/widgets/average-customer-review/popover/ref=acr_search__popover?ie=UTF8&amp;asin=B0BVPPB88D&amp;ref_=acr_search__popover&amp;contextId=search","closeButton":true,"closeButtonLabel":""}' data-action="a-popover" data-csa-c-func-deps="aui-da-a-popover" data-csa-c-type="widget" data-render-id="r1gn1lc2yyffru2s4njhgb6aqo5" data-version-id="vgrbnavj5iylf2a1plj09cp2jv"><a aria-label="4.4 out of 5 stars, rating details" class="a-popover-trigger a-declarative" href="javascript:void(0)" role="button"><i aria-hidden="true" class="a-icon a-icon-star-small a-star-small-4-5" data-cy="reviews-ratings-slot"><span class="a-icon-alt">4.4 out of 5 stars</span></i><i class="a-icon a-icon-popover"></i></a></span> <span class="rush-component" data-component-type="s-client-side-analytics" data-render-id="r1gn1lc2yyffru2s4njhgb6aqo5" data-version-id="vgrbnavj5iylf2a1plj09cp2jv"><div class="s-csa-instrumentation-wrapper alf-search-csa-instrumentation-wrapper" data-csa-c-asin="B0BVPPB88D" data-csa-c-content-id="alf-customer-ratings-count-component" data-csa-c-layout="LIST" data-csa-c-slot-id="alf-reviews" data-csa-c-type="alf-af-component" data-csa-op-log-render="" style="display: inline-block"><a aria-label="1,612 ratings" class="a-link-normal s-underline-text s-underline-link-text s-link-style" href="/Sony-WH-CH520-Bluetooth-Headphones-Microphone/dp/B0BVPPB88D/ref=sr_1_1?crid=1747167176&amp;dib=eyJ2IjoiMSJ9.P5fd7Y2gv2tXww9t5BeoO9lJE3aF9u4FwyTddP4jCpcKoYIc3GUXe7Dk1tq2WKRjePccSO0bUb3RrmeHm24MVI9jy7oGamqGNzXz4ckA5I7-A3b38jSFZoltWJW-wAVCntuzqDoG5v_5_CsqcEroM__VvK5VUvt8RdJVsViKtTHqhlbjPAfF9qbySHx_hADrsjpGjNdJsra9fH-LxHHLVdTKNyjA4kzsKjD_CWrRejp3Q0fyv3TKSdFVEynZR5E9Da2f2lfpCuNH8eptNztELilxds2UdGCll2m8qIjsqx0.oiRFLW-0xusDjFMKUZQP-t4EKRqXZUIzZA92wV93-Ac&amp;dib_tag=se&amp;keywords=sony+headphones+Sony+WH-1000XM4+Sony+XM4+headphones+Sony+WH-1000XM4+headphones&amp;qid=1747167176&amp;s=electronics&amp;sr=1-1#customerReviews"><span aria-hidden="true" class="a-size-base s-underline-text">1,612</span> </a> </div></span></div></div><div class="puisg-row"><div class="puisg-col puisg-col-4-of-4 puisg-col-4-of-8 puisg-col-4-of-12 puisg-col-4-of-16 puisg-col-4-of-20 puisg-col-4-of-24"><div class="puisg-col-inner"><div class="a-section a-spacing-none a-spacing-top-micro puis-price-instructions-style" data-cy="price-recipe"><div class="a-row a-size-base a-color-base"><div class="a-row"></div><div class="a-row"></div></div></div><div class="a-section a-spacing-none a-spacing-top-mini"><div class="puis-see-details-content"><div data-csa-c-content-id="s-search-see-details-button" data-csa-c-device-env="WEB" data-csa-c-device-os="UNRECOGNIZED" data-csa-c-device-type="DESKTOP" data-csa-c-item-id="B0BVPPB88D" data-csa-c-item-type="asin" data-csa-c-type="action"><span class="a-button a-button-base"><span class="a-button-inner"><a class="a-button-text" href="/Sony-WH-CH520-Bluetooth-Headphones-Microphone/dp/B0BVPPB88D/ref=sr_1_1_so_HEADPHONES?crid=1747167176&amp;dib=eyJ2IjoiMSJ9.P5fd7Y2gv2tXww9t5BeoO9lJE3aF9u4FwyTddP4jCpcKoYIc3GUXe7Dk1tq2WKRjePccSO0bUb3RrmeHm24MVI9jy7oGamqGNzXz4ckA5I7-A3b38jSFZoltWJW-wAVCntuzqDoG5v_5_CsqcEroM__VvK5VUvt8RdJVsViKtTHqhlbjPAfF9qbySHx_hADrsjpGjNdJsra9fH-LxHHLVdTKNyjA4kzsKjD_CWrRejp3Q0fyv3TKSdFVEynZR5E9Da2f2lfpCuNH8eptNztELilxds2UdGCll2m8qIjsqx0.oiRFLW-0xusDjFMKUZQP-t4EKRqXZUIzZA92wV93-Ac&amp;dib_tag=se&amp;keywords=sony+headphones+Sony+WH-1000XM4+Sony+XM4+headphones+Sony+WH-1000XM4+headphones&amp;qid=1747167176&amp;s=electronics&amp;sr=1-1">See options</a></span></span></div></div></div><div class="a-section a-spacing-none a-spacing-top-mini" data-cy="secondary-offer-recipe"><div class="a-row a-size-base a-color-secondary"><span class="a-size-base a-color-secondary">No featured offers available</span><br/><span class="a-color-base">$29.99</span><span class="a-letter-space"></span><span class="a-declarative" data-action="s-show-all-offers-display" data-csa-c-func-deps="aui-da-s-show-all-offers-display" data-csa-c-type="widget" data-render-id="r1gn1lc2yyffru2s4njhgb6aqo5" data-s-show-all-offers-display='{"assetMismatch":"Abandon","url":"/gp/aod/ajax/ref=sr_1_1_aod?asin=B0BVPPB88D&amp;pc=sp&amp;s=electronics&amp;keywords=sony+headphones+Sony+WH-1000XM4+Sony+XM4+headphones+Sony+WH-1000XM4+headphones&amp;crid=1747167176&amp;dib_tag=se&amp;dib=eyJ2IjoiMSJ9.P5fd7Y2gv2tXww9t5BeoO9lJE3aF9u4FwyTddP4jCpcKoYIc3GUXe7Dk1tq2WKRjePccSO0bUb3RrmeHm24MVI9jy7oGamqGNzXz4ckA5I7-A3b38jSFZoltWJW-wAVCntuzqDoG5v_5_CsqcEroM__VvK5VUvt8RdJVsViKtTHqhlbjPAfF9qbySHx_hADrsjpGjNdJsra9fH-LxHHLVdTKNyjA4kzsKjD_CWrRejp3Q0fyv3TKSdFVEynZR5E9Da2f2lfpCuNH8eptNztELilxds2UdGCll2m8qIjsqx0.oiRFLW-0xusDjFMKUZQP-t4EKRqXZUIzZA92wV93-Ac&amp;qid=1747167176&amp;sr=1-1","fallbackUrl":"/gp/offer-listing/B0BVPPB88D/ref=sr_1_1_olp?s=electronics&amp;keywords=sony+headphones+Sony+WH-1000XM4+Sony+XM4+headphones+Sony+WH-1000XM4+headphones&amp;crid=1747167176&amp;dib_tag=se&amp;dib=eyJ2IjoiMSJ9.P5fd7Y2gv2tXww9t5BeoO9lJE3aF9u4FwyTddP4jCpcKoYIc3GUXe7Dk1tq2WKRjePccSO0bUb3RrmeHm24MVI9jy7oGamqGNzXz4ckA5I7-A3b38jSFZoltWJW-wAVCntuzqDoG5v_5_CsqcEroM__VvK5VUvt8RdJVsViKtTHqhlbjPAfF9qbySHx_hADrsjpGjNdJsra9fH-LxHHLVdTKNyjA4kzsKjD_CWrRejp3Q0fyv3TKSdFVEynZR5E9Da2f2lfpCuNH8eptNztELilxds2UdGCll2m8qIjsqx0.oiRFLW-0xusDjFMKUZQP-t4EKRqXZUIzZA92wV93-Ac&amp;qid=1747167176&amp;sr=1-1"}' data-version-id="vgrbnavj5iylf2a1plj09cp2jv"><a class="a-link-normal s-link-style s-underline-text s-underline-link-text" href="/gp/offer-listing/B0BVPPB88D/ref=sr_1_1_olp?s=electronics&amp;keywords=sony+headphones+Sony+WH-1000XM4+Sony+XM4+headphones+Sony+WH-1000XM4+headphones&amp;crid=1747167176&amp;dib_tag=se&amp;dib=eyJ2IjoiMSJ9.P5fd7Y2gv2tXww9t5BeoO9lJE3aF9u4FwyTddP4jCpcKoYIc3GUXe7Dk1tq2WKRjePccSO0bUb3RrmeHm24MVI9jy7oGamqGNzXz4ckA5I7-A3b38jSFZoltWJW-wAVCntuzqDoG5v_5_CsqcEroM__VvK5VUvt8RdJVsViKtTHqhlbjPAfF9qbySHx_hADrsjpGjNdJsra9fH-LxHHLVdTKNyjA4kzsKjD_CWrRejp3Q0fyv3TKSdFVEynZR5E9Da2f2lfpCuNH8eptNztELilxds2UdGCll2m8qIjsqx0.oiRFLW-0xusDjFMKUZQP-t4EKRqXZUIzZA92wV93-Ac&amp;qid=1747167176&amp;sr=1-1">(5 used &amp; new offers)</a></span><div class="a-section aok-hidden" id="all-offers-display"><div class="a-spinner-wrapper aok-hidden" id="all-offers-display-spinner"><span class="a-spinner a-spinner-medium"></span></div></div><span class="a-declarative" data-action="close-all-offers-display" data-csa-c-func-deps="aui-da-close-all-offers-display" data-csa-c-type="widget" data-render-id="r1gn1lc2yyffru2s4njhgb6aqo5" data-version-id="vgrbnavj5iylf2a1plj09cp2jv"><div class="a-section aok-hidden aod-darken-background" id="aod-background"></div></span></div></div><div class="a-section a-spacing-none a-spacing-top-mini s-color-swatch-container-list-view"><div class="a-section s-color-swatch-container s-color-swatch-container-left-aligned s-quick-view-text-align-start"><div class="a-section s-color-swatch-outer-circle s-color-swatch-pad s-color-swatch-outer-circle-selected"><div data-csa-c-content-id="color-swatch-link" data-csa-c-device-env="WEB" data-csa-c-device-os="UNRECOGNIZED" data-csa-c-device-type="DESKTOP" data-csa-c-interaction-events="click" data-csa-c-product-type="HEADPHONES" data-csa-c-swatch-is-selected="true" data-csa-c-swatch-position="1" data-csa-c-swatch-url="/Sony-WH-CH520-Bluetooth-Headphones-Microphone/dp/B0BVPPB88D/ref=cs_sr_dp_1?crid=1747167176&amp;dib=eyJ2IjoiMSJ9.P5fd7Y2gv2tXww9t5BeoO9lJE3aF9u4FwyTddP4jCpcKoYIc3GUXe7Dk1tq2WKRjePccSO0bUb3RrmeHm24MVI9jy7oGamqGNzXz4ckA5I7-A3b38jSFZoltWJW-wAVCntuzqDoG5v_5_CsqcEroM__VvK5VUvt8RdJVsViKtTHqhlbjPAfF9qbySHx_hADrsjpGjNdJsra9fH-LxHHLVdTKNyjA4kzsKjD_CWrRejp3Q0fyv3TKSdFVEynZR5E9Da2f2lfpCuNH8eptNztELilxds2UdGCll2m8qIjsqx0.oiRFLW-0xusDjFMKUZQP-t4EKRqXZUIzZA92wV93-Ac&amp;dib_tag=se&amp;keywords=sony+headphones+Sony+WH-1000XM4+Sony+XM4+headphones+Sony+WH-1000XM4+headphones&amp;qid=1747167176&amp;s=electronics&amp;sr=1-1" data-csa-c-type="link"><a aria-label="Beige" class="a-link-normal" href="/Sony-WH-CH520-Bluetooth-Headphones-Microphone/dp/B0BVPPB88D/ref=cs_sr_dp_1?crid=1747167176&amp;dib=eyJ2IjoiMSJ9.P5fd7Y2gv2tXww9t5BeoO9lJE3aF9u4FwyTddP4jCpcKoYIc3GUXe7Dk1tq2WKRjePccSO0bUb3RrmeHm24MVI9jy7oGamqGNzXz4ckA5I7-A3b38jSFZoltWJW-wAVCntuzqDoG5v_5_CsqcEroM__VvK5VUvt8RdJVsViKtTHqhlbjPAfF9qbySHx_hADrsjpGjNdJsra9fH-LxHHLVdTKNyjA4kzsKjD_CWrRejp3Q0fyv3TKSdFVEynZR5E9Da2f2lfpCuNH8eptNztELilxds2UdGCll2m8qIjsqx0.oiRFLW-0xusDjFMKUZQP-t4EKRqXZUIzZA92wV93-Ac&amp;dib_tag=se&amp;keywords=sony+headphones+Sony+WH-1000XM4+Sony+XM4+headphones+Sony+WH-1000XM4+headphones&amp;qid=1747167176&amp;s=electronics&amp;sr=1-1" role="button"><span class="s-color-swatch-inner-circle-fill" style="background-color: #B8AD9E"><span class="s-color-swatch-inner-circle-border"></span></span></a></div></div><div class="a-section s-color-swatch-outer-circle s-color-swatch-pad"><div data-csa-c-content-id="color-swatch-link" data-csa-c-device-env="WEB" data-csa-c-device-os="UNRECOGNIZED" data-csa-c-device-type="DESKTOP" data-csa-c-interaction-events="click" data-csa-c-product-type="HEADPHONES" data-csa-c-swatch-is-selected="false" data-csa-c-swatch-position="2" data-csa-c-swatch-url="/Sony-WH-CH520-Bluetooth-Headphones-Microphone/dp/B0BVQ1GL18/ref=cs_sr_dp_2?crid=1747167176&amp;dib=eyJ2IjoiMSJ9.P5fd7Y2gv2tXww9t5BeoO9lJE3aF9u4FwyTddP4jCpcKoYIc3GUXe7Dk1tq2WKRjePccSO0bUb3RrmeHm24MVI9jy7oGamqGNzXz4ckA5I7-A3b38jSFZoltWJW-wAVCntuzqDoG5v_5_CsqcEroM__VvK5VUvt8RdJVsViKtTHqhlbjPAfF9qbySHx_hADrsjpGjNdJsra9fH-LxHHLVdTKNyjA4kzsKjD_CWrRejp3Q0fyv3TKSdFVEynZR5E9Da2f2lfpCuNH8eptNztELilxds2UdGCll2m8qIjsqx0.oiRFLW-0xusDjFMKUZQP-t4EKRqXZUIzZA92wV93-Ac&amp;dib_tag=se&amp;keywords=sony+headphones+Sony+WH-1000XM4+Sony+XM4+headphones+Sony+WH-1000XM4+headphones&amp;qid=1747167176&amp;s=electronics&amp;sr=1-1" data-csa-c-type="link"><a aria-label="Black" class="a-link-normal" href="/Sony-WH-CH520-Bluetooth-Headphones-Microphone/dp/B0BVQ1GL18/ref=cs_sr_dp_2?crid=1747167176&amp;dib=eyJ2IjoiMSJ9.P5fd7Y2gv2tXww9t5BeoO9lJE3aF9u4FwyTddP4jCpcKoYIc3GUXe7Dk1tq2WKRjePccSO0bUb3RrmeHm24MVI9jy7oGamqGNzXz4ckA5I7-A3b38jSFZoltWJW-wAVCntuzqDoG5v_5_CsqcEroM__VvK5VUvt8RdJVsViKtTHqhlbjPAfF9qbySHx_hADrsjpGjNdJsra9fH-LxHHLVdTKNyjA4kzsKjD_CWrRejp3Q0fyv3TKSdFVEynZR5E9Da2f2lfpCuNH8eptNztELilxds2UdGCll2m8qIjsqx0.oiRFLW-0xusDjFMKUZQP-t4EKRqXZUIzZA92wV93-Ac&amp;dib_tag=se&amp;keywords=sony+headphones+Sony+WH-1000XM4+Sony+XM4+headphones+Sony+WH-1000XM4+headphones&amp;qid=1747167176&amp;s=electronics&amp;sr=1-1" role="button"><span class="s-color-swatch-inner-circle-fill" style="background-color: #575A5B"><span class="s-color-swatch-inner-circle-border"></span></span></a></div></div><div class="a-section s-color-swatch-outer-circle s-color-swatch-pad"><div data-csa-c-content-id="color-swatch-link" data-csa-c-device-env="WEB" data-csa-c-device-os="UNRECOGNIZED" data-csa-c-device-type="DESKTOP" data-csa-c-interaction-events="click" data-csa-c-product-type="HEADPHONES" data-csa-c-swatch-is-selected="false" data-csa-c-swatch-position="3" data-csa-c-swatch-url="/Sony-WH-CH520-Bluetooth-Headphones-Microphone/dp/B0BVNV4D5B/ref=cs_sr_dp_3?crid=1747167176&amp;dib=eyJ2IjoiMSJ9.P5fd7Y2gv2tXww9t5BeoO9lJE3aF9u4FwyTddP4jCpcKoYIc3GUXe7Dk1tq2WKRjePccSO0bUb3RrmeHm24MVI9jy7oGamqGNzXz4ckA5I7-A3b38jSFZoltWJW-wAVCntuzqDoG5v_5_CsqcEroM__VvK5VUvt8RdJVsViKtTHqhlbjPAfF9qbySHx_hADrsjpGjNdJsra9fH-LxHHLVdTKNyjA4kzsKjD_CWrRejp3Q0fyv3TKSdFVEynZR5E9Da2f2lfpCuNH8eptNztELilxds2UdGCll2m8qIjsqx0.oiRFLW-0xusDjFMKUZQP-t4EKRqXZUIzZA92wV93-Ac&amp;dib_tag=se&amp;keywords=sony+headphones+Sony+WH-1000XM4+Sony+XM4+headphones+Sony+WH-1000XM4+headphones&amp;qid=1747167176&amp;s=electronics&amp;sr=1-1" data-csa-c-type="link"><a aria-label="Blue" class="a-link-normal" href="/Sony-WH-CH520-Bluetooth-Headphones-Microphone/dp/B0BVNV4D5B/ref=cs_sr_dp_3?crid=1747167176&amp;dib=eyJ2IjoiMSJ9.P5fd7Y2gv2tXww9t5BeoO9lJE3aF9u4FwyTddP4jCpcKoYIc3GUXe7Dk1tq2WKRjePccSO0bUb3RrmeHm24MVI9jy7oGamqGNzXz4ckA5I7-A3b38jSFZoltWJW-wAVCntuzqDoG5v_5_CsqcEroM__VvK5VUvt8RdJVsViKtTHqhlbjPAfF9qbySHx_hADrsjpGjNdJsra9fH-LxHHLVdTKNyjA4kzsKjD_CWrRejp3Q0fyv3TKSdFVEynZR5E9Da2f2lfpCuNH8eptNztELilxds2UdGCll2m8qIjsqx0.oiRFLW-0xusDjFMKUZQP-t4EKRqXZUIzZA92wV93-Ac&amp;dib_tag=se&amp;keywords=sony+headphones+Sony+WH-1000XM4+Sony+XM4+headphones+Sony+WH-1000XM4+headphones&amp;qid=1747167176&amp;s=electronics&amp;sr=1-1" role="button"><span class="s-color-swatch-inner-circle-fill" style="background-color: #788396"><span class="s-color-swatch-inner-circle-border"></span></span></a></div></div></div></div></div></div><div class="puisg-col puisg-col-0-of-4 puisg-col-0-of-8 puisg-col-4-of-12 puisg-col-4-of-16 puisg-col-8-of-20 puisg-col-8-of-24"><div class="puisg-col-inner"></div></div></div><div class="puisg-row"></div></div></div></div></div></div></div></span></div></div></div>
            ```
            
            Extract:
            - title: Full product title
            - price: Numeric price value only (no currency symbol)
            - was_price: Original price before discount (if present)
            - currency: Currency code (e.g., USD)
            - url: Product URL
            - image_url: Main product image URL
            - rating: Star rating (0-5)
            - reviews: Number of reviews
            - asin: Amazon ASIN
            - is_prime: Boolean for Prime eligible
            - is_sponsored: Boolean for sponsored listing
            - is_amazon_choice: Boolean for Amazon's Choice
            - is_best_seller: Boolean for Best Seller
            - description: Any additional description text
            - delivery_info: Delivery/shipping information
            - out_of_stock: Boolean for out of stock status
            
            Return a clean JSON object with these fields. Use null for missing values.
            
2025-05-13 16:13:02,643 - DealFinderAI.AmazonScraperAgent - INFO - Gemini extracted: Sony WH-CH520 Best Wireless Bluetooth On-Ear Headphones with Microphone for Calls and Voice Control, Up to 50 Hours Battery Life with Quick Charge Function, Includes USB-C Charging Cable - Beige at 29.99 USD
2025-05-13 16:13:02,643 - DealFinderAI.AmazonScraperAgent - INFO - Gemini used for product extraction
2025-05-13 16:13:02,643 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Sony WH-CH520 Best Wireless Bluetooth On-Ear Headphones with Microphone for Calls and Voice Control, Up to 50 Hours Battery Life with Quick Charge Function, Includes USB-C Charging Cable - Beige at 29.99 USD
2025-05-13 16:13:02,643 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Sony WH-CH520 Best Wireless Bluetooth On-Ear Headphones with Microphone for Calls and Voice Control, Up to 50 Hours Battery Life with Quick Charge Function, Includes USB-C Charging Cable - Beige at 29.99 USD
2025-05-13 16:13:02,659 - DealFinderAI.AmazonScraperAgent - WARNING - Incomplete data for ASIN B0BTJ9WHL9, falling back to Gemini extraction.
2025-05-13 16:13:02,661 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: 
            Extract detailed product information from this Amazon listing HTML:
            
            ```html
            <div class="sg-col-20-of-24 s-result-item s-asin sg-col-0-of-12 sg-col-16-of-20 sg-col s-widget-spacing-small sg-col-12-of-16" data-asin="B0BTJ9WHL9" data-component-type="s-search-result" data-index="4" data-uuid="c772a1d7-749a-4338-a7fa-41743930228a" id="c772a1d7-749a-4338-a7fa-41743930228a" role="listitem"><div class="sg-col-inner"><div cel_widget_id="MAIN-SEARCH_RESULTS-4" class="s-widget-container s-spacing-small s-widget-container-height-small celwidget slot=MAIN template=SEARCH_RESULTS widgetId=search-results_2" data-csa-c-item-id="amzn1.asin.1.B0BTJ9WHL9" data-csa-c-pos="2" data-csa-c-type="item" data-csa-op-log-render=""><span class="a-declarative" data-action="puis-card-container-declarative" data-csa-c-func-deps="aui-da-puis-card-container-declarative" data-csa-c-item-id="amzn1.asin.B0BTJ9WHL9" data-csa-c-owner="puis" data-csa-c-posx="2" data-csa-c-type="item" data-render-id="r1gn1lc2yyffru2s4njhgb6aqo5" data-version-id="vgrbnavj5iylf2a1plj09cp2jv"><div class="puis-card-container s-card-container s-overflow-hidden aok-relative puis-include-content-margin puis puis-vgrbnavj5iylf2a1plj09cp2jv s-latency-cf-section puis-card-border" data-cy="asin-faceout-container"><div class="a-section"><div class="puisg-row"><div class="puisg-col puisg-col-4-of-4 puisg-col-4-of-8 puisg-col-4-of-12 puisg-col-4-of-16 puisg-col-4-of-20 puisg-col-4-of-24 puis-list-col-left"><div class="puisg-col-inner"><div class="a-section a-spacing-none aok-relative puis-status-badge-container s-list-status-badge-container"></div><div class="s-product-image-container aok-relative s-text-center s-image-overlay-grey puis-image-overlay-grey s-padding-left-small s-padding-right-small puis-flex-expand-height puis puis-vgrbnavj5iylf2a1plj09cp2jv" data-cy="image-container"><div class="aok-relative"><span class="rush-component" data-component-type="s-product-image" data-render-id="r1gn1lc2yyffru2s4njhgb6aqo5" data-version-id="vgrbnavj5iylf2a1plj09cp2jv"><a class="a-link-normal s-no-outline" href="/Sony-Wireless-Bluetooth-Headphones-Ear/dp/B0BTJ9WHL9/ref=sr_1_2?crid=1747167176&amp;dib=eyJ2IjoiMSJ9.P5fd7Y2gv2tXww9t5BeoO9lJE3aF9u4FwyTddP4jCpcKoYIc3GUXe7Dk1tq2WKRjePccSO0bUb3RrmeHm24MVI9jy7oGamqGNzXz4ckA5I7-A3b38jSFZoltWJW-wAVCntuzqDoG5v_5_CsqcEroM__VvK5VUvt8RdJVsViKtTHqhlbjPAfF9qbySHx_hADrsjpGjNdJsra9fH-LxHHLVdTKNyjA4kzsKjD_CWrRejp3Q0fyv3TKSdFVEynZR5E9Da2f2lfpCuNH8eptNztELilxds2UdGCll2m8qIjsqx0.oiRFLW-0xusDjFMKUZQP-t4EKRqXZUIzZA92wV93-Ac&amp;dib_tag=se&amp;keywords=sony+headphones+Sony+WH-1000XM4+Sony+XM4+headphones+Sony+WH-1000XM4+headphones&amp;qid=1747167176&amp;s=electronics&amp;sr=1-2" tabindex="-1"><div class="a-section aok-relative s-image-fixed-height"><img alt="Sony Wireless Bluetooth Headphones - Up to 50 Hours Battery Life with Quick Charge Function, On-Ear Model - WH-CH520C.CE7..." aria-hidden="true" class="s-image" data-image-index="2" data-image-latency="s-product-image" data-image-load="" data-image-source-density="1" src="https://m.media-amazon.com/images/I/61hKen6gPrL._AC_UY218_.jpg" srcset="https://m.media-amazon.com/images/I/61hKen6gPrL._AC_UY218_.jpg 1x, https://m.media-amazon.com/images/I/61hKen6gPrL._AC_UY327_FMwebp_QL65_.jpg 1.5x, https://m.media-amazon.com/images/I/61hKen6gPrL._AC_UY436_FMwebp_QL65_.jpg 2x, https://m.media-amazon.com/images/I/61hKen6gPrL._AC_UY545_FMwebp_QL65_.jpg 2.5x, https://m.media-amazon.com/images/I/61hKen6gPrL._AC_UY654_FMwebp_QL65_.jpg 3x"/></div></a></span></div></div></div></div><div class="puisg-col puisg-col-0-of-4 puisg-col-0-of-8 puisg-col-4-of-12 puisg-col-8-of-16 puisg-col-12-of-20 puisg-col-12-of-24 puis-list-col-right"><div class="puisg-col-inner"><div class="a-section a-spacing-small a-spacing-top-small"><div class="a-section a-spacing-none puis-padding-right-small s-title-instructions-style" data-cy="title-recipe"><div class="a-row"><div class="a-row a-color-secondary"><h2 class="a-size-mini s-line-clamp-1"><span class="a-size-medium a-color-base">Sony</span></h2></div></div><a class="a-link-normal s-line-clamp-2 s-link-style a-text-normal" href="/Sony-Wireless-Bluetooth-Headphones-Ear/dp/B0BTJ9WHL9/ref=sr_1_2?crid=1747167176&amp;dib=eyJ2IjoiMSJ9.P5fd7Y2gv2tXww9t5BeoO9lJE3aF9u4FwyTddP4jCpcKoYIc3GUXe7Dk1tq2WKRjePccSO0bUb3RrmeHm24MVI9jy7oGamqGNzXz4ckA5I7-A3b38jSFZoltWJW-wAVCntuzqDoG5v_5_CsqcEroM__VvK5VUvt8RdJVsViKtTHqhlbjPAfF9qbySHx_hADrsjpGjNdJsra9fH-LxHHLVdTKNyjA4kzsKjD_CWrRejp3Q0fyv3TKSdFVEynZR5E9Da2f2lfpCuNH8eptNztELilxds2UdGCll2m8qIjsqx0.oiRFLW-0xusDjFMKUZQP-t4EKRqXZUIzZA92wV93-Ac&amp;dib_tag=se&amp;keywords=sony+headphones+Sony+WH-1000XM4+Sony+XM4+headphones+Sony+WH-1000XM4+headphones&amp;qid=1747167176&amp;s=electronics&amp;sr=1-2"><h2 aria-label="Wireless Bluetooth Headphones - Up to 50 Hours Battery Life with Quick Charge Function, On-Ear Model - WH-CH520C.CE7 - Limited Edition - Cappuccino/Beige" class="a-size-medium a-spacing-none a-color-base a-text-normal"><span>Wireless Bluetooth Headphones - Up to 50 Hours Battery Life with Quick Charge Function, On-Ear Model - WH-CH520C.CE7 - Limited Edition - Cappuccino/Beige</span></h2></a> </div><div class="a-section a-spacing-none a-spacing-top-micro" data-cy="reviews-block"><div class="a-row a-size-small"><span class="a-declarative" data-a-popover='{"position":"triggerBottom","popoverLabel":"4.4 out of 5 stars, rating details","url":"/review/widgets/average-customer-review/popover/ref=acr_search__popover?ie=UTF8&amp;asin=B0BTJ9WHL9&amp;ref_=acr_search__popover&amp;contextId=search","closeButton":true,"closeButtonLabel":""}' data-action="a-popover" data-csa-c-func-deps="aui-da-a-popover" data-csa-c-type="widget" data-render-id="r1gn1lc2yyffru2s4njhgb6aqo5" data-version-id="vgrbnavj5iylf2a1plj09cp2jv"><a aria-label="4.4 out of 5 stars, rating details" class="a-popover-trigger a-declarative" href="javascript:void(0)" role="button"><i aria-hidden="true" class="a-icon a-icon-star-small a-star-small-4-5" data-cy="reviews-ratings-slot"><span class="a-icon-alt">4.4 out of 5 stars</span></i><i class="a-icon a-icon-popover"></i></a></span> <span class="rush-component" data-component-type="s-client-side-analytics" data-render-id="r1gn1lc2yyffru2s4njhgb6aqo5" data-version-id="vgrbnavj5iylf2a1plj09cp2jv"><div class="s-csa-instrumentation-wrapper alf-search-csa-instrumentation-wrapper" data-csa-c-asin="B0BTJ9WHL9" data-csa-c-content-id="alf-customer-ratings-count-component" data-csa-c-layout="LIST" data-csa-c-slot-id="alf-reviews" data-csa-c-type="alf-af-component" data-csa-op-log-render="" style="display: inline-block"><a aria-label="28,670 ratings" class="a-link-normal s-underline-text s-underline-link-text s-link-style" href="/Sony-Wireless-Bluetooth-Headphones-Ear/dp/B0BTJ9WHL9/ref=sr_1_2?crid=1747167176&amp;dib=eyJ2IjoiMSJ9.P5fd7Y2gv2tXww9t5BeoO9lJE3aF9u4FwyTddP4jCpcKoYIc3GUXe7Dk1tq2WKRjePccSO0bUb3RrmeHm24MVI9jy7oGamqGNzXz4ckA5I7-A3b38jSFZoltWJW-wAVCntuzqDoG5v_5_CsqcEroM__VvK5VUvt8RdJVsViKtTHqhlbjPAfF9qbySHx_hADrsjpGjNdJsra9fH-LxHHLVdTKNyjA4kzsKjD_CWrRejp3Q0fyv3TKSdFVEynZR5E9Da2f2lfpCuNH8eptNztELilxds2UdGCll2m8qIjsqx0.oiRFLW-0xusDjFMKUZQP-t4EKRqXZUIzZA92wV93-Ac&amp;dib_tag=se&amp;keywords=sony+headphones+Sony+WH-1000XM4+Sony+XM4+headphones+Sony+WH-1000XM4+headphones&amp;qid=1747167176&amp;s=electronics&amp;sr=1-2#customerReviews"><span aria-hidden="true" class="a-size-base s-underline-text">28,670</span> </a> </div></span></div><div class="a-row a-size-base"><span class="a-size-base a-color-secondary">50+ bought in past month</span></div></div><div class="puisg-row"><div class="puisg-col puisg-col-4-of-4 puisg-col-4-of-8 puisg-col-4-of-12 puisg-col-4-of-16 puisg-col-4-of-20 puisg-col-4-of-24"><div class="puisg-col-inner"><div class="a-section a-spacing-none a-spacing-top-micro puis-price-instructions-style" data-cy="price-recipe"><div class="a-row a-size-base a-color-base"><div class="a-row"></div><div class="a-row"></div></div></div><div class="a-section a-spacing-none a-spacing-top-mini"><div class="puis-see-details-content"><div data-csa-c-content-id="s-search-see-details-button" data-csa-c-device-env="WEB" data-csa-c-device-os="UNRECOGNIZED" data-csa-c-device-type="DESKTOP" data-csa-c-item-id="B0BTJ9WHL9" data-csa-c-item-type="asin" data-csa-c-type="action"><span class="a-button a-button-base"><span class="a-button-inner"><a class="a-button-text" href="/Sony-Wireless-Bluetooth-Headphones-Ear/dp/B0BTJ9WHL9/ref=sr_1_2_so_HEADPHONES?crid=1747167176&amp;dib=eyJ2IjoiMSJ9.P5fd7Y2gv2tXww9t5BeoO9lJE3aF9u4FwyTddP4jCpcKoYIc3GUXe7Dk1tq2WKRjePccSO0bUb3RrmeHm24MVI9jy7oGamqGNzXz4ckA5I7-A3b38jSFZoltWJW-wAVCntuzqDoG5v_5_CsqcEroM__VvK5VUvt8RdJVsViKtTHqhlbjPAfF9qbySHx_hADrsjpGjNdJsra9fH-LxHHLVdTKNyjA4kzsKjD_CWrRejp3Q0fyv3TKSdFVEynZR5E9Da2f2lfpCuNH8eptNztELilxds2UdGCll2m8qIjsqx0.oiRFLW-0xusDjFMKUZQP-t4EKRqXZUIzZA92wV93-Ac&amp;dib_tag=se&amp;keywords=sony+headphones+Sony+WH-1000XM4+Sony+XM4+headphones+Sony+WH-1000XM4+headphones&amp;qid=1747167176&amp;s=electronics&amp;sr=1-2">See options</a></span></span></div></div></div><div class="a-section a-spacing-none a-spacing-top-mini" data-cy="secondary-offer-recipe"><div class="a-row a-size-base a-color-secondary"><span class="a-size-base a-color-secondary">No featured offers available</span><br/><span class="a-color-base">$48.99</span><span class="a-letter-space"></span><span class="a-declarative" data-action="s-show-all-offers-display" data-csa-c-func-deps="aui-da-s-show-all-offers-display" data-csa-c-type="widget" data-render-id="r1gn1lc2yyffru2s4njhgb6aqo5" data-s-show-all-offers-display='{"assetMismatch":"Abandon","url":"/gp/aod/ajax/ref=sr_1_2_aod?asin=B0BTJ9WHL9&amp;pc=sp&amp;s=electronics&amp;keywords=sony+headphones+Sony+WH-1000XM4+Sony+XM4+headphones+Sony+WH-1000XM4+headphones&amp;crid=1747167176&amp;dib_tag=se&amp;dib=eyJ2IjoiMSJ9.P5fd7Y2gv2tXww9t5BeoO9lJE3aF9u4FwyTddP4jCpcKoYIc3GUXe7Dk1tq2WKRjePccSO0bUb3RrmeHm24MVI9jy7oGamqGNzXz4ckA5I7-A3b38jSFZoltWJW-wAVCntuzqDoG5v_5_CsqcEroM__VvK5VUvt8RdJVsViKtTHqhlbjPAfF9qbySHx_hADrsjpGjNdJsra9fH-LxHHLVdTKNyjA4kzsKjD_CWrRejp3Q0fyv3TKSdFVEynZR5E9Da2f2lfpCuNH8eptNztELilxds2UdGCll2m8qIjsqx0.oiRFLW-0xusDjFMKUZQP-t4EKRqXZUIzZA92wV93-Ac&amp;qid=1747167176&amp;sr=1-2","fallbackUrl":"/gp/offer-listing/B0BTJ9WHL9/ref=sr_1_2_olp?s=electronics&amp;keywords=sony+headphones+Sony+WH-1000XM4+Sony+XM4+headphones+Sony+WH-1000XM4+headphones&amp;crid=1747167176&amp;dib_tag=se&amp;dib=eyJ2IjoiMSJ9.P5fd7Y2gv2tXww9t5BeoO9lJE3aF9u4FwyTddP4jCpcKoYIc3GUXe7Dk1tq2WKRjePccSO0bUb3RrmeHm24MVI9jy7oGamqGNzXz4ckA5I7-A3b38jSFZoltWJW-wAVCntuzqDoG5v_5_CsqcEroM__VvK5VUvt8RdJVsViKtTHqhlbjPAfF9qbySHx_hADrsjpGjNdJsra9fH-LxHHLVdTKNyjA4kzsKjD_CWrRejp3Q0fyv3TKSdFVEynZR5E9Da2f2lfpCuNH8eptNztELilxds2UdGCll2m8qIjsqx0.oiRFLW-0xusDjFMKUZQP-t4EKRqXZUIzZA92wV93-Ac&amp;qid=1747167176&amp;sr=1-2"}' data-version-id="vgrbnavj5iylf2a1plj09cp2jv"><a class="a-link-normal s-link-style s-underline-text s-underline-link-text" href="/gp/offer-listing/B0BTJ9WHL9/ref=sr_1_2_olp?s=electronics&amp;keywords=sony+headphones+Sony+WH-1000XM4+Sony+XM4+headphones+Sony+WH-1000XM4+headphones&amp;crid=1747167176&amp;dib_tag=se&amp;dib=eyJ2IjoiMSJ9.P5fd7Y2gv2tXww9t5BeoO9lJE3aF9u4FwyTddP4jCpcKoYIc3GUXe7Dk1tq2WKRjePccSO0bUb3RrmeHm24MVI9jy7oGamqGNzXz4ckA5I7-A3b38jSFZoltWJW-wAVCntuzqDoG5v_5_CsqcEroM__VvK5VUvt8RdJVsViKtTHqhlbjPAfF9qbySHx_hADrsjpGjNdJsra9fH-LxHHLVdTKNyjA4kzsKjD_CWrRejp3Q0fyv3TKSdFVEynZR5E9Da2f2lfpCuNH8eptNztELilxds2UdGCll2m8qIjsqx0.oiRFLW-0xusDjFMKUZQP-t4EKRqXZUIzZA92wV93-Ac&amp;qid=1747167176&amp;sr=1-2">(9 used &amp; new offers)</a></span><div class="a-section aok-hidden" id="all-offers-display"><div class="a-spinner-wrapper aok-hidden" id="all-offers-display-spinner"><span class="a-spinner a-spinner-medium"></span></div></div><span class="a-declarative" data-action="close-all-offers-display" data-csa-c-func-deps="aui-da-close-all-offers-display" data-csa-c-type="widget" data-render-id="r1gn1lc2yyffru2s4njhgb6aqo5" data-version-id="vgrbnavj5iylf2a1plj09cp2jv"><div class="a-section aok-hidden aod-darken-background" id="aod-background"></div></span></div></div><div class="a-section a-spacing-none a-spacing-top-mini s-color-swatch-container-list-view"><div class="a-section s-color-swatch-container s-color-swatch-container-left-aligned s-quick-view-text-align-start"><div class="a-section s-color-swatch-outer-circle s-color-swatch-pad s-color-swatch-outer-circle-selected"><div data-csa-c-content-id="color-swatch-link" data-csa-c-device-env="WEB" data-csa-c-device-os="UNRECOGNIZED" data-csa-c-device-type="DESKTOP" data-csa-c-interaction-events="click" data-csa-c-product-type="HEADPHONES" data-csa-c-swatch-is-selected="true" data-csa-c-swatch-position="1" data-csa-c-swatch-url="/Sony-Wireless-Bluetooth-Headphones-Ear/dp/B0BTJ9WHL9/ref=cs_sr_dp_1?crid=1747167176&amp;dib=eyJ2IjoiMSJ9.P5fd7Y2gv2tXww9t5BeoO9lJE3aF9u4FwyTddP4jCpcKoYIc3GUXe7Dk1tq2WKRjePccSO0bUb3RrmeHm24MVI9jy7oGamqGNzXz4ckA5I7-A3b38jSFZoltWJW-wAVCntuzqDoG5v_5_CsqcEroM__VvK5VUvt8RdJVsViKtTHqhlbjPAfF9qbySHx_hADrsjpGjNdJsra9fH-LxHHLVdTKNyjA4kzsKjD_CWrRejp3Q0fyv3TKSdFVEynZR5E9Da2f2lfpCuNH8eptNztELilxds2UdGCll2m8qIjsqx0.oiRFLW-0xusDjFMKUZQP-t4EKRqXZUIzZA92wV93-Ac&amp;dib_tag=se&amp;keywords=sony+headphones+Sony+WH-1000XM4+Sony+XM4+headphones+Sony+WH-1000XM4+headphones&amp;qid=1747167176&amp;s=electronics&amp;sr=1-2" data-csa-c-type="link"><a aria-label="Cappuccino/Beige" class="a-link-normal" href="/Sony-Wireless-Bluetooth-Headphones-Ear/dp/B0BTJ9WHL9/ref=cs_sr_dp_1?crid=1747167176&amp;dib=eyJ2IjoiMSJ9.P5fd7Y2gv2tXww9t5BeoO9lJE3aF9u4FwyTddP4jCpcKoYIc3GUXe7Dk1tq2WKRjePccSO0bUb3RrmeHm24MVI9jy7oGamqGNzXz4ckA5I7-A3b38jSFZoltWJW-wAVCntuzqDoG5v_5_CsqcEroM__VvK5VUvt8RdJVsViKtTHqhlbjPAfF9qbySHx_hADrsjpGjNdJsra9fH-LxHHLVdTKNyjA4kzsKjD_CWrRejp3Q0fyv3TKSdFVEynZR5E9Da2f2lfpCuNH8eptNztELilxds2UdGCll2m8qIjsqx0.oiRFLW-0xusDjFMKUZQP-t4EKRqXZUIzZA92wV93-Ac&amp;dib_tag=se&amp;keywords=sony+headphones+Sony+WH-1000XM4+Sony+XM4+headphones+Sony+WH-1000XM4+headphones&amp;qid=1747167176&amp;s=electronics&amp;sr=1-2" role="button"><span class="s-color-swatch-inner-circle-fill" style="background-color: #BBAB9D"><span class="s-color-swatch-inner-circle-border"></span></span></a></div></div><div class="a-section s-color-swatch-outer-circle s-color-swatch-pad"><div data-csa-c-content-id="color-swatch-link" data-csa-c-device-env="WEB" data-csa-c-device-os="UNRECOGNIZED" data-csa-c-device-type="DESKTOP" data-csa-c-interaction-events="click" data-csa-c-product-type="HEADPHONES" data-csa-c-swatch-is-selected="false" data-csa-c-swatch-position="2" data-csa-c-swatch-url="/Sony-Wireless-Bluetooth-Headphones-Ear/dp/B0BTJ8ZXG5/ref=cs_sr_dp_2?crid=1747167176&amp;dib=eyJ2IjoiMSJ9.P5fd7Y2gv2tXww9t5BeoO9lJE3aF9u4FwyTddP4jCpcKoYIc3GUXe7Dk1tq2WKRjePccSO0bUb3RrmeHm24MVI9jy7oGamqGNzXz4ckA5I7-A3b38jSFZoltWJW-wAVCntuzqDoG5v_5_CsqcEroM__VvK5VUvt8RdJVsViKtTHqhlbjPAfF9qbySHx_hADrsjpGjNdJsra9fH-LxHHLVdTKNyjA4kzsKjD_CWrRejp3Q0fyv3TKSdFVEynZR5E9Da2f2lfpCuNH8eptNztELilxds2UdGCll2m8qIjsqx0.oiRFLW-0xusDjFMKUZQP-t4EKRqXZUIzZA92wV93-Ac&amp;dib_tag=se&amp;keywords=sony+headphones+Sony+WH-1000XM4+Sony+XM4+headphones+Sony+WH-1000XM4+headphones&amp;qid=1747167176&amp;s=electronics&amp;sr=1-2" data-csa-c-type="link"><a aria-label="Blue" class="a-link-normal" href="/Sony-Wireless-Bluetooth-Headphones-Ear/dp/B0BTJ8ZXG5/ref=cs_sr_dp_2?crid=1747167176&amp;dib=eyJ2IjoiMSJ9.P5fd7Y2gv2tXww9t5BeoO9lJE3aF9u4FwyTddP4jCpcKoYIc3GUXe7Dk1tq2WKRjePccSO0bUb3RrmeHm24MVI9jy7oGamqGNzXz4ckA5I7-A3b38jSFZoltWJW-wAVCntuzqDoG5v_5_CsqcEroM__VvK5VUvt8RdJVsViKtTHqhlbjPAfF9qbySHx_hADrsjpGjNdJsra9fH-LxHHLVdTKNyjA4kzsKjD_CWrRejp3Q0fyv3TKSdFVEynZR5E9Da2f2lfpCuNH8eptNztELilxds2UdGCll2m8qIjsqx0.oiRFLW-0xusDjFMKUZQP-t4EKRqXZUIzZA92wV93-Ac&amp;dib_tag=se&amp;keywords=sony+headphones+Sony+WH-1000XM4+Sony+XM4+headphones+Sony+WH-1000XM4+headphones&amp;qid=1747167176&amp;s=electronics&amp;sr=1-2" role="button"><span class="s-color-swatch-inner-circle-fill" style="background-color: #64768D"><span class="s-color-swatch-inner-circle-border"></span></span></a></div></div><div class="a-section s-color-swatch-outer-circle s-color-swatch-pad"><div data-csa-c-content-id="color-swatch-link" data-csa-c-device-env="WEB" data-csa-c-device-os="UNRECOGNIZED" data-csa-c-device-type="DESKTOP" data-csa-c-interaction-events="click" data-csa-c-product-type="HEADPHONES" data-csa-c-swatch-is-selected="false" data-csa-c-swatch-position="3" data-csa-c-swatch-url="/Sony-Wireless-Bluetooth-Headphones-Ear/dp/B0BTJD6LCL/ref=cs_sr_dp_3?crid=1747167176&amp;dib=eyJ2IjoiMSJ9.P5fd7Y2gv2tXww9t5BeoO9lJE3aF9u4FwyTddP4jCpcKoYIc3GUXe7Dk1tq2WKRjePccSO0bUb3RrmeHm24MVI9jy7oGamqGNzXz4ckA5I7-A3b38jSFZoltWJW-wAVCntuzqDoG5v_5_CsqcEroM__VvK5VUvt8RdJVsViKtTHqhlbjPAfF9qbySHx_hADrsjpGjNdJsra9fH-LxHHLVdTKNyjA4kzsKjD_CWrRejp3Q0fyv3TKSdFVEynZR5E9Da2f2lfpCuNH8eptNztELilxds2UdGCll2m8qIjsqx0.oiRFLW-0xusDjFMKUZQP-t4EKRqXZUIzZA92wV93-Ac&amp;dib_tag=se&amp;keywords=sony+headphones+Sony+WH-1000XM4+Sony+XM4+headphones+Sony+WH-1000XM4+headphones&amp;qid=1747167176&amp;s=electronics&amp;sr=1-2" data-csa-c-type="link"><a aria-label="Matte Black" class="a-link-normal" href="/Sony-Wireless-Bluetooth-Headphones-Ear/dp/B0BTJD6LCL/ref=cs_sr_dp_3?crid=1747167176&amp;dib=eyJ2IjoiMSJ9.P5fd7Y2gv2tXww9t5BeoO9lJE3aF9u4FwyTddP4jCpcKoYIc3GUXe7Dk1tq2WKRjePccSO0bUb3RrmeHm24MVI9jy7oGamqGNzXz4ckA5I7-A3b38jSFZoltWJW-wAVCntuzqDoG5v_5_CsqcEroM__VvK5VUvt8RdJVsViKtTHqhlbjPAfF9qbySHx_hADrsjpGjNdJsra9fH-LxHHLVdTKNyjA4kzsKjD_CWrRejp3Q0fyv3TKSdFVEynZR5E9Da2f2lfpCuNH8eptNztELilxds2UdGCll2m8qIjsqx0.oiRFLW-0xusDjFMKUZQP-t4EKRqXZUIzZA92wV93-Ac&amp;dib_tag=se&amp;keywords=sony+headphones+Sony+WH-1000XM4+Sony+XM4+headphones+Sony+WH-1000XM4+headphones&amp;qid=1747167176&amp;s=electronics&amp;sr=1-2" role="button"><span class="s-color-swatch-inner-circle-fill" style="background-color: #48494D"><span class="s-color-swatch-inner-circle-border"></span></span></a></div></div><div class="a-section s-color-swatch-outer-circle s-color-swatch-pad"><div data-csa-c-content-id="color-swatch-link" data-csa-c-device-env="WEB" data-csa-c-device-os="UNRECOGNIZED" data-csa-c-device-type="DESKTOP" data-csa-c-interaction-events="click" data-csa-c-product-type="HEADPHONES" data-csa-c-swatch-is-selected="false" data-csa-c-swatch-position="4" data-csa-c-swatch-url="/Sony-Wireless-Bluetooth-Headphones-Ear/dp/B0BTJCRW9L/ref=cs_sr_dp_4?crid=1747167176&amp;dib=eyJ2IjoiMSJ9.P5fd7Y2gv2tXww9t5BeoO9lJE3aF9u4FwyTddP4jCpcKoYIc3GUXe7Dk1tq2WKRjePccSO0bUb3RrmeHm24MVI9jy7oGamqGNzXz4ckA5I7-A3b38jSFZoltWJW-wAVCntuzqDoG5v_5_CsqcEroM__VvK5VUvt8RdJVsViKtTHqhlbjPAfF9qbySHx_hADrsjpGjNdJsra9fH-LxHHLVdTKNyjA4kzsKjD_CWrRejp3Q0fyv3TKSdFVEynZR5E9Da2f2lfpCuNH8eptNztELilxds2UdGCll2m8qIjsqx0.oiRFLW-0xusDjFMKUZQP-t4EKRqXZUIzZA92wV93-Ac&amp;dib_tag=se&amp;keywords=sony+headphones+Sony+WH-1000XM4+Sony+XM4+headphones+Sony+WH-1000XM4+headphones&amp;qid=1747167176&amp;s=electronics&amp;sr=1-2" data-csa-c-type="link"><a aria-label="White" class="a-link-normal" href="/Sony-Wireless-Bluetooth-Headphones-Ear/dp/B0BTJCRW9L/ref=cs_sr_dp_4?crid=1747167176&amp;dib=eyJ2IjoiMSJ9.P5fd7Y2gv2tXww9t5BeoO9lJE3aF9u4FwyTddP4jCpcKoYIc3GUXe7Dk1tq2WKRjePccSO0bUb3RrmeHm24MVI9jy7oGamqGNzXz4ckA5I7-A3b38jSFZoltWJW-wAVCntuzqDoG5v_5_CsqcEroM__VvK5VUvt8RdJVsViKtTHqhlbjPAfF9qbySHx_hADrsjpGjNdJsra9fH-LxHHLVdTKNyjA4kzsKjD_CWrRejp3Q0fyv3TKSdFVEynZR5E9Da2f2lfpCuNH8eptNztELilxds2UdGCll2m8qIjsqx0.oiRFLW-0xusDjFMKUZQP-t4EKRqXZUIzZA92wV93-Ac&amp;dib_tag=se&amp;keywords=sony+headphones+Sony+WH-1000XM4+Sony+XM4+headphones+Sony+WH-1000XM4+headphones&amp;qid=1747167176&amp;s=electronics&amp;sr=1-2" role="button"><span class="s-color-swatch-inner-circle-fill" style="background-color: #C7C9C8"><span class="s-color-swatch-inner-circle-border"></span></span></a></div></div></div></div></div></div><div class="puisg-col puisg-col-0-of-4 puisg-col-0-of-8 puisg-col-4-of-12 puisg-col-4-of-16 puisg-col-8-of-20 puisg-col-8-of-24"><div class="puisg-col-inner"></div></div></div><div class="puisg-row"></div></div></div></div></div></div></div></span></div></div></div>
            ```
            
            Extract:
            - title: Full product title
            - price: Numeric price value only (no currency symbol)
            - was_price: Original price before discount (if present)
            - currency: Currency code (e.g., USD)
            - url: Product URL
            - image_url: Main product image URL
            - rating: Star rating (0-5)
            - reviews: Number of reviews
            - asin: Amazon ASIN
            - is_prime: Boolean for Prime eligible
            - is_sponsored: Boolean for sponsored listing
            - is_amazon_choice: Boolean for Amazon's Choice
            - is_best_seller: Boolean for Best Seller
            - description: Any additional description text
            - delivery_info: Delivery/shipping information
            - out_of_stock: Boolean for out of stock status
            
            Return a clean JSON object with these fields. Use null for missing values.
            
2025-05-13 16:13:07,239 - DealFinderAI.AmazonScraperAgent - INFO - Gemini extracted: Sony Wireless Bluetooth Headphones - Up to 50 Hours Battery Life with Quick Charge Function, On-Ear Model - WH-CH520C.CE7 - Limited Edition - Cappuccino/Beige at 48.99 USD
2025-05-13 16:13:07,240 - DealFinderAI.AmazonScraperAgent - INFO - Gemini used for product extraction
2025-05-13 16:13:07,240 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Sony Wireless Bluetooth Headphones - Up to 50 Hours Battery Life with Quick Charge Function, On-Ear Model - WH-CH520C.CE7 - Limited Edition - Cappuccino/Beige at 48.99 USD
2025-05-13 16:13:07,240 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Sony Wireless Bluetooth Headphones - Up to 50 Hours Battery Life with Quick Charge Function, On-Ear Model - WH-CH520C.CE7 - Limited Edition - Cappuccino/Beige at 48.99 USD
2025-05-13 16:13:07,257 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: WH-CH720NB Noise Canceling Wireless Bluetooth Headphones - Built-in Microphone - up to 35 Hours Battery Life and Quick Charge - Black - International Version at 129.97 USD
2025-05-13 16:13:07,257 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: WH-CH720NB Noise Canceling Wireless Bluetooth Headphones - Built-in Microphone - up to 35 Hours Battery Life and Quick Charge - Black - International Version at 129.97 USD
2025-05-13 16:13:07,266 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Sony WH-910N Wireless Bluetooth Headphones Noise Canceling (Renewed) at 109.99 USD
2025-05-13 16:13:07,266 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Sony WH-910N Wireless Bluetooth Headphones Noise Canceling (Renewed) at 109.99 USD
2025-05-13 16:13:07,272 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: SONY WH-H900N h.Ear on 2 Wireless Over-Ear Noise Cancelling High Resolution Headphones (Black/Grey) (Renewed) at 99.99 USD
2025-05-13 16:13:07,272 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: SONY WH-H900N h.Ear on 2 Wireless Over-Ear Noise Cancelling High Resolution Headphones (Black/Grey) (Renewed) at 99.99 USD
2025-05-13 16:13:07,278 - DealFinderAI.AmazonScraperAgent - WARNING - Incomplete data for ASIN B0BX61LV6Z, falling back to Gemini extraction.
2025-05-13 16:13:07,279 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: 
            Extract detailed product information from this Amazon listing HTML:
            
            ```html
            <div class="sg-col-20-of-24 s-result-item s-asin sg-col-0-of-12 sg-col-16-of-20 sg-col s-widget-spacing-small sg-col-12-of-16" data-asin="B0BX61LV6Z" data-component-type="s-search-result" data-index="9" data-uuid="8f9909cc-e901-4fda-b3ea-06d5244bca71" id="8f9909cc-e901-4fda-b3ea-06d5244bca71" role="listitem"><div class="sg-col-inner"><div cel_widget_id="MAIN-SEARCH_RESULTS-9" class="s-widget-container s-spacing-small s-widget-container-height-small celwidget slot=MAIN template=SEARCH_RESULTS widgetId=search-results_6" data-csa-c-item-id="amzn1.asin.1.B0BX61LV6Z" data-csa-c-pos="6" data-csa-c-type="item" data-csa-op-log-render=""><span class="a-declarative" data-action="puis-card-container-declarative" data-csa-c-func-deps="aui-da-puis-card-container-declarative" data-csa-c-item-id="amzn1.asin.B0BX61LV6Z" data-csa-c-owner="puis" data-csa-c-posx="6" data-csa-c-type="item" data-render-id="r1gn1lc2yyffru2s4njhgb6aqo5" data-version-id="vgrbnavj5iylf2a1plj09cp2jv"><div class="puis-card-container s-card-container s-overflow-hidden aok-relative puis-include-content-margin puis puis-vgrbnavj5iylf2a1plj09cp2jv s-latency-cf-section puis-card-border" data-cy="asin-faceout-container"><div class="a-section"><div class="puisg-row"><div class="puisg-col puisg-col-4-of-4 puisg-col-4-of-8 puisg-col-4-of-12 puisg-col-4-of-16 puisg-col-4-of-20 puisg-col-4-of-24 puis-list-col-left"><div class="puisg-col-inner"><div class="a-section a-spacing-none aok-relative puis-status-badge-container s-list-status-badge-container"></div><div class="s-product-image-container aok-relative s-text-center s-image-overlay-grey puis-image-overlay-grey s-padding-left-small s-padding-right-small puis-flex-expand-height puis puis-vgrbnavj5iylf2a1plj09cp2jv" data-cy="image-container"><div class="aok-relative"><span class="rush-component" data-component-type="s-product-image" data-render-id="r1gn1lc2yyffru2s4njhgb6aqo5" data-version-id="vgrbnavj5iylf2a1plj09cp2jv"><a class="a-link-normal s-no-outline" href="/Sony-WH-CH720N-Cancelling-Headphone-Microfiber/dp/B0BX61LV6Z/ref=sr_1_6?crid=1747167176&amp;dib=eyJ2IjoiMSJ9.P5fd7Y2gv2tXww9t5BeoO9lJE3aF9u4FwyTddP4jCpcKoYIc3GUXe7Dk1tq2WKRjePccSO0bUb3RrmeHm24MVI9jy7oGamqGNzXz4ckA5I7-A3b38jSFZoltWJW-wAVCntuzqDoG5v_5_CsqcEroM__VvK5VUvt8RdJVsViKtTHqhlbjPAfF9qbySHx_hADrsjpGjNdJsra9fH-LxHHLVdTKNyjA4kzsKjD_CWrRejp3Q0fyv3TKSdFVEynZR5E9Da2f2lfpCuNH8eptNztELilxds2UdGCll2m8qIjsqx0.oiRFLW-0xusDjFMKUZQP-t4EKRqXZUIzZA92wV93-Ac&amp;dib_tag=se&amp;keywords=sony+headphones+Sony+WH-1000XM4+Sony+XM4+headphones+Sony+WH-1000XM4+headphones&amp;qid=1747167176&amp;s=electronics&amp;sr=1-6" tabindex="-1"><div class="a-section aok-relative s-image-fixed-height"><img alt="Sony WH-CH720N Noise Canceling Wireless Headphones Bluetooth Over The Ear Headset with Microphone and Alexa Built-in, Blac..." aria-hidden="true" class="s-image" data-image-index="6" data-image-latency="s-product-image" data-image-load="" data-image-source-density="1" src="https://m.media-amazon.com/images/I/51q3-5not5L._AC_UY218_.jpg" srcset="https://m.media-amazon.com/images/I/51q3-5not5L._AC_UY218_.jpg 1x, https://m.media-amazon.com/images/I/51q3-5not5L._AC_UY327_FMwebp_QL65_.jpg 1.5x, https://m.media-amazon.com/images/I/51q3-5not5L._AC_UY436_FMwebp_QL65_.jpg 2x, https://m.media-amazon.com/images/I/51q3-5not5L._AC_UY545_FMwebp_QL65_.jpg 2.5x, https://m.media-amazon.com/images/I/51q3-5not5L._AC_UY654_FMwebp_QL65_.jpg 3x"/></div></a></span></div></div></div></div><div class="puisg-col puisg-col-0-of-4 puisg-col-0-of-8 puisg-col-4-of-12 puisg-col-8-of-16 puisg-col-12-of-20 puisg-col-12-of-24 puis-list-col-right"><div class="puisg-col-inner"><div class="a-section a-spacing-small a-spacing-top-small"><div class="a-section a-spacing-none puis-padding-right-small s-title-instructions-style" data-cy="title-recipe"><div class="a-row"><div class="a-row a-color-secondary"><h2 class="a-size-mini s-line-clamp-1"><span class="a-size-medium a-color-base">Sony</span></h2></div></div><a class="a-link-normal s-line-clamp-2 s-link-style a-text-normal" href="/Sony-WH-CH720N-Cancelling-Headphone-Microfiber/dp/B0BX61LV6Z/ref=sr_1_6?crid=1747167176&amp;dib=eyJ2IjoiMSJ9.P5fd7Y2gv2tXww9t5BeoO9lJE3aF9u4FwyTddP4jCpcKoYIc3GUXe7Dk1tq2WKRjePccSO0bUb3RrmeHm24MVI9jy7oGamqGNzXz4ckA5I7-A3b38jSFZoltWJW-wAVCntuzqDoG5v_5_CsqcEroM__VvK5VUvt8RdJVsViKtTHqhlbjPAfF9qbySHx_hADrsjpGjNdJsra9fH-LxHHLVdTKNyjA4kzsKjD_CWrRejp3Q0fyv3TKSdFVEynZR5E9Da2f2lfpCuNH8eptNztELilxds2UdGCll2m8qIjsqx0.oiRFLW-0xusDjFMKUZQP-t4EKRqXZUIzZA92wV93-Ac&amp;dib_tag=se&amp;keywords=sony+headphones+Sony+WH-1000XM4+Sony+XM4+headphones+Sony+WH-1000XM4+headphones&amp;qid=1747167176&amp;s=electronics&amp;sr=1-6"><h2 aria-label="WH-CH720N Noise Canceling Wireless Headphones Bluetooth Over The Ear Headset with Microphone and Alexa Built-in, Black Bundle with Deco Gear Case, Pro Audio Stand, Microfiber Cloth WH-CH720N/B" class="a-size-medium a-spacing-none a-color-base a-text-normal"><span>WH-CH720N Noise Canceling Wireless Headphones Bluetooth Over The Ear Headset with Microphone and Alexa Built-in, Black Bundle with Deco Gear Case, Pro Audio Stand, Microfiber Cloth WH-CH720N/B</span></h2></a> </div><div class="a-section a-spacing-none a-spacing-top-micro" data-cy="reviews-block"><div class="a-row a-size-small"><span class="a-declarative" data-a-popover='{"position":"triggerBottom","popoverLabel":"4.4 out of 5 stars, rating details","url":"/review/widgets/average-customer-review/popover/ref=acr_search__popover?ie=UTF8&amp;asin=B0BX61LV6Z&amp;ref_=acr_search__popover&amp;contextId=search","closeButton":true,"closeButtonLabel":""}' data-action="a-popover" data-csa-c-func-deps="aui-da-a-popover" data-csa-c-type="widget" data-render-id="r1gn1lc2yyffru2s4njhgb6aqo5" data-version-id="vgrbnavj5iylf2a1plj09cp2jv"><a aria-label="4.4 out of 5 stars, rating details" class="a-popover-trigger a-declarative" href="javascript:void(0)" role="button"><i aria-hidden="true" class="a-icon a-icon-star-small a-star-small-4-5" data-cy="reviews-ratings-slot"><span class="a-icon-alt">4.4 out of 5 stars</span></i><i class="a-icon a-icon-popover"></i></a></span> <span class="rush-component" data-component-type="s-client-side-analytics" data-render-id="r1gn1lc2yyffru2s4njhgb6aqo5" data-version-id="vgrbnavj5iylf2a1plj09cp2jv"><div class="s-csa-instrumentation-wrapper alf-search-csa-instrumentation-wrapper" data-csa-c-asin="B0BX61LV6Z" data-csa-c-content-id="alf-customer-ratings-count-component" data-csa-c-layout="LIST" data-csa-c-slot-id="alf-reviews" data-csa-c-type="alf-af-component" data-csa-op-log-render="" style="display: inline-block"><a aria-label="77 ratings" class="a-link-normal s-underline-text s-underline-link-text s-link-style" href="/Sony-WH-CH720N-Cancelling-Headphone-Microfiber/dp/B0BX61LV6Z/ref=sr_1_6?crid=1747167176&amp;dib=eyJ2IjoiMSJ9.P5fd7Y2gv2tXww9t5BeoO9lJE3aF9u4FwyTddP4jCpcKoYIc3GUXe7Dk1tq2WKRjePccSO0bUb3RrmeHm24MVI9jy7oGamqGNzXz4ckA5I7-A3b38jSFZoltWJW-wAVCntuzqDoG5v_5_CsqcEroM__VvK5VUvt8RdJVsViKtTHqhlbjPAfF9qbySHx_hADrsjpGjNdJsra9fH-LxHHLVdTKNyjA4kzsKjD_CWrRejp3Q0fyv3TKSdFVEynZR5E9Da2f2lfpCuNH8eptNztELilxds2UdGCll2m8qIjsqx0.oiRFLW-0xusDjFMKUZQP-t4EKRqXZUIzZA92wV93-Ac&amp;dib_tag=se&amp;keywords=sony+headphones+Sony+WH-1000XM4+Sony+XM4+headphones+Sony+WH-1000XM4+headphones&amp;qid=1747167176&amp;s=electronics&amp;sr=1-6#customerReviews"><span aria-hidden="true" class="a-size-base s-underline-text">77</span> </a> </div></span></div><div class="a-row a-size-base"><span class="a-size-base a-color-secondary">50+ bought in past month</span></div></div><div class="puisg-row"><div class="puisg-col puisg-col-4-of-4 puisg-col-4-of-8 puisg-col-4-of-12 puisg-col-4-of-16 puisg-col-4-of-20 puisg-col-4-of-24"><div class="puisg-col-inner"><div class="a-section a-spacing-none a-spacing-top-micro puis-price-instructions-style" data-cy="price-recipe"><div class="a-row a-size-base a-color-base"><a class="a-link-normal s-no-hover s-underline-text s-underline-link-text s-link-style a-text-normal" href="/Sony-WH-CH720N-Cancelling-Headphone-Microfiber/dp/B0BX61LV6Z/ref=sr_1_6?crid=1747167176&amp;dib=eyJ2IjoiMSJ9.P5fd7Y2gv2tXww9t5BeoO9lJE3aF9u4FwyTddP4jCpcKoYIc3GUXe7Dk1tq2WKRjePccSO0bUb3RrmeHm24MVI9jy7oGamqGNzXz4ckA5I7-A3b38jSFZoltWJW-wAVCntuzqDoG5v_5_CsqcEroM__VvK5VUvt8RdJVsViKtTHqhlbjPAfF9qbySHx_hADrsjpGjNdJsra9fH-LxHHLVdTKNyjA4kzsKjD_CWrRejp3Q0fyv3TKSdFVEynZR5E9Da2f2lfpCuNH8eptNztELilxds2UdGCll2m8qIjsqx0.oiRFLW-0xusDjFMKUZQP-t4EKRqXZUIzZA92wV93-Ac&amp;dib_tag=se&amp;keywords=sony+headphones+Sony+WH-1000XM4+Sony+XM4+headphones+Sony+WH-1000XM4+headphones&amp;qid=1747167176&amp;s=electronics&amp;sr=1-6"><span class="a-size-base-plus a-color-base a-text-normal">Click to see price</span></a></div></div><div class="a-section a-spacing-none a-spacing-top-micro" data-cy="delivery-recipe"><div class="a-row a-size-base a-color-secondary s-align-children-center"><div class="a-row"><span aria-label="FREE delivery Fri, May 16 "><span class="a-color-base">FREE delivery </span><span class="a-color-base a-text-bold">Fri, May 16 </span></span></div><div class="a-row"><span aria-label="Or fastest delivery Thu, May 15 "><span class="a-color-base">Or fastest delivery </span><span class="a-color-base a-text-bold">Thu, May 15 </span></span></div></div></div><div class="a-section a-spacing-none a-spacing-top-mini"><div class="a-row"><div class="puis-atcb-container" data-atcb-props='{"cartType":"DEFAULT","csrfToken":"1@gxRU2nEbMkUwGsD8XWOcml2Z89YKQDvDQ8bSA+005tUTAAAAAQAAAABoI6fJcmF3AAAAAGfA1H5nd8xGEcC3127HUQ==@ML8U5V","sessionId":"143-9785774-8384943","locale":"en-US"}' data-atcb-uid="atcb-B0BX61LV6Z-6" data-cy="add-to-cart"><div class="addToCartShoppingPortalCSRFToken aok-hidden"><!-- sp:csrf --><meta content="hObc5L0HUIP0QLIm51c152fe1uspO/0sZaPwQus+UyD0AAAAAGgjp8kyMTg1N2VhNC04MTNkLTQ1NWQtOTFiNS00ZjYyNGIwMGZhYjc=" name="anti-csrftoken-a2z"/><!-- sp:end-csrf --></div><div class="a-section puis-atcb-add-container aok-inline-block"><div class="a-section atc-faceout-container"><form action="/cart/add-to-cart?ref=sr_atc_rt_add_6&amp;sr=1-6&amp;qid=1747167176&amp;discoveredAsins.0=B0BX61LV6Z" class="a-spacing-none" method="post"><!-- sp:csrf --><input name="anti-csrftoken-a2z" type="hidden" value="hObc5L0HUIP0QLIm51c152fe1uspO/0sZaPwQus+UyD0AAAAAGgjp8kyMTg1N2VhNC04MTNkLTQ1NWQtOTFiNS00ZjYyNGIwMGZhYjc="/><!-- sp:end-csrf --><input name="clientName" type="hidden" value="EUIC_AddToCart_Search"><input name="items[0.base][asin]" type="hidden" value="B0BX61LV6Z"/><input name="items[0.base][offerListingId]" type="hidden" value="ut1lAAfhwzUKJbhENWq8Xnon1kUrxt%2Fos93II%2BMXeFmpjgp7MBBqjyLkqelQSOXWWOiXK70PqBeTQfpP1Q8J9Ai8bpdoltXLRcLcxmuYNzzMqoExff4DXyHKaBGp5kROtLTE3xIpf2HvW2FHE8oJEk6m0fWt%2BfQHXXJDnYiwKrRd%2FoCOZ7MAGO2aNJmnmxmo"/><input name="items[0.base][quantity]" type="hidden" value="1"/><div class="a-section ax-replace a-spacing-none"><div class="ax-atc celwidget atc-btn-container" data-csa-c-content-id="ax-atc-EUIC_AddToCart_Search-content" data-csa-c-device-env="WEB" data-csa-c-device-os="UNRECOGNIZED" data-csa-c-device-type="DESKTOP" data-csa-c-item-id="B0BX61LV6Z" data-csa-c-item-type="asin" data-csa-c-pos="6" data-csa-c-slot-id="ax-atc-EUIC_AddToCart_Search" data-csa-c-type="item" id="ax-atc-EUIC_AddToCart_Search"><span class="a-declarative" data-action="puis-atcb-add-action-retail" data-csa-c-func-deps="aui-da-puis-atcb-add-action-retail" data-csa-c-type="widget" data-puis-atcb-add-action-retail='{"clientName":"EUIC_AddToCart_Search","messageSuccess":"Item Added","neoAtcUrl":"/cart/add-to-cart?ref=sr_atc_rt_add_6&amp;sr=1-6&amp;qid=1747167176&amp;discoveredAsins.0=B0BX61LV6Z","messageError":"Failed to add item","additionalParameters":{},"asin":"B0BX61LV6Z","spAttributionMethod":"POST","url":"https://data.amazon.com/api/marketplaces/ATVPDKIKX0DER/cart/carts/retail/items?ref=sr_atc_rt_add_6&amp;sr=1-6&amp;qid=1747167176&amp;discoveredAsins.0=B0BX61LV6Z","offerListingId":"ut1lAAfhwzUKJbhENWq8Xnon1kUrxt%2Fos93II%2BMXeFmpjgp7MBBqjyLkqelQSOXWWOiXK70PqBeTQfpP1Q8J9Ai8bpdoltXLRcLcxmuYNzzMqoExff4DXyHKaBGp5kROtLTE3xIpf2HvW2FHE8oJEk6m0fWt%2BfQHXXJDnYiwKrRd%2FoCOZ7MAGO2aNJmnmxmo"}' data-render-id="r1gn1lc2yyffru2s4njhgb6aqo5" data-version-id="vgrbnavj5iylf2a1plj09cp2jv"><div data-csa-c-action-name="addToCart" data-csa-c-content-id="s-search-add-to-cart-action" data-csa-c-device-env="WEB" data-csa-c-device-os="UNRECOGNIZED" data-csa-c-device-type="DESKTOP" data-csa-c-item-id="B0BX61LV6Z" data-csa-c-item-type="asin" data-csa-c-type="action"><span class="a-button a-button-primary a-button-icon puis-atcb-button"><span class="a-button-inner"><i class="a-icon a-icon-cart"></i><button aria-label="Add to cart" class="a-button-text" name="submit.addToCart" type="button">Add to cart</button></span></span></div></span></div></div></input></form></div></div><div class="a-section puis-atcb-error-container aok-hidden"><div class="a-box a-alert-inline a-alert-inline-error" role="alert"><div class="a-box-inner a-alert-container"><i class="a-icon a-icon-alert"></i><div class="a-alert-content"><span class="a-size-mini puis-atcb-error-message"></span></div></div></div></div><div class="a-section puis-atcb-extra-container"></div></div></div></div></div></div><div class="puisg-col puisg-col-0-of-4 puisg-col-0-of-8 puisg-col-4-of-12 puisg-col-4-of-16 puisg-col-8-of-20 puisg-col-8-of-24"><div class="puisg-col-inner"></div></div></div><div class="puisg-row"></div></div></div></div></div></div></div></span></div></div></div>
            ```
            
            Extract:
            - title: Full product title
            - price: Numeric price value only (no currency symbol)
            - was_price: Original price before discount (if present)
            - currency: Currency code (e.g., USD)
            - url: Product URL
            - image_url: Main product image URL
            - rating: Star rating (0-5)
            - reviews: Number of reviews
            - asin: Amazon ASIN
            - is_prime: Boolean for Prime eligible
            - is_sponsored: Boolean for sponsored listing
            - is_amazon_choice: Boolean for Amazon's Choice
            - is_best_seller: Boolean for Best Seller
            - description: Any additional description text
            - delivery_info: Delivery/shipping information
            - out_of_stock: Boolean for out of stock status
            
            Return a clean JSON object with these fields. Use null for missing values.
            
2025-05-13 16:13:11,837 - DealFinderAI.AmazonScraperAgent - INFO - Gemini extracted: Sony WH-CH720N Noise Canceling Wireless Headphones Bluetooth Over The Ear Headset with Microphone and Alexa Built-in, Black Bundle with Deco Gear Case, Pro Audio Stand, Microfiber Cloth WH-CH720N/B at None USD
2025-05-13 16:13:11,837 - DealFinderAI.AmazonScraperAgent - INFO - Gemini used for product extraction
2025-05-13 16:13:11,837 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Sony WH-CH720N Noise Canceling Wireless Headphones Bluetooth Over The Ear Headset with Microphone and Alexa Built-in, Black Bundle with Deco Gear Case, Pro Audio Stand, Microfiber Cloth WH-CH720N/B at None USD
2025-05-13 16:13:11,837 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Sony WH-CH720N Noise Canceling Wireless Headphones Bluetooth Over The Ear Headset with Microphone and Alexa Built-in, Black Bundle with Deco Gear Case, Pro Audio Stand, Microfiber Cloth WH-CH720N/B at None USD
2025-05-13 16:13:11,841 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: WH-CH720NL Noise Canceling Wireless Bluetooth Headphones - Built-in Microphone - up to 35 Hours Battery Life and Quick Charge - Navy Blue at 139.95 USD
2025-05-13 16:13:11,841 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: WH-CH720NL Noise Canceling Wireless Bluetooth Headphones - Built-in Microphone - up to 35 Hours Battery Life and Quick Charge - Navy Blue at 139.95 USD
2025-05-13 16:13:11,846 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: WH-CH720NL Noise Canceling Wireless Bluetooth Headphones - Built-in Microphone - up to 35 Hours Battery Life and Quick Charge - Navy Blue at 141.39 USD
2025-05-13 16:13:11,846 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: WH-CH720NL Noise Canceling Wireless Bluetooth Headphones - Built-in Microphone - up to 35 Hours Battery Life and Quick Charge - Navy Blue at 141.39 USD
2025-05-13 16:13:11,849 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Sony WH-1000XM4 Wireless Noise Canceling Overhead Headphones - Black (Renewed) at 201.8 USD
2025-05-13 16:13:11,849 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Sony WH-1000XM4 Wireless Noise Canceling Overhead Headphones - Black (Renewed) at 201.8 USD
2025-05-13 16:13:11,853 - DealFinderAI.AmazonScraperAgent - WARNING - Incomplete data for ASIN B09CGB6VRR, falling back to Gemini extraction.
2025-05-13 16:13:11,854 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: 
            Extract detailed product information from this Amazon listing HTML:
            
            ```html
            <div class="sg-col-20-of-24 s-result-item s-asin sg-col-0-of-12 sg-col-16-of-20 sg-col s-widget-spacing-small sg-col-12-of-16" data-asin="B09CGB6VRR" data-component-type="s-search-result" data-index="15" data-uuid="118f7f73-f91c-4a51-825d-8d76991fee69" id="118f7f73-f91c-4a51-825d-8d76991fee69" role="listitem"><div class="sg-col-inner"><div cel_widget_id="MAIN-SEARCH_RESULTS-15" class="s-widget-container s-spacing-small s-widget-container-height-small celwidget slot=MAIN template=SEARCH_RESULTS widgetId=search-results_10" data-csa-c-item-id="amzn1.asin.1.B09CGB6VRR" data-csa-c-pos="10" data-csa-c-type="item" data-csa-op-log-render=""><span class="a-declarative" data-action="puis-card-container-declarative" data-csa-c-func-deps="aui-da-puis-card-container-declarative" data-csa-c-item-id="amzn1.asin.B09CGB6VRR" data-csa-c-owner="puis" data-csa-c-posx="10" data-csa-c-type="item" data-render-id="r1gn1lc2yyffru2s4njhgb6aqo5" data-version-id="vgrbnavj5iylf2a1plj09cp2jv"><div class="puis-card-container s-card-container s-overflow-hidden aok-relative puis-include-content-margin puis puis-vgrbnavj5iylf2a1plj09cp2jv s-latency-cf-section puis-card-border" data-cy="asin-faceout-container"><div class="a-section"><div class="puisg-row"><div class="puisg-col puisg-col-4-of-4 puisg-col-4-of-8 puisg-col-4-of-12 puisg-col-4-of-16 puisg-col-4-of-20 puisg-col-4-of-24 puis-list-col-left"><div class="puisg-col-inner"><div class="a-section a-spacing-none aok-relative puis-status-badge-container s-list-status-badge-container"></div><div class="s-product-image-container aok-relative s-text-center s-image-overlay-grey puis-image-overlay-grey s-padding-left-small s-padding-right-small puis-flex-expand-height puis puis-vgrbnavj5iylf2a1plj09cp2jv" data-cy="image-container"><div class="aok-relative"><span class="rush-component" data-component-type="s-product-image" data-render-id="r1gn1lc2yyffru2s4njhgb6aqo5" data-version-id="vgrbnavj5iylf2a1plj09cp2jv"><a class="a-link-normal s-no-outline" href="/Sony-WH-XB910N-Cancelling-Headphones-Microphone/dp/B09CGB6VRR/ref=sr_1_10?crid=1747167176&amp;dib=eyJ2IjoiMSJ9.P5fd7Y2gv2tXww9t5BeoO9lJE3aF9u4FwyTddP4jCpcKoYIc3GUXe7Dk1tq2WKRjePccSO0bUb3RrmeHm24MVI9jy7oGamqGNzXz4ckA5I7-A3b38jSFZoltWJW-wAVCntuzqDoG5v_5_CsqcEroM__VvK5VUvt8RdJVsViKtTHqhlbjPAfF9qbySHx_hADrsjpGjNdJsra9fH-LxHHLVdTKNyjA4kzsKjD_CWrRejp3Q0fyv3TKSdFVEynZR5E9Da2f2lfpCuNH8eptNztELilxds2UdGCll2m8qIjsqx0.oiRFLW-0xusDjFMKUZQP-t4EKRqXZUIzZA92wV93-Ac&amp;dib_tag=se&amp;keywords=sony+headphones+Sony+WH-1000XM4+Sony+XM4+headphones+Sony+WH-1000XM4+headphones&amp;qid=1747167176&amp;s=electronics&amp;sr=1-10" tabindex="-1"><div class="a-section aok-relative s-image-fixed-height"><img alt="Sony WH-XB910N EXTRA BASS Noise Cancelling Headphones, Wireless Bluetooth Over the Ear Headset with Microphone and Alexa V..." aria-hidden="true" class="s-image" data-image-index="10" data-image-latency="s-product-image" data-image-load="" data-image-source-density="1" src="https://m.media-amazon.com/images/I/612MKMMiDmL._AC_UY218_.jpg" srcset="https://m.media-amazon.com/images/I/612MKMMiDmL._AC_UY218_.jpg 1x, https://m.media-amazon.com/images/I/612MKMMiDmL._AC_UY327_FMwebp_QL65_.jpg 1.5x, https://m.media-amazon.com/images/I/612MKMMiDmL._AC_UY436_FMwebp_QL65_.jpg 2x, https://m.media-amazon.com/images/I/612MKMMiDmL._AC_UY545_FMwebp_QL65_.jpg 2.5x, https://m.media-amazon.com/images/I/612MKMMiDmL._AC_UY654_FMwebp_QL65_.jpg 3x"/></div></a></span></div></div></div></div><div class="puisg-col puisg-col-0-of-4 puisg-col-0-of-8 puisg-col-4-of-12 puisg-col-8-of-16 puisg-col-12-of-20 puisg-col-12-of-24 puis-list-col-right"><div class="puisg-col-inner"><div class="a-section a-spacing-small a-spacing-top-small"><div class="a-section a-spacing-none puis-padding-right-small s-title-instructions-style" data-cy="title-recipe"><div class="a-row"><div class="a-row a-color-secondary"><h2 class="a-size-mini s-line-clamp-1"><span class="a-size-medium a-color-base">Sony</span></h2></div></div><a class="a-link-normal s-line-clamp-2 s-link-style a-text-normal" href="/Sony-WH-XB910N-Cancelling-Headphones-Microphone/dp/B09CGB6VRR/ref=sr_1_10?crid=1747167176&amp;dib=eyJ2IjoiMSJ9.P5fd7Y2gv2tXww9t5BeoO9lJE3aF9u4FwyTddP4jCpcKoYIc3GUXe7Dk1tq2WKRjePccSO0bUb3RrmeHm24MVI9jy7oGamqGNzXz4ckA5I7-A3b38jSFZoltWJW-wAVCntuzqDoG5v_5_CsqcEroM__VvK5VUvt8RdJVsViKtTHqhlbjPAfF9qbySHx_hADrsjpGjNdJsra9fH-LxHHLVdTKNyjA4kzsKjD_CWrRejp3Q0fyv3TKSdFVEynZR5E9Da2f2lfpCuNH8eptNztELilxds2UdGCll2m8qIjsqx0.oiRFLW-0xusDjFMKUZQP-t4EKRqXZUIzZA92wV93-Ac&amp;dib_tag=se&amp;keywords=sony+headphones+Sony+WH-1000XM4+Sony+XM4+headphones+Sony+WH-1000XM4+headphones&amp;qid=1747167176&amp;s=electronics&amp;sr=1-10"><h2 aria-label="WH-XB910N EXTRA BASS Noise Cancelling Headphones, Wireless Bluetooth Over the Ear Headset with Microphone and Alexa Voice Control, Black" class="a-size-medium a-spacing-none a-color-base a-text-normal"><span>WH-XB910N EXTRA BASS Noise Cancelling Headphones, Wireless Bluetooth Over the Ear Headset with Microphone and Alexa Voice Control, Black</span></h2></a> </div><div class="a-section a-spacing-none a-spacing-top-micro" data-cy="reviews-block"><div class="a-row a-size-small"><span class="a-declarative" data-a-popover='{"position":"triggerBottom","popoverLabel":"4.5 out of 5 stars, rating details","url":"/review/widgets/average-customer-review/popover/ref=acr_search__popover?ie=UTF8&amp;asin=B09CGB6VRR&amp;ref_=acr_search__popover&amp;contextId=search","closeButton":true,"closeButtonLabel":""}' data-action="a-popover" data-csa-c-func-deps="aui-da-a-popover" data-csa-c-type="widget" data-render-id="r1gn1lc2yyffru2s4njhgb6aqo5" data-version-id="vgrbnavj5iylf2a1plj09cp2jv"><a aria-label="4.5 out of 5 stars, rating details" class="a-popover-trigger a-declarative" href="javascript:void(0)" role="button"><i aria-hidden="true" class="a-icon a-icon-star-small a-star-small-4-5" data-cy="reviews-ratings-slot"><span class="a-icon-alt">4.5 out of 5 stars</span></i><i class="a-icon a-icon-popover"></i></a></span> <span class="rush-component" data-component-type="s-client-side-analytics" data-render-id="r1gn1lc2yyffru2s4njhgb6aqo5" data-version-id="vgrbnavj5iylf2a1plj09cp2jv"><div class="s-csa-instrumentation-wrapper alf-search-csa-instrumentation-wrapper" data-csa-c-asin="B09CGB6VRR" data-csa-c-content-id="alf-customer-ratings-count-component" data-csa-c-layout="LIST" data-csa-c-slot-id="alf-reviews" data-csa-c-type="alf-af-component" data-csa-op-log-render="" style="display: inline-block"><a aria-label="10,549 ratings" class="a-link-normal s-underline-text s-underline-link-text s-link-style" href="/Sony-WH-XB910N-Cancelling-Headphones-Microphone/dp/B09CGB6VRR/ref=sr_1_10?crid=1747167176&amp;dib=eyJ2IjoiMSJ9.P5fd7Y2gv2tXww9t5BeoO9lJE3aF9u4FwyTddP4jCpcKoYIc3GUXe7Dk1tq2WKRjePccSO0bUb3RrmeHm24MVI9jy7oGamqGNzXz4ckA5I7-A3b38jSFZoltWJW-wAVCntuzqDoG5v_5_CsqcEroM__VvK5VUvt8RdJVsViKtTHqhlbjPAfF9qbySHx_hADrsjpGjNdJsra9fH-LxHHLVdTKNyjA4kzsKjD_CWrRejp3Q0fyv3TKSdFVEynZR5E9Da2f2lfpCuNH8eptNztELilxds2UdGCll2m8qIjsqx0.oiRFLW-0xusDjFMKUZQP-t4EKRqXZUIzZA92wV93-Ac&amp;dib_tag=se&amp;keywords=sony+headphones+Sony+WH-1000XM4+Sony+XM4+headphones+Sony+WH-1000XM4+headphones&amp;qid=1747167176&amp;s=electronics&amp;sr=1-10#customerReviews"><span aria-hidden="true" class="a-size-base s-underline-text">10,549</span> </a> </div></span></div></div><div class="puisg-row"><div class="puisg-col puisg-col-4-of-4 puisg-col-4-of-8 puisg-col-4-of-12 puisg-col-4-of-16 puisg-col-4-of-20 puisg-col-4-of-24"><div class="puisg-col-inner"><div class="a-section a-spacing-none a-spacing-top-micro puis-price-instructions-style" data-cy="price-recipe"><div class="a-row a-size-base a-color-base"><div class="a-row"></div><div class="a-row"></div></div></div><div class="a-section a-spacing-none a-spacing-top-micro" data-cy="certification-recipe"><div class="a-section a-spacing-none s-align-children-center"><div class="a-section a-spacing-none s-pc-faceout-container"><div> <div class="s-align-children-center"><span class="a-declarative" data-action="s-pc-sidesheet-open" data-csa-c-func-deps="aui-da-s-pc-sidesheet-open" data-csa-c-type="widget" data-render-id="r1gn1lc2yyffru2s4njhgb6aqo5" data-s-pc-sidesheet-open='{"preloadDomId":"pc-side-sheet-B09CGB6VRR","popoverLabel":"Product certifications","interactLoggingMetricsList":["provenanceCertifications_desktop_alexa_inside"],"closeButtonLabel":"Close popup","dwellMetric":"provenanceCertifications_desktop_alexa_inside_t"}' data-version-id="vgrbnavj5iylf2a1plj09cp2jv"><a class="a-link-normal s-no-underline s-pc-badge s-align-children-center aok-block" data-cy="s-pc-faceout-badge" href="javascript:void(0)" role="button"><div class="a-section s-pc-attribute-pill-text s-margin-bottom-none s-margin-bottom-none aok-block s-pc-certification-faceout"><span class="faceout-image-view"></span><img alt="" class="s-image" height="18px" src="https://m.media-amazon.com/images/I/11hfR5Cq9GL._SS200_.png" width="18px"/> <span class="a-size-base a-color-base">Alexa Built-in</span><div class="s-margin-bottom-none s-pc-sidesheet-chevron aok-nowrap"><i class="a-icon a-icon-popover aok-align-center" role="presentation"></i></div></div></a></span></div></div></div></div><div class="a-section puis puis-vgrbnavj5iylf2a1plj09cp2jv aok-hidden" id="pc-side-sheet-B09CGB6VRR"><div class="a-section s-pc-container-side-sheet"><div class="s-align-children-center a-spacing-small"><div aria-level="2" class="s-align-children-center s-pc-certification" role="heading"><span class="faceout-image-view"></span><div alt="" class="a-image-wrapper a-lazy-loaded a-manually-loaded s-image" data-a-image-source="https://m.media-amazon.com/images/I/11hfR5Cq9GL._SS200_.png" style="height:24px;width:24px;"><noscript><img alt="" height="24px" src="https://m.media-amazon.com/images/I/11hfR5Cq9GL._SS200_.png" width="24px"/></noscript></div> <span class="a-size-medium-plus a-color-base a-text-bold">Alexa Built-in</span></div></div><div class="a-spacing-medium s-pc-link-container"><span class="a-size-base a-color-secondary">Alexa Built-in devices let you talk directly to Alexa, allowing you to play music, control your smart home, get news, weather, and more using your voice.</span> <a class="a-size-base a-link-normal s-link-style" href="https://www.amazon.com/b?node=21609889011">Learn more</a> </div></div></div></div><div class="a-section a-spacing-none a-spacing-top-mini"><div class="puis-see-details-content"><div data-csa-c-content-id="s-search-see-details-button" data-csa-c-device-env="WEB" data-csa-c-device-os="UNRECOGNIZED" data-csa-c-device-type="DESKTOP" data-csa-c-item-id="B09CGB6VRR" data-csa-c-item-type="asin" data-csa-c-type="action"><span class="a-button a-button-base"><span class="a-button-inner"><a class="a-button-text" href="/Sony-WH-XB910N-Cancelling-Headphones-Microphone/dp/B09CGB6VRR/ref=sr_1_10_so_HEADPHONES?crid=1747167176&amp;dib=eyJ2IjoiMSJ9.P5fd7Y2gv2tXww9t5BeoO9lJE3aF9u4FwyTddP4jCpcKoYIc3GUXe7Dk1tq2WKRjePccSO0bUb3RrmeHm24MVI9jy7oGamqGNzXz4ckA5I7-A3b38jSFZoltWJW-wAVCntuzqDoG5v_5_CsqcEroM__VvK5VUvt8RdJVsViKtTHqhlbjPAfF9qbySHx_hADrsjpGjNdJsra9fH-LxHHLVdTKNyjA4kzsKjD_CWrRejp3Q0fyv3TKSdFVEynZR5E9Da2f2lfpCuNH8eptNztELilxds2UdGCll2m8qIjsqx0.oiRFLW-0xusDjFMKUZQP-t4EKRqXZUIzZA92wV93-Ac&amp;dib_tag=se&amp;keywords=sony+headphones+Sony+WH-1000XM4+Sony+XM4+headphones+Sony+WH-1000XM4+headphones&amp;qid=1747167176&amp;s=electronics&amp;sr=1-10">See options</a></span></span></div></div></div><div class="a-section a-spacing-none a-spacing-top-mini s-color-swatch-container-list-view"><div class="a-section s-color-swatch-container s-color-swatch-container-left-aligned s-quick-view-text-align-start"><div class="a-section s-color-swatch-outer-circle s-color-swatch-pad s-color-swatch-outer-circle-selected"><div data-csa-c-content-id="color-swatch-link" data-csa-c-device-env="WEB" data-csa-c-device-os="UNRECOGNIZED" data-csa-c-device-type="DESKTOP" data-csa-c-interaction-events="click" data-csa-c-product-type="HEADPHONES" data-csa-c-swatch-is-selected="true" data-csa-c-swatch-position="1" data-csa-c-swatch-url="/Sony-WH-XB910N-Cancelling-Headphones-Microphone/dp/B09CGB6VRR/ref=cs_sr_dp_1?crid=1747167176&amp;dib=eyJ2IjoiMSJ9.P5fd7Y2gv2tXww9t5BeoO9lJE3aF9u4FwyTddP4jCpcKoYIc3GUXe7Dk1tq2WKRjePccSO0bUb3RrmeHm24MVI9jy7oGamqGNzXz4ckA5I7-A3b38jSFZoltWJW-wAVCntuzqDoG5v_5_CsqcEroM__VvK5VUvt8RdJVsViKtTHqhlbjPAfF9qbySHx_hADrsjpGjNdJsra9fH-LxHHLVdTKNyjA4kzsKjD_CWrRejp3Q0fyv3TKSdFVEynZR5E9Da2f2lfpCuNH8eptNztELilxds2UdGCll2m8qIjsqx0.oiRFLW-0xusDjFMKUZQP-t4EKRqXZUIzZA92wV93-Ac&amp;dib_tag=se&amp;keywords=sony+headphones+Sony+WH-1000XM4+Sony+XM4+headphones+Sony+WH-1000XM4+headphones&amp;qid=1747167176&amp;s=electronics&amp;sr=1-10" data-csa-c-type="link"><a aria-label="Black" class="a-link-normal" href="/Sony-WH-XB910N-Cancelling-Headphones-Microphone/dp/B09CGB6VRR/ref=cs_sr_dp_1?crid=1747167176&amp;dib=eyJ2IjoiMSJ9.P5fd7Y2gv2tXww9t5BeoO9lJE3aF9u4FwyTddP4jCpcKoYIc3GUXe7Dk1tq2WKRjePccSO0bUb3RrmeHm24MVI9jy7oGamqGNzXz4ckA5I7-A3b38jSFZoltWJW-wAVCntuzqDoG5v_5_CsqcEroM__VvK5VUvt8RdJVsViKtTHqhlbjPAfF9qbySHx_hADrsjpGjNdJsra9fH-LxHHLVdTKNyjA4kzsKjD_CWrRejp3Q0fyv3TKSdFVEynZR5E9Da2f2lfpCuNH8eptNztELilxds2UdGCll2m8qIjsqx0.oiRFLW-0xusDjFMKUZQP-t4EKRqXZUIzZA92wV93-Ac&amp;dib_tag=se&amp;keywords=sony+headphones+Sony+WH-1000XM4+Sony+XM4+headphones+Sony+WH-1000XM4+headphones&amp;qid=1747167176&amp;s=electronics&amp;sr=1-10" role="button"><span class="s-color-swatch-inner-circle-fill" style="background-color: #3C3C3C"><span class="s-color-swatch-inner-circle-border"></span></span></a></div></div><div class="a-section s-color-swatch-outer-circle s-color-swatch-pad"><div data-csa-c-content-id="color-swatch-link" data-csa-c-device-env="WEB" data-csa-c-device-os="UNRECOGNIZED" data-csa-c-device-type="DESKTOP" data-csa-c-interaction-events="click" data-csa-c-product-type="HEADPHONES" data-csa-c-swatch-is-selected="false" data-csa-c-swatch-position="2" data-csa-c-swatch-url="/Sony-WH-XB910N-Cancelling-Headphones-Microphone/dp/B09CG2P4Z2/ref=cs_sr_dp_2?crid=1747167176&amp;dib=eyJ2IjoiMSJ9.P5fd7Y2gv2tXww9t5BeoO9lJE3aF9u4FwyTddP4jCpcKoYIc3GUXe7Dk1tq2WKRjePccSO0bUb3RrmeHm24MVI9jy7oGamqGNzXz4ckA5I7-A3b38jSFZoltWJW-wAVCntuzqDoG5v_5_CsqcEroM__VvK5VUvt8RdJVsViKtTHqhlbjPAfF9qbySHx_hADrsjpGjNdJsra9fH-LxHHLVdTKNyjA4kzsKjD_CWrRejp3Q0fyv3TKSdFVEynZR5E9Da2f2lfpCuNH8eptNztELilxds2UdGCll2m8qIjsqx0.oiRFLW-0xusDjFMKUZQP-t4EKRqXZUIzZA92wV93-Ac&amp;dib_tag=se&amp;keywords=sony+headphones+Sony+WH-1000XM4+Sony+XM4+headphones+Sony+WH-1000XM4+headphones&amp;qid=1747167176&amp;s=electronics&amp;sr=1-10" data-csa-c-type="link"><a aria-label="Blue" class="a-link-normal" href="/Sony-WH-XB910N-Cancelling-Headphones-Microphone/dp/B09CG2P4Z2/ref=cs_sr_dp_2?crid=1747167176&amp;dib=eyJ2IjoiMSJ9.P5fd7Y2gv2tXww9t5BeoO9lJE3aF9u4FwyTddP4jCpcKoYIc3GUXe7Dk1tq2WKRjePccSO0bUb3RrmeHm24MVI9jy7oGamqGNzXz4ckA5I7-A3b38jSFZoltWJW-wAVCntuzqDoG5v_5_CsqcEroM__VvK5VUvt8RdJVsViKtTHqhlbjPAfF9qbySHx_hADrsjpGjNdJsra9fH-LxHHLVdTKNyjA4kzsKjD_CWrRejp3Q0fyv3TKSdFVEynZR5E9Da2f2lfpCuNH8eptNztELilxds2UdGCll2m8qIjsqx0.oiRFLW-0xusDjFMKUZQP-t4EKRqXZUIzZA92wV93-Ac&amp;dib_tag=se&amp;keywords=sony+headphones+Sony+WH-1000XM4+Sony+XM4+headphones+Sony+WH-1000XM4+headphones&amp;qid=1747167176&amp;s=electronics&amp;sr=1-10" role="button"><span class="s-color-swatch-inner-circle-fill" style="background-color: #425261"><span class="s-color-swatch-inner-circle-border"></span></span></a></div></div></div></div></div></div><div class="puisg-col puisg-col-0-of-4 puisg-col-0-of-8 puisg-col-4-of-12 puisg-col-4-of-16 puisg-col-8-of-20 puisg-col-8-of-24"><div class="puisg-col-inner"></div></div></div><div class="puisg-row"></div></div></div></div></div></div></div></span></div></div></div>
            ```
            
            Extract:
            - title: Full product title
            - price: Numeric price value only (no currency symbol)
            - was_price: Original price before discount (if present)
            - currency: Currency code (e.g., USD)
            - url: Product URL
            - image_url: Main product image URL
            - rating: Star rating (0-5)
            - reviews: Number of reviews
            - asin: Amazon ASIN
            - is_prime: Boolean for Prime eligible
            - is_sponsored: Boolean for sponsored listing
            - is_amazon_choice: Boolean for Amazon's Choice
            - is_best_seller: Boolean for Best Seller
            - description: Any additional description text
            - delivery_info: Delivery/shipping information
            - out_of_stock: Boolean for out of stock status
            
            Return a clean JSON object with these fields. Use null for missing values.
            
2025-05-13 16:13:16,664 - DealFinderAI.AmazonScraperAgent - INFO - Gemini extracted: Sony WH-XB910N EXTRA BASS Noise Cancelling Headphones, Wireless Bluetooth Over the Ear Headset with Microphone and Alexa Voice Control, Black at None USD
2025-05-13 16:13:16,665 - DealFinderAI.AmazonScraperAgent - INFO - Gemini used for product extraction
2025-05-13 16:13:16,665 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Sony WH-XB910N EXTRA BASS Noise Cancelling Headphones, Wireless Bluetooth Over the Ear Headset with Microphone and Alexa Voice Control, Black at None USD
2025-05-13 16:13:16,665 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Sony WH-XB910N EXTRA BASS Noise Cancelling Headphones, Wireless Bluetooth Over the Ear Headset with Microphone and Alexa Voice Control, Black at None USD
2025-05-13 16:13:17,724 - DealFinderAI.AmazonScraperAgent - INFO - Extracted 10 products from Amazon
2025-05-13 16:13:17,726 - DealFinderAI.AmazonScraperAgent - INFO - Applying relevance filtering to 10 products
2025-05-13 16:13:17,726 - DealFinderAI.AmazonScraperAgent - ERROR - Error in relevance filtering: 'NoneType' object has no attribute 'lower'
2025-05-13 16:13:17,727 - DealFinderAI.Controller - INFO - Amazon response content: {'source': 'Amazon', 'query': 'sony headphones Sony WH-1000XM4 Sony XM4 headphones Sony WH-1000XM4 headphones', 'products': [{'title': 'Sony WH-CH520 Best Wireless Bluetooth On-Ear Headphones with Microphone for Calls and Voice Control, Up to 50 Hours Battery Life with Quick Charge Function, Includes USB-C Charging Cable - Beige', 'price': 29.99, 'was_price': None, 'currency': '$', 'url': '/Sony-WH-CH520-Bluetooth-Headphones-Microphone/dp/B0BVPPB88D/ref=sr_1_1?crid=1747167176&dib=eyJ2IjoiMSJ9.P5fd7Y2gv2tXww9t5BeoO9lJE3aF9u4FwyTddP4jCpcKoYIc3GUXe7Dk1tq2WKRjePccSO0bUb3RrmeHm24MVI9jy7oGamqGNzXz4ckA5I7-A3b38jSFZoltWJW-wAVCntuzqDoG5v_5_CsqcEroM__VvK5VUvt8RdJVsViKtTHqhlbjPAfF9qbySHx_hADrsjpGjNdJsra9fH-LxHHLVdTKNyjA4kzsKjD_CWrRejp3Q0fyv3TKSdFVEynZR5E9Da2f2lfpCuNH8eptNztELilxds2UdGCll2m8qIjsqx0.oiRFLW-0xusDjFMKUZQP-t4EKRqXZUIzZA92wV93-Ac&dib_tag=se&keywords=sony+headphones+Sony+WH-1000XM4+Sony+XM4+headphones+Sony+WH-1000XM4+headphones&qid=1747167176&s=electronics&sr=1-1', 'image_url': 'https://m.media-amazon.com/images/I/511-Wvj9E2L._AC_UY218_.jpg', 'rating': 4.4, 'reviews': 1612, 'asin': 'B0BVPPB88D', 'is_prime': False, 'is_sponsored': False, 'is_amazon_choice': False, 'is_best_seller': False, 'description': None, 'delivery_info': None, 'out_of_stock': False, 'source': 'Amazon'}, {'title': 'Sony Wireless Bluetooth Headphones - Up to 50 Hours Battery Life with Quick Charge Function, On-Ear Model - WH-CH520C.CE7 - Limited Edition - Cappuccino/Beige', 'price': 48.99, 'was_price': None, 'currency': None, 'url': '/Sony-Wireless-Bluetooth-Headphones-Ear/dp/B0BTJ9WHL9/ref=sr_1_2?crid=1747167176&dib=eyJ2IjoiMSJ9.P5fd7Y2gv2tXww9t5BeoO9lJE3aF9u4FwyTddP4jCpcKoYIc3GUXe7Dk1tq2WKRjePccSO0bUb3RrmeHm24MVI9jy7oGamqGNzXz4ckA5I7-A3b38jSFZoltWJW-wAVCntuzqDoG5v_5_CsqcEroM__VvK5VUvt8RdJVsViKtTHqhlbjPAfF9qbySHx_hADrsjpGjNdJsra9fH-LxHHLVdTKNyjA4kzsKjD_CWrRejp3Q0fyv3TKSdFVEynZR5E9Da2f2lfpCuNH8eptNztELilxds2UdGCll2m8qIjsqx0.oiRFLW-0xusDjFMKUZQP-t4EKRqXZUIzZA92wV93-Ac&dib_tag=se&keywords=sony+headphones+Sony+WH-1000XM4+Sony+XM4+headphones+Sony+WH-1000XM4+headphones&qid=1747167176&s=electronics&sr=1-2', 'image_url': 'https://m.media-amazon.com/images/I/61hKen6gPrL._AC_UY218_.jpg', 'rating': 4.4, 'reviews': 28670, 'asin': 'B0BTJ9WHL9', 'is_prime': False, 'is_sponsored': False, 'is_amazon_choice': False, 'is_best_seller': False, 'description': None, 'delivery_info': None, 'out_of_stock': False, 'source': 'Amazon'}, {'title': 'WH-CH720NB Noise Canceling Wireless Bluetooth Headphones - Built-in Microphone - up to 35 Hours Battery Life and Quick Charge - Black - International Version', 'price': 129.97, 'was_price': 148.0, 'currency': 'USD', 'url': 'https://www.amazon.com/Sony-WH-CH720NB-Canceling-Bluetooth-Headphones/dp/B0CFSCT8GQ/ref=sr_1_3?crid=1747167176&dib=eyJ2IjoiMSJ9.P5fd7Y2gv2tXww9t5BeoO9lJE3aF9u4FwyTddP4jCpcKoYIc3GUXe7Dk1tq2WKRjePccSO0bUb3RrmeHm24MVI9jy7oGamqGNzXz4ckA5I7-A3b38jSFZoltWJW-wAVCntuzqDoG5v_5_CsqcEroM__VvK5VUvt8RdJVsViKtTHqhlbjPAfF9qbySHx_hADrsjpGjNdJsra9fH-LxHHLVdTKNyjA4kzsKjD_CWrRejp3Q0fyv3TKSdFVEynZR5E9Da2f2lfpCuNH8eptNztELilxds2UdGCll2m8qIjsqx0.oiRFLW-0xusDjFMKUZQP-t4EKRqXZUIzZA92wV93-Ac&dib_tag=se&keywords=sony+headphones+Sony+WH-1000XM4+Sony+XM4+headphones+Sony+WH-1000XM4+headphones&qid=1747167176&s=electronics&sr=1-3', 'image_url': 'https://m.media-amazon.com/images/I/51TnESMkz1L._AC_UY218_.jpg', 'rating': 4.4, 'reviews': 887, 'is_sponsored': False, 'is_prime': True, 'is_amazon_choice': False, 'is_best_seller': False, 'asin': 'B0CFSCT8GQ', 'description': 'SonyWH-CH720NB Noise Canceling Wireless Bluetooth Headphones - Built-in Microphone - up to 35 Hours Battery Life and Quick Charge - Black - International Version 4.4 out of 5 stars 887 500+ bought in past monthPrice, product page$129.97$129.97 List: $148.00List: $148.00$148.00 FREE delivery Sun, May 18 Or fastest delivery Tomorrow, May 14 Add to cart', 'delivery_info': '500+ bought in past month', 'out_of_stock': False, 'source': 'Amazon'}, {'title': 'Sony WH-910N Wireless Bluetooth Headphones Noise Canceling (Renewed)', 'price': 109.99, 'was_price': None, 'currency': 'USD', 'url': 'https://www.amazon.com/Sony-WH-910N-Bluetooth-Headphones-Canceling/dp/B08C9FLB2L/ref=sr_1_4?crid=1747167176&dib=eyJ2IjoiMSJ9.P5fd7Y2gv2tXww9t5BeoO9lJE3aF9u4FwyTddP4jCpcKoYIc3GUXe7Dk1tq2WKRjePccSO0bUb3RrmeHm24MVI9jy7oGamqGNzXz4ckA5I7-A3b38jSFZoltWJW-wAVCntuzqDoG5v_5_CsqcEroM__VvK5VUvt8RdJVsViKtTHqhlbjPAfF9qbySHx_hADrsjpGjNdJsra9fH-LxHHLVdTKNyjA4kzsKjD_CWrRejp3Q0fyv3TKSdFVEynZR5E9Da2f2lfpCuNH8eptNztELilxds2UdGCll2m8qIjsqx0.oiRFLW-0xusDjFMKUZQP-t4EKRqXZUIzZA92wV93-Ac&dib_tag=se&keywords=sony+headphones+Sony+WH-1000XM4+Sony+XM4+headphones+Sony+WH-1000XM4+headphones&qid=1747167176&s=electronics&sr=1-4', 'image_url': 'https://m.media-amazon.com/images/I/51jNrB4yOBL._AC_UY218_.jpg', 'rating': 4.2, 'reviews': 337, 'is_sponsored': False, 'is_prime': True, 'is_amazon_choice': False, 'is_best_seller': False, 'asin': 'B08C9FLB2L', 'description': 'Sony WH-910N Wireless Bluetooth Headphones Noise Canceling (Renewed) 4.2 out of 5 stars 337 Price, product page$109.99$109.99 FREE delivery Sun, May 18 Or fastest delivery Fri, May 16 Only 1 left in stock - order soon.See optionsMore Buying Choices$99.79(4+ used & new offers)', 'delivery_info': 'More Buying Choices', 'out_of_stock': False, 'source': 'Amazon'}, {'title': 'SONY WH-H900N h.Ear on 2 Wireless Over-Ear Noise Cancelling High Resolution Headphones (Black/Grey) (Renewed)', 'price': 99.99, 'was_price': 219.99, 'currency': 'USD', 'url': 'https://www.amazon.com/Sony-WH-H900N-Cancelling-Resolution-Headphones/dp/B07LDCLP11/ref=sr_1_5?crid=1747167176&dib=eyJ2IjoiMSJ9.P5fd7Y2gv2tXww9t5BeoO9lJE3aF9u4FwyTddP4jCpcKoYIc3GUXe7Dk1tq2WKRjePccSO0bUb3RrmeHm24MVI9jy7oGamqGNzXz4ckA5I7-A3b38jSFZoltWJW-wAVCntuzqDoG5v_5_CsqcEroM__VvK5VUvt8RdJVsViKtTHqhlbjPAfF9qbySHx_hADrsjpGjNdJsra9fH-LxHHLVdTKNyjA4kzsKjD_CWrRejp3Q0fyv3TKSdFVEynZR5E9Da2f2lfpCuNH8eptNztELilxds2UdGCll2m8qIjsqx0.oiRFLW-0xusDjFMKUZQP-t4EKRqXZUIzZA92wV93-Ac&dib_tag=se&keywords=sony+headphones+Sony+WH-1000XM4+Sony+XM4+headphones+Sony+WH-1000XM4+headphones&qid=1747167176&s=electronics&sr=1-5', 'image_url': 'https://m.media-amazon.com/images/I/71LKuMVDUpL._AC_UY218_.jpg', 'rating': 4.4, 'reviews': 531, 'is_sponsored': False, 'is_prime': False, 'is_amazon_choice': False, 'is_best_seller': False, 'asin': 'B07LDCLP11', 'description': 'SONY WH-H900N h.Ear on 2 Wireless Over-Ear Noise Cancelling High Resolution Headphones (Black/Grey) (Renewed) 4.4 out of 5 stars 531 Price, product page$99.99$99.99 New Price: $219.99New Price: $219.99$219.99FREE delivery Mon, May 19 Or fastest delivery May 15 - 16 Only 2 left in stock - order soon.See options', 'delivery_info': 'New Price:', 'out_of_stock': False, 'source': 'Amazon'}]}
2025-05-13 16:13:17,728 - DealFinderAI.Controller - INFO - Amazon returned 5 products
2025-05-13 16:13:17,728 - DealFinderAI.WalmartScraperAgent - INFO - Searching Walmart for: {'product_type': 'headphones', 'keywords': ['sony', 'xm4', 'series'], 'price_range': None, 'brands': ['sony'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-13 16:13:17,728 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: 
            Optimize this search query for Walmart's search engine:
            
            "headphones sony xm4 series sony"
            
            For Walmart searches, please:
            1. Focus on model numbers and specific identifiers if present
            2. Include key brand names (Walmart's search works well with brand names)
            3. Remove generic words that may dilute results
            4. Add Walmart-specific terms that might improve results (like "Rollback" if looking for deals)
            5. Prioritize precise product names and specifications
            
            Return a JSON object with:
            - optimized_keywords: List of 3-5 optimized search terms (most important first)
            - department_hint: Any Walmart department suggestion (Electronics, Home, etc.)
            - must_include_terms: Terms that MUST be in results
            - exclude_terms: Terms that should NOT be in results
            - walmart_specific_filters: Any Walmart-specific filters to apply
            
            Format as JSON only with no explanation.
            
2025-05-13 16:13:19,019 - DealFinderAI.WalmartScraperAgent - INFO - Optimized search parameters: {'product_type': 'headphones', 'keywords': ['Sony WH-1000XM4', 'Sony XM4 headphones', 'Sony WH-1000XM4 headphones'], 'price_range': None, 'brands': ['sony'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True, 'department': 'Electronics', 'must_include_terms': ['Sony', 'WH-1000XM4'], 'exclude_terms': ['series']}
2025-05-13 16:13:19,020 - DealFinderAI.WalmartScraperAgent - INFO - Built optimized Walmart search query: sony headphones Sony WH-1000XM4 Sony XM4 headphones Sony WH-1000XM4 headphones
2025-05-13 16:13:19,020 - DealFinderAI.WalmartScraperAgent - INFO - Built Walmart query: sony headphones Sony WH-1000XM4 Sony XM4 headphones Sony WH-1000XM4 headphones
2025-05-13 16:13:19,020 - DealFinderAI.WalmartScraperAgent - INFO - Making Walmart search request with params: {'q': 'sony headphones Sony WH-1000XM4 Sony XM4 headphones Sony WH-1000XM4 headphones Electronics', 'page': 1, 'affinityOverride': 'default', 'sort': 'price_low'}
2025-05-13 16:13:21,850 - DealFinderAI.WalmartScraperAgent - INFO - Extracted 0 products from JSON data
2025-05-13 16:13:21,850 - DealFinderAI.WalmartScraperAgent - INFO - JSON extraction failed, falling back to HTML extraction
2025-05-13 16:13:21,852 - DealFinderAI.WalmartScraperAgent - INFO - Found 9 product divs in HTML
2025-05-13 16:13:24,039 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 16:13:24,040 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Sony WH-1000XM4 Wireless Noise Canceling Over-the-Ear Headphones with Google Assistant - Black- (International Version) at 222.0 USD
2025-05-13 16:13:26,536 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 16:13:26,536 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Sony WH-1000XM4 Wireless Noise-Cancelling Over-The-Ear Headphones Midnight Blue at 229.0 USD
2025-05-13 16:13:29,258 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 16:13:29,258 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Sony WH-1000XM4 Wireless Noise Canceling Over-the-Ear Headphones with Google Assistant - Black at 236.99 USD
2025-05-13 16:13:31,848 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 16:13:31,849 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Sony WH-1000XM4 Wireless Noise Canceling Over-the-Ear Headphones with Google Assistant  Silver at 236.99 USD
2025-05-13 16:13:34,435 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 16:13:34,435 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Sony WH-1000XM4 Wireless Noise Cancelling Over-Ear Headphones (Silver)- (International Version) at 242.79 USD
2025-05-13 16:13:37,033 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 16:13:37,033 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Sony WH-1000XM4 Wireless Noise-Canceling Over-Ear Headphones (Black) - Includes: Connection Cable, USB Type-C Cable, Plug Adapter for In-Flight Use, Compact Carry Case & Microfiber Cleaning Cloth at 259.95 USD
2025-05-13 16:13:39,393 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 16:13:39,394 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Sony Wireless Noise Canceling Over-the-Ear Headphones with Microfiber Cloth - Blue - WH1000XM4BLU at 275.0 USD
2025-05-13 16:13:41,554 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 16:13:41,554 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Sony WH-1000XM4 Wireless Over-the-Ear Headphones Black with 3yr Diamond Mack Warranty at 275.99 USD
2025-05-13 16:13:44,182 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 16:13:44,183 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Sony WH-1000XM4 Noise Canceling Wireless Over Ear Headphones with USB Type-C Cable, Black at 297.59 USD
2025-05-13 16:13:44,183 - DealFinderAI.WalmartScraperAgent - INFO - Extracted 9 products from HTML
2025-05-13 16:13:44,183 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Sony WH-1000XM4 Wireless Noise Canceling Over-the-Ear Headphones with Google Assistant - Black- (International Version) at 222.0 USD
2025-05-13 16:13:44,183 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Sony WH-1000XM4 Wireless Noise-Cancelling Over-The-Ear Headphones Midnight Blue at 229.0 USD
2025-05-13 16:13:44,184 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Sony WH-1000XM4 Wireless Noise Canceling Over-the-Ear Headphones with Google Assistant - Black at 236.99 USD
2025-05-13 16:13:44,184 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Sony WH-1000XM4 Wireless Noise Canceling Over-the-Ear Headphones with Google Assistant  Silver at 236.99 USD
2025-05-13 16:13:44,184 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Sony WH-1000XM4 Wireless Noise Cancelling Over-Ear Headphones (Silver)- (International Version) at 242.79 USD
2025-05-13 16:13:44,184 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Sony WH-1000XM4 Wireless Noise-Canceling Over-Ear Headphones (Black) - Includes: Connection Cable, USB Type-C Cable, Plug Adapter for In-Flight Use, Compact Carry Case & Microfiber Cleaning Cloth at 259.95 USD
2025-05-13 16:13:44,185 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Sony Wireless Noise Canceling Over-the-Ear Headphones with Microfiber Cloth - Blue - WH1000XM4BLU at 275.0 USD
2025-05-13 16:13:44,185 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Sony WH-1000XM4 Wireless Over-the-Ear Headphones Black with 3yr Diamond Mack Warranty at 275.99 USD
2025-05-13 16:13:44,185 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Sony WH-1000XM4 Noise Canceling Wireless Over Ear Headphones with USB Type-C Cable, Black at 297.59 USD
2025-05-13 16:13:44,844 - DealFinderAI.WalmartScraperAgent - INFO - Extracted 9 products from Walmart
2025-05-13 16:13:44,846 - DealFinderAI.WalmartScraperAgent - INFO - Applying relevance filtering to 9 products
2025-05-13 16:13:44,846 - DealFinderAI.WalmartScraperAgent - INFO - Filtered to 5 most relevant products
2025-05-13 16:13:44,847 - DealFinderAI.Controller - INFO - Walmart returned 5 products
2025-05-13 16:13:44,847 - DealFinderAI.EbayScraperAgent - INFO - Searching eBay for: {'product_type': 'headphones', 'keywords': ['sony', 'xm4', 'series'], 'price_range': None, 'brands': ['sony'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-13 16:13:44,847 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: 
            Optimize this search query for eBay's search engine:
            
            "headphones sony xm4 series sony"
            
            For eBay searches, please:
            1. Focus on exact model numbers and specific part identifiers if present
            2. Include key brand names
            3. Remove generic words that may dilute results
            4. Add eBay-specific terms that might improve results
            5. Optimize for finding the most relevant listings
            
            Return a JSON object with:
            - optimized_keywords: List of 3-5 optimized search terms (most important first)
            - category_hints: Any eBay category suggestions
            - must_include_terms: Terms that MUST be in results
            - exclude_terms: Terms that should NOT be in results
            
            Format as JSON only with no explanation.
            
2025-05-13 16:13:45,747 - DealFinderAI.EbayScraperAgent - INFO - Optimized search parameters: {'product_type': 'headphones', 'keywords': ['Sony WH-1000XM4', 'Sony XM4 headphones', 'Sony WH-1000XM4 headphones', 'Sony 1000XM4'], 'price_range': None, 'brands': ['sony'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True, 'category_hints': ['Electronics', 'Headphones'], 'must_include_terms': ['Sony'], 'exclude_terms': ['series']}
2025-05-13 16:13:45,747 - DealFinderAI.EbayScraperAgent - INFO - Built optimized eBay search query: headphones sony Sony WH-1000XM4 Sony XM4 headphones Sony WH-1000XM4 headphones
2025-05-13 16:13:45,748 - DealFinderAI.EbayScraperAgent - INFO - Built eBay query: headphones sony Sony WH-1000XM4 Sony XM4 headphones Sony WH-1000XM4 headphones
2025-05-13 16:13:45,748 - DealFinderAI.EbayScraperAgent - INFO - Making eBay search request with params: {'_nkw': 'headphones sony Sony WH-1000XM4 Sony XM4 headphones Sony WH-1000XM4 headphones Electronics', '_sacat': '0', '_ipg': '96', '_sop': '15', 'LH_BIN': '1'}
2025-05-13 16:13:47,291 - DealFinderAI.EbayScraperAgent - INFO - Found 123 product listings
2025-05-13 16:13:47,293 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Sony WH-1000XM4 *******FOR PARTS ONLY*******WH1000XM4 Headphones - Silver at 85.89 USD
2025-05-13 16:13:47,293 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Sony WH-1000XM4 *******FOR PARTS ONLY*******WH1000XM4 Headphones - Silver at 85.89 USD
2025-05-13 16:13:47,294 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Sony WH-1000XM4 Wireless Over-Ear Headphones- Silver ( USED) at 94.25 USD
2025-05-13 16:13:47,294 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Sony WH-1000XM4 Wireless Over-Ear Headphones- Silver ( USED) at 94.25 USD
2025-05-13 16:13:47,295 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Sony WH-1000XM4 Wireless A. N.C. Over-Ear Headphones Silver (PreOwned) *No Case* at 110.0 USD
2025-05-13 16:13:47,295 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Sony WH-1000XM4 Wireless A. N.C. Over-Ear Headphones Silver (PreOwned) *No Case* at 110.0 USD
2025-05-13 16:13:47,296 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Sony WH-1000XM4 Wireless Over-Ear Headphones- Silver at 120.0 USD
2025-05-13 16:13:47,296 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Sony WH-1000XM4 Wireless Over-Ear Headphones- Silver at 120.0 USD
2025-05-13 16:13:47,297 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Sony WH-1000XM4 Wireless Over-Ear Headphones- Silver at 125.0 USD
2025-05-13 16:13:47,298 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Sony WH-1000XM4 Wireless Over-Ear Headphones- Silver at 125.0 USD
2025-05-13 16:13:47,299 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Sony WH-1000XM4 Wireless Noise Cancelling Headphones - Silver - Used at 125.0 USD
2025-05-13 16:13:47,299 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Sony WH-1000XM4 Wireless Noise Cancelling Headphones - Silver - Used at 125.0 USD
2025-05-13 16:13:47,300 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Sony WH-1000XM4 Wireless Bluetooth Noise Canceling Headphones Silver at 130.19 USD
2025-05-13 16:13:47,300 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Sony WH-1000XM4 Wireless Bluetooth Noise Canceling Headphones Silver at 130.19 USD
2025-05-13 16:13:47,302 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: SONY WH-1000XM4 WIRELESS NOISE CANCELLING HEADPHONES Silver  Wh1000xm4 Working at 125.0 USD
2025-05-13 16:13:47,302 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: SONY WH-1000XM4 WIRELESS NOISE CANCELLING HEADPHONES Silver  Wh1000xm4 Working at 125.0 USD
2025-05-13 16:13:48,141 - DealFinderAI.EbayScraperAgent - INFO - Extracted 8 products from eBay
2025-05-13 16:13:48,144 - DealFinderAI.EbayScraperAgent - INFO - Applying relevance filtering to 8 products
2025-05-13 16:13:48,145 - DealFinderAI.EbayScraperAgent - INFO - Filtered to 5 most relevant products
2025-05-13 16:13:48,145 - DealFinderAI.Controller - INFO - eBay returned 5 products
2025-05-13 16:13:48,145 - DealFinderAI.Controller - INFO - Total products before aggregation: 15
2025-05-13 16:13:48,145 - DealFinderAI.ResultsAggregatorAgent - INFO - Aggregating results for query: find me best deal on sony xm4 series
2025-05-13 16:13:48,146 - DealFinderAI.ResultsAggregatorAgent - INFO - Found 3 results from various sources
2025-05-13 16:13:48,146 - DealFinderAI.ResultsAggregatorAgent - INFO - Source Amazon: 5 products
2025-05-13 16:13:48,146 - DealFinderAI.ResultsAggregatorAgent - INFO - Source Walmart: 5 products
2025-05-13 16:13:48,146 - DealFinderAI.ResultsAggregatorAgent - INFO - Source eBay: 5 products
2025-05-13 16:13:48,146 - DealFinderAI.ResultsAggregatorAgent - INFO - Total products extracted: 15
2025-05-13 16:13:48,146 - DealFinderAI.ResultsAggregatorAgent - INFO - Ranking 15 products
2025-05-13 16:13:48,147 - DealFinderAI.ResultsAggregatorAgent - INFO - Sorted 15 products by score
2025-05-13 16:13:48,147 - DealFinderAI.ResultsAggregatorAgent - INFO - Returning 10 diversified products
2025-05-13 16:13:48,147 - DealFinderAI.ResultsAggregatorAgent - INFO - Products after ranking: 10
2025-05-13 16:13:48,147 - DealFinderAI.ResultsAggregatorAgent - INFO - Final products: 10
2025-05-13 16:13:48,147 - DealFinderAI.Controller - INFO - Products after aggregation: 10
2025-05-13 16:13:48,147 - DealFinderAI.ProductComparisonAgent - INFO - Comparing products for query: find me best deal on sony xm4 series
2025-05-13 16:13:48,147 - DealFinderAI.ProductComparisonAgent - INFO - Found 10 products to compare
2025-05-13 16:13:48,148 - DealFinderAI.ProductComparisonAgent - INFO - Grouping 10 products
2025-05-13 16:13:48,148 - DealFinderAI.ProductComparisonAgent - INFO - Created 2 product groups
2025-05-13 16:13:48,149 - DealFinderAI.ProductComparisonAgent - INFO - Analyzing product group with 2 items
2025-05-13 16:13:48,149 - DealFinderAI.ProductComparisonAgent - INFO - Best deal: Sony WH-CH520 Best Wireless Bluetooth On-Ear Headphones with Microphone for Calls and Voice Control, Up to 50 Hours Battery Life with Quick Charge Function, Includes USB-C Charging Cable - Beige at $29.99
2025-05-13 16:13:48,149 - DealFinderAI.ProductComparisonAgent - INFO - Savings: $9.08 (24.1%)
2025-05-13 16:13:48,149 - DealFinderAI.ChatMemoryAgent - INFO - Storing context for conversation session_20250513160824_339e4c49
2025-05-13 16:13:48,149 - DealFinderAI.ChatMemoryAgent - INFO - Storing 10 products for conversation session_20250513160824_339e4c49
2025-05-13 16:13:48,149 - DealFinderAI.PresentationAgent - INFO - Preparing presentation for 10 products
2025-05-13 16:13:48,150 - DealFinderAI.ChatMemoryAgent - INFO - Storing context for conversation session_20250513160824_339e4c49
2025-05-13 16:13:48,150 - DealFinderAI.ChatMemoryAgent - INFO - Storing 10 products for conversation session_20250513160824_339e4c49
2025-05-13 16:13:48,150 - DealFinderAI.Controller - INFO - Successfully stored search results in memory
2025-05-13 16:14:29,887 - DealFinderAI - INFO - Logging initialized
2025-05-13 16:14:29,887 - DealFinderAI.Main - INFO - Starting DealFinder AI
2025-05-13 16:14:29,887 - DealFinderAI.Main - INFO - Using LangChain implementation
2025-05-13 16:14:29,929 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-13 16:14:29,929 - DealFinderAI.Controller - INFO - Initialized scraper agents: ['amazon', 'walmart', 'ebay']
2025-05-13 16:14:29,929 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-13 16:14:29,929 - DealFinderAI.Controller - INFO - Initialized scraper agents: ['amazon', 'walmart', 'ebay']
2025-05-13 16:14:29,929 - DealFinderAI.Main - INFO - Web app using LangChain implementation with Gemini model
2025-05-13 16:16:17,111 - DealFinderAI - INFO - Logging initialized
2025-05-13 16:16:17,111 - DealFinderAI.Main - INFO - Starting DealFinder AI
2025-05-13 16:16:17,111 - DealFinderAI.Main - INFO - Using LangChain implementation
2025-05-13 16:16:17,161 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-13 16:16:17,162 - DealFinderAI.Controller - INFO - Initialized scraper agents: ['amazon', 'walmart', 'ebay']
2025-05-13 16:16:17,162 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-13 16:16:17,162 - DealFinderAI.Controller - INFO - Initialized scraper agents: ['amazon', 'walmart', 'ebay']
2025-05-13 16:16:17,162 - DealFinderAI.Main - INFO - Web app using LangChain implementation with Gemini model
2025-05-13 16:16:45,376 - DealFinderAI.Controller - INFO - Processing user query: find me best deal on bose speakers
2025-05-13 16:16:45,377 - DealFinderAI.ChatMemoryAgent - INFO - Analyzing query: 'find me best deal on bose speakers' for conversation session_20250513161645_543e66f7
2025-05-13 16:16:45,377 - DealFinderAI.ChatMemoryAgent - INFO - No product context available for this conversation
2025-05-13 16:16:45,377 - DealFinderAI.Controller - INFO - Analyze response: {'is_follow_up': False, 'focused_product': None, 'referenced_products': [], 'products': []}
2025-05-13 16:16:45,377 - DealFinderAI.Controller - INFO - Is follow-up? False
2025-05-13 16:16:45,377 - DealFinderAI.Controller - INFO - Referenced products: 0
2025-05-13 16:16:45,378 - DealFinderAI.Controller - INFO - Processing as new search query
2025-05-13 16:16:45,378 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: find me best deal on bose speakers
2025-05-13 16:16:46,236 - DealFinderAI.GeminiAgent - WARNING - Failed to parse Gemini response as JSON: ```json
{
  "product_type": "speakers",
  "keywords": ["bose", "speakers"],
  "price_range": null,
  "brands": ["Bose"],
  "features": [],
  "sorting_preference": "price_low_to_high",
  "buy_it_now": true
}
```

2025-05-13 16:16:46,236 - DealFinderAI.Controller - INFO - Parsed search parameters: {'product_type': 'speakers', 'keywords': ['bose', 'speakers'], 'price_range': None, 'brands': ['Bose'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-13 16:16:46,237 - DealFinderAI.AmazonScraperAgent - INFO - Searching Amazon for: {'product_type': 'speakers', 'keywords': ['bose', 'speakers'], 'price_range': None, 'brands': ['Bose'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-13 16:16:46,237 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: 
            Optimize this search query for Amazon's search engine:
            
            "speakers bose speakers Bose"
            
            For Amazon searches, please:
            1. Focus on product-specific model numbers and identifiers if present
            2. Include key brand names (Amazon's A9 algorithm prioritizes brand matches)
            3. Remove generic words that may dilute results
            4. Add Amazon-specific terms that might improve results (like "Amazon's Choice" if looking for quality products)
            5. Optimize for Amazon's search algorithm which prioritizes exact matches and recent sales volume
            
            Return a JSON object with:
            - optimized_keywords: List of 3-5 optimized search terms (most important first)
            - amazon_category: Any Amazon department/category suggestion (Electronics, Books, etc.)
            - must_include_terms: Terms that MUST be in results
            - exclude_terms: Terms that should NOT be in results
            - amazon_search_filters: Any Amazon-specific filters to apply (Prime eligible, etc.)
            
            Format as JSON only with no explanation.
            
2025-05-13 16:16:47,095 - DealFinderAI.AmazonScraperAgent - INFO - Optimized search parameters: {'product_type': 'speakers', 'keywords': ['Bose Speakers', 'Bose SoundLink', 'Bose QuietComfort'], 'price_range': None, 'brands': ['Bose'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True, 'category': 'Electronics', 'must_include_terms': ['Bose'], 'exclude_terms': ['speakers'], 'amazon_filters': ['Prime Eligible', 'Customer Reviews: 4 stars & up']}
2025-05-13 16:16:47,095 - DealFinderAI.AmazonScraperAgent - INFO - Built optimized Amazon search query: Bose speakers Bose Speakers Bose SoundLink Bose QuietComfort
2025-05-13 16:16:47,096 - DealFinderAI.AmazonScraperAgent - INFO - Built Amazon query: Bose speakers Bose Speakers Bose SoundLink Bose QuietComfort
2025-05-13 16:16:47,096 - DealFinderAI.AmazonScraperAgent - INFO - Making Amazon search request with params: {'k': 'Bose speakers Bose Speakers Bose SoundLink Bose QuietComfort', 'ref': 'nb_sb_noss', 'crid': 1747167407, 'i': 'aps', 'search-alias': 'electronics', 's': 'price-asc-rank'}
2025-05-13 16:16:49,281 - DealFinderAI.AmazonScraperAgent - INFO - Found 40 product divs in search results
2025-05-13 16:16:49,286 - DealFinderAI.AmazonScraperAgent - WARNING - Incomplete data for ASIN B00N32I2Q6, falling back to Gemini extraction.
2025-05-13 16:16:49,286 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: 
            Extract detailed product information from this Amazon listing HTML:
            
            ```html
            <div class="sg-col-4-of-24 sg-col-4-of-12 s-result-item s-asin sg-col-4-of-16 sg-col s-widget-spacing-small sg-col-4-of-20" data-asin="B00N32I2Q6" data-component-type="s-search-result" data-index="3" data-uuid="4eb44b4a-84a3-4e8f-ac05-d0da259b06f3" id="4eb44b4a-84a3-4e8f-ac05-d0da259b06f3" role="listitem"><div class="sg-col-inner"><div cel_widget_id="MAIN-SEARCH_RESULTS-3" class="s-widget-container s-spacing-small s-widget-container-height-small celwidget slot=MAIN template=SEARCH_RESULTS widgetId=search-results_1" data-csa-c-item-id="amzn1.asin.1.B00N32I2Q6" data-csa-c-pos="1" data-csa-c-type="item" data-csa-op-log-render=""><span class="a-declarative" data-action="puis-card-container-declarative" data-csa-c-func-deps="aui-da-puis-card-container-declarative" data-csa-c-item-id="amzn1.asin.B00N32I2Q6" data-csa-c-owner="puis" data-csa-c-posx="1" data-csa-c-type="item" data-render-id="r3ewdibb4hkggk2ln02zvxl0met" data-version-id="v3v794tv49y9a2k7wencwmtf89"><div class="puis-card-container s-card-container s-overflow-hidden aok-relative puis-expand-height puis-include-content-margin puis puis-v3v794tv49y9a2k7wencwmtf89 s-latency-cf-section puis-card-border" data-cy="asin-faceout-container"><div class="a-section a-spacing-base"><div class="s-product-image-container aok-relative s-text-center s-image-overlay-grey puis-image-overlay-grey s-padding-left-small s-padding-right-small puis-spacing-small s-height-equalized puis puis-v3v794tv49y9a2k7wencwmtf89" data-cy="image-container"><span class="rush-component" data-component-type="s-product-image" data-render-id="r3ewdibb4hkggk2ln02zvxl0met" data-version-id="v3v794tv49y9a2k7wencwmtf89"><a class="a-link-normal s-no-outline" href="/Bose-SoundLink-Color-Bluetooth-Speaker/dp/B00N32I2Q6/ref=sr_1_1?crid=1747167407&amp;dib=eyJ2IjoiMSJ9.X1SskUYWLDtkRGciXLb6HSoQWW0O9MIOVH5kCNRd63j6AU6VP9qwdImaqEo8VnVF85iOFFM0uYI-UnYrwE14Llqi48nEiHFbFj_gZpcFITABZ-NKzJwtLF2An1NPe1wbuxDvCWIX4jz0uqsDvqP_s175xlmNUTpFghd6tYp6PT59T__V8Sx6Y3RZygehiNnyo4C0HRqjVDTsaReJuWOz6J_i0Iwvdp86PlpPnDyywtClh5p25nKYYByL6vf0js2X9zyvMPW3uHFpcE9Gpn1J9ErH4F0K9Pfblx-XRyrW0LU.ljO4VB1Yvm1rdqbiiud31DMHp-sMyZu4CjXrXN_7jEo&amp;dib_tag=se&amp;keywords=Bose+speakers+Bose+Speakers+Bose+SoundLink+Bose+QuietComfort&amp;qid=1747167407&amp;s=electronics&amp;sr=1-1" tabindex="-1"><div class="a-section aok-relative s-image-square-aspect"><img alt="Bose SoundLink Color Bluetooth Speaker (Black)" aria-hidden="true" class="s-image" data-image-index="1" data-image-latency="s-product-image" data-image-load="" data-image-source-density="1" src="https://m.media-amazon.com/images/I/61XvC4j4sBL._AC_UL320_.jpg" srcset="https://m.media-amazon.com/images/I/61XvC4j4sBL._AC_UL320_.jpg 1x, https://m.media-amazon.com/images/I/61XvC4j4sBL._AC_UL480_FMwebp_QL65_.jpg 1.5x, https://m.media-amazon.com/images/I/61XvC4j4sBL._AC_UL640_FMwebp_QL65_.jpg 2x, https://m.media-amazon.com/images/I/61XvC4j4sBL._AC_UL800_FMwebp_QL65_.jpg 2.5x, https://m.media-amazon.com/images/I/61XvC4j4sBL._AC_UL960_FMwebp_QL65_.jpg 3x"/></div></a></span></div><div class="a-section a-spacing-small puis-padding-left-small puis-padding-right-small"><div class="a-section a-spacing-none a-spacing-top-small s-title-instructions-style" data-cy="title-recipe"><div class="a-row a-color-secondary"><h2 class="a-size-mini s-line-clamp-1"><span class="a-size-base-plus a-color-base">Bose</span></h2></div><a class="a-link-normal s-line-clamp-4 s-link-style a-text-normal" href="/Bose-SoundLink-Color-Bluetooth-Speaker/dp/B00N32I2Q6/ref=sr_1_1?crid=1747167407&amp;dib=eyJ2IjoiMSJ9.X1SskUYWLDtkRGciXLb6HSoQWW0O9MIOVH5kCNRd63j6AU6VP9qwdImaqEo8VnVF85iOFFM0uYI-UnYrwE14Llqi48nEiHFbFj_gZpcFITABZ-NKzJwtLF2An1NPe1wbuxDvCWIX4jz0uqsDvqP_s175xlmNUTpFghd6tYp6PT59T__V8Sx6Y3RZygehiNnyo4C0HRqjVDTsaReJuWOz6J_i0Iwvdp86PlpPnDyywtClh5p25nKYYByL6vf0js2X9zyvMPW3uHFpcE9Gpn1J9ErH4F0K9Pfblx-XRyrW0LU.ljO4VB1Yvm1rdqbiiud31DMHp-sMyZu4CjXrXN_7jEo&amp;dib_tag=se&amp;keywords=Bose+speakers+Bose+Speakers+Bose+SoundLink+Bose+QuietComfort&amp;qid=1747167407&amp;s=electronics&amp;sr=1-1"><h2 aria-label="SoundLink Color Bluetooth Speaker (Black)" class="a-size-base-plus a-spacing-none a-color-base a-text-normal"><span>SoundLink Color Bluetooth Speaker (Black)</span></h2></a> </div><div class="a-section a-spacing-none a-spacing-top-micro" data-cy="reviews-block"><div class="a-row a-size-small"><span class="a-declarative" data-a-popover='{"position":"triggerBottom","popoverLabel":"4.4 out of 5 stars, rating details","url":"/review/widgets/average-customer-review/popover/ref=acr_search__popover?ie=UTF8&amp;asin=B00N32I2Q6&amp;ref_=acr_search__popover&amp;contextId=search","closeButton":true,"closeButtonLabel":""}' data-action="a-popover" data-csa-c-func-deps="aui-da-a-popover" data-csa-c-type="widget" data-render-id="r3ewdibb4hkggk2ln02zvxl0met" data-version-id="v3v794tv49y9a2k7wencwmtf89"><a aria-label="4.4 out of 5 stars, rating details" class="a-popover-trigger a-declarative" href="javascript:void(0)" role="button"><i aria-hidden="true" class="a-icon a-icon-star-small a-star-small-4-5" data-cy="reviews-ratings-slot"><span class="a-icon-alt">4.4 out of 5 stars</span></i><i class="a-icon a-icon-popover"></i></a></span> <span class="rush-component" data-component-type="s-client-side-analytics" data-render-id="r3ewdibb4hkggk2ln02zvxl0met" data-version-id="v3v794tv49y9a2k7wencwmtf89"><div class="s-csa-instrumentation-wrapper alf-search-csa-instrumentation-wrapper" data-csa-c-asin="B00N32I2Q6" data-csa-c-content-id="alf-customer-ratings-count-component" data-csa-c-layout="GRID" data-csa-c-slot-id="alf-reviews" data-csa-c-type="alf-af-component" data-csa-op-log-render="" style="display: inline-block"><a aria-label="7,522 ratings" class="a-link-normal s-underline-text s-underline-link-text s-link-style" href="/Bose-SoundLink-Color-Bluetooth-Speaker/dp/B00N32I2Q6/ref=sr_1_1?crid=1747167407&amp;dib=eyJ2IjoiMSJ9.X1SskUYWLDtkRGciXLb6HSoQWW0O9MIOVH5kCNRd63j6AU6VP9qwdImaqEo8VnVF85iOFFM0uYI-UnYrwE14Llqi48nEiHFbFj_gZpcFITABZ-NKzJwtLF2An1NPe1wbuxDvCWIX4jz0uqsDvqP_s175xlmNUTpFghd6tYp6PT59T__V8Sx6Y3RZygehiNnyo4C0HRqjVDTsaReJuWOz6J_i0Iwvdp86PlpPnDyywtClh5p25nKYYByL6vf0js2X9zyvMPW3uHFpcE9Gpn1J9ErH4F0K9Pfblx-XRyrW0LU.ljO4VB1Yvm1rdqbiiud31DMHp-sMyZu4CjXrXN_7jEo&amp;dib_tag=se&amp;keywords=Bose+speakers+Bose+Speakers+Bose+SoundLink+Bose+QuietComfort&amp;qid=1747167407&amp;s=electronics&amp;sr=1-1#customerReviews"><span aria-hidden="true" class="a-size-base s-underline-text">7,522</span> </a> </div></span></div><div class="a-row a-size-base"><span class="a-size-base a-color-secondary">50+ bought in past month</span></div></div><div class="a-section a-spacing-none a-spacing-top-small s-price-instructions-style" data-cy="price-recipe"><div class="a-row a-size-base a-color-base"><div class="a-row"></div><div class="a-row"></div></div></div><div class="a-section a-spacing-none a-spacing-top-mini"><div class="puis-see-details-content"><div data-csa-c-content-id="s-search-see-details-button" data-csa-c-device-env="WEB" data-csa-c-device-os="UNRECOGNIZED" data-csa-c-device-type="DESKTOP" data-csa-c-item-id="B00N32I2Q6" data-csa-c-item-type="asin" data-csa-c-type="action"><span class="a-button a-button-base"><span class="a-button-inner"><a class="a-button-text" href="/Bose-SoundLink-Color-Bluetooth-Speaker/dp/B00N32I2Q6/ref=sr_1_1_so_PA_SYSTEM?crid=1747167407&amp;dib=eyJ2IjoiMSJ9.X1SskUYWLDtkRGciXLb6HSoQWW0O9MIOVH5kCNRd63j6AU6VP9qwdImaqEo8VnVF85iOFFM0uYI-UnYrwE14Llqi48nEiHFbFj_gZpcFITABZ-NKzJwtLF2An1NPe1wbuxDvCWIX4jz0uqsDvqP_s175xlmNUTpFghd6tYp6PT59T__V8Sx6Y3RZygehiNnyo4C0HRqjVDTsaReJuWOz6J_i0Iwvdp86PlpPnDyywtClh5p25nKYYByL6vf0js2X9zyvMPW3uHFpcE9Gpn1J9ErH4F0K9Pfblx-XRyrW0LU.ljO4VB1Yvm1rdqbiiud31DMHp-sMyZu4CjXrXN_7jEo&amp;dib_tag=se&amp;keywords=Bose+speakers+Bose+Speakers+Bose+SoundLink+Bose+QuietComfort&amp;qid=1747167407&amp;s=electronics&amp;sr=1-1">See options</a></span></span></div></div></div><div class="a-section a-spacing-none a-spacing-top-mini" data-cy="secondary-offer-recipe"><div class="a-row a-size-base a-color-secondary"><span class="a-size-base a-color-secondary">No featured offers available</span><br/><span class="a-color-base">$74.45</span><span class="a-letter-space"></span><span class="a-declarative" data-action="s-show-all-offers-display" data-csa-c-func-deps="aui-da-s-show-all-offers-display" data-csa-c-type="widget" data-render-id="r3ewdibb4hkggk2ln02zvxl0met" data-s-show-all-offers-display='{"assetMismatch":"Abandon","url":"/gp/aod/ajax/ref=sr_1_1_aod?asin=B00N32I2Q6&amp;pc=sp&amp;s=electronics&amp;keywords=Bose+speakers+Bose+Speakers+Bose+SoundLink+Bose+QuietComfort&amp;crid=1747167407&amp;dib_tag=se&amp;dib=eyJ2IjoiMSJ9.X1SskUYWLDtkRGciXLb6HSoQWW0O9MIOVH5kCNRd63j6AU6VP9qwdImaqEo8VnVF85iOFFM0uYI-UnYrwE14Llqi48nEiHFbFj_gZpcFITABZ-NKzJwtLF2An1NPe1wbuxDvCWIX4jz0uqsDvqP_s175xlmNUTpFghd6tYp6PT59T__V8Sx6Y3RZygehiNnyo4C0HRqjVDTsaReJuWOz6J_i0Iwvdp86PlpPnDyywtClh5p25nKYYByL6vf0js2X9zyvMPW3uHFpcE9Gpn1J9ErH4F0K9Pfblx-XRyrW0LU.ljO4VB1Yvm1rdqbiiud31DMHp-sMyZu4CjXrXN_7jEo&amp;qid=1747167407&amp;sr=1-1","fallbackUrl":"/gp/offer-listing/B00N32I2Q6/ref=sr_1_1_olp?s=electronics&amp;keywords=Bose+speakers+Bose+Speakers+Bose+SoundLink+Bose+QuietComfort&amp;crid=1747167407&amp;dib_tag=se&amp;dib=eyJ2IjoiMSJ9.X1SskUYWLDtkRGciXLb6HSoQWW0O9MIOVH5kCNRd63j6AU6VP9qwdImaqEo8VnVF85iOFFM0uYI-UnYrwE14Llqi48nEiHFbFj_gZpcFITABZ-NKzJwtLF2An1NPe1wbuxDvCWIX4jz0uqsDvqP_s175xlmNUTpFghd6tYp6PT59T__V8Sx6Y3RZygehiNnyo4C0HRqjVDTsaReJuWOz6J_i0Iwvdp86PlpPnDyywtClh5p25nKYYByL6vf0js2X9zyvMPW3uHFpcE9Gpn1J9ErH4F0K9Pfblx-XRyrW0LU.ljO4VB1Yvm1rdqbiiud31DMHp-sMyZu4CjXrXN_7jEo&amp;qid=1747167407&amp;sr=1-1"}' data-version-id="v3v794tv49y9a2k7wencwmtf89"><a class="a-link-normal s-link-style s-underline-text s-underline-link-text" href="/gp/offer-listing/B00N32I2Q6/ref=sr_1_1_olp?s=electronics&amp;keywords=Bose+speakers+Bose+Speakers+Bose+SoundLink+Bose+QuietComfort&amp;crid=1747167407&amp;dib_tag=se&amp;dib=eyJ2IjoiMSJ9.X1SskUYWLDtkRGciXLb6HSoQWW0O9MIOVH5kCNRd63j6AU6VP9qwdImaqEo8VnVF85iOFFM0uYI-UnYrwE14Llqi48nEiHFbFj_gZpcFITABZ-NKzJwtLF2An1NPe1wbuxDvCWIX4jz0uqsDvqP_s175xlmNUTpFghd6tYp6PT59T__V8Sx6Y3RZygehiNnyo4C0HRqjVDTsaReJuWOz6J_i0Iwvdp86PlpPnDyywtClh5p25nKYYByL6vf0js2X9zyvMPW3uHFpcE9Gpn1J9ErH4F0K9Pfblx-XRyrW0LU.ljO4VB1Yvm1rdqbiiud31DMHp-sMyZu4CjXrXN_7jEo&amp;qid=1747167407&amp;sr=1-1">(21 used &amp; new offers)</a></span><div class="a-section aok-hidden" id="all-offers-display"><div class="a-spinner-wrapper aok-hidden" id="all-offers-display-spinner"><span class="a-spinner a-spinner-medium"></span></div></div><span class="a-declarative" data-action="close-all-offers-display" data-csa-c-func-deps="aui-da-close-all-offers-display" data-csa-c-type="widget" data-render-id="r3ewdibb4hkggk2ln02zvxl0met" data-version-id="v3v794tv49y9a2k7wencwmtf89"><div class="a-section aok-hidden aod-darken-background" id="aod-background"></div></span></div></div></div></div></div></span></div></div></div>
            ```
            
            Extract:
            - title: Full product title
            - price: Numeric price value only (no currency symbol)
            - was_price: Original price before discount (if present)
            - currency: Currency code (e.g., USD)
            - url: Product URL
            - image_url: Main product image URL
            - rating: Star rating (0-5)
            - reviews: Number of reviews
            - asin: Amazon ASIN
            - is_prime: Boolean for Prime eligible
            - is_sponsored: Boolean for sponsored listing
            - is_amazon_choice: Boolean for Amazon's Choice
            - is_best_seller: Boolean for Best Seller
            - description: Any additional description text
            - delivery_info: Delivery/shipping information
            - out_of_stock: Boolean for out of stock status
            
            Return a clean JSON object with these fields. Use null for missing values.
            
2025-05-13 16:16:54,163 - DealFinderAI.AmazonScraperAgent - INFO - Gemini extracted: Bose SoundLink Color Bluetooth Speaker (Black) at 74.45 USD
2025-05-13 16:16:54,164 - DealFinderAI.AmazonScraperAgent - INFO - Gemini used for product extraction
2025-05-13 16:16:54,164 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Bose SoundLink Color Bluetooth Speaker (Black) at 74.45 USD
2025-05-13 16:16:54,164 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Bose SoundLink Color Bluetooth Speaker (Black) at 74.45 USD
2025-05-13 16:16:54,174 - DealFinderAI.AmazonScraperAgent - WARNING - Incomplete data for ASIN B00N32ICIE, falling back to Gemini extraction.
2025-05-13 16:16:54,175 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: 
            Extract detailed product information from this Amazon listing HTML:
            
            ```html
            <div class="sg-col-4-of-24 sg-col-4-of-12 s-result-item s-asin sg-col-4-of-16 sg-col s-widget-spacing-small sg-col-4-of-20" data-asin="B00N32ICIE" data-component-type="s-search-result" data-index="4" data-uuid="92a2a253-ec04-40f7-80e7-fb31691b5959" id="92a2a253-ec04-40f7-80e7-fb31691b5959" role="listitem"><div class="sg-col-inner"><div cel_widget_id="MAIN-SEARCH_RESULTS-4" class="s-widget-container s-spacing-small s-widget-container-height-small celwidget slot=MAIN template=SEARCH_RESULTS widgetId=search-results_2" data-csa-c-item-id="amzn1.asin.1.B00N32ICIE" data-csa-c-pos="2" data-csa-c-type="item" data-csa-op-log-render=""><span class="a-declarative" data-action="puis-card-container-declarative" data-csa-c-func-deps="aui-da-puis-card-container-declarative" data-csa-c-item-id="amzn1.asin.B00N32ICIE" data-csa-c-owner="puis" data-csa-c-posx="2" data-csa-c-type="item" data-render-id="r3ewdibb4hkggk2ln02zvxl0met" data-version-id="v3v794tv49y9a2k7wencwmtf89"><div class="puis-card-container s-card-container s-overflow-hidden aok-relative puis-expand-height puis-include-content-margin puis puis-v3v794tv49y9a2k7wencwmtf89 s-latency-cf-section puis-card-border" data-cy="asin-faceout-container"><div class="a-section a-spacing-base"><div class="s-product-image-container aok-relative s-text-center s-image-overlay-grey puis-image-overlay-grey s-padding-left-small s-padding-right-small puis-spacing-small s-height-equalized puis puis-v3v794tv49y9a2k7wencwmtf89" data-cy="image-container"><span class="rush-component" data-component-type="s-product-image" data-render-id="r3ewdibb4hkggk2ln02zvxl0met" data-version-id="v3v794tv49y9a2k7wencwmtf89"><a class="a-link-normal s-no-outline" href="/Bose-SoundLink-Color-Bluetooth-Speaker/dp/B00N32ICIE/ref=sr_1_2?crid=1747167407&amp;dib=eyJ2IjoiMSJ9.X1SskUYWLDtkRGciXLb6HSoQWW0O9MIOVH5kCNRd63j6AU6VP9qwdImaqEo8VnVF85iOFFM0uYI-UnYrwE14Llqi48nEiHFbFj_gZpcFITABZ-NKzJwtLF2An1NPe1wbuxDvCWIX4jz0uqsDvqP_s175xlmNUTpFghd6tYp6PT59T__V8Sx6Y3RZygehiNnyo4C0HRqjVDTsaReJuWOz6J_i0Iwvdp86PlpPnDyywtClh5p25nKYYByL6vf0js2X9zyvMPW3uHFpcE9Gpn1J9ErH4F0K9Pfblx-XRyrW0LU.ljO4VB1Yvm1rdqbiiud31DMHp-sMyZu4CjXrXN_7jEo&amp;dib_tag=se&amp;keywords=Bose+speakers+Bose+Speakers+Bose+SoundLink+Bose+QuietComfort&amp;qid=1747167407&amp;s=electronics&amp;sr=1-2" tabindex="-1"><div class="a-section aok-relative s-image-square-aspect"><img alt="Bose SoundLink Color Bluetooth Speaker (Mint)" aria-hidden="true" class="s-image" data-image-index="2" data-image-latency="s-product-image" data-image-load="" data-image-source-density="1" src="https://m.media-amazon.com/images/I/71Nx6MzDwHL._AC_UL320_.jpg" srcset="https://m.media-amazon.com/images/I/71Nx6MzDwHL._AC_UL320_.jpg 1x, https://m.media-amazon.com/images/I/71Nx6MzDwHL._AC_UL480_FMwebp_QL65_.jpg 1.5x, https://m.media-amazon.com/images/I/71Nx6MzDwHL._AC_UL640_FMwebp_QL65_.jpg 2x, https://m.media-amazon.com/images/I/71Nx6MzDwHL._AC_UL800_FMwebp_QL65_.jpg 2.5x, https://m.media-amazon.com/images/I/71Nx6MzDwHL._AC_UL960_FMwebp_QL65_.jpg 3x"/></div></a></span></div><div class="a-section a-spacing-small puis-padding-left-small puis-padding-right-small"><div class="a-section a-spacing-none a-spacing-top-small s-title-instructions-style" data-cy="title-recipe"><div class="a-row a-color-secondary"><h2 class="a-size-mini s-line-clamp-1"><span class="a-size-base-plus a-color-base">Bose</span></h2></div><a class="a-link-normal s-line-clamp-4 s-link-style a-text-normal" href="/Bose-SoundLink-Color-Bluetooth-Speaker/dp/B00N32ICIE/ref=sr_1_2?crid=1747167407&amp;dib=eyJ2IjoiMSJ9.X1SskUYWLDtkRGciXLb6HSoQWW0O9MIOVH5kCNRd63j6AU6VP9qwdImaqEo8VnVF85iOFFM0uYI-UnYrwE14Llqi48nEiHFbFj_gZpcFITABZ-NKzJwtLF2An1NPe1wbuxDvCWIX4jz0uqsDvqP_s175xlmNUTpFghd6tYp6PT59T__V8Sx6Y3RZygehiNnyo4C0HRqjVDTsaReJuWOz6J_i0Iwvdp86PlpPnDyywtClh5p25nKYYByL6vf0js2X9zyvMPW3uHFpcE9Gpn1J9ErH4F0K9Pfblx-XRyrW0LU.ljO4VB1Yvm1rdqbiiud31DMHp-sMyZu4CjXrXN_7jEo&amp;dib_tag=se&amp;keywords=Bose+speakers+Bose+Speakers+Bose+SoundLink+Bose+QuietComfort&amp;qid=1747167407&amp;s=electronics&amp;sr=1-2"><h2 aria-label="SoundLink Color Bluetooth Speaker (Mint)" class="a-size-base-plus a-spacing-none a-color-base a-text-normal"><span>SoundLink Color Bluetooth Speaker (Mint)</span></h2></a> </div><div class="a-section a-spacing-none a-spacing-top-micro" data-cy="reviews-block"><div class="a-row a-size-small"><span class="a-declarative" data-a-popover='{"position":"triggerBottom","popoverLabel":"4.3 out of 5 stars, rating details","url":"/review/widgets/average-customer-review/popover/ref=acr_search__popover?ie=UTF8&amp;asin=B00N32ICIE&amp;ref_=acr_search__popover&amp;contextId=search","closeButton":true,"closeButtonLabel":""}' data-action="a-popover" data-csa-c-func-deps="aui-da-a-popover" data-csa-c-type="widget" data-render-id="r3ewdibb4hkggk2ln02zvxl0met" data-version-id="v3v794tv49y9a2k7wencwmtf89"><a aria-label="4.3 out of 5 stars, rating details" class="a-popover-trigger a-declarative" href="javascript:void(0)" role="button"><i aria-hidden="true" class="a-icon a-icon-star-small a-star-small-4-5" data-cy="reviews-ratings-slot"><span class="a-icon-alt">4.3 out of 5 stars</span></i><i class="a-icon a-icon-popover"></i></a></span> <span class="rush-component" data-component-type="s-client-side-analytics" data-render-id="r3ewdibb4hkggk2ln02zvxl0met" data-version-id="v3v794tv49y9a2k7wencwmtf89"><div class="s-csa-instrumentation-wrapper alf-search-csa-instrumentation-wrapper" data-csa-c-asin="B00N32ICIE" data-csa-c-content-id="alf-customer-ratings-count-component" data-csa-c-layout="GRID" data-csa-c-slot-id="alf-reviews" data-csa-c-type="alf-af-component" data-csa-op-log-render="" style="display: inline-block"><a aria-label="2,248 ratings" class="a-link-normal s-underline-text s-underline-link-text s-link-style" href="/Bose-SoundLink-Color-Bluetooth-Speaker/dp/B00N32ICIE/ref=sr_1_2?crid=1747167407&amp;dib=eyJ2IjoiMSJ9.X1SskUYWLDtkRGciXLb6HSoQWW0O9MIOVH5kCNRd63j6AU6VP9qwdImaqEo8VnVF85iOFFM0uYI-UnYrwE14Llqi48nEiHFbFj_gZpcFITABZ-NKzJwtLF2An1NPe1wbuxDvCWIX4jz0uqsDvqP_s175xlmNUTpFghd6tYp6PT59T__V8Sx6Y3RZygehiNnyo4C0HRqjVDTsaReJuWOz6J_i0Iwvdp86PlpPnDyywtClh5p25nKYYByL6vf0js2X9zyvMPW3uHFpcE9Gpn1J9ErH4F0K9Pfblx-XRyrW0LU.ljO4VB1Yvm1rdqbiiud31DMHp-sMyZu4CjXrXN_7jEo&amp;dib_tag=se&amp;keywords=Bose+speakers+Bose+Speakers+Bose+SoundLink+Bose+QuietComfort&amp;qid=1747167407&amp;s=electronics&amp;sr=1-2#customerReviews"><span aria-hidden="true" class="a-size-base s-underline-text">2,248</span> </a> </div></span></div></div><div class="a-section a-spacing-none a-spacing-top-small s-price-instructions-style" data-cy="price-recipe"><div class="a-row a-size-base a-color-base"><div class="a-row"></div><div class="a-row"></div></div></div><div class="a-section a-spacing-none a-spacing-top-mini"><div class="puis-see-details-content"><div data-csa-c-content-id="s-search-see-details-button" data-csa-c-device-env="WEB" data-csa-c-device-os="UNRECOGNIZED" data-csa-c-device-type="DESKTOP" data-csa-c-item-id="B00N32ICIE" data-csa-c-item-type="asin" data-csa-c-type="action"><span class="a-button a-button-base"><span class="a-button-inner"><a class="a-button-text" href="/Bose-SoundLink-Color-Bluetooth-Speaker/dp/B00N32ICIE/ref=sr_1_2_so_SPEAKERS?crid=1747167407&amp;dib=eyJ2IjoiMSJ9.X1SskUYWLDtkRGciXLb6HSoQWW0O9MIOVH5kCNRd63j6AU6VP9qwdImaqEo8VnVF85iOFFM0uYI-UnYrwE14Llqi48nEiHFbFj_gZpcFITABZ-NKzJwtLF2An1NPe1wbuxDvCWIX4jz0uqsDvqP_s175xlmNUTpFghd6tYp6PT59T__V8Sx6Y3RZygehiNnyo4C0HRqjVDTsaReJuWOz6J_i0Iwvdp86PlpPnDyywtClh5p25nKYYByL6vf0js2X9zyvMPW3uHFpcE9Gpn1J9ErH4F0K9Pfblx-XRyrW0LU.ljO4VB1Yvm1rdqbiiud31DMHp-sMyZu4CjXrXN_7jEo&amp;dib_tag=se&amp;keywords=Bose+speakers+Bose+Speakers+Bose+SoundLink+Bose+QuietComfort&amp;qid=1747167407&amp;s=electronics&amp;sr=1-2">See options</a></span></span></div></div></div></div></div></div></span></div></div></div>
            ```
            
            Extract:
            - title: Full product title
            - price: Numeric price value only (no currency symbol)
            - was_price: Original price before discount (if present)
            - currency: Currency code (e.g., USD)
            - url: Product URL
            - image_url: Main product image URL
            - rating: Star rating (0-5)
            - reviews: Number of reviews
            - asin: Amazon ASIN
            - is_prime: Boolean for Prime eligible
            - is_sponsored: Boolean for sponsored listing
            - is_amazon_choice: Boolean for Amazon's Choice
            - is_best_seller: Boolean for Best Seller
            - description: Any additional description text
            - delivery_info: Delivery/shipping information
            - out_of_stock: Boolean for out of stock status
            
            Return a clean JSON object with these fields. Use null for missing values.
            
2025-05-13 16:16:58,083 - DealFinderAI.AmazonScraperAgent - INFO - Gemini extracted: Bose SoundLink Color Bluetooth Speaker (Mint) at None USD
2025-05-13 16:16:58,083 - DealFinderAI.AmazonScraperAgent - INFO - Gemini used for product extraction
2025-05-13 16:16:58,084 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Bose SoundLink Color Bluetooth Speaker (Mint) at None USD
2025-05-13 16:16:58,084 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Bose SoundLink Color Bluetooth Speaker (Mint) at None USD
2025-05-13 16:16:58,093 - DealFinderAI.AmazonScraperAgent - WARNING - Incomplete data for ASIN B01HETFPK4, falling back to Gemini extraction.
2025-05-13 16:16:58,094 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: 
            Extract detailed product information from this Amazon listing HTML:
            
            ```html
            <div class="sg-col-4-of-24 sg-col-4-of-12 s-result-item s-asin sg-col-4-of-16 sg-col s-widget-spacing-small sg-col-4-of-20" data-asin="B01HETFPK4" data-component-type="s-search-result" data-index="5" data-uuid="57ff66a6-dcb5-4ba7-87b8-05f95105de8c" id="57ff66a6-dcb5-4ba7-87b8-05f95105de8c" role="listitem"><div class="sg-col-inner"><div cel_widget_id="MAIN-SEARCH_RESULTS-5" class="s-widget-container s-spacing-small s-widget-container-height-small celwidget slot=MAIN template=SEARCH_RESULTS widgetId=search-results_3" data-csa-c-item-id="amzn1.asin.1.B01HETFPK4" data-csa-c-pos="3" data-csa-c-type="item" data-csa-op-log-render=""><span class="a-declarative" data-action="puis-card-container-declarative" data-csa-c-func-deps="aui-da-puis-card-container-declarative" data-csa-c-item-id="amzn1.asin.B01HETFPK4" data-csa-c-owner="puis" data-csa-c-posx="3" data-csa-c-type="item" data-render-id="r3ewdibb4hkggk2ln02zvxl0met" data-version-id="v3v794tv49y9a2k7wencwmtf89"><div class="puis-card-container s-card-container s-overflow-hidden aok-relative puis-expand-height puis-include-content-margin puis puis-v3v794tv49y9a2k7wencwmtf89 s-latency-cf-section puis-card-border" data-cy="asin-faceout-container"><div class="a-section a-spacing-base"><div class="s-product-image-container aok-relative s-text-center s-image-overlay-grey puis-image-overlay-grey s-padding-left-small s-padding-right-small puis-spacing-small s-height-equalized puis puis-v3v794tv49y9a2k7wencwmtf89" data-cy="image-container"><span class="rush-component" data-component-type="s-product-image" data-render-id="r3ewdibb4hkggk2ln02zvxl0met" data-version-id="v3v794tv49y9a2k7wencwmtf89"><a class="a-link-normal s-no-outline" href="/Bose-SoundLink-Color-Bluetooth-Speaker/dp/B01HETFPK4/ref=sr_1_3?crid=1747167407&amp;dib=eyJ2IjoiMSJ9.X1SskUYWLDtkRGciXLb6HSoQWW0O9MIOVH5kCNRd63j6AU6VP9qwdImaqEo8VnVF85iOFFM0uYI-UnYrwE14Llqi48nEiHFbFj_gZpcFITABZ-NKzJwtLF2An1NPe1wbuxDvCWIX4jz0uqsDvqP_s175xlmNUTpFghd6tYp6PT59T__V8Sx6Y3RZygehiNnyo4C0HRqjVDTsaReJuWOz6J_i0Iwvdp86PlpPnDyywtClh5p25nKYYByL6vf0js2X9zyvMPW3uHFpcE9Gpn1J9ErH4F0K9Pfblx-XRyrW0LU.ljO4VB1Yvm1rdqbiiud31DMHp-sMyZu4CjXrXN_7jEo&amp;dib_tag=se&amp;keywords=Bose+speakers+Bose+Speakers+Bose+SoundLink+Bose+QuietComfort&amp;qid=1747167407&amp;s=electronics&amp;sr=1-3" tabindex="-1"><div class="a-section aok-relative s-image-square-aspect"><img alt="Bose SoundLink Color II: Portable Bluetooth, Wireless Speaker with Microphone- Aqua Blue" aria-hidden="true" class="s-image" data-image-index="3" data-image-latency="s-product-image" data-image-load="" data-image-source-density="1" src="https://m.media-amazon.com/images/I/61jIN02aztL._AC_UL320_.jpg" srcset="https://m.media-amazon.com/images/I/61jIN02aztL._AC_UL320_.jpg 1x, https://m.media-amazon.com/images/I/61jIN02aztL._AC_UL480_FMwebp_QL65_.jpg 1.5x, https://m.media-amazon.com/images/I/61jIN02aztL._AC_UL640_FMwebp_QL65_.jpg 2x, https://m.media-amazon.com/images/I/61jIN02aztL._AC_UL800_FMwebp_QL65_.jpg 2.5x, https://m.media-amazon.com/images/I/61jIN02aztL._AC_UL960_FMwebp_QL65_.jpg 3x"/></div></a></span></div><div class="a-section a-spacing-small puis-padding-left-small puis-padding-right-small"><div class="a-section a-spacing-none a-spacing-top-small s-title-instructions-style" data-cy="title-recipe"><div class="a-row a-color-secondary"><h2 class="a-size-mini s-line-clamp-1"><span class="a-size-base-plus a-color-base">Bose</span></h2></div><a class="a-link-normal s-line-clamp-4 s-link-style a-text-normal" href="/Bose-SoundLink-Color-Bluetooth-Speaker/dp/B01HETFPK4/ref=sr_1_3?crid=1747167407&amp;dib=eyJ2IjoiMSJ9.X1SskUYWLDtkRGciXLb6HSoQWW0O9MIOVH5kCNRd63j6AU6VP9qwdImaqEo8VnVF85iOFFM0uYI-UnYrwE14Llqi48nEiHFbFj_gZpcFITABZ-NKzJwtLF2An1NPe1wbuxDvCWIX4jz0uqsDvqP_s175xlmNUTpFghd6tYp6PT59T__V8Sx6Y3RZygehiNnyo4C0HRqjVDTsaReJuWOz6J_i0Iwvdp86PlpPnDyywtClh5p25nKYYByL6vf0js2X9zyvMPW3uHFpcE9Gpn1J9ErH4F0K9Pfblx-XRyrW0LU.ljO4VB1Yvm1rdqbiiud31DMHp-sMyZu4CjXrXN_7jEo&amp;dib_tag=se&amp;keywords=Bose+speakers+Bose+Speakers+Bose+SoundLink+Bose+QuietComfort&amp;qid=1747167407&amp;s=electronics&amp;sr=1-3"><h2 aria-label="SoundLink Color II: Portable Bluetooth, Wireless Speaker with Microphone- Aqua Blue" class="a-size-base-plus a-spacing-none a-color-base a-text-normal"><span>SoundLink Color II: Portable Bluetooth, Wireless Speaker with Microphone- Aqua Blue</span></h2></a> </div><div class="a-section a-spacing-none a-spacing-top-micro" data-cy="reviews-block"><div class="a-row a-size-small"><span class="a-declarative" data-a-popover='{"position":"triggerBottom","popoverLabel":"4.6 out of 5 stars, rating details","url":"/review/widgets/average-customer-review/popover/ref=acr_search__popover?ie=UTF8&amp;asin=B01HETFPK4&amp;ref_=acr_search__popover&amp;contextId=search","closeButton":true,"closeButtonLabel":""}' data-action="a-popover" data-csa-c-func-deps="aui-da-a-popover" data-csa-c-type="widget" data-render-id="r3ewdibb4hkggk2ln02zvxl0met" data-version-id="v3v794tv49y9a2k7wencwmtf89"><a aria-label="4.6 out of 5 stars, rating details" class="a-popover-trigger a-declarative" href="javascript:void(0)" role="button"><i aria-hidden="true" class="a-icon a-icon-star-small a-star-small-4-5" data-cy="reviews-ratings-slot"><span class="a-icon-alt">4.6 out of 5 stars</span></i><i class="a-icon a-icon-popover"></i></a></span> <span class="rush-component" data-component-type="s-client-side-analytics" data-render-id="r3ewdibb4hkggk2ln02zvxl0met" data-version-id="v3v794tv49y9a2k7wencwmtf89"><div class="s-csa-instrumentation-wrapper alf-search-csa-instrumentation-wrapper" data-csa-c-asin="B01HETFPK4" data-csa-c-content-id="alf-customer-ratings-count-component" data-csa-c-layout="GRID" data-csa-c-slot-id="alf-reviews" data-csa-c-type="alf-af-component" data-csa-op-log-render="" style="display: inline-block"><a aria-label="63,606 ratings" class="a-link-normal s-underline-text s-underline-link-text s-link-style" href="/Bose-SoundLink-Color-Bluetooth-Speaker/dp/B01HETFPK4/ref=sr_1_3?crid=1747167407&amp;dib=eyJ2IjoiMSJ9.X1SskUYWLDtkRGciXLb6HSoQWW0O9MIOVH5kCNRd63j6AU6VP9qwdImaqEo8VnVF85iOFFM0uYI-UnYrwE14Llqi48nEiHFbFj_gZpcFITABZ-NKzJwtLF2An1NPe1wbuxDvCWIX4jz0uqsDvqP_s175xlmNUTpFghd6tYp6PT59T__V8Sx6Y3RZygehiNnyo4C0HRqjVDTsaReJuWOz6J_i0Iwvdp86PlpPnDyywtClh5p25nKYYByL6vf0js2X9zyvMPW3uHFpcE9Gpn1J9ErH4F0K9Pfblx-XRyrW0LU.ljO4VB1Yvm1rdqbiiud31DMHp-sMyZu4CjXrXN_7jEo&amp;dib_tag=se&amp;keywords=Bose+speakers+Bose+Speakers+Bose+SoundLink+Bose+QuietComfort&amp;qid=1747167407&amp;s=electronics&amp;sr=1-3#customerReviews"><span aria-hidden="true" class="a-size-base s-underline-text">63,606</span> </a> </div></span></div></div><div class="a-section a-spacing-none a-spacing-top-small s-price-instructions-style" data-cy="price-recipe"><div class="a-row a-size-base a-color-base"><div class="a-row"></div><div class="a-row"></div></div></div><div class="a-section a-spacing-none a-spacing-top-mini"><div class="puis-see-details-content"><div data-csa-c-content-id="s-search-see-details-button" data-csa-c-device-env="WEB" data-csa-c-device-os="UNRECOGNIZED" data-csa-c-device-type="DESKTOP" data-csa-c-item-id="B01HETFPK4" data-csa-c-item-type="asin" data-csa-c-type="action"><span class="a-button a-button-base"><span class="a-button-inner"><a class="a-button-text" href="/Bose-SoundLink-Color-Bluetooth-Speaker/dp/B01HETFPK4/ref=sr_1_3_so_SPEAKERS?crid=1747167407&amp;dib=eyJ2IjoiMSJ9.X1SskUYWLDtkRGciXLb6HSoQWW0O9MIOVH5kCNRd63j6AU6VP9qwdImaqEo8VnVF85iOFFM0uYI-UnYrwE14Llqi48nEiHFbFj_gZpcFITABZ-NKzJwtLF2An1NPe1wbuxDvCWIX4jz0uqsDvqP_s175xlmNUTpFghd6tYp6PT59T__V8Sx6Y3RZygehiNnyo4C0HRqjVDTsaReJuWOz6J_i0Iwvdp86PlpPnDyywtClh5p25nKYYByL6vf0js2X9zyvMPW3uHFpcE9Gpn1J9ErH4F0K9Pfblx-XRyrW0LU.ljO4VB1Yvm1rdqbiiud31DMHp-sMyZu4CjXrXN_7jEo&amp;dib_tag=se&amp;keywords=Bose+speakers+Bose+Speakers+Bose+SoundLink+Bose+QuietComfort&amp;qid=1747167407&amp;s=electronics&amp;sr=1-3">See options</a></span></span></div></div></div></div></div></div></span></div></div></div>
            ```
            
            Extract:
            - title: Full product title
            - price: Numeric price value only (no currency symbol)
            - was_price: Original price before discount (if present)
            - currency: Currency code (e.g., USD)
            - url: Product URL
            - image_url: Main product image URL
            - rating: Star rating (0-5)
            - reviews: Number of reviews
            - asin: Amazon ASIN
            - is_prime: Boolean for Prime eligible
            - is_sponsored: Boolean for sponsored listing
            - is_amazon_choice: Boolean for Amazon's Choice
            - is_best_seller: Boolean for Best Seller
            - description: Any additional description text
            - delivery_info: Delivery/shipping information
            - out_of_stock: Boolean for out of stock status
            
            Return a clean JSON object with these fields. Use null for missing values.
            
2025-05-13 16:17:02,518 - DealFinderAI.AmazonScraperAgent - INFO - Gemini extracted: Bose SoundLink Color II: Portable Bluetooth, Wireless Speaker with Microphone- Aqua Blue at None USD
2025-05-13 16:17:02,518 - DealFinderAI.AmazonScraperAgent - INFO - Gemini used for product extraction
2025-05-13 16:17:02,518 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Bose SoundLink Color II: Portable Bluetooth, Wireless Speaker with Microphone- Aqua Blue at None USD
2025-05-13 16:17:02,519 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Bose SoundLink Color II: Portable Bluetooth, Wireless Speaker with Microphone- Aqua Blue at None USD
2025-05-13 16:17:02,533 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Bose at 119.0 USD
2025-05-13 16:17:02,533 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Bose at 119.0 USD
2025-05-13 16:17:02,538 - DealFinderAI.AmazonScraperAgent - WARNING - Incomplete data for ASIN B076LFBHKJ, falling back to Gemini extraction.
2025-05-13 16:17:02,539 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: 
            Extract detailed product information from this Amazon listing HTML:
            
            ```html
            <div class="sg-col-4-of-24 sg-col-4-of-12 s-result-item s-asin sg-col-4-of-16 sg-col s-widget-spacing-small sg-col-4-of-20" data-asin="B076LFBHKJ" data-component-type="s-search-result" data-index="8" data-uuid="c7c804c0-9085-4836-98a7-c1fb93dfc22b" id="c7c804c0-9085-4836-98a7-c1fb93dfc22b" role="listitem"><div class="sg-col-inner"><div cel_widget_id="MAIN-SEARCH_RESULTS-8" class="s-widget-container s-spacing-small s-widget-container-height-small celwidget slot=MAIN template=SEARCH_RESULTS widgetId=search-results_5" data-csa-c-item-id="amzn1.asin.1.B076LFBHKJ" data-csa-c-pos="5" data-csa-c-type="item" data-csa-op-log-render=""><span class="a-declarative" data-action="puis-card-container-declarative" data-csa-c-func-deps="aui-da-puis-card-container-declarative" data-csa-c-item-id="amzn1.asin.B076LFBHKJ" data-csa-c-owner="puis" data-csa-c-posx="5" data-csa-c-type="item" data-render-id="r3ewdibb4hkggk2ln02zvxl0met" data-version-id="v3v794tv49y9a2k7wencwmtf89"><div class="puis-card-container s-card-container s-overflow-hidden aok-relative puis-expand-height puis-include-content-margin puis puis-v3v794tv49y9a2k7wencwmtf89 s-latency-cf-section puis-card-border" data-cy="asin-faceout-container"><div class="a-section a-spacing-base"><div class="s-product-image-container aok-relative s-text-center s-image-overlay-grey puis-image-overlay-grey s-padding-left-small s-padding-right-small puis-spacing-small s-height-equalized puis puis-v3v794tv49y9a2k7wencwmtf89" data-cy="image-container"><span class="rush-component" data-component-type="s-product-image" data-render-id="r3ewdibb4hkggk2ln02zvxl0met" data-version-id="v3v794tv49y9a2k7wencwmtf89"><a class="a-link-normal s-no-outline" href="/Bose-SoundLink-Bluetooth-Speaker-Black/dp/B076LFBHKJ/ref=sr_1_5?crid=1747167407&amp;dib=eyJ2IjoiMSJ9.X1SskUYWLDtkRGciXLb6HSoQWW0O9MIOVH5kCNRd63j6AU6VP9qwdImaqEo8VnVF85iOFFM0uYI-UnYrwE14Llqi48nEiHFbFj_gZpcFITABZ-NKzJwtLF2An1NPe1wbuxDvCWIX4jz0uqsDvqP_s175xlmNUTpFghd6tYp6PT59T__V8Sx6Y3RZygehiNnyo4C0HRqjVDTsaReJuWOz6J_i0Iwvdp86PlpPnDyywtClh5p25nKYYByL6vf0js2X9zyvMPW3uHFpcE9Gpn1J9ErH4F0K9Pfblx-XRyrW0LU.ljO4VB1Yvm1rdqbiiud31DMHp-sMyZu4CjXrXN_7jEo&amp;dib_tag=se&amp;keywords=Bose+speakers+Bose+Speakers+Bose+SoundLink+Bose+QuietComfort&amp;qid=1747167407&amp;s=electronics&amp;sr=1-5" tabindex="-1"><div class="a-section aok-relative s-image-square-aspect"><img alt="Bose SoundLink Mini II Bluetooth Speaker, Black" aria-hidden="true" class="s-image" data-image-index="5" data-image-latency="s-product-image" data-image-load="" data-image-source-density="1" src="https://m.media-amazon.com/images/I/71DpRbBkpbS._AC_UL320_.jpg" srcset="https://m.media-amazon.com/images/I/71DpRbBkpbS._AC_UL320_.jpg 1x, https://m.media-amazon.com/images/I/71DpRbBkpbS._AC_UL480_FMwebp_QL65_.jpg 1.5x, https://m.media-amazon.com/images/I/71DpRbBkpbS._AC_UL640_FMwebp_QL65_.jpg 2x, https://m.media-amazon.com/images/I/71DpRbBkpbS._AC_UL800_FMwebp_QL65_.jpg 2.5x, https://m.media-amazon.com/images/I/71DpRbBkpbS._AC_UL960_FMwebp_QL65_.jpg 3x"/></div></a></span></div><div class="a-section a-spacing-small puis-padding-left-small puis-padding-right-small"><div class="a-section a-spacing-none a-spacing-top-small s-title-instructions-style" data-cy="title-recipe"><div class="a-row a-color-secondary"><h2 class="a-size-mini s-line-clamp-1"><span class="a-size-base-plus a-color-base">Bose</span></h2></div><a class="a-link-normal s-line-clamp-4 s-link-style a-text-normal" href="/Bose-SoundLink-Bluetooth-Speaker-Black/dp/B076LFBHKJ/ref=sr_1_5?crid=1747167407&amp;dib=eyJ2IjoiMSJ9.X1SskUYWLDtkRGciXLb6HSoQWW0O9MIOVH5kCNRd63j6AU6VP9qwdImaqEo8VnVF85iOFFM0uYI-UnYrwE14Llqi48nEiHFbFj_gZpcFITABZ-NKzJwtLF2An1NPe1wbuxDvCWIX4jz0uqsDvqP_s175xlmNUTpFghd6tYp6PT59T__V8Sx6Y3RZygehiNnyo4C0HRqjVDTsaReJuWOz6J_i0Iwvdp86PlpPnDyywtClh5p25nKYYByL6vf0js2X9zyvMPW3uHFpcE9Gpn1J9ErH4F0K9Pfblx-XRyrW0LU.ljO4VB1Yvm1rdqbiiud31DMHp-sMyZu4CjXrXN_7jEo&amp;dib_tag=se&amp;keywords=Bose+speakers+Bose+Speakers+Bose+SoundLink+Bose+QuietComfort&amp;qid=1747167407&amp;s=electronics&amp;sr=1-5"><h2 aria-label="SoundLink Mini II Bluetooth Speaker, Black" class="a-size-base-plus a-spacing-none a-color-base a-text-normal"><span>SoundLink Mini II Bluetooth Speaker, Black</span></h2></a> </div><div class="a-section a-spacing-none a-spacing-top-micro" data-cy="reviews-block"><div class="a-row a-size-small"><span class="a-declarative" data-a-popover='{"position":"triggerBottom","popoverLabel":"4.5 out of 5 stars, rating details","url":"/review/widgets/average-customer-review/popover/ref=acr_search__popover?ie=UTF8&amp;asin=B076LFBHKJ&amp;ref_=acr_search__popover&amp;contextId=search","closeButton":true,"closeButtonLabel":""}' data-action="a-popover" data-csa-c-func-deps="aui-da-a-popover" data-csa-c-type="widget" data-render-id="r3ewdibb4hkggk2ln02zvxl0met" data-version-id="v3v794tv49y9a2k7wencwmtf89"><a aria-label="4.5 out of 5 stars, rating details" class="a-popover-trigger a-declarative" href="javascript:void(0)" role="button"><i aria-hidden="true" class="a-icon a-icon-star-small a-star-small-4-5" data-cy="reviews-ratings-slot"><span class="a-icon-alt">4.5 out of 5 stars</span></i><i class="a-icon a-icon-popover"></i></a></span> <span class="rush-component" data-component-type="s-client-side-analytics" data-render-id="r3ewdibb4hkggk2ln02zvxl0met" data-version-id="v3v794tv49y9a2k7wencwmtf89"><div class="s-csa-instrumentation-wrapper alf-search-csa-instrumentation-wrapper" data-csa-c-asin="B076LFBHKJ" data-csa-c-content-id="alf-customer-ratings-count-component" data-csa-c-layout="GRID" data-csa-c-slot-id="alf-reviews" data-csa-c-type="alf-af-component" data-csa-op-log-render="" style="display: inline-block"><a aria-label="963 ratings" class="a-link-normal s-underline-text s-underline-link-text s-link-style" href="/Bose-SoundLink-Bluetooth-Speaker-Black/dp/B076LFBHKJ/ref=sr_1_5?crid=1747167407&amp;dib=eyJ2IjoiMSJ9.X1SskUYWLDtkRGciXLb6HSoQWW0O9MIOVH5kCNRd63j6AU6VP9qwdImaqEo8VnVF85iOFFM0uYI-UnYrwE14Llqi48nEiHFbFj_gZpcFITABZ-NKzJwtLF2An1NPe1wbuxDvCWIX4jz0uqsDvqP_s175xlmNUTpFghd6tYp6PT59T__V8Sx6Y3RZygehiNnyo4C0HRqjVDTsaReJuWOz6J_i0Iwvdp86PlpPnDyywtClh5p25nKYYByL6vf0js2X9zyvMPW3uHFpcE9Gpn1J9ErH4F0K9Pfblx-XRyrW0LU.ljO4VB1Yvm1rdqbiiud31DMHp-sMyZu4CjXrXN_7jEo&amp;dib_tag=se&amp;keywords=Bose+speakers+Bose+Speakers+Bose+SoundLink+Bose+QuietComfort&amp;qid=1747167407&amp;s=electronics&amp;sr=1-5#customerReviews"><span aria-hidden="true" class="a-size-base s-underline-text">963</span> </a> </div></span></div></div><div class="a-section a-spacing-none a-spacing-top-small s-price-instructions-style" data-cy="price-recipe"><div class="a-row a-size-base a-color-base"><div class="a-row"></div><div class="a-row"></div></div></div><div class="a-section a-spacing-none a-spacing-top-mini"><div class="puis-see-details-content"><div data-csa-c-content-id="s-search-see-details-button" data-csa-c-device-env="WEB" data-csa-c-device-os="UNRECOGNIZED" data-csa-c-device-type="DESKTOP" data-csa-c-item-id="B076LFBHKJ" data-csa-c-item-type="asin" data-csa-c-type="action"><span class="a-button a-button-base"><span class="a-button-inner"><a class="a-button-text" href="/Bose-SoundLink-Bluetooth-Speaker-Black/dp/B076LFBHKJ/ref=sr_1_5_so_SPEAKERS?crid=1747167407&amp;dib=eyJ2IjoiMSJ9.X1SskUYWLDtkRGciXLb6HSoQWW0O9MIOVH5kCNRd63j6AU6VP9qwdImaqEo8VnVF85iOFFM0uYI-UnYrwE14Llqi48nEiHFbFj_gZpcFITABZ-NKzJwtLF2An1NPe1wbuxDvCWIX4jz0uqsDvqP_s175xlmNUTpFghd6tYp6PT59T__V8Sx6Y3RZygehiNnyo4C0HRqjVDTsaReJuWOz6J_i0Iwvdp86PlpPnDyywtClh5p25nKYYByL6vf0js2X9zyvMPW3uHFpcE9Gpn1J9ErH4F0K9Pfblx-XRyrW0LU.ljO4VB1Yvm1rdqbiiud31DMHp-sMyZu4CjXrXN_7jEo&amp;dib_tag=se&amp;keywords=Bose+speakers+Bose+Speakers+Bose+SoundLink+Bose+QuietComfort&amp;qid=1747167407&amp;s=electronics&amp;sr=1-5">See options</a></span></span></div></div></div></div></div></div></span></div></div></div>
            ```
            
            Extract:
            - title: Full product title
            - price: Numeric price value only (no currency symbol)
            - was_price: Original price before discount (if present)
            - currency: Currency code (e.g., USD)
            - url: Product URL
            - image_url: Main product image URL
            - rating: Star rating (0-5)
            - reviews: Number of reviews
            - asin: Amazon ASIN
            - is_prime: Boolean for Prime eligible
            - is_sponsored: Boolean for sponsored listing
            - is_amazon_choice: Boolean for Amazon's Choice
            - is_best_seller: Boolean for Best Seller
            - description: Any additional description text
            - delivery_info: Delivery/shipping information
            - out_of_stock: Boolean for out of stock status
            
            Return a clean JSON object with these fields. Use null for missing values.
            
2025-05-13 16:17:06,540 - DealFinderAI.AmazonScraperAgent - INFO - Gemini extracted: Bose SoundLink Mini II Bluetooth Speaker, Black at None USD
2025-05-13 16:17:06,541 - DealFinderAI.AmazonScraperAgent - INFO - Gemini used for product extraction
2025-05-13 16:17:06,541 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Bose SoundLink Mini II Bluetooth Speaker, Black at None USD
2025-05-13 16:17:06,541 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Bose SoundLink Mini II Bluetooth Speaker, Black at None USD
2025-05-13 16:17:06,555 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Bose SoundLink Micro Bluetooth Speaker - Bright Orange - 7833420900 (Renewed) at 104.91 USD
2025-05-13 16:17:06,555 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Bose SoundLink Micro Bluetooth Speaker - Bright Orange - 7833420900 (Renewed) at 104.91 USD
2025-05-13 16:17:06,561 - DealFinderAI.AmazonScraperAgent - WARNING - Incomplete data for ASIN B00M1XBQ1G, falling back to Gemini extraction.
2025-05-13 16:17:06,562 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: 
            Extract detailed product information from this Amazon listing HTML:
            
            ```html
            <div class="sg-col-4-of-24 sg-col-4-of-12 s-result-item s-asin sg-col-4-of-16 sg-col s-widget-spacing-small sg-col-4-of-20" data-asin="B00M1XBQ1G" data-component-type="s-search-result" data-index="10" data-uuid="f1167424-91ed-4af1-95a8-6da93a244e05" id="f1167424-91ed-4af1-95a8-6da93a244e05" role="listitem"><div class="sg-col-inner"><div cel_widget_id="MAIN-SEARCH_RESULTS-10" class="s-widget-container s-spacing-small s-widget-container-height-small celwidget slot=MAIN template=SEARCH_RESULTS widgetId=search-results_7" data-csa-c-item-id="amzn1.asin.1.B00M1XBQ1G" data-csa-c-pos="7" data-csa-c-type="item" data-csa-op-log-render=""><span class="a-declarative" data-action="puis-card-container-declarative" data-csa-c-func-deps="aui-da-puis-card-container-declarative" data-csa-c-item-id="amzn1.asin.B00M1XBQ1G" data-csa-c-owner="puis" data-csa-c-posx="7" data-csa-c-type="item" data-render-id="r3ewdibb4hkggk2ln02zvxl0met" data-version-id="v3v794tv49y9a2k7wencwmtf89"><div class="puis-card-container s-card-container s-overflow-hidden aok-relative puis-expand-height puis-include-content-margin puis puis-v3v794tv49y9a2k7wencwmtf89 s-latency-cf-section puis-card-border" data-cy="asin-faceout-container"><div class="a-section a-spacing-base"><div class="s-product-image-container aok-relative s-text-center s-image-overlay-grey puis-image-overlay-grey s-padding-left-small s-padding-right-small puis-spacing-small s-height-equalized puis puis-v3v794tv49y9a2k7wencwmtf89" data-cy="image-container"><span class="rush-component" data-component-type="s-product-image" data-render-id="r3ewdibb4hkggk2ln02zvxl0met" data-version-id="v3v794tv49y9a2k7wencwmtf89"><a class="a-link-normal s-no-outline" href="/Bose-SoundLink-Bluetooth-Mobile-Speaker/dp/B00M1XBQ1G/ref=sr_1_7?crid=1747167407&amp;dib=eyJ2IjoiMSJ9.X1SskUYWLDtkRGciXLb6HSoQWW0O9MIOVH5kCNRd63j6AU6VP9qwdImaqEo8VnVF85iOFFM0uYI-UnYrwE14Llqi48nEiHFbFj_gZpcFITABZ-NKzJwtLF2An1NPe1wbuxDvCWIX4jz0uqsDvqP_s175xlmNUTpFghd6tYp6PT59T__V8Sx6Y3RZygehiNnyo4C0HRqjVDTsaReJuWOz6J_i0Iwvdp86PlpPnDyywtClh5p25nKYYByL6vf0js2X9zyvMPW3uHFpcE9Gpn1J9ErH4F0K9Pfblx-XRyrW0LU.ljO4VB1Yvm1rdqbiiud31DMHp-sMyZu4CjXrXN_7jEo&amp;dib_tag=se&amp;keywords=Bose+speakers+Bose+Speakers+Bose+SoundLink+Bose+QuietComfort&amp;qid=1747167407&amp;s=electronics&amp;sr=1-7" tabindex="-1"><div class="a-section aok-relative s-image-square-aspect"><img alt="Bose SoundLink Bluetooth Mobile Speaker II" aria-hidden="true" class="s-image" data-image-index="7" data-image-latency="s-product-image" data-image-load="" data-image-source-density="1" src="https://m.media-amazon.com/images/I/81omFz3RNeL._AC_UL320_.jpg" srcset="https://m.media-amazon.com/images/I/81omFz3RNeL._AC_UL320_.jpg 1x, https://m.media-amazon.com/images/I/81omFz3RNeL._AC_UL480_FMwebp_QL65_.jpg 1.5x, https://m.media-amazon.com/images/I/81omFz3RNeL._AC_UL640_FMwebp_QL65_.jpg 2x, https://m.media-amazon.com/images/I/81omFz3RNeL._AC_UL800_FMwebp_QL65_.jpg 2.5x, https://m.media-amazon.com/images/I/81omFz3RNeL._AC_UL960_FMwebp_QL65_.jpg 3x"/></div></a></span></div><div class="a-section a-spacing-small puis-padding-left-small puis-padding-right-small"><div class="a-section a-spacing-none a-spacing-top-small s-title-instructions-style" data-cy="title-recipe"><div class="a-row a-color-secondary"><h2 class="a-size-mini s-line-clamp-1"><span class="a-size-base-plus a-color-base">Bose</span></h2></div><a class="a-link-normal s-line-clamp-4 s-link-style a-text-normal" href="/Bose-SoundLink-Bluetooth-Mobile-Speaker/dp/B00M1XBQ1G/ref=sr_1_7?crid=1747167407&amp;dib=eyJ2IjoiMSJ9.X1SskUYWLDtkRGciXLb6HSoQWW0O9MIOVH5kCNRd63j6AU6VP9qwdImaqEo8VnVF85iOFFM0uYI-UnYrwE14Llqi48nEiHFbFj_gZpcFITABZ-NKzJwtLF2An1NPe1wbuxDvCWIX4jz0uqsDvqP_s175xlmNUTpFghd6tYp6PT59T__V8Sx6Y3RZygehiNnyo4C0HRqjVDTsaReJuWOz6J_i0Iwvdp86PlpPnDyywtClh5p25nKYYByL6vf0js2X9zyvMPW3uHFpcE9Gpn1J9ErH4F0K9Pfblx-XRyrW0LU.ljO4VB1Yvm1rdqbiiud31DMHp-sMyZu4CjXrXN_7jEo&amp;dib_tag=se&amp;keywords=Bose+speakers+Bose+Speakers+Bose+SoundLink+Bose+QuietComfort&amp;qid=1747167407&amp;s=electronics&amp;sr=1-7"><h2 aria-label="SoundLink Bluetooth Mobile Speaker II" class="a-size-base-plus a-spacing-none a-color-base a-text-normal"><span>SoundLink Bluetooth Mobile Speaker II</span></h2></a> </div><div class="a-section a-spacing-none a-spacing-top-micro" data-cy="reviews-block"><div class="a-row a-size-small"><span class="a-declarative" data-a-popover='{"position":"triggerBottom","popoverLabel":"3.8 out of 5 stars, rating details","url":"/review/widgets/average-customer-review/popover/ref=acr_search__popover?ie=UTF8&amp;asin=B00M1XBQ1G&amp;ref_=acr_search__popover&amp;contextId=search","closeButton":true,"closeButtonLabel":""}' data-action="a-popover" data-csa-c-func-deps="aui-da-a-popover" data-csa-c-type="widget" data-render-id="r3ewdibb4hkggk2ln02zvxl0met" data-version-id="v3v794tv49y9a2k7wencwmtf89"><a aria-label="3.8 out of 5 stars, rating details" class="a-popover-trigger a-declarative" href="javascript:void(0)" role="button"><i aria-hidden="true" class="a-icon a-icon-star-small a-star-small-4" data-cy="reviews-ratings-slot"><span class="a-icon-alt">3.8 out of 5 stars</span></i><i class="a-icon a-icon-popover"></i></a></span> <span class="rush-component" data-component-type="s-client-side-analytics" data-render-id="r3ewdibb4hkggk2ln02zvxl0met" data-version-id="v3v794tv49y9a2k7wencwmtf89"><div class="s-csa-instrumentation-wrapper alf-search-csa-instrumentation-wrapper" data-csa-c-asin="B00M1XBQ1G" data-csa-c-content-id="alf-customer-ratings-count-component" data-csa-c-layout="GRID" data-csa-c-slot-id="alf-reviews" data-csa-c-type="alf-af-component" data-csa-op-log-render="" style="display: inline-block"><a aria-label="63 ratings" class="a-link-normal s-underline-text s-underline-link-text s-link-style" href="/Bose-SoundLink-Bluetooth-Mobile-Speaker/dp/B00M1XBQ1G/ref=sr_1_7?crid=1747167407&amp;dib=eyJ2IjoiMSJ9.X1SskUYWLDtkRGciXLb6HSoQWW0O9MIOVH5kCNRd63j6AU6VP9qwdImaqEo8VnVF85iOFFM0uYI-UnYrwE14Llqi48nEiHFbFj_gZpcFITABZ-NKzJwtLF2An1NPe1wbuxDvCWIX4jz0uqsDvqP_s175xlmNUTpFghd6tYp6PT59T__V8Sx6Y3RZygehiNnyo4C0HRqjVDTsaReJuWOz6J_i0Iwvdp86PlpPnDyywtClh5p25nKYYByL6vf0js2X9zyvMPW3uHFpcE9Gpn1J9ErH4F0K9Pfblx-XRyrW0LU.ljO4VB1Yvm1rdqbiiud31DMHp-sMyZu4CjXrXN_7jEo&amp;dib_tag=se&amp;keywords=Bose+speakers+Bose+Speakers+Bose+SoundLink+Bose+QuietComfort&amp;qid=1747167407&amp;s=electronics&amp;sr=1-7#customerReviews"><span aria-hidden="true" class="a-size-base s-underline-text">63</span> </a> </div></span></div></div><div class="a-section a-spacing-none a-spacing-top-small s-price-instructions-style" data-cy="price-recipe"><div class="a-row a-size-base a-color-base"><div class="a-row"></div><div class="a-row"></div></div></div><div class="a-section a-spacing-none a-spacing-top-mini"><div class="puis-see-details-content"><div data-csa-c-content-id="s-search-see-details-button" data-csa-c-device-env="WEB" data-csa-c-device-os="UNRECOGNIZED" data-csa-c-device-type="DESKTOP" data-csa-c-item-id="B00M1XBQ1G" data-csa-c-item-type="asin" data-csa-c-type="action"><span class="a-button a-button-base"><span class="a-button-inner"><a class="a-button-text" href="/Bose-SoundLink-Bluetooth-Mobile-Speaker/dp/B00M1XBQ1G/ref=sr_1_7_so_SPEAKERS?crid=1747167407&amp;dib=eyJ2IjoiMSJ9.X1SskUYWLDtkRGciXLb6HSoQWW0O9MIOVH5kCNRd63j6AU6VP9qwdImaqEo8VnVF85iOFFM0uYI-UnYrwE14Llqi48nEiHFbFj_gZpcFITABZ-NKzJwtLF2An1NPe1wbuxDvCWIX4jz0uqsDvqP_s175xlmNUTpFghd6tYp6PT59T__V8Sx6Y3RZygehiNnyo4C0HRqjVDTsaReJuWOz6J_i0Iwvdp86PlpPnDyywtClh5p25nKYYByL6vf0js2X9zyvMPW3uHFpcE9Gpn1J9ErH4F0K9Pfblx-XRyrW0LU.ljO4VB1Yvm1rdqbiiud31DMHp-sMyZu4CjXrXN_7jEo&amp;dib_tag=se&amp;keywords=Bose+speakers+Bose+Speakers+Bose+SoundLink+Bose+QuietComfort&amp;qid=1747167407&amp;s=electronics&amp;sr=1-7">See options</a></span></span></div></div></div></div></div></div></span></div></div></div>
            ```
            
            Extract:
            - title: Full product title
            - price: Numeric price value only (no currency symbol)
            - was_price: Original price before discount (if present)
            - currency: Currency code (e.g., USD)
            - url: Product URL
            - image_url: Main product image URL
            - rating: Star rating (0-5)
            - reviews: Number of reviews
            - asin: Amazon ASIN
            - is_prime: Boolean for Prime eligible
            - is_sponsored: Boolean for sponsored listing
            - is_amazon_choice: Boolean for Amazon's Choice
            - is_best_seller: Boolean for Best Seller
            - description: Any additional description text
            - delivery_info: Delivery/shipping information
            - out_of_stock: Boolean for out of stock status
            
            Return a clean JSON object with these fields. Use null for missing values.
            
2025-05-13 16:17:10,522 - DealFinderAI.AmazonScraperAgent - INFO - Gemini extracted: Bose SoundLink Bluetooth Mobile Speaker II at None USD
2025-05-13 16:17:10,523 - DealFinderAI.AmazonScraperAgent - INFO - Gemini used for product extraction
2025-05-13 16:17:10,523 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Bose SoundLink Bluetooth Mobile Speaker II at None USD
2025-05-13 16:17:10,523 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Bose SoundLink Bluetooth Mobile Speaker II at None USD
2025-05-13 16:17:10,534 - DealFinderAI.AmazonScraperAgent - WARNING - Incomplete data for ASIN B099TLMRB6, falling back to Gemini extraction.
2025-05-13 16:17:10,535 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: 
            Extract detailed product information from this Amazon listing HTML:
            
            ```html
            <div class="sg-col-4-of-24 sg-col-4-of-12 s-result-item s-asin sg-col-4-of-16 sg-col s-widget-spacing-small sg-col-4-of-20" data-asin="B099TLMRB6" data-component-type="s-search-result" data-index="11" data-uuid="989dffb2-99bd-44c1-afc6-fb02e049812d" id="989dffb2-99bd-44c1-afc6-fb02e049812d" role="listitem"><div class="sg-col-inner"><div cel_widget_id="MAIN-SEARCH_RESULTS-11" class="s-widget-container s-spacing-small s-widget-container-height-small celwidget slot=MAIN template=SEARCH_RESULTS widgetId=search-results_8" data-csa-c-item-id="amzn1.asin.1.B099TLMRB6" data-csa-c-pos="8" data-csa-c-type="item" data-csa-op-log-render=""><span class="a-declarative" data-action="puis-card-container-declarative" data-csa-c-func-deps="aui-da-puis-card-container-declarative" data-csa-c-item-id="amzn1.asin.B099TLMRB6" data-csa-c-owner="puis" data-csa-c-posx="8" data-csa-c-type="item" data-render-id="r3ewdibb4hkggk2ln02zvxl0met" data-version-id="v3v794tv49y9a2k7wencwmtf89"><div class="puis-card-container s-card-container s-overflow-hidden aok-relative puis-expand-height puis-include-content-margin puis puis-v3v794tv49y9a2k7wencwmtf89 s-latency-cf-section puis-card-border" data-cy="asin-faceout-container"><div class="a-section a-spacing-base"><div class="s-product-image-container aok-relative s-text-center s-image-overlay-grey puis-image-overlay-grey s-padding-left-small s-padding-right-small puis-spacing-small s-height-equalized puis puis-v3v794tv49y9a2k7wencwmtf89" data-cy="image-container"><span class="rush-component" data-component-type="s-product-image" data-render-id="r3ewdibb4hkggk2ln02zvxl0met" data-version-id="v3v794tv49y9a2k7wencwmtf89"><a class="a-link-normal s-no-outline" href="/Bose-SoundLink-Bluetooth-Portable-Waterproof/dp/B099TLMRB6/ref=sr_1_8?crid=1747167407&amp;dib=eyJ2IjoiMSJ9.X1SskUYWLDtkRGciXLb6HSoQWW0O9MIOVH5kCNRd63j6AU6VP9qwdImaqEo8VnVF85iOFFM0uYI-UnYrwE14Llqi48nEiHFbFj_gZpcFITABZ-NKzJwtLF2An1NPe1wbuxDvCWIX4jz0uqsDvqP_s175xlmNUTpFghd6tYp6PT59T__V8Sx6Y3RZygehiNnyo4C0HRqjVDTsaReJuWOz6J_i0Iwvdp86PlpPnDyywtClh5p25nKYYByL6vf0js2X9zyvMPW3uHFpcE9Gpn1J9ErH4F0K9Pfblx-XRyrW0LU.ljO4VB1Yvm1rdqbiiud31DMHp-sMyZu4CjXrXN_7jEo&amp;dib_tag=se&amp;keywords=Bose+speakers+Bose+Speakers+Bose+SoundLink+Bose+QuietComfort&amp;qid=1747167407&amp;s=electronics&amp;sr=1-8" tabindex="-1"><div class="a-section aok-relative s-image-square-aspect"><img alt="Bose SoundLink Flex Bluetooth Portable Speaker, Wireless Waterproof Speaker for Outdoor Travel - White" aria-hidden="true" class="s-image" data-image-index="8" data-image-latency="s-product-image" data-image-load="" data-image-source-density="1" src="https://m.media-amazon.com/images/I/71Lp78GEMkL._AC_UL320_.jpg" srcset="https://m.media-amazon.com/images/I/71Lp78GEMkL._AC_UL320_.jpg 1x, https://m.media-amazon.com/images/I/71Lp78GEMkL._AC_UL480_FMwebp_QL65_.jpg 1.5x, https://m.media-amazon.com/images/I/71Lp78GEMkL._AC_UL640_FMwebp_QL65_.jpg 2x, https://m.media-amazon.com/images/I/71Lp78GEMkL._AC_UL800_FMwebp_QL65_.jpg 2.5x, https://m.media-amazon.com/images/I/71Lp78GEMkL._AC_UL960_FMwebp_QL65_.jpg 3x"/></div></a></span></div><div class="a-section a-spacing-small puis-padding-left-small puis-padding-right-small"><div class="a-section a-spacing-none a-spacing-top-small s-title-instructions-style" data-cy="title-recipe"><div class="a-row a-color-secondary"><h2 class="a-size-mini s-line-clamp-1"><span class="a-size-base-plus a-color-base">Bose</span></h2></div><a class="a-link-normal s-line-clamp-4 s-link-style a-text-normal" href="/Bose-SoundLink-Bluetooth-Portable-Waterproof/dp/B099TLMRB6/ref=sr_1_8?crid=1747167407&amp;dib=eyJ2IjoiMSJ9.X1SskUYWLDtkRGciXLb6HSoQWW0O9MIOVH5kCNRd63j6AU6VP9qwdImaqEo8VnVF85iOFFM0uYI-UnYrwE14Llqi48nEiHFbFj_gZpcFITABZ-NKzJwtLF2An1NPe1wbuxDvCWIX4jz0uqsDvqP_s175xlmNUTpFghd6tYp6PT59T__V8Sx6Y3RZygehiNnyo4C0HRqjVDTsaReJuWOz6J_i0Iwvdp86PlpPnDyywtClh5p25nKYYByL6vf0js2X9zyvMPW3uHFpcE9Gpn1J9ErH4F0K9Pfblx-XRyrW0LU.ljO4VB1Yvm1rdqbiiud31DMHp-sMyZu4CjXrXN_7jEo&amp;dib_tag=se&amp;keywords=Bose+speakers+Bose+Speakers+Bose+SoundLink+Bose+QuietComfort&amp;qid=1747167407&amp;s=electronics&amp;sr=1-8"><h2 aria-label="SoundLink Flex Bluetooth Portable Speaker, Wireless Waterproof Speaker for Outdoor Travel - White" class="a-size-base-plus a-spacing-none a-color-base a-text-normal"><span>SoundLink Flex Bluetooth Portable Speaker, Wireless Waterproof Speaker for Outdoor Travel - White</span></h2></a> </div><div class="a-section a-spacing-none a-spacing-top-micro" data-cy="reviews-block"><div class="a-row a-size-small"><span class="a-declarative" data-a-popover='{"position":"triggerBottom","popoverLabel":"4.7 out of 5 stars, rating details","url":"/review/widgets/average-customer-review/popover/ref=acr_search__popover?ie=UTF8&amp;asin=B099TLMRB6&amp;ref_=acr_search__popover&amp;contextId=search","closeButton":true,"closeButtonLabel":""}' data-action="a-popover" data-csa-c-func-deps="aui-da-a-popover" data-csa-c-type="widget" data-render-id="r3ewdibb4hkggk2ln02zvxl0met" data-version-id="v3v794tv49y9a2k7wencwmtf89"><a aria-label="4.7 out of 5 stars, rating details" class="a-popover-trigger a-declarative" href="javascript:void(0)" role="button"><i aria-hidden="true" class="a-icon a-icon-star-small a-star-small-4-5" data-cy="reviews-ratings-slot"><span class="a-icon-alt">4.7 out of 5 stars</span></i><i class="a-icon a-icon-popover"></i></a></span> <span class="rush-component" data-component-type="s-client-side-analytics" data-render-id="r3ewdibb4hkggk2ln02zvxl0met" data-version-id="v3v794tv49y9a2k7wencwmtf89"><div class="s-csa-instrumentation-wrapper alf-search-csa-instrumentation-wrapper" data-csa-c-asin="B099TLMRB6" data-csa-c-content-id="alf-customer-ratings-count-component" data-csa-c-layout="GRID" data-csa-c-slot-id="alf-reviews" data-csa-c-type="alf-af-component" data-csa-op-log-render="" style="display: inline-block"><a aria-label="38,084 ratings" class="a-link-normal s-underline-text s-underline-link-text s-link-style" href="/Bose-SoundLink-Bluetooth-Portable-Waterproof/dp/B099TLMRB6/ref=sr_1_8?crid=1747167407&amp;dib=eyJ2IjoiMSJ9.X1SskUYWLDtkRGciXLb6HSoQWW0O9MIOVH5kCNRd63j6AU6VP9qwdImaqEo8VnVF85iOFFM0uYI-UnYrwE14Llqi48nEiHFbFj_gZpcFITABZ-NKzJwtLF2An1NPe1wbuxDvCWIX4jz0uqsDvqP_s175xlmNUTpFghd6tYp6PT59T__V8Sx6Y3RZygehiNnyo4C0HRqjVDTsaReJuWOz6J_i0Iwvdp86PlpPnDyywtClh5p25nKYYByL6vf0js2X9zyvMPW3uHFpcE9Gpn1J9ErH4F0K9Pfblx-XRyrW0LU.ljO4VB1Yvm1rdqbiiud31DMHp-sMyZu4CjXrXN_7jEo&amp;dib_tag=se&amp;keywords=Bose+speakers+Bose+Speakers+Bose+SoundLink+Bose+QuietComfort&amp;qid=1747167407&amp;s=electronics&amp;sr=1-8#customerReviews"><span aria-hidden="true" class="a-size-base s-underline-text">38,084</span> </a> </div></span></div></div><div class="a-section a-spacing-none a-spacing-top-small s-price-instructions-style" data-cy="price-recipe"><div class="a-row a-size-base a-color-base"><div class="a-row"></div><div class="a-row"></div></div></div><div class="a-section a-spacing-none a-spacing-top-mini"><div class="puis-see-details-content"><div data-csa-c-content-id="s-search-see-details-button" data-csa-c-device-env="WEB" data-csa-c-device-os="UNRECOGNIZED" data-csa-c-device-type="DESKTOP" data-csa-c-item-id="B099TLMRB6" data-csa-c-item-type="asin" data-csa-c-type="action"><span class="a-button a-button-base"><span class="a-button-inner"><a class="a-button-text" href="/Bose-SoundLink-Bluetooth-Portable-Waterproof/dp/B099TLMRB6/ref=sr_1_8_so_SPEAKERS?crid=1747167407&amp;dib=eyJ2IjoiMSJ9.X1SskUYWLDtkRGciXLb6HSoQWW0O9MIOVH5kCNRd63j6AU6VP9qwdImaqEo8VnVF85iOFFM0uYI-UnYrwE14Llqi48nEiHFbFj_gZpcFITABZ-NKzJwtLF2An1NPe1wbuxDvCWIX4jz0uqsDvqP_s175xlmNUTpFghd6tYp6PT59T__V8Sx6Y3RZygehiNnyo4C0HRqjVDTsaReJuWOz6J_i0Iwvdp86PlpPnDyywtClh5p25nKYYByL6vf0js2X9zyvMPW3uHFpcE9Gpn1J9ErH4F0K9Pfblx-XRyrW0LU.ljO4VB1Yvm1rdqbiiud31DMHp-sMyZu4CjXrXN_7jEo&amp;dib_tag=se&amp;keywords=Bose+speakers+Bose+Speakers+Bose+SoundLink+Bose+QuietComfort&amp;qid=1747167407&amp;s=electronics&amp;sr=1-8">See options</a></span></span></div></div></div></div></div></div></span></div></div></div>
            ```
            
            Extract:
            - title: Full product title
            - price: Numeric price value only (no currency symbol)
            - was_price: Original price before discount (if present)
            - currency: Currency code (e.g., USD)
            - url: Product URL
            - image_url: Main product image URL
            - rating: Star rating (0-5)
            - reviews: Number of reviews
            - asin: Amazon ASIN
            - is_prime: Boolean for Prime eligible
            - is_sponsored: Boolean for sponsored listing
            - is_amazon_choice: Boolean for Amazon's Choice
            - is_best_seller: Boolean for Best Seller
            - description: Any additional description text
            - delivery_info: Delivery/shipping information
            - out_of_stock: Boolean for out of stock status
            
            Return a clean JSON object with these fields. Use null for missing values.
            
2025-05-13 16:17:14,563 - DealFinderAI.AmazonScraperAgent - INFO - Gemini extracted: Bose SoundLink Flex Bluetooth Portable Speaker, Wireless Waterproof Speaker for Outdoor Travel - White at None USD
2025-05-13 16:17:14,563 - DealFinderAI.AmazonScraperAgent - INFO - Gemini used for product extraction
2025-05-13 16:17:14,563 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Bose SoundLink Flex Bluetooth Portable Speaker, Wireless Waterproof Speaker for Outdoor Travel - White at None USD
2025-05-13 16:17:14,563 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Bose SoundLink Flex Bluetooth Portable Speaker, Wireless Waterproof Speaker for Outdoor Travel - White at None USD
2025-05-13 16:17:14,568 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Bose at 121.99 USD
2025-05-13 16:17:14,568 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Bose at 121.99 USD
2025-05-13 16:17:14,572 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Bose at 128.0 USD
2025-05-13 16:17:14,572 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Bose at 128.0 USD
2025-05-13 16:17:16,046 - DealFinderAI.AmazonScraperAgent - INFO - Extracted 10 products from Amazon
2025-05-13 16:17:16,047 - DealFinderAI.AmazonScraperAgent - INFO - Applying relevance filtering to 10 products
2025-05-13 16:17:16,047 - DealFinderAI.AmazonScraperAgent - ERROR - Error in relevance filtering: 'NoneType' object has no attribute 'lower'
2025-05-13 16:17:16,047 - DealFinderAI.Controller - INFO - Amazon response content: {'source': 'Amazon', 'query': 'Bose speakers Bose Speakers Bose SoundLink Bose QuietComfort', 'products': [{'title': 'Bose SoundLink Color Bluetooth Speaker (Black)', 'price': 74.45, 'was_price': None, 'currency': None, 'url': '/Bose-SoundLink-Color-Bluetooth-Speaker/dp/B00N32I2Q6/ref=sr_1_1?crid=1747167407&dib=eyJ2IjoiMSJ9.X1SskUYWLDtkRGciXLb6HSoQWW0O9MIOVH5kCNRd63j6AU6VP9qwdImaqEo8VnVF85iOFFM0uYI-UnYrwE14Llqi48nEiHFbFj_gZpcFITABZ-NKzJwtLF2An1NPe1wbuxDvCWIX4jz0uqsDvqP_s175xlmNUTpFghd6tYp6PT59T__V8Sx6Y3RZygehiNnyo4C0HRqjVDTsaReJuWOz6J_i0Iwvdp86PlpPnDyywtClh5p25nKYYByL6vf0js2X9zyvMPW3uHFpcE9Gpn1J9ErH4F0K9Pfblx-XRyrW0LU.ljO4VB1Yvm1rdqbiiud31DMHp-sMyZu4CjXrXN_7jEo&dib_tag=se&keywords=Bose+speakers+Bose+Speakers+Bose+SoundLink+Bose+QuietComfort&qid=1747167407&s=electronics&sr=1-1', 'image_url': 'https://m.media-amazon.com/images/I/61XvC4j4sBL._AC_UL320_.jpg', 'rating': 4.4, 'reviews': 7522, 'asin': 'B00N32I2Q6', 'is_prime': False, 'is_sponsored': False, 'is_amazon_choice': False, 'is_best_seller': False, 'description': None, 'delivery_info': None, 'out_of_stock': False, 'source': 'Amazon'}, {'title': 'Bose SoundLink Color Bluetooth Speaker (Mint)', 'price': None, 'was_price': None, 'currency': None, 'url': '/Bose-SoundLink-Color-Bluetooth-Speaker/dp/B00N32ICIE/ref=sr_1_2?crid=1747167407&dib=eyJ2IjoiMSJ9.X1SskUYWLDtkRGciXLb6HSoQWW0O9MIOVH5kCNRd63j6AU6VP9qwdImaqEo8VnVF85iOFFM0uYI-UnYrwE14Llqi48nEiHFbFj_gZpcFITABZ-NKzJwtLF2An1NPe1wbuxDvCWIX4jz0uqsDvqP_s175xlmNUTpFghd6tYp6PT59T__V8Sx6Y3RZygehiNnyo4C0HRqjVDTsaReJuWOz6J_i0Iwvdp86PlpPnDyywtClh5p25nKYYByL6vf0js2X9zyvMPW3uHFpcE9Gpn1J9ErH4F0K9Pfblx-XRyrW0LU.ljO4VB1Yvm1rdqbiiud31DMHp-sMyZu4CjXrXN_7jEo&dib_tag=se&keywords=Bose+speakers+Bose+Speakers+Bose+SoundLink+Bose+QuietComfort&qid=1747167407&s=electronics&sr=1-2', 'image_url': 'https://m.media-amazon.com/images/I/71Nx6MzDwHL._AC_UL320_.jpg', 'rating': 4.3, 'reviews': 2248, 'asin': 'B00N32ICIE', 'is_prime': False, 'is_sponsored': False, 'is_amazon_choice': False, 'is_best_seller': False, 'description': None, 'delivery_info': None, 'out_of_stock': False, 'source': 'Amazon'}, {'title': 'Bose SoundLink Color II: Portable Bluetooth, Wireless Speaker with Microphone- Aqua Blue', 'price': None, 'was_price': None, 'currency': None, 'url': '/Bose-SoundLink-Color-Bluetooth-Speaker/dp/B01HETFPK4/ref=sr_1_3?crid=1747167407&dib=eyJ2IjoiMSJ9.X1SskUYWLDtkRGciXLb6HSoQWW0O9MIOVH5kCNRd63j6AU6VP9qwdImaqEo8VnVF85iOFFM0uYI-UnYrwE14Llqi48nEiHFbFj_gZpcFITABZ-NKzJwtLF2An1NPe1wbuxDvCWIX4jz0uqsDvqP_s175xlmNUTpFghd6tYp6PT59T__V8Sx6Y3RZygehiNnyo4C0HRqjVDTsaReJuWOz6J_i0Iwvdp86PlpPnDyywtClh5p25nKYYByL6vf0js2X9zyvMPW3uHFpcE9Gpn1J9ErH4F0K9Pfblx-XRyrW0LU.ljO4VB1Yvm1rdqbiiud31DMHp-sMyZu4CjXrXN_7jEo&dib_tag=se&keywords=Bose+speakers+Bose+Speakers+Bose+SoundLink+Bose+QuietComfort&qid=1747167407&s=electronics&sr=1-3', 'image_url': 'https://m.media-amazon.com/images/I/61jIN02aztL._AC_UL320_.jpg', 'rating': 4.6, 'reviews': 63606, 'asin': 'B01HETFPK4', 'is_prime': False, 'is_sponsored': False, 'is_amazon_choice': False, 'is_best_seller': False, 'description': None, 'delivery_info': None, 'out_of_stock': False, 'source': 'Amazon'}, {'title': 'Bose', 'price': 119.0, 'was_price': None, 'currency': 'USD', 'url': 'https://www.amazon.com/Bose-SoundLink-Micro-Bluetooth-speaker/dp/B0748PGNBX/ref=sr_1_4?crid=1747167407&dib=eyJ2IjoiMSJ9.X1SskUYWLDtkRGciXLb6HSoQWW0O9MIOVH5kCNRd63j6AU6VP9qwdImaqEo8VnVF85iOFFM0uYI-UnYrwE14Llqi48nEiHFbFj_gZpcFITABZ-NKzJwtLF2An1NPe1wbuxDvCWIX4jz0uqsDvqP_s175xlmNUTpFghd6tYp6PT59T__V8Sx6Y3RZygehiNnyo4C0HRqjVDTsaReJuWOz6J_i0Iwvdp86PlpPnDyywtClh5p25nKYYByL6vf0js2X9zyvMPW3uHFpcE9Gpn1J9ErH4F0K9Pfblx-XRyrW0LU.ljO4VB1Yvm1rdqbiiud31DMHp-sMyZu4CjXrXN_7jEo&dib_tag=se&keywords=Bose+speakers+Bose+Speakers+Bose+SoundLink+Bose+QuietComfort&qid=1747167407&s=electronics&sr=1-4', 'image_url': 'https://m.media-amazon.com/images/I/71fYkiTVEZL._AC_UL320_.jpg', 'rating': 4.8, 'reviews': 20037, 'is_sponsored': False, 'is_prime': False, 'is_amazon_choice': False, 'is_best_seller': False, 'asin': 'B0748PGNBX', 'description': 'BoseSoundLink Micro: Small Portable Bluetooth Speaker (Waterproof), Bright Orange 4.8 out of 5 stars 20,037 200+ bought in past monthPrice, product page$119.00$119.00FREE delivery Tomorrow, May 14 Add to cartMore Buying Choices$79.95(7+ used & new offers)', 'delivery_info': '200+ bought in past month', 'out_of_stock': False, 'source': 'Amazon'}, {'title': 'Bose SoundLink Mini II Bluetooth Speaker, Black', 'price': None, 'was_price': None, 'currency': None, 'url': '/Bose-SoundLink-Bluetooth-Speaker-Black/dp/B076LFBHKJ/ref=sr_1_5?crid=1747167407&dib=eyJ2IjoiMSJ9.X1SskUYWLDtkRGciXLb6HSoQWW0O9MIOVH5kCNRd63j6AU6VP9qwdImaqEo8VnVF85iOFFM0uYI-UnYrwE14Llqi48nEiHFbFj_gZpcFITABZ-NKzJwtLF2An1NPe1wbuxDvCWIX4jz0uqsDvqP_s175xlmNUTpFghd6tYp6PT59T__V8Sx6Y3RZygehiNnyo4C0HRqjVDTsaReJuWOz6J_i0Iwvdp86PlpPnDyywtClh5p25nKYYByL6vf0js2X9zyvMPW3uHFpcE9Gpn1J9ErH4F0K9Pfblx-XRyrW0LU.ljO4VB1Yvm1rdqbiiud31DMHp-sMyZu4CjXrXN_7jEo&dib_tag=se&keywords=Bose+speakers+Bose+Speakers+Bose+SoundLink+Bose+QuietComfort&qid=1747167407&s=electronics&sr=1-5', 'image_url': 'https://m.media-amazon.com/images/I/71DpRbBkpbS._AC_UL320_.jpg', 'rating': 4.5, 'reviews': 963, 'asin': 'B076LFBHKJ', 'is_prime': False, 'is_sponsored': False, 'is_amazon_choice': False, 'is_best_seller': False, 'description': None, 'delivery_info': None, 'out_of_stock': False, 'source': 'Amazon'}]}
2025-05-13 16:17:16,048 - DealFinderAI.Controller - INFO - Amazon returned 5 products
2025-05-13 16:17:16,048 - DealFinderAI.WalmartScraperAgent - INFO - Searching Walmart for: {'product_type': 'speakers', 'keywords': ['bose', 'speakers'], 'price_range': None, 'brands': ['Bose'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-13 16:17:16,048 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: 
            Optimize this search query for Walmart's search engine:
            
            "speakers bose speakers Bose"
            
            For Walmart searches, please:
            1. Focus on model numbers and specific identifiers if present
            2. Include key brand names (Walmart's search works well with brand names)
            3. Remove generic words that may dilute results
            4. Add Walmart-specific terms that might improve results (like "Rollback" if looking for deals)
            5. Prioritize precise product names and specifications
            
            Return a JSON object with:
            - optimized_keywords: List of 3-5 optimized search terms (most important first)
            - department_hint: Any Walmart department suggestion (Electronics, Home, etc.)
            - must_include_terms: Terms that MUST be in results
            - exclude_terms: Terms that should NOT be in results
            - walmart_specific_filters: Any Walmart-specific filters to apply
            
            Format as JSON only with no explanation.
            
2025-05-13 16:17:16,802 - DealFinderAI.WalmartScraperAgent - INFO - Optimized search parameters: {'product_type': 'speakers', 'keywords': ['Bose speakers', 'Bose SoundLink', 'Bose QuietComfort', 'Bose Home Speaker'], 'price_range': None, 'brands': ['Bose'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True, 'department': 'Electronics', 'must_include_terms': ['Bose']}
2025-05-13 16:17:16,803 - DealFinderAI.WalmartScraperAgent - INFO - Built optimized Walmart search query: Bose speakers Bose speakers Bose SoundLink Bose QuietComfort
2025-05-13 16:17:16,803 - DealFinderAI.WalmartScraperAgent - INFO - Built Walmart query: Bose speakers Bose speakers Bose SoundLink Bose QuietComfort
2025-05-13 16:17:16,804 - DealFinderAI.WalmartScraperAgent - INFO - Making Walmart search request with params: {'q': 'Bose speakers Bose speakers Bose SoundLink Bose QuietComfort Electronics', 'page': 1, 'affinityOverride': 'default', 'sort': 'price_low'}
2025-05-13 16:17:17,207 - DealFinderAI.WalmartScraperAgent - INFO - Extracted 0 products from JSON data
2025-05-13 16:17:17,207 - DealFinderAI.WalmartScraperAgent - INFO - JSON extraction failed, falling back to HTML extraction
2025-05-13 16:17:17,208 - DealFinderAI.WalmartScraperAgent - INFO - Found 0 product divs in HTML
2025-05-13 16:17:17,208 - DealFinderAI.WalmartScraperAgent - INFO - Extracted 0 products from HTML
2025-05-13 16:17:18,386 - DealFinderAI.WalmartScraperAgent - INFO - Extracted 0 products from Walmart
2025-05-13 16:17:18,387 - DealFinderAI.Controller - INFO - Walmart returned 0 products
2025-05-13 16:17:18,388 - DealFinderAI.EbayScraperAgent - INFO - Searching eBay for: {'product_type': 'speakers', 'keywords': ['bose', 'speakers'], 'price_range': None, 'brands': ['Bose'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-13 16:17:18,388 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: 
            Optimize this search query for eBay's search engine:
            
            "speakers bose speakers Bose"
            
            For eBay searches, please:
            1. Focus on exact model numbers and specific part identifiers if present
            2. Include key brand names
            3. Remove generic words that may dilute results
            4. Add eBay-specific terms that might improve results
            5. Optimize for finding the most relevant listings
            
            Return a JSON object with:
            - optimized_keywords: List of 3-5 optimized search terms (most important first)
            - category_hints: Any eBay category suggestions
            - must_include_terms: Terms that MUST be in results
            - exclude_terms: Terms that should NOT be in results
            
            Format as JSON only with no explanation.
            
2025-05-13 16:17:19,470 - DealFinderAI.EbayScraperAgent - INFO - Optimized search parameters: {'product_type': 'speakers', 'keywords': ['Bose speakers', 'Bose SoundLink', 'Bose 700', 'Bose QuietComfort'], 'price_range': None, 'brands': ['Bose'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True, 'category_hints': ['Electronics', 'Audio & Headphones', 'Speakers & Subwoofers'], 'must_include_terms': ['Bose']}
2025-05-13 16:17:19,470 - DealFinderAI.EbayScraperAgent - INFO - Built optimized eBay search query: speakers Bose Bose speakers Bose SoundLink Bose 700
2025-05-13 16:17:19,471 - DealFinderAI.EbayScraperAgent - INFO - Built eBay query: speakers Bose Bose speakers Bose SoundLink Bose 700
2025-05-13 16:17:19,471 - DealFinderAI.EbayScraperAgent - INFO - Making eBay search request with params: {'_nkw': 'speakers Bose Bose speakers Bose SoundLink Bose 700 Electronics', '_sacat': '0', '_ipg': '96', '_sop': '15', 'LH_BIN': '1'}
2025-05-13 16:17:20,961 - DealFinderAI.EbayScraperAgent - INFO - Found 152 product listings
2025-05-13 16:17:20,963 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: NEW Bose SoundLink Max Portable Bluetooth Speaker - Black at 319.0 USD
2025-05-13 16:17:20,963 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: NEW Bose SoundLink Max Portable Bluetooth Speaker - Black at 319.0 USD
2025-05-13 16:17:20,964 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Bose Surround Speakers 700 - Brand New & Sealed - Black - Retail $599.99 at 439.99 USD
2025-05-13 16:17:20,964 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Bose Surround Speakers 700 - Brand New & Sealed - Black - Retail $599.99 at 439.99 USD
2025-05-13 16:17:20,965 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Bose SoundLink Flex SE Bluetooth Waterproof Speaker, Certified Refurbished at 69.0 USD
2025-05-13 16:17:20,965 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Bose SoundLink Flex SE Bluetooth Waterproof Speaker, Certified Refurbished at 69.0 USD
2025-05-13 16:17:20,967 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: New Bose Surround Speakers 700 834402-1100 Wireless Speakers Set, Black Pair at 529.99 USD
2025-05-13 16:17:20,967 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: New Bose Surround Speakers 700 834402-1100 Wireless Speakers Set, Black Pair at 529.99 USD
2025-05-13 16:17:20,968 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Bose SoundLink Revolve+ II Portable Bluetooth Speaker - Black at 189.5 USD
2025-05-13 16:17:20,968 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Bose SoundLink Revolve+ II Portable Bluetooth Speaker - Black at 189.5 USD
2025-05-13 16:17:20,969 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Bose Wireless Surround Speakers 700 - White BRAND NEW at 499.95 USD
2025-05-13 16:17:20,969 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Bose Wireless Surround Speakers 700 - White BRAND NEW at 499.95 USD
2025-05-13 16:17:20,970 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Bose Surround Speakers 700, Black, Pair BRAND NEW at 499.95 USD
2025-05-13 16:17:20,970 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Bose Surround Speakers 700, Black, Pair BRAND NEW at 499.95 USD
2025-05-13 16:17:20,971 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Bose Soundlink Revolve II Portable Bluetooth Speaker, Used Working, Black at 109.95 USD
2025-05-13 16:17:20,971 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Bose Soundlink Revolve II Portable Bluetooth Speaker, Used Working, Black at 109.95 USD
2025-05-13 16:17:22,039 - DealFinderAI.EbayScraperAgent - INFO - Extracted 8 products from eBay
2025-05-13 16:17:22,041 - DealFinderAI.EbayScraperAgent - INFO - Applying relevance filtering to 8 products
2025-05-13 16:17:22,041 - DealFinderAI.EbayScraperAgent - INFO - Filtered to 5 most relevant products
2025-05-13 16:17:22,042 - DealFinderAI.Controller - INFO - eBay returned 5 products
2025-05-13 16:17:22,042 - DealFinderAI.Controller - INFO - Total products before aggregation: 10
2025-05-13 16:17:22,042 - DealFinderAI.ResultsAggregatorAgent - INFO - Aggregating results for query: find me best deal on bose speakers
2025-05-13 16:17:22,042 - DealFinderAI.ResultsAggregatorAgent - INFO - Found 3 results from various sources
2025-05-13 16:17:22,043 - DealFinderAI.ResultsAggregatorAgent - INFO - Source Amazon: 5 products
2025-05-13 16:17:22,043 - DealFinderAI.ResultsAggregatorAgent - INFO - Source Walmart: 0 products
2025-05-13 16:17:22,043 - DealFinderAI.ResultsAggregatorAgent - INFO - Source eBay: 5 products
2025-05-13 16:17:22,043 - DealFinderAI.ResultsAggregatorAgent - INFO - Total products extracted: 10
2025-05-13 16:17:22,043 - DealFinderAI.ResultsAggregatorAgent - INFO - Ranking 10 products
2025-05-13 16:17:22,043 - DealFinderAI.ResultsAggregatorAgent - WARNING - Invalid price format in product: Bose SoundLink Color Bluetooth Speaker (Mint)
2025-05-13 16:17:22,043 - DealFinderAI.ResultsAggregatorAgent - WARNING - Invalid price format in product: Bose SoundLink Color II: Portable Bluetooth, Wireless Speaker with Microphone- Aqua Blue
2025-05-13 16:17:22,043 - DealFinderAI.ResultsAggregatorAgent - WARNING - Invalid price format in product: Bose SoundLink Mini II Bluetooth Speaker, Black
2025-05-13 16:17:22,043 - DealFinderAI.ResultsAggregatorAgent - INFO - Sorted 10 products by score
2025-05-13 16:17:22,044 - DealFinderAI.ResultsAggregatorAgent - INFO - Returning 10 diversified products
2025-05-13 16:17:22,044 - DealFinderAI.ResultsAggregatorAgent - INFO - Products after ranking: 10
2025-05-13 16:17:22,044 - DealFinderAI.ResultsAggregatorAgent - INFO - Final products: 10
2025-05-13 16:17:22,044 - DealFinderAI.Controller - INFO - Products after aggregation: 10
2025-05-13 16:17:22,045 - DealFinderAI.ProductComparisonAgent - INFO - Comparing products for query: find me best deal on bose speakers
2025-05-13 16:17:22,045 - DealFinderAI.ProductComparisonAgent - INFO - Found 10 products to compare
2025-05-13 16:17:22,045 - DealFinderAI.ProductComparisonAgent - INFO - Grouping 10 products
2025-05-13 16:17:22,046 - DealFinderAI.ProductComparisonAgent - INFO - Created 0 product groups
2025-05-13 16:17:22,046 - DealFinderAI.ChatMemoryAgent - INFO - Storing context for conversation session_20250513161645_543e66f7
2025-05-13 16:17:22,046 - DealFinderAI.ChatMemoryAgent - INFO - Storing 10 products for conversation session_20250513161645_543e66f7
2025-05-13 16:17:22,046 - DealFinderAI.PresentationAgent - INFO - Preparing presentation for 10 products
2025-05-13 16:17:22,047 - DealFinderAI.PresentationAgent - INFO - Formatting 10 products for display
2025-05-13 16:17:22,047 - DealFinderAI.PresentationAgent - INFO - Product 1: Bose SoundLink Color II: Portable Bluetooth, Wireless Speaker with Microphone- Aqua Blue - Price: $0.00 - Source: Amazon
2025-05-13 16:17:22,047 - DealFinderAI.PresentationAgent - INFO - Product 2: New Bose Surround Speakers 700 834402-1100 Wireless Speakers Set, Black Pair - Price: $529.99 - Source: eBay
2025-05-13 16:17:22,047 - DealFinderAI.PresentationAgent - INFO - Product 3: Bose SoundLink Color Bluetooth Speaker (Mint) - Price: $0.00 - Source: Amazon
2025-05-13 16:17:22,047 - DealFinderAI.PresentationAgent - INFO - Product 4: Bose SoundLink Mini II Bluetooth Speaker, Black - Price: $0.00 - Source: Amazon
2025-05-13 16:17:22,047 - DealFinderAI.PresentationAgent - INFO - Product 5: Bose SoundLink Color Bluetooth Speaker (Black) - Price: $74.45 - Source: Amazon
2025-05-13 16:17:22,047 - DealFinderAI.PresentationAgent - INFO - Product 6: Bose - Price: $119.00 - Source: Amazon
2025-05-13 16:17:22,047 - DealFinderAI.PresentationAgent - INFO - Product 7: Bose Wireless Surround Speakers 700 - White BRAND NEW - Price: $499.95 - Source: eBay
2025-05-13 16:17:22,047 - DealFinderAI.PresentationAgent - INFO - Product 8: Bose Surround Speakers 700, Black, Pair BRAND NEW - Price: $499.95 - Source: eBay
2025-05-13 16:17:22,048 - DealFinderAI.PresentationAgent - INFO - Product 9: Bose Surround Speakers 700 - Brand New & Sealed - Black - Retail $599.99 - Price: $439.99 - Source: eBay
2025-05-13 16:17:22,048 - DealFinderAI.PresentationAgent - INFO - Product 10: NEW Bose SoundLink Max Portable Bluetooth Speaker - Black - Price: $319.00 - Source: eBay
2025-05-13 16:17:22,048 - DealFinderAI.ChatMemoryAgent - INFO - Storing context for conversation session_20250513161645_543e66f7
2025-05-13 16:17:22,048 - DealFinderAI.ChatMemoryAgent - INFO - Storing 10 products for conversation session_20250513161645_543e66f7
2025-05-13 16:17:22,048 - DealFinderAI.Controller - INFO - Successfully stored search results in memory
2025-05-13 16:17:46,282 - DealFinderAI.Controller - INFO - Processing user query: find me best deal on iphone 16
2025-05-13 16:17:46,282 - DealFinderAI.ChatMemoryAgent - INFO - Analyzing query: 'find me best deal on iphone 16' for conversation session_20250513161737_ad9300c7
2025-05-13 16:17:46,282 - DealFinderAI.ChatMemoryAgent - INFO - No product context available for this conversation
2025-05-13 16:17:46,282 - DealFinderAI.Controller - INFO - Analyze response: {'is_follow_up': False, 'focused_product': None, 'referenced_products': [], 'products': []}
2025-05-13 16:17:46,282 - DealFinderAI.Controller - INFO - Is follow-up? False
2025-05-13 16:17:46,283 - DealFinderAI.Controller - INFO - Referenced products: 0
2025-05-13 16:17:46,283 - DealFinderAI.Controller - INFO - Processing as new search query
2025-05-13 16:17:46,283 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: find me best deal on iphone 16
2025-05-13 16:17:47,523 - DealFinderAI.GeminiAgent - WARNING - Failed to parse Gemini response as JSON: ```json
{
  "product_type": "smartphone",
  "keywords": ["iphone 16"],
  "price_range": null,
  "brands": ["Apple"],
  "features": [],
  "sorting_preference": "price_low_to_high",
  "buy_it_now": true
}
```

2025-05-13 16:17:47,523 - DealFinderAI.Controller - INFO - Parsed search parameters: {'product_type': 'smartphone', 'keywords': ['iphone 16'], 'price_range': None, 'brands': ['Apple'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-13 16:17:47,524 - DealFinderAI.AmazonScraperAgent - INFO - Searching Amazon for: {'product_type': 'smartphone', 'keywords': ['iphone 16'], 'price_range': None, 'brands': ['Apple'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-13 16:17:47,524 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: 
            Optimize this search query for Amazon's search engine:
            
            "smartphone iphone 16 Apple"
            
            For Amazon searches, please:
            1. Focus on product-specific model numbers and identifiers if present
            2. Include key brand names (Amazon's A9 algorithm prioritizes brand matches)
            3. Remove generic words that may dilute results
            4. Add Amazon-specific terms that might improve results (like "Amazon's Choice" if looking for quality products)
            5. Optimize for Amazon's search algorithm which prioritizes exact matches and recent sales volume
            
            Return a JSON object with:
            - optimized_keywords: List of 3-5 optimized search terms (most important first)
            - amazon_category: Any Amazon department/category suggestion (Electronics, Books, etc.)
            - must_include_terms: Terms that MUST be in results
            - exclude_terms: Terms that should NOT be in results
            - amazon_search_filters: Any Amazon-specific filters to apply (Prime eligible, etc.)
            
            Format as JSON only with no explanation.
            
2025-05-13 16:17:48,533 - DealFinderAI.AmazonScraperAgent - INFO - Optimized search parameters: {'product_type': 'smartphone', 'keywords': ['iPhone 16', 'Apple iPhone 16', 'iPhone 16 Pro', 'iPhone 16 Pro Max'], 'price_range': None, 'brands': ['Apple'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True, 'category': 'Electronics', 'must_include_terms': ['Apple', 'iPhone 16'], 'exclude_terms': ['smartphone'], 'amazon_filters': ['Prime Eligible', 'New']}
2025-05-13 16:17:48,533 - DealFinderAI.AmazonScraperAgent - INFO - Built optimized Amazon search query: Apple smartphone iPhone 16 Apple iPhone 16 iPhone 16 Pro
2025-05-13 16:17:48,533 - DealFinderAI.AmazonScraperAgent - INFO - Built Amazon query: Apple smartphone iPhone 16 Apple iPhone 16 iPhone 16 Pro
2025-05-13 16:17:48,533 - DealFinderAI.AmazonScraperAgent - INFO - Making Amazon search request with params: {'k': 'Apple smartphone iPhone 16 Apple iPhone 16 iPhone 16 Pro', 'ref': 'nb_sb_noss', 'crid': 1747167468, 'i': 'aps', 'search-alias': 'electronics', 's': 'price-asc-rank'}
2025-05-13 16:17:49,579 - DealFinderAI.AmazonScraperAgent - INFO - Found 26 product divs in search results
2025-05-13 16:17:49,583 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: LFGKMZ 2 Pack Tempered Glass Screen Protector for iPhone 16 Pro 6.3",[Military Grade Shatterproof],Auto Install,Ultra HD,9H Hardness,Zero Bubble at 3.99 USD
2025-05-13 16:17:49,583 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: LFGKMZ 2 Pack Tempered Glass Screen Protector for iPhone 16 Pro 6.3",[Military Grade Shatterproof],Auto Install,Ultra HD,9H Hardness,Zero Bubble at 3.99 USD
2025-05-13 16:17:49,586 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Screen Protector for iPhone 16 Pro Max, 2 Pack Clear 9H Tempered Glass Film Cover Sensor Protection Case Friendly for 6.9 inch at 3.99 USD
2025-05-13 16:17:49,586 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Screen Protector for iPhone 16 Pro Max, 2 Pack Clear 9H Tempered Glass Film Cover Sensor Protection Case Friendly for 6.9 inch at 3.99 USD
2025-05-13 16:17:49,589 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Portable Cell Phone Stand Holder for Desk, Foldable Pocket-Sized Mount, Adjustable Multi Angle Stand for iPhone 16 15 14 13 Pro Max, 4-10 iPad Smartphone, White at 3.99 USD
2025-05-13 16:17:49,589 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Portable Cell Phone Stand Holder for Desk, Foldable Pocket-Sized Mount, Adjustable Multi Angle Stand for iPhone 16 15 14 13 Pro Max, 4-10 iPad Smartphone, White at 3.99 USD
2025-05-13 16:17:49,593 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: 3X2 Pack Camera Lens Protector for iPhone 16 Pro Max,iPhone 16 Pro Tempered Glass Camera Lens Screen Protector Glitter Bling Camera Cover Metal Individual Ring for iPhone 16 Promax 5G,Glitter Gold at 4.99 USD
2025-05-13 16:17:49,593 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: 3X2 Pack Camera Lens Protector for iPhone 16 Pro Max,iPhone 16 Pro Tempered Glass Camera Lens Screen Protector Glitter Bling Camera Cover Metal Individual Ring for iPhone 16 Promax 5G,Glitter Gold at 4.99 USD
2025-05-13 16:17:49,598 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Compatible for iPhone 16 Pro/iPhone 16 Pro Max Camera Lens Protector Bling, 9H Tempered Glass Camera Cover Screen Protector Metal Individual Ring Protector Decoration Accessories, Black Glitter at 4.99 USD
2025-05-13 16:17:49,598 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Compatible for iPhone 16 Pro/iPhone 16 Pro Max Camera Lens Protector Bling, 9H Tempered Glass Camera Cover Screen Protector Metal Individual Ring Protector Decoration Accessories, Black Glitter at 4.99 USD
2025-05-13 16:17:49,602 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: 3 Pack 6 ft USB C Phone Charger Fast Charging Cable Compatible with iPhone 16 Pro/15 Pro/Plus/Max/iPad/MacBook and More at 4.99 USD
2025-05-13 16:17:49,602 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: 3 Pack 6 ft USB C Phone Charger Fast Charging Cable Compatible with iPhone 16 Pro/15 Pro/Plus/Max/iPad/MacBook and More at 4.99 USD
2025-05-13 16:17:49,606 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: [3 Pack] Privacy Screen Protector for iPhone 16 Pro, Anti Spy, Anti Scratch, 9H Hardness, Ultra Resistant, Bubble Free, Case Friendly, Easy Installation at 5.99 USD
2025-05-13 16:17:49,606 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: [3 Pack] Privacy Screen Protector for iPhone 16 Pro, Anti Spy, Anti Scratch, 9H Hardness, Ultra Resistant, Bubble Free, Case Friendly, Easy Installation at 5.99 USD
2025-05-13 16:17:49,609 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Camera Lens Protector for iPhone 16 Pro/Pro Max [3 Pack] Tempered Glass 9H Camera Protector, Case Friendly, Scratch Resistant Lens Shield, Night Shooting, Clear Cover  Clear at 5.99 USD
2025-05-13 16:17:49,609 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Camera Lens Protector for iPhone 16 Pro/Pro Max [3 Pack] Tempered Glass 9H Camera Protector, Case Friendly, Scratch Resistant Lens Shield, Night Shooting, Clear Cover  Clear at 5.99 USD
2025-05-13 16:17:49,613 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: MagSafe Wallet - Magnetic Wallet Cell Phone Card Holder for iPhone 16 Series, RFID Leather Wallet Stick on Series of iPhone 15 14 13 12 Plus/Pro/Pro max & Devices at 6.89 USD
2025-05-13 16:17:49,613 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: MagSafe Wallet - Magnetic Wallet Cell Phone Card Holder for iPhone 16 Series, RFID Leather Wallet Stick on Series of iPhone 15 14 13 12 Plus/Pro/Pro max & Devices at 6.89 USD
2025-05-13 16:17:49,616 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Protective films adapted for smartphones,for Compatible with 16 Pro Max Screen Protector 2 Pack (For iPhone 16 Pro Max) at 6.98 USD
2025-05-13 16:17:49,616 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Protective films adapted for smartphones,for Compatible with 16 Pro Max Screen Protector 2 Pack (For iPhone 16 Pro Max) at 6.98 USD
2025-05-13 16:17:50,374 - DealFinderAI.AmazonScraperAgent - INFO - Extracted 10 products from Amazon
2025-05-13 16:17:50,376 - DealFinderAI.AmazonScraperAgent - INFO - Applying relevance filtering to 10 products
2025-05-13 16:17:50,376 - DealFinderAI.AmazonScraperAgent - INFO - Filtered to 0 most relevant products
2025-05-13 16:17:50,376 - DealFinderAI.Controller - INFO - Amazon response content: {'source': 'Amazon', 'query': 'Apple smartphone iPhone 16 Apple iPhone 16 iPhone 16 Pro', 'products': []}
2025-05-13 16:17:50,377 - DealFinderAI.Controller - INFO - Amazon returned 0 products
2025-05-13 16:17:50,377 - DealFinderAI.WalmartScraperAgent - INFO - Searching Walmart for: {'product_type': 'smartphone', 'keywords': ['iphone 16'], 'price_range': None, 'brands': ['Apple'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-13 16:17:50,377 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: 
            Optimize this search query for Walmart's search engine:
            
            "smartphone iphone 16 Apple"
            
            For Walmart searches, please:
            1. Focus on model numbers and specific identifiers if present
            2. Include key brand names (Walmart's search works well with brand names)
            3. Remove generic words that may dilute results
            4. Add Walmart-specific terms that might improve results (like "Rollback" if looking for deals)
            5. Prioritize precise product names and specifications
            
            Return a JSON object with:
            - optimized_keywords: List of 3-5 optimized search terms (most important first)
            - department_hint: Any Walmart department suggestion (Electronics, Home, etc.)
            - must_include_terms: Terms that MUST be in results
            - exclude_terms: Terms that should NOT be in results
            - walmart_specific_filters: Any Walmart-specific filters to apply
            
            Format as JSON only with no explanation.
            
2025-05-13 16:17:52,125 - DealFinderAI.WalmartScraperAgent - INFO - Optimized search parameters: {'product_type': 'smartphone', 'keywords': ['iPhone 16', 'Apple iPhone 16', 'iPhone 16 Pro', 'iPhone 16 Pro Max'], 'price_range': None, 'brands': ['Apple'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True, 'department': 'Electronics', 'must_include_terms': ['Apple', 'iPhone'], 'exclude_terms': ['smartphone'], 'walmart_filters': ['Rollback', 'Deals']}
2025-05-13 16:17:52,126 - DealFinderAI.WalmartScraperAgent - INFO - Built optimized Walmart search query: Apple smartphone iPhone 16 Apple iPhone 16 iPhone 16 Pro
2025-05-13 16:17:52,126 - DealFinderAI.WalmartScraperAgent - INFO - Built Walmart query: Apple smartphone iPhone 16 Apple iPhone 16 iPhone 16 Pro
2025-05-13 16:17:52,126 - DealFinderAI.WalmartScraperAgent - INFO - Making Walmart search request with params: {'q': 'Apple smartphone iPhone 16 Apple iPhone 16 iPhone 16 Pro Electronics', 'page': 1, 'affinityOverride': 'default', 'sort': 'price_low'}
2025-05-13 16:17:52,540 - DealFinderAI.WalmartScraperAgent - INFO - Extracted 0 products from JSON data
2025-05-13 16:17:52,540 - DealFinderAI.WalmartScraperAgent - INFO - JSON extraction failed, falling back to HTML extraction
2025-05-13 16:17:52,542 - DealFinderAI.WalmartScraperAgent - INFO - Found 0 product divs in HTML
2025-05-13 16:17:52,542 - DealFinderAI.WalmartScraperAgent - INFO - Extracted 0 products from HTML
2025-05-13 16:17:53,250 - DealFinderAI.WalmartScraperAgent - INFO - Extracted 0 products from Walmart
2025-05-13 16:17:53,252 - DealFinderAI.Controller - INFO - Walmart returned 0 products
2025-05-13 16:17:53,252 - DealFinderAI.EbayScraperAgent - INFO - Searching eBay for: {'product_type': 'smartphone', 'keywords': ['iphone 16'], 'price_range': None, 'brands': ['Apple'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-13 16:17:53,252 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: 
            Optimize this search query for eBay's search engine:
            
            "smartphone iphone 16 Apple"
            
            For eBay searches, please:
            1. Focus on exact model numbers and specific part identifiers if present
            2. Include key brand names
            3. Remove generic words that may dilute results
            4. Add eBay-specific terms that might improve results
            5. Optimize for finding the most relevant listings
            
            Return a JSON object with:
            - optimized_keywords: List of 3-5 optimized search terms (most important first)
            - category_hints: Any eBay category suggestions
            - must_include_terms: Terms that MUST be in results
            - exclude_terms: Terms that should NOT be in results
            
            Format as JSON only with no explanation.
            
2025-05-13 16:17:54,737 - DealFinderAI.EbayScraperAgent - INFO - Optimized search parameters: {'product_type': 'smartphone', 'keywords': ['iPhone 16', 'Apple iPhone 16', 'iPhone 16 Pro', 'iPhone 16 Pro Max'], 'price_range': None, 'brands': ['Apple'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True, 'category_hints': ['Cell Phones & Smartphones'], 'must_include_terms': ['Apple', 'iPhone'], 'exclude_terms': ['broken', 'damaged', 'repair']}
2025-05-13 16:17:54,738 - DealFinderAI.EbayScraperAgent - INFO - Built optimized eBay search query: smartphone Apple iPhone 16 Apple iPhone 16 iPhone 16 Pro
2025-05-13 16:17:54,738 - DealFinderAI.EbayScraperAgent - INFO - Built eBay query: smartphone Apple iPhone 16 Apple iPhone 16 iPhone 16 Pro
2025-05-13 16:17:54,738 - DealFinderAI.EbayScraperAgent - INFO - Making eBay search request with params: {'_nkw': 'smartphone Apple iPhone 16 Apple iPhone 16 iPhone 16 Pro Cell Phones & Smartphones', '_sacat': '0', '_ipg': '96', '_sop': '15', 'LH_BIN': '1'}
2025-05-13 16:17:56,300 - DealFinderAI.EbayScraperAgent - INFO - Found 132 product listings
2025-05-13 16:17:56,301 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 14 Pro - 512 GB - Purple (Xfinity) Smartphone at 284.0 USD
2025-05-13 16:17:56,301 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 14 Pro - 512 GB - Purple (Xfinity) Smartphone at 284.0 USD
2025-05-13 16:17:56,302 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 14 Pro Max - 128 GB - Black (U.S. Cellular) Smartphone at 299.0 USD
2025-05-13 16:17:56,302 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 14 Pro Max - 128 GB - Black (U.S. Cellular) Smartphone at 299.0 USD
2025-05-13 16:17:56,303 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 14 Pro 256GB White / Silver AT&T at 349.99 USD
2025-05-13 16:17:56,303 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 14 Pro 256GB White / Silver AT&T at 349.99 USD
2025-05-13 16:17:56,305 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 14 Pro - 128 GB - Space Black (T-Mobile) Smartphone at 364.0 USD
2025-05-13 16:17:56,305 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 14 Pro - 128 GB - Space Black (T-Mobile) Smartphone at 364.0 USD
2025-05-13 16:17:56,305 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 16 Pro 128GB Unlocked 1-Year Warranty Smartphone Excellent at 841.99 USD
2025-05-13 16:17:56,306 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 16 Pro 128GB Unlocked 1-Year Warranty Smartphone Excellent at 841.99 USD
2025-05-13 16:17:56,306 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 16 Pro 128GB Factory Unlocked Open Box Mint Smartphone A3083 at 857.45 USD
2025-05-13 16:17:56,306 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 16 Pro 128GB Factory Unlocked Open Box Mint Smartphone A3083 at 857.45 USD
2025-05-13 16:17:56,307 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: New in Sealed Box Apple iPhone 14 PRO A2650 512GB 1TB Unlocked Smartphone at 866.99 USD
2025-05-13 16:17:56,307 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: New in Sealed Box Apple iPhone 14 PRO A2650 512GB 1TB Unlocked Smartphone at 866.99 USD
2025-05-13 16:17:56,308 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: APPLE IPHONE 16 PRO - 128GB - BLACK TITANIUM (FACTORY UNLOCKED)  SEALED at 938.95 USD
2025-05-13 16:17:56,308 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: APPLE IPHONE 16 PRO - 128GB - BLACK TITANIUM (FACTORY UNLOCKED)  SEALED at 938.95 USD
2025-05-13 16:17:57,341 - DealFinderAI.EbayScraperAgent - INFO - Extracted 8 products from eBay
2025-05-13 16:17:57,342 - DealFinderAI.EbayScraperAgent - INFO - Applying relevance filtering to 8 products
2025-05-13 16:17:57,342 - DealFinderAI.EbayScraperAgent - INFO - Filtered to 5 most relevant products
2025-05-13 16:17:57,342 - DealFinderAI.Controller - INFO - eBay returned 5 products
2025-05-13 16:17:57,342 - DealFinderAI.Controller - INFO - Total products before aggregation: 5
2025-05-13 16:17:57,342 - DealFinderAI.ResultsAggregatorAgent - INFO - Aggregating results for query: find me best deal on iphone 16
2025-05-13 16:17:57,342 - DealFinderAI.ResultsAggregatorAgent - INFO - Found 3 results from various sources
2025-05-13 16:17:57,342 - DealFinderAI.ResultsAggregatorAgent - INFO - Source Amazon: 0 products
2025-05-13 16:17:57,342 - DealFinderAI.ResultsAggregatorAgent - INFO - Source Walmart: 0 products
2025-05-13 16:17:57,342 - DealFinderAI.ResultsAggregatorAgent - INFO - Source eBay: 5 products
2025-05-13 16:17:57,342 - DealFinderAI.ResultsAggregatorAgent - INFO - Total products extracted: 5
2025-05-13 16:17:57,342 - DealFinderAI.ResultsAggregatorAgent - INFO - Ranking 5 products
2025-05-13 16:17:57,342 - DealFinderAI.ResultsAggregatorAgent - INFO - Sorted 5 products by score
2025-05-13 16:17:57,342 - DealFinderAI.ResultsAggregatorAgent - INFO - Returning all 5 sorted products
2025-05-13 16:17:57,342 - DealFinderAI.ResultsAggregatorAgent - INFO - Products after ranking: 5
2025-05-13 16:17:57,342 - DealFinderAI.ResultsAggregatorAgent - INFO - Final products: 5
2025-05-13 16:17:57,342 - DealFinderAI.Controller - INFO - Products after aggregation: 5
2025-05-13 16:17:57,342 - DealFinderAI.ProductComparisonAgent - INFO - Comparing products for query: find me best deal on iphone 16
2025-05-13 16:17:57,342 - DealFinderAI.ProductComparisonAgent - INFO - Found 5 products to compare
2025-05-13 16:17:57,342 - DealFinderAI.ProductComparisonAgent - INFO - Grouping 5 products
2025-05-13 16:17:57,343 - DealFinderAI.ProductComparisonAgent - INFO - Created 0 product groups
2025-05-13 16:17:57,343 - DealFinderAI.ChatMemoryAgent - INFO - Storing context for conversation session_20250513161737_ad9300c7
2025-05-13 16:17:57,343 - DealFinderAI.ChatMemoryAgent - INFO - Storing 5 products for conversation session_20250513161737_ad9300c7
2025-05-13 16:17:57,343 - DealFinderAI.PresentationAgent - INFO - Preparing presentation for 5 products
2025-05-13 16:17:57,343 - DealFinderAI.PresentationAgent - INFO - Formatting 5 products for display
2025-05-13 16:17:57,343 - DealFinderAI.PresentationAgent - INFO - Product 1: APPLE IPHONE 16 PRO - 128GB - BLACK TITANIUM (FACTORY UNLOCKED)  SEALED - Price: $938.95 - Source: eBay
2025-05-13 16:17:57,343 - DealFinderAI.PresentationAgent - INFO - Product 2: New in Sealed Box Apple iPhone 14 PRO A2650 512GB 1TB Unlocked Smartphone - Price: $866.99 - Source: eBay
2025-05-13 16:17:57,343 - DealFinderAI.PresentationAgent - INFO - Product 3: Apple iPhone 16 Pro 128GB Unlocked 1-Year Warranty Smartphone Excellent - Price: $841.99 - Source: eBay
2025-05-13 16:17:57,343 - DealFinderAI.PresentationAgent - INFO - Product 4: Apple iPhone 14 Pro - 512 GB - Purple (Xfinity) Smartphone - Price: $284.00 - Source: eBay
2025-05-13 16:17:57,343 - DealFinderAI.PresentationAgent - INFO - Product 5: Apple iPhone 16 Pro 128GB Factory Unlocked Open Box Mint Smartphone A3083 - Price: $857.45 - Source: eBay
2025-05-13 16:17:57,343 - DealFinderAI.ChatMemoryAgent - INFO - Storing context for conversation session_20250513161737_ad9300c7
2025-05-13 16:17:57,343 - DealFinderAI.ChatMemoryAgent - INFO - Storing 5 products for conversation session_20250513161737_ad9300c7
2025-05-13 16:17:57,343 - DealFinderAI.Controller - INFO - Successfully stored search results in memory
2025-05-13 16:18:30,986 - DealFinderAI - INFO - Logging initialized
2025-05-13 16:18:30,986 - DealFinderAI.Main - INFO - Starting DealFinder AI
2025-05-13 16:18:30,986 - DealFinderAI.Main - INFO - Using LangChain implementation
2025-05-13 16:18:31,027 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-13 16:18:31,027 - DealFinderAI.Controller - INFO - Initialized scraper agents: ['amazon', 'walmart', 'ebay']
2025-05-13 16:18:31,027 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-13 16:18:31,027 - DealFinderAI.Controller - INFO - Initialized scraper agents: ['amazon', 'walmart', 'ebay']
2025-05-13 16:18:31,027 - DealFinderAI.Main - INFO - Web app using LangChain implementation with Gemini model
2025-05-13 16:18:31,508 - DealFinderAI - INFO - Logging initialized
2025-05-13 16:18:31,509 - DealFinderAI.Main - INFO - Starting DealFinder AI
2025-05-13 16:18:31,509 - DealFinderAI.Main - INFO - Using LangChain implementation
2025-05-13 16:18:31,535 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-13 16:18:31,536 - DealFinderAI.Controller - INFO - Initialized scraper agents: ['amazon', 'walmart', 'ebay']
2025-05-13 16:18:31,536 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-13 16:18:31,536 - DealFinderAI.Controller - INFO - Initialized scraper agents: ['amazon', 'walmart', 'ebay']
2025-05-13 16:18:31,536 - DealFinderAI.Main - INFO - Web app using LangChain implementation with Gemini model
2025-05-13 16:18:44,848 - DealFinderAI.Controller - INFO - Processing user query: find me best deal on iphone 16
2025-05-13 16:18:44,849 - DealFinderAI.ChatMemoryAgent - INFO - Analyzing query: 'find me best deal on iphone 16' for conversation session_20250513161835_b2c44a63
2025-05-13 16:18:44,849 - DealFinderAI.ChatMemoryAgent - INFO - No product context available for this conversation
2025-05-13 16:18:44,849 - DealFinderAI.Controller - INFO - Analyze response: {'is_follow_up': False, 'focused_product': None, 'referenced_products': [], 'products': []}
2025-05-13 16:18:44,849 - DealFinderAI.Controller - INFO - Is follow-up? False
2025-05-13 16:18:44,849 - DealFinderAI.Controller - INFO - Referenced products: 0
2025-05-13 16:18:44,849 - DealFinderAI.Controller - INFO - Processing as new search query
2025-05-13 16:18:44,850 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: find me best deal on iphone 16
2025-05-13 16:18:45,730 - DealFinderAI.GeminiAgent - WARNING - Failed to parse Gemini response as JSON: ```json
{
  "product_type": "smartphone",
  "keywords": ["iphone", "16"],
  "price_range": null,
  "brands": ["Apple"],
  "features": [],
  "sorting_preference": "price_low_to_high",
  "buy_it_now": true
}
```

2025-05-13 16:18:45,730 - DealFinderAI.Controller - INFO - Parsed search parameters: {'product_type': 'smartphone', 'keywords': ['iphone', '16'], 'price_range': None, 'brands': ['Apple'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-13 16:18:45,731 - DealFinderAI.AmazonScraperAgent - INFO - Searching Amazon for: {'product_type': 'smartphone', 'keywords': ['iphone', '16'], 'price_range': None, 'brands': ['Apple'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-13 16:18:45,731 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: 
            Optimize this search query for Amazon's search engine:
            
            "smartphone iphone 16 Apple"
            
            For Amazon searches, please:
            1. Focus on product-specific model numbers and identifiers if present
            2. Include key brand names (Amazon's A9 algorithm prioritizes brand matches)
            3. Remove generic words that may dilute results
            4. Add Amazon-specific terms that might improve results (like "Amazon's Choice" if looking for quality products)
            5. Optimize for Amazon's search algorithm which prioritizes exact matches and recent sales volume
            
            Return a JSON object with:
            - optimized_keywords: List of 3-5 optimized search terms (most important first)
            - amazon_category: Any Amazon department/category suggestion (Electronics, Books, etc.)
            - must_include_terms: Terms that MUST be in results
            - exclude_terms: Terms that should NOT be in results
            - amazon_search_filters: Any Amazon-specific filters to apply (Prime eligible, etc.)
            
            Format as JSON only with no explanation.
            
2025-05-13 16:18:46,839 - DealFinderAI.AmazonScraperAgent - INFO - Optimized search parameters: {'product_type': 'smartphone', 'keywords': ['iPhone 16', 'Apple iPhone 16', 'iPhone 16 Pro', 'Apple iPhone 16 Pro Max'], 'price_range': None, 'brands': ['Apple'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True, 'category': 'Electronics', 'must_include_terms': ['Apple', 'iPhone 16'], 'exclude_terms': ['smartphone'], 'amazon_filters': ['Prime Eligible', 'New']}
2025-05-13 16:18:46,840 - DealFinderAI.AmazonScraperAgent - INFO - Built optimized Amazon search query: Apple smartphone iPhone 16 Apple iPhone 16 iPhone 16 Pro
2025-05-13 16:18:46,840 - DealFinderAI.AmazonScraperAgent - INFO - Built Amazon query: Apple smartphone iPhone 16 Apple iPhone 16 iPhone 16 Pro
2025-05-13 16:18:46,840 - DealFinderAI.AmazonScraperAgent - INFO - Making Amazon search request with params: {'k': 'Apple smartphone iPhone 16 Apple iPhone 16 iPhone 16 Pro', 'ref': 'nb_sb_noss', 'crid': 1747167526, 'i': 'aps', 'search-alias': 'electronics', 's': 'price-asc-rank'}
2025-05-13 16:18:48,342 - DealFinderAI.AmazonScraperAgent - INFO - Found 27 product divs in search results
2025-05-13 16:18:48,348 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Adjustable Desktop Phone Holder, Gripper for Back of Phone Grip Holder Compatible with iPhone 16/15/14 All Smartphones at 2.99 USD
2025-05-13 16:18:48,349 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Adjustable Desktop Phone Holder, Gripper for Back of Phone Grip Holder Compatible with iPhone 16/15/14 All Smartphones at 2.99 USD
2025-05-13 16:18:48,352 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: TENOC at 3.99 USD
2025-05-13 16:18:48,352 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: TENOC at 3.99 USD
2025-05-13 16:18:48,355 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: LFGKMZ 2 Pack Camera Lens Protector Compatible with iPhone 16 Pro/iPhone 16 Pro Max,Tempered Glass Camera Cover,Auto Install,Ultra HD,Anti-Scratch,Strong Adhesion - Black Titanium at 3.99 USD
2025-05-13 16:18:48,355 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: LFGKMZ 2 Pack Camera Lens Protector Compatible with iPhone 16 Pro/iPhone 16 Pro Max,Tempered Glass Camera Cover,Auto Install,Ultra HD,Anti-Scratch,Strong Adhesion - Black Titanium at 3.99 USD
2025-05-13 16:18:48,358 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: LFGKMZ 2 Pack Tempered Glass Screen Protector for iPhone 16 Pro Max 6.9",[Military Grade Shatterproof],Auto Install,Ultra HD,9H Hardness,Zero Bubble at 3.99 USD
2025-05-13 16:18:48,358 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: LFGKMZ 2 Pack Tempered Glass Screen Protector for iPhone 16 Pro Max 6.9",[Military Grade Shatterproof],Auto Install,Ultra HD,9H Hardness,Zero Bubble at 3.99 USD
2025-05-13 16:18:48,361 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Screen Protector 6.06 Inch for iPhone 12 Pro, 3 Piece Tempered Glass and Camera Lens Protection Kit  2.5D Edge, Scratch Resistant 9H Hardness with Anti-Fingerprint Hydrophobic Coating (Clear) at 3.99 USD
2025-05-13 16:18:48,361 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Screen Protector 6.06 Inch for iPhone 12 Pro, 3 Piece Tempered Glass and Camera Lens Protection Kit  2.5D Edge, Scratch Resistant 9H Hardness with Anti-Fingerprint Hydrophobic Coating (Clear) at 3.99 USD
2025-05-13 16:18:48,364 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: For iPhone 16 Pro Back Screen Protector 3D Carbon Fiber Ultra Thin Protective Film- 2 packs-Transparent at 3.99 USD
2025-05-13 16:18:48,364 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: For iPhone 16 Pro Back Screen Protector 3D Carbon Fiber Ultra Thin Protective Film- 2 packs-Transparent at 3.99 USD
2025-05-13 16:18:48,368 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Portable Cell Phone Stand Holder for Desk, Foldable Pocket-Sized Mount, Adjustable Multi Angle Stand for iPhone 16 15 14 13 Pro Max, 4-10 iPad Smartphone, White at 3.99 USD
2025-05-13 16:18:48,368 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Portable Cell Phone Stand Holder for Desk, Foldable Pocket-Sized Mount, Adjustable Multi Angle Stand for iPhone 16 15 14 13 Pro Max, 4-10 iPad Smartphone, White at 3.99 USD
2025-05-13 16:18:48,371 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: USB C to USB Adapter, USB C Male to USB Female OTG Cable, Type-C to USB Extension Cable, Compatible with iPhone 16 Pro Max/16 Plus/16/15, iPad Pro, MacBook Pro/Air, Samsung Galaxy S24/S23/S22 at 4.5 USD
2025-05-13 16:18:48,371 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: USB C to USB Adapter, USB C Male to USB Female OTG Cable, Type-C to USB Extension Cable, Compatible with iPhone 16 Pro Max/16 Plus/16/15, iPad Pro, MacBook Pro/Air, Samsung Galaxy S24/S23/S22 at 4.5 USD
2025-05-13 16:18:48,374 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Universal Metal Cell Phone Stand, Multi-Angel Adjustable 360 Rotation Non-Slip Metal Phone Stand Compatible with iPhone 16 Pro Max and All Smartphones (Grey) at 4.99 USD
2025-05-13 16:18:48,374 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Universal Metal Cell Phone Stand, Multi-Angel Adjustable 360 Rotation Non-Slip Metal Phone Stand Compatible with iPhone 16 Pro Max and All Smartphones (Grey) at 4.99 USD
2025-05-13 16:18:48,378 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: 3X2 Pack Camera Lens Protector for iPhone 16 Pro Max,iPhone 16 Pro Tempered Glass Camera Lens Screen Protector Glitter Bling Camera Cover Metal Individual Ring for iPhone 16 Promax 5G,Glitter Gold at 4.99 USD
2025-05-13 16:18:48,378 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: 3X2 Pack Camera Lens Protector for iPhone 16 Pro Max,iPhone 16 Pro Tempered Glass Camera Lens Screen Protector Glitter Bling Camera Cover Metal Individual Ring for iPhone 16 Promax 5G,Glitter Gold at 4.99 USD
2025-05-13 16:18:49,128 - DealFinderAI.AmazonScraperAgent - INFO - Extracted 10 products from Amazon
2025-05-13 16:18:49,130 - DealFinderAI.AmazonScraperAgent - INFO - Applying relevance filtering to 10 products
2025-05-13 16:18:49,130 - DealFinderAI.AmazonScraperAgent - INFO - Filtered to 0 most relevant products
2025-05-13 16:18:49,131 - DealFinderAI.Controller - INFO - Amazon response content: {'source': 'Amazon', 'query': 'Apple smartphone iPhone 16 Apple iPhone 16 iPhone 16 Pro', 'products': []}
2025-05-13 16:18:49,131 - DealFinderAI.Controller - INFO - Amazon returned 0 products
2025-05-13 16:18:49,131 - DealFinderAI.WalmartScraperAgent - INFO - Searching Walmart for: {'product_type': 'smartphone', 'keywords': ['iphone', '16'], 'price_range': None, 'brands': ['Apple'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-13 16:18:49,131 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: 
            Optimize this search query for Walmart's search engine:
            
            "smartphone iphone 16 Apple"
            
            For Walmart searches, please:
            1. Focus on model numbers and specific identifiers if present
            2. Include key brand names (Walmart's search works well with brand names)
            3. Remove generic words that may dilute results
            4. Add Walmart-specific terms that might improve results (like "Rollback" if looking for deals)
            5. Prioritize precise product names and specifications
            
            Return a JSON object with:
            - optimized_keywords: List of 3-5 optimized search terms (most important first)
            - department_hint: Any Walmart department suggestion (Electronics, Home, etc.)
            - must_include_terms: Terms that MUST be in results
            - exclude_terms: Terms that should NOT be in results
            - walmart_specific_filters: Any Walmart-specific filters to apply
            
            Format as JSON only with no explanation.
            
2025-05-13 16:18:50,295 - DealFinderAI.WalmartScraperAgent - INFO - Optimized search parameters: {'product_type': 'smartphone', 'keywords': ['iPhone 16', 'Apple iPhone 16', 'iPhone 16 Walmart'], 'price_range': None, 'brands': ['Apple'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True, 'department': 'Electronics', 'must_include_terms': ['Apple', 'iPhone 16'], 'exclude_terms': ['smartphone'], 'walmart_filters': ['Rollback', 'Free Shipping']}
2025-05-13 16:18:50,295 - DealFinderAI.WalmartScraperAgent - INFO - Built optimized Walmart search query: Apple smartphone iPhone 16 Apple iPhone 16 iPhone 16 Walmart
2025-05-13 16:18:50,295 - DealFinderAI.WalmartScraperAgent - INFO - Built Walmart query: Apple smartphone iPhone 16 Apple iPhone 16 iPhone 16 Walmart
2025-05-13 16:18:50,296 - DealFinderAI.WalmartScraperAgent - INFO - Making Walmart search request with params: {'q': 'Apple smartphone iPhone 16 Apple iPhone 16 iPhone 16 Walmart Electronics', 'page': 1, 'affinityOverride': 'default', 'sort': 'price_low'}
2025-05-13 16:18:50,773 - DealFinderAI.WalmartScraperAgent - INFO - Extracted 0 products from JSON data
2025-05-13 16:18:50,774 - DealFinderAI.WalmartScraperAgent - INFO - JSON extraction failed, falling back to HTML extraction
2025-05-13 16:18:50,775 - DealFinderAI.WalmartScraperAgent - INFO - Found 0 product divs in HTML
2025-05-13 16:18:50,775 - DealFinderAI.WalmartScraperAgent - INFO - Extracted 0 products from HTML
2025-05-13 16:18:51,964 - DealFinderAI.WalmartScraperAgent - INFO - Extracted 0 products from Walmart
2025-05-13 16:18:51,966 - DealFinderAI.Controller - INFO - Walmart returned 0 products
2025-05-13 16:18:51,967 - DealFinderAI.EbayScraperAgent - INFO - Searching eBay for: {'product_type': 'smartphone', 'keywords': ['iphone', '16'], 'price_range': None, 'brands': ['Apple'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-13 16:18:51,967 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: 
            Optimize this search query for eBay's search engine:
            
            "smartphone iphone 16 Apple"
            
            For eBay searches, please:
            1. Focus on exact model numbers and specific part identifiers if present
            2. Include key brand names
            3. Remove generic words that may dilute results
            4. Add eBay-specific terms that might improve results
            5. Optimize for finding the most relevant listings
            
            Return a JSON object with:
            - optimized_keywords: List of 3-5 optimized search terms (most important first)
            - category_hints: Any eBay category suggestions
            - must_include_terms: Terms that MUST be in results
            - exclude_terms: Terms that should NOT be in results
            
            Format as JSON only with no explanation.
            
2025-05-13 16:18:53,772 - DealFinderAI.EbayScraperAgent - INFO - Optimized search parameters: {'product_type': 'smartphone', 'keywords': ['iPhone 16', 'Apple iPhone 16', 'iPhone 16 Pro', 'iPhone 16 Pro Max'], 'price_range': None, 'brands': ['Apple'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True, 'category_hints': ['Cell Phones & Smartphones', 'Consumer Electronics'], 'must_include_terms': ['Apple', 'iPhone'], 'exclude_terms': ['repair', 'parts', 'broken', 'damaged']}
2025-05-13 16:18:53,772 - DealFinderAI.EbayScraperAgent - INFO - Built optimized eBay search query: smartphone Apple iPhone 16 Apple iPhone 16 iPhone 16 Pro
2025-05-13 16:18:53,772 - DealFinderAI.EbayScraperAgent - INFO - Built eBay query: smartphone Apple iPhone 16 Apple iPhone 16 iPhone 16 Pro
2025-05-13 16:18:53,772 - DealFinderAI.EbayScraperAgent - INFO - Making eBay search request with params: {'_nkw': 'smartphone Apple iPhone 16 Apple iPhone 16 iPhone 16 Pro Cell Phones & Smartphones', '_sacat': '0', '_ipg': '96', '_sop': '15', 'LH_BIN': '1'}
2025-05-13 16:18:55,455 - DealFinderAI.EbayScraperAgent - INFO - Found 130 product listings
2025-05-13 16:18:55,457 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 14 Pro - 512 GB - Purple (Xfinity) Smartphone at 284.0 USD
2025-05-13 16:18:55,457 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 14 Pro - 512 GB - Purple (Xfinity) Smartphone at 284.0 USD
2025-05-13 16:18:55,458 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 14 Pro Max - 128 GB - Black (U.S. Cellular) Smartphone at 299.0 USD
2025-05-13 16:18:55,458 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 14 Pro Max - 128 GB - Black (U.S. Cellular) Smartphone at 299.0 USD
2025-05-13 16:18:55,459 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 14 Pro 256GB White / Silver AT&T at 349.99 USD
2025-05-13 16:18:55,459 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 14 Pro 256GB White / Silver AT&T at 349.99 USD
2025-05-13 16:18:55,460 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 14 Pro - 128 GB - Space Black (T-Mobile) Smartphone at 364.0 USD
2025-05-13 16:18:55,460 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 14 Pro - 128 GB - Space Black (T-Mobile) Smartphone at 364.0 USD
2025-05-13 16:18:55,461 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 16 Pro 128GB Unlocked 1-Year Warranty Smartphone Excellent at 841.99 USD
2025-05-13 16:18:55,461 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 16 Pro 128GB Unlocked 1-Year Warranty Smartphone Excellent at 841.99 USD
2025-05-13 16:18:55,461 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 16 Pro 128GB Factory Unlocked Open Box Mint Smartphone A3083 at 857.45 USD
2025-05-13 16:18:55,462 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 16 Pro 128GB Factory Unlocked Open Box Mint Smartphone A3083 at 857.45 USD
2025-05-13 16:18:55,462 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 16 Pro Unlocked (GSM + CDMA) Smartphone at 864.39 USD
2025-05-13 16:18:55,462 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 16 Pro Unlocked (GSM + CDMA) Smartphone at 864.39 USD
2025-05-13 16:18:55,463 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: APPLE IPHONE 16 PRO - 128GB - BLACK TITANIUM (FACTORY UNLOCKED)  SEALED at 938.95 USD
2025-05-13 16:18:55,463 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: APPLE IPHONE 16 PRO - 128GB - BLACK TITANIUM (FACTORY UNLOCKED)  SEALED at 938.95 USD
2025-05-13 16:18:56,107 - DealFinderAI.EbayScraperAgent - INFO - Extracted 8 products from eBay
2025-05-13 16:18:56,109 - DealFinderAI.EbayScraperAgent - INFO - Applying relevance filtering to 8 products
2025-05-13 16:18:56,109 - DealFinderAI.EbayScraperAgent - INFO - Filtered to 5 most relevant products
2025-05-13 16:18:56,109 - DealFinderAI.Controller - INFO - eBay returned 5 products
2025-05-13 16:18:56,109 - DealFinderAI.Controller - INFO - Total products before aggregation: 5
2025-05-13 16:18:56,110 - DealFinderAI.ResultsAggregatorAgent - INFO - Aggregating results for query: find me best deal on iphone 16
2025-05-13 16:18:56,110 - DealFinderAI.ResultsAggregatorAgent - INFO - Found 3 results from various sources
2025-05-13 16:18:56,110 - DealFinderAI.ResultsAggregatorAgent - INFO - Source Amazon: 0 products
2025-05-13 16:18:56,110 - DealFinderAI.ResultsAggregatorAgent - INFO - Source Walmart: 0 products
2025-05-13 16:18:56,110 - DealFinderAI.ResultsAggregatorAgent - INFO - Source eBay: 5 products
2025-05-13 16:18:56,110 - DealFinderAI.ResultsAggregatorAgent - INFO - Total products extracted: 5
2025-05-13 16:18:56,110 - DealFinderAI.ResultsAggregatorAgent - INFO - Ranking 5 products
2025-05-13 16:18:56,111 - DealFinderAI.ResultsAggregatorAgent - INFO - Sorted 5 products by score
2025-05-13 16:18:56,111 - DealFinderAI.ResultsAggregatorAgent - INFO - Returning all 5 sorted products
2025-05-13 16:18:56,111 - DealFinderAI.ResultsAggregatorAgent - INFO - Products after ranking: 5
2025-05-13 16:18:56,111 - DealFinderAI.ResultsAggregatorAgent - INFO - Final products: 5
2025-05-13 16:18:56,111 - DealFinderAI.Controller - INFO - Products after aggregation: 5
2025-05-13 16:18:56,111 - DealFinderAI.ProductComparisonAgent - INFO - Comparing products for query: find me best deal on iphone 16
2025-05-13 16:18:56,111 - DealFinderAI.ProductComparisonAgent - INFO - Found 5 products to compare
2025-05-13 16:18:56,111 - DealFinderAI.ProductComparisonAgent - INFO - Grouping 5 products
2025-05-13 16:18:56,112 - DealFinderAI.ProductComparisonAgent - INFO - Created 0 product groups
2025-05-13 16:18:56,112 - DealFinderAI.ChatMemoryAgent - INFO - Storing context for conversation session_20250513161835_b2c44a63
2025-05-13 16:18:56,112 - DealFinderAI.ChatMemoryAgent - INFO - Storing 5 products for conversation session_20250513161835_b2c44a63
2025-05-13 16:18:56,113 - DealFinderAI.PresentationAgent - INFO - Preparing presentation for 5 products
2025-05-13 16:18:56,113 - DealFinderAI.PresentationAgent - INFO - Formatting 5 products for display
2025-05-13 16:18:56,113 - DealFinderAI.PresentationAgent - INFO - Product 1: APPLE IPHONE 16 PRO - 128GB - BLACK TITANIUM (FACTORY UNLOCKED)  SEALED - Price: $938.95 - Source: eBay
2025-05-13 16:18:56,113 - DealFinderAI.PresentationAgent - INFO - Product 2: Apple iPhone 16 Pro 128GB Unlocked 1-Year Warranty Smartphone Excellent - Price: $841.99 - Source: eBay
2025-05-13 16:18:56,113 - DealFinderAI.PresentationAgent - INFO - Product 3: Apple iPhone 14 Pro - 512 GB - Purple (Xfinity) Smartphone - Price: $284.00 - Source: eBay
2025-05-13 16:18:56,114 - DealFinderAI.PresentationAgent - INFO - Product 4: Apple iPhone 16 Pro 128GB Factory Unlocked Open Box Mint Smartphone A3083 - Price: $857.45 - Source: eBay
2025-05-13 16:18:56,114 - DealFinderAI.PresentationAgent - INFO - Product 5: Apple iPhone 16 Pro Unlocked (GSM + CDMA) Smartphone - Price: $864.39 - Source: eBay
2025-05-13 16:18:56,114 - DealFinderAI.ChatMemoryAgent - INFO - Storing context for conversation session_20250513161835_b2c44a63
2025-05-13 16:18:56,114 - DealFinderAI.ChatMemoryAgent - INFO - Storing 5 products for conversation session_20250513161835_b2c44a63
2025-05-13 16:18:56,114 - DealFinderAI.Controller - INFO - Successfully stored search results in memory
2025-05-13 16:19:22,600 - DealFinderAI.Controller - INFO - Processing user query: find me best deal on sony headphones
2025-05-13 16:19:22,601 - DealFinderAI.ChatMemoryAgent - INFO - Analyzing query: 'find me best deal on sony headphones' for conversation session_20250513161835_b2c44a63
2025-05-13 16:19:22,601 - DealFinderAI.ChatMemoryAgent - INFO - Found 5 products in memory
2025-05-13 16:19:22,601 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: 
        You are an AI helping to analyze if a user's query is a follow-up question about previously shown products, or if it's a completely new search.

        Previous products shown to the user:
        Product 1: APPLE IPHONE 16 PRO - 128GB - BLACK TITANIUM (FACTORY UNLOCKED)  SEALED
Product 2: Apple iPhone 16 Pro 128GB Unlocked 1-Year Warranty Smartphone Excellent
Product 3: Apple iPhone 14 Pro - 512 GB - Purple (Xfinity) Smartphone
Product 4: Apple iPhone 16 Pro 128GB Factory Unlocked Open Box Mint Smartphone A3083
Product 5: Apple iPhone 16 Pro Unlocked (GSM + CDMA) Smartphone

        User's new query: "find me best deal on sony headphones"

        Please analyze if this query is:
        1. A follow-up question about the previously shown products (e.g., asking for more details, comparing them, etc.)
        2. A completely new search (e.g., asking about different products, starting a new topic)

        Return your analysis in JSON format:
        {
            "is_new_search": true/false,
            "is_follow_up": true/false,
            "reasoning": "brief explanation of your decision",
            "referenced_product_indices": [list of 0-based indices of referenced products, if any]
        }
        
        Only return the JSON, with no additional text.
        
2025-05-13 16:19:23,392 - DealFinderAI.Controller - INFO - Analyze response: {'is_follow_up': False, 'focused_product': None, 'referenced_products': [], 'products': []}
2025-05-13 16:19:23,392 - DealFinderAI.Controller - INFO - Is follow-up? False
2025-05-13 16:19:23,392 - DealFinderAI.Controller - INFO - Referenced products: 0
2025-05-13 16:19:23,392 - DealFinderAI.Controller - INFO - Processing as new search query
2025-05-13 16:19:23,393 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: find me best deal on sony headphones
2025-05-13 16:19:24,156 - DealFinderAI.GeminiAgent - WARNING - Failed to parse Gemini response as JSON: ```json
{
  "product_type": "headphones",
  "keywords": ["sony", "headphones"],
  "price_range": null,
  "brands": ["Sony"],
  "features": [],
  "sorting_preference": "price_low_to_high",
  "buy_it_now": true
}
```

2025-05-13 16:19:24,156 - DealFinderAI.Controller - INFO - Parsed search parameters: {'product_type': 'headphones', 'keywords': ['sony', 'headphones'], 'price_range': None, 'brands': ['Sony'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-13 16:19:24,156 - DealFinderAI.AmazonScraperAgent - INFO - Searching Amazon for: {'product_type': 'headphones', 'keywords': ['sony', 'headphones'], 'price_range': None, 'brands': ['Sony'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-13 16:19:24,156 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: 
            Optimize this search query for Amazon's search engine:
            
            "headphones sony headphones Sony"
            
            For Amazon searches, please:
            1. Focus on product-specific model numbers and identifiers if present
            2. Include key brand names (Amazon's A9 algorithm prioritizes brand matches)
            3. Remove generic words that may dilute results
            4. Add Amazon-specific terms that might improve results (like "Amazon's Choice" if looking for quality products)
            5. Optimize for Amazon's search algorithm which prioritizes exact matches and recent sales volume
            
            Return a JSON object with:
            - optimized_keywords: List of 3-5 optimized search terms (most important first)
            - amazon_category: Any Amazon department/category suggestion (Electronics, Books, etc.)
            - must_include_terms: Terms that MUST be in results
            - exclude_terms: Terms that should NOT be in results
            - amazon_search_filters: Any Amazon-specific filters to apply (Prime eligible, etc.)
            
            Format as JSON only with no explanation.
            
2025-05-13 16:19:25,613 - DealFinderAI.AmazonScraperAgent - INFO - Optimized search parameters: {'product_type': 'headphones', 'keywords': ['Sony Headphones', 'Sony WH-1000XM5', 'Sony WF-1000XM4'], 'price_range': None, 'brands': ['Sony'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True, 'category': 'Electronics', 'must_include_terms': ['Sony'], 'exclude_terms': ['headphones'], 'amazon_filters': ["Amazon's Choice", 'Prime Eligible']}
2025-05-13 16:19:25,613 - DealFinderAI.AmazonScraperAgent - INFO - Built optimized Amazon search query: Sony headphones Sony Headphones Sony WH-1000XM5 Sony WF-1000XM4
2025-05-13 16:19:25,614 - DealFinderAI.AmazonScraperAgent - INFO - Built Amazon query: Sony headphones Sony Headphones Sony WH-1000XM5 Sony WF-1000XM4
2025-05-13 16:19:25,614 - DealFinderAI.AmazonScraperAgent - INFO - Making Amazon search request with params: {'k': 'Sony headphones Sony Headphones Sony WH-1000XM5 Sony WF-1000XM4', 'ref': 'nb_sb_noss', 'crid': 1747167565, 'i': 'aps', 'search-alias': 'electronics', 's': 'price-asc-rank'}
2025-05-13 16:19:27,118 - DealFinderAI.AmazonScraperAgent - INFO - Found 26 product divs in search results
2025-05-13 16:19:27,121 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: WF-C500 True Wireless Headphones - Up to 20 Hours Battery - Charging case - Voice Assistant Compatible - Built-in mic for Phone Calls - Reliable Bluetooth - Black at 59.99 USD
2025-05-13 16:19:27,121 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: WF-C500 True Wireless Headphones - Up to 20 Hours Battery - Charging case - Voice Assistant Compatible - Built-in mic for Phone Calls - Reliable Bluetooth - Black at 59.99 USD
2025-05-13 16:19:27,124 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Sony WF-1000XM3 True Wireless Bluetooth Noise Canceling in-Ear Headphones Black (Renewed) at 89.99 USD
2025-05-13 16:19:27,124 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Sony WF-1000XM3 True Wireless Bluetooth Noise Canceling in-Ear Headphones Black (Renewed) at 89.99 USD
2025-05-13 16:19:27,128 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: WHCH720N Wireless Over The Ear Noise Canceling Headphones with 2 Microphones and Alexa Voice Control (Black) at 99.0 USD
2025-05-13 16:19:27,128 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: WHCH720N Wireless Over The Ear Noise Canceling Headphones with 2 Microphones and Alexa Voice Control (Black) at 99.0 USD
2025-05-13 16:19:27,131 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: SONY WH-H900N h.Ear on 2 Wireless Over-Ear Noise Cancelling High Resolution Headphones (Black/Grey) (Renewed) at 99.99 USD
2025-05-13 16:19:27,131 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: SONY WH-H900N h.Ear on 2 Wireless Over-Ear Noise Cancelling High Resolution Headphones (Black/Grey) (Renewed) at 99.99 USD
2025-05-13 16:19:27,135 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Sony WF-1000XM4 Noise Canceling Wireless Earbud Headphones - Silver (Renewed) at 138.99 USD
2025-05-13 16:19:27,135 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Sony WF-1000XM4 Noise Canceling Wireless Earbud Headphones - Silver (Renewed) at 138.99 USD
2025-05-13 16:19:27,138 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Sony WF-C700N Truly Wireless Noise Canceling in-Ear Bluetooth Earbud Headphones - Sage (Renewed) at 129.99 USD
2025-05-13 16:19:27,138 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Sony WF-C700N Truly Wireless Noise Canceling in-Ear Bluetooth Earbud Headphones - Sage (Renewed) at 129.99 USD
2025-05-13 16:19:27,141 - DealFinderAI.AmazonScraperAgent - WARNING - Incomplete data for ASIN B095DNPH4R, falling back to Gemini extraction.
2025-05-13 16:19:27,142 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: 
            Extract detailed product information from this Amazon listing HTML:
            
            ```html
            <div class="sg-col-20-of-24 s-result-item s-asin sg-col-0-of-12 sg-col-16-of-20 sg-col s-widget-spacing-small sg-col-12-of-16" data-asin="B095DNPH4R" data-component-type="s-search-result" data-index="11" data-uuid="fef1003b-0c28-4843-a297-6858bf0b3fb3" id="fef1003b-0c28-4843-a297-6858bf0b3fb3" role="listitem"><div class="sg-col-inner"><div cel_widget_id="MAIN-SEARCH_RESULTS-11" class="s-widget-container s-spacing-small s-widget-container-height-small celwidget slot=MAIN template=SEARCH_RESULTS widgetId=search-results_7" data-csa-c-item-id="amzn1.asin.1.B095DNPH4R" data-csa-c-pos="7" data-csa-c-type="item" data-csa-op-log-render=""><span class="a-declarative" data-action="puis-card-container-declarative" data-csa-c-func-deps="aui-da-puis-card-container-declarative" data-csa-c-item-id="amzn1.asin.B095DNPH4R" data-csa-c-owner="puis" data-csa-c-posx="7" data-csa-c-type="item" data-render-id="r100jdwe6m80822q8kktpb5um42" data-version-id="v3v794tv49y9a2k7wencwmtf89"><div class="puis-card-container s-card-container s-overflow-hidden aok-relative puis-include-content-margin puis puis-v3v794tv49y9a2k7wencwmtf89 s-latency-cf-section puis-card-border" data-cy="asin-faceout-container"><div class="a-section"><div class="puisg-row"><div class="puisg-col puisg-col-4-of-4 puisg-col-4-of-8 puisg-col-4-of-12 puisg-col-4-of-16 puisg-col-4-of-20 puisg-col-4-of-24 puis-list-col-left"><div class="puisg-col-inner"><div class="a-section a-spacing-none aok-relative puis-status-badge-container s-list-status-badge-container"></div><div class="s-product-image-container aok-relative s-text-center s-image-overlay-grey puis-image-overlay-grey s-padding-left-small s-padding-right-small puis-flex-expand-height puis puis-v3v794tv49y9a2k7wencwmtf89" data-cy="image-container"><div class="aok-relative"><span class="rush-component" data-component-type="s-product-image" data-render-id="r100jdwe6m80822q8kktpb5um42" data-version-id="v3v794tv49y9a2k7wencwmtf89"><a class="a-link-normal s-no-outline" href="/Sony-WF-1000XM4-Cancelling-Optimised-Assistant/dp/B095DNPH4R/ref=sr_1_7?crid=1747167565&amp;dib=eyJ2IjoiMSJ9.HSLN6SY60mTf5S2hrdMfhelbOyZ_xOpf0kqEQNs2WWG566RjF3T5HCD36ORQLPFlQ6_zw-K2vr6Cas3Ow9vuCld5k9UdcA48A2KIdGVV0SRYVDlSHRHqLSdWlmS1YYwlPRxUp-Q1-RIz2xjCrPbStdIHfE0HN6PkMRk6bDesPPTG0tlQWIaC_hY5R-LCOFFQaRot-ZuhzTQDXug0Hr_jB5vhMtixbUvjmRrJA9CZkQI48iiuzLVtddeRr4fHlkA5lIvuYhR6K15tPTr8aa16t6bPmG28UFxa6oEotenADKI.1AqrH30O8rFwIggJpWXAa-i9H3Rt7BYoC2J-xPkERrA&amp;dib_tag=se&amp;keywords=Sony+headphones+Sony+Headphones+Sony+WH-1000XM5+Sony+WF-1000XM4&amp;qid=1747167565&amp;s=electronics&amp;sr=1-7" tabindex="-1"><div class="a-section aok-relative s-image-fixed-height"><img alt="Sony WF-1000XM4 Truly Wireless Noise Cancelling Headphone - Optimized for Alexa and Google Assistant - with Built-in mic f..." aria-hidden="true" class="s-image" data-image-index="7" data-image-latency="s-product-image" data-image-load="" data-image-source-density="1" src="https://m.media-amazon.com/images/I/51m9QoCOiwL._AC_UY218_.jpg" srcset="https://m.media-amazon.com/images/I/51m9QoCOiwL._AC_UY218_.jpg 1x, https://m.media-amazon.com/images/I/51m9QoCOiwL._AC_UY327_FMwebp_QL65_.jpg 1.5x, https://m.media-amazon.com/images/I/51m9QoCOiwL._AC_UY436_FMwebp_QL65_.jpg 2x, https://m.media-amazon.com/images/I/51m9QoCOiwL._AC_UY545_FMwebp_QL65_.jpg 2.5x, https://m.media-amazon.com/images/I/51m9QoCOiwL._AC_UY654_FMwebp_QL65_.jpg 3x"/></div></a></span></div></div></div></div><div class="puisg-col puisg-col-0-of-4 puisg-col-0-of-8 puisg-col-4-of-12 puisg-col-8-of-16 puisg-col-12-of-20 puisg-col-12-of-24 puis-list-col-right"><div class="puisg-col-inner"><div class="a-section a-spacing-small a-spacing-top-small"><div class="a-section a-spacing-none puis-padding-right-small s-title-instructions-style" data-cy="title-recipe"><div class="a-row"><div class="a-row a-color-secondary"><h2 class="a-size-mini s-line-clamp-1"><span class="a-size-medium a-color-base">Sony</span></h2></div></div><a class="a-link-normal s-line-clamp-2 s-link-style a-text-normal" href="/Sony-WF-1000XM4-Cancelling-Optimised-Assistant/dp/B095DNPH4R/ref=sr_1_7?crid=1747167565&amp;dib=eyJ2IjoiMSJ9.HSLN6SY60mTf5S2hrdMfhelbOyZ_xOpf0kqEQNs2WWG566RjF3T5HCD36ORQLPFlQ6_zw-K2vr6Cas3Ow9vuCld5k9UdcA48A2KIdGVV0SRYVDlSHRHqLSdWlmS1YYwlPRxUp-Q1-RIz2xjCrPbStdIHfE0HN6PkMRk6bDesPPTG0tlQWIaC_hY5R-LCOFFQaRot-ZuhzTQDXug0Hr_jB5vhMtixbUvjmRrJA9CZkQI48iiuzLVtddeRr4fHlkA5lIvuYhR6K15tPTr8aa16t6bPmG28UFxa6oEotenADKI.1AqrH30O8rFwIggJpWXAa-i9H3Rt7BYoC2J-xPkERrA&amp;dib_tag=se&amp;keywords=Sony+headphones+Sony+Headphones+Sony+WH-1000XM5+Sony+WF-1000XM4&amp;qid=1747167565&amp;s=electronics&amp;sr=1-7"><h2 aria-label="WF-1000XM4 Truly Wireless Noise Cancelling Headphone - Optimized for Alexa and Google Assistant - with Built-in mic for Calls - Bluetooth Connection - Black/Copper International Version" class="a-size-medium a-spacing-none a-color-base a-text-normal"><span>WF-1000XM4 Truly Wireless Noise Cancelling Headphone - Optimized for Alexa and Google Assistant - with Built-in mic for Calls - Bluetooth Connection - Black/Copper International Version</span></h2></a> </div><div class="a-section a-spacing-none a-spacing-top-micro" data-cy="reviews-block"><div class="a-row a-size-small"><span class="a-declarative" data-a-popover='{"position":"triggerBottom","popoverLabel":"3.7 out of 5 stars, rating details","url":"/review/widgets/average-customer-review/popover/ref=acr_search__popover?ie=UTF8&amp;asin=B095DNPH4R&amp;ref_=acr_search__popover&amp;contextId=search","closeButton":true,"closeButtonLabel":""}' data-action="a-popover" data-csa-c-func-deps="aui-da-a-popover" data-csa-c-type="widget" data-render-id="r100jdwe6m80822q8kktpb5um42" data-version-id="v3v794tv49y9a2k7wencwmtf89"><a aria-label="3.7 out of 5 stars, rating details" class="a-popover-trigger a-declarative" href="javascript:void(0)" role="button"><i aria-hidden="true" class="a-icon a-icon-star-small a-star-small-3-5" data-cy="reviews-ratings-slot"><span class="a-icon-alt">3.7 out of 5 stars</span></i><i class="a-icon a-icon-popover"></i></a></span> <span class="rush-component" data-component-type="s-client-side-analytics" data-render-id="r100jdwe6m80822q8kktpb5um42" data-version-id="v3v794tv49y9a2k7wencwmtf89"><div class="s-csa-instrumentation-wrapper alf-search-csa-instrumentation-wrapper" data-csa-c-asin="B095DNPH4R" data-csa-c-content-id="alf-customer-ratings-count-component" data-csa-c-layout="LIST" data-csa-c-slot-id="alf-reviews" data-csa-c-type="alf-af-component" data-csa-op-log-render="" style="display: inline-block"><a aria-label="14,913 ratings" class="a-link-normal s-underline-text s-underline-link-text s-link-style" href="/Sony-WF-1000XM4-Cancelling-Optimised-Assistant/dp/B095DNPH4R/ref=sr_1_7?crid=1747167565&amp;dib=eyJ2IjoiMSJ9.HSLN6SY60mTf5S2hrdMfhelbOyZ_xOpf0kqEQNs2WWG566RjF3T5HCD36ORQLPFlQ6_zw-K2vr6Cas3Ow9vuCld5k9UdcA48A2KIdGVV0SRYVDlSHRHqLSdWlmS1YYwlPRxUp-Q1-RIz2xjCrPbStdIHfE0HN6PkMRk6bDesPPTG0tlQWIaC_hY5R-LCOFFQaRot-ZuhzTQDXug0Hr_jB5vhMtixbUvjmRrJA9CZkQI48iiuzLVtddeRr4fHlkA5lIvuYhR6K15tPTr8aa16t6bPmG28UFxa6oEotenADKI.1AqrH30O8rFwIggJpWXAa-i9H3Rt7BYoC2J-xPkERrA&amp;dib_tag=se&amp;keywords=Sony+headphones+Sony+Headphones+Sony+WH-1000XM5+Sony+WF-1000XM4&amp;qid=1747167565&amp;s=electronics&amp;sr=1-7#customerReviews"><span aria-hidden="true" class="a-size-base s-underline-text">14,913</span> </a> </div></span></div></div><div class="puisg-row"><div class="puisg-col puisg-col-4-of-4 puisg-col-4-of-8 puisg-col-4-of-12 puisg-col-4-of-16 puisg-col-4-of-20 puisg-col-4-of-24"><div class="puisg-col-inner"><div class="a-section a-spacing-none a-spacing-top-micro puis-price-instructions-style" data-cy="price-recipe"><div class="a-row a-size-base a-color-base"><div class="a-row"></div><div class="a-row"></div></div></div><div class="a-section a-spacing-none a-spacing-top-mini"><div class="puis-see-details-content"><div data-csa-c-content-id="s-search-see-details-button" data-csa-c-device-env="WEB" data-csa-c-device-os="UNRECOGNIZED" data-csa-c-device-type="DESKTOP" data-csa-c-item-id="B095DNPH4R" data-csa-c-item-type="asin" data-csa-c-type="action"><span class="a-button a-button-base"><span class="a-button-inner"><a class="a-button-text" href="/Sony-WF-1000XM4-Cancelling-Optimised-Assistant/dp/B095DNPH4R/ref=sr_1_7_so_HEADPHONES?crid=1747167565&amp;dib=eyJ2IjoiMSJ9.HSLN6SY60mTf5S2hrdMfhelbOyZ_xOpf0kqEQNs2WWG566RjF3T5HCD36ORQLPFlQ6_zw-K2vr6Cas3Ow9vuCld5k9UdcA48A2KIdGVV0SRYVDlSHRHqLSdWlmS1YYwlPRxUp-Q1-RIz2xjCrPbStdIHfE0HN6PkMRk6bDesPPTG0tlQWIaC_hY5R-LCOFFQaRot-ZuhzTQDXug0Hr_jB5vhMtixbUvjmRrJA9CZkQI48iiuzLVtddeRr4fHlkA5lIvuYhR6K15tPTr8aa16t6bPmG28UFxa6oEotenADKI.1AqrH30O8rFwIggJpWXAa-i9H3Rt7BYoC2J-xPkERrA&amp;dib_tag=se&amp;keywords=Sony+headphones+Sony+Headphones+Sony+WH-1000XM5+Sony+WF-1000XM4&amp;qid=1747167565&amp;s=electronics&amp;sr=1-7">See options</a></span></span></div></div></div><div class="a-section a-spacing-none a-spacing-top-mini s-color-swatch-container-list-view"><div class="a-section s-color-swatch-container s-color-swatch-container-left-aligned s-quick-view-text-align-start"><div class="a-section s-color-swatch-outer-circle s-color-swatch-pad s-color-swatch-outer-circle-selected"><div data-csa-c-content-id="color-swatch-link" data-csa-c-device-env="WEB" data-csa-c-device-os="UNRECOGNIZED" data-csa-c-device-type="DESKTOP" data-csa-c-interaction-events="click" data-csa-c-product-type="HEADPHONES" data-csa-c-swatch-is-selected="true" data-csa-c-swatch-position="1" data-csa-c-swatch-url="/Sony-WF-1000XM4-Cancelling-Optimised-Assistant/dp/B095DNPH4R/ref=cs_sr_dp_1?crid=1747167565&amp;dib=eyJ2IjoiMSJ9.HSLN6SY60mTf5S2hrdMfhelbOyZ_xOpf0kqEQNs2WWG566RjF3T5HCD36ORQLPFlQ6_zw-K2vr6Cas3Ow9vuCld5k9UdcA48A2KIdGVV0SRYVDlSHRHqLSdWlmS1YYwlPRxUp-Q1-RIz2xjCrPbStdIHfE0HN6PkMRk6bDesPPTG0tlQWIaC_hY5R-LCOFFQaRot-ZuhzTQDXug0Hr_jB5vhMtixbUvjmRrJA9CZkQI48iiuzLVtddeRr4fHlkA5lIvuYhR6K15tPTr8aa16t6bPmG28UFxa6oEotenADKI.1AqrH30O8rFwIggJpWXAa-i9H3Rt7BYoC2J-xPkERrA&amp;dib_tag=se&amp;keywords=Sony+headphones+Sony+Headphones+Sony+WH-1000XM5+Sony+WF-1000XM4&amp;qid=1747167565&amp;s=electronics&amp;sr=1-7" data-csa-c-type="link"><a aria-label="Black/Copper" class="a-link-normal" href="/Sony-WF-1000XM4-Cancelling-Optimised-Assistant/dp/B095DNPH4R/ref=cs_sr_dp_1?crid=1747167565&amp;dib=eyJ2IjoiMSJ9.HSLN6SY60mTf5S2hrdMfhelbOyZ_xOpf0kqEQNs2WWG566RjF3T5HCD36ORQLPFlQ6_zw-K2vr6Cas3Ow9vuCld5k9UdcA48A2KIdGVV0SRYVDlSHRHqLSdWlmS1YYwlPRxUp-Q1-RIz2xjCrPbStdIHfE0HN6PkMRk6bDesPPTG0tlQWIaC_hY5R-LCOFFQaRot-ZuhzTQDXug0Hr_jB5vhMtixbUvjmRrJA9CZkQI48iiuzLVtddeRr4fHlkA5lIvuYhR6K15tPTr8aa16t6bPmG28UFxa6oEotenADKI.1AqrH30O8rFwIggJpWXAa-i9H3Rt7BYoC2J-xPkERrA&amp;dib_tag=se&amp;keywords=Sony+headphones+Sony+Headphones+Sony+WH-1000XM5+Sony+WF-1000XM4&amp;qid=1747167565&amp;s=electronics&amp;sr=1-7" role="button"><span class="s-color-swatch-inner-circle-fill" style="background-color: #373534"><span class="s-color-swatch-inner-circle-border"></span></span></a></div></div><div class="a-section s-color-swatch-outer-circle s-color-swatch-pad"><div data-csa-c-content-id="color-swatch-link" data-csa-c-device-env="WEB" data-csa-c-device-os="UNRECOGNIZED" data-csa-c-device-type="DESKTOP" data-csa-c-interaction-events="click" data-csa-c-product-type="HEADPHONES" data-csa-c-swatch-is-selected="false" data-csa-c-swatch-position="2" data-csa-c-swatch-url="/Sony-WF-1000XM4-Cancelling-Optimised-Assistant/dp/B095D1HCYG/ref=cs_sr_dp_2?crid=1747167565&amp;dib=eyJ2IjoiMSJ9.HSLN6SY60mTf5S2hrdMfhelbOyZ_xOpf0kqEQNs2WWG566RjF3T5HCD36ORQLPFlQ6_zw-K2vr6Cas3Ow9vuCld5k9UdcA48A2KIdGVV0SRYVDlSHRHqLSdWlmS1YYwlPRxUp-Q1-RIz2xjCrPbStdIHfE0HN6PkMRk6bDesPPTG0tlQWIaC_hY5R-LCOFFQaRot-ZuhzTQDXug0Hr_jB5vhMtixbUvjmRrJA9CZkQI48iiuzLVtddeRr4fHlkA5lIvuYhR6K15tPTr8aa16t6bPmG28UFxa6oEotenADKI.1AqrH30O8rFwIggJpWXAa-i9H3Rt7BYoC2J-xPkERrA&amp;dib_tag=se&amp;keywords=Sony+headphones+Sony+Headphones+Sony+WH-1000XM5+Sony+WF-1000XM4&amp;qid=1747167565&amp;s=electronics&amp;sr=1-7" data-csa-c-type="link"><a aria-label="Silver/Gold" class="a-link-normal" href="/Sony-WF-1000XM4-Cancelling-Optimised-Assistant/dp/B095D1HCYG/ref=cs_sr_dp_2?crid=1747167565&amp;dib=eyJ2IjoiMSJ9.HSLN6SY60mTf5S2hrdMfhelbOyZ_xOpf0kqEQNs2WWG566RjF3T5HCD36ORQLPFlQ6_zw-K2vr6Cas3Ow9vuCld5k9UdcA48A2KIdGVV0SRYVDlSHRHqLSdWlmS1YYwlPRxUp-Q1-RIz2xjCrPbStdIHfE0HN6PkMRk6bDesPPTG0tlQWIaC_hY5R-LCOFFQaRot-ZuhzTQDXug0Hr_jB5vhMtixbUvjmRrJA9CZkQI48iiuzLVtddeRr4fHlkA5lIvuYhR6K15tPTr8aa16t6bPmG28UFxa6oEotenADKI.1AqrH30O8rFwIggJpWXAa-i9H3Rt7BYoC2J-xPkERrA&amp;dib_tag=se&amp;keywords=Sony+headphones+Sony+Headphones+Sony+WH-1000XM5+Sony+WF-1000XM4&amp;qid=1747167565&amp;s=electronics&amp;sr=1-7" role="button"><span class="s-color-swatch-inner-circle-fill" style="background-color: #B3B1A6"><span class="s-color-swatch-inner-circle-border"></span></span></a></div></div></div></div></div></div><div class="puisg-col puisg-col-0-of-4 puisg-col-0-of-8 puisg-col-4-of-12 puisg-col-4-of-16 puisg-col-8-of-20 puisg-col-8-of-24"><div class="puisg-col-inner"></div></div></div><div class="puisg-row"></div></div></div></div></div></div></div></span></div></div></div>
            ```
            
            Extract:
            - title: Full product title
            - price: Numeric price value only (no currency symbol)
            - was_price: Original price before discount (if present)
            - currency: Currency code (e.g., USD)
            - url: Product URL
            - image_url: Main product image URL
            - rating: Star rating (0-5)
            - reviews: Number of reviews
            - asin: Amazon ASIN
            - is_prime: Boolean for Prime eligible
            - is_sponsored: Boolean for sponsored listing
            - is_amazon_choice: Boolean for Amazon's Choice
            - is_best_seller: Boolean for Best Seller
            - description: Any additional description text
            - delivery_info: Delivery/shipping information
            - out_of_stock: Boolean for out of stock status
            
            Return a clean JSON object with these fields. Use null for missing values.
            
2025-05-13 16:19:32,199 - DealFinderAI.AmazonScraperAgent - INFO - Gemini extracted: Sony WF-1000XM4 Truly Wireless Noise Cancelling Headphone - Optimized for Alexa and Google Assistant - with Built-in mic for Calls - Bluetooth Connection - Black/Copper International Version at None USD
2025-05-13 16:19:32,200 - DealFinderAI.AmazonScraperAgent - INFO - Gemini used for product extraction
2025-05-13 16:19:32,200 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Sony WF-1000XM4 Truly Wireless Noise Cancelling Headphone - Optimized for Alexa and Google Assistant - with Built-in mic for Calls - Bluetooth Connection - Black/Copper International Version at None USD
2025-05-13 16:19:32,200 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Sony WF-1000XM4 Truly Wireless Noise Cancelling Headphone - Optimized for Alexa and Google Assistant - with Built-in mic for Calls - Bluetooth Connection - Black/Copper International Version at None USD
2025-05-13 16:19:32,208 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: WH-CH720 Noise Canceling Wireless Bluetooth Headphones - Built-in Microphone - up to 35 Hours Battery Life and Quick Charge - White at 146.99 USD
2025-05-13 16:19:32,208 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: WH-CH720 Noise Canceling Wireless Bluetooth Headphones - Built-in Microphone - up to 35 Hours Battery Life and Quick Charge - White at 146.99 USD
2025-05-13 16:19:32,212 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Sony WH-XB900N Wireless Noise Canceling Over-the-Ear Headphones - Black.WHTBOX (Renewed) at 159.0 USD
2025-05-13 16:19:32,212 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Sony WH-XB900N Wireless Noise Canceling Over-the-Ear Headphones - Black.WHTBOX (Renewed) at 159.0 USD
2025-05-13 16:19:32,218 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: WH-1000XM4 Noise Cancelling Wireless Headphones - 30hr Battery Life - Over Ear Style - Optimised for Alexa and Google Assistant - Built-in mic for Calls - Blue International Version at 224.0 USD
2025-05-13 16:19:32,218 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: WH-1000XM4 Noise Cancelling Wireless Headphones - 30hr Battery Life - Over Ear Style - Optimised for Alexa and Google Assistant - Built-in mic for Calls - Blue International Version at 224.0 USD
2025-05-13 16:19:33,260 - DealFinderAI.AmazonScraperAgent - INFO - Extracted 10 products from Amazon
2025-05-13 16:19:33,261 - DealFinderAI.AmazonScraperAgent - INFO - Applying relevance filtering to 10 products
2025-05-13 16:19:33,261 - DealFinderAI.AmazonScraperAgent - ERROR - Error in relevance filtering: 'NoneType' object has no attribute 'lower'
2025-05-13 16:19:33,261 - DealFinderAI.Controller - INFO - Amazon response content: {'source': 'Amazon', 'query': 'Sony headphones Sony Headphones Sony WH-1000XM5 Sony WF-1000XM4', 'products': [{'title': 'WF-C500 True Wireless Headphones - Up to 20 Hours Battery - Charging case - Voice Assistant Compatible - Built-in mic for Phone Calls - Reliable Bluetooth - Black', 'price': 59.99, 'was_price': None, 'currency': 'USD', 'url': 'https://www.amazon.com/Sony-WF-C500-Wireless-Headphones-Built/dp/B0CFSZ6GPV/ref=sr_1_1?crid=1747167565&dib=eyJ2IjoiMSJ9.HSLN6SY60mTf5S2hrdMfhelbOyZ_xOpf0kqEQNs2WWG566RjF3T5HCD36ORQLPFlQ6_zw-K2vr6Cas3Ow9vuCld5k9UdcA48A2KIdGVV0SRYVDlSHRHqLSdWlmS1YYwlPRxUp-Q1-RIz2xjCrPbStdIHfE0HN6PkMRk6bDesPPTG0tlQWIaC_hY5R-LCOFFQaRot-ZuhzTQDXug0Hr_jB5vhMtixbUvjmRrJA9CZkQI48iiuzLVtddeRr4fHlkA5lIvuYhR6K15tPTr8aa16t6bPmG28UFxa6oEotenADKI.1AqrH30O8rFwIggJpWXAa-i9H3Rt7BYoC2J-xPkERrA&dib_tag=se&keywords=Sony+headphones+Sony+Headphones+Sony+WH-1000XM5+Sony+WF-1000XM4&qid=1747167565&s=electronics&sr=1-1', 'image_url': 'https://m.media-amazon.com/images/I/41XYh5+220L._AC_UY218_.jpg', 'rating': 4.5, 'reviews': 416, 'is_sponsored': False, 'is_prime': True, 'is_amazon_choice': False, 'is_best_seller': False, 'asin': 'B0CFSZ6GPV', 'description': 'SonyWF-C500 True Wireless Headphones - Up to 20 Hours Battery - Charging case - Voice Assistant Compatible - Built-in mic for Phone Calls - Reliable Bluetooth - Black 4.5 out of 5 stars 416 100+ bought in past monthPrice, product page$59.99$59.99 FREE delivery Sun, May 18 Or fastest delivery Tomorrow, May 14 Add to cartMore Buying Choices$59.00(4 new offers)', 'delivery_info': '100+ bought in past month', 'out_of_stock': False, 'source': 'Amazon', 'relevance_score': 26}, {'title': 'Sony WF-1000XM3 True Wireless Bluetooth Noise Canceling in-Ear Headphones Black (Renewed)', 'price': 89.99, 'was_price': 109.99, 'currency': 'USD', 'url': 'https://www.amazon.com/Sony-WF-1000XM3-Bluetooth-Canceling-Headphones/dp/B07X8QHKFV/ref=sr_1_2?crid=1747167565&dib=eyJ2IjoiMSJ9.HSLN6SY60mTf5S2hrdMfhelbOyZ_xOpf0kqEQNs2WWG566RjF3T5HCD36ORQLPFlQ6_zw-K2vr6Cas3Ow9vuCld5k9UdcA48A2KIdGVV0SRYVDlSHRHqLSdWlmS1YYwlPRxUp-Q1-RIz2xjCrPbStdIHfE0HN6PkMRk6bDesPPTG0tlQWIaC_hY5R-LCOFFQaRot-ZuhzTQDXug0Hr_jB5vhMtixbUvjmRrJA9CZkQI48iiuzLVtddeRr4fHlkA5lIvuYhR6K15tPTr8aa16t6bPmG28UFxa6oEotenADKI.1AqrH30O8rFwIggJpWXAa-i9H3Rt7BYoC2J-xPkERrA&dib_tag=se&keywords=Sony+headphones+Sony+Headphones+Sony+WH-1000XM5+Sony+WF-1000XM4&qid=1747167565&s=electronics&sr=1-2', 'image_url': 'https://m.media-amazon.com/images/I/41H-Lb8rA1L._AC_UY218_.jpg', 'rating': 4.1, 'reviews': 2561, 'is_sponsored': False, 'is_prime': False, 'is_amazon_choice': False, 'is_best_seller': False, 'asin': 'B07X8QHKFV', 'description': 'Sony WF-1000XM3 True Wireless Bluetooth Noise Canceling in-Ear Headphones Black (Renewed) 4.1 out of 5 stars 2,561 Price, product page$89.99$89.99 Typical price: $109.99Typical price: $109.99$109.99FREE delivery May 20 - 22 Or fastest delivery Thu, May 15 See options', 'delivery_info': 'Typical price:', 'out_of_stock': False, 'source': 'Amazon', 'relevance_score': 35}, {'title': 'WHCH720N Wireless Over The Ear Noise Canceling Headphones with 2 Microphones and Alexa Voice Control (Black)', 'price': 99.0, 'was_price': None, 'currency': 'USD', 'url': 'https://www.amazon.com/WH-CH720-Canceling-Wireless-Bluetooth-Headphones/dp/B0BVPNJP1C/ref=sr_1_3?crid=1747167565&dib=eyJ2IjoiMSJ9.HSLN6SY60mTf5S2hrdMfhelbOyZ_xOpf0kqEQNs2WWG566RjF3T5HCD36ORQLPFlQ6_zw-K2vr6Cas3Ow9vuCld5k9UdcA48A2KIdGVV0SRYVDlSHRHqLSdWlmS1YYwlPRxUp-Q1-RIz2xjCrPbStdIHfE0HN6PkMRk6bDesPPTG0tlQWIaC_hY5R-LCOFFQaRot-ZuhzTQDXug0Hr_jB5vhMtixbUvjmRrJA9CZkQI48iiuzLVtddeRr4fHlkA5lIvuYhR6K15tPTr8aa16t6bPmG28UFxa6oEotenADKI.1AqrH30O8rFwIggJpWXAa-i9H3Rt7BYoC2J-xPkERrA&dib_tag=se&keywords=Sony+headphones+Sony+Headphones+Sony+WH-1000XM5+Sony+WF-1000XM4&qid=1747167565&s=electronics&sr=1-3', 'image_url': 'https://m.media-amazon.com/images/I/51t35+ah6yL._AC_UY218_.jpg', 'rating': 4.4, 'reviews': 687, 'is_sponsored': False, 'is_prime': True, 'is_amazon_choice': False, 'is_best_seller': False, 'asin': 'B0BVPNJP1C', 'description': 'SonyWHCH720N Wireless Over The Ear Noise Canceling Headphones with 2 Microphones and Alexa Voice Control (Black) 4.4 out of 5 stars 687 50+ bought in past monthPrice, product page$99.00$99.00 FREE delivery Sun, May 18 Or fastest delivery Fri, May 16 Only 14 left in stock - order soon.Add to cartMore Buying Choices$74.99(6+ used & new offers)', 'delivery_info': '50+ bought in past month', 'out_of_stock': False, 'source': 'Amazon', 'relevance_score': 28}, {'title': 'SONY WH-H900N h.Ear on 2 Wireless Over-Ear Noise Cancelling High Resolution Headphones (Black/Grey) (Renewed)', 'price': 99.99, 'was_price': 219.99, 'currency': 'USD', 'url': 'https://www.amazon.com/Sony-WH-H900N-Cancelling-Resolution-Headphones/dp/B07LDCLP11/ref=sr_1_4?crid=1747167565&dib=eyJ2IjoiMSJ9.HSLN6SY60mTf5S2hrdMfhelbOyZ_xOpf0kqEQNs2WWG566RjF3T5HCD36ORQLPFlQ6_zw-K2vr6Cas3Ow9vuCld5k9UdcA48A2KIdGVV0SRYVDlSHRHqLSdWlmS1YYwlPRxUp-Q1-RIz2xjCrPbStdIHfE0HN6PkMRk6bDesPPTG0tlQWIaC_hY5R-LCOFFQaRot-ZuhzTQDXug0Hr_jB5vhMtixbUvjmRrJA9CZkQI48iiuzLVtddeRr4fHlkA5lIvuYhR6K15tPTr8aa16t6bPmG28UFxa6oEotenADKI.1AqrH30O8rFwIggJpWXAa-i9H3Rt7BYoC2J-xPkERrA&dib_tag=se&keywords=Sony+headphones+Sony+Headphones+Sony+WH-1000XM5+Sony+WF-1000XM4&qid=1747167565&s=electronics&sr=1-4', 'image_url': 'https://m.media-amazon.com/images/I/71LKuMVDUpL._AC_UY218_.jpg', 'rating': 4.4, 'reviews': 531, 'is_sponsored': False, 'is_prime': False, 'is_amazon_choice': False, 'is_best_seller': False, 'asin': 'B07LDCLP11', 'description': 'SONY WH-H900N h.Ear on 2 Wireless Over-Ear Noise Cancelling High Resolution Headphones (Black/Grey) (Renewed) 4.4 out of 5 stars 531 Price, product page$99.99$99.99 New Price: $219.99New Price: $219.99$219.99FREE delivery Mon, May 19 Or fastest delivery May 15 - 16 Only 2 left in stock - order soon.See options', 'delivery_info': 'New Price:', 'out_of_stock': False, 'source': 'Amazon', 'relevance_score': 33}, {'title': 'Sony WF-1000XM4 Noise Canceling Wireless Earbud Headphones - Silver (Renewed)', 'price': 138.99, 'was_price': None, 'currency': 'USD', 'url': 'https://www.amazon.com/Sony-WF-1000XM4-Canceling-Wireless-Headphones/dp/B09BDTP2S3/ref=sr_1_5?crid=1747167565&dib=eyJ2IjoiMSJ9.HSLN6SY60mTf5S2hrdMfhelbOyZ_xOpf0kqEQNs2WWG566RjF3T5HCD36ORQLPFlQ6_zw-K2vr6Cas3Ow9vuCld5k9UdcA48A2KIdGVV0SRYVDlSHRHqLSdWlmS1YYwlPRxUp-Q1-RIz2xjCrPbStdIHfE0HN6PkMRk6bDesPPTG0tlQWIaC_hY5R-LCOFFQaRot-ZuhzTQDXug0Hr_jB5vhMtixbUvjmRrJA9CZkQI48iiuzLVtddeRr4fHlkA5lIvuYhR6K15tPTr8aa16t6bPmG28UFxa6oEotenADKI.1AqrH30O8rFwIggJpWXAa-i9H3Rt7BYoC2J-xPkERrA&dib_tag=se&keywords=Sony+headphones+Sony+Headphones+Sony+WH-1000XM5+Sony+WF-1000XM4&qid=1747167565&s=electronics&sr=1-5', 'image_url': 'https://m.media-amazon.com/images/I/31xoLBpVqdL._AC_UY218_.jpg', 'rating': 3.6, 'reviews': 574, 'is_sponsored': False, 'is_prime': False, 'is_amazon_choice': False, 'is_best_seller': False, 'asin': 'B09BDTP2S3', 'description': 'Sony WF-1000XM4 Noise Canceling Wireless Earbud Headphones - Silver (Renewed) 3.6 out of 5 stars 574 Price, product page$138.99$138.99FREE delivery May 16 - 19 Only 3 left in stock - order soon.See optionsMore Buying Choices$109.68(2 new offers)', 'delivery_info': 'More Buying Choices', 'out_of_stock': False, 'source': 'Amazon', 'relevance_score': 30}]}
2025-05-13 16:19:33,262 - DealFinderAI.Controller - INFO - Amazon returned 5 products
2025-05-13 16:19:33,262 - DealFinderAI.WalmartScraperAgent - INFO - Searching Walmart for: {'product_type': 'headphones', 'keywords': ['sony', 'headphones'], 'price_range': None, 'brands': ['Sony'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-13 16:19:33,262 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: 
            Optimize this search query for Walmart's search engine:
            
            "headphones sony headphones Sony"
            
            For Walmart searches, please:
            1. Focus on model numbers and specific identifiers if present
            2. Include key brand names (Walmart's search works well with brand names)
            3. Remove generic words that may dilute results
            4. Add Walmart-specific terms that might improve results (like "Rollback" if looking for deals)
            5. Prioritize precise product names and specifications
            
            Return a JSON object with:
            - optimized_keywords: List of 3-5 optimized search terms (most important first)
            - department_hint: Any Walmart department suggestion (Electronics, Home, etc.)
            - must_include_terms: Terms that MUST be in results
            - exclude_terms: Terms that should NOT be in results
            - walmart_specific_filters: Any Walmart-specific filters to apply
            
            Format as JSON only with no explanation.
            
2025-05-13 16:19:34,510 - DealFinderAI.WalmartScraperAgent - INFO - Optimized search parameters: {'product_type': 'headphones', 'keywords': ['Sony Headphones', 'Sony WH-1000XM5', 'Sony WF-1000XM4', 'Sony earbuds'], 'price_range': None, 'brands': ['Sony'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True, 'department': 'Electronics', 'must_include_terms': ['Sony'], 'exclude_terms': ['headphones'], 'walmart_filters': ['Rollback', 'Clearance']}
2025-05-13 16:19:34,510 - DealFinderAI.WalmartScraperAgent - INFO - Built optimized Walmart search query: Sony headphones Sony Headphones Sony WH-1000XM5 Sony WF-1000XM4
2025-05-13 16:19:34,511 - DealFinderAI.WalmartScraperAgent - INFO - Built Walmart query: Sony headphones Sony Headphones Sony WH-1000XM5 Sony WF-1000XM4
2025-05-13 16:19:34,511 - DealFinderAI.WalmartScraperAgent - INFO - Making Walmart search request with params: {'q': 'Sony headphones Sony Headphones Sony WH-1000XM5 Sony WF-1000XM4 Electronics', 'page': 1, 'affinityOverride': 'default', 'sort': 'price_low'}
2025-05-13 16:19:35,802 - DealFinderAI.WalmartScraperAgent - INFO - Extracted 0 products from JSON data
2025-05-13 16:19:35,803 - DealFinderAI.WalmartScraperAgent - INFO - JSON extraction failed, falling back to HTML extraction
2025-05-13 16:19:35,804 - DealFinderAI.WalmartScraperAgent - INFO - Found 0 product divs in HTML
2025-05-13 16:19:35,804 - DealFinderAI.WalmartScraperAgent - INFO - Extracted 0 products from HTML
2025-05-13 16:19:37,066 - DealFinderAI.WalmartScraperAgent - INFO - Extracted 0 products from Walmart
2025-05-13 16:19:37,068 - DealFinderAI.Controller - INFO - Walmart returned 0 products
2025-05-13 16:19:37,068 - DealFinderAI.EbayScraperAgent - INFO - Searching eBay for: {'product_type': 'headphones', 'keywords': ['sony', 'headphones'], 'price_range': None, 'brands': ['Sony'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-13 16:19:37,068 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: 
            Optimize this search query for eBay's search engine:
            
            "headphones sony headphones Sony"
            
            For eBay searches, please:
            1. Focus on exact model numbers and specific part identifiers if present
            2. Include key brand names
            3. Remove generic words that may dilute results
            4. Add eBay-specific terms that might improve results
            5. Optimize for finding the most relevant listings
            
            Return a JSON object with:
            - optimized_keywords: List of 3-5 optimized search terms (most important first)
            - category_hints: Any eBay category suggestions
            - must_include_terms: Terms that MUST be in results
            - exclude_terms: Terms that should NOT be in results
            
            Format as JSON only with no explanation.
            
2025-05-13 16:19:37,939 - DealFinderAI.EbayScraperAgent - INFO - Optimized search parameters: {'product_type': 'headphones', 'keywords': ['Sony WH-1000XM5', 'Sony WF-1000XM4', 'Sony headphones model number', 'Sony earbuds'], 'price_range': None, 'brands': ['Sony'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True, 'category_hints': ['Electronics>Headphones>Headphone Type'], 'must_include_terms': ['Sony'], 'exclude_terms': ['headphones']}
2025-05-13 16:19:37,939 - DealFinderAI.EbayScraperAgent - INFO - Built optimized eBay search query: headphones Sony Sony WH-1000XM5 Sony WF-1000XM4 Sony headphones model number
2025-05-13 16:19:37,939 - DealFinderAI.EbayScraperAgent - INFO - Built eBay query: headphones Sony Sony WH-1000XM5 Sony WF-1000XM4 Sony headphones model number
2025-05-13 16:19:37,939 - DealFinderAI.EbayScraperAgent - INFO - Making eBay search request with params: {'_nkw': 'headphones Sony Sony WH-1000XM5 Sony WF-1000XM4 Sony headphones model number Electronics>Headphones>Headphone Type', '_sacat': '0', '_ipg': '96', '_sop': '15', 'LH_BIN': '1'}
2025-05-13 16:19:40,037 - DealFinderAI.EbayScraperAgent - INFO - Found 60 product listings
2025-05-13 16:19:40,038 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Sony Genuine Headphone Aux Audio Cable Fo WH-1000XM4 WH1000XM5 3.5mm SHIPS NOW at 7.95 USD
2025-05-13 16:19:40,038 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Sony Genuine Headphone Aux Audio Cable Fo WH-1000XM4 WH1000XM5 3.5mm SHIPS NOW at 7.95 USD
2025-05-13 16:19:40,039 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Sony Genuine Headphone Aux Audio Cable Fo WH-1000XM4 WH1000XM5 3.5mm at 13.95 USD
2025-05-13 16:19:40,039 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Sony Genuine Headphone Aux Audio Cable Fo WH-1000XM4 WH1000XM5 3.5mm at 13.95 USD
2025-05-13 16:19:40,040 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Replacement Ear Pads Cushion For Sony WH-1000XM3 WH-1000XM4 WH-1000XM5 Headphone at 10.78 USD
2025-05-13 16:19:40,040 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Replacement Ear Pads Cushion For Sony WH-1000XM3 WH-1000XM4 WH-1000XM5 Headphone at 10.78 USD
2025-05-13 16:19:40,041 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Geekria Headphone Headband Cover for SONY WH-1000XM5, WH-1000XM4 (Grey) at 10.99 USD
2025-05-13 16:19:40,041 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Geekria Headphone Headband Cover for SONY WH-1000XM5, WH-1000XM4 (Grey) at 10.99 USD
2025-05-13 16:19:40,042 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Sony Genuine Headphone 3.5mm Aux Audio Cable For WH-1000XM4 WH1000XM5 - Black 8 at 6.99 USD
2025-05-13 16:19:40,042 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Sony Genuine Headphone 3.5mm Aux Audio Cable For WH-1000XM4 WH1000XM5 - Black 8 at 6.99 USD
2025-05-13 16:19:40,043 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Sony Genuine Headphone Aux Audio Cable Fo WH-1000XM4 WH1000XM5 3.5mm - BLACK at 12.46 USD
2025-05-13 16:19:40,043 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Sony Genuine Headphone Aux Audio Cable Fo WH-1000XM4 WH1000XM5 3.5mm - BLACK at 12.46 USD
2025-05-13 16:19:40,044 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: USB Power Cord Charger Cable Plug 4 SONY WH-1000XM5 BLUETOOTH WIRELESS HEADPHONE at 8.85 USD
2025-05-13 16:19:40,044 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: USB Power Cord Charger Cable Plug 4 SONY WH-1000XM5 BLUETOOTH WIRELESS HEADPHONE at 8.85 USD
2025-05-13 16:19:40,045 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Sony Genuine Headphone Aux Audio Cable Fo WH-1000XM4 WH1000XM5 3.5mm - CREAM at 12.46 USD
2025-05-13 16:19:40,045 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Sony Genuine Headphone Aux Audio Cable Fo WH-1000XM4 WH1000XM5 3.5mm - CREAM at 12.46 USD
2025-05-13 16:19:40,566 - DealFinderAI.EbayScraperAgent - INFO - Extracted 8 products from eBay
2025-05-13 16:19:40,567 - DealFinderAI.EbayScraperAgent - INFO - Applying relevance filtering to 8 products
2025-05-13 16:19:40,568 - DealFinderAI.EbayScraperAgent - INFO - Filtered to 5 most relevant products
2025-05-13 16:19:40,568 - DealFinderAI.Controller - INFO - eBay returned 5 products
2025-05-13 16:19:40,568 - DealFinderAI.Controller - INFO - Total products before aggregation: 10
2025-05-13 16:19:40,569 - DealFinderAI.ResultsAggregatorAgent - INFO - Aggregating results for query: find me best deal on sony headphones
2025-05-13 16:19:40,569 - DealFinderAI.ResultsAggregatorAgent - INFO - Found 3 results from various sources
2025-05-13 16:19:40,569 - DealFinderAI.ResultsAggregatorAgent - INFO - Source Amazon: 5 products
2025-05-13 16:19:40,569 - DealFinderAI.ResultsAggregatorAgent - INFO - Source Walmart: 0 products
2025-05-13 16:19:40,569 - DealFinderAI.ResultsAggregatorAgent - INFO - Source eBay: 5 products
2025-05-13 16:19:40,569 - DealFinderAI.ResultsAggregatorAgent - INFO - Total products extracted: 10
2025-05-13 16:19:40,570 - DealFinderAI.ResultsAggregatorAgent - INFO - Ranking 10 products
2025-05-13 16:19:40,570 - DealFinderAI.ResultsAggregatorAgent - INFO - Sorted 10 products by score
2025-05-13 16:19:40,570 - DealFinderAI.ResultsAggregatorAgent - INFO - Returning 10 diversified products
2025-05-13 16:19:40,570 - DealFinderAI.ResultsAggregatorAgent - INFO - Products after ranking: 10
2025-05-13 16:19:40,570 - DealFinderAI.ResultsAggregatorAgent - INFO - Final products: 10
2025-05-13 16:19:40,570 - DealFinderAI.Controller - INFO - Products after aggregation: 10
2025-05-13 16:19:40,570 - DealFinderAI.ProductComparisonAgent - INFO - Comparing products for query: find me best deal on sony headphones
2025-05-13 16:19:40,570 - DealFinderAI.ProductComparisonAgent - INFO - Found 10 products to compare
2025-05-13 16:19:40,571 - DealFinderAI.ProductComparisonAgent - INFO - Grouping 10 products
2025-05-13 16:19:40,571 - DealFinderAI.ProductComparisonAgent - INFO - Created 1 product groups
2025-05-13 16:19:40,571 - DealFinderAI.ProductComparisonAgent - INFO - Analyzing product group with 5 items
2025-05-13 16:19:40,571 - DealFinderAI.ProductComparisonAgent - INFO - Best deal: Replacement Ear Pads Cushion For Sony WH-1000XM3 WH-1000XM4 WH-1000XM5 Headphone at $10.78
2025-05-13 16:19:40,572 - DealFinderAI.ProductComparisonAgent - INFO - Savings: $1.48 (12.1%)
2025-05-13 16:19:40,572 - DealFinderAI.ChatMemoryAgent - INFO - Storing context for conversation session_20250513161835_b2c44a63
2025-05-13 16:19:40,572 - DealFinderAI.ChatMemoryAgent - INFO - Storing 10 products for conversation session_20250513161835_b2c44a63
2025-05-13 16:19:40,572 - DealFinderAI.PresentationAgent - INFO - Preparing presentation for 10 products
2025-05-13 16:19:40,573 - DealFinderAI.ChatMemoryAgent - INFO - Storing context for conversation session_20250513161835_b2c44a63
2025-05-13 16:19:40,573 - DealFinderAI.ChatMemoryAgent - INFO - Storing 10 products for conversation session_20250513161835_b2c44a63
2025-05-13 16:19:40,573 - DealFinderAI.Controller - INFO - Successfully stored search results in memory
2025-05-13 16:20:21,584 - DealFinderAI.Controller - INFO - Processing user query: iphone 14
2025-05-13 16:20:21,585 - DealFinderAI.ChatMemoryAgent - INFO - Analyzing query: 'iphone 14' for conversation session_20250513161835_b2c44a63
2025-05-13 16:20:21,585 - DealFinderAI.ChatMemoryAgent - INFO - Found 10 products in memory
2025-05-13 16:20:21,586 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: 
        You are an AI helping to analyze if a user's query is a follow-up question about previously shown products, or if it's a completely new search.

        Previous products shown to the user:
        Product 1: WHCH720N Wireless Over The Ear Noise Canceling Headphones with 2 Microphones and Alexa Voice Control (Black)
Product 2: Replacement Ear Pads Cushion For Sony WH-1000XM3 WH-1000XM4 WH-1000XM5 Headphone
Product 3: WF-C500 True Wireless Headphones - Up to 20 Hours Battery - Charging case - Voice Assistant Compatible - Built-in mic for Phone Calls - Reliable Bluetooth - Black
Product 4: Sony WF-1000XM3 True Wireless Bluetooth Noise Canceling in-Ear Headphones Black (Renewed)
Product 5: SONY WH-H900N h.Ear on 2 Wireless Over-Ear Noise Cancelling High Resolution Headphones (Black/Grey) (Renewed)

        User's new query: "iphone 14"

        Please analyze if this query is:
        1. A follow-up question about the previously shown products (e.g., asking for more details, comparing them, etc.)
        2. A completely new search (e.g., asking about different products, starting a new topic)

        Return your analysis in JSON format:
        {
            "is_new_search": true/false,
            "is_follow_up": true/false,
            "reasoning": "brief explanation of your decision",
            "referenced_product_indices": [list of 0-based indices of referenced products, if any]
        }
        
        Only return the JSON, with no additional text.
        
2025-05-13 16:20:23,288 - DealFinderAI.Controller - INFO - Analyze response: {'is_follow_up': False, 'focused_product': None, 'referenced_products': [], 'products': []}
2025-05-13 16:20:23,289 - DealFinderAI.Controller - INFO - Is follow-up? False
2025-05-13 16:20:23,289 - DealFinderAI.Controller - INFO - Referenced products: 0
2025-05-13 16:20:23,289 - DealFinderAI.Controller - INFO - Processing as new search query
2025-05-13 16:20:23,289 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: iphone 14
2025-05-13 16:20:24,019 - DealFinderAI.GeminiAgent - WARNING - Failed to parse Gemini response as JSON: ```json
{
  "product_type": "Smartphones",
  "keywords": ["iphone", "14"],
  "price_range": null,
  "brands": ["Apple"],
  "features": [],
  "sorting_preference": null,
  "buy_it_now": true
}
```

2025-05-13 16:20:24,019 - DealFinderAI.Controller - INFO - Parsed search parameters: {'product_type': 'Smartphones', 'keywords': ['iphone', '14'], 'price_range': None, 'brands': ['Apple'], 'features': [], 'sorting_preference': None, 'buy_it_now': True}
2025-05-13 16:20:24,020 - DealFinderAI.AmazonScraperAgent - INFO - Searching Amazon for: {'product_type': 'Smartphones', 'keywords': ['iphone', '14'], 'price_range': None, 'brands': ['Apple'], 'features': [], 'sorting_preference': None, 'buy_it_now': True}
2025-05-13 16:20:24,020 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: 
            Optimize this search query for Amazon's search engine:
            
            "Smartphones iphone 14 Apple"
            
            For Amazon searches, please:
            1. Focus on product-specific model numbers and identifiers if present
            2. Include key brand names (Amazon's A9 algorithm prioritizes brand matches)
            3. Remove generic words that may dilute results
            4. Add Amazon-specific terms that might improve results (like "Amazon's Choice" if looking for quality products)
            5. Optimize for Amazon's search algorithm which prioritizes exact matches and recent sales volume
            
            Return a JSON object with:
            - optimized_keywords: List of 3-5 optimized search terms (most important first)
            - amazon_category: Any Amazon department/category suggestion (Electronics, Books, etc.)
            - must_include_terms: Terms that MUST be in results
            - exclude_terms: Terms that should NOT be in results
            - amazon_search_filters: Any Amazon-specific filters to apply (Prime eligible, etc.)
            
            Format as JSON only with no explanation.
            
2025-05-13 16:20:24,860 - DealFinderAI.AmazonScraperAgent - INFO - Optimized search parameters: {'product_type': 'Smartphones', 'keywords': ['iPhone 14', 'Apple iPhone 14', 'iPhone 14 Pro Max'], 'price_range': None, 'brands': ['Apple'], 'features': [], 'sorting_preference': None, 'buy_it_now': True, 'category': 'Electronics', 'must_include_terms': ['Apple', 'iPhone 14'], 'exclude_terms': ['smartphones'], 'amazon_filters': ['Prime Eligible', 'New']}
2025-05-13 16:20:24,860 - DealFinderAI.AmazonScraperAgent - INFO - Built optimized Amazon search query: Apple Smartphones iPhone 14 Apple iPhone 14 iPhone 14 Pro Max
2025-05-13 16:20:24,860 - DealFinderAI.AmazonScraperAgent - INFO - Built Amazon query: Apple Smartphones iPhone 14 Apple iPhone 14 iPhone 14 Pro Max
2025-05-13 16:20:24,861 - DealFinderAI.AmazonScraperAgent - INFO - Making Amazon search request with params: {'k': 'Apple Smartphones iPhone 14 Apple iPhone 14 iPhone 14 Pro Max', 'ref': 'nb_sb_noss', 'crid': 1747167624, 'i': 'aps', 'search-alias': 'electronics'}
2025-05-13 16:20:26,931 - DealFinderAI.AmazonScraperAgent - INFO - Found 33 product divs in search results
2025-05-13 16:20:26,936 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: I16 PROMAX 5G Phone,Smartphone Unlocked Cell Phone 8GB+256GB/6.99 HD Screen Display/68MP+108MP Camera/7000 mAh, Dual SIM Card/Face Unlock/Fingerprint Button Unlock-and take Photos (White) at 179.99 USD
2025-05-13 16:20:26,936 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: I16 PROMAX 5G Phone,Smartphone Unlocked Cell Phone 8GB+256GB/6.99 HD Screen Display/68MP+108MP Camera/7000 mAh, Dual SIM Card/Face Unlock/Fingerprint Button Unlock-and take Photos (White) at 179.99 USD
2025-05-13 16:20:26,940 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Apple iPhone 14 Pro Max, 256GB, Space Black - Unlocked (Renewed Premium) at 739.97 USD
2025-05-13 16:20:26,940 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Apple iPhone 14 Pro Max, 256GB, Space Black - Unlocked (Renewed Premium) at 739.97 USD
2025-05-13 16:20:26,944 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Apple iPhone 14 Pro, 128GB, Space Black - Unlocked (Renewed) at 489.0 USD
2025-05-13 16:20:26,944 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Apple iPhone 14 Pro, 128GB, Space Black - Unlocked (Renewed) at 489.0 USD
2025-05-13 16:20:26,949 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Apple iPhone 14, 128GB, Purple - Unlocked (Renewed) at 364.95 USD
2025-05-13 16:20:26,949 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Apple iPhone 14, 128GB, Purple - Unlocked (Renewed) at 364.95 USD
2025-05-13 16:20:26,954 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Apple iPhone 14 Plus, 128GB, Purple - Unlocked (Renewed) at 404.99 USD
2025-05-13 16:20:26,954 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Apple iPhone 14 Plus, 128GB, Purple - Unlocked (Renewed) at 404.99 USD
2025-05-13 16:20:26,958 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Apple iPhone 14 Pro Max, 128GB, Deep Purple for AT&T (Renewed) at 487.05 USD
2025-05-13 16:20:26,958 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Apple iPhone 14 Pro Max, 128GB, Deep Purple for AT&T (Renewed) at 487.05 USD
2025-05-13 16:20:26,963 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Apple iPhone 15 Pro Max, 256GB, White Titanium - Unlocked (Renewed) at 794.54 USD
2025-05-13 16:20:26,963 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Apple iPhone 15 Pro Max, 256GB, White Titanium - Unlocked (Renewed) at 794.54 USD
2025-05-13 16:20:26,966 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Apple iPhone 14 Pro, 256GB, Space Black - Unlocked (Renewed Premium) at 634.29 USD
2025-05-13 16:20:26,966 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Apple iPhone 14 Pro, 256GB, Space Black - Unlocked (Renewed Premium) at 634.29 USD
2025-05-13 16:20:26,969 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Apple iPhone 14 Plus, 256GB, Midnight - Unlocked (Renewed) at 444.95 USD
2025-05-13 16:20:26,969 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Apple iPhone 14 Plus, 256GB, Midnight - Unlocked (Renewed) at 444.95 USD
2025-05-13 16:20:26,974 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Apple iPhone 13 Pro Max, 512GB, Graphite - Unlocked (Renewed) at 579.95 USD
2025-05-13 16:20:26,974 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Apple iPhone 13 Pro Max, 512GB, Graphite - Unlocked (Renewed) at 579.95 USD
2025-05-13 16:20:27,711 - DealFinderAI.AmazonScraperAgent - INFO - Extracted 10 products from Amazon
2025-05-13 16:20:27,711 - DealFinderAI.AmazonScraperAgent - INFO - Applying relevance filtering to 10 products
2025-05-13 16:20:27,711 - DealFinderAI.AmazonScraperAgent - INFO - Filtered to 5 most relevant products
2025-05-13 16:20:27,711 - DealFinderAI.Controller - INFO - Amazon response content: {'source': 'Amazon', 'query': 'Apple Smartphones iPhone 14 Apple iPhone 14 iPhone 14 Pro Max', 'products': [{'title': 'Apple iPhone 14 Pro Max, 256GB, Space Black - Unlocked (Renewed Premium)', 'price': 739.97, 'was_price': None, 'currency': 'USD', 'url': 'https://www.amazon.com/Apple-iPhone-14-Pro-Max/dp/B0BYLZV28Y/ref=sr_1_2?crid=1747167624&dib=eyJ2IjoiMSJ9.Q0hhlHpgI_uA4M6-2JgqnL7soXTm1aaQD3RQ6Sgf_0dXJitxz8uZ7rhGbq8Yej9f8yIkpnrga-SQjdetUJtqqFEjVUSFCc0CX4zPR7JeBQXOhhgs5dUDQg7YxqOlX_-5CtCpt6LjDHHjvn5I-pc7kiyNu_sGWFyGSLk5Bt6a7Q1WUfrJ_scWBur-_fQZpiky_65rjuDkJ4i2Orfx3rJyuyjarKPDXXOpGxdcgp4KHHbSyTnx1e3leIMhw0Z46rxNaZcPJ0QM53l1lgjABlxh2Ja3eX5ydrOf1br-Q1mHaTM.dho_Po7xfZzYhjwZMGcwidb8njzTztFRGhKKZLHaMyw&dib_tag=se&keywords=Apple+Smartphones+iPhone+14+Apple+iPhone+14+iPhone+14+Pro+Max&qid=1747167625&s=electronics&sr=1-2', 'image_url': 'https://m.media-amazon.com/images/I/51uD1lmrV8L._AC_UL320_.jpg', 'rating': 4.3, 'reviews': 694, 'is_sponsored': False, 'is_prime': True, 'is_amazon_choice': False, 'is_best_seller': False, 'asin': 'B0BYLZV28Y', 'description': 'Apple iPhone 14 Pro Max, 256GB, Space Black - Unlocked (Renewed Premium) Options:4 sizesTop Reviewed for Functionality4.3 out of 5 stars 694 100+ bought in past monthPrice, product page$739.97$739.97 FREE delivery Thu, May 15 Only 12 left in stock - order soon.See options', 'delivery_info': '100+ bought in past month', 'out_of_stock': False, 'source': 'Amazon', 'relevance_score': 38}, {'title': 'Apple iPhone 14 Plus, 128GB, Purple - Unlocked (Renewed)', 'price': 404.99, 'was_price': None, 'currency': 'USD', 'url': 'https://www.amazon.com/Apple-iPhone-Plus-128GB-Purple/dp/B0BN9RKQL7/ref=sr_1_5?crid=1747167624&dib=eyJ2IjoiMSJ9.Q0hhlHpgI_uA4M6-2JgqnL7soXTm1aaQD3RQ6Sgf_0dXJitxz8uZ7rhGbq8Yej9f8yIkpnrga-SQjdetUJtqqFEjVUSFCc0CX4zPR7JeBQXOhhgs5dUDQg7YxqOlX_-5CtCpt6LjDHHjvn5I-pc7kiyNu_sGWFyGSLk5Bt6a7Q1WUfrJ_scWBur-_fQZpiky_65rjuDkJ4i2Orfx3rJyuyjarKPDXXOpGxdcgp4KHHbSyTnx1e3leIMhw0Z46rxNaZcPJ0QM53l1lgjABlxh2Ja3eX5ydrOf1br-Q1mHaTM.dho_Po7xfZzYhjwZMGcwidb8njzTztFRGhKKZLHaMyw&dib_tag=se&keywords=Apple+Smartphones+iPhone+14+Apple+iPhone+14+iPhone+14+Pro+Max&qid=1747167625&s=electronics&sr=1-5', 'image_url': 'https://m.media-amazon.com/images/I/61KXZ+vfu3L._AC_UL320_.jpg', 'rating': 4.1, 'reviews': 2298, 'is_sponsored': False, 'is_prime': False, 'is_amazon_choice': False, 'is_best_seller': False, 'asin': 'B0BN9RKQL7', 'description': 'Apple iPhone 14 Plus, 128GB, Purple - Unlocked (Renewed) Top Reviewed for Functionality4.1 out of 5 stars 2,298 500+ bought in past monthPrice, product page$404.99$404.99FREE delivery Fri, May 16 Or fastest delivery Thu, May 15 Only 1 left in stock - order soon.See optionsMore Buying Choices$349.65(21+ used & new offers)', 'delivery_info': '500+ bought in past month', 'out_of_stock': False, 'source': 'Amazon', 'relevance_score': 35}, {'title': 'Apple iPhone 14 Pro, 256GB, Space Black - Unlocked (Renewed Premium)', 'price': 634.29, 'was_price': None, 'currency': 'USD', 'url': 'https://www.amazon.com/Apple-iPhone-14-Pro-256GB/dp/B0BYLM8RRW/ref=sr_1_8?crid=1747167624&dib=eyJ2IjoiMSJ9.Q0hhlHpgI_uA4M6-2JgqnL7soXTm1aaQD3RQ6Sgf_0dXJitxz8uZ7rhGbq8Yej9f8yIkpnrga-SQjdetUJtqqFEjVUSFCc0CX4zPR7JeBQXOhhgs5dUDQg7YxqOlX_-5CtCpt6LjDHHjvn5I-pc7kiyNu_sGWFyGSLk5Bt6a7Q1WUfrJ_scWBur-_fQZpiky_65rjuDkJ4i2Orfx3rJyuyjarKPDXXOpGxdcgp4KHHbSyTnx1e3leIMhw0Z46rxNaZcPJ0QM53l1lgjABlxh2Ja3eX5ydrOf1br-Q1mHaTM.dho_Po7xfZzYhjwZMGcwidb8njzTztFRGhKKZLHaMyw&dib_tag=se&keywords=Apple+Smartphones+iPhone+14+Apple+iPhone+14+iPhone+14+Pro+Max&qid=1747167625&s=electronics&sr=1-8', 'image_url': 'https://m.media-amazon.com/images/I/41al5-lNvML._AC_UL320_.jpg', 'rating': 4.2, 'reviews': 1084, 'is_sponsored': False, 'is_prime': False, 'is_amazon_choice': False, 'is_best_seller': False, 'asin': 'B0BYLM8RRW', 'description': 'Apple iPhone 14 Pro, 256GB, Space Black - Unlocked (Renewed Premium) Options:4 sizesTop Reviewed for Functionality4.2 out of 5 stars 1,084 100+ bought in past monthPrice, product page$634.29$634.29FREE delivery Thu, May 15 See options', 'delivery_info': '100+ bought in past month', 'out_of_stock': False, 'source': 'Amazon', 'relevance_score': 35}, {'title': 'Apple iPhone 14 Pro, 128GB, Space Black - Unlocked (Renewed)', 'price': 489.0, 'was_price': None, 'currency': 'USD', 'url': 'https://www.amazon.com/Apple-iPhone-14-Pro-128GB/dp/B0BN95FRW9/ref=sr_1_3?crid=1747167624&dib=eyJ2IjoiMSJ9.Q0hhlHpgI_uA4M6-2JgqnL7soXTm1aaQD3RQ6Sgf_0dXJitxz8uZ7rhGbq8Yej9f8yIkpnrga-SQjdetUJtqqFEjVUSFCc0CX4zPR7JeBQXOhhgs5dUDQg7YxqOlX_-5CtCpt6LjDHHjvn5I-pc7kiyNu_sGWFyGSLk5Bt6a7Q1WUfrJ_scWBur-_fQZpiky_65rjuDkJ4i2Orfx3rJyuyjarKPDXXOpGxdcgp4KHHbSyTnx1e3leIMhw0Z46rxNaZcPJ0QM53l1lgjABlxh2Ja3eX5ydrOf1br-Q1mHaTM.dho_Po7xfZzYhjwZMGcwidb8njzTztFRGhKKZLHaMyw&dib_tag=se&keywords=Apple+Smartphones+iPhone+14+Apple+iPhone+14+iPhone+14+Pro+Max&qid=1747167625&s=electronics&sr=1-3', 'image_url': 'https://m.media-amazon.com/images/I/61XO4bORHUL._AC_UL320_.jpg', 'rating': 4.0, 'reviews': 3217, 'is_sponsored': False, 'is_prime': False, 'is_amazon_choice': False, 'is_best_seller': False, 'asin': 'B0BN95FRW9', 'description': 'Apple iPhone 14 Pro, 128GB, Space Black - Unlocked (Renewed) Options:4 sizesTop Reviewed for Functionality4.0 out of 5 stars 3,217 500+ bought in past monthPrice, product page$489.00$489.00FREE delivery Thu, May 15 Or fastest delivery Tomorrow, May 14 Only 3 left in stock - order soon.See optionsMore Buying Choices$446.78(22+ used & new offers)', 'delivery_info': '500+ bought in past month', 'out_of_stock': False, 'source': 'Amazon', 'relevance_score': 32}, {'title': 'Apple iPhone 14, 128GB, Purple - Unlocked (Renewed)', 'price': 364.95, 'was_price': 389.0, 'currency': 'USD', 'url': 'https://www.amazon.com/Apple-iPhone-14-128GB-Purple/dp/B0BN71VW28/ref=sr_1_4?crid=1747167624&dib=eyJ2IjoiMSJ9.Q0hhlHpgI_uA4M6-2JgqnL7soXTm1aaQD3RQ6Sgf_0dXJitxz8uZ7rhGbq8Yej9f8yIkpnrga-SQjdetUJtqqFEjVUSFCc0CX4zPR7JeBQXOhhgs5dUDQg7YxqOlX_-5CtCpt6LjDHHjvn5I-pc7kiyNu_sGWFyGSLk5Bt6a7Q1WUfrJ_scWBur-_fQZpiky_65rjuDkJ4i2Orfx3rJyuyjarKPDXXOpGxdcgp4KHHbSyTnx1e3leIMhw0Z46rxNaZcPJ0QM53l1lgjABlxh2Ja3eX5ydrOf1br-Q1mHaTM.dho_Po7xfZzYhjwZMGcwidb8njzTztFRGhKKZLHaMyw&dib_tag=se&keywords=Apple+Smartphones+iPhone+14+Apple+iPhone+14+iPhone+14+Pro+Max&qid=1747167625&s=electronics&sr=1-4', 'image_url': 'https://m.media-amazon.com/images/I/618SeQGaMpL._AC_UL320_.jpg', 'rating': 4.0, 'reviews': 4851, 'is_sponsored': False, 'is_prime': False, 'is_amazon_choice': False, 'is_best_seller': False, 'asin': 'B0BN71VW28', 'description': '+4Apple iPhone 14, 128GB, Purple - Unlocked (Renewed) Options:4 sizesTop Reviewed for Functionality4.0 out of 5 stars 4,851 2K+ bought in past monthPrice, product page$364.95$364.95 List Price: $389.00List Price: $389.00$389.00FREE delivery Fri, May 16 Only 1 left in stock - order soon.See optionsMore Buying Choices$319.00(30+ used & new offers)', 'delivery_info': '2K+ bought in past month', 'out_of_stock': False, 'source': 'Amazon', 'relevance_score': 32}]}
2025-05-13 16:20:27,711 - DealFinderAI.Controller - INFO - Amazon returned 5 products
2025-05-13 16:20:27,711 - DealFinderAI.WalmartScraperAgent - INFO - Searching Walmart for: {'product_type': 'Smartphones', 'keywords': ['iphone', '14'], 'price_range': None, 'brands': ['Apple'], 'features': [], 'sorting_preference': None, 'buy_it_now': True}
2025-05-13 16:20:27,712 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: 
            Optimize this search query for Walmart's search engine:
            
            "Smartphones iphone 14 Apple"
            
            For Walmart searches, please:
            1. Focus on model numbers and specific identifiers if present
            2. Include key brand names (Walmart's search works well with brand names)
            3. Remove generic words that may dilute results
            4. Add Walmart-specific terms that might improve results (like "Rollback" if looking for deals)
            5. Prioritize precise product names and specifications
            
            Return a JSON object with:
            - optimized_keywords: List of 3-5 optimized search terms (most important first)
            - department_hint: Any Walmart department suggestion (Electronics, Home, etc.)
            - must_include_terms: Terms that MUST be in results
            - exclude_terms: Terms that should NOT be in results
            - walmart_specific_filters: Any Walmart-specific filters to apply
            
            Format as JSON only with no explanation.
            
2025-05-13 16:20:29,516 - DealFinderAI.WalmartScraperAgent - INFO - Optimized search parameters: {'product_type': 'Smartphones', 'keywords': ['iPhone 14', 'Apple iPhone 14', 'iPhone 14 Pro Max', 'Apple iPhone 14 Pro'], 'price_range': None, 'brands': ['Apple'], 'features': [], 'sorting_preference': None, 'buy_it_now': True, 'department': 'Electronics', 'must_include_terms': ['Apple', 'iPhone 14'], 'exclude_terms': ['smartphones'], 'walmart_filters': ['Rollback', 'Free Shipping']}
2025-05-13 16:20:29,516 - DealFinderAI.WalmartScraperAgent - INFO - Built optimized Walmart search query: Apple Smartphones iPhone 14 Apple iPhone 14 iPhone 14 Pro Max
2025-05-13 16:20:29,517 - DealFinderAI.WalmartScraperAgent - INFO - Built Walmart query: Apple Smartphones iPhone 14 Apple iPhone 14 iPhone 14 Pro Max
2025-05-13 16:20:29,518 - DealFinderAI.WalmartScraperAgent - INFO - Making Walmart search request with params: {'q': 'Apple Smartphones iPhone 14 Apple iPhone 14 iPhone 14 Pro Max Electronics', 'page': 1, 'affinityOverride': 'default'}
2025-05-13 16:20:30,000 - DealFinderAI.WalmartScraperAgent - INFO - Extracted 0 products from JSON data
2025-05-13 16:20:30,001 - DealFinderAI.WalmartScraperAgent - INFO - JSON extraction failed, falling back to HTML extraction
2025-05-13 16:20:30,003 - DealFinderAI.WalmartScraperAgent - INFO - Found 0 product divs in HTML
2025-05-13 16:20:30,003 - DealFinderAI.WalmartScraperAgent - INFO - Extracted 0 products from HTML
2025-05-13 16:20:31,179 - DealFinderAI.WalmartScraperAgent - INFO - Extracted 0 products from Walmart
2025-05-13 16:20:31,180 - DealFinderAI.Controller - INFO - Walmart returned 0 products
2025-05-13 16:20:31,181 - DealFinderAI.EbayScraperAgent - INFO - Searching eBay for: {'product_type': 'Smartphones', 'keywords': ['iphone', '14'], 'price_range': None, 'brands': ['Apple'], 'features': [], 'sorting_preference': None, 'buy_it_now': True}
2025-05-13 16:20:31,181 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: 
            Optimize this search query for eBay's search engine:
            
            "Smartphones iphone 14 Apple"
            
            For eBay searches, please:
            1. Focus on exact model numbers and specific part identifiers if present
            2. Include key brand names
            3. Remove generic words that may dilute results
            4. Add eBay-specific terms that might improve results
            5. Optimize for finding the most relevant listings
            
            Return a JSON object with:
            - optimized_keywords: List of 3-5 optimized search terms (most important first)
            - category_hints: Any eBay category suggestions
            - must_include_terms: Terms that MUST be in results
            - exclude_terms: Terms that should NOT be in results
            
            Format as JSON only with no explanation.
            
2025-05-13 16:20:32,171 - DealFinderAI.EbayScraperAgent - INFO - Optimized search parameters: {'product_type': 'Smartphones', 'keywords': ['iPhone 14', 'iPhone 14 Pro Max', 'iPhone 14 Pro', 'Apple iPhone 14'], 'price_range': None, 'brands': ['Apple'], 'features': [], 'sorting_preference': None, 'buy_it_now': True, 'category_hints': ['Cell Phones & Smartphones'], 'must_include_terms': ['Apple', 'iPhone 14'], 'exclude_terms': ['broken', 'repair', 'parts']}
2025-05-13 16:20:32,172 - DealFinderAI.EbayScraperAgent - INFO - Built optimized eBay search query: Smartphones Apple iPhone 14 iPhone 14 Pro Max iPhone 14 Pro
2025-05-13 16:20:32,172 - DealFinderAI.EbayScraperAgent - INFO - Built eBay query: Smartphones Apple iPhone 14 iPhone 14 Pro Max iPhone 14 Pro
2025-05-13 16:20:32,173 - DealFinderAI.EbayScraperAgent - INFO - Making eBay search request with params: {'_nkw': 'Smartphones Apple iPhone 14 iPhone 14 Pro Max iPhone 14 Pro Cell Phones & Smartphones', '_sacat': '0', '_ipg': '96', 'LH_BIN': '1'}
2025-05-13 16:20:34,097 - DealFinderAI.EbayScraperAgent - INFO - Found 127 product listings
2025-05-13 16:20:34,099 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 14 Pro Max 256GB Network Unlocked Excellent Condition at 624.99 USD
2025-05-13 16:20:34,099 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 14 Pro Max 256GB Network Unlocked Excellent Condition at 624.99 USD
2025-05-13 16:20:34,100 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 14 Pro Max 128GB Unlocked Good Condition - All Colors at 569.99 USD
2025-05-13 16:20:34,100 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 14 Pro Max 128GB Unlocked Good Condition - All Colors at 569.99 USD
2025-05-13 16:20:34,101 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 14 Pro Max 512GB Unlocked Very Good Condition - All Colors at 699.99 USD
2025-05-13 16:20:34,101 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 14 Pro Max 512GB Unlocked Very Good Condition - All Colors at 699.99 USD
2025-05-13 16:20:34,103 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 11 Pro Max 256GB Unlocked Fair Condition - All Colors at 259.99 USD
2025-05-13 16:20:34,103 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 11 Pro Max 256GB Unlocked Fair Condition - All Colors at 259.99 USD
2025-05-13 16:20:34,104 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 14 Pro Max 256GB Unlocked Very Good Condition at 569.99 USD
2025-05-13 16:20:34,104 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 14 Pro Max 256GB Unlocked Very Good Condition at 569.99 USD
2025-05-13 16:20:34,105 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 14 Pro Max (128 GB), Silver, Unlocked at 550.0 USD
2025-05-13 16:20:34,105 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 14 Pro Max (128 GB), Silver, Unlocked at 550.0 USD
2025-05-13 16:20:34,106 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: iphone 14 pro max unlocked 128gb Deep Purple MQ8R3LL/A at 500.0 USD
2025-05-13 16:20:34,106 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: iphone 14 pro max unlocked 128gb Deep Purple MQ8R3LL/A at 500.0 USD
2025-05-13 16:20:34,106 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: PRISTINE IPHONE 14 PRO MAX!!! WITH EXTRAS!!! at 575.0 USD
2025-05-13 16:20:34,106 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: PRISTINE IPHONE 14 PRO MAX!!! WITH EXTRAS!!! at 575.0 USD
2025-05-13 16:20:34,755 - DealFinderAI.EbayScraperAgent - INFO - Extracted 8 products from eBay
2025-05-13 16:20:34,756 - DealFinderAI.EbayScraperAgent - INFO - Applying relevance filtering to 8 products
2025-05-13 16:20:34,756 - DealFinderAI.EbayScraperAgent - INFO - Filtered to 5 most relevant products
2025-05-13 16:20:34,756 - DealFinderAI.Controller - INFO - eBay returned 5 products
2025-05-13 16:20:34,757 - DealFinderAI.Controller - INFO - Total products before aggregation: 10
2025-05-13 16:20:34,757 - DealFinderAI.ResultsAggregatorAgent - INFO - Aggregating results for query: iphone 14
2025-05-13 16:20:34,757 - DealFinderAI.ResultsAggregatorAgent - INFO - Found 3 results from various sources
2025-05-13 16:20:34,757 - DealFinderAI.ResultsAggregatorAgent - INFO - Source Amazon: 5 products
2025-05-13 16:20:34,757 - DealFinderAI.ResultsAggregatorAgent - INFO - Source Walmart: 0 products
2025-05-13 16:20:34,757 - DealFinderAI.ResultsAggregatorAgent - INFO - Source eBay: 5 products
2025-05-13 16:20:34,757 - DealFinderAI.ResultsAggregatorAgent - INFO - Total products extracted: 10
2025-05-13 16:20:34,757 - DealFinderAI.ResultsAggregatorAgent - INFO - Ranking 10 products
2025-05-13 16:20:34,757 - DealFinderAI.ResultsAggregatorAgent - INFO - Sorted 10 products by score
2025-05-13 16:20:34,758 - DealFinderAI.ResultsAggregatorAgent - INFO - Returning 10 diversified products
2025-05-13 16:20:34,758 - DealFinderAI.ResultsAggregatorAgent - INFO - Products after ranking: 10
2025-05-13 16:20:34,758 - DealFinderAI.ResultsAggregatorAgent - INFO - Final products: 10
2025-05-13 16:20:34,758 - DealFinderAI.Controller - INFO - Products after aggregation: 10
2025-05-13 16:20:34,758 - DealFinderAI.ProductComparisonAgent - INFO - Comparing products for query: iphone 14
2025-05-13 16:20:34,758 - DealFinderAI.ProductComparisonAgent - INFO - Found 10 products to compare
2025-05-13 16:20:34,758 - DealFinderAI.ProductComparisonAgent - INFO - Grouping 10 products
2025-05-13 16:20:34,759 - DealFinderAI.ProductComparisonAgent - INFO - Created 0 product groups
2025-05-13 16:20:34,759 - DealFinderAI.ChatMemoryAgent - INFO - Storing context for conversation session_20250513161835_b2c44a63
2025-05-13 16:20:34,759 - DealFinderAI.ChatMemoryAgent - INFO - Storing 10 products for conversation session_20250513161835_b2c44a63
2025-05-13 16:20:34,759 - DealFinderAI.PresentationAgent - INFO - Preparing presentation for 10 products
2025-05-13 16:20:34,759 - DealFinderAI.PresentationAgent - INFO - Formatting 10 products for display
2025-05-13 16:20:34,759 - DealFinderAI.PresentationAgent - INFO - Product 1: Apple iPhone 14 Pro Max, 256GB, Space Black - Unlocked (Renewed Premium) - Price: $739.97 - Source: Amazon
2025-05-13 16:20:34,759 - DealFinderAI.PresentationAgent - INFO - Product 2: Apple iPhone 14 Pro Max 256GB Network Unlocked Excellent Condition - Price: $624.99 - Source: eBay
2025-05-13 16:20:34,759 - DealFinderAI.PresentationAgent - INFO - Product 3: Apple iPhone 14 Pro, 256GB, Space Black - Unlocked (Renewed Premium) - Price: $634.29 - Source: Amazon
2025-05-13 16:20:34,760 - DealFinderAI.PresentationAgent - INFO - Product 4: Apple iPhone 14 Plus, 128GB, Purple - Unlocked (Renewed) - Price: $404.99 - Source: Amazon
2025-05-13 16:20:34,760 - DealFinderAI.PresentationAgent - INFO - Product 5: Apple iPhone 14 Pro, 128GB, Space Black - Unlocked (Renewed) - Price: $489.00 - Source: Amazon
2025-05-13 16:20:34,760 - DealFinderAI.PresentationAgent - INFO - Product 6: Apple iPhone 14, 128GB, Purple - Unlocked (Renewed) - Price: $364.95 - Source: Amazon
2025-05-13 16:20:34,760 - DealFinderAI.PresentationAgent - INFO - Product 7: Apple iPhone 14 Pro Max 128GB Unlocked Good Condition - All Colors - Price: $569.99 - Source: eBay
2025-05-13 16:20:34,760 - DealFinderAI.PresentationAgent - INFO - Product 8: Apple iPhone 14 Pro Max 512GB Unlocked Very Good Condition - All Colors - Price: $699.99 - Source: eBay
2025-05-13 16:20:34,760 - DealFinderAI.PresentationAgent - INFO - Product 9: Apple iPhone 14 Pro Max 256GB Unlocked Very Good Condition - Price: $569.99 - Source: eBay
2025-05-13 16:20:34,761 - DealFinderAI.PresentationAgent - INFO - Product 10: Apple iPhone 14 Pro Max (128 GB), Silver, Unlocked - Price: $550.00 - Source: eBay
2025-05-13 16:20:34,761 - DealFinderAI.ChatMemoryAgent - INFO - Storing context for conversation session_20250513161835_b2c44a63
2025-05-13 16:20:34,761 - DealFinderAI.ChatMemoryAgent - INFO - Storing 10 products for conversation session_20250513161835_b2c44a63
2025-05-13 16:20:34,761 - DealFinderAI.Controller - INFO - Successfully stored search results in memory
2025-05-13 16:20:48,292 - DealFinderAI.Controller - INFO - Processing user query: iphone 15
2025-05-13 16:20:48,292 - DealFinderAI.ChatMemoryAgent - INFO - Analyzing query: 'iphone 15' for conversation session_20250513161835_b2c44a63
2025-05-13 16:20:48,292 - DealFinderAI.ChatMemoryAgent - INFO - Found 10 products in memory
2025-05-13 16:20:48,293 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: 
        You are an AI helping to analyze if a user's query is a follow-up question about previously shown products, or if it's a completely new search.

        Previous products shown to the user:
        Product 1: Apple iPhone 14 Pro Max, 256GB, Space Black - Unlocked (Renewed Premium)
Product 2: Apple iPhone 14 Pro Max 256GB Network Unlocked Excellent Condition
Product 3: Apple iPhone 14 Pro, 256GB, Space Black - Unlocked (Renewed Premium)
Product 4: Apple iPhone 14 Plus, 128GB, Purple - Unlocked (Renewed)
Product 5: Apple iPhone 14 Pro, 128GB, Space Black - Unlocked (Renewed)

        User's new query: "iphone 15"

        Please analyze if this query is:
        1. A follow-up question about the previously shown products (e.g., asking for more details, comparing them, etc.)
        2. A completely new search (e.g., asking about different products, starting a new topic)

        Return your analysis in JSON format:
        {
            "is_new_search": true/false,
            "is_follow_up": true/false,
            "reasoning": "brief explanation of your decision",
            "referenced_product_indices": [list of 0-based indices of referenced products, if any]
        }
        
        Only return the JSON, with no additional text.
        
2025-05-13 16:20:49,091 - DealFinderAI.Controller - INFO - Analyze response: {'is_follow_up': False, 'focused_product': None, 'referenced_products': [], 'products': []}
2025-05-13 16:20:49,091 - DealFinderAI.Controller - INFO - Is follow-up? False
2025-05-13 16:20:49,091 - DealFinderAI.Controller - INFO - Referenced products: 0
2025-05-13 16:20:49,092 - DealFinderAI.Controller - INFO - Processing as new search query
2025-05-13 16:20:49,092 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: iphone 15
2025-05-13 16:20:49,862 - DealFinderAI.GeminiAgent - WARNING - Failed to parse Gemini response as JSON: ```json
{
  "product_type": "smartphone",
  "keywords": ["iphone", "15"],
  "price_range": null,
  "brands": ["Apple"],
  "features": [],
  "sorting_preference": null,
  "buy_it_now": true
}
```

2025-05-13 16:20:49,863 - DealFinderAI.Controller - INFO - Parsed search parameters: {'product_type': 'smartphone', 'keywords': ['iphone', '15'], 'price_range': None, 'brands': ['Apple'], 'features': [], 'sorting_preference': None, 'buy_it_now': True}
2025-05-13 16:20:49,864 - DealFinderAI.AmazonScraperAgent - INFO - Searching Amazon for: {'product_type': 'smartphone', 'keywords': ['iphone', '15'], 'price_range': None, 'brands': ['Apple'], 'features': [], 'sorting_preference': None, 'buy_it_now': True}
2025-05-13 16:20:49,864 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: 
            Optimize this search query for Amazon's search engine:
            
            "smartphone iphone 15 Apple"
            
            For Amazon searches, please:
            1. Focus on product-specific model numbers and identifiers if present
            2. Include key brand names (Amazon's A9 algorithm prioritizes brand matches)
            3. Remove generic words that may dilute results
            4. Add Amazon-specific terms that might improve results (like "Amazon's Choice" if looking for quality products)
            5. Optimize for Amazon's search algorithm which prioritizes exact matches and recent sales volume
            
            Return a JSON object with:
            - optimized_keywords: List of 3-5 optimized search terms (most important first)
            - amazon_category: Any Amazon department/category suggestion (Electronics, Books, etc.)
            - must_include_terms: Terms that MUST be in results
            - exclude_terms: Terms that should NOT be in results
            - amazon_search_filters: Any Amazon-specific filters to apply (Prime eligible, etc.)
            
            Format as JSON only with no explanation.
            
2025-05-13 16:20:51,180 - DealFinderAI.AmazonScraperAgent - INFO - Optimized search parameters: {'product_type': 'smartphone', 'keywords': ['iPhone 15', 'Apple iPhone 15', 'iPhone 15 Pro'], 'price_range': None, 'brands': ['Apple'], 'features': [], 'sorting_preference': None, 'buy_it_now': True, 'category': 'Electronics', 'must_include_terms': ['Apple', 'iPhone 15'], 'exclude_terms': ['smartphone'], 'amazon_filters': ['Prime Eligible', 'New']}
2025-05-13 16:20:51,181 - DealFinderAI.AmazonScraperAgent - INFO - Built optimized Amazon search query: Apple smartphone iPhone 15 Apple iPhone 15 iPhone 15 Pro
2025-05-13 16:20:51,181 - DealFinderAI.AmazonScraperAgent - INFO - Built Amazon query: Apple smartphone iPhone 15 Apple iPhone 15 iPhone 15 Pro
2025-05-13 16:20:51,181 - DealFinderAI.AmazonScraperAgent - INFO - Making Amazon search request with params: {'k': 'Apple smartphone iPhone 15 Apple iPhone 15 iPhone 15 Pro', 'ref': 'nb_sb_noss', 'crid': 1747167651, 'i': 'aps', 'search-alias': 'electronics'}
2025-05-13 16:20:53,179 - DealFinderAI.AmazonScraperAgent - INFO - Found 24 product divs in search results
2025-05-13 16:20:53,183 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Apple iPhone 15 Pro, 128GB, Blue Titanium - Unlocked (Renewed Premium) at 679.0 USD
2025-05-13 16:20:53,183 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Apple iPhone 15 Pro, 128GB, Blue Titanium - Unlocked (Renewed Premium) at 679.0 USD
2025-05-13 16:20:53,188 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Apple iPhone 15 Pro, 128GB, Natural Titanium - Unlocked (Renewed) at 675.74 USD
2025-05-13 16:20:53,188 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Apple iPhone 15 Pro, 128GB, Natural Titanium - Unlocked (Renewed) at 675.74 USD
2025-05-13 16:20:53,192 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Apple iPhone 15 Pro Max, 256GB, White Titanium - Unlocked (Renewed) at 794.54 USD
2025-05-13 16:20:53,192 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Apple iPhone 15 Pro Max, 256GB, White Titanium - Unlocked (Renewed) at 794.54 USD
2025-05-13 16:20:53,197 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Apple iPhone 15, 128GB, Black - Unlocked (Renewed Premium) at 530.0 USD
2025-05-13 16:20:53,197 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Apple iPhone 15, 128GB, Black - Unlocked (Renewed Premium) at 530.0 USD
2025-05-13 16:20:53,201 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Apple iPhone 15 Pro Max, 256GB, Black Titanium for Cricket Wireless (Renewed Premium) at 849.6 USD
2025-05-13 16:20:53,201 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Apple iPhone 15 Pro Max, 256GB, Black Titanium for Cricket Wireless (Renewed Premium) at 849.6 USD
2025-05-13 16:20:53,206 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: iPhone 15 Pro Silicone Case with MagSafe - Black at 49.0 USD
2025-05-13 16:20:53,206 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: iPhone 15 Pro Silicone Case with MagSafe - Black at 49.0 USD
2025-05-13 16:20:53,210 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Apple iPhone 16 Pro, US Version, 128GB, Black Titanium - Unlocked (Renewed) at 819.95 USD
2025-05-13 16:20:53,210 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Apple iPhone 16 Pro, US Version, 128GB, Black Titanium - Unlocked (Renewed) at 819.95 USD
2025-05-13 16:20:53,214 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Apple iPhone 15 Pro Max, 256GB, Natural Titanium - T-Mobile (Renewed Premium) at 849.97 USD
2025-05-13 16:20:53,214 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Apple iPhone 15 Pro Max, 256GB, Natural Titanium - T-Mobile (Renewed Premium) at 849.97 USD
2025-05-13 16:20:53,218 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Apple iPhone 14 Pro, 256GB, Space Black - Unlocked (Renewed Premium) at 634.29 USD
2025-05-13 16:20:53,218 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Apple iPhone 14 Pro, 256GB, Space Black - Unlocked (Renewed Premium) at 634.29 USD
2025-05-13 16:20:53,221 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Apple iPhone 15 Pro, 128GB, Blue Titanium - Cricket Wireless (Renewed) at 689.97 USD
2025-05-13 16:20:53,221 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Apple iPhone 15 Pro, 128GB, Blue Titanium - Cricket Wireless (Renewed) at 689.97 USD
2025-05-13 16:20:53,943 - DealFinderAI.AmazonScraperAgent - INFO - Extracted 10 products from Amazon
2025-05-13 16:20:53,944 - DealFinderAI.AmazonScraperAgent - INFO - Applying relevance filtering to 10 products
2025-05-13 16:20:53,945 - DealFinderAI.AmazonScraperAgent - INFO - Filtered to 5 most relevant products
2025-05-13 16:20:53,945 - DealFinderAI.Controller - INFO - Amazon response content: {'source': 'Amazon', 'query': 'Apple smartphone iPhone 15 Apple iPhone 15 iPhone 15 Pro', 'products': [{'title': 'Apple iPhone 15 Pro Max, 256GB, White Titanium - Unlocked (Renewed)', 'price': 794.54, 'was_price': None, 'currency': 'USD', 'url': 'https://www.amazon.com/Apple-iPhone-15-Pro-Max/dp/B0CMZDY2ZV/ref=sr_1_3?crid=1747167651&dib=eyJ2IjoiMSJ9.Wt6zvz6Y6QDLCuwhsnYLOPOe3MW7MqcEvPdg8BQKwdnEiIZgUpKu3cMTSXjzUOkmk_TR7TaHVhbyOV5hqfFjds-O3oAdjH3vKLNZ5aaDK9kMsuaKPUCgF-nl8D3-z5S3c46Y6-wWBJIEhDWHpVI7N0ycgFnn6T4TzeiX6nmHwiJZocNJ46kYl0fWYRieAeK_XnTqFkyUT8fe5nPsz201b4_npWl8j_hPWWjdUa93HN9FjpMwmt36dzcX_7n0CnvNlTg9zwr7-v1lzSn584brCUs1ntNJTiVuyDmWXB85lcQ.ZGMLtPdMdEHkTJrAmCX3UUTaYTIeZELqvO68RbzqelQ&dib_tag=se&keywords=Apple+smartphone+iPhone+15+Apple+iPhone+15+iPhone+15+Pro&qid=1747167651&s=electronics&sr=1-3', 'image_url': 'https://m.media-amazon.com/images/I/712TY0NCErL._AC_UY218_.jpg', 'rating': 3.9, 'reviews': 1194, 'is_sponsored': False, 'is_prime': True, 'is_amazon_choice': False, 'is_best_seller': False, 'asin': 'B0CMZDY2ZV', 'description': 'Apple iPhone 15 Pro Max, 256GB, White Titanium - Unlocked (Renewed) Options:3 sizesTop Reviewed for Functionality3.9 out of 5 stars 1,194 400+ bought in past monthPrice, product page$794.54$794.54 FREE delivery Sun, May 18Or fastest delivery Fri, May 16Only 2 left in stock - order soon.See optionsMore Buying Choices$773.05(14+ used & new offers)', 'delivery_info': '400+ bought in past month', 'out_of_stock': False, 'source': 'Amazon', 'relevance_score': 37}, {'title': 'iPhone 15 Pro Silicone Case with MagSafe - Black', 'price': 49.0, 'was_price': None, 'currency': 'USD', 'url': 'https://www.amazon.com/Apple-iPhone-Silicone-Case-MagSafe/dp/B0CHWYWDYX/ref=sr_1_6?crid=1747167651&dib=eyJ2IjoiMSJ9.Wt6zvz6Y6QDLCuwhsnYLOPOe3MW7MqcEvPdg8BQKwdnEiIZgUpKu3cMTSXjzUOkmk_TR7TaHVhbyOV5hqfFjds-O3oAdjH3vKLNZ5aaDK9kMsuaKPUCgF-nl8D3-z5S3c46Y6-wWBJIEhDWHpVI7N0ycgFnn6T4TzeiX6nmHwiJZocNJ46kYl0fWYRieAeK_XnTqFkyUT8fe5nPsz201b4_npWl8j_hPWWjdUa93HN9FjpMwmt36dzcX_7n0CnvNlTg9zwr7-v1lzSn584brCUs1ntNJTiVuyDmWXB85lcQ.ZGMLtPdMdEHkTJrAmCX3UUTaYTIeZELqvO68RbzqelQ&dib_tag=se&keywords=Apple+smartphone+iPhone+15+Apple+iPhone+15+iPhone+15+Pro&qid=1747167651&s=electronics&sr=1-6', 'image_url': 'https://m.media-amazon.com/images/I/31isI5Z9goL._AC_UY218_.jpg', 'rating': 4.0, 'reviews': 5255, 'is_sponsored': False, 'is_prime': True, 'is_amazon_choice': False, 'is_best_seller': False, 'asin': 'B0CHWYWDYX', 'description': 'AppleiPhone 15 Pro Silicone Case with MagSafe - Black 4.0 out of 5 stars 5,255 500+ bought in past monthPrice, product page$49.00$49.00 FREE delivery Sun, May 18Or fastest delivery Tomorrow, May 14Add to cartMore Buying Choices$33.88(3+ used & new offers)+3', 'delivery_info': '500+ bought in past month', 'out_of_stock': False, 'source': 'Amazon', 'relevance_score': 37}, {'title': 'Apple iPhone 15 Pro Max, 256GB, Natural Titanium - T-Mobile (Renewed Premium)', 'price': 849.97, 'was_price': None, 'currency': 'USD', 'url': 'https://www.amazon.com/Apple-iPhone-256GB-Natural-Titanium/dp/B0CRJRMZRH/ref=sr_1_8?crid=1747167651&dib=eyJ2IjoiMSJ9.Wt6zvz6Y6QDLCuwhsnYLOPOe3MW7MqcEvPdg8BQKwdnEiIZgUpKu3cMTSXjzUOkmk_TR7TaHVhbyOV5hqfFjds-O3oAdjH3vKLNZ5aaDK9kMsuaKPUCgF-nl8D3-z5S3c46Y6-wWBJIEhDWHpVI7N0ycgFnn6T4TzeiX6nmHwiJZocNJ46kYl0fWYRieAeK_XnTqFkyUT8fe5nPsz201b4_npWl8j_hPWWjdUa93HN9FjpMwmt36dzcX_7n0CnvNlTg9zwr7-v1lzSn584brCUs1ntNJTiVuyDmWXB85lcQ.ZGMLtPdMdEHkTJrAmCX3UUTaYTIeZELqvO68RbzqelQ&dib_tag=se&keywords=Apple+smartphone+iPhone+15+Apple+iPhone+15+iPhone+15+Pro&qid=1747167651&s=electronics&sr=1-8', 'image_url': 'https://m.media-amazon.com/images/I/31GaGWsjGyL._AC_UY218_.jpg', 'rating': 4.8, 'reviews': 11, 'is_sponsored': False, 'is_prime': True, 'is_amazon_choice': False, 'is_best_seller': False, 'asin': 'B0CRJRMZRH', 'description': 'Apple iPhone 15 Pro Max, 256GB, Natural Titanium - T-Mobile (Renewed Premium) Options:3 sizes4.8 out of 5 stars 11 Price, product page$849.97$849.97 FREE delivery Thu, May 15Only 12 left in stock - order soon.See optionsMore Buying Choices$839.97(3 new offers)', 'delivery_info': 'More Buying Choices', 'out_of_stock': False, 'source': 'Amazon', 'relevance_score': 37}, {'title': 'Apple iPhone 15 Pro, 128GB, Blue Titanium - Cricket Wireless (Renewed)', 'price': 689.97, 'was_price': None, 'currency': 'USD', 'url': 'https://www.amazon.com/Apple-iPhone-128GB-Blue-Titanium/dp/B0CK9SSJ3B/ref=sr_1_10?crid=1747167651&dib=eyJ2IjoiMSJ9.Wt6zvz6Y6QDLCuwhsnYLOPOe3MW7MqcEvPdg8BQKwdnEiIZgUpKu3cMTSXjzUOkmk_TR7TaHVhbyOV5hqfFjds-O3oAdjH3vKLNZ5aaDK9kMsuaKPUCgF-nl8D3-z5S3c46Y6-wWBJIEhDWHpVI7N0ycgFnn6T4TzeiX6nmHwiJZocNJ46kYl0fWYRieAeK_XnTqFkyUT8fe5nPsz201b4_npWl8j_hPWWjdUa93HN9FjpMwmt36dzcX_7n0CnvNlTg9zwr7-v1lzSn584brCUs1ntNJTiVuyDmWXB85lcQ.ZGMLtPdMdEHkTJrAmCX3UUTaYTIeZELqvO68RbzqelQ&dib_tag=se&keywords=Apple+smartphone+iPhone+15+Apple+iPhone+15+iPhone+15+Pro&qid=1747167651&s=electronics&sr=1-10', 'image_url': 'https://m.media-amazon.com/images/I/81KOaMd4-6L._AC_UY218_.jpg', 'rating': 5.0, 'reviews': 3, 'is_sponsored': False, 'is_prime': True, 'is_amazon_choice': False, 'is_best_seller': False, 'asin': 'B0CK9SSJ3B', 'description': 'Apple iPhone 15 Pro, 128GB, Blue Titanium - Cricket Wireless (Renewed) 5.0 out of 5 stars 3 Price, product page$689.97$689.97 FREE delivery Thu, May 15Only 2 left in stock - order soon.See optionsMore Buying Choices$639.95(3+ used & new offers)', 'delivery_info': 'More Buying Choices', 'out_of_stock': False, 'source': 'Amazon', 'relevance_score': 37}, {'title': 'Apple iPhone 15 Pro, 128GB, Natural Titanium - Unlocked (Renewed)', 'price': 675.74, 'was_price': None, 'currency': 'USD', 'url': 'https://www.amazon.com/Apple-iPhone-15-Pro-Titanium/dp/B0CMZG4M6H/ref=sr_1_2?crid=1747167651&dib=eyJ2IjoiMSJ9.Wt6zvz6Y6QDLCuwhsnYLOPOe3MW7MqcEvPdg8BQKwdnEiIZgUpKu3cMTSXjzUOkmk_TR7TaHVhbyOV5hqfFjds-O3oAdjH3vKLNZ5aaDK9kMsuaKPUCgF-nl8D3-z5S3c46Y6-wWBJIEhDWHpVI7N0ycgFnn6T4TzeiX6nmHwiJZocNJ46kYl0fWYRieAeK_XnTqFkyUT8fe5nPsz201b4_npWl8j_hPWWjdUa93HN9FjpMwmt36dzcX_7n0CnvNlTg9zwr7-v1lzSn584brCUs1ntNJTiVuyDmWXB85lcQ.ZGMLtPdMdEHkTJrAmCX3UUTaYTIeZELqvO68RbzqelQ&dib_tag=se&keywords=Apple+smartphone+iPhone+15+Apple+iPhone+15+iPhone+15+Pro&qid=1747167651&s=electronics&sr=1-2', 'image_url': 'https://m.media-amazon.com/images/I/71zPJBoDBoL._AC_UY218_.jpg', 'rating': 4.1, 'reviews': 1331, 'is_sponsored': False, 'is_prime': False, 'is_amazon_choice': False, 'is_best_seller': False, 'asin': 'B0CMZG4M6H', 'description': 'Apple iPhone 15 Pro, 128GB, Natural Titanium - Unlocked (Renewed) Options:4 sizesTop Reviewed for Functionality4.1 out of 5 stars 1,331 100+ bought in past monthPrice, product page$675.74$675.74FREE delivery Thu, May 15Only 4 left in stock - order soon.See optionsMore Buying Choices$658.00(12+ used & new offers)', 'delivery_info': '100+ bought in past month', 'out_of_stock': False, 'source': 'Amazon', 'relevance_score': 35}]}
2025-05-13 16:20:53,946 - DealFinderAI.Controller - INFO - Amazon returned 5 products
2025-05-13 16:20:53,946 - DealFinderAI.WalmartScraperAgent - INFO - Searching Walmart for: {'product_type': 'smartphone', 'keywords': ['iphone', '15'], 'price_range': None, 'brands': ['Apple'], 'features': [], 'sorting_preference': None, 'buy_it_now': True}
2025-05-13 16:20:53,947 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: 
            Optimize this search query for Walmart's search engine:
            
            "smartphone iphone 15 Apple"
            
            For Walmart searches, please:
            1. Focus on model numbers and specific identifiers if present
            2. Include key brand names (Walmart's search works well with brand names)
            3. Remove generic words that may dilute results
            4. Add Walmart-specific terms that might improve results (like "Rollback" if looking for deals)
            5. Prioritize precise product names and specifications
            
            Return a JSON object with:
            - optimized_keywords: List of 3-5 optimized search terms (most important first)
            - department_hint: Any Walmart department suggestion (Electronics, Home, etc.)
            - must_include_terms: Terms that MUST be in results
            - exclude_terms: Terms that should NOT be in results
            - walmart_specific_filters: Any Walmart-specific filters to apply
            
            Format as JSON only with no explanation.
            
2025-05-13 16:20:54,851 - DealFinderAI.WalmartScraperAgent - INFO - Optimized search parameters: {'product_type': 'smartphone', 'keywords': ['iPhone 15', 'Apple iPhone 15', 'iPhone 15 Pro Max', 'iPhone 15 Pro'], 'price_range': None, 'brands': ['Apple'], 'features': [], 'sorting_preference': None, 'buy_it_now': True, 'department': 'Electronics', 'must_include_terms': ['Apple', 'iPhone 15'], 'exclude_terms': ['smartphone'], 'walmart_filters': ['Rollback', 'Clearance']}
2025-05-13 16:20:54,851 - DealFinderAI.WalmartScraperAgent - INFO - Built optimized Walmart search query: Apple smartphone iPhone 15 Apple iPhone 15 iPhone 15 Pro Max
2025-05-13 16:20:54,851 - DealFinderAI.WalmartScraperAgent - INFO - Built Walmart query: Apple smartphone iPhone 15 Apple iPhone 15 iPhone 15 Pro Max
2025-05-13 16:20:54,851 - DealFinderAI.WalmartScraperAgent - INFO - Making Walmart search request with params: {'q': 'Apple smartphone iPhone 15 Apple iPhone 15 iPhone 15 Pro Max Electronics', 'page': 1, 'affinityOverride': 'default'}
2025-05-13 16:20:55,481 - DealFinderAI.WalmartScraperAgent - INFO - Extracted 0 products from JSON data
2025-05-13 16:20:55,482 - DealFinderAI.WalmartScraperAgent - INFO - JSON extraction failed, falling back to HTML extraction
2025-05-13 16:20:55,483 - DealFinderAI.WalmartScraperAgent - INFO - Found 0 product divs in HTML
2025-05-13 16:20:55,483 - DealFinderAI.WalmartScraperAgent - INFO - Extracted 0 products from HTML
2025-05-13 16:20:56,973 - DealFinderAI.WalmartScraperAgent - INFO - Extracted 0 products from Walmart
2025-05-13 16:20:56,974 - DealFinderAI.Controller - INFO - Walmart returned 0 products
2025-05-13 16:20:56,974 - DealFinderAI.EbayScraperAgent - INFO - Searching eBay for: {'product_type': 'smartphone', 'keywords': ['iphone', '15'], 'price_range': None, 'brands': ['Apple'], 'features': [], 'sorting_preference': None, 'buy_it_now': True}
2025-05-13 16:20:56,974 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: 
            Optimize this search query for eBay's search engine:
            
            "smartphone iphone 15 Apple"
            
            For eBay searches, please:
            1. Focus on exact model numbers and specific part identifiers if present
            2. Include key brand names
            3. Remove generic words that may dilute results
            4. Add eBay-specific terms that might improve results
            5. Optimize for finding the most relevant listings
            
            Return a JSON object with:
            - optimized_keywords: List of 3-5 optimized search terms (most important first)
            - category_hints: Any eBay category suggestions
            - must_include_terms: Terms that MUST be in results
            - exclude_terms: Terms that should NOT be in results
            
            Format as JSON only with no explanation.
            
2025-05-13 16:20:58,319 - DealFinderAI.EbayScraperAgent - INFO - Optimized search parameters: {'product_type': 'smartphone', 'keywords': ['iPhone 15', 'iPhone 15 Pro', 'iPhone 15 Pro Max', 'Apple iPhone 15'], 'price_range': None, 'brands': ['Apple'], 'features': [], 'sorting_preference': None, 'buy_it_now': True, 'category_hints': ['Cell Phones & Smartphones'], 'must_include_terms': ['Apple', 'iPhone'], 'exclude_terms': ['broken', 'repair', 'parts']}
2025-05-13 16:20:58,320 - DealFinderAI.EbayScraperAgent - INFO - Built optimized eBay search query: smartphone Apple iPhone 15 iPhone 15 Pro iPhone 15 Pro Max
2025-05-13 16:20:58,320 - DealFinderAI.EbayScraperAgent - INFO - Built eBay query: smartphone Apple iPhone 15 iPhone 15 Pro iPhone 15 Pro Max
2025-05-13 16:20:58,320 - DealFinderAI.EbayScraperAgent - INFO - Making eBay search request with params: {'_nkw': 'smartphone Apple iPhone 15 iPhone 15 Pro iPhone 15 Pro Max Cell Phones & Smartphones', '_sacat': '0', '_ipg': '96', 'LH_BIN': '1'}
2025-05-13 16:21:00,811 - DealFinderAI.EbayScraperAgent - INFO - Found 126 product listings
2025-05-13 16:21:00,812 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 15 Pro Max 256GB Unlocked Good Condition - All Colors at 799.99 USD
2025-05-13 16:21:00,812 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 15 Pro Max 256GB Unlocked Good Condition - All Colors at 799.99 USD
2025-05-13 16:21:00,814 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 15 Pro Max 1TB Unlocked Very Good Condition - All Colors at 949.99 USD
2025-05-13 16:21:00,814 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 15 Pro Max 1TB Unlocked Very Good Condition - All Colors at 949.99 USD
2025-05-13 16:21:00,815 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 11 Pro Max 256GB Unlocked Fair Condition - All Colors at 259.99 USD
2025-05-13 16:21:00,815 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 11 Pro Max 256GB Unlocked Fair Condition - All Colors at 259.99 USD
2025-05-13 16:21:00,817 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 14 Pro Max 512GB Unlocked Very Good Condition - All Colors at 699.99 USD
2025-05-13 16:21:00,817 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 14 Pro Max 512GB Unlocked Very Good Condition - All Colors at 699.99 USD
2025-05-13 16:21:00,818 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 15 Pro Max A2849 256GB Unlocked Very Good at 724.99 USD
2025-05-13 16:21:00,818 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 15 Pro Max A2849 256GB Unlocked Very Good at 724.99 USD
2025-05-13 16:21:00,819 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: iPhone 15 Pro Max 512Gb Unlocked-Natural Titanium at 850.0 USD
2025-05-13 16:21:00,819 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: iPhone 15 Pro Max 512Gb Unlocked-Natural Titanium at 850.0 USD
2025-05-13 16:21:00,820 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: iphone 15 pro max 512gb att at 650.0 USD
2025-05-13 16:21:00,820 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: iphone 15 pro max 512gb att at 650.0 USD
2025-05-13 16:21:00,821 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 15 Pro Max - 1 TB - Natural Titanium (Unlocked) at 1100.0 USD
2025-05-13 16:21:00,821 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 15 Pro Max - 1 TB - Natural Titanium (Unlocked) at 1100.0 USD
2025-05-13 16:21:02,224 - DealFinderAI.EbayScraperAgent - INFO - Extracted 8 products from eBay
2025-05-13 16:21:02,226 - DealFinderAI.EbayScraperAgent - INFO - Applying relevance filtering to 8 products
2025-05-13 16:21:02,226 - DealFinderAI.EbayScraperAgent - INFO - Filtered to 5 most relevant products
2025-05-13 16:21:02,227 - DealFinderAI.Controller - INFO - eBay returned 5 products
2025-05-13 16:21:02,227 - DealFinderAI.Controller - INFO - Total products before aggregation: 10
2025-05-13 16:21:02,227 - DealFinderAI.ResultsAggregatorAgent - INFO - Aggregating results for query: iphone 15
2025-05-13 16:21:02,227 - DealFinderAI.ResultsAggregatorAgent - INFO - Found 3 results from various sources
2025-05-13 16:21:02,227 - DealFinderAI.ResultsAggregatorAgent - INFO - Source Amazon: 5 products
2025-05-13 16:21:02,227 - DealFinderAI.ResultsAggregatorAgent - INFO - Source Walmart: 0 products
2025-05-13 16:21:02,228 - DealFinderAI.ResultsAggregatorAgent - INFO - Source eBay: 5 products
2025-05-13 16:21:02,228 - DealFinderAI.ResultsAggregatorAgent - INFO - Total products extracted: 10
2025-05-13 16:21:02,228 - DealFinderAI.ResultsAggregatorAgent - INFO - Ranking 10 products
2025-05-13 16:21:02,228 - DealFinderAI.ResultsAggregatorAgent - INFO - Sorted 10 products by score
2025-05-13 16:21:02,228 - DealFinderAI.ResultsAggregatorAgent - INFO - Returning 10 diversified products
2025-05-13 16:21:02,228 - DealFinderAI.ResultsAggregatorAgent - INFO - Products after ranking: 10
2025-05-13 16:21:02,228 - DealFinderAI.ResultsAggregatorAgent - INFO - Final products: 10
2025-05-13 16:21:02,228 - DealFinderAI.Controller - INFO - Products after aggregation: 10
2025-05-13 16:21:02,228 - DealFinderAI.ProductComparisonAgent - INFO - Comparing products for query: iphone 15
2025-05-13 16:21:02,228 - DealFinderAI.ProductComparisonAgent - INFO - Found 10 products to compare
2025-05-13 16:21:02,229 - DealFinderAI.ProductComparisonAgent - INFO - Grouping 10 products
2025-05-13 16:21:02,229 - DealFinderAI.ProductComparisonAgent - INFO - Created 0 product groups
2025-05-13 16:21:02,229 - DealFinderAI.ChatMemoryAgent - INFO - Storing context for conversation session_20250513161835_b2c44a63
2025-05-13 16:21:02,229 - DealFinderAI.ChatMemoryAgent - INFO - Storing 10 products for conversation session_20250513161835_b2c44a63
2025-05-13 16:21:02,229 - DealFinderAI.PresentationAgent - INFO - Preparing presentation for 10 products
2025-05-13 16:21:02,229 - DealFinderAI.PresentationAgent - INFO - Formatting 10 products for display
2025-05-13 16:21:02,229 - DealFinderAI.PresentationAgent - INFO - Product 1: iPhone 15 Pro Silicone Case with MagSafe - Black - Price: $49.00 - Source: Amazon
2025-05-13 16:21:02,229 - DealFinderAI.PresentationAgent - INFO - Product 2: Apple iPhone 15 Pro Max 256GB Unlocked Good Condition - All Colors - Price: $799.99 - Source: eBay
2025-05-13 16:21:02,230 - DealFinderAI.PresentationAgent - INFO - Product 3: Apple iPhone 15 Pro Max, 256GB, White Titanium - Unlocked (Renewed) - Price: $794.54 - Source: Amazon
2025-05-13 16:21:02,230 - DealFinderAI.PresentationAgent - INFO - Product 4: Apple iPhone 15 Pro, 128GB, Blue Titanium - Cricket Wireless (Renewed) - Price: $689.97 - Source: Amazon
2025-05-13 16:21:02,230 - DealFinderAI.PresentationAgent - INFO - Product 5: Apple iPhone 15 Pro Max, 256GB, Natural Titanium - T-Mobile (Renewed Premium) - Price: $849.97 - Source: Amazon
2025-05-13 16:21:02,230 - DealFinderAI.PresentationAgent - INFO - Product 6: Apple iPhone 15 Pro, 128GB, Natural Titanium - Unlocked (Renewed) - Price: $675.74 - Source: Amazon
2025-05-13 16:21:02,230 - DealFinderAI.PresentationAgent - INFO - Product 7: Apple iPhone 15 Pro Max 1TB Unlocked Very Good Condition - All Colors - Price: $949.99 - Source: eBay
2025-05-13 16:21:02,231 - DealFinderAI.PresentationAgent - INFO - Product 8: Apple iPhone 15 Pro Max A2849 256GB Unlocked Very Good - Price: $724.99 - Source: eBay
2025-05-13 16:21:02,231 - DealFinderAI.PresentationAgent - INFO - Product 9: Apple iPhone 14 Pro Max 512GB Unlocked Very Good Condition - All Colors - Price: $699.99 - Source: eBay
2025-05-13 16:21:02,231 - DealFinderAI.PresentationAgent - INFO - Product 10: Apple iPhone 15 Pro Max - 1 TB - Natural Titanium (Unlocked) - Price: $1100.00 - Source: eBay
2025-05-13 16:21:02,231 - DealFinderAI.ChatMemoryAgent - INFO - Storing context for conversation session_20250513161835_b2c44a63
2025-05-13 16:21:02,231 - DealFinderAI.ChatMemoryAgent - INFO - Storing 10 products for conversation session_20250513161835_b2c44a63
2025-05-13 16:21:02,231 - DealFinderAI.Controller - INFO - Successfully stored search results in memory
2025-05-13 16:22:39,569 - DealFinderAI - INFO - Logging initialized
2025-05-13 16:22:39,570 - DealFinderAI.Main - INFO - Starting DealFinder AI
2025-05-13 16:22:39,570 - DealFinderAI.Main - INFO - Using LangChain implementation
2025-05-13 16:22:39,610 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-13 16:22:39,610 - DealFinderAI.Controller - INFO - Initialized scraper agents: ['amazon', 'walmart', 'ebay']
2025-05-13 16:22:39,610 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-13 16:22:39,610 - DealFinderAI.Controller - INFO - Initialized scraper agents: ['amazon', 'walmart', 'ebay']
2025-05-13 16:22:39,610 - DealFinderAI.Main - INFO - Web app using LangChain implementation with Gemini model
2025-05-13 16:22:44,869 - DealFinderAI.Controller - INFO - Processing user query: iphone 16
2025-05-13 16:22:44,870 - DealFinderAI.ChatMemoryAgent - INFO - Analyzing query: 'iphone 16' for conversation session_20250513162244_86c24532
2025-05-13 16:22:44,870 - DealFinderAI.ChatMemoryAgent - INFO - No product context available for this conversation
2025-05-13 16:22:44,870 - DealFinderAI.Controller - INFO - Analyze response: {'is_follow_up': False, 'focused_product': None, 'referenced_products': [], 'products': []}
2025-05-13 16:22:44,870 - DealFinderAI.Controller - INFO - Is follow-up? False
2025-05-13 16:22:44,870 - DealFinderAI.Controller - INFO - Referenced products: 0
2025-05-13 16:22:44,870 - DealFinderAI.Controller - INFO - Processing as new search query
2025-05-13 16:22:44,870 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: iphone 16
2025-05-13 16:22:45,703 - DealFinderAI.GeminiAgent - WARNING - Failed to parse Gemini response as JSON: ```json
{
  "product_type": "smartphone",
  "keywords": ["iphone", "16"],
  "price_range": null,
  "brands": ["Apple"],
  "features": [],
  "sorting_preference": null,
  "buy_it_now": true
}
```

2025-05-13 16:22:45,704 - DealFinderAI.Controller - INFO - Parsed search parameters: {'product_type': 'smartphone', 'keywords': ['iphone', '16'], 'price_range': None, 'brands': ['Apple'], 'features': [], 'sorting_preference': None, 'buy_it_now': True}
2025-05-13 16:22:45,704 - DealFinderAI.AmazonScraperAgent - INFO - Searching Amazon for: {'product_type': 'smartphone', 'keywords': ['iphone', '16'], 'price_range': None, 'brands': ['Apple'], 'features': [], 'sorting_preference': None, 'buy_it_now': True}
2025-05-13 16:22:45,704 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: 
            Optimize this search query for Amazon's search engine:
            
            "smartphone iphone 16 Apple"
            
            For Amazon searches, please:
            1. Focus on product-specific model numbers and identifiers if present
            2. Include key brand names (Amazon's A9 algorithm prioritizes brand matches)
            3. Remove generic words that may dilute results
            4. Add Amazon-specific terms that might improve results (like "Amazon's Choice" if looking for quality products)
            5. Optimize for Amazon's search algorithm which prioritizes exact matches and recent sales volume
            
            Return a JSON object with:
            - optimized_keywords: List of 3-5 optimized search terms (most important first)
            - amazon_category: Any Amazon department/category suggestion (Electronics, Books, etc.)
            - must_include_terms: Terms that MUST be in results
            - exclude_terms: Terms that should NOT be in results
            - amazon_search_filters: Any Amazon-specific filters to apply (Prime eligible, etc.)
            
            Format as JSON only with no explanation.
            
2025-05-13 16:22:46,966 - DealFinderAI.AmazonScraperAgent - INFO - Optimized search parameters: {'product_type': 'smartphone', 'keywords': ['iPhone 16', 'Apple iPhone 16', 'iPhone 16 Pro Max', 'Apple iPhone 16 Pro'], 'price_range': None, 'brands': ['Apple'], 'features': [], 'sorting_preference': None, 'buy_it_now': True, 'category': 'Electronics', 'must_include_terms': ['Apple', 'iPhone 16'], 'exclude_terms': ['smartphone'], 'amazon_filters': ['Prime Eligible', 'New']}
2025-05-13 16:22:46,966 - DealFinderAI.AmazonScraperAgent - INFO - Built optimized Amazon search query: Apple smartphone iPhone 16 Apple iPhone 16 iPhone 16 Pro Max
2025-05-13 16:22:46,966 - DealFinderAI.AmazonScraperAgent - INFO - Built Amazon query: Apple smartphone iPhone 16 Apple iPhone 16 iPhone 16 Pro Max
2025-05-13 16:22:46,967 - DealFinderAI.AmazonScraperAgent - INFO - Making Amazon search request with params: {'k': 'Apple smartphone iPhone 16 Apple iPhone 16 iPhone 16 Pro Max', 'ref': 'nb_sb_noss', 'crid': 1747167766, 'i': 'aps', 'search-alias': 'electronics'}
2025-05-13 16:22:48,483 - DealFinderAI.AmazonScraperAgent - INFO - Found 30 product divs in search results
2025-05-13 16:22:48,489 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: I16 ProMax Smartphone Unlocked Cell Phone, 6.99 HD Screen 5G Phone, 8+256GB phone unlocked, 7000mAh, 68+108MP Zoom Camera, Fingerprint Button Unlock-and take photos,Dual SIM (Desert titanium) at 179.99 USD
2025-05-13 16:22:48,489 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: I16 ProMax Smartphone Unlocked Cell Phone, 6.99 HD Screen 5G Phone, 8+256GB phone unlocked, 7000mAh, 68+108MP Zoom Camera, Fingerprint Button Unlock-and take photos,Dual SIM (Desert titanium) at 179.99 USD
2025-05-13 16:22:48,495 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: I16 PROMAX 5G Cell Phone,Smartphone Unlocked Cell Phone 8GB+256GB/6.99" Display/68MP+108MP Camera/7000 mAh Battery Super Endurance, Dual SIM Card/Face Unlock/GPS (Blue) at 179.99 USD
2025-05-13 16:22:48,495 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: I16 PROMAX 5G Cell Phone,Smartphone Unlocked Cell Phone 8GB+256GB/6.99" Display/68MP+108MP Camera/7000 mAh Battery Super Endurance, Dual SIM Card/Face Unlock/GPS (Blue) at 179.99 USD
2025-05-13 16:22:48,500 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Apple iPhone 16 Pro Max, US Version, 256GB, Desert Titanium - Unlocked (Renewed Premium) at 1149.99 USD
2025-05-13 16:22:48,500 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Apple iPhone 16 Pro Max, US Version, 256GB, Desert Titanium - Unlocked (Renewed Premium) at 1149.99 USD
2025-05-13 16:22:48,503 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Apple iPhone 16 Pro Max, US Version, 256GB, Black Titanium - Unlocked (Renewed) at 1134.97 USD
2025-05-13 16:22:48,503 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Apple iPhone 16 Pro Max, US Version, 256GB, Black Titanium - Unlocked (Renewed) at 1134.97 USD
2025-05-13 16:22:48,508 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Apple iPhone 16 Pro, US Version, 128GB, Black Titanium - Unlocked (Renewed) at 819.95 USD
2025-05-13 16:22:48,508 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Apple iPhone 16 Pro, US Version, 128GB, Black Titanium - Unlocked (Renewed) at 819.95 USD
2025-05-13 16:22:48,513 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Apple iPhone 15 Pro Max, 256GB, White Titanium - Unlocked (Renewed) at 794.54 USD
2025-05-13 16:22:48,513 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Apple iPhone 15 Pro Max, 256GB, White Titanium - Unlocked (Renewed) at 794.54 USD
2025-05-13 16:22:48,521 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: I15 Pro MAX Smartphone Unlocked Cell Phone,Battery 6800mAh 6.8 HD Screen Unlocked Phone,6+256GB Android 13 with 128GB Memory Card,Dual SIM/5G/Fingerprint Lock/Face ID (Blue, 6+256) at 168.99 USD
2025-05-13 16:22:48,521 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: I15 Pro MAX Smartphone Unlocked Cell Phone,Battery 6800mAh 6.8 HD Screen Unlocked Phone,6+256GB Android 13 with 128GB Memory Card,Dual SIM/5G/Fingerprint Lock/Face ID (Blue, 6+256) at 168.99 USD
2025-05-13 16:22:48,527 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Apple iPhone 15 Pro Max, 256GB, Blue Titanium - Unlocked (Renewed Premium) at 835.0 USD
2025-05-13 16:22:48,527 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Apple iPhone 15 Pro Max, 256GB, Blue Titanium - Unlocked (Renewed Premium) at 835.0 USD
2025-05-13 16:22:48,533 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: iPhone 16 Pro Max Silicone Case with MagSafe and Camera Control - Black  at 45.0 USD
2025-05-13 16:22:48,533 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: iPhone 16 Pro Max Silicone Case with MagSafe and Camera Control - Black  at 45.0 USD
2025-05-13 16:22:48,537 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Apple iPhone 16 Pro Max, US Version, 256GB, Desert Titanium for AT&T (Renewed) at 974.81 USD
2025-05-13 16:22:48,537 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Apple iPhone 16 Pro Max, US Version, 256GB, Desert Titanium for AT&T (Renewed) at 974.81 USD
2025-05-13 16:22:49,317 - DealFinderAI.AmazonScraperAgent - INFO - Extracted 10 products from Amazon
2025-05-13 16:22:49,318 - DealFinderAI.AmazonScraperAgent - INFO - Applying relevance filtering to 10 products
2025-05-13 16:22:49,318 - DealFinderAI.AmazonScraperAgent - INFO - Filtered to 5 most relevant products
2025-05-13 16:22:49,318 - DealFinderAI.Controller - INFO - Amazon response content: {'source': 'Amazon', 'query': 'Apple smartphone iPhone 16 Apple iPhone 16 iPhone 16 Pro Max', 'products': [{'title': 'iPhone 16 Pro Max Silicone Case with MagSafe and Camera Control - Black \u200b\u200b\u200b\u200b\u200b\u200b\u200b', 'price': 45.0, 'was_price': 49.0, 'currency': 'USD', 'url': 'https://www.amazon.com/Apple-iPhone-Silicone-MagSafe-Control/dp/B0DGHLFC4M/ref=sr_1_9?crid=1747167766&dib=eyJ2IjoiMSJ9.f9reNQuMfzoMKjc7jYRVEat-zsHeSIt-JAr7w2j39LkKNGBU91U4QHVSX-GOX7CeL9_jS6sGFfolGs0jbirRJpLSiKa-vK1aavvTf-g2gIFHE1oM2ma6sHPYCPomB9-lcJLNOAV97sDKVkxv7QdNlCwaHsN54XVJVx5Q1Mj5aVue5d600bNFZchpy0OUUBtPQobhOUTyr_0nVzHaUEU1hz9lEv7kaC_Nf7QKfvW22z83uPUgUpPuDP7Eepl2TC5Sq86pciwp1DExJM9WsVEf_IyOWPvhSSRs2PJzHvQ0N0o.NLyqPJIHMGWDsyiC_7lqfKFf2v9U0LuUCMAu8Ez6YJY&dib_tag=se&keywords=Apple+smartphone+iPhone+16+Apple+iPhone+16+iPhone+16+Pro+Max&qid=1747167767&s=electronics&sr=1-9', 'image_url': 'https://m.media-amazon.com/images/I/61qrpgQK-oL._AC_UY218_.jpg', 'rating': 4.2, 'reviews': 2453, 'is_sponsored': False, 'is_prime': True, 'is_amazon_choice': False, 'is_best_seller': False, 'asin': 'B0DGHLFC4M', 'description': 'AppleiPhone 16 Pro Max Silicone Case with MagSafe and Camera Control - Black \u200b\u200b\u200b\u200b\u200b\u200b\u200b 4.2 out of 5 stars 2,453 1K+ bought in past monthPrice, product page$45.00$45.00 List: $49.00List: $49.00$49.00 FREE delivery Sun, May 18 Or fastest delivery Tomorrow, May 14 Add to cartMore Buying Choices$24.13(3+ used & new offers)+7', 'delivery_info': '1K+ bought in past month', 'out_of_stock': False, 'source': 'Amazon', 'relevance_score': 40}, {'title': 'Apple iPhone 16 Pro Max, US Version, 256GB, Desert Titanium for AT&T (Renewed)', 'price': 974.81, 'was_price': 1139.05, 'currency': 'USD', 'url': 'https://www.amazon.com/Apple-iPhone-Version-Titanium-Renewed/dp/B0DLR94642/ref=sr_1_10?crid=1747167766&dib=eyJ2IjoiMSJ9.f9reNQuMfzoMKjc7jYRVEat-zsHeSIt-JAr7w2j39LkKNGBU91U4QHVSX-GOX7CeL9_jS6sGFfolGs0jbirRJpLSiKa-vK1aavvTf-g2gIFHE1oM2ma6sHPYCPomB9-lcJLNOAV97sDKVkxv7QdNlCwaHsN54XVJVx5Q1Mj5aVue5d600bNFZchpy0OUUBtPQobhOUTyr_0nVzHaUEU1hz9lEv7kaC_Nf7QKfvW22z83uPUgUpPuDP7Eepl2TC5Sq86pciwp1DExJM9WsVEf_IyOWPvhSSRs2PJzHvQ0N0o.NLyqPJIHMGWDsyiC_7lqfKFf2v9U0LuUCMAu8Ez6YJY&dib_tag=se&keywords=Apple+smartphone+iPhone+16+Apple+iPhone+16+iPhone+16+Pro+Max&qid=1747167767&s=electronics&sr=1-10', 'image_url': 'https://m.media-amazon.com/images/I/61wKjpH7nuL._AC_UY218_.jpg', 'rating': 5.0, 'reviews': 1, 'is_sponsored': False, 'is_prime': True, 'is_amazon_choice': False, 'is_best_seller': False, 'asin': 'B0DLR94642', 'description': 'Apple iPhone 16 Pro Max, US Version, 256GB, Desert Titanium for AT&T (Renewed) 5.0 out of 5 stars 1 Price, product page$974.81$974.81 List Price: $1,139.05List Price: $1,139.05$1,139.05 FREE delivery May 16 - 20 Or fastest delivery Thu, May 15 See options', 'delivery_info': 'List Price:', 'out_of_stock': False, 'source': 'Amazon', 'relevance_score': 37}, {'title': 'Apple iPhone 16 Pro, US Version, 128GB, Black Titanium - Unlocked (Renewed)', 'price': 819.95, 'was_price': None, 'currency': 'USD', 'url': 'https://www.amazon.com/Apple-iPhone-Version-128GB-Titanium/dp/B0DHJG6JPH/ref=sr_1_5?crid=1747167766&dib=eyJ2IjoiMSJ9.f9reNQuMfzoMKjc7jYRVEat-zsHeSIt-JAr7w2j39LkKNGBU91U4QHVSX-GOX7CeL9_jS6sGFfolGs0jbirRJpLSiKa-vK1aavvTf-g2gIFHE1oM2ma6sHPYCPomB9-lcJLNOAV97sDKVkxv7QdNlCwaHsN54XVJVx5Q1Mj5aVue5d600bNFZchpy0OUUBtPQobhOUTyr_0nVzHaUEU1hz9lEv7kaC_Nf7QKfvW22z83uPUgUpPuDP7Eepl2TC5Sq86pciwp1DExJM9WsVEf_IyOWPvhSSRs2PJzHvQ0N0o.NLyqPJIHMGWDsyiC_7lqfKFf2v9U0LuUCMAu8Ez6YJY&dib_tag=se&keywords=Apple+smartphone+iPhone+16+Apple+iPhone+16+iPhone+16+Pro+Max&qid=1747167767&s=electronics&sr=1-5', 'image_url': 'https://m.media-amazon.com/images/I/51MCIUhxvZL._AC_UY218_.jpg', 'rating': 4.4, 'reviews': 193, 'is_sponsored': False, 'is_prime': True, 'is_amazon_choice': False, 'is_best_seller': False, 'asin': 'B0DHJG6JPH', 'description': 'Apple iPhone 16 Pro, US Version, 128GB, Black Titanium - Unlocked (Renewed) Options:4 sizesTop Reviewed for Functionality4.4 out of 5 stars 193 100+ bought in past monthPrice, product page$819.95$819.95 FREE delivery Tomorrow, May 14 See optionsMore Buying Choices$817.99(12+ used & new offers)', 'delivery_info': '100+ bought in past month', 'out_of_stock': False, 'source': 'Amazon', 'relevance_score': 36}, {'title': 'Apple iPhone 16 Pro Max, US Version, 256GB, Black Titanium - Unlocked (Renewed)', 'price': 1134.97, 'was_price': None, 'currency': 'USD', 'url': 'https://www.amazon.com/Apple-iPhone-16-Pro-Max/dp/B0DHJ896RY/ref=sr_1_4?crid=1747167766&dib=eyJ2IjoiMSJ9.f9reNQuMfzoMKjc7jYRVEat-zsHeSIt-JAr7w2j39LkKNGBU91U4QHVSX-GOX7CeL9_jS6sGFfolGs0jbirRJpLSiKa-vK1aavvTf-g2gIFHE1oM2ma6sHPYCPomB9-lcJLNOAV97sDKVkxv7QdNlCwaHsN54XVJVx5Q1Mj5aVue5d600bNFZchpy0OUUBtPQobhOUTyr_0nVzHaUEU1hz9lEv7kaC_Nf7QKfvW22z83uPUgUpPuDP7Eepl2TC5Sq86pciwp1DExJM9WsVEf_IyOWPvhSSRs2PJzHvQ0N0o.NLyqPJIHMGWDsyiC_7lqfKFf2v9U0LuUCMAu8Ez6YJY&dib_tag=se&keywords=Apple+smartphone+iPhone+16+Apple+iPhone+16+iPhone+16+Pro+Max&qid=1747167767&s=electronics&sr=1-4', 'image_url': 'https://m.media-amazon.com/images/I/71jL8s68fjL._AC_UY218_.jpg', 'rating': 4.2, 'reviews': 66, 'is_sponsored': False, 'is_prime': True, 'is_amazon_choice': False, 'is_best_seller': False, 'asin': 'B0DHJ896RY', 'description': 'Apple iPhone 16 Pro Max, US Version, 256GB, Black Titanium - Unlocked (Renewed) 4.2 out of 5 stars 66 200+ bought in past monthPrice, product page$1,134.97$1,134.97 FREE delivery Thu, May 15 See optionsMore Buying Choices$999.99(9+ used & new offers)', 'delivery_info': '200+ bought in past month', 'out_of_stock': False, 'source': 'Amazon', 'relevance_score': 34}, {'title': 'Apple iPhone 16 Pro Max, US Version, 256GB, Desert Titanium - Unlocked (Renewed Premium)', 'price': 1149.99, 'was_price': None, 'currency': 'USD', 'url': 'https://www.amazon.com/Apple-iPhone-Version-Desert-Titanium/dp/B0DPDK8T2J/ref=sr_1_3?crid=1747167766&dib=eyJ2IjoiMSJ9.f9reNQuMfzoMKjc7jYRVEat-zsHeSIt-JAr7w2j39LkKNGBU91U4QHVSX-GOX7CeL9_jS6sGFfolGs0jbirRJpLSiKa-vK1aavvTf-g2gIFHE1oM2ma6sHPYCPomB9-lcJLNOAV97sDKVkxv7QdNlCwaHsN54XVJVx5Q1Mj5aVue5d600bNFZchpy0OUUBtPQobhOUTyr_0nVzHaUEU1hz9lEv7kaC_Nf7QKfvW22z83uPUgUpPuDP7Eepl2TC5Sq86pciwp1DExJM9WsVEf_IyOWPvhSSRs2PJzHvQ0N0o.NLyqPJIHMGWDsyiC_7lqfKFf2v9U0LuUCMAu8Ez6YJY&dib_tag=se&keywords=Apple+smartphone+iPhone+16+Apple+iPhone+16+iPhone+16+Pro+Max&qid=1747167767&s=electronics&sr=1-3', 'image_url': 'https://m.media-amazon.com/images/I/61U1XRJMAML._AC_UY218_.jpg', 'rating': 4.5, 'reviews': 74, 'is_sponsored': False, 'is_prime': False, 'is_amazon_choice': False, 'is_best_seller': False, 'asin': 'B0DPDK8T2J', 'description': 'Apple iPhone 16 Pro Max, US Version, 256GB, Desert Titanium - Unlocked (Renewed Premium) Options:3 sizesTop Reviewed for Functionality4.5 out of 5 stars 74 100+ bought in past monthPrice, product page$1,149.99$1,149.99FREE delivery Thu, May 15 See options', 'delivery_info': '100+ bought in past month', 'out_of_stock': False, 'source': 'Amazon', 'relevance_score': 29}]}
2025-05-13 16:22:49,319 - DealFinderAI.Controller - INFO - Amazon returned 5 products
2025-05-13 16:22:49,319 - DealFinderAI.WalmartScraperAgent - INFO - Searching Walmart for: {'product_type': 'smartphone', 'keywords': ['iphone', '16'], 'price_range': None, 'brands': ['Apple'], 'features': [], 'sorting_preference': None, 'buy_it_now': True}
2025-05-13 16:22:49,319 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: 
            Optimize this search query for Walmart's search engine:
            
            "smartphone iphone 16 Apple"
            
            For Walmart searches, please:
            1. Focus on model numbers and specific identifiers if present
            2. Include key brand names (Walmart's search works well with brand names)
            3. Remove generic words that may dilute results
            4. Add Walmart-specific terms that might improve results (like "Rollback" if looking for deals)
            5. Prioritize precise product names and specifications
            
            Return a JSON object with:
            - optimized_keywords: List of 3-5 optimized search terms (most important first)
            - department_hint: Any Walmart department suggestion (Electronics, Home, etc.)
            - must_include_terms: Terms that MUST be in results
            - exclude_terms: Terms that should NOT be in results
            - walmart_specific_filters: Any Walmart-specific filters to apply
            
            Format as JSON only with no explanation.
            
2025-05-13 16:22:50,512 - DealFinderAI.WalmartScraperAgent - INFO - Optimized search parameters: {'product_type': 'smartphone', 'keywords': ['iPhone 16', 'Apple iPhone 16', 'iPhone 16 Pro', 'iPhone 16 Pro Max'], 'price_range': None, 'brands': ['Apple'], 'features': [], 'sorting_preference': None, 'buy_it_now': True, 'department': 'Electronics', 'must_include_terms': ['Apple', 'iPhone 16'], 'exclude_terms': ['smartphone'], 'walmart_filters': ['Rollback', 'Free Shipping']}
2025-05-13 16:22:50,553 - DealFinderAI.WalmartScraperAgent - INFO - Built optimized Walmart search query: Apple smartphone iPhone 16 Apple iPhone 16 iPhone 16 Pro
2025-05-13 16:22:50,554 - DealFinderAI.WalmartScraperAgent - INFO - Built Walmart query: Apple smartphone iPhone 16 Apple iPhone 16 iPhone 16 Pro
2025-05-13 16:22:50,554 - DealFinderAI.WalmartScraperAgent - INFO - Making Walmart search request with params: {'q': 'Apple smartphone iPhone 16 Apple iPhone 16 iPhone 16 Pro Electronics', 'page': 1, 'affinityOverride': 'default'}
2025-05-13 16:22:53,224 - DealFinderAI.WalmartScraperAgent - INFO - Extracted 0 products from JSON data
2025-05-13 16:22:53,224 - DealFinderAI.WalmartScraperAgent - INFO - JSON extraction failed, falling back to HTML extraction
2025-05-13 16:22:53,227 - DealFinderAI.WalmartScraperAgent - INFO - Found 9 product divs in HTML
2025-05-13 16:22:55,603 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 16:22:55,603 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Straight Talk Apple iPhone 16, 256GB, White - Prepaid Smartphone [Locked to Straight Talk] at 929.0 USD
2025-05-13 16:22:58,000 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 16:22:58,001 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Straight Talk Apple iPhone 13, 128GB, Midnight - Prepaid Smartphone [Locked to Straight Talk] at 249.0 USD
2025-05-13 16:23:00,650 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 16:23:00,651 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Straight Talk Apple iPhone 16 Pro Max, 256GB, Black Titanium - Prepaid Smartphone [Locked to Straight Talk] at 1199.0 USD
2025-05-13 16:23:03,213 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 16:23:03,214 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Straight Talk Apple iPhone 16e, 5G, 128GB, Black - Prepaid Smartphone [Locked to Straight Talk] at 549.0 USD
2025-05-13 16:23:05,874 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 16:23:05,875 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Straight Talk Apple iPhone 16 Pro, 128GB, Black Titanium - Prepaid Smartphone [Locked to Straight Talk] at 999.0 USD
2025-05-13 16:23:08,539 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 16:23:08,539 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Straight Talk Apple iPhone 16 Pro, 128GB, Desert Titanium - Prepaid Smartphone [Locked to Straight Talk] at 999.0 USD
2025-05-13 16:23:10,583 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 16:23:10,583 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: AT&T iPhone 16 Pro 128GB Desert Titanium. Apple Intelligence. at 1049.0 USD
2025-05-13 16:23:13,355 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 16:23:13,356 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Verizon iPhone 16 Pro 128GB Desert Titanium. Apple Intelligence. at 1049.0 USD
2025-05-13 16:23:15,613 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 16:23:15,613 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Straight Talk Apple iPhone 16, 128GB, White - Prepaid Smartphone [Locked to Straight Talk] at 829.0 USD
2025-05-13 16:23:15,613 - DealFinderAI.WalmartScraperAgent - INFO - Extracted 9 products from HTML
2025-05-13 16:23:15,613 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Straight Talk Apple iPhone 16, 256GB, White - Prepaid Smartphone [Locked to Straight Talk] at 929.0 USD
2025-05-13 16:23:15,613 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Straight Talk Apple iPhone 13, 128GB, Midnight - Prepaid Smartphone [Locked to Straight Talk] at 249.0 USD
2025-05-13 16:23:15,613 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Straight Talk Apple iPhone 16 Pro Max, 256GB, Black Titanium - Prepaid Smartphone [Locked to Straight Talk] at 1199.0 USD
2025-05-13 16:23:15,613 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Straight Talk Apple iPhone 16e, 5G, 128GB, Black - Prepaid Smartphone [Locked to Straight Talk] at 549.0 USD
2025-05-13 16:23:15,613 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Straight Talk Apple iPhone 16 Pro, 128GB, Black Titanium - Prepaid Smartphone [Locked to Straight Talk] at 999.0 USD
2025-05-13 16:23:15,613 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Straight Talk Apple iPhone 16 Pro, 128GB, Desert Titanium - Prepaid Smartphone [Locked to Straight Talk] at 999.0 USD
2025-05-13 16:23:15,613 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: AT&T iPhone 16 Pro 128GB Desert Titanium. Apple Intelligence. at 1049.0 USD
2025-05-13 16:23:15,613 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Verizon iPhone 16 Pro 128GB Desert Titanium. Apple Intelligence. at 1049.0 USD
2025-05-13 16:23:15,613 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Straight Talk Apple iPhone 16, 128GB, White - Prepaid Smartphone [Locked to Straight Talk] at 829.0 USD
2025-05-13 16:23:16,312 - DealFinderAI.WalmartScraperAgent - INFO - Extracted 9 products from Walmart
2025-05-13 16:23:16,314 - DealFinderAI.WalmartScraperAgent - INFO - Applying relevance filtering to 9 products
2025-05-13 16:23:16,314 - DealFinderAI.WalmartScraperAgent - INFO - Filtered to 5 most relevant products
2025-05-13 16:23:16,314 - DealFinderAI.Controller - INFO - Walmart returned 5 products
2025-05-13 16:23:16,314 - DealFinderAI.EbayScraperAgent - INFO - Searching eBay for: {'product_type': 'smartphone', 'keywords': ['iphone', '16'], 'price_range': None, 'brands': ['Apple'], 'features': [], 'sorting_preference': None, 'buy_it_now': True}
2025-05-13 16:23:16,314 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: 
            Optimize this search query for eBay's search engine:
            
            "smartphone iphone 16 Apple"
            
            For eBay searches, please:
            1. Focus on exact model numbers and specific part identifiers if present
            2. Include key brand names
            3. Remove generic words that may dilute results
            4. Add eBay-specific terms that might improve results
            5. Optimize for finding the most relevant listings
            
            Return a JSON object with:
            - optimized_keywords: List of 3-5 optimized search terms (most important first)
            - category_hints: Any eBay category suggestions
            - must_include_terms: Terms that MUST be in results
            - exclude_terms: Terms that should NOT be in results
            
            Format as JSON only with no explanation.
            
2025-05-13 16:23:17,873 - DealFinderAI.EbayScraperAgent - INFO - Optimized search parameters: {'product_type': 'smartphone', 'keywords': ['iPhone 16', 'Apple iPhone 16', 'iPhone 16 Pro', 'iPhone 16 Pro Max', 'Apple iPhone 16 new'], 'price_range': None, 'brands': ['Apple'], 'features': [], 'sorting_preference': None, 'buy_it_now': True, 'category_hints': ['Cell Phones & Smartphones'], 'must_include_terms': ['Apple', 'iPhone'], 'exclude_terms': ['smartphone']}
2025-05-13 16:23:17,873 - DealFinderAI.EbayScraperAgent - INFO - Built optimized eBay search query: smartphone Apple iPhone 16 Apple iPhone 16 iPhone 16 Pro
2025-05-13 16:23:17,874 - DealFinderAI.EbayScraperAgent - INFO - Built eBay query: smartphone Apple iPhone 16 Apple iPhone 16 iPhone 16 Pro
2025-05-13 16:23:17,874 - DealFinderAI.EbayScraperAgent - INFO - Making eBay search request with params: {'_nkw': 'smartphone Apple iPhone 16 Apple iPhone 16 iPhone 16 Pro Cell Phones & Smartphones', '_sacat': '0', '_ipg': '96', 'LH_BIN': '1'}
2025-05-13 16:23:19,755 - DealFinderAI.EbayScraperAgent - INFO - Found 125 product listings
2025-05-13 16:23:19,757 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 15 512GB Black 100% Battery Unlocked Smartphone at 584.0 USD
2025-05-13 16:23:19,757 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 15 512GB Black 100% Battery Unlocked Smartphone at 584.0 USD
2025-05-13 16:23:19,758 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 15 (Excellent Condition) - (Unlocked, AT&T, T-Mobile, Verizon) at 479.99 USD
2025-05-13 16:23:19,758 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 15 (Excellent Condition) - (Unlocked, AT&T, T-Mobile, Verizon) at 479.99 USD
2025-05-13 16:23:19,759 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: APPLE IPHONE 16 PRO 128GB VERIZON | UNUSED OPEN BOX - BATTERY 100% at 748.88 USD
2025-05-13 16:23:19,759 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: APPLE IPHONE 16 PRO 128GB VERIZON | UNUSED OPEN BOX - BATTERY 100% at 748.88 USD
2025-05-13 16:23:19,761 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 14, 128GB-256GB-512GB, Unlocked - Very Good Condition - All Colors at 334.99 USD
2025-05-13 16:23:19,761 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 14, 128GB-256GB-512GB, Unlocked - Very Good Condition - All Colors at 334.99 USD
2025-05-13 16:23:19,762 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 16 Pro 256GB Unlocked Excellent Condition at 957.47 USD
2025-05-13 16:23:19,762 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 16 Pro 256GB Unlocked Excellent Condition at 957.47 USD
2025-05-13 16:23:19,763 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 16 Pro Max - 512GB - Black Titanium - MYW73LL/A at 1049.99 USD
2025-05-13 16:23:19,763 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 16 Pro Max - 512GB - Black Titanium - MYW73LL/A at 1049.99 USD
2025-05-13 16:23:19,764 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 16 Pro - 128 GB - Black Titanium (Verizon) at 999.99 USD
2025-05-13 16:23:19,764 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 16 Pro - 128 GB - Black Titanium (Verizon) at 999.99 USD
2025-05-13 16:23:19,765 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: NEW Apple iPhone 16 Pro 1TB - Factory Unlocked - $0.01 at 1175.0 USD
2025-05-13 16:23:19,765 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: NEW Apple iPhone 16 Pro 1TB - Factory Unlocked - $0.01 at 1175.0 USD
2025-05-13 16:23:20,420 - DealFinderAI.EbayScraperAgent - INFO - Extracted 8 products from eBay
2025-05-13 16:23:20,422 - DealFinderAI.EbayScraperAgent - INFO - Applying relevance filtering to 8 products
2025-05-13 16:23:20,422 - DealFinderAI.EbayScraperAgent - INFO - Filtered to 5 most relevant products
2025-05-13 16:23:20,423 - DealFinderAI.Controller - INFO - eBay returned 5 products
2025-05-13 16:23:20,423 - DealFinderAI.Controller - INFO - Total products before aggregation: 15
2025-05-13 16:23:20,423 - DealFinderAI.ResultsAggregatorAgent - INFO - Aggregating results for query: iphone 16
2025-05-13 16:23:20,423 - DealFinderAI.ResultsAggregatorAgent - INFO - Found 3 results from various sources
2025-05-13 16:23:20,423 - DealFinderAI.ResultsAggregatorAgent - INFO - Source Amazon: 5 products
2025-05-13 16:23:20,423 - DealFinderAI.ResultsAggregatorAgent - INFO - Source Walmart: 5 products
2025-05-13 16:23:20,423 - DealFinderAI.ResultsAggregatorAgent - INFO - Source eBay: 5 products
2025-05-13 16:23:20,423 - DealFinderAI.ResultsAggregatorAgent - INFO - Total products extracted: 15
2025-05-13 16:23:20,423 - DealFinderAI.ResultsAggregatorAgent - INFO - Ranking 15 products
2025-05-13 16:23:20,423 - DealFinderAI.ResultsAggregatorAgent - INFO - Sorted 15 products by score
2025-05-13 16:23:20,424 - DealFinderAI.ResultsAggregatorAgent - INFO - Returning 10 diversified products
2025-05-13 16:23:20,424 - DealFinderAI.ResultsAggregatorAgent - INFO - Products after ranking: 10
2025-05-13 16:23:20,424 - DealFinderAI.ResultsAggregatorAgent - INFO - Final products: 10
2025-05-13 16:23:20,424 - DealFinderAI.Controller - INFO - Products after aggregation: 10
2025-05-13 16:23:20,424 - DealFinderAI.ProductComparisonAgent - INFO - Comparing products for query: iphone 16
2025-05-13 16:23:20,424 - DealFinderAI.ProductComparisonAgent - INFO - Found 10 products to compare
2025-05-13 16:23:20,424 - DealFinderAI.ProductComparisonAgent - INFO - Grouping 10 products
2025-05-13 16:23:20,425 - DealFinderAI.ProductComparisonAgent - INFO - Created 0 product groups
2025-05-13 16:23:20,425 - DealFinderAI.ChatMemoryAgent - INFO - Storing context for conversation session_20250513162244_86c24532
2025-05-13 16:23:20,425 - DealFinderAI.ChatMemoryAgent - INFO - Storing 10 products for conversation session_20250513162244_86c24532
2025-05-13 16:23:20,425 - DealFinderAI.PresentationAgent - INFO - Preparing presentation for 10 products
2025-05-13 16:23:20,425 - DealFinderAI.PresentationAgent - INFO - Formatting 10 products for display
2025-05-13 16:23:20,425 - DealFinderAI.PresentationAgent - INFO - Product 1: iPhone 16 Pro Max Silicone Case with MagSafe and Camera Control - Black  - Price: $45.00 - Source: Amazon
2025-05-13 16:23:20,425 - DealFinderAI.PresentationAgent - INFO - Product 2: APPLE IPHONE 16 PRO 128GB VERIZON | UNUSED OPEN BOX - BATTERY 100% - Price: $748.88 - Source: eBay
2025-05-13 16:23:20,426 - DealFinderAI.PresentationAgent - INFO - Product 3: Straight Talk Apple iPhone 16 Pro, 128GB, Black Titanium - Prepaid Smartphone [Locked to Straight Talk] - Price: $999.00 - Source: Walmart
2025-05-13 16:23:20,426 - DealFinderAI.PresentationAgent - INFO - Product 4: Apple iPhone 16 Pro Max, US Version, 256GB, Desert Titanium for AT&T (Renewed) - Price: $974.81 - Source: Amazon
2025-05-13 16:23:20,426 - DealFinderAI.PresentationAgent - INFO - Product 5: Apple iPhone 16 Pro, US Version, 128GB, Black Titanium - Unlocked (Renewed) - Price: $819.95 - Source: Amazon
2025-05-13 16:23:20,426 - DealFinderAI.PresentationAgent - INFO - Product 6: Apple iPhone 16 Pro Max, US Version, 256GB, Black Titanium - Unlocked (Renewed) - Price: $1134.97 - Source: Amazon
2025-05-13 16:23:20,426 - DealFinderAI.PresentationAgent - INFO - Product 7: Apple iPhone 16 Pro Max, US Version, 256GB, Desert Titanium - Unlocked (Renewed Premium) - Price: $1149.99 - Source: Amazon
2025-05-13 16:23:20,426 - DealFinderAI.PresentationAgent - INFO - Product 8: Apple iPhone 16 Pro 256GB Unlocked Excellent Condition - Price: $957.47 - Source: eBay
2025-05-13 16:23:20,426 - DealFinderAI.PresentationAgent - INFO - Product 9: Apple iPhone 16 Pro Max - 512GB - Black Titanium - MYW73LL/A - Price: $1049.99 - Source: eBay
2025-05-13 16:23:20,426 - DealFinderAI.PresentationAgent - INFO - Product 10: Apple iPhone 16 Pro - 128 GB - Black Titanium (Verizon) - Price: $999.99 - Source: eBay
2025-05-13 16:23:20,427 - DealFinderAI.ChatMemoryAgent - INFO - Storing context for conversation session_20250513162244_86c24532
2025-05-13 16:23:20,427 - DealFinderAI.ChatMemoryAgent - INFO - Storing 10 products for conversation session_20250513162244_86c24532
2025-05-13 16:23:20,427 - DealFinderAI.Controller - INFO - Successfully stored search results in memory
2025-05-13 16:25:28,937 - DealFinderAI - INFO - Logging initialized
2025-05-13 16:25:28,937 - DealFinderAI.Main - INFO - Starting DealFinder AI
2025-05-13 16:25:28,937 - DealFinderAI.Main - INFO - Using LangChain implementation
2025-05-13 16:25:28,979 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-13 16:25:28,979 - DealFinderAI.Controller - INFO - Initialized scraper agents: ['amazon', 'walmart', 'ebay']
2025-05-13 16:25:28,979 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-13 16:25:28,979 - DealFinderAI.Controller - INFO - Initialized scraper agents: ['amazon', 'walmart', 'ebay']
2025-05-13 16:25:28,980 - DealFinderAI.Main - INFO - Web app using LangChain implementation with Gemini model
2025-05-13 16:25:41,681 - DealFinderAI.Controller - INFO - Processing user query: iphone 16
2025-05-13 16:25:41,682 - DealFinderAI.ChatMemoryAgent - INFO - Analyzing query: 'iphone 16' for conversation session_20250513162538_08ad3afc
2025-05-13 16:25:41,682 - DealFinderAI.ChatMemoryAgent - INFO - No product context available for this conversation
2025-05-13 16:25:41,682 - DealFinderAI.Controller - INFO - Analyze response: {'is_follow_up': False, 'focused_product': None, 'referenced_products': [], 'products': []}
2025-05-13 16:25:41,682 - DealFinderAI.Controller - INFO - Is follow-up? False
2025-05-13 16:25:41,682 - DealFinderAI.Controller - INFO - Referenced products: 0
2025-05-13 16:25:41,682 - DealFinderAI.Controller - INFO - Processing as new search query
2025-05-13 16:25:41,682 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: iphone 16
2025-05-13 16:25:42,468 - DealFinderAI.GeminiAgent - WARNING - Failed to parse Gemini response as JSON: ```json
{
  "product_type": "smartphone",
  "keywords": ["iphone", "16"],
  "price_range": null,
  "brands": ["Apple"],
  "features": [],
  "sorting_preference": null,
  "buy_it_now": true
}
```

2025-05-13 16:25:42,469 - DealFinderAI.Controller - INFO - Parsed search parameters: {'product_type': 'smartphone', 'keywords': ['iphone', '16'], 'price_range': None, 'brands': ['Apple'], 'features': [], 'sorting_preference': None, 'buy_it_now': True}
2025-05-13 16:25:42,469 - DealFinderAI.AmazonScraperAgent - INFO - Searching Amazon for: {'product_type': 'smartphone', 'keywords': ['iphone', '16'], 'price_range': None, 'brands': ['Apple'], 'features': [], 'sorting_preference': None, 'buy_it_now': True}
2025-05-13 16:25:42,470 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: 
            Optimize this search query for Amazon's search engine:
            
            "smartphone iphone 16 Apple"
            
            For Amazon searches, please:
            1. Focus on product-specific model numbers and identifiers if present
            2. Include key brand names (Amazon's A9 algorithm prioritizes brand matches)
            3. Remove generic words that may dilute results
            4. Add Amazon-specific terms that might improve results (like "Amazon's Choice" if looking for quality products)
            5. Optimize for Amazon's search algorithm which prioritizes exact matches and recent sales volume
            
            Return a JSON object with:
            - optimized_keywords: List of 3-5 optimized search terms (most important first)
            - amazon_category: Any Amazon department/category suggestion (Electronics, Books, etc.)
            - must_include_terms: Terms that MUST be in results
            - exclude_terms: Terms that should NOT be in results
            - amazon_search_filters: Any Amazon-specific filters to apply (Prime eligible, etc.)
            
            Format as JSON only with no explanation.
            
2025-05-13 16:25:43,411 - DealFinderAI.AmazonScraperAgent - INFO - Optimized search parameters: {'product_type': 'smartphone', 'keywords': ['iPhone 16', 'Apple iPhone 16', 'iPhone 16 Pro', 'Apple iPhone 16 Pro Max'], 'price_range': None, 'brands': ['Apple'], 'features': [], 'sorting_preference': None, 'buy_it_now': True, 'category': 'Electronics', 'must_include_terms': ['Apple', 'iPhone 16'], 'exclude_terms': ['smartphone'], 'amazon_filters': ['Prime Eligible', 'New']}
2025-05-13 16:25:43,412 - DealFinderAI.AmazonScraperAgent - INFO - Built optimized Amazon search query: Apple smartphone iPhone 16 Apple iPhone 16 iPhone 16 Pro
2025-05-13 16:25:43,412 - DealFinderAI.AmazonScraperAgent - INFO - Built Amazon query: Apple smartphone iPhone 16 Apple iPhone 16 iPhone 16 Pro
2025-05-13 16:25:43,412 - DealFinderAI.AmazonScraperAgent - INFO - Making Amazon search request with params: {'k': 'Apple smartphone iPhone 16 Apple iPhone 16 iPhone 16 Pro', 'ref': 'nb_sb_noss', 'crid': 1747167943, 'i': 'aps', 'search-alias': 'electronics'}
2025-05-13 16:25:44,682 - DealFinderAI.AmazonScraperAgent - INFO - Found 33 product divs in search results
2025-05-13 16:25:44,690 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: 15 ProMax Smartphone, 6+256GB Unlocked Phone, Android 13.0, 48+108MP Zoom Camera, Mobile Phone with Build-in Pen,Long Battery Life 6800mAh, Dual SIM, 6.7 HD Screen,5G/4G (Gold) at 158.88 USD
2025-05-13 16:25:44,690 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: 15 ProMax Smartphone, 6+256GB Unlocked Phone, Android 13.0, 48+108MP Zoom Camera, Mobile Phone with Build-in Pen,Long Battery Life 6800mAh, Dual SIM, 6.7 HD Screen,5G/4G (Gold) at 158.88 USD
2025-05-13 16:25:44,694 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Apple iPhone 16 Pro, US Version, 128GB, Black Titanium - Unlocked (Renewed) at 819.95 USD
2025-05-13 16:25:44,695 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Apple iPhone 16 Pro, US Version, 128GB, Black Titanium - Unlocked (Renewed) at 819.95 USD
2025-05-13 16:25:44,700 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Apple iPhone 16 Pro, US Version, 128GB, White Titanium - Unlocked (Renewed Premium) at 899.97 USD
2025-05-13 16:25:44,700 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Apple iPhone 16 Pro, US Version, 128GB, White Titanium - Unlocked (Renewed Premium) at 899.97 USD
2025-05-13 16:25:44,705 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Apple iPhone 16, US Version, 128GB, Black - Unlocked (Renewed Premium) at 722.58 USD
2025-05-13 16:25:44,705 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Apple iPhone 16, US Version, 128GB, Black - Unlocked (Renewed Premium) at 722.58 USD
2025-05-13 16:25:44,711 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Apple at 48.75 USD
2025-05-13 16:25:44,711 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Apple at 48.75 USD
2025-05-13 16:25:44,715 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Apple iPhone 16 Pro Max, US Version, 1TB, Black Titanium - Unlocked (Renewed Premium) at 1550.0 USD
2025-05-13 16:25:44,715 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Apple iPhone 16 Pro Max, US Version, 1TB, Black Titanium - Unlocked (Renewed Premium) at 1550.0 USD
2025-05-13 16:25:44,718 - DealFinderAI.AmazonScraperAgent - WARNING - Incomplete data for ASIN B0DGHH7S34, falling back to Gemini extraction.
2025-05-13 16:25:44,718 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: 
            Extract detailed product information from this Amazon listing HTML:
            
            ```html
            <div class="sg-col-4-of-24 sg-col-4-of-12 s-result-item s-asin sg-col-4-of-16 sg-col s-widget-spacing-small sg-col-4-of-20" data-asin="B0DGHH7S34" data-component-type="s-search-result" data-index="12" data-uuid="f7524e6a-6ac1-4496-9a6c-803d97227328" id="f7524e6a-6ac1-4496-9a6c-803d97227328" role="listitem"><div class="sg-col-inner"><div cel_widget_id="MAIN-SEARCH_RESULTS-12" class="s-widget-container s-spacing-small s-widget-container-height-small celwidget slot=MAIN template=SEARCH_RESULTS widgetId=search-results_7" data-csa-c-item-id="amzn1.asin.1.B0DGHH7S34" data-csa-c-pos="7" data-csa-c-type="item" data-csa-op-log-render=""><span class="a-declarative" data-action="puis-card-container-declarative" data-csa-c-func-deps="aui-da-puis-card-container-declarative" data-csa-c-item-id="amzn1.asin.B0DGHH7S34" data-csa-c-owner="puis" data-csa-c-posx="7" data-csa-c-type="item" data-render-id="r2dgdl72238svj2w3927v5zgxjn" data-version-id="vgrbnavj5iylf2a1plj09cp2jv"><div class="puis-card-container s-card-container s-overflow-hidden aok-relative puis-expand-height puis-include-content-margin puis puis-vgrbnavj5iylf2a1plj09cp2jv s-latency-cf-section puis-card-border" data-cy="asin-faceout-container"><div class="a-section a-spacing-base"><div class="s-product-image-container aok-relative s-text-center s-image-overlay-grey puis-image-overlay-grey s-padding-left-small s-padding-right-small puis-spacing-small s-height-equalized puis puis-vgrbnavj5iylf2a1plj09cp2jv" data-cy="image-container"><span class="rush-component" data-component-type="s-product-image" data-render-id="r2dgdl72238svj2w3927v5zgxjn" data-version-id="vgrbnavj5iylf2a1plj09cp2jv"><a class="a-link-normal s-no-outline" href="/Apple-iPhone-MagSafe-Camera-Control/dp/B0DGHH7S34/ref=sr_1_7?crid=1747167943&amp;dib=eyJ2IjoiMSJ9.9A8G5ZsnYDNgmjVvfoRq9skEYrraPXLm0JZ8ASE9RxF14BC9YrU3VTtomAJGCEQHO34dF8gGQfHZwLBPj-UvrYBpV6aCxXFwcGfY5-cjws8CnyAluTaQ9vyCPmOxRzQM5XmAy2C8Z8ElbCcCVZByQWRNseAMmy5XuXJRp9Zow_ohwEam3AwPpC_nKvDvOA4L3fOgvm8BEU2WxuFJnwW2_Xt-Ete8wzG5gT07qdSsDR7fQwmlUGrbuJDzWIJ8dPPc1GM4nkM8EpGVE4TKBWLVQuQItmeVF8sK-RnOLkXtSp0.Z1gC8Dq9eJVPVsHVTZzbwk0FgO1Jw5XnN3g049TpY6c&amp;dib_tag=se&amp;keywords=Apple+smartphone+iPhone+16+Apple+iPhone+16+iPhone+16+Pro&amp;qid=1747167943&amp;s=electronics&amp;sr=1-7" tabindex="-1"><div class="a-section aok-relative s-image-square-aspect"><img alt="Apple iPhone 16 Pro Clear Case with MagSafe and Camera Control " aria-hidden="true" class="s-image" data-image-index="7" data-image-latency="s-product-image" data-image-load="" data-image-source-density="1" src="https://m.media-amazon.com/images/I/71vZ5g0-+uL._AC_UL320_.jpg" srcset="https://m.media-amazon.com/images/I/71vZ5g0-+uL._AC_UL320_.jpg 1x, https://m.media-amazon.com/images/I/71vZ5g0-+uL._AC_UL480_FMwebp_QL65_.jpg 1.5x, https://m.media-amazon.com/images/I/71vZ5g0-+uL._AC_UL640_FMwebp_QL65_.jpg 2x, https://m.media-amazon.com/images/I/71vZ5g0-+uL._AC_UL800_FMwebp_QL65_.jpg 2.5x, https://m.media-amazon.com/images/I/71vZ5g0-+uL._AC_UL960_FMwebp_QL65_.jpg 3x"/></div></a></span></div><div class="a-section a-spacing-small puis-padding-left-small puis-padding-right-small"><div class="a-section a-spacing-none a-spacing-top-small s-title-instructions-style" data-cy="title-recipe"><div class="a-row a-color-secondary"><h2 class="a-size-mini s-line-clamp-1"><span class="a-size-base-plus a-color-base">Apple</span></h2></div><a class="a-link-normal s-line-clamp-4 s-link-style a-text-normal" href="/Apple-iPhone-MagSafe-Camera-Control/dp/B0DGHH7S34/ref=sr_1_7?crid=1747167943&amp;dib=eyJ2IjoiMSJ9.9A8G5ZsnYDNgmjVvfoRq9skEYrraPXLm0JZ8ASE9RxF14BC9YrU3VTtomAJGCEQHO34dF8gGQfHZwLBPj-UvrYBpV6aCxXFwcGfY5-cjws8CnyAluTaQ9vyCPmOxRzQM5XmAy2C8Z8ElbCcCVZByQWRNseAMmy5XuXJRp9Zow_ohwEam3AwPpC_nKvDvOA4L3fOgvm8BEU2WxuFJnwW2_Xt-Ete8wzG5gT07qdSsDR7fQwmlUGrbuJDzWIJ8dPPc1GM4nkM8EpGVE4TKBWLVQuQItmeVF8sK-RnOLkXtSp0.Z1gC8Dq9eJVPVsHVTZzbwk0FgO1Jw5XnN3g049TpY6c&amp;dib_tag=se&amp;keywords=Apple+smartphone+iPhone+16+Apple+iPhone+16+iPhone+16+Pro&amp;qid=1747167943&amp;s=electronics&amp;sr=1-7"><h2 aria-label="iPhone 16 Pro Clear Case with MagSafe and Camera Control " class="a-size-base-plus a-spacing-none a-color-base a-text-normal"><span>iPhone 16 Pro Clear Case with MagSafe and Camera Control </span></h2></a> </div><div class="a-section a-spacing-none a-spacing-top-micro" data-cy="reviews-block"><div class="a-row a-size-small"><span class="a-declarative" data-a-popover='{"position":"triggerBottom","popoverLabel":"4.3 out of 5 stars, rating details","url":"/review/widgets/average-customer-review/popover/ref=acr_search__popover?ie=UTF8&amp;asin=B0DGHH7S34&amp;ref_=acr_search__popover&amp;contextId=search","closeButton":true,"closeButtonLabel":""}' data-action="a-popover" data-csa-c-func-deps="aui-da-a-popover" data-csa-c-type="widget" data-render-id="r2dgdl72238svj2w3927v5zgxjn" data-version-id="vgrbnavj5iylf2a1plj09cp2jv"><a aria-label="4.3 out of 5 stars, rating details" class="a-popover-trigger a-declarative" href="javascript:void(0)" role="button"><i aria-hidden="true" class="a-icon a-icon-star-small a-star-small-4-5" data-cy="reviews-ratings-slot"><span class="a-icon-alt">4.3 out of 5 stars</span></i><i class="a-icon a-icon-popover"></i></a></span> <span class="rush-component" data-component-type="s-client-side-analytics" data-render-id="r2dgdl72238svj2w3927v5zgxjn" data-version-id="vgrbnavj5iylf2a1plj09cp2jv"><div class="s-csa-instrumentation-wrapper alf-search-csa-instrumentation-wrapper" data-csa-c-asin="B0DGHH7S34" data-csa-c-content-id="alf-customer-ratings-count-component" data-csa-c-layout="GRID" data-csa-c-slot-id="alf-reviews" data-csa-c-type="alf-af-component" data-csa-op-log-render="" style="display: inline-block"><a aria-label="776 ratings" class="a-link-normal s-underline-text s-underline-link-text s-link-style" href="/Apple-iPhone-MagSafe-Camera-Control/dp/B0DGHH7S34/ref=sr_1_7?crid=1747167943&amp;dib=eyJ2IjoiMSJ9.9A8G5ZsnYDNgmjVvfoRq9skEYrraPXLm0JZ8ASE9RxF14BC9YrU3VTtomAJGCEQHO34dF8gGQfHZwLBPj-UvrYBpV6aCxXFwcGfY5-cjws8CnyAluTaQ9vyCPmOxRzQM5XmAy2C8Z8ElbCcCVZByQWRNseAMmy5XuXJRp9Zow_ohwEam3AwPpC_nKvDvOA4L3fOgvm8BEU2WxuFJnwW2_Xt-Ete8wzG5gT07qdSsDR7fQwmlUGrbuJDzWIJ8dPPc1GM4nkM8EpGVE4TKBWLVQuQItmeVF8sK-RnOLkXtSp0.Z1gC8Dq9eJVPVsHVTZzbwk0FgO1Jw5XnN3g049TpY6c&amp;dib_tag=se&amp;keywords=Apple+smartphone+iPhone+16+Apple+iPhone+16+iPhone+16+Pro&amp;qid=1747167943&amp;s=electronics&amp;sr=1-7#customerReviews"><span aria-hidden="true" class="a-size-base s-underline-text">776</span> </a> </div></span></div><div class="a-row a-size-base"><span class="a-size-base a-color-secondary">1K+ bought in past month</span></div></div><div class="a-section a-spacing-none a-spacing-top-small s-price-instructions-style" data-cy="price-recipe"><div class="a-row a-size-base a-color-base"><div class="a-row"></div><div class="a-row"></div></div></div><div class="a-section a-spacing-none a-spacing-top-micro" data-cy="delivery-recipe"><div class="a-row a-size-base a-color-secondary s-align-children-center"></div></div><div class="a-section a-spacing-none a-spacing-top-mini"><div class="puis-see-details-content"><div data-csa-c-content-id="s-search-see-details-button" data-csa-c-device-env="WEB" data-csa-c-device-os="UNRECOGNIZED" data-csa-c-device-type="DESKTOP" data-csa-c-item-id="B0DGHH7S34" data-csa-c-item-type="asin" data-csa-c-type="action"><span class="a-button a-button-base"><span class="a-button-inner"><a class="a-button-text" href="/Apple-iPhone-MagSafe-Camera-Control/dp/B0DGHH7S34/ref=sr_1_7_so_CELLULAR_PHONE_CASE?crid=1747167943&amp;dib=eyJ2IjoiMSJ9.9A8G5ZsnYDNgmjVvfoRq9skEYrraPXLm0JZ8ASE9RxF14BC9YrU3VTtomAJGCEQHO34dF8gGQfHZwLBPj-UvrYBpV6aCxXFwcGfY5-cjws8CnyAluTaQ9vyCPmOxRzQM5XmAy2C8Z8ElbCcCVZByQWRNseAMmy5XuXJRp9Zow_ohwEam3AwPpC_nKvDvOA4L3fOgvm8BEU2WxuFJnwW2_Xt-Ete8wzG5gT07qdSsDR7fQwmlUGrbuJDzWIJ8dPPc1GM4nkM8EpGVE4TKBWLVQuQItmeVF8sK-RnOLkXtSp0.Z1gC8Dq9eJVPVsHVTZzbwk0FgO1Jw5XnN3g049TpY6c&amp;dib_tag=se&amp;keywords=Apple+smartphone+iPhone+16+Apple+iPhone+16+iPhone+16+Pro&amp;qid=1747167943&amp;s=electronics&amp;sr=1-7">See options</a></span></span></div></div></div><div class="a-section a-spacing-none a-spacing-top-mini" data-cy="secondary-offer-recipe"><div class="a-row a-size-base a-color-secondary"><span class="a-size-base a-color-secondary">No featured offers available</span><br/><span class="a-color-base">$25.76</span><span class="a-letter-space"></span><span class="a-declarative" data-action="s-show-all-offers-display" data-csa-c-func-deps="aui-da-s-show-all-offers-display" data-csa-c-type="widget" data-render-id="r2dgdl72238svj2w3927v5zgxjn" data-s-show-all-offers-display='{"assetMismatch":"Abandon","url":"/gp/aod/ajax/ref=sr_1_7_aod?asin=B0DGHH7S34&amp;pc=sp&amp;s=electronics&amp;keywords=Apple+smartphone+iPhone+16+Apple+iPhone+16+iPhone+16+Pro&amp;crid=1747167943&amp;dib_tag=se&amp;dib=eyJ2IjoiMSJ9.9A8G5ZsnYDNgmjVvfoRq9skEYrraPXLm0JZ8ASE9RxF14BC9YrU3VTtomAJGCEQHO34dF8gGQfHZwLBPj-UvrYBpV6aCxXFwcGfY5-cjws8CnyAluTaQ9vyCPmOxRzQM5XmAy2C8Z8ElbCcCVZByQWRNseAMmy5XuXJRp9Zow_ohwEam3AwPpC_nKvDvOA4L3fOgvm8BEU2WxuFJnwW2_Xt-Ete8wzG5gT07qdSsDR7fQwmlUGrbuJDzWIJ8dPPc1GM4nkM8EpGVE4TKBWLVQuQItmeVF8sK-RnOLkXtSp0.Z1gC8Dq9eJVPVsHVTZzbwk0FgO1Jw5XnN3g049TpY6c&amp;qid=1747167943&amp;sr=1-7","fallbackUrl":"/gp/offer-listing/B0DGHH7S34/ref=sr_1_7_olp?s=electronics&amp;keywords=Apple+smartphone+iPhone+16+Apple+iPhone+16+iPhone+16+Pro&amp;crid=1747167943&amp;dib_tag=se&amp;dib=eyJ2IjoiMSJ9.9A8G5ZsnYDNgmjVvfoRq9skEYrraPXLm0JZ8ASE9RxF14BC9YrU3VTtomAJGCEQHO34dF8gGQfHZwLBPj-UvrYBpV6aCxXFwcGfY5-cjws8CnyAluTaQ9vyCPmOxRzQM5XmAy2C8Z8ElbCcCVZByQWRNseAMmy5XuXJRp9Zow_ohwEam3AwPpC_nKvDvOA4L3fOgvm8BEU2WxuFJnwW2_Xt-Ete8wzG5gT07qdSsDR7fQwmlUGrbuJDzWIJ8dPPc1GM4nkM8EpGVE4TKBWLVQuQItmeVF8sK-RnOLkXtSp0.Z1gC8Dq9eJVPVsHVTZzbwk0FgO1Jw5XnN3g049TpY6c&amp;qid=1747167943&amp;sr=1-7"}' data-version-id="vgrbnavj5iylf2a1plj09cp2jv"><a class="a-link-normal s-link-style s-underline-text s-underline-link-text" href="/gp/offer-listing/B0DGHH7S34/ref=sr_1_7_olp?s=electronics&amp;keywords=Apple+smartphone+iPhone+16+Apple+iPhone+16+iPhone+16+Pro&amp;crid=1747167943&amp;dib_tag=se&amp;dib=eyJ2IjoiMSJ9.9A8G5ZsnYDNgmjVvfoRq9skEYrraPXLm0JZ8ASE9RxF14BC9YrU3VTtomAJGCEQHO34dF8gGQfHZwLBPj-UvrYBpV6aCxXFwcGfY5-cjws8CnyAluTaQ9vyCPmOxRzQM5XmAy2C8Z8ElbCcCVZByQWRNseAMmy5XuXJRp9Zow_ohwEam3AwPpC_nKvDvOA4L3fOgvm8BEU2WxuFJnwW2_Xt-Ete8wzG5gT07qdSsDR7fQwmlUGrbuJDzWIJ8dPPc1GM4nkM8EpGVE4TKBWLVQuQItmeVF8sK-RnOLkXtSp0.Z1gC8Dq9eJVPVsHVTZzbwk0FgO1Jw5XnN3g049TpY6c&amp;qid=1747167943&amp;sr=1-7">(5 used &amp; new offers)</a></span><div class="a-section aok-hidden" id="all-offers-display"><div class="a-spinner-wrapper aok-hidden" id="all-offers-display-spinner"><span class="a-spinner a-spinner-medium"></span></div></div><span class="a-declarative" data-action="close-all-offers-display" data-csa-c-func-deps="aui-da-close-all-offers-display" data-csa-c-type="widget" data-render-id="r2dgdl72238svj2w3927v5zgxjn" data-version-id="vgrbnavj5iylf2a1plj09cp2jv"><div class="a-section aok-hidden aod-darken-background" id="aod-background"></div></span></div></div></div></div></div></span></div></div></div>
            ```
            
            Extract:
            - title: Full product title
            - price: Numeric price value only (no currency symbol)
            - was_price: Original price before discount (if present)
            - currency: Currency code (e.g., USD)
            - url: Product URL
            - image_url: Main product image URL
            - rating: Star rating (0-5)
            - reviews: Number of reviews
            - asin: Amazon ASIN
            - is_prime: Boolean for Prime eligible
            - is_sponsored: Boolean for sponsored listing
            - is_amazon_choice: Boolean for Amazon's Choice
            - is_best_seller: Boolean for Best Seller
            - description: Any additional description text
            - delivery_info: Delivery/shipping information
            - out_of_stock: Boolean for out of stock status
            
            Return a clean JSON object with these fields. Use null for missing values.
            
2025-05-13 16:25:48,860 - DealFinderAI.AmazonScraperAgent - INFO - Gemini extracted: iPhone 16 Pro Clear Case with MagSafe and Camera Control  at 25.76 USD
2025-05-13 16:25:48,860 - DealFinderAI.AmazonScraperAgent - INFO - Gemini used for product extraction
2025-05-13 16:25:48,860 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: iPhone 16 Pro Clear Case with MagSafe and Camera Control  at 25.76 USD
2025-05-13 16:25:48,860 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: iPhone 16 Pro Clear Case with MagSafe and Camera Control  at 25.76 USD
2025-05-13 16:25:48,869 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Apple iPhone 16 Pro, US Version, 128GB, Desert Titanium - for AT&T (Renewed) at 780.0 USD
2025-05-13 16:25:48,869 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Apple iPhone 16 Pro, US Version, 128GB, Desert Titanium - for AT&T (Renewed) at 780.0 USD
2025-05-13 16:25:48,877 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Apple iPhone 15 Pro, 128GB, Blue Titanium - Unlocked (Renewed Premium) at 679.0 USD
2025-05-13 16:25:48,877 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Apple iPhone 15 Pro, 128GB, Blue Titanium - Unlocked (Renewed Premium) at 679.0 USD
2025-05-13 16:25:48,882 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Apple iPhone 16 Pro Max, US Version, 256GB, Black Titanium - Unlocked (Renewed) at 1134.97 USD
2025-05-13 16:25:48,882 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Apple iPhone 16 Pro Max, US Version, 256GB, Black Titanium - Unlocked (Renewed) at 1134.97 USD
2025-05-13 16:25:50,237 - DealFinderAI.AmazonScraperAgent - INFO - Extracted 10 products from Amazon
2025-05-13 16:25:50,238 - DealFinderAI.AmazonScraperAgent - INFO - Applying relevance filtering to 10 products
2025-05-13 16:25:50,239 - DealFinderAI.AmazonScraperAgent - ERROR - Error in relevance filtering: 'NoneType' object has no attribute 'lower'
2025-05-13 16:25:50,239 - DealFinderAI.Controller - INFO - Amazon response content: {'source': 'Amazon', 'query': 'Apple smartphone iPhone 16 Apple iPhone 16 iPhone 16 Pro', 'products': [{'title': '15 ProMax Smartphone, 6+256GB Unlocked Phone, Android 13.0, 48+108MP Zoom Camera, Mobile Phone with Build-in Pen,Long Battery Life 6800mAh, Dual SIM, 6.7 HD Screen,5G/4G (Gold)', 'price': 158.88, 'was_price': None, 'currency': 'USD', 'url': 'https://www.amazon.com/dp/B0DZTVK1XC', 'image_url': 'https://m.media-amazon.com/images/I/71Je0y+pnvL._AC_UL320_.jpg', 'rating': 4.0, 'reviews': 13, 'is_sponsored': True, 'is_prime': False, 'is_amazon_choice': False, 'is_best_seller': False, 'asin': 'B0DZTVK1XC', 'description': '+5 other colors/patternsSponsoredSponsored Youre seeing this ad based on the products relevance to your search query.Leave ad feedback 15 ProMax Smartphone, 6+256GB Unlocked Phone, Android 13.0, 48+108MP Zoom Camera, Mobile Phone with Build-in Pen,Long Battery Life 6800mAh, Dual SIM, 6.7 HD Screen,5G/4G (Gold) 4.0 out of 5 stars 13 50+ bought in past monthPrice, product page$158.88$158.88FREE delivery Sun, May 18Or fastest delivery Tomorrow, May 14Add to cart', 'delivery_info': '50+ bought in past month', 'out_of_stock': False, 'source': 'Amazon'}, {'title': 'Apple iPhone 16 Pro, US Version, 128GB, Black Titanium - Unlocked (Renewed)', 'price': 819.95, 'was_price': None, 'currency': 'USD', 'url': 'https://www.amazon.com/Apple-iPhone-Version-128GB-Titanium/dp/B0DHJG6JPH/ref=sr_1_2?crid=1747167943&dib=eyJ2IjoiMSJ9.9A8G5ZsnYDNgmjVvfoRq9skEYrraPXLm0JZ8ASE9RxF14BC9YrU3VTtomAJGCEQHO34dF8gGQfHZwLBPj-UvrYBpV6aCxXFwcGfY5-cjws8CnyAluTaQ9vyCPmOxRzQM5XmAy2C8Z8ElbCcCVZByQWRNseAMmy5XuXJRp9Zow_ohwEam3AwPpC_nKvDvOA4L3fOgvm8BEU2WxuFJnwW2_Xt-Ete8wzG5gT07qdSsDR7fQwmlUGrbuJDzWIJ8dPPc1GM4nkM8EpGVE4TKBWLVQuQItmeVF8sK-RnOLkXtSp0.Z1gC8Dq9eJVPVsHVTZzbwk0FgO1Jw5XnN3g049TpY6c&dib_tag=se&keywords=Apple+smartphone+iPhone+16+Apple+iPhone+16+iPhone+16+Pro&qid=1747167943&s=electronics&sr=1-2', 'image_url': 'https://m.media-amazon.com/images/I/51MCIUhxvZL._AC_UL320_.jpg', 'rating': 4.4, 'reviews': 193, 'is_sponsored': False, 'is_prime': False, 'is_amazon_choice': False, 'is_best_seller': False, 'asin': 'B0DHJG6JPH', 'description': 'Apple iPhone 16 Pro, US Version, 128GB, Black Titanium - Unlocked (Renewed) Options:4 sizesTop Reviewed for Functionality4.4 out of 5 stars 193 100+ bought in past monthPrice, product page$819.95$819.95FREE delivery Tomorrow, May 14See optionsMore Buying Choices$817.99(12+ used & new offers)', 'delivery_info': '100+ bought in past month', 'out_of_stock': False, 'source': 'Amazon', 'relevance_score': 31}, {'title': 'Apple iPhone 16 Pro, US Version, 128GB, White Titanium - Unlocked (Renewed Premium)', 'price': 899.97, 'was_price': None, 'currency': 'USD', 'url': 'https://www.amazon.com/Apple-iPhone-Version-128GB-Titanium/dp/B0DNTB4BWB/ref=sr_1_3?crid=1747167943&dib=eyJ2IjoiMSJ9.9A8G5ZsnYDNgmjVvfoRq9skEYrraPXLm0JZ8ASE9RxF14BC9YrU3VTtomAJGCEQHO34dF8gGQfHZwLBPj-UvrYBpV6aCxXFwcGfY5-cjws8CnyAluTaQ9vyCPmOxRzQM5XmAy2C8Z8ElbCcCVZByQWRNseAMmy5XuXJRp9Zow_ohwEam3AwPpC_nKvDvOA4L3fOgvm8BEU2WxuFJnwW2_Xt-Ete8wzG5gT07qdSsDR7fQwmlUGrbuJDzWIJ8dPPc1GM4nkM8EpGVE4TKBWLVQuQItmeVF8sK-RnOLkXtSp0.Z1gC8Dq9eJVPVsHVTZzbwk0FgO1Jw5XnN3g049TpY6c&dib_tag=se&keywords=Apple+smartphone+iPhone+16+Apple+iPhone+16+iPhone+16+Pro&qid=1747167943&s=electronics&sr=1-3', 'image_url': 'https://m.media-amazon.com/images/I/61dJfouiziL._AC_UL320_.jpg', 'rating': 4.5, 'reviews': 60, 'is_sponsored': False, 'is_prime': False, 'is_amazon_choice': False, 'is_best_seller': False, 'asin': 'B0DNTB4BWB', 'description': 'Apple iPhone 16 Pro, US Version, 128GB, White Titanium - Unlocked (Renewed Premium) Options:4 sizes4.5 out of 5 stars 60 Price, product page$899.97$899.97FREE delivery Thu, May 15Only 12 left in stock - order soon.See optionsMore Buying Choices$899.00(4 new offers)', 'delivery_info': 'More Buying Choices', 'out_of_stock': False, 'source': 'Amazon', 'relevance_score': 29}, {'title': 'Apple iPhone 16, US Version, 128GB, Black - Unlocked (Renewed Premium)', 'price': 722.58, 'was_price': 759.05, 'currency': 'USD', 'url': 'https://www.amazon.com/Apple-iPhone-Version-128GB-Black/dp/B0DPD1296D/ref=sr_1_4?crid=1747167943&dib=eyJ2IjoiMSJ9.9A8G5ZsnYDNgmjVvfoRq9skEYrraPXLm0JZ8ASE9RxF14BC9YrU3VTtomAJGCEQHO34dF8gGQfHZwLBPj-UvrYBpV6aCxXFwcGfY5-cjws8CnyAluTaQ9vyCPmOxRzQM5XmAy2C8Z8ElbCcCVZByQWRNseAMmy5XuXJRp9Zow_ohwEam3AwPpC_nKvDvOA4L3fOgvm8BEU2WxuFJnwW2_Xt-Ete8wzG5gT07qdSsDR7fQwmlUGrbuJDzWIJ8dPPc1GM4nkM8EpGVE4TKBWLVQuQItmeVF8sK-RnOLkXtSp0.Z1gC8Dq9eJVPVsHVTZzbwk0FgO1Jw5XnN3g049TpY6c&dib_tag=se&keywords=Apple+smartphone+iPhone+16+Apple+iPhone+16+iPhone+16+Pro&qid=1747167943&s=electronics&sr=1-4', 'image_url': 'https://m.media-amazon.com/images/I/31IfD4wYdfL._AC_UL320_.jpg', 'rating': 4.5, 'reviews': 36, 'is_sponsored': False, 'is_prime': False, 'is_amazon_choice': False, 'is_best_seller': False, 'asin': 'B0DPD1296D', 'description': 'Apple iPhone 16, US Version, 128GB, Black - Unlocked (Renewed Premium) Options:6 sizesTop Reviewed for Functionality4.5 out of 5 stars 36 100+ bought in past monthPrice, product page$722.58$722.58 List Price: $759.05List Price: $759.05$759.05FREE delivery Thu, May 15Only 1 left in stock - order soon.See optionsMore Buying Choices$719.45(7 new offers)', 'delivery_info': '100+ bought in past month', 'out_of_stock': False, 'source': 'Amazon', 'relevance_score': 29}, {'title': 'Apple', 'price': 48.75, 'was_price': None, 'currency': 'USD', 'url': 'https://www.amazon.com/Apple-iPhone-Silicone-MagSafe-Control/dp/B0DGHKP48R/ref=sr_1_5?crid=1747167943&dib=eyJ2IjoiMSJ9.9A8G5ZsnYDNgmjVvfoRq9skEYrraPXLm0JZ8ASE9RxF14BC9YrU3VTtomAJGCEQHO34dF8gGQfHZwLBPj-UvrYBpV6aCxXFwcGfY5-cjws8CnyAluTaQ9vyCPmOxRzQM5XmAy2C8Z8ElbCcCVZByQWRNseAMmy5XuXJRp9Zow_ohwEam3AwPpC_nKvDvOA4L3fOgvm8BEU2WxuFJnwW2_Xt-Ete8wzG5gT07qdSsDR7fQwmlUGrbuJDzWIJ8dPPc1GM4nkM8EpGVE4TKBWLVQuQItmeVF8sK-RnOLkXtSp0.Z1gC8Dq9eJVPVsHVTZzbwk0FgO1Jw5XnN3g049TpY6c&dib_tag=se&keywords=Apple+smartphone+iPhone+16+Apple+iPhone+16+iPhone+16+Pro&qid=1747167943&s=electronics&sr=1-5', 'image_url': 'https://m.media-amazon.com/images/I/41I8pqWpYkL._AC_UL320_.jpg', 'rating': 4.3, 'reviews': 1580, 'is_sponsored': False, 'is_prime': False, 'is_amazon_choice': False, 'is_best_seller': False, 'asin': 'B0DGHKP48R', 'description': '+6AppleiPhone 16 Pro Silicone Case with MagSafe and Camera Control - Black \u200b\u200b\u200b\u200b\u200b\u200b\u200b 4.3 out of 5 stars 1,580 1K+ bought in past monthPrice, product page$48.75$48.75FREE delivery Sun, May 18Or fastest delivery Tomorrow, May 14Add to cartMore Buying Choices$39.28(3+ used & new offers)', 'delivery_info': '1K+ bought in past month', 'out_of_stock': False, 'source': 'Amazon', 'relevance_score': 15}]}
2025-05-13 16:25:50,240 - DealFinderAI.Controller - INFO - Amazon returned 5 products
2025-05-13 16:25:50,240 - DealFinderAI.WalmartScraperAgent - INFO - Searching Walmart for: {'product_type': 'smartphone', 'keywords': ['iphone', '16'], 'price_range': None, 'brands': ['Apple'], 'features': [], 'sorting_preference': None, 'buy_it_now': True}
2025-05-13 16:25:50,240 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: 
            Optimize this search query for Walmart's search engine:
            
            "smartphone iphone 16 Apple"
            
            For Walmart searches, please:
            1. Focus on model numbers and specific identifiers if present
            2. Include key brand names (Walmart's search works well with brand names)
            3. Remove generic words that may dilute results
            4. Add Walmart-specific terms that might improve results (like "Rollback" if looking for deals)
            5. Prioritize precise product names and specifications
            
            Return a JSON object with:
            - optimized_keywords: List of 3-5 optimized search terms (most important first)
            - department_hint: Any Walmart department suggestion (Electronics, Home, etc.)
            - must_include_terms: Terms that MUST be in results
            - exclude_terms: Terms that should NOT be in results
            - walmart_specific_filters: Any Walmart-specific filters to apply
            
            Format as JSON only with no explanation.
            
2025-05-13 16:25:51,235 - DealFinderAI.WalmartScraperAgent - INFO - Optimized search parameters: {'product_type': 'smartphone', 'keywords': ['iPhone 16', 'Apple iPhone 16', 'iPhone 16 Pro Max', 'Apple iPhone 16 Pro'], 'price_range': None, 'brands': ['Apple'], 'features': [], 'sorting_preference': None, 'buy_it_now': True, 'department': 'Electronics', 'must_include_terms': ['Apple', 'iPhone 16'], 'exclude_terms': ['smartphone'], 'walmart_filters': ['Rollback', 'Deals']}
2025-05-13 16:25:51,235 - DealFinderAI.WalmartScraperAgent - INFO - Built optimized Walmart search query: Apple smartphone iPhone 16 Apple iPhone 16 iPhone 16 Pro Max
2025-05-13 16:25:51,235 - DealFinderAI.WalmartScraperAgent - INFO - Built Walmart query: Apple smartphone iPhone 16 Apple iPhone 16 iPhone 16 Pro Max
2025-05-13 16:25:51,236 - DealFinderAI.WalmartScraperAgent - INFO - Making Walmart search request with params: {'q': 'Apple smartphone iPhone 16 Apple iPhone 16 iPhone 16 Pro Max Electronics', 'page': 1, 'affinityOverride': 'default'}
2025-05-13 16:25:53,953 - DealFinderAI.WalmartScraperAgent - INFO - Extracted 0 products from JSON data
2025-05-13 16:25:53,953 - DealFinderAI.WalmartScraperAgent - INFO - JSON extraction failed, falling back to HTML extraction
2025-05-13 16:25:53,955 - DealFinderAI.WalmartScraperAgent - INFO - Found 9 product divs in HTML
2025-05-13 16:25:53,957 - DealFinderAI.WalmartScraperAgent - ERROR - Error extracting product data: cannot access local variable 'href' where it is not associated with a value
2025-05-13 16:25:53,959 - DealFinderAI.WalmartScraperAgent - ERROR - Error extracting product data: cannot access local variable 'href' where it is not associated with a value
2025-05-13 16:25:53,961 - DealFinderAI.WalmartScraperAgent - ERROR - Error extracting product data: cannot access local variable 'href' where it is not associated with a value
2025-05-13 16:25:53,963 - DealFinderAI.WalmartScraperAgent - ERROR - Error extracting product data: cannot access local variable 'href' where it is not associated with a value
2025-05-13 16:25:56,412 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 16:25:56,412 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Straight Talk Apple iPhone 16 Pro Max, 256GB, White Titanium - Prepaid Smartphone [Locked to Straight Talk] at 1199.0 USD
2025-05-13 16:25:58,907 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 16:25:58,907 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Straight Talk Apple iPhone 16 Pro Max, 256GB, Black Titanium - Prepaid Smartphone [Locked to Straight Talk] at 1199.0 USD
2025-05-13 16:26:01,251 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 16:26:01,251 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Straight Talk Apple iPhone 16 Pro Max, 256GB, Natural Titanium - Prepaid Smartphone [Locked to Straight Talk] at 1199.0 USD
2025-05-13 16:26:03,538 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 16:26:03,538 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: AT&T iPhone 16 Pro Max 256GB Natural Titanium. Apple Intelligence. at 1249.0 USD
2025-05-13 16:26:06,176 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 16:26:06,176 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Verizon iPhone 16 Pro Max 256GB Black Titanium. Apple Intelligence. at 1249.0 USD
2025-05-13 16:26:06,177 - DealFinderAI.WalmartScraperAgent - INFO - Extracted 5 products from HTML
2025-05-13 16:26:06,177 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Straight Talk Apple iPhone 16 Pro Max, 256GB, White Titanium - Prepaid Smartphone [Locked to Straight Talk] at 1199.0 USD
2025-05-13 16:26:06,177 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Straight Talk Apple iPhone 16 Pro Max, 256GB, Black Titanium - Prepaid Smartphone [Locked to Straight Talk] at 1199.0 USD
2025-05-13 16:26:06,177 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Straight Talk Apple iPhone 16 Pro Max, 256GB, Natural Titanium - Prepaid Smartphone [Locked to Straight Talk] at 1199.0 USD
2025-05-13 16:26:06,177 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: AT&T iPhone 16 Pro Max 256GB Natural Titanium. Apple Intelligence. at 1249.0 USD
2025-05-13 16:26:06,178 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Verizon iPhone 16 Pro Max 256GB Black Titanium. Apple Intelligence. at 1249.0 USD
2025-05-13 16:26:07,054 - DealFinderAI.WalmartScraperAgent - INFO - Extracted 5 products from Walmart
2025-05-13 16:26:07,056 - DealFinderAI.WalmartScraperAgent - INFO - Applying relevance filtering to 5 products
2025-05-13 16:26:07,057 - DealFinderAI.WalmartScraperAgent - INFO - Filtered to 5 most relevant products
2025-05-13 16:26:07,057 - DealFinderAI.Controller - INFO - Walmart returned 5 products
2025-05-13 16:26:07,058 - DealFinderAI.EbayScraperAgent - INFO - Searching eBay for: {'product_type': 'smartphone', 'keywords': ['iphone', '16'], 'price_range': None, 'brands': ['Apple'], 'features': [], 'sorting_preference': None, 'buy_it_now': True}
2025-05-13 16:26:07,058 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: 
            Optimize this search query for eBay's search engine:
            
            "smartphone iphone 16 Apple"
            
            For eBay searches, please:
            1. Focus on exact model numbers and specific part identifiers if present
            2. Include key brand names
            3. Remove generic words that may dilute results
            4. Add eBay-specific terms that might improve results
            5. Optimize for finding the most relevant listings
            
            Return a JSON object with:
            - optimized_keywords: List of 3-5 optimized search terms (most important first)
            - category_hints: Any eBay category suggestions
            - must_include_terms: Terms that MUST be in results
            - exclude_terms: Terms that should NOT be in results
            
            Format as JSON only with no explanation.
            
2025-05-13 16:26:08,317 - DealFinderAI.EbayScraperAgent - INFO - Optimized search parameters: {'product_type': 'smartphone', 'keywords': ['iPhone 16', 'Apple iPhone 16', 'iPhone 16 Pro', 'iPhone 16 Pro Max'], 'price_range': None, 'brands': ['Apple'], 'features': [], 'sorting_preference': None, 'buy_it_now': True, 'category_hints': ['Cell Phones & Smartphones'], 'must_include_terms': ['Apple', 'iPhone'], 'exclude_terms': ['repair', 'parts', 'broken', 'damaged']}
2025-05-13 16:26:08,317 - DealFinderAI.EbayScraperAgent - INFO - Built optimized eBay search query: smartphone Apple iPhone 16 Apple iPhone 16 iPhone 16 Pro
2025-05-13 16:26:08,317 - DealFinderAI.EbayScraperAgent - INFO - Built eBay query: smartphone Apple iPhone 16 Apple iPhone 16 iPhone 16 Pro
2025-05-13 16:26:08,318 - DealFinderAI.EbayScraperAgent - INFO - Making eBay search request with params: {'_nkw': 'smartphone Apple iPhone 16 Apple iPhone 16 iPhone 16 Pro Cell Phones & Smartphones', '_sacat': '0', '_ipg': '96', 'LH_BIN': '1'}
2025-05-13 16:26:10,601 - DealFinderAI.EbayScraperAgent - INFO - Found 127 product listings
2025-05-13 16:26:10,602 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 15 (Excellent Condition) - (Unlocked, AT&T, T-Mobile, Verizon) at 479.99 USD
2025-05-13 16:26:10,602 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 15 (Excellent Condition) - (Unlocked, AT&T, T-Mobile, Verizon) at 479.99 USD
2025-05-13 16:26:10,603 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: APPLE IPHONE 16 PRO 128GB VERIZON | UNUSED OPEN BOX - BATTERY 100% at 748.88 USD
2025-05-13 16:26:10,603 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: APPLE IPHONE 16 PRO 128GB VERIZON | UNUSED OPEN BOX - BATTERY 100% at 748.88 USD
2025-05-13 16:26:10,605 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 15 512GB Black 100% Battery Unlocked Smartphone at 584.0 USD
2025-05-13 16:26:10,605 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 15 512GB Black 100% Battery Unlocked Smartphone at 584.0 USD
2025-05-13 16:26:10,606 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: APPLE IPHONE 16 PRO 128GB VERIZON | BRAND NEW IN RETAIL BOX | APPLE WARRANTY at 798.88 USD
2025-05-13 16:26:10,606 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: APPLE IPHONE 16 PRO 128GB VERIZON | BRAND NEW IN RETAIL BOX | APPLE WARRANTY at 798.88 USD
2025-05-13 16:26:10,607 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 16 Pro 256GB Unlocked Very Good Condition at 879.99 USD
2025-05-13 16:26:10,607 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 16 Pro 256GB Unlocked Very Good Condition at 879.99 USD
2025-05-13 16:26:10,608 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 16 Pro Max - 512GB - Black Titanium - MYW73LL/A at 1049.99 USD
2025-05-13 16:26:10,608 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 16 Pro Max - 512GB - Black Titanium - MYW73LL/A at 1049.99 USD
2025-05-13 16:26:10,609 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 16 Pro - 128 GB - Black Titanium (Verizon) at 999.99 USD
2025-05-13 16:26:10,609 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 16 Pro - 128 GB - Black Titanium (Verizon) at 999.99 USD
2025-05-13 16:26:10,609 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: NEW Apple iPhone 16 Pro 1TB - Factory Unlocked - $0.01 at 1175.0 USD
2025-05-13 16:26:10,609 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: NEW Apple iPhone 16 Pro 1TB - Factory Unlocked - $0.01 at 1175.0 USD
2025-05-13 16:26:11,328 - DealFinderAI.EbayScraperAgent - INFO - Extracted 8 products from eBay
2025-05-13 16:26:11,331 - DealFinderAI.EbayScraperAgent - INFO - Applying relevance filtering to 8 products
2025-05-13 16:26:11,331 - DealFinderAI.EbayScraperAgent - INFO - Filtered to 5 most relevant products
2025-05-13 16:26:11,332 - DealFinderAI.Controller - INFO - eBay returned 5 products
2025-05-13 16:26:11,332 - DealFinderAI.Controller - INFO - Total products before aggregation: 15
2025-05-13 16:26:11,332 - DealFinderAI.ResultsAggregatorAgent - INFO - Aggregating results for query: iphone 16
2025-05-13 16:26:11,332 - DealFinderAI.ResultsAggregatorAgent - INFO - Found 3 results from various sources
2025-05-13 16:26:11,333 - DealFinderAI.ResultsAggregatorAgent - INFO - Source Amazon: 5 products
2025-05-13 16:26:11,333 - DealFinderAI.ResultsAggregatorAgent - INFO - Source Walmart: 5 products
2025-05-13 16:26:11,333 - DealFinderAI.ResultsAggregatorAgent - INFO - Source eBay: 5 products
2025-05-13 16:26:11,333 - DealFinderAI.ResultsAggregatorAgent - INFO - Total products extracted: 15
2025-05-13 16:26:11,333 - DealFinderAI.ResultsAggregatorAgent - INFO - Ranking 15 products
2025-05-13 16:26:11,333 - DealFinderAI.ResultsAggregatorAgent - INFO - Sorted 15 products by score
2025-05-13 16:26:11,333 - DealFinderAI.ResultsAggregatorAgent - INFO - Returning 10 diversified products
2025-05-13 16:26:11,334 - DealFinderAI.ResultsAggregatorAgent - INFO - Products after ranking: 10
2025-05-13 16:26:11,334 - DealFinderAI.ResultsAggregatorAgent - INFO - Final products: 10
2025-05-13 16:26:11,334 - DealFinderAI.Controller - INFO - Products after aggregation: 10
2025-05-13 16:26:11,334 - DealFinderAI.ProductComparisonAgent - INFO - Comparing products for query: iphone 16
2025-05-13 16:26:11,334 - DealFinderAI.ProductComparisonAgent - INFO - Found 10 products to compare
2025-05-13 16:26:11,334 - DealFinderAI.ProductComparisonAgent - INFO - Grouping 10 products
2025-05-13 16:26:11,335 - DealFinderAI.ProductComparisonAgent - INFO - Created 0 product groups
2025-05-13 16:26:11,335 - DealFinderAI.ChatMemoryAgent - INFO - Storing context for conversation session_20250513162538_08ad3afc
2025-05-13 16:26:11,336 - DealFinderAI.ChatMemoryAgent - INFO - Storing 10 products for conversation session_20250513162538_08ad3afc
2025-05-13 16:26:11,336 - DealFinderAI.PresentationAgent - INFO - Preparing presentation for 10 products
2025-05-13 16:26:11,336 - DealFinderAI.PresentationAgent - INFO - Formatting 10 products for display
2025-05-13 16:26:11,336 - DealFinderAI.PresentationAgent - INFO - Product 1: Apple - Price: $48.75 - Source: Amazon
2025-05-13 16:26:11,336 - DealFinderAI.PresentationAgent - INFO - Product 2: APPLE IPHONE 16 PRO 128GB VERIZON | BRAND NEW IN RETAIL BOX | APPLE WARRANTY - Price: $798.88 - Source: eBay
2025-05-13 16:26:11,336 - DealFinderAI.PresentationAgent - INFO - Product 3: Straight Talk Apple iPhone 16 Pro Max, 256GB, White Titanium - Prepaid Smartphone [Locked to Straight Talk] - Price: $1199.00 - Source: Walmart
2025-05-13 16:26:11,336 - DealFinderAI.PresentationAgent - INFO - Product 4: Apple iPhone 16 Pro, US Version, 128GB, Black Titanium - Unlocked (Renewed) - Price: $819.95 - Source: Amazon
2025-05-13 16:26:11,337 - DealFinderAI.PresentationAgent - INFO - Product 5: Apple iPhone 16 Pro, US Version, 128GB, White Titanium - Unlocked (Renewed Premium) - Price: $899.97 - Source: Amazon
2025-05-13 16:26:11,337 - DealFinderAI.PresentationAgent - INFO - Product 6: Apple iPhone 16, US Version, 128GB, Black - Unlocked (Renewed Premium) - Price: $722.58 - Source: Amazon
2025-05-13 16:26:11,337 - DealFinderAI.PresentationAgent - INFO - Product 7: 15 ProMax Smartphone, 6+256GB Unlocked Phone, Android 13.0, 48+108MP Zoom Camera, Mobile Phone with Build-in Pen,Long Battery Life 6800mAh, Dual SIM, 6.7 HD Screen,5G/4G (Gold) - Price: $158.88 - Source: Amazon
2025-05-13 16:26:11,337 - DealFinderAI.PresentationAgent - INFO - Product 8: APPLE IPHONE 16 PRO 128GB VERIZON | UNUSED OPEN BOX - BATTERY 100% - Price: $748.88 - Source: eBay
2025-05-13 16:26:11,337 - DealFinderAI.PresentationAgent - INFO - Product 9: Apple iPhone 16 Pro 256GB Unlocked Very Good Condition - Price: $879.99 - Source: eBay
2025-05-13 16:26:11,338 - DealFinderAI.PresentationAgent - INFO - Product 10: Apple iPhone 16 Pro Max - 512GB - Black Titanium - MYW73LL/A - Price: $1049.99 - Source: eBay
2025-05-13 16:26:11,338 - DealFinderAI.ChatMemoryAgent - INFO - Storing context for conversation session_20250513162538_08ad3afc
2025-05-13 16:26:11,338 - DealFinderAI.ChatMemoryAgent - INFO - Storing 10 products for conversation session_20250513162538_08ad3afc
2025-05-13 16:26:11,338 - DealFinderAI.Controller - INFO - Successfully stored search results in memory
2025-05-13 16:26:44,704 - DealFinderAI - INFO - Logging initialized
2025-05-13 16:26:44,705 - DealFinderAI.Main - INFO - Starting DealFinder AI
2025-05-13 16:26:44,705 - DealFinderAI.Main - INFO - Using LangChain implementation
2025-05-13 16:26:44,745 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-13 16:26:44,745 - DealFinderAI.Controller - INFO - Initialized scraper agents: ['amazon', 'walmart', 'ebay']
2025-05-13 16:26:44,745 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-13 16:26:44,745 - DealFinderAI.Controller - INFO - Initialized scraper agents: ['amazon', 'walmart', 'ebay']
2025-05-13 16:26:44,745 - DealFinderAI.Main - INFO - Web app using LangChain implementation with Gemini model
2025-05-13 16:27:15,666 - DealFinderAI - INFO - Logging initialized
2025-05-13 16:27:15,666 - DealFinderAI.Main - INFO - Starting DealFinder AI
2025-05-13 16:27:15,666 - DealFinderAI.Main - INFO - Using LangChain implementation
2025-05-13 16:27:15,707 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-13 16:27:15,708 - DealFinderAI.Controller - INFO - Initialized scraper agents: ['amazon', 'walmart', 'ebay']
2025-05-13 16:27:15,708 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-13 16:27:15,708 - DealFinderAI.Controller - INFO - Initialized scraper agents: ['amazon', 'walmart', 'ebay']
2025-05-13 16:27:15,708 - DealFinderAI.Main - INFO - Web app using LangChain implementation with Gemini model
2025-05-13 16:27:25,136 - DealFinderAI.Controller - INFO - Processing user query: iphone 16
2025-05-13 16:27:25,136 - DealFinderAI.ChatMemoryAgent - INFO - Analyzing query: 'iphone 16' for conversation session_20250513162721_c3b9e529
2025-05-13 16:27:25,136 - DealFinderAI.ChatMemoryAgent - INFO - No product context available for this conversation
2025-05-13 16:27:25,137 - DealFinderAI.Controller - INFO - Analyze response: {'is_follow_up': False, 'focused_product': None, 'referenced_products': [], 'products': []}
2025-05-13 16:27:25,137 - DealFinderAI.Controller - INFO - Is follow-up? False
2025-05-13 16:27:25,137 - DealFinderAI.Controller - INFO - Referenced products: 0
2025-05-13 16:27:25,137 - DealFinderAI.Controller - INFO - Processing as new search query
2025-05-13 16:27:25,137 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: iphone 16
2025-05-13 16:27:26,918 - DealFinderAI.GeminiAgent - WARNING - Failed to parse Gemini response as JSON: ```json
{
  "product_type": "smartphone",
  "keywords": ["iphone", "16"],
  "price_range": null,
  "brands": ["Apple"],
  "features": [],
  "sorting_preference": null,
  "buy_it_now": true
}
```

2025-05-13 16:27:26,921 - DealFinderAI.Controller - INFO - Parsed search parameters: {'product_type': 'smartphone', 'keywords': ['iphone', '16'], 'price_range': None, 'brands': ['Apple'], 'features': [], 'sorting_preference': None, 'buy_it_now': True}
2025-05-13 16:27:26,921 - DealFinderAI.AmazonScraperAgent - INFO - Searching Amazon for: {'product_type': 'smartphone', 'keywords': ['iphone', '16'], 'price_range': None, 'brands': ['Apple'], 'features': [], 'sorting_preference': None, 'buy_it_now': True}
2025-05-13 16:27:26,921 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: 
            Optimize this search query for Amazon's search engine:
            
            "smartphone iphone 16 Apple"
            
            For Amazon searches, please:
            1. Focus on product-specific model numbers and identifiers if present
            2. Include key brand names (Amazon's A9 algorithm prioritizes brand matches)
            3. Remove generic words that may dilute results
            4. Add Amazon-specific terms that might improve results (like "Amazon's Choice" if looking for quality products)
            5. Optimize for Amazon's search algorithm which prioritizes exact matches and recent sales volume
            
            Return a JSON object with:
            - optimized_keywords: List of 3-5 optimized search terms (most important first)
            - amazon_category: Any Amazon department/category suggestion (Electronics, Books, etc.)
            - must_include_terms: Terms that MUST be in results
            - exclude_terms: Terms that should NOT be in results
            - amazon_search_filters: Any Amazon-specific filters to apply (Prime eligible, etc.)
            
            Format as JSON only with no explanation.
            
2025-05-13 16:27:28,143 - DealFinderAI.AmazonScraperAgent - INFO - Optimized search parameters: {'product_type': 'smartphone', 'keywords': ['iPhone 16', 'Apple iPhone 16', 'iPhone 16 Pro Max'], 'price_range': None, 'brands': ['Apple'], 'features': [], 'sorting_preference': None, 'buy_it_now': True, 'category': 'Electronics', 'must_include_terms': ['Apple', 'iPhone 16'], 'exclude_terms': ['smartphone'], 'amazon_filters': ['Prime Eligible', 'New']}
2025-05-13 16:27:28,143 - DealFinderAI.AmazonScraperAgent - INFO - Built optimized Amazon search query: Apple smartphone iPhone 16 Apple iPhone 16 iPhone 16 Pro Max
2025-05-13 16:27:28,143 - DealFinderAI.AmazonScraperAgent - INFO - Built Amazon query: Apple smartphone iPhone 16 Apple iPhone 16 iPhone 16 Pro Max
2025-05-13 16:27:28,143 - DealFinderAI.AmazonScraperAgent - INFO - Making Amazon search request with params: {'k': 'Apple smartphone iPhone 16 Apple iPhone 16 iPhone 16 Pro Max', 'ref': 'nb_sb_noss', 'crid': 1747168048, 'i': 'aps', 'search-alias': 'electronics'}
2025-05-13 16:27:29,490 - DealFinderAI.AmazonScraperAgent - INFO - Found 33 product divs in search results
2025-05-13 16:27:29,496 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: I16 ProMax Smartphone Unlocked Cell Phone, 6.99 HD Screen 5G Phone, 8+256GB phone unlocked, 7000mAh, 68+108MP Zoom Camera, Fingerprint Button Unlock-and take photos,Dual SIM (Desert titanium) at 179.99 USD
2025-05-13 16:27:29,496 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: I16 ProMax Smartphone Unlocked Cell Phone, 6.99 HD Screen 5G Phone, 8+256GB phone unlocked, 7000mAh, 68+108MP Zoom Camera, Fingerprint Button Unlock-and take photos,Dual SIM (Desert titanium) at 179.99 USD
2025-05-13 16:27:29,501 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: I16 ProMax Smartphone New Upgrade 16GB+1TB/6.99" Display 68+108MP Zoom Camera,Tempered Glass Finish, 7000mAh Android 14 Smartphone (Deep Purple) at 199.99 USD
2025-05-13 16:27:29,501 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: I16 ProMax Smartphone New Upgrade 16GB+1TB/6.99" Display 68+108MP Zoom Camera,Tempered Glass Finish, 7000mAh Android 14 Smartphone (Deep Purple) at 199.99 USD
2025-05-13 16:27:29,505 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Huness at 168.99 USD
2025-05-13 16:27:29,505 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Huness at 168.99 USD
2025-05-13 16:27:29,509 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Apple iPhone 16 Pro Max, US Version, 256GB, Desert Titanium - Unlocked (Renewed Premium) at 1149.99 USD
2025-05-13 16:27:29,509 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Apple iPhone 16 Pro Max, US Version, 256GB, Desert Titanium - Unlocked (Renewed Premium) at 1149.99 USD
2025-05-13 16:27:29,515 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Apple at 45.0 USD
2025-05-13 16:27:29,515 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Apple at 45.0 USD
2025-05-13 16:27:29,518 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Apple iPhone 16 Pro Max, US Version, 256GB, Black Titanium - Unlocked (Renewed) at 1134.97 USD
2025-05-13 16:27:29,518 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Apple iPhone 16 Pro Max, US Version, 256GB, Black Titanium - Unlocked (Renewed) at 1134.97 USD
2025-05-13 16:27:29,522 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Apple iPhone 16 Pro, US Version, 128GB, Black Titanium - Unlocked (Renewed) at 819.95 USD
2025-05-13 16:27:29,522 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Apple iPhone 16 Pro, US Version, 128GB, Black Titanium - Unlocked (Renewed) at 819.95 USD
2025-05-13 16:27:29,525 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Apple iPhone 16 Pro Max, US Version, 256GB, Desert Titanium for AT&T (Renewed) at 974.81 USD
2025-05-13 16:27:29,525 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Apple iPhone 16 Pro Max, US Version, 256GB, Desert Titanium for AT&T (Renewed) at 974.81 USD
2025-05-13 16:27:29,530 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Apple iPhone 15 Pro Max, 256GB, Blue Titanium - Unlocked (Renewed Premium) at 835.0 USD
2025-05-13 16:27:29,530 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Apple iPhone 15 Pro Max, 256GB, Blue Titanium - Unlocked (Renewed Premium) at 835.0 USD
2025-05-13 16:27:29,534 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Apple iPhone 15 Pro Max, 256GB, White Titanium - Unlocked (Renewed) at 794.54 USD
2025-05-13 16:27:29,534 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Apple iPhone 15 Pro Max, 256GB, White Titanium - Unlocked (Renewed) at 794.54 USD
2025-05-13 16:27:30,563 - DealFinderAI.AmazonScraperAgent - INFO - Extracted 10 products from Amazon
2025-05-13 16:27:30,565 - DealFinderAI.AmazonScraperAgent - INFO - Applying relevance filtering to 10 products
2025-05-13 16:27:30,565 - DealFinderAI.AmazonScraperAgent - INFO - Filtered to 5 most relevant products
2025-05-13 16:27:30,565 - DealFinderAI.Controller - INFO - Amazon response content: {'source': 'Amazon', 'query': 'Apple smartphone iPhone 16 Apple iPhone 16 iPhone 16 Pro Max', 'products': [{'title': 'Apple iPhone 16 Pro Max, US Version, 256GB, Desert Titanium for AT&T (Renewed)', 'price': 974.81, 'was_price': 1139.05, 'currency': 'USD', 'url': 'https://www.amazon.com/Apple-iPhone-Version-Titanium-Renewed/dp/B0DLR94642/ref=sr_1_8?crid=1747168048&dib=eyJ2IjoiMSJ9.Q7H30H8fijALI9IzqLDNdqSG5zElMZwZPX75Er4MQXPNXzIiAqdp99QS_LkM3OI-oYJFt5AkVif6PWX5B-3NY0qF-t3-06TGA4tvVxU3jP5Hl7jHm5zLXrIEGV_nvvocY9FCiJK4ggT_f--CxIB_x6B-SuGooW5f1PxobuBET9We5d600bNFZchpy0OUUBtPQobhOUTyr_0nVzHaUEU1hz9lEv7kaC_Nf7QKfvW22z8_gt0PmVKriMprb-SCwNHNebimCqkKtvY9Iu9wN7hDuoyOWPvhSSRs2PJzHvQ0N0o.S2o-y3XiI7cA2CziJ_eDYO9uzU17j0lNwxHdSg2MJAQ&dib_tag=se&keywords=Apple+smartphone+iPhone+16+Apple+iPhone+16+iPhone+16+Pro+Max&qid=1747168048&s=electronics&sr=1-8', 'image_url': 'https://m.media-amazon.com/images/I/61wKjpH7nuL._AC_UL320_.jpg', 'rating': 5.0, 'reviews': 1, 'is_sponsored': False, 'is_prime': False, 'is_amazon_choice': False, 'is_best_seller': False, 'asin': 'B0DLR94642', 'description': 'Apple iPhone 16 Pro Max, US Version, 256GB, Desert Titanium for AT&T (Renewed) 5.0 out of 5 stars 1 Price, product page$974.81$974.81 List Price: $1,139.05List Price: $1,139.05$1,139.05FREE delivery May 16 - 20Or fastest delivery Thu, May 15See options', 'delivery_info': 'List Price:', 'out_of_stock': False, 'source': 'Amazon', 'relevance_score': 32}, {'title': 'Apple iPhone 16 Pro, US Version, 128GB, Black Titanium - Unlocked (Renewed)', 'price': 819.95, 'was_price': None, 'currency': 'USD', 'url': 'https://www.amazon.com/Apple-iPhone-Version-128GB-Titanium/dp/B0DHJG6JPH/ref=sr_1_7?crid=1747168048&dib=eyJ2IjoiMSJ9.Q7H30H8fijALI9IzqLDNdqSG5zElMZwZPX75Er4MQXPNXzIiAqdp99QS_LkM3OI-oYJFt5AkVif6PWX5B-3NY0qF-t3-06TGA4tvVxU3jP5Hl7jHm5zLXrIEGV_nvvocY9FCiJK4ggT_f--CxIB_x6B-SuGooW5f1PxobuBET9We5d600bNFZchpy0OUUBtPQobhOUTyr_0nVzHaUEU1hz9lEv7kaC_Nf7QKfvW22z8_gt0PmVKriMprb-SCwNHNebimCqkKtvY9Iu9wN7hDuoyOWPvhSSRs2PJzHvQ0N0o.S2o-y3XiI7cA2CziJ_eDYO9uzU17j0lNwxHdSg2MJAQ&dib_tag=se&keywords=Apple+smartphone+iPhone+16+Apple+iPhone+16+iPhone+16+Pro+Max&qid=1747168048&s=electronics&sr=1-7', 'image_url': 'https://m.media-amazon.com/images/I/51MCIUhxvZL._AC_UL320_.jpg', 'rating': 4.4, 'reviews': 193, 'is_sponsored': False, 'is_prime': False, 'is_amazon_choice': False, 'is_best_seller': False, 'asin': 'B0DHJG6JPH', 'description': 'Apple iPhone 16 Pro, US Version, 128GB, Black Titanium - Unlocked (Renewed) Options:4 sizesTop Reviewed for Functionality4.4 out of 5 stars 193 100+ bought in past monthPrice, product page$819.95$819.95FREE delivery Tomorrow, May 14See optionsMore Buying Choices$817.99(12+ used & new offers)', 'delivery_info': '100+ bought in past month', 'out_of_stock': False, 'source': 'Amazon', 'relevance_score': 31}, {'title': 'Apple iPhone 16 Pro Max, US Version, 256GB, Desert Titanium - Unlocked (Renewed Premium)', 'price': 1149.99, 'was_price': None, 'currency': 'USD', 'url': 'https://www.amazon.com/Apple-iPhone-Version-Desert-Titanium/dp/B0DPDK8T2J/ref=sr_1_4?crid=1747168048&dib=eyJ2IjoiMSJ9.Q7H30H8fijALI9IzqLDNdqSG5zElMZwZPX75Er4MQXPNXzIiAqdp99QS_LkM3OI-oYJFt5AkVif6PWX5B-3NY0qF-t3-06TGA4tvVxU3jP5Hl7jHm5zLXrIEGV_nvvocY9FCiJK4ggT_f--CxIB_x6B-SuGooW5f1PxobuBET9We5d600bNFZchpy0OUUBtPQobhOUTyr_0nVzHaUEU1hz9lEv7kaC_Nf7QKfvW22z8_gt0PmVKriMprb-SCwNHNebimCqkKtvY9Iu9wN7hDuoyOWPvhSSRs2PJzHvQ0N0o.S2o-y3XiI7cA2CziJ_eDYO9uzU17j0lNwxHdSg2MJAQ&dib_tag=se&keywords=Apple+smartphone+iPhone+16+Apple+iPhone+16+iPhone+16+Pro+Max&qid=1747168048&s=electronics&sr=1-4', 'image_url': 'https://m.media-amazon.com/images/I/61U1XRJMAML._AC_UL320_.jpg', 'rating': 4.5, 'reviews': 74, 'is_sponsored': False, 'is_prime': False, 'is_amazon_choice': False, 'is_best_seller': False, 'asin': 'B0DPDK8T2J', 'description': 'Apple iPhone 16 Pro Max, US Version, 256GB, Desert Titanium - Unlocked (Renewed Premium) Options:3 sizesTop Reviewed for Functionality4.5 out of 5 stars 74 100+ bought in past monthPrice, product page$1,149.99$1,149.99FREE delivery Thu, May 15See options', 'delivery_info': '100+ bought in past month', 'out_of_stock': False, 'source': 'Amazon', 'relevance_score': 29}, {'title': 'Apple iPhone 16 Pro Max, US Version, 256GB, Black Titanium - Unlocked (Renewed)', 'price': 1134.97, 'was_price': None, 'currency': 'USD', 'url': 'https://www.amazon.com/Apple-iPhone-16-Pro-Max/dp/B0DHJ896RY/ref=sr_1_6?crid=1747168048&dib=eyJ2IjoiMSJ9.Q7H30H8fijALI9IzqLDNdqSG5zElMZwZPX75Er4MQXPNXzIiAqdp99QS_LkM3OI-oYJFt5AkVif6PWX5B-3NY0qF-t3-06TGA4tvVxU3jP5Hl7jHm5zLXrIEGV_nvvocY9FCiJK4ggT_f--CxIB_x6B-SuGooW5f1PxobuBET9We5d600bNFZchpy0OUUBtPQobhOUTyr_0nVzHaUEU1hz9lEv7kaC_Nf7QKfvW22z8_gt0PmVKriMprb-SCwNHNebimCqkKtvY9Iu9wN7hDuoyOWPvhSSRs2PJzHvQ0N0o.S2o-y3XiI7cA2CziJ_eDYO9uzU17j0lNwxHdSg2MJAQ&dib_tag=se&keywords=Apple+smartphone+iPhone+16+Apple+iPhone+16+iPhone+16+Pro+Max&qid=1747168048&s=electronics&sr=1-6', 'image_url': 'https://m.media-amazon.com/images/I/71jL8s68fjL._AC_UL320_.jpg', 'rating': 4.2, 'reviews': 66, 'is_sponsored': False, 'is_prime': False, 'is_amazon_choice': False, 'is_best_seller': False, 'asin': 'B0DHJ896RY', 'description': 'Apple iPhone 16 Pro Max, US Version, 256GB, Black Titanium - Unlocked (Renewed) 4.2 out of 5 stars 66 200+ bought in past monthPrice, product page$1,134.97$1,134.97FREE delivery Thu, May 15See optionsMore Buying Choices$999.99(9+ used & new offers)', 'delivery_info': '200+ bought in past month', 'out_of_stock': False, 'source': 'Amazon', 'relevance_score': 29}, {'title': 'Apple iPhone 15 Pro Max, 256GB, White Titanium - Unlocked (Renewed)', 'price': 794.54, 'was_price': None, 'currency': 'USD', 'url': 'https://www.amazon.com/Apple-iPhone-15-Pro-Max/dp/B0CMZDY2ZV/ref=sr_1_10?crid=1747168048&dib=eyJ2IjoiMSJ9.Q7H30H8fijALI9IzqLDNdqSG5zElMZwZPX75Er4MQXPNXzIiAqdp99QS_LkM3OI-oYJFt5AkVif6PWX5B-3NY0qF-t3-06TGA4tvVxU3jP5Hl7jHm5zLXrIEGV_nvvocY9FCiJK4ggT_f--CxIB_x6B-SuGooW5f1PxobuBET9We5d600bNFZchpy0OUUBtPQobhOUTyr_0nVzHaUEU1hz9lEv7kaC_Nf7QKfvW22z8_gt0PmVKriMprb-SCwNHNebimCqkKtvY9Iu9wN7hDuoyOWPvhSSRs2PJzHvQ0N0o.S2o-y3XiI7cA2CziJ_eDYO9uzU17j0lNwxHdSg2MJAQ&dib_tag=se&keywords=Apple+smartphone+iPhone+16+Apple+iPhone+16+iPhone+16+Pro+Max&qid=1747168048&s=electronics&sr=1-10', 'image_url': 'https://m.media-amazon.com/images/I/712TY0NCErL._AC_UL320_.jpg', 'rating': 3.9, 'reviews': 1194, 'is_sponsored': False, 'is_prime': False, 'is_amazon_choice': False, 'is_best_seller': False, 'asin': 'B0CMZDY2ZV', 'description': 'Apple iPhone 15 Pro Max, 256GB, White Titanium - Unlocked (Renewed) Options:3 sizesTop Reviewed for Functionality3.9 out of 5 stars 1,194 400+ bought in past monthPrice, product page$794.54$794.54FREE delivery Sun, May 18Or fastest delivery Fri, May 16Only 2 left in stock - order soon.See optionsMore Buying Choices$773.05(14+ used & new offers)', 'delivery_info': '400+ bought in past month', 'out_of_stock': False, 'source': 'Amazon', 'relevance_score': 22}]}
2025-05-13 16:27:30,566 - DealFinderAI.Controller - INFO - Amazon returned 5 products
2025-05-13 16:27:30,566 - DealFinderAI.WalmartScraperAgent - INFO - Searching Walmart for: {'product_type': 'smartphone', 'keywords': ['iphone', '16'], 'price_range': None, 'brands': ['Apple'], 'features': [], 'sorting_preference': None, 'buy_it_now': True}
2025-05-13 16:27:30,566 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: 
            Optimize this search query for Walmart's search engine:
            
            "smartphone iphone 16 Apple"
            
            For Walmart searches, please:
            1. Focus on model numbers and specific identifiers if present
            2. Include key brand names (Walmart's search works well with brand names)
            3. Remove generic words that may dilute results
            4. Add Walmart-specific terms that might improve results (like "Rollback" if looking for deals)
            5. Prioritize precise product names and specifications
            
            Return a JSON object with:
            - optimized_keywords: List of 3-5 optimized search terms (most important first)
            - department_hint: Any Walmart department suggestion (Electronics, Home, etc.)
            - must_include_terms: Terms that MUST be in results
            - exclude_terms: Terms that should NOT be in results
            - walmart_specific_filters: Any Walmart-specific filters to apply
            
            Format as JSON only with no explanation.
            
2025-05-13 16:27:31,501 - DealFinderAI.WalmartScraperAgent - INFO - Optimized search parameters: {'product_type': 'smartphone', 'keywords': ['iPhone 16', 'Apple iPhone 16', 'iPhone 16 Pro', 'Apple iPhone 16 Pro Max'], 'price_range': None, 'brands': ['Apple'], 'features': [], 'sorting_preference': None, 'buy_it_now': True, 'department': 'Electronics', 'must_include_terms': ['Apple', 'iPhone 16'], 'exclude_terms': ['smartphone'], 'walmart_filters': ['Rollback', 'Deals']}
2025-05-13 16:27:31,501 - DealFinderAI.WalmartScraperAgent - INFO - Built optimized Walmart search query: Apple smartphone iPhone 16 Apple iPhone 16 iPhone 16 Pro
2025-05-13 16:27:31,502 - DealFinderAI.WalmartScraperAgent - INFO - Built Walmart query: Apple smartphone iPhone 16 Apple iPhone 16 iPhone 16 Pro
2025-05-13 16:27:31,502 - DealFinderAI.WalmartScraperAgent - INFO - Making Walmart search request with params: {'q': 'Apple smartphone iPhone 16 Apple iPhone 16 iPhone 16 Pro Electronics', 'page': 1, 'affinityOverride': 'default'}
2025-05-13 16:27:34,798 - DealFinderAI.WalmartScraperAgent - INFO - Extracted 0 products from JSON data
2025-05-13 16:27:34,798 - DealFinderAI.WalmartScraperAgent - INFO - JSON extraction failed, falling back to HTML extraction
2025-05-13 16:27:34,801 - DealFinderAI.WalmartScraperAgent - INFO - Found 9 product divs in HTML
2025-05-13 16:27:34,804 - DealFinderAI.WalmartScraperAgent - ERROR - Error extracting product data: cannot access local variable 'href' where it is not associated with a value
2025-05-13 16:27:34,806 - DealFinderAI.WalmartScraperAgent - ERROR - Error extracting product data: cannot access local variable 'href' where it is not associated with a value
2025-05-13 16:27:34,808 - DealFinderAI.WalmartScraperAgent - ERROR - Error extracting product data: cannot access local variable 'href' where it is not associated with a value
2025-05-13 16:27:34,810 - DealFinderAI.WalmartScraperAgent - ERROR - Error extracting product data: cannot access local variable 'href' where it is not associated with a value
2025-05-13 16:27:37,341 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 16:27:37,341 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Straight Talk Apple iPhone 16 Pro, 128GB, Black Titanium - Prepaid Smartphone [Locked to Straight Talk] at 999.0 USD
2025-05-13 16:27:39,964 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 16:27:39,965 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Straight Talk Apple iPhone 16 Pro, 128GB, Desert Titanium - Prepaid Smartphone [Locked to Straight Talk] at 999.0 USD
2025-05-13 16:27:42,115 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 16:27:42,116 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: AT&T iPhone 16 Pro 128GB Desert Titanium. Apple Intelligence. at 1049.0 USD
2025-05-13 16:27:44,100 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 16:27:44,101 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Verizon iPhone 16 Pro 128GB Desert Titanium. Apple Intelligence. at 1049.0 USD
2025-05-13 16:27:46,321 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 16:27:46,322 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Straight Talk Apple iPhone 16, 128GB, White - Prepaid Smartphone [Locked to Straight Talk] at 829.0 USD
2025-05-13 16:27:46,322 - DealFinderAI.WalmartScraperAgent - INFO - Extracted 5 products from HTML
2025-05-13 16:27:46,322 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Straight Talk Apple iPhone 16 Pro, 128GB, Black Titanium - Prepaid Smartphone [Locked to Straight Talk] at 999.0 USD
2025-05-13 16:27:46,322 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Straight Talk Apple iPhone 16 Pro, 128GB, Desert Titanium - Prepaid Smartphone [Locked to Straight Talk] at 999.0 USD
2025-05-13 16:27:46,322 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: AT&T iPhone 16 Pro 128GB Desert Titanium. Apple Intelligence. at 1049.0 USD
2025-05-13 16:27:46,322 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Verizon iPhone 16 Pro 128GB Desert Titanium. Apple Intelligence. at 1049.0 USD
2025-05-13 16:27:46,322 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Straight Talk Apple iPhone 16, 128GB, White - Prepaid Smartphone [Locked to Straight Talk] at 829.0 USD
2025-05-13 16:27:47,482 - DealFinderAI.WalmartScraperAgent - INFO - Extracted 5 products from Walmart
2025-05-13 16:27:47,482 - DealFinderAI.WalmartScraperAgent - INFO - Applying relevance filtering to 5 products
2025-05-13 16:27:47,482 - DealFinderAI.WalmartScraperAgent - INFO - Filtered to 5 most relevant products
2025-05-13 16:27:47,482 - DealFinderAI.Controller - INFO - Walmart returned 5 products
2025-05-13 16:27:47,482 - DealFinderAI.EbayScraperAgent - INFO - Searching eBay for: {'product_type': 'smartphone', 'keywords': ['iphone', '16'], 'price_range': None, 'brands': ['Apple'], 'features': [], 'sorting_preference': None, 'buy_it_now': True}
2025-05-13 16:27:47,482 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: 
            Optimize this search query for eBay's search engine:
            
            "smartphone iphone 16 Apple"
            
            For eBay searches, please:
            1. Focus on exact model numbers and specific part identifiers if present
            2. Include key brand names
            3. Remove generic words that may dilute results
            4. Add eBay-specific terms that might improve results
            5. Optimize for finding the most relevant listings
            
            Return a JSON object with:
            - optimized_keywords: List of 3-5 optimized search terms (most important first)
            - category_hints: Any eBay category suggestions
            - must_include_terms: Terms that MUST be in results
            - exclude_terms: Terms that should NOT be in results
            
            Format as JSON only with no explanation.
            
2025-05-13 16:27:48,729 - DealFinderAI.EbayScraperAgent - INFO - Optimized search parameters: {'product_type': 'smartphone', 'keywords': ['iPhone 16', 'Apple iPhone 16', 'iPhone 16 Pro Max', 'iPhone 16 Pro'], 'price_range': None, 'brands': ['Apple'], 'features': [], 'sorting_preference': None, 'buy_it_now': True, 'category_hints': ['Cell Phones & Smartphones'], 'must_include_terms': ['Apple', 'iPhone 16'], 'exclude_terms': ['broken', 'repair', 'parts']}
2025-05-13 16:27:48,729 - DealFinderAI.EbayScraperAgent - INFO - Built optimized eBay search query: smartphone Apple iPhone 16 Apple iPhone 16 iPhone 16 Pro Max
2025-05-13 16:27:48,729 - DealFinderAI.EbayScraperAgent - INFO - Built eBay query: smartphone Apple iPhone 16 Apple iPhone 16 iPhone 16 Pro Max
2025-05-13 16:27:48,729 - DealFinderAI.EbayScraperAgent - INFO - Making eBay search request with params: {'_nkw': 'smartphone Apple iPhone 16 Apple iPhone 16 iPhone 16 Pro Max Cell Phones & Smartphones', '_sacat': '0', '_ipg': '96', 'LH_BIN': '1'}
2025-05-13 16:27:51,163 - DealFinderAI.EbayScraperAgent - INFO - Found 128 product listings
2025-05-13 16:27:51,168 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 16 Pro Max 256GB Unlocked Excellent Condition at 1111.21 USD
2025-05-13 16:27:51,168 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 16 Pro Max 256GB Unlocked Excellent Condition at 1111.21 USD
2025-05-13 16:27:51,172 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 14 Pro Max 512GB Unlocked Very Good Condition - All Colors at 699.99 USD
2025-05-13 16:27:51,172 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 14 Pro Max 512GB Unlocked Very Good Condition - All Colors at 699.99 USD
2025-05-13 16:27:51,174 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 11 Pro Max 256GB Unlocked Fair Condition - All Colors at 259.99 USD
2025-05-13 16:27:51,174 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 11 Pro Max 256GB Unlocked Fair Condition - All Colors at 259.99 USD
2025-05-13 16:27:51,175 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 15 Pro Max 256GB Unlocked Good Condition - All Colors at 799.99 USD
2025-05-13 16:27:51,175 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 15 Pro Max 256GB Unlocked Good Condition - All Colors at 799.99 USD
2025-05-13 16:27:51,177 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: APPLE IPHONE 16 PRO MAX 256GB 512GB (FACTORY UNLOCKED) NEVER ACTIVATEDSEALED at 1189.95 USD
2025-05-13 16:27:51,177 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: APPLE IPHONE 16 PRO MAX 256GB 512GB (FACTORY UNLOCKED) NEVER ACTIVATEDSEALED at 1189.95 USD
2025-05-13 16:27:51,178 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 16 Pro Max - 512GB - Black Titanium - MYW73LL/A at 1049.99 USD
2025-05-13 16:27:51,178 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 16 Pro Max - 512GB - Black Titanium - MYW73LL/A at 1049.99 USD
2025-05-13 16:27:51,179 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: apple iphone 16 pro max 256gb unlocked at 1027.0 USD
2025-05-13 16:27:51,179 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: apple iphone 16 pro max 256gb unlocked at 1027.0 USD
2025-05-13 16:27:51,180 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: iPhone 16 Pro Max Unlocked Smartphone 512GB all Colors New In Box at 1390.0 USD
2025-05-13 16:27:51,180 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: iPhone 16 Pro Max Unlocked Smartphone 512GB all Colors New In Box at 1390.0 USD
2025-05-13 16:27:52,131 - DealFinderAI.EbayScraperAgent - INFO - Extracted 8 products from eBay
2025-05-13 16:27:52,133 - DealFinderAI.EbayScraperAgent - INFO - Applying relevance filtering to 8 products
2025-05-13 16:27:52,133 - DealFinderAI.EbayScraperAgent - INFO - Filtered to 5 most relevant products
2025-05-13 16:27:52,134 - DealFinderAI.Controller - INFO - eBay returned 5 products
2025-05-13 16:27:52,134 - DealFinderAI.Controller - INFO - Total products before aggregation: 15
2025-05-13 16:27:52,134 - DealFinderAI.ResultsAggregatorAgent - INFO - Aggregating results for query: iphone 16
2025-05-13 16:27:52,134 - DealFinderAI.ResultsAggregatorAgent - INFO - Found 3 results from various sources
2025-05-13 16:27:52,134 - DealFinderAI.ResultsAggregatorAgent - INFO - Source Amazon: 5 products
2025-05-13 16:27:52,134 - DealFinderAI.ResultsAggregatorAgent - INFO - Source Walmart: 5 products
2025-05-13 16:27:52,134 - DealFinderAI.ResultsAggregatorAgent - INFO - Source eBay: 5 products
2025-05-13 16:27:52,134 - DealFinderAI.ResultsAggregatorAgent - INFO - Total products extracted: 15
2025-05-13 16:27:52,134 - DealFinderAI.ResultsAggregatorAgent - INFO - Ranking 15 products
2025-05-13 16:27:52,135 - DealFinderAI.ResultsAggregatorAgent - INFO - Sorted 15 products by score
2025-05-13 16:27:52,135 - DealFinderAI.ResultsAggregatorAgent - INFO - Returning 10 diversified products
2025-05-13 16:27:52,135 - DealFinderAI.ResultsAggregatorAgent - INFO - Products after ranking: 10
2025-05-13 16:27:52,135 - DealFinderAI.ResultsAggregatorAgent - INFO - Final products: 10
2025-05-13 16:27:52,135 - DealFinderAI.Controller - INFO - Products after aggregation: 10
2025-05-13 16:27:52,135 - DealFinderAI.ProductComparisonAgent - INFO - Comparing products for query: iphone 16
2025-05-13 16:27:52,135 - DealFinderAI.ProductComparisonAgent - INFO - Found 10 products to compare
2025-05-13 16:27:52,136 - DealFinderAI.ProductComparisonAgent - INFO - Grouping 10 products
2025-05-13 16:27:52,136 - DealFinderAI.ProductComparisonAgent - INFO - Created 0 product groups
2025-05-13 16:27:52,136 - DealFinderAI.ChatMemoryAgent - INFO - Storing context for conversation session_20250513162721_c3b9e529
2025-05-13 16:27:52,136 - DealFinderAI.ChatMemoryAgent - INFO - Storing 10 products for conversation session_20250513162721_c3b9e529
2025-05-13 16:27:52,136 - DealFinderAI.PresentationAgent - INFO - Preparing presentation for 10 products
2025-05-13 16:27:52,136 - DealFinderAI.PresentationAgent - INFO - Formatting 10 products for display
2025-05-13 16:27:52,136 - DealFinderAI.PresentationAgent - INFO - Product 1: Apple iPhone 15 Pro Max, 256GB, White Titanium - Unlocked (Renewed) - Price: $794.54 - Source: Amazon
2025-05-13 16:27:52,136 - DealFinderAI.PresentationAgent - INFO - Product 2: APPLE IPHONE 16 PRO MAX 256GB 512GB (FACTORY UNLOCKED) NEVER ACTIVATEDSEALED - Price: $1189.95 - Source: eBay
2025-05-13 16:27:52,137 - DealFinderAI.PresentationAgent - INFO - Product 3: Straight Talk Apple iPhone 16 Pro, 128GB, Black Titanium - Prepaid Smartphone [Locked to Straight Talk] - Price: $999.00 - Source: Walmart
2025-05-13 16:27:52,137 - DealFinderAI.PresentationAgent - INFO - Product 4: Apple iPhone 16 Pro Max, US Version, 256GB, Desert Titanium for AT&T (Renewed) - Price: $974.81 - Source: Amazon
2025-05-13 16:27:52,137 - DealFinderAI.PresentationAgent - INFO - Product 5: Apple iPhone 16 Pro, US Version, 128GB, Black Titanium - Unlocked (Renewed) - Price: $819.95 - Source: Amazon
2025-05-13 16:27:52,137 - DealFinderAI.PresentationAgent - INFO - Product 6: Apple iPhone 16 Pro Max, US Version, 256GB, Desert Titanium - Unlocked (Renewed Premium) - Price: $1149.99 - Source: Amazon
2025-05-13 16:27:52,137 - DealFinderAI.PresentationAgent - INFO - Product 7: Apple iPhone 16 Pro Max, US Version, 256GB, Black Titanium - Unlocked (Renewed) - Price: $1134.97 - Source: Amazon
2025-05-13 16:27:52,137 - DealFinderAI.PresentationAgent - INFO - Product 8: Apple iPhone 16 Pro Max 256GB Unlocked Excellent Condition - Price: $1111.21 - Source: eBay
2025-05-13 16:27:52,137 - DealFinderAI.PresentationAgent - INFO - Product 9: Apple iPhone 16 Pro Max - 512GB - Black Titanium - MYW73LL/A - Price: $1049.99 - Source: eBay
2025-05-13 16:27:52,137 - DealFinderAI.PresentationAgent - INFO - Product 10: Apple iPhone 14 Pro Max 512GB Unlocked Very Good Condition - All Colors - Price: $699.99 - Source: eBay
2025-05-13 16:27:52,137 - DealFinderAI.ChatMemoryAgent - INFO - Storing context for conversation session_20250513162721_c3b9e529
2025-05-13 16:27:52,137 - DealFinderAI.ChatMemoryAgent - INFO - Storing 10 products for conversation session_20250513162721_c3b9e529
2025-05-13 16:27:52,137 - DealFinderAI.Controller - INFO - Successfully stored search results in memory
2025-05-13 16:28:36,545 - DealFinderAI - INFO - Logging initialized
2025-05-13 16:28:36,545 - DealFinderAI.Main - INFO - Starting DealFinder AI
2025-05-13 16:28:36,545 - DealFinderAI.Main - INFO - Using LangChain implementation
2025-05-13 16:28:36,586 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-13 16:28:36,586 - DealFinderAI.Controller - INFO - Initialized scraper agents: ['amazon', 'walmart', 'ebay']
2025-05-13 16:28:36,586 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-13 16:28:36,586 - DealFinderAI.Controller - INFO - Initialized scraper agents: ['amazon', 'walmart', 'ebay']
2025-05-13 16:28:36,586 - DealFinderAI.Main - INFO - Web app using LangChain implementation with Gemini model
2025-05-13 16:29:19,713 - DealFinderAI - INFO - Logging initialized
2025-05-13 16:29:19,714 - DealFinderAI.Main - INFO - Starting DealFinder AI
2025-05-13 16:29:19,714 - DealFinderAI.Main - INFO - Using LangChain implementation
2025-05-13 16:29:19,767 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-13 16:29:19,767 - DealFinderAI.Controller - INFO - Initialized scraper agents: ['amazon', 'walmart', 'ebay']
2025-05-13 16:29:19,767 - DealFinderAI.Scrapers - INFO - Initializing real web scraper agents
2025-05-13 16:29:19,767 - DealFinderAI.Controller - INFO - Initialized scraper agents: ['amazon', 'walmart', 'ebay']
2025-05-13 16:29:19,767 - DealFinderAI.Main - INFO - Web app using LangChain implementation with Gemini model
2025-05-13 16:29:26,016 - DealFinderAI.Controller - INFO - Processing user query: iphone 16
2025-05-13 16:29:26,016 - DealFinderAI.ChatMemoryAgent - INFO - Analyzing query: 'iphone 16' for conversation session_20250513162922_a3ce40c4
2025-05-13 16:29:26,017 - DealFinderAI.ChatMemoryAgent - INFO - No product context available for this conversation
2025-05-13 16:29:26,017 - DealFinderAI.Controller - INFO - Analyze response: {'is_follow_up': False, 'focused_product': None, 'referenced_products': [], 'products': []}
2025-05-13 16:29:26,017 - DealFinderAI.Controller - INFO - Is follow-up? False
2025-05-13 16:29:26,017 - DealFinderAI.Controller - INFO - Referenced products: 0
2025-05-13 16:29:26,017 - DealFinderAI.Controller - INFO - Processing as new search query
2025-05-13 16:29:26,017 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: iphone 16
2025-05-13 16:29:27,018 - DealFinderAI.GeminiAgent - WARNING - Failed to parse Gemini response as JSON: ```json
{
  "product_type": "smartphone",
  "keywords": ["iphone", "16"],
  "price_range": null,
  "brands": ["Apple"],
  "features": [],
  "sorting_preference": null,
  "buy_it_now": true
}
```

2025-05-13 16:29:27,018 - DealFinderAI.Controller - INFO - Parsed search parameters: {'product_type': 'smartphone', 'keywords': ['iphone', '16'], 'price_range': None, 'brands': ['Apple'], 'features': [], 'sorting_preference': None, 'buy_it_now': True}
2025-05-13 16:29:27,018 - DealFinderAI.AmazonScraperAgent - INFO - Searching Amazon for: {'product_type': 'smartphone', 'keywords': ['iphone', '16'], 'price_range': None, 'brands': ['Apple'], 'features': [], 'sorting_preference': None, 'buy_it_now': True}
2025-05-13 16:29:27,018 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: 
            Optimize this search query for Amazon's search engine:
            
            "smartphone iphone 16 Apple"
            
            For Amazon searches, please:
            1. Focus on product-specific model numbers and identifiers if present
            2. Include key brand names (Amazon's A9 algorithm prioritizes brand matches)
            3. Remove generic words that may dilute results
            4. Add Amazon-specific terms that might improve results (like "Amazon's Choice" if looking for quality products)
            5. Optimize for Amazon's search algorithm which prioritizes exact matches and recent sales volume
            
            Return a JSON object with:
            - optimized_keywords: List of 3-5 optimized search terms (most important first)
            - amazon_category: Any Amazon department/category suggestion (Electronics, Books, etc.)
            - must_include_terms: Terms that MUST be in results
            - exclude_terms: Terms that should NOT be in results
            - amazon_search_filters: Any Amazon-specific filters to apply (Prime eligible, etc.)
            
            Format as JSON only with no explanation.
            
2025-05-13 16:29:28,559 - DealFinderAI.AmazonScraperAgent - INFO - Optimized search parameters: {'product_type': 'smartphone', 'keywords': ['iPhone 16', 'Apple iPhone 16', 'iPhone 16 Pro', 'Apple iPhone 16 Pro Max'], 'price_range': None, 'brands': ['Apple'], 'features': [], 'sorting_preference': None, 'buy_it_now': True, 'category': 'Electronics', 'must_include_terms': ['Apple', 'iPhone 16'], 'exclude_terms': ['smartphone'], 'amazon_filters': ['Prime Eligible', 'New']}
2025-05-13 16:29:28,559 - DealFinderAI.AmazonScraperAgent - INFO - Built optimized Amazon search query: Apple smartphone iPhone 16 Apple iPhone 16 iPhone 16 Pro
2025-05-13 16:29:28,559 - DealFinderAI.AmazonScraperAgent - INFO - Built Amazon query: Apple smartphone iPhone 16 Apple iPhone 16 iPhone 16 Pro
2025-05-13 16:29:28,559 - DealFinderAI.AmazonScraperAgent - INFO - Making Amazon search request with params: {'k': 'Apple smartphone iPhone 16 Apple iPhone 16 iPhone 16 Pro', 'ref': 'nb_sb_noss', 'crid': 1747168168, 'i': 'aps', 'search-alias': 'electronics'}
2025-05-13 16:29:30,033 - DealFinderAI.AmazonScraperAgent - INFO - Found 30 product divs in search results
2025-05-13 16:29:30,039 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: I16 ProMax Smartphone New Upgrade 16GB+1TB/6.99" Display 68+108MP Zoom Camera,Tempered Glass Finish, 7000mAh Android 14 Smartphone (Deep Purple) at 199.99 USD
2025-05-13 16:29:30,039 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: I16 ProMax Smartphone New Upgrade 16GB+1TB/6.99" Display 68+108MP Zoom Camera,Tempered Glass Finish, 7000mAh Android 14 Smartphone (Deep Purple) at 199.99 USD
2025-05-13 16:29:30,043 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Apple iPhone 16 Pro, US Version, 128GB, Black Titanium - Unlocked (Renewed) at 819.95 USD
2025-05-13 16:29:30,043 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Apple iPhone 16 Pro, US Version, 128GB, Black Titanium - Unlocked (Renewed) at 819.95 USD
2025-05-13 16:29:30,048 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Apple iPhone 16 Pro, US Version, 128GB, White Titanium - Unlocked (Renewed Premium) at 899.97 USD
2025-05-13 16:29:30,048 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Apple iPhone 16 Pro, US Version, 128GB, White Titanium - Unlocked (Renewed Premium) at 899.97 USD
2025-05-13 16:29:30,053 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Apple iPhone 16, US Version, 128GB, Black - Unlocked (Renewed Premium) at 722.58 USD
2025-05-13 16:29:30,053 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Apple iPhone 16, US Version, 128GB, Black - Unlocked (Renewed Premium) at 722.58 USD
2025-05-13 16:29:30,057 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: iPhone 16 Pro Silicone Case with MagSafe and Camera Control - Black  at 48.75 USD
2025-05-13 16:29:30,057 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: iPhone 16 Pro Silicone Case with MagSafe and Camera Control - Black  at 48.75 USD
2025-05-13 16:29:30,062 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Apple iPhone 16 Pro Max, US Version, 1TB, Black Titanium - Unlocked (Renewed Premium) at 1550.0 USD
2025-05-13 16:29:30,062 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Apple iPhone 16 Pro Max, US Version, 1TB, Black Titanium - Unlocked (Renewed Premium) at 1550.0 USD
2025-05-13 16:29:30,066 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Unlocked Android Phone A15 PROMAX Android 13 Cell Phone with Dynamic Island 6GB+256GB 6800mAh,Fast Charging,HD Screen 48MP+108MP Camera Cell Phone with 5G Dual SIM Smart Phone (White) at 159.99 USD
2025-05-13 16:29:30,066 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Unlocked Android Phone A15 PROMAX Android 13 Cell Phone with Dynamic Island 6GB+256GB 6800mAh,Fast Charging,HD Screen 48MP+108MP Camera Cell Phone with 5G Dual SIM Smart Phone (White) at 159.99 USD
2025-05-13 16:29:30,070 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Apple iPhone 16 Pro, US Version, 128GB, Desert Titanium - for AT&T (Renewed) at 780.0 USD
2025-05-13 16:29:30,070 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Apple iPhone 16 Pro, US Version, 128GB, Desert Titanium - for AT&T (Renewed) at 780.0 USD
2025-05-13 16:29:30,074 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Apple iPhone 15 Pro, 128GB, Blue Titanium - Unlocked (Renewed Premium) at 679.0 USD
2025-05-13 16:29:30,074 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Apple iPhone 15 Pro, 128GB, Blue Titanium - Unlocked (Renewed Premium) at 679.0 USD
2025-05-13 16:29:30,077 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Apple iPhone 16 Pro Max, US Version, 256GB, Black Titanium - Unlocked (Renewed) at 1134.97 USD
2025-05-13 16:29:30,077 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Apple iPhone 16 Pro Max, US Version, 256GB, Black Titanium - Unlocked (Renewed) at 1134.97 USD
2025-05-13 16:29:31,207 - DealFinderAI.AmazonScraperAgent - INFO - Extracted 10 products from Amazon
2025-05-13 16:29:31,208 - DealFinderAI.AmazonScraperAgent - INFO - Applying relevance filtering to 10 products
2025-05-13 16:29:31,208 - DealFinderAI.AmazonScraperAgent - INFO - Filtered to 5 most relevant products
2025-05-13 16:29:31,208 - DealFinderAI.Controller - INFO - Amazon response content: {'source': 'Amazon', 'query': 'Apple smartphone iPhone 16 Apple iPhone 16 iPhone 16 Pro', 'products': [{'title': 'iPhone 16 Pro Silicone Case with MagSafe and Camera Control - Black \u200b\u200b\u200b\u200b\u200b\u200b\u200b', 'price': 48.75, 'was_price': 61.71, 'currency': 'USD', 'url': 'https://www.amazon.com/Apple-iPhone-Silicone-MagSafe-Control/dp/B0DGHKP48R/ref=sr_1_5?crid=1747168168&dib=eyJ2IjoiMSJ9.9A8G5ZsnYDNgmjVvfoRq9skEYrraPXLm0JZ8ASE9RxF14BC9YrU3VTtomAJGCEQHRyZIS8ep748QERN2ISIIOtXCBgKxg-mensBTgKnw6vqB0gtCjY69BwT_5bLwpjk_vc0xlbiu2Pv0GW5O0hvFG5ExS9-Q49HVhnAb4wB-dSfH17gvAXqEIm0dkmcs5uHsgxVbQOy6Z6SXa7cwFoD8foIG7g0OGM6muFsAeCNNHYrfQwmlUGrbuJDzWIJ8dPPc1GM4nkM8EpGVE4TKBWLVQuQItmeVF8sK-RnOLkXtSp0.pgXVAG-VMTzC6oVUfE3w_TflYoVxccijceirF19YnlA&dib_tag=se&keywords=Apple+smartphone+iPhone+16+Apple+iPhone+16+iPhone+16+Pro&qid=1747168168&s=electronics&sr=1-5', 'image_url': 'https://m.media-amazon.com/images/I/41I8pqWpYkL._AC_UY218_.jpg', 'rating': 4.3, 'reviews': 1580, 'is_sponsored': False, 'is_prime': True, 'is_amazon_choice': False, 'is_best_seller': False, 'asin': 'B0DGHKP48R', 'description': 'AppleiPhone 16 Pro Silicone Case with MagSafe and Camera Control - Black \u200b\u200b\u200b\u200b\u200b\u200b\u200b 4.3 out of 5 stars 1,580 1K+ bought in past monthPrice, product page$48.75$48.75 ($61.71$61.71/100 g) FREE delivery Sun, May 18Or fastest delivery Tomorrow, May 14Add to cartMore Buying Choices$39.28(3+ used & new offers)+6', 'delivery_info': '1K+ bought in past month', 'out_of_stock': False, 'source': 'Amazon', 'relevance_score': 40}, {'title': 'Apple iPhone 16 Pro, US Version, 128GB, Black Titanium - Unlocked (Renewed)', 'price': 819.95, 'was_price': None, 'currency': 'USD', 'url': 'https://www.amazon.com/Apple-iPhone-Version-128GB-Titanium/dp/B0DHJG6JPH/ref=sr_1_2?crid=1747168168&dib=eyJ2IjoiMSJ9.9A8G5ZsnYDNgmjVvfoRq9skEYrraPXLm0JZ8ASE9RxF14BC9YrU3VTtomAJGCEQHRyZIS8ep748QERN2ISIIOtXCBgKxg-mensBTgKnw6vqB0gtCjY69BwT_5bLwpjk_vc0xlbiu2Pv0GW5O0hvFG5ExS9-Q49HVhnAb4wB-dSfH17gvAXqEIm0dkmcs5uHsgxVbQOy6Z6SXa7cwFoD8foIG7g0OGM6muFsAeCNNHYrfQwmlUGrbuJDzWIJ8dPPc1GM4nkM8EpGVE4TKBWLVQuQItmeVF8sK-RnOLkXtSp0.pgXVAG-VMTzC6oVUfE3w_TflYoVxccijceirF19YnlA&dib_tag=se&keywords=Apple+smartphone+iPhone+16+Apple+iPhone+16+iPhone+16+Pro&qid=1747168168&s=electronics&sr=1-2', 'image_url': 'https://m.media-amazon.com/images/I/51MCIUhxvZL._AC_UY218_.jpg', 'rating': 4.4, 'reviews': 193, 'is_sponsored': False, 'is_prime': True, 'is_amazon_choice': False, 'is_best_seller': False, 'asin': 'B0DHJG6JPH', 'description': 'Apple iPhone 16 Pro, US Version, 128GB, Black Titanium - Unlocked (Renewed) Options:4 sizesTop Reviewed for Functionality4.4 out of 5 stars 193 100+ bought in past monthPrice, product page$819.95$819.95 FREE delivery Tomorrow, May 14See optionsMore Buying Choices$817.99(12+ used & new offers)', 'delivery_info': '100+ bought in past month', 'out_of_stock': False, 'source': 'Amazon', 'relevance_score': 36}, {'title': 'Apple iPhone 16 Pro, US Version, 128GB, White Titanium - Unlocked (Renewed Premium)', 'price': 899.97, 'was_price': None, 'currency': 'USD', 'url': 'https://www.amazon.com/Apple-iPhone-Version-128GB-Titanium/dp/B0DNTB4BWB/ref=sr_1_3?crid=1747168168&dib=eyJ2IjoiMSJ9.9A8G5ZsnYDNgmjVvfoRq9skEYrraPXLm0JZ8ASE9RxF14BC9YrU3VTtomAJGCEQHRyZIS8ep748QERN2ISIIOtXCBgKxg-mensBTgKnw6vqB0gtCjY69BwT_5bLwpjk_vc0xlbiu2Pv0GW5O0hvFG5ExS9-Q49HVhnAb4wB-dSfH17gvAXqEIm0dkmcs5uHsgxVbQOy6Z6SXa7cwFoD8foIG7g0OGM6muFsAeCNNHYrfQwmlUGrbuJDzWIJ8dPPc1GM4nkM8EpGVE4TKBWLVQuQItmeVF8sK-RnOLkXtSp0.pgXVAG-VMTzC6oVUfE3w_TflYoVxccijceirF19YnlA&dib_tag=se&keywords=Apple+smartphone+iPhone+16+Apple+iPhone+16+iPhone+16+Pro&qid=1747168168&s=electronics&sr=1-3', 'image_url': 'https://m.media-amazon.com/images/I/61dJfouiziL._AC_UY218_.jpg', 'rating': 4.5, 'reviews': 60, 'is_sponsored': False, 'is_prime': True, 'is_amazon_choice': False, 'is_best_seller': False, 'asin': 'B0DNTB4BWB', 'description': 'Apple iPhone 16 Pro, US Version, 128GB, White Titanium - Unlocked (Renewed Premium) Options:4 sizes4.5 out of 5 stars 60 Price, product page$899.97$899.97 FREE delivery Thu, May 15Only 12 left in stock - order soon.See optionsMore Buying Choices$899.00(4 new offers)', 'delivery_info': 'More Buying Choices', 'out_of_stock': False, 'source': 'Amazon', 'relevance_score': 34}, {'title': 'Apple iPhone 16 Pro Max, US Version, 256GB, Black Titanium - Unlocked (Renewed)', 'price': 1134.97, 'was_price': None, 'currency': 'USD', 'url': 'https://www.amazon.com/Apple-iPhone-16-Pro-Max/dp/B0DHJ896RY/ref=sr_1_10?crid=1747168168&dib=eyJ2IjoiMSJ9.9A8G5ZsnYDNgmjVvfoRq9skEYrraPXLm0JZ8ASE9RxF14BC9YrU3VTtomAJGCEQHRyZIS8ep748QERN2ISIIOtXCBgKxg-mensBTgKnw6vqB0gtCjY69BwT_5bLwpjk_vc0xlbiu2Pv0GW5O0hvFG5ExS9-Q49HVhnAb4wB-dSfH17gvAXqEIm0dkmcs5uHsgxVbQOy6Z6SXa7cwFoD8foIG7g0OGM6muFsAeCNNHYrfQwmlUGrbuJDzWIJ8dPPc1GM4nkM8EpGVE4TKBWLVQuQItmeVF8sK-RnOLkXtSp0.pgXVAG-VMTzC6oVUfE3w_TflYoVxccijceirF19YnlA&dib_tag=se&keywords=Apple+smartphone+iPhone+16+Apple+iPhone+16+iPhone+16+Pro&qid=1747168168&s=electronics&sr=1-10', 'image_url': 'https://m.media-amazon.com/images/I/71jL8s68fjL._AC_UY218_.jpg', 'rating': 4.2, 'reviews': 66, 'is_sponsored': False, 'is_prime': True, 'is_amazon_choice': False, 'is_best_seller': False, 'asin': 'B0DHJ896RY', 'description': 'Apple iPhone 16 Pro Max, US Version, 256GB, Black Titanium - Unlocked (Renewed) 4.2 out of 5 stars 66 200+ bought in past monthPrice, product page$1,134.97$1,134.97 FREE delivery Thu, May 15See optionsMore Buying Choices$999.99(9+ used & new offers)', 'delivery_info': '200+ bought in past month', 'out_of_stock': False, 'source': 'Amazon', 'relevance_score': 34}, {'title': 'Apple iPhone 16, US Version, 128GB, Black - Unlocked (Renewed Premium)', 'price': 722.58, 'was_price': 759.05, 'currency': 'USD', 'url': 'https://www.amazon.com/Apple-iPhone-Version-128GB-Black/dp/B0DPD1296D/ref=sr_1_4?crid=1747168168&dib=eyJ2IjoiMSJ9.9A8G5ZsnYDNgmjVvfoRq9skEYrraPXLm0JZ8ASE9RxF14BC9YrU3VTtomAJGCEQHRyZIS8ep748QERN2ISIIOtXCBgKxg-mensBTgKnw6vqB0gtCjY69BwT_5bLwpjk_vc0xlbiu2Pv0GW5O0hvFG5ExS9-Q49HVhnAb4wB-dSfH17gvAXqEIm0dkmcs5uHsgxVbQOy6Z6SXa7cwFoD8foIG7g0OGM6muFsAeCNNHYrfQwmlUGrbuJDzWIJ8dPPc1GM4nkM8EpGVE4TKBWLVQuQItmeVF8sK-RnOLkXtSp0.pgXVAG-VMTzC6oVUfE3w_TflYoVxccijceirF19YnlA&dib_tag=se&keywords=Apple+smartphone+iPhone+16+Apple+iPhone+16+iPhone+16+Pro&qid=1747168168&s=electronics&sr=1-4', 'image_url': 'https://m.media-amazon.com/images/I/31IfD4wYdfL._AC_UY218_.jpg', 'rating': 4.5, 'reviews': 36, 'is_sponsored': False, 'is_prime': False, 'is_amazon_choice': False, 'is_best_seller': False, 'asin': 'B0DPD1296D', 'description': 'Apple iPhone 16, US Version, 128GB, Black - Unlocked (Renewed Premium) Options:6 sizesTop Reviewed for Functionality4.5 out of 5 stars 36 100+ bought in past monthPrice, product page$722.58$722.58 List Price: $759.05List Price: $759.05$759.05FREE delivery Thu, May 15Only 1 left in stock - order soon.See optionsMore Buying Choices$719.45(7 new offers)', 'delivery_info': '100+ bought in past month', 'out_of_stock': False, 'source': 'Amazon', 'relevance_score': 29}]}
2025-05-13 16:29:31,209 - DealFinderAI.Controller - INFO - Amazon returned 5 products
2025-05-13 16:29:31,209 - DealFinderAI.WalmartScraperAgent - INFO - Searching Walmart for: {'product_type': 'smartphone', 'keywords': ['iphone', '16'], 'price_range': None, 'brands': ['Apple'], 'features': [], 'sorting_preference': None, 'buy_it_now': True}
2025-05-13 16:29:31,209 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: 
            Optimize this search query for Walmart's search engine:
            
            "smartphone iphone 16 Apple"
            
            For Walmart searches, please:
            1. Focus on model numbers and specific identifiers if present
            2. Include key brand names (Walmart's search works well with brand names)
            3. Remove generic words that may dilute results
            4. Add Walmart-specific terms that might improve results (like "Rollback" if looking for deals)
            5. Prioritize precise product names and specifications
            
            Return a JSON object with:
            - optimized_keywords: List of 3-5 optimized search terms (most important first)
            - department_hint: Any Walmart department suggestion (Electronics, Home, etc.)
            - must_include_terms: Terms that MUST be in results
            - exclude_terms: Terms that should NOT be in results
            - walmart_specific_filters: Any Walmart-specific filters to apply
            
            Format as JSON only with no explanation.
            
2025-05-13 16:29:32,227 - DealFinderAI.WalmartScraperAgent - INFO - Optimized search parameters: {'product_type': 'smartphone', 'keywords': ['iPhone 16', 'Apple iPhone 16', 'iPhone 16 Pro', 'iPhone 16 Pro Max'], 'price_range': None, 'brands': ['Apple'], 'features': [], 'sorting_preference': None, 'buy_it_now': True, 'department': 'Electronics', 'must_include_terms': ['Apple', 'iPhone 16'], 'exclude_terms': ['smartphone'], 'walmart_filters': ['Rollback', 'Deals']}
2025-05-13 16:29:32,228 - DealFinderAI.WalmartScraperAgent - INFO - Built optimized Walmart search query: Apple smartphone iPhone 16 Apple iPhone 16 iPhone 16 Pro
2025-05-13 16:29:32,228 - DealFinderAI.WalmartScraperAgent - INFO - Built Walmart query: Apple smartphone iPhone 16 Apple iPhone 16 iPhone 16 Pro
2025-05-13 16:29:32,228 - DealFinderAI.WalmartScraperAgent - INFO - Making Walmart search request with params: {'q': 'Apple smartphone iPhone 16 Apple iPhone 16 iPhone 16 Pro Electronics', 'page': 1, 'affinityOverride': 'default'}
2025-05-13 16:29:35,249 - DealFinderAI.WalmartScraperAgent - INFO - Extracted 0 products from JSON data
2025-05-13 16:29:35,249 - DealFinderAI.WalmartScraperAgent - INFO - JSON extraction failed, falling back to HTML extraction
2025-05-13 16:29:35,251 - DealFinderAI.WalmartScraperAgent - INFO - Found 9 product divs in HTML
2025-05-13 16:29:37,626 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 16:29:37,626 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Straight Talk Apple iPhone 16, 128GB, White - Prepaid Smartphone [Locked to Straight Talk] at 829.0 USD
2025-05-13 16:29:39,889 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 16:29:39,890 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Straight Talk Apple iPhone 16, 256GB, White - Prepaid Smartphone [Locked to Straight Talk] at 929.0 USD
2025-05-13 16:29:42,370 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 16:29:42,371 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Straight Talk Apple iPhone 13, 128GB, Midnight - Prepaid Smartphone [Locked to Straight Talk] at 249.0 USD
2025-05-13 16:29:44,799 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 16:29:44,800 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Straight Talk Apple iPhone 16 Pro Max, 256GB, Black Titanium - Prepaid Smartphone [Locked to Straight Talk] at 1199.0 USD
2025-05-13 16:29:47,389 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 16:29:47,389 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Straight Talk Apple iPhone 16 Pro, 128GB, Black Titanium - Prepaid Smartphone [Locked to Straight Talk] at 999.0 USD
2025-05-13 16:29:50,002 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 16:29:50,003 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Straight Talk Apple iPhone 16 Pro, 128GB, Desert Titanium - Prepaid Smartphone [Locked to Straight Talk] at 999.0 USD
2025-05-13 16:29:52,006 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 16:29:52,006 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: AT&T iPhone 16 Pro 128GB Desert Titanium. Apple Intelligence. at 1049.0 USD
2025-05-13 16:29:53,985 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 16:29:53,985 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Verizon iPhone 16 Pro 128GB Desert Titanium. Apple Intelligence. at 1049.0 USD
2025-05-13 16:29:56,713 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 16:29:56,714 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Straight Talk Apple iPhone 16, 128GB, White - Prepaid Smartphone [Locked to Straight Talk] at 829.0 USD
2025-05-13 16:29:56,714 - DealFinderAI.WalmartScraperAgent - INFO - Extracted 9 products from HTML
2025-05-13 16:29:56,714 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Straight Talk Apple iPhone 16, 128GB, White - Prepaid Smartphone [Locked to Straight Talk] at 829.0 USD
2025-05-13 16:29:56,714 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Straight Talk Apple iPhone 16, 256GB, White - Prepaid Smartphone [Locked to Straight Talk] at 929.0 USD
2025-05-13 16:29:56,714 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Straight Talk Apple iPhone 13, 128GB, Midnight - Prepaid Smartphone [Locked to Straight Talk] at 249.0 USD
2025-05-13 16:29:56,715 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Straight Talk Apple iPhone 16 Pro Max, 256GB, Black Titanium - Prepaid Smartphone [Locked to Straight Talk] at 1199.0 USD
2025-05-13 16:29:56,715 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Straight Talk Apple iPhone 16 Pro, 128GB, Black Titanium - Prepaid Smartphone [Locked to Straight Talk] at 999.0 USD
2025-05-13 16:29:56,715 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Straight Talk Apple iPhone 16 Pro, 128GB, Desert Titanium - Prepaid Smartphone [Locked to Straight Talk] at 999.0 USD
2025-05-13 16:29:56,715 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: AT&T iPhone 16 Pro 128GB Desert Titanium. Apple Intelligence. at 1049.0 USD
2025-05-13 16:29:56,715 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Verizon iPhone 16 Pro 128GB Desert Titanium. Apple Intelligence. at 1049.0 USD
2025-05-13 16:29:57,418 - DealFinderAI.WalmartScraperAgent - INFO - Extracted 8 products from Walmart
2025-05-13 16:29:57,420 - DealFinderAI.WalmartScraperAgent - INFO - Applying relevance filtering to 8 products
2025-05-13 16:29:57,421 - DealFinderAI.WalmartScraperAgent - INFO - Filtered to 5 most relevant products
2025-05-13 16:29:57,421 - DealFinderAI.Controller - INFO - Walmart returned 5 products
2025-05-13 16:29:57,421 - DealFinderAI.EbayScraperAgent - INFO - Searching eBay for: {'product_type': 'smartphone', 'keywords': ['iphone', '16'], 'price_range': None, 'brands': ['Apple'], 'features': [], 'sorting_preference': None, 'buy_it_now': True}
2025-05-13 16:29:57,421 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: 
            Optimize this search query for eBay's search engine:
            
            "smartphone iphone 16 Apple"
            
            For eBay searches, please:
            1. Focus on exact model numbers and specific part identifiers if present
            2. Include key brand names
            3. Remove generic words that may dilute results
            4. Add eBay-specific terms that might improve results
            5. Optimize for finding the most relevant listings
            
            Return a JSON object with:
            - optimized_keywords: List of 3-5 optimized search terms (most important first)
            - category_hints: Any eBay category suggestions
            - must_include_terms: Terms that MUST be in results
            - exclude_terms: Terms that should NOT be in results
            
            Format as JSON only with no explanation.
            
2025-05-13 16:29:58,269 - DealFinderAI.EbayScraperAgent - INFO - Optimized search parameters: {'product_type': 'smartphone', 'keywords': ['iPhone 16', 'Apple iPhone 16', 'iPhone 16 Pro', 'iPhone 16 Pro Max'], 'price_range': None, 'brands': ['Apple'], 'features': [], 'sorting_preference': None, 'buy_it_now': True, 'category_hints': ['Cell Phones & Smartphones'], 'must_include_terms': ['Apple', 'iPhone'], 'exclude_terms': ['repair', 'parts', 'broken', 'damaged']}
2025-05-13 16:29:58,269 - DealFinderAI.EbayScraperAgent - INFO - Built optimized eBay search query: smartphone Apple iPhone 16 Apple iPhone 16 iPhone 16 Pro
2025-05-13 16:29:58,270 - DealFinderAI.EbayScraperAgent - INFO - Built eBay query: smartphone Apple iPhone 16 Apple iPhone 16 iPhone 16 Pro
2025-05-13 16:29:58,270 - DealFinderAI.EbayScraperAgent - INFO - Making eBay search request with params: {'_nkw': 'smartphone Apple iPhone 16 Apple iPhone 16 iPhone 16 Pro Cell Phones & Smartphones', '_sacat': '0', '_ipg': '96', 'LH_BIN': '1'}
2025-05-13 16:30:00,944 - DealFinderAI.EbayScraperAgent - INFO - Found 125 product listings
2025-05-13 16:30:00,946 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 15 (Excellent Condition) - (Unlocked, AT&T, T-Mobile, Verizon) at 479.99 USD
2025-05-13 16:30:00,946 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 15 (Excellent Condition) - (Unlocked, AT&T, T-Mobile, Verizon) at 479.99 USD
2025-05-13 16:30:00,947 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: APPLE IPHONE 16 PRO 128GB VERIZON | UNUSED OPEN BOX - BATTERY 100% at 748.88 USD
2025-05-13 16:30:00,947 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: APPLE IPHONE 16 PRO 128GB VERIZON | UNUSED OPEN BOX - BATTERY 100% at 748.88 USD
2025-05-13 16:30:00,948 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: APPLE IPHONE 16 PRO 128GB VERIZON | BRAND NEW IN RETAIL BOX | APPLE WARRANTY at 798.88 USD
2025-05-13 16:30:00,948 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: APPLE IPHONE 16 PRO 128GB VERIZON | BRAND NEW IN RETAIL BOX | APPLE WARRANTY at 798.88 USD
2025-05-13 16:30:00,949 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 14 Pro 128GB Unlocked Good Condition - All Colors at 519.99 USD
2025-05-13 16:30:00,949 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 14 Pro 128GB Unlocked Good Condition - All Colors at 519.99 USD
2025-05-13 16:30:00,950 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 16Pro 256gb Unlocked at 929.0 USD
2025-05-13 16:30:00,950 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 16Pro 256gb Unlocked at 929.0 USD
2025-05-13 16:30:00,951 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 16 Pro - 128 GB - Black Titanium (Verizon) at 999.99 USD
2025-05-13 16:30:00,951 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Apple iPhone 16 Pro - 128 GB - Black Titanium (Verizon) at 999.99 USD
2025-05-13 16:30:00,952 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: NEW Apple iPhone 16 Pro 1TB - Factory Unlocked - $0.01 at 1175.0 USD
2025-05-13 16:30:00,952 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: NEW Apple iPhone 16 Pro 1TB - Factory Unlocked - $0.01 at 1175.0 USD
2025-05-13 16:30:00,953 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: apple iphone 16 pro max 256gb unlocked at 1027.0 USD
2025-05-13 16:30:00,953 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: apple iphone 16 pro max 256gb unlocked at 1027.0 USD
2025-05-13 16:30:01,927 - DealFinderAI.EbayScraperAgent - INFO - Extracted 8 products from eBay
2025-05-13 16:30:01,929 - DealFinderAI.EbayScraperAgent - INFO - Applying relevance filtering to 8 products
2025-05-13 16:30:01,930 - DealFinderAI.EbayScraperAgent - INFO - Filtered to 5 most relevant products
2025-05-13 16:30:01,930 - DealFinderAI.Controller - INFO - eBay returned 5 products
2025-05-13 16:30:01,930 - DealFinderAI.Controller - INFO - Total products before aggregation: 15
2025-05-13 16:30:01,930 - DealFinderAI.ResultsAggregatorAgent - INFO - Aggregating results for query: iphone 16
2025-05-13 16:30:01,931 - DealFinderAI.ResultsAggregatorAgent - INFO - Found 3 results from various sources
2025-05-13 16:30:01,931 - DealFinderAI.ResultsAggregatorAgent - INFO - Source Amazon: 5 products
2025-05-13 16:30:01,931 - DealFinderAI.ResultsAggregatorAgent - INFO - Source Walmart: 5 products
2025-05-13 16:30:01,931 - DealFinderAI.ResultsAggregatorAgent - INFO - Source eBay: 5 products
2025-05-13 16:30:01,931 - DealFinderAI.ResultsAggregatorAgent - INFO - Total products extracted: 15
2025-05-13 16:30:01,931 - DealFinderAI.ResultsAggregatorAgent - INFO - Ranking 15 products
2025-05-13 16:30:01,931 - DealFinderAI.ResultsAggregatorAgent - INFO - Sorted 15 products by score
2025-05-13 16:30:01,931 - DealFinderAI.ResultsAggregatorAgent - INFO - Returning 10 diversified products
2025-05-13 16:30:01,931 - DealFinderAI.ResultsAggregatorAgent - INFO - Products after ranking: 10
2025-05-13 16:30:01,932 - DealFinderAI.ResultsAggregatorAgent - INFO - Final products: 10
2025-05-13 16:30:01,932 - DealFinderAI.Controller - INFO - Products after aggregation: 10
2025-05-13 16:30:01,932 - DealFinderAI.ProductComparisonAgent - INFO - Comparing products for query: iphone 16
2025-05-13 16:30:01,932 - DealFinderAI.ProductComparisonAgent - INFO - Found 10 products to compare
2025-05-13 16:30:01,932 - DealFinderAI.ProductComparisonAgent - INFO - Grouping 10 products
2025-05-13 16:30:01,933 - DealFinderAI.ProductComparisonAgent - INFO - Created 0 product groups
2025-05-13 16:30:01,933 - DealFinderAI.ChatMemoryAgent - INFO - Storing context for conversation session_20250513162922_a3ce40c4
2025-05-13 16:30:01,933 - DealFinderAI.ChatMemoryAgent - INFO - Storing 10 products for conversation session_20250513162922_a3ce40c4
2025-05-13 16:30:01,933 - DealFinderAI.PresentationAgent - INFO - Preparing presentation for 10 products
2025-05-13 16:30:01,933 - DealFinderAI.PresentationAgent - INFO - Formatting 10 products for display
2025-05-13 16:30:01,933 - DealFinderAI.PresentationAgent - INFO - Product 1: iPhone 16 Pro Silicone Case with MagSafe and Camera Control - Black  - Price: $48.75 - Source: Amazon
2025-05-13 16:30:01,934 - DealFinderAI.PresentationAgent - INFO - Product 2: APPLE IPHONE 16 PRO 128GB VERIZON | BRAND NEW IN RETAIL BOX | APPLE WARRANTY - Price: $798.88 - Source: eBay
2025-05-13 16:30:01,934 - DealFinderAI.PresentationAgent - INFO - Product 3: Straight Talk Apple iPhone 16 Pro, 128GB, Black Titanium - Prepaid Smartphone [Locked to Straight Talk] - Price: $999.00 - Source: Walmart
2025-05-13 16:30:01,934 - DealFinderAI.PresentationAgent - INFO - Product 4: Apple iPhone 16 Pro, US Version, 128GB, Black Titanium - Unlocked (Renewed) - Price: $819.95 - Source: Amazon
2025-05-13 16:30:01,934 - DealFinderAI.PresentationAgent - INFO - Product 5: Apple iPhone 16 Pro, US Version, 128GB, White Titanium - Unlocked (Renewed Premium) - Price: $899.97 - Source: Amazon
2025-05-13 16:30:01,934 - DealFinderAI.PresentationAgent - INFO - Product 6: Apple iPhone 16 Pro Max, US Version, 256GB, Black Titanium - Unlocked (Renewed) - Price: $1134.97 - Source: Amazon
2025-05-13 16:30:01,934 - DealFinderAI.PresentationAgent - INFO - Product 7: Apple iPhone 16, US Version, 128GB, Black - Unlocked (Renewed Premium) - Price: $722.58 - Source: Amazon
2025-05-13 16:30:01,934 - DealFinderAI.PresentationAgent - INFO - Product 8: APPLE IPHONE 16 PRO 128GB VERIZON | UNUSED OPEN BOX - BATTERY 100% - Price: $748.88 - Source: eBay
2025-05-13 16:30:01,935 - DealFinderAI.PresentationAgent - INFO - Product 9: Apple iPhone 16Pro 256gb Unlocked - Price: $929.00 - Source: eBay
2025-05-13 16:30:01,935 - DealFinderAI.PresentationAgent - INFO - Product 10: Apple iPhone 16 Pro - 128 GB - Black Titanium (Verizon) - Price: $999.99 - Source: eBay
2025-05-13 16:30:01,935 - DealFinderAI.ChatMemoryAgent - INFO - Storing context for conversation session_20250513162922_a3ce40c4
2025-05-13 16:30:01,935 - DealFinderAI.ChatMemoryAgent - INFO - Storing 10 products for conversation session_20250513162922_a3ce40c4
2025-05-13 16:30:01,935 - DealFinderAI.Controller - INFO - Successfully stored search results in memory
2025-05-13 16:31:13,543 - DealFinderAI.Controller - INFO - Processing user query: find the best deals on marshall headphones
2025-05-13 16:31:13,544 - DealFinderAI.ChatMemoryAgent - INFO - Analyzing query: 'find the best deals on marshall headphones' for conversation session_20250513162922_a3ce40c4
2025-05-13 16:31:13,544 - DealFinderAI.ChatMemoryAgent - INFO - Found 10 products in memory
2025-05-13 16:31:13,544 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: 
        You are an AI helping to analyze if a user's query is a follow-up question about previously shown products, or if it's a completely new search.

        Previous products shown to the user:
        Product 1: iPhone 16 Pro Silicone Case with MagSafe and Camera Control - Black 
Product 2: APPLE IPHONE 16 PRO 128GB VERIZON | BRAND NEW IN RETAIL BOX | APPLE WARRANTY
Product 3: Straight Talk Apple iPhone 16 Pro, 128GB, Black Titanium - Prepaid Smartphone [Locked to Straight Talk]
Product 4: Apple iPhone 16 Pro, US Version, 128GB, Black Titanium - Unlocked (Renewed)
Product 5: Apple iPhone 16 Pro, US Version, 128GB, White Titanium - Unlocked (Renewed Premium)

        User's new query: "find the best deals on marshall headphones"

        Please analyze if this query is:
        1. A follow-up question about the previously shown products (e.g., asking for more details, comparing them, etc.)
        2. A completely new search (e.g., asking about different products, starting a new topic)

        Return your analysis in JSON format:
        {
            "is_new_search": true/false,
            "is_follow_up": true/false,
            "reasoning": "brief explanation of your decision",
            "referenced_product_indices": [list of 0-based indices of referenced products, if any]
        }
        
        Only return the JSON, with no additional text.
        
2025-05-13 16:31:14,738 - DealFinderAI.Controller - INFO - Analyze response: {'is_follow_up': False, 'focused_product': None, 'referenced_products': [], 'products': []}
2025-05-13 16:31:14,739 - DealFinderAI.Controller - INFO - Is follow-up? False
2025-05-13 16:31:14,739 - DealFinderAI.Controller - INFO - Referenced products: 0
2025-05-13 16:31:14,739 - DealFinderAI.Controller - INFO - Processing as new search query
2025-05-13 16:31:14,739 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: find the best deals on marshall headphones
2025-05-13 16:31:15,956 - DealFinderAI.GeminiAgent - WARNING - Failed to parse Gemini response as JSON: ```json
{
  "product_type": "headphones",
  "keywords": ["marshall", "headphones"],
  "price_range": null,
  "brands": ["marshall"],
  "features": [],
  "sorting_preference": "price_low_to_high",
  "buy_it_now": true
}
```

2025-05-13 16:31:15,957 - DealFinderAI.Controller - INFO - Parsed search parameters: {'product_type': 'headphones', 'keywords': ['marshall', 'headphones'], 'price_range': None, 'brands': ['marshall'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-13 16:31:15,957 - DealFinderAI.AmazonScraperAgent - INFO - Searching Amazon for: {'product_type': 'headphones', 'keywords': ['marshall', 'headphones'], 'price_range': None, 'brands': ['marshall'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-13 16:31:15,957 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: 
            Optimize this search query for Amazon's search engine:
            
            "headphones marshall headphones marshall"
            
            For Amazon searches, please:
            1. Focus on product-specific model numbers and identifiers if present
            2. Include key brand names (Amazon's A9 algorithm prioritizes brand matches)
            3. Remove generic words that may dilute results
            4. Add Amazon-specific terms that might improve results (like "Amazon's Choice" if looking for quality products)
            5. Optimize for Amazon's search algorithm which prioritizes exact matches and recent sales volume
            
            Return a JSON object with:
            - optimized_keywords: List of 3-5 optimized search terms (most important first)
            - amazon_category: Any Amazon department/category suggestion (Electronics, Books, etc.)
            - must_include_terms: Terms that MUST be in results
            - exclude_terms: Terms that should NOT be in results
            - amazon_search_filters: Any Amazon-specific filters to apply (Prime eligible, etc.)
            
            Format as JSON only with no explanation.
            
2025-05-13 16:31:16,756 - DealFinderAI.AmazonScraperAgent - INFO - Optimized search parameters: {'product_type': 'headphones', 'keywords': ['Marshall Headphones', 'Marshall Major IV', 'Marshall Monitor II'], 'price_range': None, 'brands': ['marshall'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True, 'category': 'Electronics', 'must_include_terms': ['Marshall'], 'exclude_terms': ['headphones'], 'amazon_filters': ['Prime Eligible', 'Customer Reviews: 4 stars & up']}
2025-05-13 16:31:16,757 - DealFinderAI.AmazonScraperAgent - INFO - Built optimized Amazon search query: marshall headphones Marshall Headphones Marshall Major IV Marshall Monitor II
2025-05-13 16:31:16,757 - DealFinderAI.AmazonScraperAgent - INFO - Built Amazon query: marshall headphones Marshall Headphones Marshall Major IV Marshall Monitor II
2025-05-13 16:31:16,757 - DealFinderAI.AmazonScraperAgent - INFO - Making Amazon search request with params: {'k': 'marshall headphones Marshall Headphones Marshall Major IV Marshall Monitor II', 'ref': 'nb_sb_noss', 'crid': 1747168276, 'i': 'aps', 'search-alias': 'electronics', 's': 'price-asc-rank'}
2025-05-13 16:31:18,210 - DealFinderAI.AmazonScraperAgent - INFO - Found 24 product divs in search results
2025-05-13 16:31:18,214 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: USB-C Charger Cable Compatible for Marshall Emberton II Marshall Stockwell II,Marshall Monitor II,Marshall Monitor III,Marshall Motif ANC,Marshall Major IV,Marshall Major V,Marshall Major III at 5.99 USD
2025-05-13 16:31:18,214 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: USB-C Charger Cable Compatible for Marshall Emberton II Marshall Stockwell II,Marshall Monitor II,Marshall Monitor III,Marshall Motif ANC,Marshall Major IV,Marshall Major V,Marshall Major III at 5.99 USD
2025-05-13 16:31:18,218 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Replacement Charging Cable Compatible for Marshall Major IV Bluetooth Headphone,Marshall Stockwell II Speakers,Marshall Emberton ii Speakers at 6.99 USD
2025-05-13 16:31:18,218 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Replacement Charging Cable Compatible for Marshall Major IV Bluetooth Headphone,Marshall Stockwell II Speakers,Marshall Emberton ii Speakers at 6.99 USD
2025-05-13 16:31:18,221 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Major V Cable, Spring OFC Replacement Cable Extension Cord for Marshall Major Monitor Mid I 1 II 2 III 3 IV 4 V 5 A.N.C Voice Bluetooth Headphones at 8.99 USD
2025-05-13 16:31:18,221 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Major V Cable, Spring OFC Replacement Cable Extension Cord for Marshall Major Monitor Mid I 1 II 2 III 3 IV 4 V 5 A.N.C Voice Bluetooth Headphones at 8.99 USD
2025-05-13 16:31:18,224 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Replacement Ear Pads Cushions for Marshall Major I/II/III/IV/V ANC Bluetooth Wireless/Wired Headphones, for Major 1/2/3/4/5 Headset, Earpads with Noise Isolation Foam Black 1 Pair at 8.99 USD
2025-05-13 16:31:18,225 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Replacement Ear Pads Cushions for Marshall Major I/II/III/IV/V ANC Bluetooth Wireless/Wired Headphones, for Major 1/2/3/4/5 Headset, Earpads with Noise Isolation Foam Black 1 Pair at 8.99 USD
2025-05-13 16:31:18,228 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: USB Charging Cable for Marshall Major IV/Monitor II Headphone/Marshall Major III Bluetooth Wireless On-Ear Headphone/Marshall Emberton Bluetooth Portable Speaker (USB-C Charging Cable) at 8.99 USD
2025-05-13 16:31:18,228 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: USB Charging Cable for Marshall Major IV/Monitor II Headphone/Marshall Major III Bluetooth Wireless On-Ear Headphone/Marshall Emberton Bluetooth Portable Speaker (USB-C Charging Cable) at 8.99 USD
2025-05-13 16:31:18,231 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: 3.5mm to 3.5mm Major IV Cable Replacement Coiled Audio Cable Extension Cord Compatible with Marshall Major 2 II Major 3 III Major 4 IV Monitor II A.N.C Headphones at 8.99 USD
2025-05-13 16:31:18,231 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: 3.5mm to 3.5mm Major IV Cable Replacement Coiled Audio Cable Extension Cord Compatible with Marshall Major 2 II Major 3 III Major 4 IV Monitor II A.N.C Headphones at 8.99 USD
2025-05-13 16:31:18,235 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Replacement Audio Cable for Marshall Headphones, Compatible with Monitor Major 2 II Major 3 III Major 4 IV Mid Headphones 3.5mm Male Stereo Jack Cord, 1.2 Meters, No Inline Control, Black at 9.99 USD
2025-05-13 16:31:18,235 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Replacement Audio Cable for Marshall Headphones, Compatible with Monitor Major 2 II Major 3 III Major 4 IV Mid Headphones 3.5mm Male Stereo Jack Cord, 1.2 Meters, No Inline Control, Black at 9.99 USD
2025-05-13 16:31:18,239 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Replacement Audio Cable for Marshall headphones, Compatible with Monitor Monitor II Major 2 II Major 3 III Major 4 IV Mid Headphones 3.5mm Male Stereo Jack Cord, 4 Ft , Inline Mic/Remote Control at 9.99 USD
2025-05-13 16:31:18,239 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Replacement Audio Cable for Marshall headphones, Compatible with Monitor Monitor II Major 2 II Major 3 III Major 4 IV Mid Headphones 3.5mm Male Stereo Jack Cord, 4 Ft , Inline Mic/Remote Control at 9.99 USD
2025-05-13 16:31:18,242 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Replacement Audio Cable for Marshall headphones, Compatible with Monitor Monitor II Major 2 II Major 3 III Major 4 IV Mid Headphones 3.5mm Male Stereo Jack Cord, 4 Ft , Inline Mic/Remote Controller at 11.99 USD
2025-05-13 16:31:18,242 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Replacement Audio Cable for Marshall headphones, Compatible with Monitor Monitor II Major 2 II Major 3 III Major 4 IV Mid Headphones 3.5mm Male Stereo Jack Cord, 4 Ft , Inline Mic/Remote Controller at 11.99 USD
2025-05-13 16:31:18,246 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Replacement Audio Cable for Marshall Headphones, Compatible with Monitor Major 2 II Major 3 III Major 4 IV Mid Headphones 3.5mm Male Stereo Jack Cord, 1.2 Meters, No Inline Control, Black at 11.99 USD
2025-05-13 16:31:18,246 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Replacement Audio Cable for Marshall Headphones, Compatible with Monitor Major 2 II Major 3 III Major 4 IV Mid Headphones 3.5mm Male Stereo Jack Cord, 1.2 Meters, No Inline Control, Black at 11.99 USD
2025-05-13 16:31:18,751 - DealFinderAI.AmazonScraperAgent - INFO - Extracted 10 products from Amazon
2025-05-13 16:31:18,752 - DealFinderAI.AmazonScraperAgent - INFO - Applying relevance filtering to 10 products
2025-05-13 16:31:18,752 - DealFinderAI.AmazonScraperAgent - INFO - Filtered to 5 most relevant products
2025-05-13 16:31:18,752 - DealFinderAI.Controller - INFO - Amazon response content: {'source': 'Amazon', 'query': 'marshall headphones Marshall Headphones Marshall Major IV Marshall Monitor II', 'products': [{'title': 'Replacement Ear Pads Cushions for Marshall Major I/II/III/IV/V ANC Bluetooth Wireless/Wired Headphones, for Major 1/2/3/4/5 Headset, Earpads with Noise Isolation Foam Black 1 Pair', 'price': 8.99, 'was_price': None, 'currency': 'USD', 'url': 'https://www.amazon.com/INF-Replacement-Marshall-Major-Headphones/dp/B0CLYCCMW9/ref=sr_1_4?crid=1747168276&dib=eyJ2IjoiMSJ9.S0yfQ2lFwUt9svx40AV47I-yI9XAfZVsKX_gSF3aPdIuriRBcD-Yi90WxJOvpeGGQurQuK5u2QkbyY7ERK72pGCuveEZ9VP6wQwQ1gbZc1bDuIx_CC9K0fn01Unyw9h7L6H_35cPbTGTFRJkzMpRjMJKw3_Byx6I9k9BOPalWXPLoH33zlLf2Ig7nXIzoWCFq_KanLo3D-OmcbxpjqFRxY-NWEOPTX6dSLXaVlzgQwUcrIGI-Sv75QOaDjkRphz5H-AHlffeNS0xhz-ZKoINxAIIswy0DlZa0AL055USWH0.f_EfwawMECmLFCxigV_L9VyqJRcAlWfcJae2mjNgcA4&dib_tag=se&keywords=marshall+headphones+Marshall+Headphones+Marshall+Major+IV+Marshall+Monitor+II&qid=1747168276&s=electronics&sr=1-4', 'image_url': 'https://m.media-amazon.com/images/I/51eesUctcnL._AC_UY218_.jpg', 'rating': 4.8, 'reviews': 23, 'is_sponsored': False, 'is_prime': False, 'is_amazon_choice': False, 'is_best_seller': False, 'asin': 'B0CLYCCMW9', 'description': 'Replacement Ear Pads Cushions for Marshall Major I/II/III/IV/V ANC Bluetooth Wireless/Wired Headphones, for Major 1/2/3/4/5 Headset, Earpads with Noise Isolation Foam Black 1 Pair 4.8 out of 5 stars 23 Price, product page$8.99$8.99FREE delivery Sun, May 18 on $35 of items shipped by AmazonOr fastest delivery Tomorrow, May 14Add to cart', 'delivery_info': '', 'out_of_stock': False, 'source': 'Amazon', 'relevance_score': 32}, {'title': '3.5mm to 3.5mm Major IV Cable Replacement Coiled Audio Cable Extension Cord Compatible with Marshall Major 2 II Major 3 III Major 4 IV Monitor II A.N.C Headphones', 'price': 8.99, 'was_price': None, 'currency': 'USD', 'url': 'https://www.amazon.com/Replacement-Extension-Compatible-Bluetooth-Headphones/dp/B0BK3NKZ14/ref=sr_1_6?crid=1747168276&dib=eyJ2IjoiMSJ9.S0yfQ2lFwUt9svx40AV47I-yI9XAfZVsKX_gSF3aPdIuriRBcD-Yi90WxJOvpeGGQurQuK5u2QkbyY7ERK72pGCuveEZ9VP6wQwQ1gbZc1bDuIx_CC9K0fn01Unyw9h7L6H_35cPbTGTFRJkzMpRjMJKw3_Byx6I9k9BOPalWXPLoH33zlLf2Ig7nXIzoWCFq_KanLo3D-OmcbxpjqFRxY-NWEOPTX6dSLXaVlzgQwUcrIGI-Sv75QOaDjkRphz5H-AHlffeNS0xhz-ZKoINxAIIswy0DlZa0AL055USWH0.f_EfwawMECmLFCxigV_L9VyqJRcAlWfcJae2mjNgcA4&dib_tag=se&keywords=marshall+headphones+Marshall+Headphones+Marshall+Major+IV+Marshall+Monitor+II&qid=1747168276&s=electronics&sr=1-6', 'image_url': 'https://m.media-amazon.com/images/I/61yVgHvYWmL._AC_UY218_.jpg', 'rating': 5.0, 'reviews': 1, 'is_sponsored': False, 'is_prime': False, 'is_amazon_choice': False, 'is_best_seller': False, 'asin': 'B0BK3NKZ14', 'description': '3.5mm to 3.5mm Major IV Cable Replacement Coiled Audio Cable Extension Cord Compatible with Marshall Major 2 II Major 3 III Major 4 IV Monitor II A.N.C Headphones 5.0 out of 5 stars 1 Price, product page$8.99$8.99Save 5% at checkoutFREE delivery Sun, May 18 on $35 of items shipped by AmazonOr fastest delivery Thu, May 15Only 6 left in stock - order soon.Add to cart', 'delivery_info': '', 'out_of_stock': False, 'source': 'Amazon', 'relevance_score': 32}, {'title': 'Replacement Audio Cable for Marshall headphones, Compatible with Monitor Monitor II Major 2 II Major 3 III Major 4 IV Mid Headphones 3.5mm Male Stereo Jack Cord, 4 Ft , Inline Mic/Remote Controller', 'price': 11.99, 'was_price': None, 'currency': 'USD', 'url': 'https://www.amazon.com/Replacement-headphones-Compatible-Headphones-Controller/dp/B0CX95B8B3/ref=sr_1_9?crid=1747168276&dib=eyJ2IjoiMSJ9.S0yfQ2lFwUt9svx40AV47I-yI9XAfZVsKX_gSF3aPdIuriRBcD-Yi90WxJOvpeGGQurQuK5u2QkbyY7ERK72pGCuveEZ9VP6wQwQ1gbZc1bDuIx_CC9K0fn01Unyw9h7L6H_35cPbTGTFRJkzMpRjMJKw3_Byx6I9k9BOPalWXPLoH33zlLf2Ig7nXIzoWCFq_KanLo3D-OmcbxpjqFRxY-NWEOPTX6dSLXaVlzgQwUcrIGI-Sv75QOaDjkRphz5H-AHlffeNS0xhz-ZKoINxAIIswy0DlZa0AL055USWH0.f_EfwawMECmLFCxigV_L9VyqJRcAlWfcJae2mjNgcA4&dib_tag=se&keywords=marshall+headphones+Marshall+Headphones+Marshall+Major+IV+Marshall+Monitor+II&qid=1747168276&s=electronics&sr=1-9', 'image_url': 'https://m.media-amazon.com/images/I/61D-M4CdlTL._AC_UY218_.jpg', 'rating': 5.0, 'reviews': 2, 'is_sponsored': False, 'is_prime': False, 'is_amazon_choice': False, 'is_best_seller': False, 'asin': 'B0CX95B8B3', 'description': 'Replacement Audio Cable for Marshall headphones, Compatible with Monitor Monitor II Major 2 II Major 3 III Major 4 IV Mid Headphones 3.5mm Male Stereo Jack Cord, 4 Ft , Inline Mic/Remote Controller 5.0 out of 5 stars 2 Price, product page$11.99$11.99FREE delivery Sun, May 18 on $35 of items shipped by AmazonOr fastest delivery Fri, May 16Only 8 left in stock - order soon.Add to cart', 'delivery_info': '', 'out_of_stock': False, 'source': 'Amazon', 'relevance_score': 32}, {'title': 'Major V Cable, Spring OFC Replacement Cable Extension Cord for Marshall Major Monitor Mid I 1 II 2 III 3 IV 4 V 5 A.N.C Voice Bluetooth Headphones', 'price': 8.99, 'was_price': None, 'currency': 'USD', 'url': 'https://www.amazon.com/Replacement-Headphones-Replaceable-Extension-Bluetooth/dp/B08BFVG39V/ref=sr_1_3?crid=1747168276&dib=eyJ2IjoiMSJ9.S0yfQ2lFwUt9svx40AV47I-yI9XAfZVsKX_gSF3aPdIuriRBcD-Yi90WxJOvpeGGQurQuK5u2QkbyY7ERK72pGCuveEZ9VP6wQwQ1gbZc1bDuIx_CC9K0fn01Unyw9h7L6H_35cPbTGTFRJkzMpRjMJKw3_Byx6I9k9BOPalWXPLoH33zlLf2Ig7nXIzoWCFq_KanLo3D-OmcbxpjqFRxY-NWEOPTX6dSLXaVlzgQwUcrIGI-Sv75QOaDjkRphz5H-AHlffeNS0xhz-ZKoINxAIIswy0DlZa0AL055USWH0.f_EfwawMECmLFCxigV_L9VyqJRcAlWfcJae2mjNgcA4&dib_tag=se&keywords=marshall+headphones+Marshall+Headphones+Marshall+Major+IV+Marshall+Monitor+II&qid=1747168276&s=electronics&sr=1-3', 'image_url': 'https://m.media-amazon.com/images/I/51jtLfzQU9L._AC_UY218_.jpg', 'rating': 4.3, 'reviews': 120, 'is_sponsored': False, 'is_prime': False, 'is_amazon_choice': False, 'is_best_seller': False, 'asin': 'B08BFVG39V', 'description': 'BUTIAOMajor V Cable, Spring OFC Replacement Cable Extension Cord for Marshall Major Monitor Mid I 1 II 2 III 3 IV 4 V 5 A.N.C Voice Bluetooth Headphones 4.3 out of 5 stars 120 Price, product page$8.99$8.99FREE delivery Sun, May 18 on $35 of items shipped by AmazonOr fastest delivery Tomorrow, May 14Add to cart', 'delivery_info': '', 'out_of_stock': False, 'source': 'Amazon', 'relevance_score': 31}, {'title': 'Replacement Audio Cable for Marshall Headphones, Compatible with Monitor Major 2 II Major 3 III Major 4 IV Mid Headphones 3.5mm Male Stereo Jack Cord, 1.2 Meters, No Inline Control, Black', 'price': 9.99, 'was_price': None, 'currency': 'USD', 'url': 'https://www.amazon.com/UNCLE-LIGHT-Replacement-Headphones-Compatible/dp/B0D59Q6WLY/ref=sr_1_7?crid=1747168276&dib=eyJ2IjoiMSJ9.S0yfQ2lFwUt9svx40AV47I-yI9XAfZVsKX_gSF3aPdIuriRBcD-Yi90WxJOvpeGGQurQuK5u2QkbyY7ERK72pGCuveEZ9VP6wQwQ1gbZc1bDuIx_CC9K0fn01Unyw9h7L6H_35cPbTGTFRJkzMpRjMJKw3_Byx6I9k9BOPalWXPLoH33zlLf2Ig7nXIzoWCFq_KanLo3D-OmcbxpjqFRxY-NWEOPTX6dSLXaVlzgQwUcrIGI-Sv75QOaDjkRphz5H-AHlffeNS0xhz-ZKoINxAIIswy0DlZa0AL055USWH0.f_EfwawMECmLFCxigV_L9VyqJRcAlWfcJae2mjNgcA4&dib_tag=se&keywords=marshall+headphones+Marshall+Headphones+Marshall+Major+IV+Marshall+Monitor+II&qid=1747168276&s=electronics&sr=1-7', 'image_url': 'https://m.media-amazon.com/images/I/51WhBzICx2L._AC_UY218_.jpg', 'rating': 0.0, 'reviews': 16, 'is_sponsored': False, 'is_prime': False, 'is_amazon_choice': False, 'is_best_seller': False, 'asin': 'B0D59Q6WLY', 'description': 'UNCLE LIGHTReplacement Audio Cable for Marshall Headphones, Compatible with Monitor Major 2 II Major 3 III Major 4 IV Mid Headphones 3.5mm Male Stereo Jack Cord, 1.2 Meters, No Inline Control, Black Price, product page$9.99$9.99FREE delivery Sun, May 18 on $35 of items shipped by AmazonOr fastest delivery Thu, May 15Only 16 left in stock - order soon.Add to cart', 'delivery_info': '', 'out_of_stock': False, 'source': 'Amazon', 'relevance_score': 24}]}
2025-05-13 16:31:18,752 - DealFinderAI.Controller - INFO - Amazon returned 5 products
2025-05-13 16:31:18,752 - DealFinderAI.WalmartScraperAgent - INFO - Searching Walmart for: {'product_type': 'headphones', 'keywords': ['marshall', 'headphones'], 'price_range': None, 'brands': ['marshall'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-13 16:31:18,752 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: 
            Optimize this search query for Walmart's search engine:
            
            "headphones marshall headphones marshall"
            
            For Walmart searches, please:
            1. Focus on model numbers and specific identifiers if present
            2. Include key brand names (Walmart's search works well with brand names)
            3. Remove generic words that may dilute results
            4. Add Walmart-specific terms that might improve results (like "Rollback" if looking for deals)
            5. Prioritize precise product names and specifications
            
            Return a JSON object with:
            - optimized_keywords: List of 3-5 optimized search terms (most important first)
            - department_hint: Any Walmart department suggestion (Electronics, Home, etc.)
            - must_include_terms: Terms that MUST be in results
            - exclude_terms: Terms that should NOT be in results
            - walmart_specific_filters: Any Walmart-specific filters to apply
            
            Format as JSON only with no explanation.
            
2025-05-13 16:31:19,497 - DealFinderAI.WalmartScraperAgent - INFO - Optimized search parameters: {'product_type': 'headphones', 'keywords': ['Marshall Headphones', 'Marshall Major IV', 'Marshall Monitor II'], 'price_range': None, 'brands': ['marshall'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True, 'department': 'Electronics', 'must_include_terms': ['Marshall'], 'exclude_terms': ['headphones']}
2025-05-13 16:31:19,497 - DealFinderAI.WalmartScraperAgent - INFO - Built optimized Walmart search query: marshall headphones Marshall Headphones Marshall Major IV Marshall Monitor II
2025-05-13 16:31:19,498 - DealFinderAI.WalmartScraperAgent - INFO - Built Walmart query: marshall headphones Marshall Headphones Marshall Major IV Marshall Monitor II
2025-05-13 16:31:19,499 - DealFinderAI.WalmartScraperAgent - INFO - Making Walmart search request with params: {'q': 'marshall headphones Marshall Headphones Marshall Major IV Marshall Monitor II Electronics', 'page': 1, 'affinityOverride': 'default', 'sort': 'price_low'}
2025-05-13 16:31:21,375 - DealFinderAI.WalmartScraperAgent - INFO - Extracted 0 products from JSON data
2025-05-13 16:31:21,376 - DealFinderAI.WalmartScraperAgent - INFO - JSON extraction failed, falling back to HTML extraction
2025-05-13 16:31:21,377 - DealFinderAI.WalmartScraperAgent - INFO - Found 2 product divs in HTML
2025-05-13 16:31:23,567 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 16:31:23,568 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Marshall Major IV Bluetooth Over Ear Headphones, Black, Model 1005773 at 70.99 USD
2025-05-13 16:31:25,413 - DealFinderAI.WalmartScraperAgent - INFO - Gemini used for product extraction
2025-05-13 16:31:25,413 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Marshall Major IV On-Ear Bluetooth Headphone, Black at 99.99 USD
2025-05-13 16:31:25,414 - DealFinderAI.WalmartScraperAgent - INFO - Extracted 2 products from HTML
2025-05-13 16:31:25,414 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Marshall Major IV Bluetooth Over Ear Headphones, Black, Model 1005773 at 70.99 USD
2025-05-13 16:31:25,414 - DealFinderAI.WalmartScraperAgent - INFO - Extracted product: Marshall Major IV On-Ear Bluetooth Headphone, Black at 99.99 USD
2025-05-13 16:31:26,824 - DealFinderAI.WalmartScraperAgent - INFO - Extracted 2 products from Walmart
2025-05-13 16:31:26,824 - DealFinderAI.Controller - INFO - Walmart returned 2 products
2025-05-13 16:31:26,824 - DealFinderAI.EbayScraperAgent - INFO - Searching eBay for: {'product_type': 'headphones', 'keywords': ['marshall', 'headphones'], 'price_range': None, 'brands': ['marshall'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-13 16:31:26,824 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: 
            Optimize this search query for eBay's search engine:
            
            "headphones marshall headphones marshall"
            
            For eBay searches, please:
            1. Focus on exact model numbers and specific part identifiers if present
            2. Include key brand names
            3. Remove generic words that may dilute results
            4. Add eBay-specific terms that might improve results
            5. Optimize for finding the most relevant listings
            
            Return a JSON object with:
            - optimized_keywords: List of 3-5 optimized search terms (most important first)
            - category_hints: Any eBay category suggestions
            - must_include_terms: Terms that MUST be in results
            - exclude_terms: Terms that should NOT be in results
            
            Format as JSON only with no explanation.
            
2025-05-13 16:31:27,753 - DealFinderAI.EbayScraperAgent - INFO - Optimized search parameters: {'product_type': 'headphones', 'keywords': ['Marshall Headphones', 'Marshall Major', 'Marshall Monitor', 'Marshall Mid ANC'], 'price_range': None, 'brands': ['marshall'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True, 'category_hints': ['Electronics', 'Headphones'], 'must_include_terms': ['Marshall'], 'exclude_terms': ['headphones']}
2025-05-13 16:31:27,753 - DealFinderAI.EbayScraperAgent - INFO - Built optimized eBay search query: headphones marshall Marshall Headphones Marshall Major Marshall Monitor
2025-05-13 16:31:27,754 - DealFinderAI.EbayScraperAgent - INFO - Built eBay query: headphones marshall Marshall Headphones Marshall Major Marshall Monitor
2025-05-13 16:31:27,754 - DealFinderAI.EbayScraperAgent - INFO - Making eBay search request with params: {'_nkw': 'headphones marshall Marshall Headphones Marshall Major Marshall Monitor Electronics', '_sacat': '0', '_ipg': '96', '_sop': '15', 'LH_BIN': '1'}
2025-05-13 16:31:29,307 - DealFinderAI.EbayScraperAgent - INFO - Found 152 product listings
2025-05-13 16:31:29,309 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Marshall - Monitor III A.N.C. Wireless Noise Cancelling Over-the-Ear Headphones at 229.99 USD
2025-05-13 16:31:29,309 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Marshall - Monitor III A.N.C. Wireless Noise Cancelling Over-the-Ear Headphones at 229.99 USD
2025-05-13 16:31:29,311 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Marshall Monitor II Active Noise Canceling Over-Ear Bluetooth Headphone, Black at 119.99 USD
2025-05-13 16:31:29,311 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Marshall Monitor II Active Noise Canceling Over-Ear Bluetooth Headphone, Black at 119.99 USD
2025-05-13 16:31:29,312 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Marshall Major V On-Ear Bluetooth Headphones, Black - 100+ Hours Playtime at 79.99 USD
2025-05-13 16:31:29,312 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Marshall Major V On-Ear Bluetooth Headphones, Black - 100+ Hours Playtime at 79.99 USD
2025-05-13 16:31:29,313 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Marshall Major IV Bluetooth On-Ear Headphones - Black at 59.9 USD
2025-05-13 16:31:29,313 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Marshall Major IV Bluetooth On-Ear Headphones - Black at 59.9 USD
2025-05-13 16:31:29,314 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Marshall Major V On-Ear Wireless Bluetooth Headphones (Brown) at 99.99 USD
2025-05-13 16:31:29,314 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Marshall Major V On-Ear Wireless Bluetooth Headphones (Brown) at 99.99 USD
2025-05-13 16:31:29,315 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Marshall - Major V Wireless On-Ear Headphones - Black at 99.99 USD
2025-05-13 16:31:29,316 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Marshall - Major V Wireless On-Ear Headphones - Black at 99.99 USD
2025-05-13 16:31:29,316 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Marshall Model Monitor wired Over The Ear Headphones Gen 1 at 89.99 USD
2025-05-13 16:31:29,316 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Marshall Model Monitor wired Over The Ear Headphones Gen 1 at 89.99 USD
2025-05-13 16:31:29,318 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Marshall Major IV On-Ear Bluetooth Headphone Black at 53.95 USD
2025-05-13 16:31:29,318 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Marshall Major IV On-Ear Bluetooth Headphone Black at 53.95 USD
2025-05-13 16:31:29,991 - DealFinderAI.EbayScraperAgent - INFO - Extracted 8 products from eBay
2025-05-13 16:31:29,993 - DealFinderAI.EbayScraperAgent - INFO - Applying relevance filtering to 8 products
2025-05-13 16:31:29,993 - DealFinderAI.EbayScraperAgent - INFO - Filtered to 5 most relevant products
2025-05-13 16:31:29,994 - DealFinderAI.Controller - INFO - eBay returned 5 products
2025-05-13 16:31:29,994 - DealFinderAI.Controller - INFO - Total products before aggregation: 12
2025-05-13 16:31:29,994 - DealFinderAI.ResultsAggregatorAgent - INFO - Aggregating results for query: find the best deals on marshall headphones
2025-05-13 16:31:29,994 - DealFinderAI.ResultsAggregatorAgent - INFO - Found 3 results from various sources
2025-05-13 16:31:29,994 - DealFinderAI.ResultsAggregatorAgent - INFO - Source Amazon: 5 products
2025-05-13 16:31:29,995 - DealFinderAI.ResultsAggregatorAgent - INFO - Source Walmart: 2 products
2025-05-13 16:31:29,995 - DealFinderAI.ResultsAggregatorAgent - INFO - Source eBay: 5 products
2025-05-13 16:31:29,995 - DealFinderAI.ResultsAggregatorAgent - INFO - Total products extracted: 12
2025-05-13 16:31:29,995 - DealFinderAI.ResultsAggregatorAgent - INFO - Ranking 12 products
2025-05-13 16:31:29,995 - DealFinderAI.ResultsAggregatorAgent - INFO - Sorted 12 products by score
2025-05-13 16:31:29,995 - DealFinderAI.ResultsAggregatorAgent - INFO - Returning 10 diversified products
2025-05-13 16:31:29,995 - DealFinderAI.ResultsAggregatorAgent - INFO - Products after ranking: 10
2025-05-13 16:31:29,995 - DealFinderAI.ResultsAggregatorAgent - INFO - Final products: 10
2025-05-13 16:31:29,996 - DealFinderAI.Controller - INFO - Products after aggregation: 10
2025-05-13 16:31:29,996 - DealFinderAI.ProductComparisonAgent - INFO - Comparing products for query: find the best deals on marshall headphones
2025-05-13 16:31:29,996 - DealFinderAI.ProductComparisonAgent - INFO - Found 10 products to compare
2025-05-13 16:31:29,996 - DealFinderAI.ProductComparisonAgent - INFO - Grouping 10 products
2025-05-13 16:31:29,997 - DealFinderAI.ProductComparisonAgent - INFO - Created 0 product groups
2025-05-13 16:31:29,998 - DealFinderAI.ChatMemoryAgent - INFO - Storing context for conversation session_20250513162922_a3ce40c4
2025-05-13 16:31:29,998 - DealFinderAI.ChatMemoryAgent - INFO - Storing 10 products for conversation session_20250513162922_a3ce40c4
2025-05-13 16:31:29,998 - DealFinderAI.PresentationAgent - INFO - Preparing presentation for 10 products
2025-05-13 16:31:29,998 - DealFinderAI.PresentationAgent - INFO - Formatting 10 products for display
2025-05-13 16:31:29,998 - DealFinderAI.PresentationAgent - INFO - Product 1: 3.5mm to 3.5mm Major IV Cable Replacement Coiled Audio Cable Extension Cord Compatible with Marshall Major 2 II Major 3 III Major 4 IV Monitor II A.N.C Headphones - Price: $8.99 - Source: Amazon
2025-05-13 16:31:29,998 - DealFinderAI.PresentationAgent - INFO - Product 2: Marshall Major IV Bluetooth On-Ear Headphones - Black - Price: $59.90 - Source: eBay
2025-05-13 16:31:29,999 - DealFinderAI.PresentationAgent - INFO - Product 3: Marshall Major IV Bluetooth Over Ear Headphones, Black, Model 1005773 - Price: $70.99 - Source: Walmart
2025-05-13 16:31:29,999 - DealFinderAI.PresentationAgent - INFO - Product 4: Replacement Audio Cable for Marshall headphones, Compatible with Monitor Monitor II Major 2 II Major 3 III Major 4 IV Mid Headphones 3.5mm Male Stereo Jack Cord, 4 Ft , Inline Mic/Remote Controller - Price: $11.99 - Source: Amazon
2025-05-13 16:31:29,999 - DealFinderAI.PresentationAgent - INFO - Product 5: Replacement Ear Pads Cushions for Marshall Major I/II/III/IV/V ANC Bluetooth Wireless/Wired Headphones, for Major 1/2/3/4/5 Headset, Earpads with Noise Isolation Foam Black 1 Pair - Price: $8.99 - Source: Amazon
2025-05-13 16:31:29,999 - DealFinderAI.PresentationAgent - INFO - Product 6: Major V Cable, Spring OFC Replacement Cable Extension Cord for Marshall Major Monitor Mid I 1 II 2 III 3 IV 4 V 5 A.N.C Voice Bluetooth Headphones - Price: $8.99 - Source: Amazon
2025-05-13 16:31:29,999 - DealFinderAI.PresentationAgent - INFO - Product 7: Marshall Major V On-Ear Wireless Bluetooth Headphones (Brown) - Price: $99.99 - Source: eBay
2025-05-13 16:31:29,999 - DealFinderAI.PresentationAgent - INFO - Product 8: Marshall - Major V Wireless On-Ear Headphones - Black - Price: $99.99 - Source: eBay
2025-05-13 16:31:29,999 - DealFinderAI.PresentationAgent - INFO - Product 9: Marshall Major V On-Ear Bluetooth Headphones, Black - 100+ Hours Playtime - Price: $79.99 - Source: eBay
2025-05-13 16:31:29,999 - DealFinderAI.PresentationAgent - INFO - Product 10: Replacement Audio Cable for Marshall Headphones, Compatible with Monitor Major 2 II Major 3 III Major 4 IV Mid Headphones 3.5mm Male Stereo Jack Cord, 1.2 Meters, No Inline Control, Black - Price: $9.99 - Source: Amazon
2025-05-13 16:31:30,000 - DealFinderAI.ChatMemoryAgent - INFO - Storing context for conversation session_20250513162922_a3ce40c4
2025-05-13 16:31:30,000 - DealFinderAI.ChatMemoryAgent - INFO - Storing 10 products for conversation session_20250513162922_a3ce40c4
2025-05-13 16:31:30,000 - DealFinderAI.Controller - INFO - Successfully stored search results in memory
2025-05-13 16:32:34,917 - DealFinderAI.Controller - INFO - Processing user query: find the best deals on marshall headphones ranging between 100 and 200.
2025-05-13 16:32:34,919 - DealFinderAI.ChatMemoryAgent - INFO - Analyzing query: 'find the best deals on marshall headphones ranging between 100 and 200.' for conversation session_20250513162922_a3ce40c4
2025-05-13 16:32:34,920 - DealFinderAI.ChatMemoryAgent - INFO - Found 10 products in memory
2025-05-13 16:32:34,921 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: 
        You are an AI helping to analyze if a user's query is a follow-up question about previously shown products, or if it's a completely new search.

        Previous products shown to the user:
        Product 1: 3.5mm to 3.5mm Major IV Cable Replacement Coiled Audio Cable Extension Cord Compatible with Marshall Major 2 II Major 3 III Major 4 IV Monitor II A.N.C Headphones
Product 2: Marshall Major IV Bluetooth On-Ear Headphones - Black
Product 3: Marshall Major IV Bluetooth Over Ear Headphones, Black, Model 1005773
Product 4: Replacement Audio Cable for Marshall headphones, Compatible with Monitor Monitor II Major 2 II Major 3 III Major 4 IV Mid Headphones 3.5mm Male Stereo Jack Cord, 4 Ft , Inline Mic/Remote Controller
Product 5: Replacement Ear Pads Cushions for Marshall Major I/II/III/IV/V ANC Bluetooth Wireless/Wired Headphones, for Major 1/2/3/4/5 Headset, Earpads with Noise Isolation Foam Black 1 Pair

        User's new query: "find the best deals on marshall headphones ranging between 100 and 200."

        Please analyze if this query is:
        1. A follow-up question about the previously shown products (e.g., asking for more details, comparing them, etc.)
        2. A completely new search (e.g., asking about different products, starting a new topic)

        Return your analysis in JSON format:
        {
            "is_new_search": true/false,
            "is_follow_up": true/false,
            "reasoning": "brief explanation of your decision",
            "referenced_product_indices": [list of 0-based indices of referenced products, if any]
        }
        
        Only return the JSON, with no additional text.
        
2025-05-13 16:32:36,801 - DealFinderAI.Controller - INFO - Analyze response: {'is_follow_up': False, 'focused_product': None, 'referenced_products': [], 'products': []}
2025-05-13 16:32:36,801 - DealFinderAI.Controller - INFO - Is follow-up? False
2025-05-13 16:32:36,801 - DealFinderAI.Controller - INFO - Referenced products: 0
2025-05-13 16:32:36,801 - DealFinderAI.Controller - INFO - Processing as new search query
2025-05-13 16:32:36,801 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: find the best deals on marshall headphones ranging between 100 and 200.
2025-05-13 16:32:38,193 - DealFinderAI.GeminiAgent - WARNING - Failed to parse Gemini response as JSON: ```json
{
  "product_type": "headphones",
  "keywords": ["marshall"],
  "price_range": [100, 200],
  "brands": ["marshall"],
  "features": [],
  "sorting_preference": "price_low_to_high",
  "buy_it_now": true
}
```

2025-05-13 16:32:38,194 - DealFinderAI.Controller - INFO - Parsed search parameters: {'product_type': 'headphones', 'keywords': ['marshall'], 'price_range': [100, 200], 'brands': ['marshall'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-13 16:32:38,194 - DealFinderAI.AmazonScraperAgent - INFO - Searching Amazon for: {'product_type': 'headphones', 'keywords': ['marshall'], 'price_range': [100, 200], 'brands': ['marshall'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-13 16:32:38,195 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: 
            Optimize this search query for Amazon's search engine:
            
            "headphones marshall marshall"
            
            For Amazon searches, please:
            1. Focus on product-specific model numbers and identifiers if present
            2. Include key brand names (Amazon's A9 algorithm prioritizes brand matches)
            3. Remove generic words that may dilute results
            4. Add Amazon-specific terms that might improve results (like "Amazon's Choice" if looking for quality products)
            5. Optimize for Amazon's search algorithm which prioritizes exact matches and recent sales volume
            
            Return a JSON object with:
            - optimized_keywords: List of 3-5 optimized search terms (most important first)
            - amazon_category: Any Amazon department/category suggestion (Electronics, Books, etc.)
            - must_include_terms: Terms that MUST be in results
            - exclude_terms: Terms that should NOT be in results
            - amazon_search_filters: Any Amazon-specific filters to apply (Prime eligible, etc.)
            
            Format as JSON only with no explanation.
            
2025-05-13 16:32:39,464 - DealFinderAI.AmazonScraperAgent - INFO - Optimized search parameters: {'product_type': 'headphones', 'keywords': ['Marshall Headphones', 'Marshall Major IV', 'Marshall Monitor II', 'Marshall Bluetooth Headphones'], 'price_range': [100, 200], 'brands': ['marshall'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True, 'category': 'Electronics', 'must_include_terms': ['Marshall'], 'amazon_filters': ['Prime Eligible', 'Customer Reviews: 4 stars & up']}
2025-05-13 16:32:39,465 - DealFinderAI.AmazonScraperAgent - INFO - Built optimized Amazon search query: marshall headphones Marshall Headphones Marshall Major IV Marshall Monitor II
2025-05-13 16:32:39,465 - DealFinderAI.AmazonScraperAgent - INFO - Built Amazon query: marshall headphones Marshall Headphones Marshall Major IV Marshall Monitor II
2025-05-13 16:32:39,465 - DealFinderAI.AmazonScraperAgent - INFO - Making Amazon search request with params: {'k': 'marshall headphones Marshall Headphones Marshall Major IV Marshall Monitor II', 'ref': 'nb_sb_noss', 'crid': 1747168359, 'i': 'aps', 'search-alias': 'electronics', 'low-price': 100, 'high-price': 200, 's': 'price-asc-rank'}
2025-05-13 16:32:40,922 - DealFinderAI.AmazonScraperAgent - INFO - Found 3 product divs in search results
2025-05-13 16:32:40,927 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Major V On-Ear Bluetooth Headphone, Black at 111.05 USD
2025-05-13 16:32:40,927 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Major V On-Ear Bluetooth Headphone, Black at 111.05 USD
2025-05-13 16:32:40,930 - DealFinderAI.AmazonScraperAgent - WARNING - Incomplete data for ASIN B00590GH8K, falling back to Gemini extraction.
2025-05-13 16:32:40,930 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: 
            Extract detailed product information from this Amazon listing HTML:
            
            ```html
            <div class="sg-col-20-of-24 s-result-item s-asin sg-col-0-of-12 sg-col-16-of-20 sg-col s-widget-spacing-small sg-col-12-of-16" data-asin="B00590GH8K" data-component-type="s-search-result" data-index="4" data-uuid="72b37f9b-1e3c-4d7f-8d66-018c59b7e73c" id="72b37f9b-1e3c-4d7f-8d66-018c59b7e73c" role="listitem"><div class="sg-col-inner"><div cel_widget_id="MAIN-SEARCH_RESULTS-4" class="s-widget-container s-spacing-small s-widget-container-height-small celwidget slot=MAIN template=SEARCH_RESULTS widgetId=search-results_2" data-csa-c-item-id="amzn1.asin.1.B00590GH8K" data-csa-c-pos="2" data-csa-c-type="item" data-csa-op-log-render=""><span class="a-declarative" data-action="puis-card-container-declarative" data-csa-c-func-deps="aui-da-puis-card-container-declarative" data-csa-c-item-id="amzn1.asin.B00590GH8K" data-csa-c-owner="puis" data-csa-c-posx="2" data-csa-c-type="item" data-render-id="rllz5u8y3lym622njpmrlt0d9q" data-version-id="vgrbnavj5iylf2a1plj09cp2jv"><div class="puis-card-container s-card-container s-overflow-hidden aok-relative puis-include-content-margin puis puis-vgrbnavj5iylf2a1plj09cp2jv s-latency-cf-section puis-card-border" data-cy="asin-faceout-container"><div class="a-section"><div class="puisg-row"><div class="puisg-col puisg-col-4-of-4 puisg-col-4-of-8 puisg-col-4-of-12 puisg-col-4-of-16 puisg-col-4-of-20 puisg-col-4-of-24 puis-list-col-left"><div class="puisg-col-inner"><div class="a-section a-spacing-none aok-relative puis-status-badge-container s-list-status-badge-container"></div><div class="s-product-image-container aok-relative s-text-center s-image-overlay-grey puis-image-overlay-grey s-padding-left-small s-padding-right-small puis-flex-expand-height puis puis-vgrbnavj5iylf2a1plj09cp2jv" data-cy="image-container"><div class="aok-relative"><span class="rush-component" data-component-type="s-product-image" data-render-id="rllz5u8y3lym622njpmrlt0d9q" data-version-id="vgrbnavj5iylf2a1plj09cp2jv"><a class="a-link-normal s-no-outline" href="/Marshall-Stereo-Headphones-Remote-iPhone/dp/B00590GH8K/ref=sr_1_2?crid=1747168359&amp;dib=eyJ2IjoiMSJ9.cKf8lKDBUIfAjvRhms1Sn3i5iK8lAKphNLNqO-UciZXGjHj071QN20LucGBJIEps.dhZZtqbzCKfhB6qB6M14njbJPdVfEr5-uszEepoDYzU&amp;dib_tag=se&amp;keywords=marshall+headphones+Marshall+Headphones+Marshall+Major+IV+Marshall+Monitor+II&amp;qid=1747168359&amp;refinements=p_36%3A1253506011&amp;s=electronics&amp;sr=1-2" tabindex="-1"><div class="a-section aok-relative s-image-fixed-height"><img alt="Marshall Audio Major On-Ear Stereo Headphones with Mic and Remote for iPhone Black" aria-hidden="true" class="s-image" data-image-index="2" data-image-latency="s-product-image" data-image-load="" data-image-source-density="1" src="https://m.media-amazon.com/images/I/61xqPgreZBL._AC_UY218_.jpg" srcset="https://m.media-amazon.com/images/I/61xqPgreZBL._AC_UY218_.jpg 1x, https://m.media-amazon.com/images/I/61xqPgreZBL._AC_UY327_FMwebp_QL65_.jpg 1.5x, https://m.media-amazon.com/images/I/61xqPgreZBL._AC_UY436_FMwebp_QL65_.jpg 2x, https://m.media-amazon.com/images/I/61xqPgreZBL._AC_UY545_FMwebp_QL65_.jpg 2.5x, https://m.media-amazon.com/images/I/61xqPgreZBL._AC_UY654_FMwebp_QL65_.jpg 3x"/></div></a></span></div></div></div></div><div class="puisg-col puisg-col-0-of-4 puisg-col-0-of-8 puisg-col-4-of-12 puisg-col-8-of-16 puisg-col-12-of-20 puisg-col-12-of-24 puis-list-col-right"><div class="puisg-col-inner"><div class="a-section a-spacing-small a-spacing-top-small"><div class="a-section a-spacing-none puis-padding-right-small s-title-instructions-style" data-cy="title-recipe"><div class="a-row"><div class="a-row a-color-secondary"><h2 class="a-size-mini s-line-clamp-1"><span class="a-size-medium a-color-base">Marshall</span></h2></div></div><span class="rush-component" data-component-type="s-client-side-analytics" data-render-id="rllz5u8y3lym622njpmrlt0d9q" data-version-id="vgrbnavj5iylf2a1plj09cp2jv"><div class="s-csa-instrumentation-wrapper alf-search-csa-instrumentation-wrapper" data-csa-c-asin="B00590GH8K" data-csa-c-content-id="alf-asin-title" data-csa-c-layout="LIST" data-csa-c-slot-id="alf-title-block" data-csa-c-type="alf-af-component" data-csa-op-log-render="" style="display: block"><a class="a-link-normal s-line-clamp-2 s-link-style a-text-normal" href="/Marshall-Stereo-Headphones-Remote-iPhone/dp/B00590GH8K/ref=sr_1_2?crid=1747168359&amp;dib=eyJ2IjoiMSJ9.cKf8lKDBUIfAjvRhms1Sn3i5iK8lAKphNLNqO-UciZXGjHj071QN20LucGBJIEps.dhZZtqbzCKfhB6qB6M14njbJPdVfEr5-uszEepoDYzU&amp;dib_tag=se&amp;keywords=marshall+headphones+Marshall+Headphones+Marshall+Major+IV+Marshall+Monitor+II&amp;qid=1747168359&amp;refinements=p_36%3A1253506011&amp;s=electronics&amp;sr=1-2"><h2 aria-label="Audio Major On-Ear Stereo Headphones with Mic and Remote for iPhone Black" class="a-size-medium a-spacing-none a-color-base a-text-normal"><span>Audio Major On-Ear Stereo Headphones with Mic and Remote for iPhone Black</span></h2></a> </div></span></div><div class="a-section a-spacing-none a-spacing-top-micro" data-cy="reviews-block"><div class="a-row a-size-small"><span class="a-declarative" data-a-popover='{"position":"triggerBottom","popoverLabel":"3.8 out of 5 stars, rating details","url":"/review/widgets/average-customer-review/popover/ref=acr_search__popover?ie=UTF8&amp;asin=B00590GH8K&amp;ref_=acr_search__popover&amp;contextId=search","closeButton":true,"closeButtonLabel":""}' data-action="a-popover" data-csa-c-func-deps="aui-da-a-popover" data-csa-c-type="widget" data-render-id="rllz5u8y3lym622njpmrlt0d9q" data-version-id="vgrbnavj5iylf2a1plj09cp2jv"><a aria-label="3.8 out of 5 stars, rating details" class="a-popover-trigger a-declarative" href="javascript:void(0)" role="button"><i aria-hidden="true" class="a-icon a-icon-star-small a-star-small-4" data-cy="reviews-ratings-slot"><span class="a-icon-alt">3.8 out of 5 stars</span></i><i class="a-icon a-icon-popover"></i></a></span> <span class="rush-component" data-component-type="s-client-side-analytics" data-render-id="rllz5u8y3lym622njpmrlt0d9q" data-version-id="vgrbnavj5iylf2a1plj09cp2jv"><div class="s-csa-instrumentation-wrapper alf-search-csa-instrumentation-wrapper" data-csa-c-asin="B00590GH8K" data-csa-c-content-id="alf-customer-ratings-count-component" data-csa-c-layout="LIST" data-csa-c-slot-id="alf-reviews" data-csa-c-type="alf-af-component" data-csa-op-log-render="" style="display: inline-block"><a aria-label="1,114 ratings" class="a-link-normal s-underline-text s-underline-link-text s-link-style" href="/Marshall-Stereo-Headphones-Remote-iPhone/dp/B00590GH8K/ref=sr_1_2?crid=1747168359&amp;dib=eyJ2IjoiMSJ9.cKf8lKDBUIfAjvRhms1Sn3i5iK8lAKphNLNqO-UciZXGjHj071QN20LucGBJIEps.dhZZtqbzCKfhB6qB6M14njbJPdVfEr5-uszEepoDYzU&amp;dib_tag=se&amp;keywords=marshall+headphones+Marshall+Headphones+Marshall+Major+IV+Marshall+Monitor+II&amp;qid=1747168359&amp;refinements=p_36%3A1253506011&amp;s=electronics&amp;sr=1-2#customerReviews"><span aria-hidden="true" class="a-size-base s-underline-text">1,114</span> </a> </div></span></div></div><div class="puisg-row"><div class="puisg-col puisg-col-4-of-4 puisg-col-4-of-8 puisg-col-4-of-12 puisg-col-4-of-16 puisg-col-4-of-20 puisg-col-4-of-24"><div class="puisg-col-inner"><div class="a-section a-spacing-none a-spacing-top-micro puis-price-instructions-style" data-cy="price-recipe"><div class="a-row a-size-base a-color-base"><div class="a-row"></div><div class="a-row"></div></div></div><div class="a-section a-spacing-none a-spacing-top-micro" data-cy="delivery-recipe"><div class="a-row a-size-base a-color-secondary s-align-children-center"></div></div><div class="a-section a-spacing-none a-spacing-top-mini"><div class="puis-see-details-content"><div data-csa-c-content-id="s-search-see-details-button" data-csa-c-device-env="WEB" data-csa-c-device-os="UNRECOGNIZED" data-csa-c-device-type="DESKTOP" data-csa-c-item-id="B00590GH8K" data-csa-c-item-type="asin" data-csa-c-type="action"><span class="a-button a-button-base"><span class="a-button-inner"><a class="a-button-text" href="/Marshall-Stereo-Headphones-Remote-iPhone/dp/B00590GH8K/ref=sr_1_2_so_HEADPHONES?crid=1747168359&amp;dib=eyJ2IjoiMSJ9.cKf8lKDBUIfAjvRhms1Sn3i5iK8lAKphNLNqO-UciZXGjHj071QN20LucGBJIEps.dhZZtqbzCKfhB6qB6M14njbJPdVfEr5-uszEepoDYzU&amp;dib_tag=se&amp;keywords=marshall+headphones+Marshall+Headphones+Marshall+Major+IV+Marshall+Monitor+II&amp;qid=1747168359&amp;refinements=p_36%3A1253506011&amp;s=electronics&amp;sr=1-2">See options</a></span></span></div></div></div><div class="a-section a-spacing-none a-spacing-top-mini" data-cy="secondary-offer-recipe"><div class="a-row a-size-base a-color-secondary"><span class="a-size-base a-color-secondary">No featured offers available</span><br/><span class="a-color-base">$175.00</span><span class="a-letter-space"></span><span class="a-declarative" data-action="s-show-all-offers-display" data-csa-c-func-deps="aui-da-s-show-all-offers-display" data-csa-c-type="widget" data-render-id="rllz5u8y3lym622njpmrlt0d9q" data-s-show-all-offers-display='{"assetMismatch":"Abandon","url":"/gp/aod/ajax/ref=sr_1_2_aod?asin=B00590GH8K&amp;pc=sp&amp;s=electronics&amp;keywords=marshall+headphones+Marshall+Headphones+Marshall+Major+IV+Marshall+Monitor+II&amp;crid=1747168359&amp;dib_tag=se&amp;dib=eyJ2IjoiMSJ9.cKf8lKDBUIfAjvRhms1Sn3i5iK8lAKphNLNqO-UciZXGjHj071QN20LucGBJIEps.dhZZtqbzCKfhB6qB6M14njbJPdVfEr5-uszEepoDYzU&amp;qid=1747168359&amp;sr=1-2&amp;refinements=p_36%3A1253506011","fallbackUrl":"/gp/offer-listing/B00590GH8K/ref=sr_1_2_olp?s=electronics&amp;keywords=marshall+headphones+Marshall+Headphones+Marshall+Major+IV+Marshall+Monitor+II&amp;crid=1747168359&amp;dib_tag=se&amp;dib=eyJ2IjoiMSJ9.cKf8lKDBUIfAjvRhms1Sn3i5iK8lAKphNLNqO-UciZXGjHj071QN20LucGBJIEps.dhZZtqbzCKfhB6qB6M14njbJPdVfEr5-uszEepoDYzU&amp;qid=1747168359&amp;sr=1-2&amp;refinements=p_36%3A1253506011"}' data-version-id="vgrbnavj5iylf2a1plj09cp2jv"><a class="a-link-normal s-link-style s-underline-text s-underline-link-text" href="/gp/offer-listing/B00590GH8K/ref=sr_1_2_olp?s=electronics&amp;keywords=marshall+headphones+Marshall+Headphones+Marshall+Major+IV+Marshall+Monitor+II&amp;crid=1747168359&amp;dib_tag=se&amp;dib=eyJ2IjoiMSJ9.cKf8lKDBUIfAjvRhms1Sn3i5iK8lAKphNLNqO-UciZXGjHj071QN20LucGBJIEps.dhZZtqbzCKfhB6qB6M14njbJPdVfEr5-uszEepoDYzU&amp;qid=1747168359&amp;sr=1-2&amp;refinements=p_36%3A1253506011">(1 new offer)</a></span><div class="a-section aok-hidden" id="all-offers-display"><div class="a-spinner-wrapper aok-hidden" id="all-offers-display-spinner"><span class="a-spinner a-spinner-medium"></span></div></div><span class="a-declarative" data-action="close-all-offers-display" data-csa-c-func-deps="aui-da-close-all-offers-display" data-csa-c-type="widget" data-render-id="rllz5u8y3lym622njpmrlt0d9q" data-version-id="vgrbnavj5iylf2a1plj09cp2jv"><div class="a-section aok-hidden aod-darken-background" id="aod-background"></div></span></div></div></div></div><div class="puisg-col puisg-col-0-of-4 puisg-col-0-of-8 puisg-col-4-of-12 puisg-col-4-of-16 puisg-col-8-of-20 puisg-col-8-of-24"><div class="puisg-col-inner"></div></div></div><div class="puisg-row"></div></div></div></div></div></div></div></span></div></div></div>
            ```
            
            Extract:
            - title: Full product title
            - price: Numeric price value only (no currency symbol)
            - was_price: Original price before discount (if present)
            - currency: Currency code (e.g., USD)
            - url: Product URL
            - image_url: Main product image URL
            - rating: Star rating (0-5)
            - reviews: Number of reviews
            - asin: Amazon ASIN
            - is_prime: Boolean for Prime eligible
            - is_sponsored: Boolean for sponsored listing
            - is_amazon_choice: Boolean for Amazon's Choice
            - is_best_seller: Boolean for Best Seller
            - description: Any additional description text
            - delivery_info: Delivery/shipping information
            - out_of_stock: Boolean for out of stock status
            
            Return a clean JSON object with these fields. Use null for missing values.
            
2025-05-13 16:32:44,111 - DealFinderAI.AmazonScraperAgent - INFO - Gemini extracted: Marshall Audio Major On-Ear Stereo Headphones with Mic and Remote for iPhone Black at 175.0 USD
2025-05-13 16:32:44,112 - DealFinderAI.AmazonScraperAgent - INFO - Gemini used for product extraction
2025-05-13 16:32:44,112 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Marshall Audio Major On-Ear Stereo Headphones with Mic and Remote for iPhone Black at 175.0 USD
2025-05-13 16:32:44,112 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Marshall Audio Major On-Ear Stereo Headphones with Mic and Remote for iPhone Black at 175.0 USD
2025-05-13 16:32:44,129 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Monitor II Active Noise Canceling Over-Ear Bluetooth Headphone, Black at 189.0 USD
2025-05-13 16:32:44,129 - DealFinderAI.AmazonScraperAgent - INFO - Extracted product: Monitor II Active Noise Canceling Over-Ear Bluetooth Headphone, Black at 189.0 USD
2025-05-13 16:32:44,791 - DealFinderAI.AmazonScraperAgent - INFO - Extracted 3 products from Amazon
2025-05-13 16:32:44,793 - DealFinderAI.Controller - INFO - Amazon response content: {'source': 'Amazon', 'query': 'marshall headphones Marshall Headphones Marshall Major IV Marshall Monitor II', 'products': [{'title': 'Major V On-Ear Bluetooth Headphone, Black', 'price': 111.05, 'was_price': 149.99, 'currency': 'USD', 'url': 'https://www.amazon.com/Marshall-Major-Bluetooth-Headphone-Black/dp/B0D1VN2VB7/ref=sr_1_1?crid=1747168359&dib=eyJ2IjoiMSJ9.cKf8lKDBUIfAjvRhms1Sn3i5iK8lAKphNLNqO-UciZXGjHj071QN20LucGBJIEps.dhZZtqbzCKfhB6qB6M14njbJPdVfEr5-uszEepoDYzU&dib_tag=se&keywords=marshall+headphones+Marshall+Headphones+Marshall+Major+IV+Marshall+Monitor+II&qid=1747168359&refinements=p_36%3A1253506011&s=electronics&sr=1-1', 'image_url': 'https://m.media-amazon.com/images/I/51K8eJaYsKL._AC_UY218_.jpg', 'rating': 4.4, 'reviews': 963, 'is_sponsored': False, 'is_prime': False, 'is_amazon_choice': False, 'is_best_seller': False, 'asin': 'B0D1VN2VB7', 'description': 'MarshallMajor V On-Ear Bluetooth Headphone, Black 4.4 out of 5 stars 963 500+ bought in past monthPrice, product page$111.05$111.05 List: $149.99List: $149.99$149.99FREE delivery Sun, May 18Or fastest delivery Tomorrow, May 14Add to cartMore Buying Choices$96.15(5+ used & new offers)', 'delivery_info': '500+ bought in past month', 'out_of_stock': False, 'source': 'Amazon'}, {'title': 'Marshall Audio Major On-Ear Stereo Headphones with Mic and Remote for iPhone Black', 'price': 175.0, 'was_price': None, 'currency': None, 'url': '/Marshall-Stereo-Headphones-Remote-iPhone/dp/B00590GH8K/ref=sr_1_2?crid=1747168359&dib=eyJ2IjoiMSJ9.cKf8lKDBUIfAjvRhms1Sn3i5iK8lAKphNLNqO-UciZXGjHj071QN20LucGBJIEps.dhZZtqbzCKfhB6qB6M14njbJPdVfEr5-uszEepoDYzU&dib_tag=se&keywords=marshall+headphones+Marshall+Headphones+Marshall+Major+IV+Marshall+Monitor+II&qid=1747168359&refinements=p_36%3A1253506011&s=electronics&sr=1-2', 'image_url': 'https://m.media-amazon.com/images/I/61xqPgreZBL._AC_UY218_.jpg', 'rating': 3.8, 'reviews': 1114, 'asin': 'B00590GH8K', 'is_prime': False, 'is_sponsored': False, 'is_amazon_choice': False, 'is_best_seller': False, 'description': None, 'delivery_info': None, 'out_of_stock': False, 'source': 'Amazon'}, {'title': 'Monitor II Active Noise Canceling Over-Ear Bluetooth Headphone, Black', 'price': 189.0, 'was_price': 319.99, 'currency': 'USD', 'url': 'https://www.amazon.com/Marshall-Canceling-Over-Ear-Bluetooth-Headphone/dp/B084R2WVLX/ref=sr_1_3?crid=1747168359&dib=eyJ2IjoiMSJ9.cKf8lKDBUIfAjvRhms1Sn3i5iK8lAKphNLNqO-UciZXGjHj071QN20LucGBJIEps.dhZZtqbzCKfhB6qB6M14njbJPdVfEr5-uszEepoDYzU&dib_tag=se&keywords=marshall+headphones+Marshall+Headphones+Marshall+Major+IV+Marshall+Monitor+II&qid=1747168359&refinements=p_36%3A1253506011&s=electronics&sr=1-3', 'image_url': 'https://m.media-amazon.com/images/I/71nzn2x5QgL._AC_UY218_.jpg', 'rating': 4.2, 'reviews': 3431, 'is_sponsored': False, 'is_prime': False, 'is_amazon_choice': False, 'is_best_seller': False, 'asin': 'B084R2WVLX', 'description': 'MarshallMonitor II Active Noise Canceling Over-Ear Bluetooth Headphone, Black 4.2 out of 5 stars 3,431 Price, product page$189.00$189.00 List: $319.99List: $319.99$319.99FREE delivery Sun, May 18Or fastest delivery Tomorrow, May 14Add to cartMore Buying Choices$173.88(8+ used & new offers)', 'delivery_info': 'List:', 'out_of_stock': False, 'source': 'Amazon'}]}
2025-05-13 16:32:44,794 - DealFinderAI.Controller - INFO - Amazon returned 3 products
2025-05-13 16:32:44,794 - DealFinderAI.WalmartScraperAgent - INFO - Searching Walmart for: {'product_type': 'headphones', 'keywords': ['marshall'], 'price_range': [100, 200], 'brands': ['marshall'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-13 16:32:44,794 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: 
            Optimize this search query for Walmart's search engine:
            
            "headphones marshall marshall"
            
            For Walmart searches, please:
            1. Focus on model numbers and specific identifiers if present
            2. Include key brand names (Walmart's search works well with brand names)
            3. Remove generic words that may dilute results
            4. Add Walmart-specific terms that might improve results (like "Rollback" if looking for deals)
            5. Prioritize precise product names and specifications
            
            Return a JSON object with:
            - optimized_keywords: List of 3-5 optimized search terms (most important first)
            - department_hint: Any Walmart department suggestion (Electronics, Home, etc.)
            - must_include_terms: Terms that MUST be in results
            - exclude_terms: Terms that should NOT be in results
            - walmart_specific_filters: Any Walmart-specific filters to apply
            
            Format as JSON only with no explanation.
            
2025-05-13 16:32:45,646 - DealFinderAI.WalmartScraperAgent - INFO - Optimized search parameters: {'product_type': 'headphones', 'keywords': ['Marshall Headphones', 'Marshall Major IV', 'Marshall Monitor II ANC', 'Marshall earbuds'], 'price_range': [100, 200], 'brands': ['marshall'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True, 'department': 'Electronics', 'must_include_terms': ['Marshall']}
2025-05-13 16:32:45,646 - DealFinderAI.WalmartScraperAgent - INFO - Built optimized Walmart search query: marshall headphones Marshall Headphones Marshall Major IV Marshall Monitor II ANC
2025-05-13 16:32:45,646 - DealFinderAI.WalmartScraperAgent - INFO - Built Walmart query: marshall headphones Marshall Headphones Marshall Major IV Marshall Monitor II ANC
2025-05-13 16:32:45,646 - DealFinderAI.WalmartScraperAgent - INFO - Making Walmart search request with params: {'q': 'marshall headphones Marshall Headphones Marshall Major IV Marshall Monitor II ANC Electronics', 'page': 1, 'affinityOverride': 'default', 'min_price': 100, 'max_price': 200, 'sort': 'price_low'}
2025-05-13 16:32:47,614 - DealFinderAI.WalmartScraperAgent - INFO - Extracted 0 products from JSON data
2025-05-13 16:32:47,615 - DealFinderAI.WalmartScraperAgent - INFO - JSON extraction failed, falling back to HTML extraction
2025-05-13 16:32:47,621 - DealFinderAI.WalmartScraperAgent - INFO - Found 0 product divs in HTML
2025-05-13 16:32:47,621 - DealFinderAI.WalmartScraperAgent - INFO - Extracted 0 products from HTML
2025-05-13 16:32:48,197 - DealFinderAI.WalmartScraperAgent - INFO - Extracted 0 products from Walmart
2025-05-13 16:32:48,198 - DealFinderAI.Controller - INFO - Walmart returned 0 products
2025-05-13 16:32:48,198 - DealFinderAI.EbayScraperAgent - INFO - Searching eBay for: {'product_type': 'headphones', 'keywords': ['marshall'], 'price_range': [100, 200], 'brands': ['marshall'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True}
2025-05-13 16:32:48,199 - DealFinderAI.GeminiAgent - INFO - Processing query with Gemini: 
            Optimize this search query for eBay's search engine:
            
            "headphones marshall marshall"
            
            For eBay searches, please:
            1. Focus on exact model numbers and specific part identifiers if present
            2. Include key brand names
            3. Remove generic words that may dilute results
            4. Add eBay-specific terms that might improve results
            5. Optimize for finding the most relevant listings
            
            Return a JSON object with:
            - optimized_keywords: List of 3-5 optimized search terms (most important first)
            - category_hints: Any eBay category suggestions
            - must_include_terms: Terms that MUST be in results
            - exclude_terms: Terms that should NOT be in results
            
            Format as JSON only with no explanation.
            
2025-05-13 16:32:48,948 - DealFinderAI.EbayScraperAgent - INFO - Optimized search parameters: {'product_type': 'headphones', 'keywords': ['Marshall Headphones', 'Marshall Major', 'Marshall Monitor', 'Marshall Mid ANC'], 'price_range': [100, 200], 'brands': ['marshall'], 'features': [], 'sorting_preference': 'price_low_to_high', 'buy_it_now': True, 'category_hints': ['Electronics', 'Headphones'], 'must_include_terms': ['Marshall']}
2025-05-13 16:32:48,948 - DealFinderAI.EbayScraperAgent - INFO - Built optimized eBay search query: headphones marshall Marshall Headphones Marshall Major Marshall Monitor
2025-05-13 16:32:48,949 - DealFinderAI.EbayScraperAgent - INFO - Built eBay query: headphones marshall Marshall Headphones Marshall Major Marshall Monitor
2025-05-13 16:32:48,949 - DealFinderAI.EbayScraperAgent - INFO - Making eBay search request with params: {'_nkw': 'headphones marshall Marshall Headphones Marshall Major Marshall Monitor Electronics', '_sacat': '0', '_ipg': '96', '_udlo': 100, '_udhi': 200, '_sop': '15', 'LH_BIN': '1'}
2025-05-13 16:32:50,419 - DealFinderAI.EbayScraperAgent - INFO - Found 122 product listings
2025-05-13 16:32:50,421 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Marshall Monitor II Active Noise Canceling Over-Ear Bluetooth Headphone, Black at 119.99 USD
2025-05-13 16:32:50,421 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Marshall Monitor II Active Noise Canceling Over-Ear Bluetooth Headphone, Black at 119.99 USD
2025-05-13 16:32:50,422 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: BRAND NEW Marshall Major V On-Ear Bluetooth Wireless Black Headphones at 104.99 USD
2025-05-13 16:32:50,422 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: BRAND NEW Marshall Major V On-Ear Bluetooth Wireless Black Headphones at 104.99 USD
2025-05-13 16:32:50,423 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Marshall Major V On-Ear Bluetooth Wireless Headphones at 112.0 USD
2025-05-13 16:32:50,423 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Marshall Major V On-Ear Bluetooth Wireless Headphones at 112.0 USD
2025-05-13 16:32:50,424 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Marshall Monitor II ANC Wireless Noise Canceling Over-Ear Bluetooth Headphones at 109.0 USD
2025-05-13 16:32:50,424 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Marshall Monitor II ANC Wireless Noise Canceling Over-Ear Bluetooth Headphones at 109.0 USD
2025-05-13 16:32:50,425 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Marshall Monitor II Active Noise Canceling Over-Ear Bluetooth Headphones at 199.0 USD
2025-05-13 16:32:50,425 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Marshall Monitor II Active Noise Canceling Over-Ear Bluetooth Headphones at 199.0 USD
2025-05-13 16:32:50,426 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Marshall Major V On the Ear Wireless Headphones - Black at 120.0 USD
2025-05-13 16:32:50,426 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Marshall Major V On the Ear Wireless Headphones - Black at 120.0 USD
2025-05-13 16:32:50,427 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: NEW Marshall Major V On-Ear Bluetooth Headphone Bluetooth Signature Sound Black at 111.97 USD
2025-05-13 16:32:50,427 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: NEW Marshall Major V On-Ear Bluetooth Headphone Bluetooth Signature Sound Black at 111.97 USD
2025-05-13 16:32:50,428 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Marshall Monitor ii Active Noise Cancellation Bluetooth Headphones [DJ730] at 155.99 USD
2025-05-13 16:32:50,428 - DealFinderAI.EbayScraperAgent - INFO - Extracted product: Marshall Monitor ii Active Noise Cancellation Bluetooth Headphones [DJ730] at 155.99 USD
2025-05-13 16:32:51,277 - DealFinderAI.EbayScraperAgent - INFO - Extracted 8 products from eBay
2025-05-13 16:32:51,278 - DealFinderAI.EbayScraperAgent - INFO - Applying relevance filtering to 8 products
2025-05-13 16:32:51,279 - DealFinderAI.EbayScraperAgent - INFO - Filtered to 5 most relevant products
2025-05-13 16:32:51,279 - DealFinderAI.Controller - INFO - eBay returned 5 products
2025-05-13 16:32:51,279 - DealFinderAI.Controller - INFO - Total products before aggregation: 8
2025-05-13 16:32:51,279 - DealFinderAI.ResultsAggregatorAgent - INFO - Aggregating results for query: find the best deals on marshall headphones ranging between 100 and 200.
2025-05-13 16:32:51,279 - DealFinderAI.ResultsAggregatorAgent - INFO - Found 3 results from various sources
2025-05-13 16:32:51,280 - DealFinderAI.ResultsAggregatorAgent - INFO - Source Amazon: 3 products
2025-05-13 16:32:51,280 - DealFinderAI.ResultsAggregatorAgent - INFO - Source Walmart: 0 products
2025-05-13 16:32:51,280 - DealFinderAI.ResultsAggregatorAgent - INFO - Source eBay: 5 products
2025-05-13 16:32:51,280 - DealFinderAI.ResultsAggregatorAgent - INFO - Total products extracted: 8
2025-05-13 16:32:51,280 - DealFinderAI.ResultsAggregatorAgent - INFO - Ranking 8 products
2025-05-13 16:32:51,280 - DealFinderAI.ResultsAggregatorAgent - INFO - Sorted 8 products by score
2025-05-13 16:32:51,281 - DealFinderAI.ResultsAggregatorAgent - INFO - Returning 8 diversified products
2025-05-13 16:32:51,281 - DealFinderAI.ResultsAggregatorAgent - INFO - Products after ranking: 8
2025-05-13 16:32:51,281 - DealFinderAI.ResultsAggregatorAgent - INFO - Final products: 8
2025-05-13 16:32:51,281 - DealFinderAI.Controller - INFO - Products after aggregation: 8
2025-05-13 16:32:51,281 - DealFinderAI.ProductComparisonAgent - INFO - Comparing products for query: find the best deals on marshall headphones ranging between 100 and 200.
2025-05-13 16:32:51,281 - DealFinderAI.ProductComparisonAgent - INFO - Found 8 products to compare
2025-05-13 16:32:51,281 - DealFinderAI.ProductComparisonAgent - INFO - Grouping 8 products
2025-05-13 16:32:51,282 - DealFinderAI.ProductComparisonAgent - INFO - Created 0 product groups
2025-05-13 16:32:51,282 - DealFinderAI.ChatMemoryAgent - INFO - Storing context for conversation session_20250513162922_a3ce40c4
2025-05-13 16:32:51,282 - DealFinderAI.ChatMemoryAgent - INFO - Storing 8 products for conversation session_20250513162922_a3ce40c4
2025-05-13 16:32:51,282 - DealFinderAI.PresentationAgent - INFO - Preparing presentation for 8 products
2025-05-13 16:32:51,282 - DealFinderAI.PresentationAgent - INFO - Formatting 8 products for display
2025-05-13 16:32:51,282 - DealFinderAI.PresentationAgent - INFO - Product 1: Major V On-Ear Bluetooth Headphone, Black - Price: $111.05 - Source: Amazon
2025-05-13 16:32:51,282 - DealFinderAI.PresentationAgent - INFO - Product 2: BRAND NEW Marshall Major V On-Ear Bluetooth Wireless Black Headphones - Price: $104.99 - Source: eBay
2025-05-13 16:32:51,283 - DealFinderAI.PresentationAgent - INFO - Product 3: Monitor II Active Noise Canceling Over-Ear Bluetooth Headphone, Black - Price: $189.00 - Source: Amazon
2025-05-13 16:32:51,283 - DealFinderAI.PresentationAgent - INFO - Product 4: Marshall Audio Major On-Ear Stereo Headphones with Mic and Remote for iPhone Black - Price: $175.00 - Source: Amazon
2025-05-13 16:32:51,283 - DealFinderAI.PresentationAgent - INFO - Product 5: NEW Marshall Major V On-Ear Bluetooth Headphone Bluetooth Signature Sound Black - Price: $111.97 - Source: eBay
2025-05-13 16:32:51,283 - DealFinderAI.PresentationAgent - INFO - Product 6: Marshall Major V On-Ear Bluetooth Wireless Headphones - Price: $112.00 - Source: eBay
2025-05-13 16:32:51,283 - DealFinderAI.PresentationAgent - INFO - Product 7: Marshall Monitor II Active Noise Canceling Over-Ear Bluetooth Headphones - Price: $199.00 - Source: eBay
2025-05-13 16:32:51,283 - DealFinderAI.PresentationAgent - INFO - Product 8: Marshall Major V On the Ear Wireless Headphones - Black - Price: $120.00 - Source: eBay
2025-05-13 16:32:51,283 - DealFinderAI.ChatMemoryAgent - INFO - Storing context for conversation session_20250513162922_a3ce40c4
2025-05-13 16:32:51,284 - DealFinderAI.ChatMemoryAgent - INFO - Storing 8 products for conversation session_20250513162922_a3ce40c4
2025-05-13 16:32:51,284 - DealFinderAI.Controller - INFO - Successfully stored search results in memory
